var e,t=Object.defineProperty,i=(e,i,a)=>(((e,i,a)=>{i in e?t(e,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[i]=a})(e,"symbol"!=typeof i?i+"":i,a),a);function a(){import.meta.url,import("_").catch((()=>1))}import{b as o,i as l,s as n,d as r,l as s,u as d,a as c,r as m,m as p,v as u,c as h,e as y,A as b,t as _,f as v,Q as f,h as g,g as k,I as w,o as S,j as z,k as V,D as x,F as A,S as T,n as C,C as F,p as L,q as I,Z as M,w as j,T as B,x as R,y as D,z as q,B as P,E,G as N,H as O,J as U,K as H,L as W,M as $,N as G,O as Y,P as K,Y as X,_ as J,U as Z,R as Q,V as ee,W as te,X as ie,$ as ae,a0 as oe,a1 as le,a2 as ne,a3 as re,a4 as se,a5 as de,a6 as ce,a7 as me,a8 as pe,a9 as ue,aa as he,ab as ye,ac as be,ad as _e,ae as ve,af as fe,ag as ge,ah as ke,ai as we,aj as Se,ak as ze,al as Ve,am as xe,an as Ae,ao as Te,ap as Ce,aq as Fe,ar as Le,as as Ie,at as Me,au as je,av as Be,aw as Re,ax as De,ay as qe,az as Pe,aA as Ee,aB as Ne,aC as Oe,aD as Ue,aE as He,aF as We,aG as $e,aH as Ge,aI as Ye,aJ as Ke,aK as Xe,aL as Je,aM as Ze,aN as Qe,aO as et,aP as tt,aQ as it,aR as at,aS as ot,aT as lt,aU as nt,aV as rt,aW as st,aX as dt,aY as ct,aZ as mt,a_ as pt,a$ as ut,b0 as ht,b1 as yt,b2 as bt,b3 as _t,b4 as vt,b5 as ft,b6 as gt,b7 as kt,b8 as wt,b9 as St,ba as zt,bb as Vt,bc as xt,bd as At,be as Tt,bf as Ct,bg as Ft,bh as Lt,bi as It,bj as Mt,bk as jt,bl as Bt,bm as Rt,bn as Dt,bo as qt,bp as Pt,bq as Et,br as Nt,bs as Ot,bt as Ut,bu as Ht,bv as Wt,bw as $t,bx as Gt,by as Yt,bz as Kt,bA as Xt,bB as Jt,bC as Zt,bD as Qt,bE as ei,bF as ti,bG as ii,bH as ai,bI as oi,bJ as li,bK as ni,bL as ri,bM as si,bN as di,bO as ci,bP as mi,bQ as pi,bR as ui,bS as hi,bT as yi,bU as bi,bV as _i,bW as vi,bX as fi,bY as gi,bZ as ki,b_ as wi,b$ as Si,c0 as zi,c1 as Vi,c2 as xi,c3 as Ai,c4 as Ti,c5 as Ci,c6 as Fi,c7 as Li,c8 as Ii,c9 as Mi,ca as ji,cb as Bi,cc as Ri,cd as Di,ce as qi,cf as Pi,cg as Ei,ch as Ni,ci as Oi,cj as Ui,ck as Hi,cl as Wi,cm as $i,cn as Gi,co as Yi,cp as Ki,cq as Xi,cr as Ji,cs as Zi,ct as Qi,cu as ea,cv as ta,cw as ia,cx as aa,cy as oa,cz as la,cA as na,cB as ra,cC as sa,cD as da,cE as ca,cF as ma,cG as pa,cH as ua,cI as ha,cJ as ya,cK as ba,cL as _a,cM as va,cN as fa,cO as ga,cP as ka,cQ as wa,cR as Sa,cS as za,cT as Va,cU as xa,cV as Aa,cW as Ta,cX as Ca,cY as Fa,cZ as La,c_ as Ia,c$ as Ma,d0 as ja,d1 as Ba,d2 as Ra,d3 as Da,d4 as qa,d5 as Pa,d6 as Ea,d7 as Na,d8 as Oa,d9 as Ua,da as Ha,db as Wa,dc as $a,dd as Ga,de as Ya,df as Ka,dg as Xa,dh as Ja,di as Za,dj as Qa,dk as eo,dl as to,dm as io,dn as ao,dp as oo,dq as lo,dr as no,ds as ro,dt as so,du as co,dv as mo,dw as po,dx as uo,dy as ho,dz as yo,dA as bo,dB as _o,dC as vo,dD as fo,dE as go,dF as ko,dG as wo,dH as So,dI as zo,dJ as Vo,dK as xo,dL as Ao,dM as To,dN as Co,dO as Fo,dP as Lo,dQ as Io,dR as Mo,dS as jo,dT as Bo,dU as Ro,dV as Do,dW as qo,dX as Po,dY as Eo,dZ as No,d_ as Oo,d$ as Uo}from"./vendor-83ed1c12.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const i of e)if("childList"===i.type)for(const e of i.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const Ho=(e=[])=>{const t=[],i=(e=[])=>e.forEach((e=>{const a=e.fields||[],o=e.child?[e.child]:[];i([...a,...o]),t.push(e)}));return i(e),t},Wo=e=>Ho(e).filter((({name:e})=>e)).map((({name:e,type:t})=>({name:e,type:t}))).reduce(((e,{name:t,type:i})=>e.some((e=>{const a=e.name===t;return a&&e.type!=i&&console.warn("CONFLICT name=".concat(t," type1=").concat(e.type.toString()," type2=").concat(i.toString())),a}))?e:[...e,{name:t,type:i}]),[]);window.mapSchema=(e,{textFieldSize:t=96,itemFieldSize:i=48,comboFieldSize:a=48,dateFieldSize:l=12,timeFieldSize:n=12}={})=>Wo(e).map((({type:e,name:r})=>e===o.Items?{key:r,type:"string",status:"available",required:!1,array:!0,size:i,default:null}:e===o.Combo?{key:r,type:"string",status:"available",required:!1,array:!0,size:a,default:null}:e===o.Time?{key:r,type:"string",status:"available",required:!1,array:!1,size:n,default:null}:e===o.Radio?{key:r,type:"string",status:"available",required:!1,array:!1,size:radioFieldSize,default:null}:e===o.Date?{key:r,type:"string",status:"available",required:!1,array:!1,size:l,default:null}:e===o.Checkbox||e===o.Switch?{key:r,type:"boolean",status:"available",required:!1,array:!1,default:null}:(e===o.Component&&console.warn("Field name=".concat(r," is a component field. By default we are using nvarchar[").concat(t,"]. Double check manually for an array field")),{key:r,type:"string",status:"available",required:!1,array:!1,size:t,default:null}))).map((e=>JSON.stringify(e,null,2))).join(",\n"),window.mapFields=Wo,window.mapTypes=e=>Wo(e).map((({name:e,type:t})=>'"'.concat(e,'": ').concat(t===o.Combo?"string[] | null":t===o.Text?"string":t===o.Items?"string[] | null":t===o.Date||t===o.Radio||t===o.Complete||t===o.Time?"string":t===o.Checkbox||t===o.Switch?"boolean":(console.warn("UNKNOWN TYPE name=".concat(e," type=").concat(t.toString())),"string"),";"))).join("\n"),window.deepFlat=Ho,"ResizeObserver"in window||(window.ResizeObserver=l),n.polyfill(),r.extend(s),r.extend(d),r.extend(c),r.locale(m);class $o{constructor(){i(this,"_alerts",[]),i(this,"hideCurrent",(()=>{this._alerts.length>0&&this._alerts.shift()})),i(this,"notify",(e=>{this.hideCurrent(),this._alerts.push({key:u(),message:e})})),p(this)}get current(){return this._alerts.length?this._alerts[0]:null}}const Go={projectId:"64b53d0c41fcf5093b12",projectName:"RealEstate",databases:[{$id:"64c4de8e7b30179809ef",name:"DATABASE",$createdAt:"2023-09-14T10:10:35.686+00:00",$updatedAt:"2023-09-14T11:59:42.307+00:00",enabled:!0}],collections:[{$id:"64c4fb401e0a490e44bf",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"USER",enabled:!0,documentSecurity:!1,attributes:[{key:"user_role",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"email",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"middle_name",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"user_features",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"user_files",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"phone",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"active",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"first_name",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"last_name",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"avatar",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"index",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:-1},{key:"system_metadata",type:"string",status:"available",error:"",required:!1,array:!1,size:1024,default:null},{key:"filial",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"otdel",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"status_sotrudnika",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"telegram",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"fejsbuk",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"instagram",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"vatsap",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"v_kontakte",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"zum",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"semejnoe_polozhenie",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rabochij_telefon",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"lichnyj_nomer",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"ofis",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"data_priema_rezyume",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"sertifikat",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"nachalo_opyta_raboty",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"data_uvolneniya",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"prichina_uvolneniya",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"pol",type:"string",status:"available",error:"",required:!1,array:!1,size:18,default:null},{key:"data_rozhdeniya",type:"string",status:"available",error:"",required:!1,array:!1,size:20,default:null},{key:"seriya-i-nomer_pasporta",type:"string",status:"available",error:"",required:!1,array:!1,size:30,default:null},{key:"data-vydachi_pasporta",type:"string",status:"available",error:"",required:!1,array:!1,size:20,default:null},{key:"kem_vydan",type:"string",status:"available",error:"",required:!1,array:!1,size:25,default:null},{key:"data_trudoustrojstva",type:"string",status:"available",error:"",required:!1,array:!1,size:10,default:null},{key:"dolzhnost",type:"string",status:"available",error:"",required:!1,array:!1,size:20,default:null},{key:"nachalnik_otdela",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"deti",type:"string",status:"available",error:"",required:!1,array:!1,size:10,default:null},{key:"adres_propiski",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"adres_prozhivaniya",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"o_sebe",type:"string",status:"available",error:"",required:!1,array:!1,size:256,default:null},{key:"hobbi",type:"string",status:"available",error:"",required:!1,array:!1,size:256,default:null},{key:"system_is_remove",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null}],indexes:[{key:"system_metadata",type:"fulltext",status:"available",error:"",attributes:["system_metadata"],orders:["ASC"]},{key:"email1",type:"fulltext",status:"available",error:"",attributes:["email"],orders:["ASC"]},{key:"email1-phone1",type:"fulltext",status:"available",error:"",attributes:["email","phone"],orders:["ASC","ASC"]},{key:"phone1",type:"fulltext",status:"available",error:"",attributes:["phone"],orders:["ASC"]}]},{$id:"64c4fb9158c913d9036e",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"SETTINGS",enabled:!0,documentSecurity:!1,attributes:[{key:"telegram_channel_enabled_4",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_agency_nickname_2",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_token_3",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agency_3",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agency_enabled_2",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_channel_4",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agency_1",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_channel_enabled_1",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_agency_enabled_3",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_agency_4",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_channel_enabled_2",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_token_5",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_channel_3",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agency_nickname_3",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_token_1",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agency_nickname_4",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_channel_1",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_token_4",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agency_2",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agency_5",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_token_2",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agency_nickname_1",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_channel_5",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"usd_uzs",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agent_3",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agent_nickname_2",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agency_enabled_5",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_agent_2",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agency_enabled_1",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_agency_nickname_5",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"watermark_file_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agency_enabled_4",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_channel_enabled_3",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_agent_nickname_1",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_channel_2",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agent_enabled_1",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_agent_4",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agent_nickname_4",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_channel_enabled_5",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_agent_enabled_4",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"masterdetail_mode",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"telegram_agent_enabled_3",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_agent_5",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agent_nickname_3",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agent_1",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"usd_eur",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agent_enabled_2",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_agent_nickname_5",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agent_enabled_5",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"instagram_link_1",type:"string",status:"available",error:"",required:!1,array:!1,size:128,default:null},{key:"facebook_link_1",type:"string",status:"available",error:"",required:!1,array:!1,size:128,default:null},{key:"telegram_link_1",type:"string",status:"available",error:"",required:!1,array:!1,size:128,default:null},{key:"youtube_link_1",type:"string",status:"available",error:"",required:!1,array:!1,size:128,default:null},{key:"instagram_link_enabled_1",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"facebook_link_enabled_1",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_link_enabled_1",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"youtube_link_enabled_1",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"logo_file_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_token_6",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_token_7",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_token_8",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_token_9",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_token_10",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_channel_6",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_channel_7",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_channel_8",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_channel_9",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_channel_10",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_channel_enabled_6",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_channel_enabled_7",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_channel_enabled_8",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_channel_enabled_9",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_channel_enabled_10",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_name_1",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_name_2",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_name_3",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_name_4",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_name_5",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_name_6",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_name_7",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_name_8",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_name_9",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_name_10",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"field_visibility",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null}],indexes:[]},{$id:"64d5f3fb13b5a40c0d1d",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"FILES",enabled:!0,documentSecurity:!1,attributes:[{key:"name",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null}],indexes:[]},{$id:"64d4a34e613b8f723d6f",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"CONTACT",enabled:!0,documentSecurity:!1,attributes:[{key:"telefon",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"status_klienta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"tip_klienta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"loyalnost_klienta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"osnovanie-deyatelnosti-dannogo_licza",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"naimenovanie_organizaczii",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kadastrovyj-nomer_zemli",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"data-vydachi_pasporta",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kontakt",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"seriya-i-nomer_pasporta",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"fio",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kem_vydan",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"adres_registraczii",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sertifikat_kompanii",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"dolzhnost_rukovoditelya",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"contact_files",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"kadastrovyj-nomer_obekta",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"istochnik",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rekvizity",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_metadata",type:"string",status:"available",error:"",required:!1,array:!1,size:1024,default:null},{key:"pinfl",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"fakticheskij_adres",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"data_rozhdeniya",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"inn",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"pol",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"email",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"data-sozdaniya_klienta",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"yuridicheskij_adres",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"index",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:-1},{key:"contact_phones",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"contact_names",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"system_access_level",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"system_created_by",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_only_for_owner",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_allowance",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null}],indexes:[{key:"fio",type:"fulltext",status:"available",error:"",attributes:["fio"],orders:["ASC"]},{key:"system_metadata",type:"fulltext",status:"available",error:"",attributes:["system_metadata"],orders:["ASC"]},{key:"fio-telefon",type:"fulltext",status:"available",error:"",attributes:["fio","telefon"],orders:["ASC","ASC"]},{key:"telefon",type:"fulltext",status:"available",error:"",attributes:["telefon"],orders:["ASC"]}]},{$id:"64db49022640a0d53252",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"DEAL",enabled:!0,documentSecurity:!1,attributes:[{key:"user_id",type:"string",status:"available",error:"",required:!0,array:!1,size:96,default:null},{key:"apartment_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"bid_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"status",type:"string",status:"available",error:"",required:!0,array:!1,size:48,default:null},{key:"type",type:"string",status:"available",error:"",required:!0,array:!1,size:48,default:null},{key:"price",type:"string",status:"available",error:"",required:!1,array:!0,size:128,default:null},{key:"price_unit",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"index",type:"integer",status:"available",error:"",required:!0,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"fio",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telefon",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"tip_klienta",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"contact_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"target_apartment_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"target_bid_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null}],indexes:[{key:"contact",type:"key",status:"available",error:"",attributes:["contact_id"],orders:["ASC"]},{key:"apartment",type:"key",status:"available",error:"",attributes:["apartment_id"],orders:["ASC"]},{key:"bid",type:"key",status:"available",error:"",attributes:["bid_id"],orders:["ASC"]},{key:"target_apartment_status",type:"key",status:"available",error:"",attributes:["target_apartment_id","status"],orders:["ASC","ASC"]},{key:"target_bid_status",type:"key",status:"available",error:"",attributes:["target_bid_id","status"],orders:["ASC","ASC"]}]},{$id:"64c75cc607be95d26b8d",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"EDITTARGET",enabled:!0,documentSecurity:!1,attributes:[{key:"entity_id",type:"string",status:"available",error:"",required:!1,array:!1,size:64,default:null},{key:"path",type:"string",status:"available",error:"",required:!1,array:!1,size:64,default:null}],indexes:[]},{$id:"64ff0d1a1eec52961ec4",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"DEAL_HISTORY",enabled:!0,documentSecurity:!1,attributes:[{key:"bid_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"user_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"type",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"apartment_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"payload",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"comment",type:"string",status:"available",error:"",required:!1,array:!1,size:512,default:null},{key:"deal_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"contact_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null}],indexes:[{key:"bid_type",type:"key",status:"available",error:"",attributes:["bid_id","type"],orders:["ASC","ASC"]},{key:"apartment_type",type:"key",status:"available",error:"",attributes:["apartment_id","type"],orders:["ASC","ASC"]},{key:"apartment",type:"key",status:"available",error:"",attributes:["apartment_id"],orders:["ASC"]},{key:"bid",type:"key",status:"available",error:"",attributes:["bid_id"],orders:["ASC"]},{key:"contact",type:"key",status:"available",error:"",attributes:["contact_id"],orders:["ASC"]}]},{$id:"6509b9124a8ff89af189",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"SERVICE_COMMENT",enabled:!0,documentSecurity:!1,attributes:[{key:"apartment_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"bid_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"contact_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"comment",type:"string",status:"available",error:"",required:!1,array:!1,size:2048,default:null},{key:"file_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"user_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null}],indexes:[{key:"apartment",type:"key",status:"available",error:"",attributes:["apartment_id"],orders:["ASC"]},{key:"contact",type:"key",status:"available",error:"",attributes:["contact_id"],orders:["ASC"]},{key:"bid",type:"key",status:"available",error:"",attributes:["bid_id"],orders:["ASC"]}]},{$id:"650af9b005b11d0b21a4",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"ROLES",enabled:!0,documentSecurity:!1,attributes:[{key:"title",type:"string",status:"available",error:"",required:!1,array:!1,size:128,default:null},{key:"comment",type:"string",status:"available",error:"",required:!1,array:!1,size:2048,default:null},{key:"role_features",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null}],indexes:[]},{$id:"651a9e22bab7ca1094fa",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"NOTIFY",enabled:!0,documentSecurity:!1,attributes:[{key:"user_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"title",type:"string",status:"available",error:"",required:!1,array:!1,size:512,default:null},{key:"url",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"is_read",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null}],indexes:[{key:"user",type:"key",status:"available",error:"",attributes:["user_id"],orders:["ASC"]},{key:"user_read",type:"key",status:"available",error:"",attributes:["user_id","is_read"],orders:["ASC","ASC"]}]},{$id:"651bcf6238a18a8fd2f2",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"TASK",enabled:!0,documentSecurity:!1,attributes:[{key:"from_user_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"to_user_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"contact_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"type",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"title",type:"string",status:"available",error:"",required:!1,array:!1,size:512,default:null},{key:"index",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"moment_stamp",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"is_complete",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"is_meet",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"is_call",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"from_user_fio",type:"string",status:"available",error:"",required:!1,array:!1,size:128,default:null},{key:"to_user_fio",type:"string",status:"available",error:"",required:!1,array:!1,size:128,default:null},{key:"contact_fio",type:"string",status:"available",error:"",required:!1,array:!1,size:128,default:null},{key:"time_stamp",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null}],indexes:[{key:"to_user",type:"key",status:"available",error:"",attributes:["to_user_id"],orders:["ASC"]},{key:"contact",type:"key",status:"available",error:"",attributes:["contact_id"],orders:["ASC"]},{key:"type",type:"key",status:"available",error:"",attributes:["type"],orders:["ASC"]},{key:"moment_stamp",type:"key",status:"available",error:"",attributes:["moment_stamp"],orders:["ASC"]},{key:"complete",type:"key",status:"available",error:"",attributes:["is_complete"],orders:["ASC"]}]},{$id:"651be76b0bfd3092408e",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"TASK_HISTORY",enabled:!0,documentSecurity:!1,attributes:[{key:"user_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"contact_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"task_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"comment",type:"string",status:"available",error:"",required:!1,array:!1,size:1024,default:null}],indexes:[{key:"user",type:"key",status:"available",error:"",attributes:["user_id"],orders:["ASC"]},{key:"contact",type:"key",status:"available",error:"",attributes:["contact_id"],orders:["ASC"]},{key:"task",type:"key",status:"available",error:"",attributes:["task_id"],orders:["ASC"]}]},{$id:"65367cf06601589d6b21",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"ADVERTISING",enabled:!0,documentSecurity:!1,attributes:[{key:"podkategoriya_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"zagolovok_dlya_reklamy",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sostoyanie_remonta-kvartiry",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"obshhaya_ploshhad",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"nazvanie_zhk",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kategoriya_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"orientir",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"metro",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rajon",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"primechanie",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"etazhnost",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"etazh",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ulicza",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kolichestvo_komnat",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"mestopolozhenie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kolichestvo_spalen",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sostoyanie-obekta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"bassejn",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kolichestvo_sotok",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"raspolozhenie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sostoyanie_remonta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_doma",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"vid_liczenzii",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"naznachenie-obekta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"system_created_by",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"index",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"apartment_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"apartment_images",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"advertising_images",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"apartment_index",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"naznachenie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"naznachenie-obekta-zemlya_uchastok",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"nomer_agenta",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"nomer_agenstva",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"tip_nedvizhimosti",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null}],indexes:[]},{$id:"64d7502a5ce9f881b680",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"BIDS",enabled:!0,documentSecurity:!1,attributes:[{key:"parkovka",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"naznachenie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"spalnya_sanuzel_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kanalizacziya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kolichestvo_spalen_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"etazh_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"vid_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mebel_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"balkon",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mebel",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"vdol_dorogi",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"ploshhad_sanuzla_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"tip_stroeniya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"poleznaya_ploshhad_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sostoyanie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"etazhnost_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rasstoyanie_do_metro_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"tip-stroeniya_kvartiry",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"czokol",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"god_postrojki_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"konserzh",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"sistema-otopleniya_kvartiry",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"nomer_kvartiry",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_kuhni_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"zhilaya_ploshhad_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"etazh_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_balkona_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"balkon_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"god_postrojki_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"prodazha",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"zagolovok",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"voda",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"metro",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"lift_kommercziya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"gaz",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"poleznaya_ploshhad_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kolichestvo_sotok_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"spalnya_sanuzel_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"vid_iz_okna",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kolichestvo_spalen_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"lift_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sostoyanie_remonta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"bassejn",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mashina_mesto_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sanuzel",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"obshhaya_ploshhad_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"obshhaya_ploshhad_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sistema_kondiczionirovaniya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kolichestvo_sotok_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"vysota_potolkov_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"raspolozhenie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"naznachenie-obekta-zemlya_uchastok",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"raspolozhenie_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"nazvanie_zhk",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"vysota_potolkov_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sanuzel_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"voda_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kolichestvo_komnat_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"zhd_vetka",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"podkategoriya_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kolichestvo_komnat_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"zhilaya_ploshhad_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"elektrichestvo",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_holla_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"torecz",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"kategoriya_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"istochnik",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mebel_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"tip_zemli_uchastka",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"prod_torg",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"voda_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mahallya",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rajon",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"tip-stroeniya_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"bid_files",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"ploshhad_dopolnitelnoj_pristrojki_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sostoyanie-remonta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sistema-otopleniya_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sistema-otopleniya_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sostoyanie-obekta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sobstvennoe_obsluzhivayushhee_tszh",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"kanalizacziya_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"gaz_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"strana",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"gorod",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"bid_images",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"oblast",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rent_kom_torg",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"ploshhad_sanuzla_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_komnaty_ohrany_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"orientir",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"vid_iz_okna_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_gostevogo_doma_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"mestopolozhenie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sanuzel_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"parkovka_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"prod_kom_torg",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"garazh",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mestopolozhenie-obekta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rasstoyanie_do_goroda_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_dopolnitelnoj_pristrojki_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"elektrichestvo_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_komnaty_ohrany_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_kuhni_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sistema_otopleniya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"elektrichestvo_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ulicza",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rent_torg",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"vid_liczenzii",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rasstoyanie_do_goroda_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rasstoyanie_do_metro_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sistema-kondiczionirovaniya_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_gostinnoj_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"balkon_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kanalizacziya_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_holla_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_balkona_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sostoyanie_remonta-kvartiry",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"tip_planirovki",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_spalni_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"podval",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"nomer_doma",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"podezdnye_puti",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"etazhnost_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_doma_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"lift_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mestopolozhenie-obekta_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"gaz_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_spalni_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"contact_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sostoyanie_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"opisanie",type:"string",status:"available",error:"",required:!1,array:!1,size:1024,default:null},{key:"ploshhad_gostinnoj_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"parkovka_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"uglovoj",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"naznachenie-obekta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"arenda",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_terrasy_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sistema-kondiczionirovaniya_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"creator_user_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_terrasy_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"index",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"mashina_mesto_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_gostevogo_doma_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_doma_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"metro_list",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rajon_list",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mahallya_list",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"vnutri_est",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ryadom_est",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"komnata_ohrany",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"saraj",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"ogorod",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"reshetki_na_oknah",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"pozharnaya_signalizacziya",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"videonablyudenie",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"signalizacziya",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"razgruzochnyj_pandus",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"gostevoj_domik",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"barbekyu_zona",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"dva_doma_vo_dvore",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"polisadnik",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"dopolnitelnaya_pristrojka",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"ohrana",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_access_level",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"system_is_rent",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_is_sell",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_is_archive",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_created_by",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_only_for_owner",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_allowance",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"system_metro",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"system_rajon",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"system_mahallya",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"system_rent_price_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_rent_price_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_prod_price_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_prod_price_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"tip_nedvizhimosti",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"system_rent_kom_price_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_rent_kom_price_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_prod_kom_price_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_prod_kom_price_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_prod_price_entries",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"system_rent_price_entries",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"terrasa",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"czokol_podval",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"garderobnaya",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"umnyj_dom",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null}],indexes:[]},{$id:"64d4a5782854ff66e9a1",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"APARTMENT",enabled:!0,documentSecurity:!1,attributes:[{key:"sanuzel_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"balkon_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"raspolozhenie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"orientir",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sistema_kondiczionirovaniya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"etazhnost",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"etazh",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_gostevogo_doma",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kanalizacziya_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_sanuzla",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"mestopolozhenie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_balkona",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"uglovoj",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"voda_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rajon",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"strana",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sistema-kondiczionirovaniya_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kolichestvo_komnat",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kolichestvo_spalen",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_doma",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"bassejn",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"tip_stroeniya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"raspolozhenie_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kanalizacziya_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sistema-otopleniya_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"nazvanie_zhk",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"podezd_nomer",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sostoyanie_remonta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mashina_mesto",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"naznachenie-obekta-zemlya_uchastok",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"elektrichestvo",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"tip_zemli_uchastka",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sostoyanie-obekta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sostoyanie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"czokol",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"vysota_potolkov",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"mebel",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"parkovka_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sistema-otopleniya_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"god_postrojki",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"naznachenie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"zhd_vetka",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"contact_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_kuhni",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"voda_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"zagolovok",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sistema-kondiczionirovaniya_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"metro",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sanuzel_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"vid_iz_okna",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_holla",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sostoyanie-remonta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"gaz_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rasstoyanie_do_goroda",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"lift_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"elektrichestvo_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"balkon",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sanuzel",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"arenda",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mebel_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"lift_kommercziya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sostoyanie_remonta-kvartiry",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sostoyanie_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"podkategoriya_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"energonositel_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sistema-otopleniya_kvartiry",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kanalizacziya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mebel_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rasstoyanie_do_metro",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"parkovka",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"lift_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"gorod",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"oblast",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"podezdnye_puti",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"torecz",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"nomer_kvartiry",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"gaz_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"istochnik",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sobstvennoe_obsluzhivayushhee_tszh",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"sistema_otopleniya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"balkon_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"garazh",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"poleznaya_ploshhad",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"elektrichestvo_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kod_domofona",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"vid_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"tip_planirovki",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"parkovka_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"tip-stroeniya_kvartiry",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"nomer_doma",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"apartment_images",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"mahallya",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"voda",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"apartment_files",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"ploshhad_spalni",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"addon_square_names",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_gostinnoj",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_terrasy",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"gaz",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"zhilaya_ploshhad",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kategoriya_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"index",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"konserzh",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"vid_iz_okna_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_dopolnitelnoj_pristrojki",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ulicza",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"naznachenie-obekta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"obshhaya_ploshhad",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"creator_user_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"addon_square_values",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_komnaty_ohrany",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"spalnya_sanuzel",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"vid_liczenzii",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mestopolozhenie-obekta_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kolichestvo_sotok",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"tip-stroeniya_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mestopolozhenie-obekta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"prodazha",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"opisanie",type:"string",status:"available",error:"",required:!1,array:!1,size:1024,default:null},{key:"vnutri_est",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ryadom_est",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"komnata_ohrany",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"vdol_dorogi",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"podval",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"saraj",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"ogorod",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"reshetki_na_oknah",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"pozharnaya_signalizacziya",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"videonablyudenie",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"signalizacziya",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"razgruzochnyj_pandus",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"gostevoj_domik",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"barbekyu_zona",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"dva_doma_vo_dvore",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"polisadnik",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"dopolnitelnaya_pristrojka",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"ohrana",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"holodilnik",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_access_level",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"system_is_rent",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_is_sell",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_is_archive",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_created_by",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_only_for_owner",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_allowance",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"prod_torg",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"rent_kom_torg",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"prod_kom_torg",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"rent_torg",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_is_remove",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_metro",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"system_rajon",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"system_mahallya",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"system_rent_price",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_prod_price",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"tip_nedvizhimosti",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"system_prod_price_entries",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"system_rent_price_entries",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"system_prod_kom_price",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_rent_kom_price",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"terrasa",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"czokol_podval",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"umnyj_dom",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"garderobnaya",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null}],indexes:[]},{$id:"655b2af75083f6488eff",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"IMAGE_PREVIEW",enabled:!0,documentSecurity:!1,attributes:[{key:"preview_file_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null}],indexes:[]}],buckets:[{$id:"64c4f91c7f9a4458c4bb",$createdAt:"2023-07-29T11:33:48.524+00:00",$updatedAt:"2023-07-29T14:57:21.610+00:00",$permissions:['create("any")','read("any")','update("any")','delete("any")'],fileSecurity:!1,name:"ROOT",enabled:!0,maximumFileSize:3e9,allowedFileExtensions:[],compression:"none",encryption:!0,antivirus:!0}],functions:[{$id:"6513df8529ea78bf2325",name:"BUN_APARTMENT_PAGINATOR",runtime:"node-16.0",execute:["any"],events:[],schedule:"",timeout:30,entrypoint:"src/index.js",ignore:["node_modules",".npm"],path:"functions/bun-apartment-paginator"},{$id:"6513fbd219052f40b1a8",name:"BUN_BID_PAGINATOR",runtime:"node-16.0",execute:["any"],events:[],schedule:"",timeout:30,entrypoint:"src/index.js",ignore:["node_modules",".npm"],path:"functions/bun-bid-paginator"},{$id:"65141fcd03cbb257e5fc",name:"BUN_CONTACT_PAGINATOR",runtime:"node-16.0",events:[],schedule:"",timeout:30,entrypoint:"src/index.js",ignore:["node_modules",".npm"],path:"functions/bun-contact-paginator"},{$id:"6537a4f838968b0c93a9",name:"BUN_TELEGRAPH_INFORMER",runtime:"bun-1.0",execute:[],events:[],schedule:"",timeout:15,enabled:!0,logging:!0,entrypoint:"src/index.js",commands:"bun install",ignore:["node_modules",".npm"],path:"functions/bun-telegraph-informer"},{$id:"6537a4f838968b0c93e9",name:"BUN_TELEGRAM_INFORMER",runtime:"bun-1.0",execute:[],events:[],schedule:"",timeout:15,enabled:!0,logging:!0,entrypoint:"src/index.js",commands:"bun install",ignore:["node_modules",".npm"],path:"functions/bun-telegram-informer"}]},Yo={}.CC_FORCE_USE_MICROSERVICES||!1,Ko={}.CC_ENABLE_SENTRY||!1,Xo={}.CC_HIDE_WATERMARK||!1,Jo=e=>{const t=Go.collections.find((t=>t.name===e));if(!t)throw new Error("params.ts collection not found: ".concat(e));return null==t?void 0:t.$id},Zo=e=>{const t=Go.functions.find((t=>t.name===e));if(!t)throw new Error("params.ts function not found: ".concat(e));return null==t?void 0:t.$id},Qo="RealEstate",el=1700,tl=500,il="/assets",al={endpoint:{}.CC_APPWRITE_CONFIG_ENDPOINT||"https://cloud.appwrite.io/v1",databaseId:Go.databases[0].$id,projectId:Go.projectId},ol=Go.buckets[0].$id,ll=Jo("USER"),nl=Jo("SETTINGS"),rl=Jo("EDITTARGET"),sl=Jo("APARTMENT"),dl=Jo("CONTACT"),cl=Jo("FILES"),ml=Jo("IMAGE_PREVIEW"),pl=Jo("BIDS"),ul=Jo("DEAL"),hl=Jo("TASK"),yl=Jo("DEAL_HISTORY"),bl=Jo("SERVICE_COMMENT"),_l=Jo("ROLES"),vl=Jo("NOTIFY"),fl=Jo("TASK_HISTORY"),gl=Jo("ADVERTISING"),kl=Zo("BUN_APARTMENT_PAGINATOR"),wl=Zo("BUN_CONTACT_PAGINATOR"),Sl=Zo("BUN_BID_PAGINATOR"),zl=Zo("BUN_TELEGRAM_INFORMER"),Vl=Zo("BUN_TELEGRAPH_INFORMER"),xl="databases.*.collections.*.documents.*.update",Al="databases.*.collections.*.documents.*.create",Tl="databases.*.collections.*.documents.*.delete",Cl="telegram",Fl="youtube",Ll="instagram",Il="facebook",Ml=["prod_startovaya_czena","prod_czena_sobstvennika","prod_komissiya_agenstva","prod_komissiya_menedzhera","prod_startovaya_czena_valyuta","prod_komissiya_agenstva_unit","prod_komissiya_menedzhera_unit","prod_kom_startovaya_czena","prod_kom_czena_sobstvennika","prod_kom_komissiya_agenstva","prod_kom_komissiya_menedzhera","prod_kom_startovaya_czena_valyuta","prod_kom_komissiya_agenstva_unit","prod_kom_komissiya_menedzhera_unit"],jl=["rent_startovaya_czena","rent_czena_sobstvennika","rent_komissiya_agenstva","rent_komissiya_menedzhera","rent_startovaya_czena_valyuta","rent_komissiya_agenstva_unit","rent_komissiya_menedzhera_unit","rent_kom_startovaya_czena","rent_kom_czena_sobstvennika","rent_kom_komissiya_agenstva","rent_kom_komissiya_menedzhera","rent_kom_startovaya_czena_valyuta","rent_kom_komissiya_agenstva_unit","rent_kom_komissiya_menedzhera_unit"],Bl=e=>{const t={...e};{const i=e.system_prod_price_entries||[];Ml.forEach(((e,a)=>{h.set(t,e,i[a]||"")})),t.system_prod_price_entries=void 0}{const i=e.system_rent_price_entries||[];jl.forEach(((e,a)=>{h.set(t,e,i[a]||"")})),t.system_rent_price_entries=void 0}return t},Rl=e=>{const t={...e};return Ml.forEach((e=>{h.set(t,e,void 0)})),jl.forEach((e=>{h.set(t,e,void 0)})),t},Dl=e=>{const t=[],i=[];return Ml.forEach((i=>{t.push(h.get(e,i)||"")})),jl.forEach((t=>{i.push(h.get(e,t)||"")})),{system_prod_price_entries:t,system_rent_price_entries:i}},ql=e=>{const t=e.$id;return Object.entries(e).map((([e,t])=>Array.isArray(t)?[e,t.length?t:null]:[e,t])).reduce(((e,[t,i])=>({...e,[t]:i})),{id:t})},Pl=e=>e.map(ql),El=e=>Object.entries(e).filter((([e])=>"id"!==e)).filter((([e])=>!e.startsWith("$"))).filter((([e])=>!e.startsWith("system_"))).filter((([e])=>"is_archive"!==e)).map((([e,t])=>Array.isArray(t)?[e,t.length?t:null]:[e,t])).reduce(((e,[t,i])=>({...e,[t]:i})),{});window.toRussian=e=>y(e,{engToRus:!0,slug:!0}),window.fromRussian=e=>y(e,{slug:!0});const Nl={appwriteService:Symbol.for("appwriteService"),alertService:Symbol.for("alertService"),layoutService:Symbol.for("layoutService"),routerService:Symbol.for("routerService"),errorService:Symbol.for("errorService"),authService:Symbol.for("authService"),dictService:Symbol.for("dictService"),cacheService:Symbol.for("cacheService"),ymapsService:Symbol.for("ymapsService"),loggerService:Symbol.for("loggerService"),realtimeService:Symbol.for("realtimeService"),executionService:Symbol.for("executionService"),previewService:Symbol.for("previewService")},Ol={editTargetService:Symbol.for("editTargetService"),permissionService:Symbol.for("permissionService"),featureService:Symbol.for("featureService"),previewModeService:Symbol.for("previewModeService"),metadataService:Symbol.for("metadataService"),publishService:Symbol.for("publishService"),exchangeService:Symbol.for("exchangeService"),cleanupService:Symbol.for("cleanupService"),dailyNotifyService:Symbol.for("dailyNotifyService"),polishService:Symbol.for("polishService"),visibilityService:Symbol.for("visibilityService")},Ul={...Nl,...{contactRequestService:Symbol.for("contactRequestService"),dealHistoryRequestService:Symbol.for("dealHistoryRequestService"),dealRequestService:Symbol.for("dealRequestService"),taskRequestService:Symbol.for("taskRequestService"),taskHistoryRequestService:Symbol.for("taskHistoryRequestService"),dashboardRequestService:Symbol.for("dashboardRequestService"),permissionRequestService:Symbol.for("permissionRequestService"),apartmentRequestService:Symbol.for("apartmentRequestService"),bidRequestService:Symbol.for("bidRequestService"),advertisingRequestService:Symbol.for("advertisingRequestService")},...{settingsDbService:Symbol.for("settingsDbService"),userDbService:Symbol.for("userDbService"),apartmentDbService:Symbol.for("apartmentDbService"),bidDbService:Symbol.for("bidDbService"),dealDbService:Symbol.for("dealDbService"),contactDbService:Symbol.for("contactDbService"),dealHistoryDbService:Symbol.for("dealHistoryDbService"),serviceCommentDbService:Symbol.for("serviceCommentDbService"),roleDbService:Symbol.for("roleDbService"),notifyDbService:Symbol.for("notifyDbService"),taskDbService:Symbol.for("taskDbService"),taskHistoryDbService:Symbol.for("taskHistoryDbService"),advertisingDbService:Symbol.for("advertisingDbService")},...{settingsViewService:Symbol.for("settingsViewService"),userViewService:Symbol.for("userViewService"),apartmentViewService:Symbol.for("apartmentViewService"),bidViewService:Symbol.for("bidViewService"),dealViewService:Symbol.for("dealViewService"),contactViewService:Symbol.for("contactViewService"),dealHistoryViewService:Symbol.for("dealHistoryViewService"),serviceCommentViewService:Symbol.for("serviceCommentViewService"),roleViewService:Symbol.for("roleViewService"),notifyViewService:Symbol.for("notifyViewService"),taskViewService:Symbol.for("taskViewService"),taskHistoryViewService:Symbol.for("taskHistoryViewService"),advertisingViewService:Symbol.for("advertisingViewService")},...Ol},Hl="databases.".concat(al.databaseId,".collections.").concat(sl,".documents");class Wl{constructor(){i(this,"reloadSubject",new b),i(this,"updateSubject",new b),i(this,"featureService",_(Ul.featureService)),i(this,"metadataService",_(Ul.metadataService)),i(this,"exchangeService",_(Ul.exchangeService)),i(this,"permissionService",_(Ul.permissionService)),i(this,"appwriteService",_(Ul.appwriteService)),i(this,"executionService",_(Ul.executionService)),i(this,"realtimeService",_(Ul.realtimeService)),i(this,"createIndex",(async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(al.databaseId,sl,[f.limit(1),f.select(["index"])]);return e+1})),i(this,"findById",(async e=>{let t=await this.appwriteService.databases.getDocument(al.databaseId,sl,e);return t=Bl(t),ql(t)})),i(this,"paginate",(async(e,t,i,a,o,l)=>{const n=await this.executionService.execute(kl,{filterData:{_accessLevel:this.featureService.readAccessLevel,_search:o,...e},pagination:t,sortModel:i,chips:a,search:o,payload:l});return n===g?{rows:[],total:null}:{rows:Pl(n.rows).map(Bl),total:n.total}})),i(this,"create",(async e=>{var t,i;const a=await this.permissionService.getPermissions(),o=await this.exchangeService.getApartmentPriceMetadata(e),l=await this.metadataService.getAreaMetadataByApartment(e);let n=await this.appwriteService.databases.createDocument(al.databaseId,sl,this.appwriteService.createId(),{...El(Rl(e)),...Dl(e),system_access_level:await this.featureService.getAccessLevel(),system_is_rent:!!(null==(t=e.arenda)?void 0:t.length),system_is_sell:!!(null==(i=e.prodazha)?void 0:i.length),system_created_by:this.appwriteService.currentUser.$id,system_only_for_owner:a.hasManagerAllObjectsExclusivePermission,system_is_archive:!1,system_is_remove:!1,...o,...l,index:await this.createIndex()});return n=Bl(n),ql(n)})),i(this,"update",(async(e,t)=>{var i,a;const o=await this.exchangeService.getApartmentPriceMetadata(t),l=await this.metadataService.getAreaMetadataByApartment(t),n=await this.appwriteService.databases.updateDocument(al.databaseId,sl,e,{...El(Rl(t)),...Dl(t),system_is_rent:!!(null==(i=t.arenda)?void 0:i.length),system_is_sell:!!(null==(a=t.prodazha)?void 0:a.length),...o,...l});let r=ql(n);return r=Bl(r),this.updateSubject.next([e,r]),r})),i(this,"toggleArchive",(async e=>{const{system_is_archive:t}=await this.findById(e),i=await this.appwriteService.databases.updateDocument(al.databaseId,sl,e,{system_is_archive:!t});let a=ql(i);a=Bl(a),this.updateSubject.next([e,a]),this.reloadSubject.next()})),i(this,"toggleRemove",(async e=>{const{system_is_remove:t}=await this.findById(e),i=await this.appwriteService.databases.updateDocument(al.databaseId,sl,e,{system_is_remove:!t});let a=ql(i);a=Bl(a),this.updateSubject.next([e,a]),this.reloadSubject.next()})),i(this,"toggleOnlyForOwner",(async e=>{const{system_only_for_owner:t}=await this.findById(e),i=await this.appwriteService.databases.updateDocument(al.databaseId,sl,e,{system_only_for_owner:!t});let a=ql(i);a=Bl(a),this.updateSubject.next([e,a]),this.reloadSubject.next()})),i(this,"moveToArchive",(async e=>{const t=await this.appwriteService.databases.updateDocument(al.databaseId,sl,e,{system_is_archive:!0});let i=ql(t);i=Bl(i),this.updateSubject.next([e,i]),this.reloadSubject.next()})),i(this,"updateAllowance",(async(e,t)=>{const i=await this.appwriteService.databases.updateDocument(al.databaseId,sl,e,{system_allowance:t});let a=ql(i);a=Bl(a),this.updateSubject.next([e,a]),this.reloadSubject.next()})),i(this,"remove",(async e=>{await this.appwriteService.databases.deleteDocument(al.databaseId,sl,e)})),i(this,"prefetch",k((async()=>{this.realtimeService.subscribe(Hl,(({events:e,payload:t})=>{if(e.includes(Al)&&this.reloadSubject.next(),e.includes(Tl)&&this.reloadSubject.next(),e.includes(xl)){let e=ql(t);e=Bl(e),this.updateSubject.next([t.$id,e])}}))}))),v(this,{})}}class $l{constructor(){i(this,"apartmentDbService",_(Ul.apartmentDbService)),i(this,"loggerService",_(Ul.loggerService)),i(this,"reloadSubject",this.apartmentDbService.reloadSubject),i(this,"updateSubject",this.apartmentDbService.updateSubject),i(this,"create",(async e=>(this.loggerService.log("apartmentViewService create",e),await this.apartmentDbService.create(e)))),i(this,"update",(async(e,t)=>(this.loggerService.log("apartmentViewService update",t),await this.apartmentDbService.update(e,t)))),i(this,"toggleArchive",(async e=>(this.loggerService.log("apartmentViewService toggleArchive"),await this.apartmentDbService.toggleArchive(e)))),i(this,"toggleRemove",(async e=>(this.loggerService.log("apartmentViewService toggleRemove"),await this.apartmentDbService.toggleRemove(e)))),i(this,"toggleOnlyForOwner",(async e=>(this.loggerService.log("apartmentViewService toggleOnlyForOwner"),await this.apartmentDbService.toggleOnlyForOwner(e)))),i(this,"moveToArchive",(async e=>(this.loggerService.log("apartmentViewService moveToArchive"),await this.apartmentDbService.moveToArchive(e)))),i(this,"updateAllowance",(async(e,t)=>(this.loggerService.log("apartmentViewService updateAllowance"),await this.apartmentDbService.updateAllowance(e,t)))),i(this,"remove",(async e=>(this.loggerService.log("apartmentViewService remove",{id:e}),await this.apartmentDbService.remove(e)))),i(this,"read",(async e=>{this.loggerService.log("apartmentViewService read",{id:e});return await this.apartmentDbService.findById(e)})),i(this,"tryRead",(async e=>{this.loggerService.log("apartmentViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),i(this,"paginate",(async(e,t,i,a,o,l)=>(this.loggerService.log("apartmentViewService paginate"),await this.apartmentDbService.paginate(e,t,i,a,o,l)))),v(this,{})}}class Gl{constructor(){i(this,"cacheService",_(Ul.cacheService)),i(this,"_client",null),i(this,"_functions",null),i(this,"_account",null),i(this,"_storage",null),i(this,"_databases",null),i(this,"_session",null),i(this,"_currentUser",null),i(this,"createId",(()=>w.unique())),i(this,"getCurrentSession",(async e=>{try{return await e.getSession("current")}catch(t){return null}})),i(this,"init",k((async()=>{const{endpoint:e,projectId:t}=al,i=new F;i.setEndpoint(e).setProject(t).setLocale("ru-RU");const a=new V(i),o=new x(i),l=new A(i),n=new T(i),r=await this.getCurrentSession(a),s=r?await a.get():null;C((()=>{this._client=i,this._account=a,this._session=r,this._databases=o,this._functions=l,this._storage=n,this._currentUser=s}))}))),i(this,"readFileName",(async e=>{const{name:t}=await this.databases.getDocument(al.databaseId,cl,e);return t})),i(this,"tryReadFileName",(async e=>{try{return await this.readFileName(e)}catch(t){return null}})),i(this,"uploadFile",(async e=>{const t=u();return await this.storage.createFile(ol,t,e),await this.databases.createDocument(al.databaseId,cl,t,{name:e.name}),t})),i(this,"uploadBlob",(async(e,t)=>{const i=new File([e],t);return await this.uploadFile(i)})),i(this,"removeFile",(async e=>{await this.storage.deleteFile(ol,e)})),i(this,"getFileURL",(async e=>(await this.storage.getFileView(ol,e)).toString())),i(this,"getImageURL",(async e=>{let t="";return await this.cacheService.hasImage(e)||(t=await this.getFileURL(e)),await this.cacheService.getImage(t,e)})),i(this,"prefetch",(async()=>{await this.init()})),v(this,{_client:S,_account:S,_session:S,_databases:S,_functions:S,_storage:S,_currentUser:S,client:z,storage:z,account:z,session:z,databases:z,functions:z,isAuthorized:z,currentUser:z}),this.init()}get client(){return this._client}get storage(){return this._storage}get account(){return this._account}get session(){return this._session}get databases(){return this._databases}get functions(){return this._functions}get isAuthorized(){return!!this._session}get currentUser(){return this._currentUser||{}}}const Yl={user_role:[],user_features:[],system_is_remove:!1,active:!1,middle_name:"",phone:"",email:"",user_files:[],first_name:"",avatar:"",last_name:"",system_metadata:""};class Kl{constructor(){i(this,"appwriteService",_(Ul.appwriteService)),i(this,"alertService",_(Ul.alertService)),i(this,"routerService",_(Ul.routerService)),i(this,"tryReadUserData",(async e=>{try{return await this.appwriteService.databases.getDocument(al.databaseId,ll,e)}catch(t){return null}})),i(this,"initUser",k((async e=>{const t=await this.tryReadUserData(e.userId);if(!t){const{total:t}=await this.appwriteService.databases.listDocuments(al.databaseId,ll,[f.limit(1),f.select(["index"])]);return await this.appwriteService.databases.createDocument(al.databaseId,ll,e.userId,{...Yl,index:t+1}),this.routerService.push("/inactive_page"),!1}const{email:i}=this.appwriteService.currentUser;return i&&!t.email&&await this.appwriteService.databases.updateDocument(al.databaseId,ll,e.userId,{...Yl,...El(t),system_metadata:t.system_metadata||"",email:i}),t.active&&!t.system_is_remove||(this.routerService.push("/inactive_page"),!1)}))),i(this,"login",(async({email:e,password:t})=>{try{const i=await this.appwriteService.account.createEmailSession(e,t);await this.initUser(i),L()}catch(i){return this.alertService.notify(i.message||"Unknown error"),!1}})),i(this,"logout",(async()=>{try{await this.appwriteService.account.deleteSession("current"),L()}catch(e){return this.alertService.notify(e.message||"Unknown error"),!1}})),i(this,"register",(async({email:e,password:t})=>{try{await this.appwriteService.account.create(this.appwriteService.createId(),e,t),L()}catch(i){return this.alertService.notify(i.message||"Unknown error"),!1}})),i(this,"prefetch",k((async()=>{this.appwriteService.isAuthorized||this.routerService.push("/login_page");const e=this.appwriteService.session;this.appwriteService.isAuthorized&&await this.initUser(e)}))),v(this,{})}}const Xl=["prod_startovaya_czena_ot","prod_startovaya_czena_do","prod_czena_sobstvennika_ot","prod_czena_sobstvennika_do","prod_komissiya_agenstva","prod_komissiya_menedzhera","prod_startovaya_czena_valyuta","prod_komissiya_agenstva_unit","prod_komissiya_menedzhera_unit","prod_kom_startovaya_czena_ot","prod_kom_startovaya_czena_do","prod_kom_czena_sobstvennika_ot","prod_kom_czena_sobstvennika_do","prod_kom_komissiya_agenstva","prod_kom_komissiya_menedzhera","prod_kom_startovaya_czena_valyuta","prod_kom_komissiya_agenstva_unit","prod_kom_komissiya_menedzhera_unit"],Jl=["rent_startovaya_czena_ot","rent_startovaya_czena_do","rent_czena_sobstvennika_ot","rent_czena_sobstvennika_do","rent_komissiya_agenstva","rent_komissiya_menedzhera","rent_startovaya_czena_valyuta","rent_komissiya_agenstva_unit","rent_komissiya_menedzhera_unit","rent_kom_startovaya_czena_ot","rent_kom_startovaya_czena_do","rent_kom_czena_sobstvennika_ot","rent_kom_czena_sobstvennika_do","rent_kom_komissiya_agenstva","rent_kom_komissiya_menedzhera","rent_kom_startovaya_czena_valyuta","rent_kom_komissiya_agenstva_unit","rent_kom_komissiya_menedzhera_unit"],Zl=e=>{const t={...e};{const i=e.system_prod_price_entries||[];Xl.forEach(((e,a)=>{h.set(t,e,i[a]||"")})),t.system_prod_price_entries=void 0}{const i=e.system_rent_price_entries||[];Jl.forEach(((e,a)=>{h.set(t,e,i[a]||"")})),t.system_prod_price_entries=void 0}return t},Ql=e=>{const t={...e};return Xl.forEach((e=>{h.set(t,e,void 0)})),Jl.forEach((e=>{h.set(t,e,void 0)})),t},en=e=>{const t=[],i=[];return Xl.forEach((i=>{i.endsWith("startovaya_czena_ot")||i.endsWith("startovaya_czena_do")?t.push(""):t.push(h.get(e,i)||"")})),Jl.forEach((t=>{t.endsWith("startovaya_czena_ot")||t.endsWith("startovaya_czena_do")?i.push(""):i.push(h.get(e,t)||"")})),{system_prod_price_entries:t,system_rent_price_entries:i}},tn="databases.".concat(al.databaseId,".collections.").concat(pl,".documents");class an{constructor(){i(this,"reloadSubject",new b),i(this,"updateSubject",new b),i(this,"featureService",_(Ul.featureService)),i(this,"metadataService",_(Ul.metadataService)),i(this,"exchangeService",_(Ul.exchangeService)),i(this,"appwriteService",_(Ul.appwriteService)),i(this,"executionService",_(Ul.executionService)),i(this,"permissionService",_(Ul.permissionService)),i(this,"realtimeService",_(Ul.realtimeService)),i(this,"createIndex",(async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(al.databaseId,pl,[f.limit(1),f.select(["index"])]);return e+1})),i(this,"findById",(async e=>{let t=await this.appwriteService.databases.getDocument(al.databaseId,pl,e);return t=Zl(t),ql(t)})),i(this,"paginate",(async(e,t,i,a,o,l)=>{const n=await this.executionService.execute(Sl,{filterData:{_accessLevel:this.featureService.readAccessLevel,_search:o,...e},pagination:t,sortModel:i,chips:a,search:o,payload:l});return n===g?{rows:[],total:null}:{rows:Pl(n.rows).map(Zl),total:n.total}})),i(this,"create",(async e=>{var t,i;const a=await this.permissionService.getPermissions(),o=await this.exchangeService.getBidPriceMetadata(e),l=await this.metadataService.getAreaMetadataByBid(e);let n=await this.appwriteService.databases.createDocument(al.databaseId,pl,this.appwriteService.createId(),{...El(Ql(e)),...en(e),system_access_level:await this.featureService.getAccessLevel(),system_is_rent:!!(null==(t=e.arenda)?void 0:t.length),system_is_sell:!!(null==(i=e.prodazha)?void 0:i.length),system_created_by:this.appwriteService.currentUser.$id,system_only_for_owner:a.hasManagerAllObjectsExclusivePermission,system_is_archive:!1,...o,...l,index:await this.createIndex()});return n=Zl(n),ql(n)})),i(this,"update",(async(e,t)=>{var i,a;const o=await this.exchangeService.getBidPriceMetadata(t),l=await this.metadataService.getAreaMetadataByBid(t),n=await this.appwriteService.databases.updateDocument(al.databaseId,pl,e,{...El(Ql(t)),...en(t),system_is_rent:!!(null==(i=t.arenda)?void 0:i.length),system_is_sell:!!(null==(a=t.prodazha)?void 0:a.length),...o,...l});let r=ql(n);return r=Zl(r),this.updateSubject.next([e,r]),r})),i(this,"toggleArchive",(async e=>{const{system_is_archive:t}=await this.findById(e),i=await this.appwriteService.databases.updateDocument(al.databaseId,pl,e,{system_is_archive:!t});let a=ql(i);a=Zl(a),this.updateSubject.next([e,a]),this.reloadSubject.next()})),i(this,"toggleOnlyForOwner",(async e=>{const{system_only_for_owner:t}=await this.findById(e),i=await this.appwriteService.databases.updateDocument(al.databaseId,pl,e,{system_only_for_owner:!t});let a=ql(i);a=Zl(a),this.updateSubject.next([e,a]),this.reloadSubject.next()})),i(this,"moveToArchive",(async e=>{const t=await this.appwriteService.databases.updateDocument(al.databaseId,pl,e,{system_is_archive:!0});let i=ql(t);i=Zl(i),this.updateSubject.next([e,i]),this.reloadSubject.next()})),i(this,"updateAllowance",(async(e,t)=>{const i=await this.appwriteService.databases.updateDocument(al.databaseId,pl,e,{system_allowance:t});let a=ql(i);a=Zl(a),this.updateSubject.next([e,a]),this.reloadSubject.next()})),i(this,"remove",(async e=>{await this.appwriteService.databases.deleteDocument(al.databaseId,pl,e)})),i(this,"prefetch",k((async()=>{this.realtimeService.subscribe(tn,(({events:e,payload:t})=>{if(e.includes(Al)&&this.reloadSubject.next(),e.includes(Tl)&&this.reloadSubject.next(),e.includes(xl)){let e=ql(t);e=Zl(e),this.updateSubject.next([t.$id,e])}}))}))),v(this,{})}}class on{constructor(){i(this,"bidDbService",_(Ul.bidDbService)),i(this,"loggerService",_(Ul.loggerService)),i(this,"reloadSubject",this.bidDbService.reloadSubject),i(this,"updateSubject",this.bidDbService.updateSubject),i(this,"create",(async e=>(this.loggerService.log("bidViewService create",e),await this.bidDbService.create(e)))),i(this,"update",(async(e,t)=>(this.loggerService.log("bidViewService update",t),await this.bidDbService.update(e,t)))),i(this,"updateAllowance",(async(e,t)=>(this.loggerService.log("bidViewService updateAllowance"),await this.bidDbService.updateAllowance(e,t)))),i(this,"remove",(async e=>(this.loggerService.log("bidViewService remove",{id:e}),await this.bidDbService.remove(e)))),i(this,"toggleArchive",(async e=>(this.loggerService.log("bidViewService toggleArchive"),await this.bidDbService.toggleArchive(e)))),i(this,"toggleOnlyForOwner",(async e=>(this.loggerService.log("bidViewService toggleOnlyForOwner"),await this.bidDbService.toggleOnlyForOwner(e)))),i(this,"moveToArchive",(async e=>(this.loggerService.log("bidViewService moveToArchive"),await this.bidDbService.moveToArchive(e)))),i(this,"read",(async e=>{this.loggerService.log("bidViewService read",{id:e});return await this.bidDbService.findById(e)})),i(this,"tryRead",(async e=>{this.loggerService.log("bidViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),i(this,"paginate",(async(e,t,i,a,o,l)=>(this.loggerService.log("bidViewService paginate"),await this.bidDbService.paginate(e,t,i,a,o,l)))),v(this,{})}}const ln="cache",nn="realestate";class rn{constructor(){i(this,"routerService",_(Ul.routerService)),i(this,"db",null),i(this,"resourceMap",new Map),i(this,"init",(()=>new Promise(((e,t)=>{const i=indexedDB.open(nn,1);i.onupgradeneeded=()=>{i.result.createObjectStore(ln)},i.onsuccess=()=>{this.db=i.result,this.db.onerror=()=>{console.error("Error creating/accessing db")},e()},i.onerror=()=>{t()}})))),i(this,"writeImage",(async(e,t)=>new Promise(((i,a)=>{const o=this.db.transaction([ln],"readwrite").objectStore(ln).put(e,t);o.addEventListener("success",(()=>i())),o.addEventListener("error",(()=>a()))})))),i(this,"readImage",(e=>new Promise(((t,i)=>{const a=this.db.transaction([ln],"readonly").objectStore(ln).openCursor(e);a.addEventListener("success",(()=>{var e;return t((null==(e=a.result)?void 0:e.value)||null)})),a.addEventListener("error",(()=>i()))})))),i(this,"hasImage",(async e=>{if(this.resourceMap.has(e))return!0;const t=await this.readImage(e);if(t){const i=URL.createObjectURL(t);return this.resourceMap.set(e,i),!0}return!1})),i(this,"getImage",(async(e,t)=>{const i=this.resourceMap.get(t);if(i)return i;const a=await this.readImage(t);if(a){const e=URL.createObjectURL(a);return this.resourceMap.set(t,e),e}const o=await(e=>new Promise((t=>{const i=document.createElement("img");i.style.position="fixed",i.style.pointerEvents="none",i.style.visibility="hidden",document.body.appendChild(i),i.onload=()=>{const e=document.createElement("canvas");e.height=i.height,e.width=i.width;const a=e.getContext("2d");if(!a)return document.body.removeChild(i),void t(null);a.drawImage(i,0,0),e.toBlob((e=>{if(!e)return document.body.removeChild(i),void t(null);document.body.removeChild(i),t(e)}))},i.onerror=e=>{console.error(e),document.body.removeChild(i),t(null)},i.crossOrigin="anonymous",i.src=e})))(e);return o?(await this.writeImage(o,t),await this.getImage(e,t)):e})),i(this,"collectGarbage",(()=>{this.resourceMap.forEach((([e,t])=>{URL.revokeObjectURL(t),this.resourceMap.delete(e)}))})),i(this,"cleanup",(()=>new Promise((async(e,t)=>{try{if(navigator.storage&&navigator.storage.estimate){const{quota:i,usage:a}=await navigator.storage.estimate();if(i&&a){if(a/i*100>60){const i=indexedDB.deleteDatabase(nn);return i.addEventListener("success",(()=>e())),void i.addEventListener("error",(()=>t()))}return void e()}}e()}catch(i){console.log("cacheService failed to clear cache"),e()}})))),i(this,"prefetch",k((async()=>{await this.cleanup(),await this.init()}))),v(this,{})}}const sn="databases.".concat(al.databaseId,".collections.").concat(dl,".documents");class dn{constructor(){i(this,"reloadSubject",new b),i(this,"updateSubject",new b),i(this,"featureService",_(Ul.featureService)),i(this,"appwriteService",_(Ul.appwriteService)),i(this,"executionService",_(Ul.executionService)),i(this,"permissionService",_(Ul.permissionService)),i(this,"realtimeService",_(Ul.realtimeService)),i(this,"getMetadata",(async e=>{const t=[];return t.push(e.fio),t.push(e.telefon),t.push(e.inn),t.push(e.pinfl),t.join(" ").slice(0,1024)})),i(this,"createIndex",(async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(al.databaseId,dl,[f.limit(1),f.select(["index"])]);return e+1})),i(this,"findById",(async e=>{const t=await this.appwriteService.databases.getDocument(al.databaseId,dl,e);return ql(t)})),i(this,"paginate",(async(e,t,i,a,o,l)=>{const n=await this.executionService.execute(wl,{filterData:{_accessLevel:this.featureService.readAccessLevel,_search:o,...e},pagination:t,sortModel:i,chips:a,search:o,payload:l});return n===g?{rows:[],total:null}:{rows:Pl(n.rows),total:n.total}})),i(this,"create",(async e=>{const t=await this.permissionService.getPermissions(),i=await this.appwriteService.databases.createDocument(al.databaseId,dl,this.appwriteService.createId(),{...El(e),system_metadata:await this.getMetadata(e),system_access_level:await this.featureService.getAccessLevel(),system_created_by:this.appwriteService.currentUser.$id,system_only_for_owner:t.hasManagerAllObjectsExclusivePermission,index:await this.createIndex()});return ql(i)})),i(this,"update",(async(e,t)=>{const i=await this.appwriteService.databases.updateDocument(al.databaseId,dl,e,{...El(t),system_metadata:await this.getMetadata(t)}),a=ql(i);return this.updateSubject.next([e,a]),a})),i(this,"remove",(async e=>{await this.appwriteService.databases.deleteDocument(al.databaseId,dl,e)})),i(this,"prefetch",k((async()=>{this.realtimeService.subscribe(sn,(({events:e,payload:t})=>{if(e.includes(Al)&&this.reloadSubject.next(),e.includes(Tl)&&this.reloadSubject.next(),e.includes(xl)){const e=ql(t);this.updateSubject.next([t.$id,e])}}))}))),v(this,{})}}class cn{constructor(){i(this,"appwriteService",_(Ul.appwriteService)),i(this,"loggerService",_(Ul.loggerService)),i(this,"findDuplicates",(async e=>{this.loggerService.log("contactRequestService findDuplicates",{telefon:e});const t=await this.appwriteService.databases.listDocuments(al.databaseId,dl,[f.search("telefon",e)]);return{rows:Pl(t.documents),total:t.total}})),p(this)}}class mn{constructor(){i(this,"contactDbService",_(Ul.contactDbService)),i(this,"loggerService",_(Ul.loggerService)),i(this,"reloadSubject",this.contactDbService.reloadSubject),i(this,"updateSubject",this.contactDbService.updateSubject),i(this,"create",(async e=>(this.loggerService.log("contactViewService create",e),await this.contactDbService.create(e)))),i(this,"update",(async(e,t)=>(this.loggerService.log("contactViewService update",t),await this.contactDbService.update(e,t)))),i(this,"remove",(async e=>(this.loggerService.log("contactViewService remove",{id:e}),await this.contactDbService.remove(e)))),i(this,"read",(async e=>{this.loggerService.log("contactViewService read",{id:e});return await this.contactDbService.findById(e)})),i(this,"tryRead",(async e=>{this.loggerService.log("contactViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),i(this,"paginate",(async(e,t,i,a,o,l)=>(this.loggerService.log("contactViewService paginate"),await this.contactDbService.paginate(e,t,i,a,o,l)))),v(this,{})}}const pn="1970-01-01",un=(e=r())=>{const t=r(pn);return e.diff(t,"day")},hn=e=>{const t=un();return yn(t+e).utc().format()},yn=e=>r(pn).add(e,"day"),bn=e=>r().set("hour",0).set("minute",0).add(e,"minute");window.getMomentStamp=un,window.fromMomentStamp=yn,window.getUtcOffset=hn;const _n={"last-month":hn(-31),"last-three-months":hn(-93),"last-year":hn(-365),"last-day":hn(-1),"last-week":hn(-7)};class vn{constructor(){i(this,"appwriteService",_(Ul.appwriteService)),i(this,"getNewBidsCountByUserId",(async(e,t)=>{const{total:i}=await this.appwriteService.databases.listDocuments(al.databaseId,pl,[f.limit(1),f.select(["index"]),f.greaterThanEqual("$createdAt",_n[e]),f.equal("system_created_by",t)]);return i})),i(this,"getNewBidsCount",(async e=>{const{total:t}=await this.appwriteService.databases.listDocuments(al.databaseId,pl,[f.limit(1),f.select(["index"]),f.greaterThanEqual("$createdAt",_n[e])]);return t})),i(this,"getNewApartmentCount",(async e=>{const{total:t}=await this.appwriteService.databases.listDocuments(al.databaseId,sl,[f.limit(1),f.select(["index"]),f.greaterThanEqual("$createdAt",_n[e])]);return t})),i(this,"getNewApartmentCountByUserId",(async(e,t)=>{const{total:i}=await this.appwriteService.databases.listDocuments(al.databaseId,sl,[f.limit(1),f.select(["index"]),f.greaterThanEqual("$createdAt",_n[e]),f.equal("system_created_by",t)]);return i})),i(this,"getDealsInProgressCount",(async e=>{const{total:t}=await this.appwriteService.databases.listDocuments(al.databaseId,ul,[f.limit(1),f.select(["index"]),f.greaterThanEqual("$createdAt",_n[e]),f.notEqual("status","Закрытая сделка"),f.notEqual("status","Сделка сорвана")]);return t})),i(this,"getDealsInProgressCountUserId",(async(e,t)=>{const{total:i}=await this.appwriteService.databases.listDocuments(al.databaseId,ul,[f.limit(1),f.select(["index"]),f.greaterThanEqual("$createdAt",_n[e]),f.notEqual("status","Закрытая сделка"),f.notEqual("status","Сделка сорвана"),f.equal("user_id",t)]);return i})),i(this,"getDealsByStatusCount",(async(e,t)=>{const{total:i}=await this.appwriteService.databases.listDocuments(al.databaseId,ul,[f.limit(1),f.select(["index"]),f.greaterThanEqual("$createdAt",_n[e]),f.equal("status",t)]);return i})),i(this,"getDealsByStatusByUserCount",(async(e,t,i)=>{const{total:a}=await this.appwriteService.databases.listDocuments(al.databaseId,ul,[f.limit(1),f.select(["index"]),f.greaterThanEqual("$createdAt",_n[e]),f.equal("status",t),f.equal("user_id",i)]);return a})),i(this,"getDoneDealsByUserCount",(async(e,t)=>{const{total:i}=await this.appwriteService.databases.listDocuments(al.databaseId,ul,[f.limit(1),f.select(["index"]),f.greaterThanEqual("$createdAt",_n[e]),f.equal("user_id",t),f.equal("status","Закрытая сделка")]);return i})),i(this,"getTasksByStamp",(async(e,t)=>{const{documents:i}=await this.appwriteService.databases.listDocuments(al.databaseId,hl,[f.greaterThanEqual("moment_stamp",e),f.lessThanEqual("moment_stamp",t)]);return Pl(i)})),i(this,"getMyTasksByStamp",(async(e,t)=>{const i=this.appwriteService.currentUser.$id,{documents:a}=await this.appwriteService.databases.listDocuments(al.databaseId,hl,[f.greaterThanEqual("moment_stamp",e),f.lessThanEqual("moment_stamp",t),f.equal("to_user_id",i)]);return Pl(a)})),v(this,{})}}const fn=5e3,gn=I((async(e,t,i,a)=>{const[o]=await Promise.all([bs.appwriteService.databases.listDocuments(al.databaseId,e,[f.orderDesc("$updatedAt"),...a?[f.cursorAfter(a)]:[],f.limit(t),...i]),M(100)]);return o})),kn=async function*(e,t=[]){let i=0,a=null,o=gn(e,fn,t,null);for(;i<1e4;){console.log("Fetching collection ".concat(e," from ").concat(e," starting from ").concat(a||0));const l=await o;for(const e of l.documents)yield e;if(l.documents.length<fn)break;a=l.documents[l.documents.length-1].$id,o=gn(e,fn,t,a);for(const e of l.documents)yield e;i+=l.documents.length}};window.listDocuments=kn;const wn=async e=>{const t=[];for await(const i of e)t.push(i);return t},Sn=["Новая сделка","В работе","Показы","Переговоры","Задаток/Залог","Оформление","Оплата","Закрытая сделка","Сделка сорвана"],zn=["Аренда","Продажа"],Vn="databases.".concat(al.databaseId,".collections.").concat(ul,".documents");class xn{constructor(){i(this,"reloadSubject",new b),i(this,"createSubject",new b),i(this,"removeSubject",new b),i(this,"updateSubject",new b),i(this,"appwriteService",_(Ul.appwriteService)),i(this,"realtimeService",_(Ul.realtimeService)),i(this,"createIndex",(async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(al.databaseId,ul,[f.limit(1),f.select(["index"])]);return e+1})),i(this,"findByContactId",(async e=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(al.databaseId,ul,[f.limit(1),f.equal("contact_id",e),f.notEqual("status","Сделка сорвана"),f.notEqual("status","Закрытая сделка"),f.orderDesc("$createdAt")]);if(!t)throw new Error("dealDbService findByContactId document not found");return ql(t)})),i(this,"findOccupiedByTargetApartmentId",(async e=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(al.databaseId,ul,[f.limit(1),f.equal("target_apartment_id",e),f.notEqual("status","Сделка сорвана"),f.notEqual("status","Закрытая сделка"),f.orderDesc("$createdAt")]);return t?ql(t):null})),i(this,"findOccupiedByApartmentId",(async e=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(al.databaseId,ul,[f.limit(1),f.equal("apartment_id",e),f.notEqual("status","Сделка сорвана"),f.notEqual("status","Закрытая сделка"),f.orderDesc("$createdAt")]);return t?ql(t):null})),i(this,"findOccupiedByTagetBidId",(async e=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(al.databaseId,ul,[f.limit(1),f.equal("target_bid_id",e),f.notEqual("status","Сделка сорвана"),f.notEqual("status","Закрытая сделка"),f.orderDesc("$createdAt")]);return t?ql(t):null})),i(this,"findOccupiedByBidId",(async e=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(al.databaseId,ul,[f.limit(1),f.equal("bid_id",e),f.notEqual("status","Сделка сорвана"),f.notEqual("status","Закрытая сделка"),f.orderDesc("$createdAt")]);return t?ql(t):null})),i(this,"findByApartmentId",(async e=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(al.databaseId,ul,[f.limit(1),f.equal("apartment_id",e),f.notEqual("status","Сделка сорвана"),f.notEqual("status","Закрытая сделка"),f.orderDesc("$createdAt")]);if(!t)throw new Error("dealDbService findByApartmentId document not found");return ql(t)})),i(this,"findByBidId",(async e=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(al.databaseId,ul,[f.limit(1),f.equal("bid_id",e),f.notEqual("status","Сделка сорвана"),f.notEqual("status","Закрытая сделка"),f.orderDesc("$createdAt")]);if(!t)throw new Error("dealDbService findByBidId document not found");return ql(t)})),i(this,"findById",(async e=>{const t=await this.appwriteService.databases.getDocument(al.databaseId,ul,e);return ql(t)})),i(this,"findByDealStatus",(async e=>{const t=await wn(kn(ul,[f.equal("status",e)]));return Pl(t)})),i(this,"create",(async e=>{const t=await this.appwriteService.databases.createDocument(al.databaseId,ul,this.appwriteService.createId(),{...El(e),index:await this.createIndex()}),i=ql(t);return this.createSubject.next(i),i})),i(this,"update",(async(e,t)=>{const i=await this.appwriteService.databases.updateDocument(al.databaseId,ul,e,{...El(t)}),a=ql(i);return this.updateSubject.next([e,a]),a})),i(this,"remove",(async e=>{await this.appwriteService.databases.deleteDocument(al.databaseId,ul,e),this.removeSubject.next(e)})),i(this,"prefetch",k((()=>{(async()=>{this.realtimeService.subscribe(Vn,(({events:e,payload:t})=>{if(e.includes(Al)){const e=ql(t);this.reloadSubject.next(),this.createSubject.next(e)}if(e.includes(Tl)&&(this.reloadSubject.next(),this.removeSubject.next(t.$id)),e.includes(xl)){const e=ql(t);this.updateSubject.next([t.$id,e])}}))})()}))),v(this,{})}}const An="databases.".concat(al.databaseId,".collections.").concat(yl,".documents");class Tn{constructor(){i(this,"createSubject",new b),i(this,"reloadSubject",new b),i(this,"updateSubject",new b),i(this,"appwriteService",_(Ul.appwriteService)),i(this,"realtimeService",_(Ul.realtimeService)),i(this,"findById",(async e=>{const t=await this.appwriteService.databases.getDocument(al.databaseId,yl,e);return ql(t)})),i(this,"findByContactId",(async e=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(al.databaseId,yl,[f.limit(1),f.equal("contact_id",e),f.orderDesc("$createdAt")]);if(!t)throw new Error("dealHistoryDbService findByContactId document not found");return ql(t)})),i(this,"findByApartmentId",(async e=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(al.databaseId,yl,[f.limit(1),f.equal("apartment_id",e),f.orderDesc("$createdAt")]);if(!t)throw new Error("dealHistoryDbService findByApartmentId document not found");return ql(t)})),i(this,"findByBidId",(async e=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(al.databaseId,yl,[f.limit(1),f.equal("bid_id",e),f.orderDesc("$createdAt")]);if(!t)throw new Error("dealHistoryDbService findByBidId document not found");return ql(t)})),i(this,"create",(async e=>{const t=await this.appwriteService.databases.createDocument(al.databaseId,yl,this.appwriteService.createId(),El(e));return ql(t)})),i(this,"update",(async(e,t)=>{const i=await this.appwriteService.databases.updateDocument(al.databaseId,yl,e,El(t));return ql(i)})),i(this,"remove",(async e=>{await this.appwriteService.databases.deleteDocument(al.databaseId,yl,e)})),i(this,"findAllByApartmentId",(async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(al.databaseId,yl,[f.orderDesc("$createdAt"),f.equal("apartment_id",e)]);return Pl(t)})),i(this,"findAllByContactId",(async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(al.databaseId,yl,[f.orderDesc("$createdAt"),f.equal("contact_id",e)]);return Pl(t)})),i(this,"findAllByBidId",(async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(al.databaseId,yl,[f.orderDesc("$createdAt"),f.equal("bid_id",e)]);return Pl(t)})),i(this,"prefetch",k((async()=>{this.realtimeService.subscribe(An,(({events:e,payload:t})=>{if(e.includes(Al)&&(this.reloadSubject.next(),this.createSubject.next(t)),e.includes(Tl)&&this.reloadSubject.next(),e.includes(xl)){const e=ql(t);this.updateSubject.next([t.$id,e])}}))}))),v(this,{})}}const Cn="deal-begin",Fn="deal-end",Ln="deal-reassign",In="deal-status";class Mn{constructor(){i(this,"dealHistoryViewService",_(Ul.dealHistoryViewService)),i(this,"dealViewService",_(Ul.dealViewService)),i(this,"contactViewService",_(Ul.contactViewService)),i(this,"apartmentViewService",_(Ul.apartmentViewService)),i(this,"bidViewService",_(Ul.bidViewService)),i(this,"appwriteService",_(Ul.appwriteService)),i(this,"loggerService",_(Ul.loggerService)),i(this,"layoutService",_(Ul.layoutService)),i(this,"readDealStateByApartment",(async(e,t)=>{this.loggerService.log("dealHistoryRequestService readDealStateByApartment",{apartmentId:e,userId:t});const{documents:i}=await this.appwriteService.databases.listDocuments(al.databaseId,yl,[f.limit(1),f.equal("apartment_id",e),f.equal("type",Fn),f.orderDesc("$createdAt")]),{documents:a}=await this.appwriteService.databases.listDocuments(al.databaseId,yl,[f.limit(1),f.equal("apartment_id",e),f.equal("type",Cn),f.orderDesc("$createdAt")]),[o=null]=i,[l=null]=a,n=(()=>{if(!l)return Fn;if(!o)return Cn;const e=r(l.$createdAt),t=r(o.$createdAt);return e.isAfter(t)?Cn:Fn})(),s=[];if(l&&n===Cn){const{documents:t}=await this.appwriteService.databases.listDocuments(al.databaseId,yl,[f.equal("apartment_id",e),f.cursorBefore(l.$id),f.orderDesc("$createdAt")]);for(const e of t)e.type===Ln&&s.push(e)}const[d=null]=s;return d&&l?(s.unshift(l),{status:Ln,activeItem:d,reassign:s}):{status:n,activeItem:n===Cn?l:null,reassign:s}})),i(this,"commitApartmentDealBegin",(async(e,t,i,a,o,l)=>{this.loggerService.log("dealHistoryRequestService commitApartmentDealBegin",{apartmentId:e,userId:t});if((await this.readDealStateByApartment(e,t)).status!==Fn)throw new Error("commitApartmentDealBegin invalid state");const n=["<pre>","Создана сделка <text-underline>".concat(i,"</text-underline>"),l?"Комментарий: ".concat(l):"","</pre>"].join("\n"),{contact_id:r}=await this.apartmentViewService.read(e),{fio:s,telefon:d,tip_klienta:c}=await this.contactViewService.read(r),{id:m}=await this.dealViewService.create({status:"Новая сделка",apartment_id:e,contact_id:r,bid_id:null,type:i,user_id:t,price:a,price_unit:o,target_apartment_id:null,target_bid_id:null,fio:s,telefon:d,tip_klienta:c?c[0]:""});await this.dealHistoryViewService.create({deal_id:m,apartment_id:e,contact_id:r,user_id:t,type:Cn,comment:n,bid_id:null,payload:null}),this.layoutService.reloadOutlet()})),i(this,"commitApartmentDealEnd",(async(e,t,i,a)=>{this.loggerService.log("dealHistoryRequestService commitApartmentDealEnd",{apartmentId:e,userId:t});const o=await this.readDealStateByApartment(e,t);if(o.status!==Cn&&o.status!==Ln)throw new Error("commitApartmentDealEnd invalid state");if(!o.activeItem)throw new Error("commitApartmentDealBegin activeItem is null");if(await this.dealHistoryViewService.create({contact_id:o.activeItem.contact_id,apartment_id:e,user_id:t,deal_id:o.activeItem.deal_id,type:Fn,comment:i,bid_id:null,payload:null}),a){const{target_bid_id:t}=await this.dealViewService.read(o.activeItem.deal_id);await this.apartmentViewService.moveToArchive(e),t&&await this.bidViewService.moveToArchive(t)}this.layoutService.reloadOutlet()})),i(this,"commitApartmentDealReassign",(async(e,t)=>{this.loggerService.log("dealHistoryRequestService commitApartmentDealReassign",{apartmentId:e,userId:t});const i=await this.readDealStateByApartment(e,t);if(i.status!==Cn&&i.status!==Ln)throw new Error("commitApartmentDealBegin invalid state");if(!i.activeItem)throw new Error("commitApartmentDealBegin activeItem is null");await Promise.all([this.dealHistoryViewService.create({contact_id:i.activeItem.contact_id,apartment_id:e,user_id:t,deal_id:i.activeItem.deal_id,type:Ln,comment:"",bid_id:null,payload:null}),this.dealViewService.update(i.activeItem.deal_id,{user_id:t})]),this.layoutService.reloadOutlet()})),i(this,"readDealStateByBid",(async(e,t)=>{this.loggerService.log("dealHistoryRequestService readDealStateByBid",{bidId:e,userId:t});const{documents:i}=await this.appwriteService.databases.listDocuments(al.databaseId,yl,[f.limit(1),f.equal("bid_id",e),f.equal("type",Fn),f.orderDesc("$createdAt")]),{documents:a}=await this.appwriteService.databases.listDocuments(al.databaseId,yl,[f.limit(1),f.equal("bid_id",e),f.equal("type",Cn),f.orderDesc("$createdAt")]),[o=null]=i,[l=null]=a,n=(()=>{if(!l)return Fn;if(!o)return Cn;const e=r(l.$createdAt),t=r(o.$createdAt);return e.isAfter(t)?Cn:Fn})(),s=[];if(l&&n===Cn){const{documents:t}=await this.appwriteService.databases.listDocuments(al.databaseId,yl,[f.equal("bid_id",e),f.cursorBefore(l.$id),f.orderDesc("$createdAt")]);for(const e of t)e.type===Ln&&s.push(e)}const[d=null]=s;return d&&l?(s.unshift(l),{status:Ln,activeItem:d,reassign:s}):{status:n,activeItem:n===Cn?l:null,reassign:s}})),i(this,"commitBidDealBegin",(async(e,t,i,a,o,l)=>{this.loggerService.log("dealHistoryRequestService commitBidDealBegin",{bidId:e,userId:t});if((await this.readDealStateByBid(e,t)).status!==Fn)throw new Error("commitApartmentDealBegin invalid state");const{contact_id:n}=await this.bidViewService.read(e),{fio:r,telefon:s,tip_klienta:d}=await this.contactViewService.read(n),{id:c}=await this.dealViewService.create({status:"Новая сделка",bid_id:e,apartment_id:null,contact_id:n,target_apartment_id:null,target_bid_id:null,type:i,user_id:t,price:a,price_unit:o,fio:r,telefon:s,tip_klienta:d?d[0]:""}),m=["<pre>","Создана сделка <text-underline>".concat(i,"</text-underline>"),l?"Комментарий: ".concat(l):"","</pre>"].join("\n");await this.dealHistoryViewService.create({bid_id:e,user_id:t,deal_id:c,type:Cn,comment:m,contact_id:n,apartment_id:null,payload:null}),this.layoutService.reloadOutlet()})),i(this,"commitBidDealEnd",(async(e,t,i,a)=>{this.loggerService.log("dealHistoryRequestService commitBidDealEnd",{bidId:e,userId:t});const o=await this.readDealStateByBid(e,t);if(o.status!==Cn&&o.status!==Ln)throw new Error("commitBidDealEnd invalid state");if(!o.activeItem)throw new Error("commitBidDealEnd activeItem is null");if(await this.dealHistoryViewService.create({bid_id:e,user_id:t,type:Fn,deal_id:o.activeItem.deal_id,comment:i,contact_id:o.activeItem.contact_id,apartment_id:null,payload:null}),a){const{target_apartment_id:t}=await this.dealViewService.read(o.activeItem.deal_id);await this.bidViewService.moveToArchive(e),t&&await this.apartmentViewService.moveToArchive(t)}this.layoutService.reloadOutlet()})),i(this,"commitBidDealReassign",(async(e,t)=>{this.loggerService.log("dealHistoryRequestService commitBidDealReassign",{bidId:e,userId:t});const i=await this.readDealStateByBid(e,t);if(i.status!==Cn&&i.status!==Ln)throw new Error("commitApartmentDealBegin invalid state");if(!i.activeItem)throw new Error("commitApartmentDealBegin activeItem is null");await Promise.all([this.dealHistoryViewService.create({bid_id:e,user_id:t,type:Ln,deal_id:i.activeItem.deal_id,contact_id:i.activeItem.contact_id,comment:"",apartment_id:null,payload:null}),this.dealViewService.update(i.activeItem.deal_id,{user_id:t})]),this.layoutService.reloadOutlet()})),i(this,"commitDealStatusByApartment",(async(e,t,i,a)=>{this.loggerService.log("dealHistoryRequestService commitDealStatusByApartment",{apartmentId:e});const{deal_id:o,contact_id:l}=await this.dealHistoryViewService.findByApartmentId(e),n=this.appwriteService.currentUser.$id,r=["<pre>","Статус изменен из <text-underline>".concat(t,"</text-underline> в <text-underline>").concat(i,"</text-underline>"),a?"Комментарий: ".concat(a):"","</pre>"].join("\n");"Закрытая сделка"!==i&&"Сделка сорвана"!==i?await this.dealHistoryViewService.create({contact_id:l,bid_id:null,user_id:n,type:In,deal_id:o,comment:r,apartment_id:e,payload:null}):await this.commitApartmentDealEnd(e,n,r,"Закрытая сделка"===i)})),i(this,"commitDealStatusByBid",(async(e,t,i,a)=>{this.loggerService.log("dealHistoryRequestService commitDealStatusByBid",{bidId:e});const{deal_id:o,contact_id:l}=await this.dealHistoryViewService.findByBidId(e),n=this.appwriteService.currentUser.$id,r=["<pre>","Статус изменен из <text-underline>".concat(t,"</text-underline> в <text-underline>").concat(i,"</text-underline>"),a?"Комментарий: ".concat(a):"","</pre>"].join("\n");"Закрытая сделка"!==i&&"Сделка сорвана"!==i?await this.dealHistoryViewService.create({bid_id:e,user_id:n,type:In,deal_id:o,comment:r,contact_id:l,apartment_id:null,payload:null}):await this.commitBidDealEnd(e,n,r,"Закрытая сделка"===i)})),v(this,{})}}class jn{constructor(){i(this,"dealHistoryDbService",_(Ul.dealHistoryDbService)),i(this,"loggerService",_(Ul.loggerService)),i(this,"createSubject",this.dealHistoryDbService.createSubject),i(this,"reloadSubject",this.dealHistoryDbService.reloadSubject),i(this,"updateSubject",this.dealHistoryDbService.updateSubject),i(this,"create",(async e=>(this.loggerService.log("dealHistoryViewService create",e),await this.dealHistoryDbService.create(e)))),i(this,"update",(async(e,t)=>(this.loggerService.log("dealHistoryViewService update",t),await this.dealHistoryDbService.update(e,t)))),i(this,"remove",(async e=>(this.loggerService.log("dealHistoryViewService remove",{id:e}),await this.dealHistoryDbService.remove(e)))),i(this,"read",(async e=>{this.loggerService.log("dealHistoryViewService read",{id:e});return await this.dealHistoryDbService.findById(e)})),i(this,"findByApartmentId",(async e=>(this.loggerService.log("dealHistoryViewService findByApartmentId"),await this.dealHistoryDbService.findByApartmentId(e)))),i(this,"findByBidId",(async e=>(this.loggerService.log("dealHistoryViewService findByBidId"),await this.dealHistoryDbService.findByBidId(e)))),i(this,"findByContactId",(async e=>(this.loggerService.log("dealHistoryViewService findByContactId"),await this.dealHistoryDbService.findByContactId(e)))),i(this,"findAllByApartmentId",(async e=>{if(this.loggerService.log("dealHistoryViewService findAllByApartmentId"),!e)throw new Error("dealHistoryViewService findAllByApartmentId id is null");return await this.dealHistoryDbService.findAllByApartmentId(e)})),i(this,"findAllByBidId",(async e=>{if(this.loggerService.log("dealHistoryViewService findAllByBidId"),!e)throw new Error("dealHistoryViewService findAllByBidId id is null");return await this.dealHistoryDbService.findAllByBidId(e)})),i(this,"findAllByContactId",(async e=>{if(this.loggerService.log("dealHistoryViewService findAllByContactId"),!e)throw new Error("dealHistoryViewService findAllByContactId id is null");return await this.dealHistoryDbService.findAllByContactId(e)})),i(this,"tryRead",(async e=>{this.loggerService.log("dealHistoryViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),v(this,{})}}class Bn{constructor(){i(this,"dealHistoryRequestService",_(Ul.dealHistoryRequestService)),i(this,"dealViewService",_(Ul.dealViewService)),i(this,"commidDealHistoryInternal",(async(e,t,i,a,o)=>{try{if(e)return void(await this.dealHistoryRequestService.commitDealStatusByApartment(e,i,a,o));if(t)return void(await this.dealHistoryRequestService.commitDealStatusByBid(t,i,a,o))}catch(l){console.log(l)}})),i(this,"commitDealStatusChange",(async(e,t,i,a,o,l,n,r)=>{await Promise.all([this.commidDealHistoryInternal(t,i,l,n,r),this.dealViewService.update(e,{status:n,target_apartment_id:a,target_bid_id:o})])})),i(this,"commitBidDealEnd",(async(e,t,i,a)=>{const{$id:o,status:l}=await this.dealViewService.findByBidId(e);await this.commitDealStatusChange(o,null,e,t,null,l,i,a)})),i(this,"commitApartmentDealEnd",(async(e,t,i,a)=>{const{$id:o,status:l}=await this.dealViewService.findByApartmentId(e);await this.commitDealStatusChange(o,e,null,null,t,l,i,a)})),v(this,{})}}class Rn{constructor(){i(this,"dealDbService",_(Ul.dealDbService)),i(this,"loggerService",_(Ul.loggerService)),i(this,"reloadSubject",this.dealDbService.reloadSubject),i(this,"createSubject",this.dealDbService.createSubject),i(this,"removeSubject",this.dealDbService.removeSubject),i(this,"updateSubject",this.dealDbService.updateSubject),i(this,"create",(async e=>(this.loggerService.log("dealViewService create",e),await this.dealDbService.create(e)))),i(this,"update",(async(e,t)=>(this.loggerService.log("dealViewService update",t),await this.dealDbService.update(e,t)))),i(this,"remove",(async e=>(this.loggerService.log("dealViewService remove",{id:e}),await this.dealDbService.remove(e)))),i(this,"read",(async e=>{this.loggerService.log("dealViewService read",{id:e});return await this.dealDbService.findById(e)})),i(this,"tryRead",(async e=>{this.loggerService.log("dealViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),i(this,"readStatusByApartmentId",(async e=>{this.loggerService.log("dealViewService readStatusByApartmentId");let t="";try{const{status:i}=await this.dealDbService.findByApartmentId(e);t=i}catch(i){t="Свободно"}finally{return t}})),i(this,"readStatusByBidId",(async e=>{this.loggerService.log("dealViewService readStatusByBidId");let t="";try{const{status:i}=await this.dealDbService.findByBidId(e);t=i}catch(i){t="Свободно"}finally{return t}})),i(this,"readStatusByContactId",(async e=>{this.loggerService.log("dealViewService readStatusByContactId");let t="";try{const{status:i}=await this.dealDbService.findByContactId(e);t=i}catch(i){t=""}finally{return t}})),i(this,"findByDealStatus",(async e=>(this.loggerService.log("dealViewService findByDealStatus"),await this.dealDbService.findByDealStatus(e)))),i(this,"findByApartmentId",(async e=>(this.loggerService.log("dealViewService findByApartmentId"),await this.dealDbService.findByApartmentId(e)))),i(this,"findByBidId",(async e=>(this.loggerService.log("dealViewService findByBidId"),await this.dealDbService.findByBidId(e)))),i(this,"findByContactId",(async e=>(this.loggerService.log("dealViewService findByContactId"),await this.dealDbService.findByContactId(e)))),i(this,"findOccupiedByTargetApartmentId",(async e=>(this.loggerService.log("dealViewService findOccupiedByTargetApartmentId"),await this.dealDbService.findOccupiedByTargetApartmentId(e)))),i(this,"findOccupiedByTagetBidId",(async e=>(this.loggerService.log("dealViewService findOccupiedByTagetBidId"),await this.dealDbService.findOccupiedByTagetBidId(e)))),i(this,"findOccupiedByApartmentId",(async e=>(this.loggerService.log("dealViewService findOccupiedByApartmentId"),await this.dealDbService.findOccupiedByApartmentId(e)))),i(this,"findOccupiedByBidId",(async e=>(this.loggerService.log("dealViewService findOccupiedByBidId"),await this.dealDbService.findOccupiedByBidId(e)))),v(this,{})}}class Dn{constructor(){i(this,"roleViewService",_(Ul.roleViewService)),i(this,"settingsViewService",_(Ul.settingsViewService)),i(this,"getCurrencyType",k((async()=>({eur:"EUR",usd:"USD",uzs:"UZS"})))),i(this,"getUserRoles",(async()=>(await this.roleViewService.findAll()).reduce(((e,{id:t,title:i})=>({...e,[t]:i})),{}))),i(this,"getMasterDetailMode",(async()=>({[j.Tabs]:"Вкладки",[j.Paper]:"Скроллер"}))),i(this,"getCountries",k((async()=>await B("".concat(il,"/country-list.json"))))),i(this,"getMahallya",k((async()=>await B("".concat(il,"/mahallya.json"))))),i(this,"getUlicza",k((async()=>await B("".concat(il,"/ulicza.json"))))),i(this,"getOrientir",k((async()=>await B("".concat(il,"/orientir.json"))))),i(this,"getSocialMediaLinksRaw",k((async()=>{const e=await this.settingsViewService.getValue(),t=[Ll,Cl,Fl,Il];return[...new Array(1)].flatMap(((i,a)=>t.map((t=>({type:t,id:a+1,label:t,link:h.get(e,"".concat(t,"_link_").concat(a+1)),enabled:h.get(e,"".concat(t,"_link_enabled_").concat(a+1))}))))).filter((({enabled:e})=>e)).reduce(((e,{id:t,type:i,label:a,link:o,enabled:l})=>({...e,["".concat(i,"-").concat(t)]:{label:a,link:o,enabled:l}})),{})}))),i(this,"getInstagramPrimaryLink",(async()=>{const e=await this.getSocialMediaLinksRaw(),t=Object.entries(e).filter((([e])=>e.includes(Ll)));return t.length?t[0][1].link:null})),i(this,"getTelegramPrimaryLink",(async()=>{const e=await this.getSocialMediaLinksRaw(),t=Object.entries(e).filter((([e])=>e.includes(Cl)));return t.length?t[0][1].link:null})),i(this,"getFacebookPrimaryLink",(async()=>{const e=await this.getSocialMediaLinksRaw(),t=Object.entries(e).filter((([e])=>e.includes(Il)));return t.length?t[0][1].link:null})),i(this,"getYoutubePrimaryLink",(async()=>{const e=await this.getSocialMediaLinksRaw(),t=Object.entries(e).filter((([e])=>e.includes(Fl)));return t.length?t[0][1].link:null})),i(this,"getTelegramMapRaw",k((async()=>{const e=await this.settingsViewService.getValue();return[...new Array(10)].map(((t,i)=>({id:i+1,label:h.get(e,"telegram_name_".concat(i+1))||h.get(e,"telegram_channel_".concat(i+1)),token:h.get(e,"telegram_token_".concat(i+1)),channel:h.get(e,"telegram_channel_".concat(i+1)),enabled:h.get(e,"telegram_channel_enabled_".concat(i+1))}))).filter((({enabled:e})=>e)).reduce(((e,t)=>({...e,[t.id]:t})),{})}))),i(this,"getTelegramMap",(async()=>{const e=await this.getTelegramMapRaw();return Object.entries(e).reduce(((e,[t,{label:i}])=>({...e,[t]:i})),{})})),i(this,"getAgencyMapRaw",k((async()=>{const e=await this.settingsViewService.getValue();return[...new Array(5)].map(((t,i)=>({id:i+1,phone:h.get(e,"telegram_agency_".concat(i+1)),telegram:h.get(e,"telegram_agency_nickname_".concat(i+1)),enabled:h.get(e,"telegram_agency_enabled_".concat(i+1))}))).filter((({enabled:e})=>e)).reduce(((e,t)=>({...e,[t.id]:t})),{})}))),i(this,"getAgencyMap",(async()=>{const e=await this.getAgencyMapRaw();return Object.entries(e).reduce(((e,[t,{phone:i,telegram:a}])=>({...e,[t]:"".concat(i," - ").concat(a)})),{})})),i(this,"getAgentMapRaw",k((async()=>{const e=await this.settingsViewService.getValue();return[...new Array(5)].map(((t,i)=>({id:i+1,phone:h.get(e,"telegram_agent_".concat(i+1)),telegram:h.get(e,"telegram_agent_nickname_".concat(i+1)),enabled:h.get(e,"telegram_agent_enabled_".concat(i+1))}))).filter((({enabled:e})=>e)).reduce(((e,t)=>({...e,[t.id]:t})),{})}))),i(this,"getAgentMap",(async()=>{const e=await this.getAgentMapRaw();return Object.entries(e).reduce(((e,[t,{phone:i,telegram:a}])=>({...e,[t]:"".concat(i," - ").concat(a)})),{})})),i(this,"prefetch",k((()=>Promise.all([this.getCountries(),this.getMahallya(),this.getUlicza(),this.getOrientir(),this.getAgencyMapRaw(),this.getAgentMapRaw(),this.getTelegramMapRaw(),this.getSocialMediaLinksRaw()])))),v(this,{})}}class qn{constructor(){i(this,"appwriteService",_(Ul.appwriteService)),i(this,"userViewService",_(Ul.userViewService)),i(this,"_alerts",[]),i(this,"getDocument",(async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(al.databaseId,rl,[f.equal("$id",e),f.limit(1)]);return t.length?t[0]:null})),i(this,"findAll",(async()=>{const e=await this.appwriteService.databases.listDocuments(al.databaseId,rl,[f.orderDesc("$createdAt")]);return Pl(e.documents)})),i(this,"handleBuildAlerts",(async e=>{const{sideMenu:t=null}=m_()||{},{id:i=null}=fs();return(await Promise.all(e.filter((e=>null!==e.path)).filter((e=>null!==e.entity_id)).filter((e=>e.path===t)).filter((e=>e.entity_id===i)).filter((e=>e.id!==this.appwriteService.currentUser.$id)).filter((e=>"create"!==e.id)).filter((({$updatedAt:e})=>{const t=r(e);return r().diff(t,"minute")<15})).map((async({id:e,$updatedAt:t})=>{const i=await this.userViewService.tryRead(e);if(!i)return null;const a=[i.first_name,i.last_name,i.middle_name].join(" "),o=r(t);let l=o.get("hour").toString(),n=o.get("minute").toString(),s=o.get("second").toString();l=1===l.length?"0"+l:l,n=1===n.length?"0"+n:n,s=1===s.length?"0"+s:s;return{color:"error",content:"Сотрудник ".concat(a," смотрит форму (Время ").concat(l,":").concat(n,":").concat(s,")")}})))).filter((e=>!!e))})),i(this,"handleFetch",I((async()=>{const e=await this.findAll(),t=await this.handleBuildAlerts(e);C((()=>{this._alerts=t}))}))),i(this,"create",(async e=>await this.appwriteService.databases.createDocument(al.databaseId,rl,this.appwriteService.currentUser.$id,El(e)))),i(this,"update",(async e=>await this.appwriteService.databases.updateDocument(al.databaseId,rl,this.appwriteService.currentUser.$id,El(e)))),i(this,"prefetch",k((async()=>{this.appwriteService.isAuthorized&&(await this.handleFetch(),this.appwriteService.client.subscribe("databases.".concat(al.databaseId,".collections.").concat(rl,".documents"),(async()=>{await this.handleFetch()})))}))),v(this,{_alerts:S,alerts:z})}get alerts(){return R(this._alerts)}}class Pn{constructor(){i(this,"routerService",_(Ul.routerService)),i(this,"loggerService",_(Ul.loggerService)),i(this,"errorSubject",new b),i(this,"handleGlobalError",(e=>{console.error(e),this.loggerService.error(e),this.routerService.push("/error_page"),this.errorSubject.next()})),p(this)}}class En{constructor(){i(this,"appwriteService",_(Ul.appwriteService)),i(this,"userViewService",_(Ul.userViewService)),i(this,"roleViewService",_(Ul.roleViewService)),i(this,"_features",[]),i(this,"getFeaturesByUserId",(async e=>{const{user_role:t=null,user_features:i=[]}=await this.userViewService.tryRead(e)||{},a=await this.roleViewService.tryRead(t?t[0]:"unknown"),o=[...i||[],...(null==a?void 0:a.role_features)||[]];return[...new Set(o)]})),i(this,"init",k((async()=>{if(!this.isAuthorized)return void this.init.clear();const e=await this.getFeaturesByUserId(this.appwriteService.currentUser.$id);C((()=>{this._features=e}))}))),i(this,"getFeatures",(async()=>(await this.init(),this.features))),i(this,"getAccessLevel",(async()=>(await this.init(),this.accessLevel))),i(this,"hasFeature",(async(...e)=>{const t=await this.getFeatures();return e.some((e=>t.includes(e)))})),v(this,{_features:S,features:z,accessLevel:z})}get isAuthorized(){return this.appwriteService.isAuthorized}get features(){return R(this._features)}get readAccessLevel(){const e=new Set(this.features).has("vizhu_vse_urovni")?5:0;return Math.max(this.accessLevel,e)}get accessLevel(){const e=new Set(this.features),t=[...new Array(5)].map(((e,t)=>t+1)).reverse();if(e.has("vizhu_vse_urovni"))return 5;for(const i of t)if(e.has("level-".concat(i)))return i;return console.warn("FeatureService accessLevel unset level"),0}}class Nn{constructor(){i(this,"appbarSubject",new b),i(this,"modalSubject",new b),i(this,"reloadOutletSubject",new b),i(this,"_modalLoading",0),i(this,"_appbarLoading",0),i(this,"setModalLoader",(e=>{this._modalLoading=Math.max(this._modalLoading+(e?1:-1),0),this.modalSubject.next(e)})),i(this,"setAppbarLoader",(e=>{this._appbarLoading=Math.max(this._appbarLoading+(e?1:-1),0),this.appbarSubject.next(e)})),i(this,"dropModalLoader",(()=>{this._modalLoading=0,this.modalSubject.next(!1)})),i(this,"dropAppbarLoader",(()=>{this._appbarLoading=0,this.appbarSubject.next(!1)})),i(this,"reloadOutlet",(()=>{this.reloadOutletSubject.next()})),p(this)}get hasModalLoader(){return!!this._modalLoading}get hasAppbarLoader(){return!!this._appbarLoading}}class On{constructor(){i(this,"appwriteService",_(Ul.appwriteService)),i(this,"error",(e=>{console.error(e),Ko&&D((t=>{t.setExtra("user_id",this.appwriteService.currentUser.$id),t.setExtra("email",this.appwriteService.currentUser.email),q(e)}))})),i(this,"log",((e,t)=>{console.log(e,t),Ko&&D((i=>{i.setExtra("user_id",this.appwriteService.currentUser.$id),i.setExtra("email",this.appwriteService.currentUser.email),i.setExtra("msg",e),t&&i.setExtra("data",t),P("Log for ".concat(this.appwriteService.currentUser.email))}))})),i(this,"prefetch",k((async()=>{Ko&&E({dsn:"https://8cba9840891744e8835be09bf6f2c5e6@o4505477865996288.ingest.sentry.io/4505477935726592",environment:"frontend"})}))),v(this,{})}}const Un=(()=>{let e=null,t=null;return()=>{const{pathname:i}=bs.routerService.location;return e!==i&&(t=(()=>{const e=vs("id");let t=!1,i=!1,a=!1;return e&&bs.routerService.location.pathname.startsWith("/bid")&&(a=!0),e&&bs.routerService.location.pathname.startsWith("/apartment")&&(i=!0),e&&bs.routerService.location.pathname.startsWith("/contact")&&(t=!0),{id:e||"unknown",isContact:t,isApartment:i,isBid:a}})(),e=i),t}})(),Hn=["system_created_by","system_only_for_owner","system_allowance"],Wn={system_created_by:null,system_only_for_owner:!1,system_allowance:[]},$n=async(e,t)=>{const{documents:[i=null]}=await bs.appwriteService.databases.listDocuments(al.databaseId,e,[f.select([...Hn]),f.equal("$id",t),f.limit(1),f.orderDesc("$createdAt")]);return i||Wn};window.readOwnerMetadata=$n;class Gn{constructor(){i(this,"getOwnerMetadata",(async()=>{const{id:e,isApartment:t,isBid:i,isContact:a}=Un();return i?await $n(pl,e):t?await $n(sl,e):a?await $n(dl,e):void 0})),i(this,"getAreaMetadataByBid",(async e=>({system_metro:N(e.metro,e.metro_list).filter((e=>e)),system_rajon:N(e.rajon,e.rajon_list).filter((e=>e)),system_mahallya:N(e.mahallya,e.mahallya_list).filter((e=>e))}))),i(this,"getAreaMetadataByApartment",(async e=>({system_metro:N(e.metro).filter((e=>e)),system_rajon:N(e.rajon).filter((e=>e)),system_mahallya:N(e.mahallya).filter((e=>e))}))),v(this,{})}}const Yn="databases.".concat(al.databaseId,".collections.").concat(vl,".documents");class Kn{constructor(){i(this,"createSubject",new b),i(this,"reloadSubject",new b),i(this,"updateSubject",new b),i(this,"appwriteService",_(Ul.appwriteService)),i(this,"realtimeService",_(Ul.realtimeService)),i(this,"findAllByUserId",k((async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(al.databaseId,vl,[f.equal("user_id",e),f.orderDesc("$createdAt")]);return Pl(t)}))),i(this,"findAllUnreadByUserId",k((async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(al.databaseId,vl,[f.equal("user_id",e),f.equal("is_read",[!1]),f.orderDesc("$createdAt")]);return Pl(t)}))),i(this,"findById",(async e=>{const t=await this.appwriteService.databases.getDocument(al.databaseId,vl,e);return ql(t)})),i(this,"create",(async e=>{const t=await this.appwriteService.databases.createDocument(al.databaseId,vl,this.appwriteService.createId(),{is_read:!1,...El(e)});this.findAllByUserId.clear(),this.findAllUnreadByUserId.clear();const i=ql(t);return this.createSubject.next(i),this.reloadSubject.next(),i})),i(this,"update",(async(e,t)=>{const i=await this.appwriteService.databases.updateDocument(al.databaseId,vl,e,{is_read:!1,...El(t)});this.findAllByUserId.clear(),this.findAllUnreadByUserId.clear();const a=ql(i);return this.updateSubject.next([e,a]),this.reloadSubject.next(),a})),i(this,"remove",(async e=>{await this.appwriteService.databases.deleteDocument(al.databaseId,vl,e),this.findAllByUserId.clear(),this.findAllUnreadByUserId.clear(),this.reloadSubject.next()})),i(this,"prefetch",k((async()=>{this.realtimeService.subscribe(Yn,(({events:e,payload:t})=>{if(e.includes(Al)&&(this.findAllByUserId.clear(),this.findAllUnreadByUserId.clear(),this.reloadSubject.next(),this.createSubject.next(t)),e.includes(Tl)&&(this.findAllByUserId.clear(),this.findAllUnreadByUserId.clear(),this.reloadSubject.next()),e.includes(xl)){this.findAllByUserId.clear(),this.findAllUnreadByUserId.clear();const e=ql(t);this.updateSubject.next([t.$id,e])}}))}))),v(this,{})}}class Xn{constructor(){i(this,"notifyDbService",_(Ul.notifyDbService)),i(this,"loggerService",_(Ul.loggerService)),i(this,"createSubject",this.notifyDbService.createSubject),i(this,"reloadSubject",this.notifyDbService.reloadSubject),i(this,"updateSubject",this.notifyDbService.updateSubject),i(this,"create",(async e=>(this.loggerService.log("roleViewService create",e),await this.notifyDbService.create(e)))),i(this,"findAllByUserId",(async e=>(this.loggerService.log("roleViewService findAllByUserId"),await this.notifyDbService.findAllByUserId(e)))),i(this,"findAllUnreadByUserId",(async e=>(this.loggerService.log("roleViewService findAllUnreadByUserId"),await this.notifyDbService.findAllUnreadByUserId(e)))),i(this,"toggleReadAllByUserId",(async e=>{this.loggerService.log("roleViewService toggleReadAllByUserId");const t=await this.notifyDbService.findAllUnreadByUserId(e);await Promise.all(t.map((async({$id:e})=>{this.notifyDbService.update(e,{is_read:!0})})))})),i(this,"update",(async(e,t)=>(this.loggerService.log("roleViewService update",t),await this.notifyDbService.update(e,t)))),i(this,"remove",(async e=>(this.loggerService.log("roleViewService remove",{id:e}),await this.notifyDbService.remove(e)))),i(this,"read",(async e=>{this.loggerService.log("roleViewService read",{id:e});return await this.notifyDbService.findById(e)})),i(this,"tryRead",(async e=>{this.loggerService.log("roleViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),v(this,{})}}const Jn=O((async e=>await $n(pl,e))),Zn=O((async e=>await $n(dl,e))),Qn=O((async e=>await $n(sl,e)));class er{constructor(){i(this,"appwriteService",_(Ul.appwriteService)),i(this,"featureService",_(Ul.featureService)),i(this,"routerService",_(Ul.routerService)),i(this,"dealViewService",_(Ul.dealViewService)),i(this,"hasReassignDelayFlagByApartmentId",(async e=>{const t=await U(H(this.featureService.hasFeature("zaderzhka_perenaznacheniya_otvetstvennogo")),(async()=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(al.databaseId,yl,[f.limit(1),f.select(["$id"]),f.equal("apartment_id",e),f.notEqual("type","deal-status"),f.orderDesc("$createdAt")]);if(!t)return!0;if("deal-end"===t.type)return!0;return un()-un(r(t.$createdAt))>3})());return H(t)})),i(this,"hasReassignDelayFlagByBidId",(async e=>{const t=await U(H(this.featureService.hasFeature("zaderzhka_perenaznacheniya_otvetstvennogo")),(async()=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(al.databaseId,yl,[f.limit(1),f.select(["$id"]),f.equal("bid_id",e),f.notEqual("type","deal-status"),f.orderDesc("$createdAt")]);if(!t)return!0;if("deal-end"===t.type)return!0;return un()-un(r(t.$createdAt))>3})());return H(t)})),i(this,"getOwnerContactPermissionByApartmentId",(e=>{const t=this.appwriteService.currentUser.$id,i=O((async()=>await $n(sl,e)));return U(this.featureService.hasFeature("vizhu_kontakty_pod_bronyu"),W((()=>U(H(this.featureService.hasFeature("ne_vizhu_nomera_telefonov_chuzhih_kontaktov")),(async()=>{const{system_created_by:e}=await i();return e===t})()))(),(async()=>{const{system_created_by:e,system_only_for_owner:a}=await i();return!a||e===t})(),(async()=>{const i=await this.dealViewService.findOccupiedByApartmentId(e);return!i||i.user_id===t})(),(async()=>{const i=await this.dealViewService.findOccupiedByTargetApartmentId(e);return!i||i.user_id===t})()))})),i(this,"getOwnerContactPermissionByBidId",(e=>{const t=this.appwriteService.currentUser.$id,i=O((async()=>await $n(pl,e)));return U(this.featureService.hasFeature("vizhu_kontakty_pod_bronyu"),W((()=>U(H(this.featureService.hasFeature("ne_vizhu_nomera_telefonov_chuzhih_kontaktov")),(async()=>{const{system_created_by:e}=await i();return e===t})()))(),(async()=>{const{system_created_by:e,system_only_for_owner:a}=await i();return!a||e===t})(),(async()=>{const i=await this.dealViewService.findOccupiedByBidId(e);return!i||i.user_id===t})(),(async()=>{const i=await this.dealViewService.findOccupiedByTagetBidId(e);return!i||i.user_id===t})()))})),i(this,"getOwnerContactPermissionByContactId",(e=>{const t=this.appwriteService.currentUser.$id,i=O((async()=>await $n(dl,e)));return W((()=>U(H(this.featureService.hasFeature("ne_vizhu_nomera_telefonov_chuzhih_kontaktov")),(async()=>{const{system_created_by:e}=await i();return e===t})()))(),(async()=>{const{system_created_by:e,system_only_for_owner:a}=await i();return!a||e===t})())})),i(this,"hasInternOwnerContactPermission",O((async()=>{const{id:e,isApartment:t,isBid:i,isContact:a}=Un(),o=await this.featureService.hasFeature("ne_vizhu_nomera_telefonov_chuzhih_kontaktov");let l=!1,n=!1,r=!1;if(o){if(i){const{system_created_by:t}=await Jn(e);r=this.appwriteService.currentUser.$id===t}if(t){const{system_created_by:t}=await Qn(e);n=this.appwriteService.currentUser.$id===t}if(a){const{system_created_by:t}=await Zn(e);l=this.appwriteService.currentUser.$id===t}}return U(!o,l,n,r)}))),i(this,"hasExclusiveOwnerContactPermission",O((async()=>{const{id:e,isApartment:t,isBid:i,isContact:a}=Un();let o=!0,l=!0,n=!0;if(t){const{system_created_by:t,system_only_for_owner:i,system_allowance:a}=await Qn(e);if(i){const e=this.appwriteService.currentUser.$id;o=U(t===e,!!(null==a?void 0:a.includes(e)))}}if(a){const{system_created_by:t,system_only_for_owner:i,system_allowance:a}=await Zn(e);if(i){const e=this.appwriteService.currentUser.$id;l=U(t===e,!!(null==a?void 0:a.includes(e)))}}if(i){const{system_created_by:t,system_only_for_owner:i,system_allowance:a}=await Jn(e);if(i){const e=this.appwriteService.currentUser.$id;n=U(t===e,!!(null==a?void 0:a.includes(e)))}}return W(o,l,n)}))),i(this,"hasOccupationOwnerContactPermission",O((async()=>{const{id:e,isApartment:t,isBid:i}=Un();let a=!0;if(t){const t=await this.dealViewService.findOccupiedByApartmentId(e);t&&(a=t.user_id===this.appwriteService.currentUser.$id)}if(i){const t=await this.dealViewService.findOccupiedByBidId(e);t&&(a=t.user_id===this.appwriteService.currentUser.$id)}return W(a,!0)}))),i(this,"hasTargetOccupationOwnerContactPermission",O((async()=>{const{id:e,isApartment:t,isBid:i}=Un();let a=!0;if(t){const t=await this.dealViewService.findOccupiedByTargetApartmentId(e);t&&(a=t.user_id===this.appwriteService.currentUser.$id)}if(i){const t=await this.dealViewService.findOccupiedByTagetBidId(e);t&&(a=t.user_id===this.appwriteService.currentUser.$id)}return W(a,!0)}))),i(this,"hasAllOwnerContactPermission",O((()=>U(this.featureService.hasFeature("vizhu_kontakty_pod_bronyu"),W(this.hasInternOwnerContactPermission(),this.hasExclusiveOwnerContactPermission(),this.hasOccupationOwnerContactPermission(),this.hasTargetOccupationOwnerContactPermission()))))),v(this,{})}}class tr{constructor(){i(this,"featureService",_(Ul.featureService)),i(this,"routerService",_(Ul.routerService)),i(this,"permissionRequestService",_(Ul.permissionRequestService)),i(this,"previewModeService",_(Ul.previewModeService)),i(this,"hasContactNumberPermission",(async()=>await W(this.previewModeService.hasPreviewModeDisabled(),this.permissionRequestService.hasAllOwnerContactPermission()))),i(this,"hasContactEmailPermission",(async()=>await W(this.previewModeService.hasPreviewModeDisabled(),this.permissionRequestService.hasAllOwnerContactPermission()))),i(this,"hasApartmentHouseNumberPermission",(async()=>await W(this.previewModeService.hasPreviewModeDisabled()))),i(this,"hasBidHouseNumberPermission",(async()=>await W(this.previewModeService.hasPreviewModeDisabled()))),i(this,"hasResponsiblePermission",(async()=>await W(this.previewModeService.hasPreviewModeDisabled()))),i(this,"hasOwnerPricePermission",(async()=>await W(this.previewModeService.hasPreviewModeDisabled()))),i(this,"hasCommissionPermission",(async()=>await W(this.previewModeService.hasPreviewModeDisabled()))),i(this,"hasMasterDetailPermission",(async()=>await W(this.previewModeService.hasPreviewModeDisabled()))),i(this,"hasDescriptionPermission",(async()=>await W(this.previewModeService.hasPreviewModeDisabled()))),i(this,"hasFioPermission",(async()=>await W(this.previewModeService.hasPreviewModeDisabled()))),i(this,"hasApartmentViewPermission",(async()=>U(await this.featureService.hasFeature("prosmotr_obekta")))),i(this,"hasBidViewPermission",(async()=>U(await this.featureService.hasFeature("prosmotr_zayavki")))),i(this,"hasContactViewPermission",(async()=>U(await this.featureService.hasFeature("prosmotr_kontakta")))),i(this,"hasApartmentCreatePermission",(async()=>U(await this.featureService.hasFeature("sozdanie_obekta")))),i(this,"hasBidCreatePermission",(async()=>U(await this.featureService.hasFeature("sozdanie_zayavki")))),i(this,"hasContactCreatePermission",(async()=>U(await this.featureService.hasFeature("sozdanie_kontakta")))),i(this,"hasApartmentUpdatePermission",(async()=>U(await this.featureService.hasFeature("redaktirovanie_obekta")))),i(this,"hasBidUpdatePermission",(async()=>U(await this.featureService.hasFeature("redaktirovanie_zayavki")))),i(this,"hasContactUpdatePermission",(async()=>U(await this.featureService.hasFeature("redaktirovanie_kontakta")))),i(this,"hasUsersUpdatePermission",(async()=>U(await this.featureService.hasFeature("redaktirovanie_sotrudnika")))),i(this,"hasSettingsCreateRolePermission",(async()=>U(await this.featureService.hasFeature("sozdanie_roli")))),i(this,"hasSettingsEditRolePermission",(async()=>U(await this.featureService.hasFeature("redaktirovanie_roli")))),i(this,"hasUsersViewPhoneAndEmailPermission",(async()=>U(await this.featureService.hasFeature("prosmotr_nomera_telefona_i_email")))),i(this,"hasUserServiceCommentMentionPermission",(async()=>U(await this.featureService.hasFeature("upominanie_polzovatelya")))),i(this,"hasUserServiceCommentAddingFilePermission",(async()=>U(await this.featureService.hasFeature("dobavlenie_fajla")))),i(this,"hasUsersAccessLevelsPermission",(async()=>U(await this.featureService.hasFeature("nastrojka_urovnej_dostupa")))),i(this,"hasSettingsEditPermission",(async()=>U(await this.featureService.hasFeature("dostup_k_nastrojkam")))),i(this,"hasManagerAllObjectsExclusivePermission",(async()=>U(await this.featureService.hasFeature("vse_obekty_eksklyuzivny")))),i(this,"hasAdvertisingPublicationPermission",(async()=>U(await this.featureService.hasFeature("publikacziya_reklamy")))),i(this,"hasAdvertisingKategoryAddPermission",(async()=>U(await this.featureService.hasFeature("dobavlenie_kategorii_i_podkategorii")))),i(this,"hasAnonymousEditingPermission",(async()=>U(await this.featureService.hasFeature("anonimnoe_redaktirovanie")))),i(this,"hasSuperAdminFlagPermission",(async()=>U(await this.featureService.hasFeature("superadmin")))),i(this,"hasSettingsViewFieldsPermission",(async()=>U(await this.featureService.hasFeature("dostup_k_nastrojke_polej")))),i(this,"hasListColumnsDeletePermission",(async()=>U(await this.featureService.hasFeature("polnoe_udalenie")))),i(this,"getPermissions",(async()=>{let e=!1,t=!1,i=!1,a=!1,o=!1,l=!1,n=!1,r=!1,s=!1,d=!1,c=!1,m=!1,p=!1,u=!1,h=!1,y=!1,b=!1,_=!1,v=!1,f=!1,g=!1,k=!1,w=!1,S=!1,z=!1,V=!1,x=!1,A=!1,T=!1,C=!1,F=!1,L=!1,I=!1,M=!1,j=!1,B=!1;return await Promise.all([this.previewModeService.hasPreviewModeDisabled().then((t=>e=t)),this.hasContactNumberPermission().then((e=>t=e)),this.hasContactEmailPermission().then((e=>i=e)),this.hasApartmentHouseNumberPermission().then((e=>a=e)),this.hasBidHouseNumberPermission().then((e=>o=e)),this.hasResponsiblePermission().then((e=>l=e)),this.hasOwnerPricePermission().then((e=>n=e)),this.hasCommissionPermission().then((e=>r=e)),this.hasMasterDetailPermission().then((e=>s=e)),this.hasDescriptionPermission().then((e=>d=e)),this.hasFioPermission().then((e=>c=e)),this.hasApartmentViewPermission().then((e=>m=e)),this.hasBidViewPermission().then((e=>p=e)),this.hasContactViewPermission().then((e=>u=e)),this.hasApartmentCreatePermission().then((e=>h=e)),this.hasBidCreatePermission().then((e=>y=e)),this.hasContactCreatePermission().then((e=>b=e)),this.hasApartmentUpdatePermission().then((e=>_=e)),this.hasBidUpdatePermission().then((e=>v=e)),this.hasContactUpdatePermission().then((e=>f=e)),this.hasUsersUpdatePermission().then((e=>g=e)),this.hasSettingsCreateRolePermission().then((e=>k=e)),this.hasSettingsEditRolePermission().then((e=>w=e)),this.hasUsersViewPhoneAndEmailPermission().then((e=>S=e)),this.hasUserServiceCommentMentionPermission().then((e=>z=e)),this.hasUserServiceCommentAddingFilePermission().then((e=>V=e)),this.hasUsersAccessLevelsPermission().then((e=>x=e)),this.hasSettingsEditPermission().then((e=>A=e)),this.hasManagerAllObjectsExclusivePermission().then((e=>T=e)),this.hasAdvertisingPublicationPermission().then((e=>C=e)),this.hasAdvertisingKategoryAddPermission().then((e=>F=e)),this.hasAnonymousEditingPermission().then((e=>L=e)),this.hasSuperAdminFlagPermission().then((e=>I=e)),this.hasSuperAdminFlagPermission().then((e=>M=e)),this.hasSettingsViewFieldsPermission().then((e=>j=e)),this.hasListColumnsDeletePermission().then((e=>B=e))]),{hasPreviewModeDisabled:e,hasContactNumberPermission:t,hasContactEmailPermission:i,hasApartmentHouseNumberPermission:a,hasBidHouseNumberPermission:o,hasResponsiblePermission:l,hasOwnerPricePermission:n,hasCommissionPermission:r,hasMasterDetailPermission:s,hasDescriptionPermission:d,hasFioPermission:c,hasApartmentViewPermission:m,hasBidViewPermission:p,hasContactViewPermission:u,hasApartmentCreatePermission:h,hasBidCreatePermission:y,hasContactCreatePermission:b,hasApartmentUpdatePermission:_,hasBidUpdatePermission:v,hasContactUpdatePermission:f,hasUsersUpdatePermission:g,hasSettingsCreateRolePermission:k,hasSettingsEditRolePermission:w,hasUsersViewPhoneAndEmailPermission:S,hasUserServiceCommentMentionPermission:z,hasUserServiceCommentAddingFilePermission:V,hasUsersAccessLevelsPermission:x,hasSettingsEditPermission:A,hasManagerAllObjectsExclusivePermission:T,hasAdvertisingPublicationPermission:C,hasAdvertisingKategoryAddPermission:F,hasAnonymousEditingPermission:L,hasSuperAdminFlagPermission:I,hasOfficeManagerFlagPermission:M,hasSettingsViewFieldsPermission:j,hasListColumnsDeletePermission:B}})),i(this,"prefetch",k((async()=>{await this.getPermissions()})))}}const ir=$("REAL_ESTATE_PREVIEW_MODE");class ar{constructor(){i(this,"togglePreviewMode",(()=>{ir.setValue(!this.previewMode),L()})),i(this,"hasPreviewModeDisabled",(async()=>await Promise.resolve(!this.previewMode))),v(this,{})}get previewMode(){return ir.getValue()||!1}}class or{constructor(){i(this,"appwriteService",_(Ul.appwriteService)),i(this,"errorService",_(Ul.errorService)),i(this,"loggerService",_(Ul.loggerService)),i(this,"subscribeAppwrite",((e,t)=>(this.loggerService.log("realtimeService appwrite event bus fallback"),this.appwriteService.client.subscribe(e,t)))),i(this,"subscribe",((e,t)=>this.subscribeAppwrite(e,t))),v(this,{})}}const lr="databases.".concat(al.databaseId,".collections.").concat(_l,".documents");class nr{constructor(){i(this,"createSubject",new b),i(this,"reloadSubject",new b),i(this,"updateSubject",new b),i(this,"appwriteService",_(Ul.appwriteService)),i(this,"realtimeService",_(Ul.realtimeService)),i(this,"findById",(async e=>{const t=(await this.findAll()).find((t=>t.id===e));if(!t)throw new Error("roleDbService findById user not found");return ql(t)})),i(this,"findAll",k((async()=>{const{documents:e}=await this.appwriteService.databases.listDocuments(al.databaseId,_l,[f.orderDesc("$createdAt")]);return Pl(e)}))),i(this,"create",(async e=>{const t=await this.appwriteService.databases.createDocument(al.databaseId,_l,this.appwriteService.createId(),El(e));this.findAll.clear();const i=ql(t);return this.createSubject.next(i),i})),i(this,"update",(async(e,t)=>{const i=await this.appwriteService.databases.updateDocument(al.databaseId,_l,e,El(t));this.findAll.clear();const a=ql(i);return this.updateSubject.next([e,a]),a})),i(this,"remove",(async e=>{await this.appwriteService.databases.deleteDocument(al.databaseId,_l,e),this.findAll.clear(),this.reloadSubject.next()})),i(this,"prefetch",k((async()=>{this.realtimeService.subscribe(lr,(({events:e,payload:t})=>{if(e.includes(Al)&&(this.findAll.clear(),this.reloadSubject.next(),this.createSubject.next(t)),e.includes(Tl)&&(this.findAll.clear(),this.reloadSubject.next()),e.includes(xl)){this.findAll.clear();const e=ql(t);this.updateSubject.next([t.$id,e])}}))}))),v(this,{})}}class rr{constructor(){i(this,"roleDbService",_(Ul.roleDbService)),i(this,"loggerService",_(Ul.loggerService)),i(this,"createSubject",this.roleDbService.createSubject),i(this,"reloadSubject",this.roleDbService.reloadSubject),i(this,"updateSubject",this.roleDbService.updateSubject),i(this,"create",(async e=>(this.loggerService.log("roleViewService create",e),await this.roleDbService.create(e)))),i(this,"findAll",(async()=>(this.loggerService.log("roleViewService findAll"),await this.roleDbService.findAll()))),i(this,"update",(async(e,t)=>(this.loggerService.log("roleViewService update",t),await this.roleDbService.update(e,t)))),i(this,"remove",(async e=>(this.loggerService.log("roleViewService remove",{id:e}),await this.roleDbService.remove(e)))),i(this,"read",(async e=>{this.loggerService.log("roleViewService read",{id:e});return await this.roleDbService.findById(e)})),i(this,"tryRead",(async e=>{this.loggerService.log("roleViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),v(this,{})}}const sr=G(),dr="/",cr=new class{constructor(){i(this,"_stack",[]),i(this,"push",(e=>{this._stack.unshift(e),this._stack=this._stack.slice(0,200)})),i(this,"getBasePath",(e=>{const[t]=this._stack,[i=dr]=t.split("/").slice(1),a=i.includes("_")?i.slice(0,i.lastIndexOf("_")):i;let o=e;for(const l of this._stack){if(!l.startsWith("/".concat(a)))break;o=l}return o}))}};class mr{constructor(){i(this,"previousPath",dr),i(this,"location",sr.location),i(this,"action",sr.action),i(this,"subscribeLeave",(e=>Y.create((e=>this.listen((({action:t})=>{"PUSH"===t&&e()})))).once(e))),i(this,"getBasePath",(e=>cr.getBasePath(e))),i(this,"hasViewRedirectFlag",(()=>!!this.locationState.viewRedirectFlag)),i(this,"updateState",(()=>{this.location=sr.location,this.action=sr.action,cr.push(this.path),this.previousPath=this.path})),i(this,"createHref",(e=>{const t=sr.createHref(e);return this.updateState(),t})),i(this,"push",((e,t)=>{const i=sr.push(e,t);return this.updateState(),i})),i(this,"replace",((e,t)=>{const i=sr.replace(e,t);return this.updateState(),i})),i(this,"go",(e=>{const t=sr.go(e);return this.updateState(),t})),i(this,"back",(e=>{if(e){const t=cr.getBasePath(e);return console.log(cr,t),t!==this.path?void this.push(t):void this.push(e)}const t=sr.back();return this.updateState(),t})),i(this,"forward",(()=>{const e=sr.forward();return this.updateState(),e})),i(this,"listen",(e=>{const t=sr.listen(e);return this.updateState(),t})),i(this,"block",(e=>{const t=sr.block(e);return this.updateState(),t})),p(this)}get locationState(){return this.location.state?R(this.location.state):{}}get path(){var e;return(null==(e=this.location)?void 0:e.pathname)||dr}}const pr="databases.".concat(al.databaseId,".collections.").concat(bl,".documents");class ur{constructor(){i(this,"createSubject",new b),i(this,"reloadSubject",new b),i(this,"updateSubject",new b),i(this,"appwriteService",_(Ul.appwriteService)),i(this,"realtimeService",_(Ul.realtimeService)),i(this,"findById",(async e=>{const t=await this.appwriteService.databases.getDocument(al.databaseId,bl,e);return ql(t)})),i(this,"create",(async e=>{const t=await this.appwriteService.databases.createDocument(al.databaseId,bl,this.appwriteService.createId(),El(e)),i=ql(t);return this.createSubject.next(i),i})),i(this,"update",(async(e,t)=>{const i=await this.appwriteService.databases.updateDocument(al.databaseId,bl,e,El(t));return ql(i)})),i(this,"remove",(async e=>{await this.appwriteService.databases.deleteDocument(al.databaseId,bl,e)})),i(this,"findAllByApartmentId",(async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(al.databaseId,bl,[f.orderDesc("$createdAt"),f.equal("apartment_id",e)]);return Pl(t)})),i(this,"findAllByContactId",(async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(al.databaseId,bl,[f.orderDesc("$createdAt"),f.equal("contact_id",e)]);return Pl(t)})),i(this,"findByBidId",(async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(al.databaseId,bl,[f.orderDesc("$createdAt"),f.equal("bid_id",e)]);return Pl(t)})),i(this,"prefetch",k((async()=>{this.realtimeService.subscribe(pr,(({events:e,payload:t})=>{if(e.includes(Al)&&(this.reloadSubject.next(),this.createSubject.next(t)),e.includes(Tl)&&this.reloadSubject.next(),e.includes(xl)){const e=ql(t);this.updateSubject.next([t.$id,e])}}))}))),v(this,{})}}class hr{constructor(){i(this,"serviceCommentDbService",_(Ul.serviceCommentDbService)),i(this,"loggerService",_(Ul.loggerService)),i(this,"createSubject",this.serviceCommentDbService.createSubject),i(this,"reloadSubject",this.serviceCommentDbService.reloadSubject),i(this,"updateSubject",this.serviceCommentDbService.updateSubject),i(this,"create",(async e=>(this.loggerService.log("serviceCommentViewService create",e),await this.serviceCommentDbService.create(e)))),i(this,"update",(async(e,t)=>(this.loggerService.log("serviceCommentViewService update",t),await this.serviceCommentDbService.update(e,t)))),i(this,"remove",(async e=>(this.loggerService.log("serviceCommentViewService remove",{id:e}),await this.serviceCommentDbService.remove(e)))),i(this,"read",(async e=>{this.loggerService.log("serviceCommentViewService read",{id:e});return await this.serviceCommentDbService.findById(e)})),i(this,"findAllByApartmentId",(async e=>{if(this.loggerService.log("serviceCommentViewService findAllByApartmentId"),!e)throw new Error("serviceCommentViewService findAllByApartmentId id is null");return await this.serviceCommentDbService.findAllByApartmentId(e)})),i(this,"findAllByContactId",(async e=>{if(this.loggerService.log("serviceCommentViewService findAllByContactId"),!e)throw new Error("serviceCommentViewService findAllByContactId id is null");return await this.serviceCommentDbService.findAllByContactId(e)})),i(this,"findByBidId",(async e=>{if(this.loggerService.log("serviceCommentViewService findByBidId"),!e)throw new Error("serviceCommentViewService findByBidId id is null");return await this.serviceCommentDbService.findByBidId(e)})),i(this,"tryRead",(async e=>{this.loggerService.log("serviceCommentViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),v(this,{})}}const yr={usd_eur:"0.9",usd_uzs:"1000",watermark_file_id:null,field_visibility:null,masterdetail_mode:[j.Paper]},br="settings",_r="databases.".concat(al.databaseId,".collections.").concat(nl,".documents");class vr{constructor(){i(this,"appwriteService",_(Ul.appwriteService)),i(this,"updateSubject",new b),i(this,"realtimeService",_(Ul.realtimeService)),i(this,"create",(async()=>await this.appwriteService.databases.createDocument(al.databaseId,nl,br,yr))),i(this,"read",k((async()=>{const e=await this.appwriteService.databases.getDocument(al.databaseId,nl,br);return{...yr,...ql(e)}}))),i(this,"update",I((async e=>{await M(1e3);const t=await this.appwriteService.databases.updateDocument(al.databaseId,nl,br,{...yr,...El(e)}),i=ql(t);return this.updateSubject.next([null,i]),i}))),i(this,"remove",(async e=>await this.appwriteService.databases.deleteDocument(al.databaseId,br,e))),i(this,"prefetch",k((async()=>{this.realtimeService.subscribe(_r,(({payload:e})=>{this.read.clear();const t=ql(e);this.updateSubject.next([null,t])}))}))),v(this,{})}}class fr{constructor(){i(this,"settingsDbService",_(Ul.settingsDbService)),i(this,"loggerService",_(Ul.loggerService)),i(this,"appwriteService",_(Ul.appwriteService)),i(this,"updateSubject",this.settingsDbService.updateSubject),i(this,"getExchangeRate",(async e=>{const{usd_eur:t,usd_uzs:i}=await this.getValue();return"usd_eur"!==e||isNaN(t)?"usd_uzs"!==e||isNaN(i)?null:parseFloat(i):parseFloat(t)})),i(this,"getMasterDetailMode",(async()=>{const{masterdetail_mode:e}=await this.getValue(),t=(null==e?void 0:e.length)?e[0]:null;return t===j.Tabs?j.Tabs:(j.Paper,j.Paper)})),i(this,"getValue",O((async()=>{this.loggerService.log("settingsViewService getValue");try{return this.appwriteService.isAuthorized?await this.settingsDbService.read():yr}catch(e){return await this.settingsDbService.create()}}))),i(this,"setValue",(async e=>(this.loggerService.log("settingsViewService setValue",e),await this.settingsDbService.update(e)))),v(this,{})}}const gr=["Просрочено","Новые задачи","На сегодня","На завтра","На следующую неделю","Выполненные задачи"],kr={"На завтра":un()+1,"На сегодня":un(),"На следующую неделю":un()+7,"Просрочено":un()-1},wr=async e=>null===e?"Новые задачи":e<=kr["Просрочено"]?"Просрочено":e===kr["На сегодня"]?"На сегодня":e===kr["На завтра"]?"На завтра":e>kr["На завтра"]&&e<=kr["На следующую неделю"]?"На следующую неделю":null,Sr=async e=>e.is_complete?"Выполненные задачи":await wr(e.moment_stamp),zr="databases.".concat(al.databaseId,".collections.").concat(hl,".documents");class Vr{constructor(){i(this,"reloadSubject",new b),i(this,"createSubject",new b),i(this,"removeSubject",new b),i(this,"updateSubject",new b),i(this,"appwriteService",_(Ul.appwriteService)),i(this,"realtimeService",_(Ul.realtimeService)),i(this,"createIndex",(async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(al.databaseId,hl,[f.limit(1),f.select(["index"])]);return e+1})),i(this,"findById",(async e=>{const t=await this.appwriteService.databases.getDocument(al.databaseId,hl,e);return ql(t)})),i(this,"findDailyTaskByUserId",(async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(al.databaseId,hl,[f.equal("moment_stamp",kr["На сегодня"]),f.equal("to_user_id",e)]);return Pl(t)})),i(this,"findByTaskStatus",(async e=>{let t=[];return"Просрочено"===e&&(t=await wn(kn(hl,[f.lessThanEqual("moment_stamp",kr.Просрочено)]))),"На сегодня"===e&&(t=await wn(kn(hl,[f.equal("moment_stamp",kr["На сегодня"])]))),"На завтра"===e&&(t=await wn(kn(hl,[f.equal("moment_stamp",kr["На завтра"])]))),"На следующую неделю"===e&&(t=await wn(kn(hl,[f.greaterThan("moment_stamp",kr["На завтра"]),f.lessThanEqual("moment_stamp",kr["На следующую неделю"])]))),"Новые задачи"===e&&(t=await wn(kn(hl,[f.isNull("moment_stamp"),f.equal("is_complete",!1)]))),"Выполненные задачи"===e&&(t=await wn(kn(hl,[f.equal("is_complete",!0)]))),Pl(t)})),i(this,"findByTaskStatusAndContactId",(async(e,t)=>{let i=[];return"Просрочено"===e&&(i=await wn(kn(hl,[f.lessThanEqual("moment_stamp",kr.Просрочено),f.equal("contact_id",t)]))),"На сегодня"===e&&(i=await wn(kn(hl,[f.equal("moment_stamp",kr["На сегодня"]),f.equal("contact_id",t)]))),"На завтра"===e&&(i=await wn(kn(hl,[f.equal("moment_stamp",kr["На завтра"]),f.equal("contact_id",t)]))),"На следующую неделю"===e&&(i=await wn(kn(hl,[f.greaterThan("moment_stamp",kr["На завтра"]),f.lessThanEqual("moment_stamp",kr["На следующую неделю"]),f.equal("contact_id",t)]))),"Новые задачи"===e&&(i=await wn(kn(hl,[f.isNull("moment_stamp"),f.equal("is_complete",!1),f.equal("contact_id",t)]))),"Выполненные задачи"===e&&(i=await wn(kn(hl,[f.equal("is_complete",!0),f.equal("contact_id",t)]))),Pl(i)})),i(this,"create",(async e=>{const t=await this.appwriteService.databases.createDocument(al.databaseId,hl,this.appwriteService.createId(),{is_complete:!1,...El(e),index:await this.createIndex()}),i=ql(t);return this.createSubject.next(i),i})),i(this,"update",(async(e,t)=>{const i=await this.appwriteService.databases.updateDocument(al.databaseId,hl,e,{...El(t)}),a=ql(i);return this.updateSubject.next([e,a]),a})),i(this,"remove",(async e=>{await this.appwriteService.databases.deleteDocument(al.databaseId,hl,e),this.removeSubject.next(e)})),i(this,"prefetch",k((()=>{(async()=>{this.realtimeService.subscribe(zr,(({events:e,payload:t})=>{if(e.includes(Al)){const e=ql(t);this.reloadSubject.next(),this.createSubject.next(e)}if(e.includes(Tl)&&(this.reloadSubject.next(),this.removeSubject.next(t.$id)),e.includes(xl)){const e=ql(t);this.updateSubject.next([t.$id,e])}}))})()}))),v(this,{})}}const xr="databases.".concat(al.databaseId,".collections.").concat(fl,".documents");class Ar{constructor(){i(this,"createSubject",new b),i(this,"reloadSubject",new b),i(this,"updateSubject",new b),i(this,"appwriteService",_(Ul.appwriteService)),i(this,"realtimeService",_(Ul.realtimeService)),i(this,"findById",(async e=>{const t=await this.appwriteService.databases.getDocument(al.databaseId,fl,e);return ql(t)})),i(this,"create",(async e=>{const t=await this.appwriteService.databases.createDocument(al.databaseId,fl,this.appwriteService.createId(),El(e));return ql(t)})),i(this,"update",(async(e,t)=>{const i=await this.appwriteService.databases.updateDocument(al.databaseId,fl,e,El(t));return ql(i)})),i(this,"remove",(async e=>{await this.appwriteService.databases.deleteDocument(al.databaseId,fl,e)})),i(this,"findAllByContactId",(async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(al.databaseId,fl,[f.orderDesc("$createdAt"),f.equal("contact_id",e)]);return Pl(t)})),i(this,"findAllByTaskId",(async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(al.databaseId,fl,[f.orderDesc("$createdAt"),f.equal("task_id",e)]);return Pl(t)})),i(this,"findAllByUserId",(async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(al.databaseId,fl,[f.orderDesc("$createdAt"),f.equal("user_id",e)]);return Pl(t)})),i(this,"prefetch",k((async()=>{this.realtimeService.subscribe(xr,(({events:e,payload:t})=>{if(e.includes(Al)&&(this.reloadSubject.next(),this.createSubject.next(t)),e.includes(Tl)&&this.reloadSubject.next(),e.includes(xl)){const e=ql(t);this.updateSubject.next([t.$id,e])}}))}))),v(this,{})}}class Tr{constructor(){i(this,"taskHistoryViewService",_(Ul.taskHistoryViewService)),i(this,"appwriteService",_(Ul.appwriteService)),i(this,"contactViewService",_(Ul.contactViewService)),i(this,"userViewService",_(Ul.userViewService)),i(this,"taskReassignCommit",(async(e,t,i,a)=>{const o=this.appwriteService.currentUser.$id,{first_name:l,last_name:n,middle_name:r}=await bs.userViewService.read(t),s=[n,l,r].filter((e=>e)).join(" "),d="передал задачу (новый ответственный ".concat(s,")"),c=["Сотрудник ".concat(d),a?"Задача: ".concat(a):null,"Комментарий: ".concat(i)].filter((e=>e)).join("\n");await this.taskHistoryViewService.create({user_id:o,task_id:e,contact_id:null,comment:c})})),i(this,"todoTaskCommit",(async(e,t,i,a,o,l)=>{const n=this.appwriteService.currentUser.$id,{first_name:r,last_name:s,middle_name:d}=await bs.userViewService.read(t),c=[s,r,d].filter((e=>e)).join(" "),m=null===i?"создал задачу (ответственный ".concat(c,")"):"перенес задачу (<text-underline>".concat(i,"</text-underline> -> <text-underline>").concat(a,"</text-underline>)"),p=["Сотрудник ".concat(m),l?"Задача: ".concat(l):null,"Комментарий: ".concat(o)].filter((e=>e)).join("\n");await this.taskHistoryViewService.create({user_id:n,task_id:e,contact_id:null,comment:p})})),i(this,"clientTaskCommit",(async(e,t,i,a,o,l,n)=>{const r=this.appwriteService.currentUser.$id,{first_name:s,last_name:d,middle_name:c}=await bs.userViewService.read(t),m=[d,s,c].filter((e=>e)).join(" "),{fio:p}=await this.contactViewService.read(i),u=null===a?"создал задачу (ответственный ".concat(m,")"):"перенес задачу (<text-underline>".concat(a,"</text-underline> -> <text-underline>").concat(o,"</text-underline>)"),h=["Сотрудник ".concat(u),"Контакт: ".concat(p),n?"Задача: ".concat(n):null,"Комментарий: ".concat(l)].filter((e=>e)).join("\n");await this.taskHistoryViewService.create({user_id:r,task_id:e,contact_id:i,comment:h})})),v(this,{})}}class Cr{constructor(){i(this,"taskHistoryDbService",_(Ul.taskHistoryDbService)),i(this,"loggerService",_(Ul.loggerService)),i(this,"createSubject",this.taskHistoryDbService.createSubject),i(this,"reloadSubject",this.taskHistoryDbService.reloadSubject),i(this,"updateSubject",this.taskHistoryDbService.updateSubject),i(this,"create",(async e=>(this.loggerService.log("taskHistoryViewService create",e),await this.taskHistoryDbService.create(e)))),i(this,"update",(async(e,t)=>(this.loggerService.log("taskHistoryViewService update",t),await this.taskHistoryDbService.update(e,t)))),i(this,"remove",(async e=>(this.loggerService.log("taskHistoryViewService remove",{id:e}),await this.taskHistoryDbService.remove(e)))),i(this,"read",(async e=>{this.loggerService.log("taskHistoryViewService read",{id:e});return await this.taskHistoryDbService.findById(e)})),i(this,"findAllByContactId",(async e=>(this.loggerService.log("taskHistoryViewService findAllByContactId"),await this.taskHistoryDbService.findAllByContactId(e)))),i(this,"findAllByTaskId",(async e=>(this.loggerService.log("taskHistoryViewService findAllByTaskId"),await this.taskHistoryDbService.findAllByTaskId(e)))),i(this,"findAllByUserId",(async e=>(this.loggerService.log("taskHistoryViewService findAllByTaskId"),await this.taskHistoryDbService.findAllByUserId(e)))),i(this,"tryRead",(async e=>{this.loggerService.log("taskHistoryViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),v(this,{})}}const Fr="Wrong or invalid email!",Lr="Your password is incorrect !",Ir="The user was not found !",Mr="Unexpected error, please try again later.",jr=e=>"auth/user-not-found"===e.code?Ir:"auth/wrong-password"===e.code?Lr:"auth/invalid-email"===e.code?Fr:K(e)||Mr;class Br{constructor(){i(this,"taskHistoryRequestService",_(Ul.taskHistoryRequestService)),i(this,"taskViewService",_(Ul.taskViewService)),i(this,"userViewService",_(Ul.userViewService)),i(this,"contactViewService",_(Ul.contactViewService)),i(this,"appwriteService",_(Ul.appwriteService)),i(this,"notifyViewService",_(Ul.notifyViewService)),i(this,"tryCommitReassignTask",(async(e,t,i,a)=>{try{await this.taskHistoryRequestService.taskReassignCommit(e,t,i,a)}catch(o){console.log(jr(o))}})),i(this,"tryCommitTodoTask",(async(e,t,i,a,o,l)=>{try{await this.taskHistoryRequestService.todoTaskCommit(e,t,i,a,o,l)}catch(n){console.log(jr(n))}})),i(this,"tryCommitClientTask",(async(e,t,i,a,o,l)=>{try{await this.taskHistoryRequestService.clientTaskCommit(e,t,i,a,o,l)}catch(n){console.log(jr(n))}})),i(this,"createTodoTask",(async(e,t,i,a,o)=>{const l=this.appwriteService.currentUser.$id;let n,r;{const{first_name:e,last_name:t,middle_name:i}=await this.userViewService.read(l);n=[t,e,i].filter((e=>e)).join(" ")}{const{first_name:t,last_name:i,middle_name:a}=await this.userViewService.read(e);r=[i,t,a].filter((e=>e)).join(" ")}const{id:s}=await this.taskViewService.create({from_user_id:l,to_user_id:e,contact_id:null,moment_stamp:t,time_stamp:i,type:"Внутренняя",is_call:!1,is_meet:!1,from_user_fio:n,to_user_fio:r,contact_fio:"",title:a}),d=await wr(t);await Promise.all([this.tryCommitTodoTask(s,e,null,d||"Новые задачи",o,a),this.notifyViewService.create({title:"На вас назначена внутренняя задача",url:"/task_mine",user_id:e})])})),i(this,"createClientTask",(async(e,t,i,a,o,l,n,r)=>{const s=this.appwriteService.currentUser.$id;let d,c,m;{const{first_name:e,last_name:t,middle_name:i}=await this.userViewService.read(s);d=[t,e,i].filter((e=>e)).join(" ")}{const{first_name:t,last_name:i,middle_name:a}=await this.userViewService.read(e);c=[i,t,a].filter((e=>e)).join(" ")}{const{fio:e}=await this.contactViewService.read(t);m=e}const{id:p}=await this.taskViewService.create({from_user_id:s,to_user_id:e,contact_id:t,moment_stamp:i,time_stamp:a,is_call:l,is_meet:n,type:"Клиент",from_user_fio:d,to_user_fio:c,contact_fio:m,title:o}),u=await wr(i);await Promise.all([this.tryCommitClientTask(p,e,t,null,u||"Новые задачи",r),this.notifyViewService.create({title:"На вас назначена задача по клиенту",url:"/task_mine",user_id:e})])})),i(this,"updateTodoTask",(async(e,t,i,a,o,l,n,r)=>{const s=this.appwriteService.currentUser.$id,{id:d}=await this.taskViewService.update(e,{from_user_id:s,to_user_id:t,contact_id:null,moment_stamp:a,time_stamp:o,is_complete:l,is_call:!1,is_meet:!1,type:"Внутренняя",title:n}),c=await wr(a);await this.tryCommitTodoTask(d,t,i,c||(l?"Выполненные задачи":"Новые задачи"),r,n)})),i(this,"updateClientTask",(async(e,t,i,a,o,l,n,r,s,d,c)=>{const m=this.appwriteService.currentUser.$id,{id:p}=await this.taskViewService.update(e,{from_user_id:m,to_user_id:t,contact_id:a,moment_stamp:o,time_stamp:l,is_complete:n,is_meet:s,is_call:r,type:"Клиент",title:d}),u=await wr(o);await this.tryCommitClientTask(p,t,a,i,u||(n?"Выполненные задачи":"Новые задачи"),c)})),i(this,"reassignClientTask",(async(e,t,i,a)=>{const{last_name:o,first_name:l,middle_name:n}=await this.userViewService.read(t),r=[o,l,n].filter((e=>e)).join(" ");await this.taskViewService.update(e,{to_user_id:t,to_user_fio:r}),await Promise.all([this.tryCommitReassignTask(e,t,i,a),this.notifyViewService.create({title:"На вас переназначена задача",url:"/task_mine",user_id:t})])})),v(this,{})}}class Rr{constructor(){i(this,"taskDbService",_(Ul.taskDbService)),i(this,"loggerService",_(Ul.loggerService)),i(this,"reloadSubject",this.taskDbService.reloadSubject),i(this,"createSubject",this.taskDbService.createSubject),i(this,"removeSubject",this.taskDbService.removeSubject),i(this,"updateSubject",this.taskDbService.updateSubject),i(this,"create",(async e=>(this.loggerService.log("taskViewService create",e),await this.taskDbService.create(e)))),i(this,"update",(async(e,t)=>(this.loggerService.log("taskViewService update",t),await this.taskDbService.update(e,t)))),i(this,"remove",(async e=>(this.loggerService.log("taskViewService remove",{id:e}),await this.taskDbService.remove(e)))),i(this,"read",(async e=>{this.loggerService.log("taskViewService read",{id:e});return await this.taskDbService.findById(e)})),i(this,"tryRead",(async e=>{this.loggerService.log("taskViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),i(this,"findByTaskStatus",(async e=>(this.loggerService.log("taskViewService findByTaskStatus"),await this.taskDbService.findByTaskStatus(e)))),i(this,"findByTaskStatusAndContactId",(async(e,t)=>(this.loggerService.log("taskViewService findByTaskStatusAndContactId"),await this.taskDbService.findByTaskStatusAndContactId(e,t)))),i(this,"findDailyTaskByUserId",(async e=>(this.loggerService.log("taskViewService findDailyTaskByUserId"),await this.taskDbService.findDailyTaskByUserId(e)))),v(this,{})}}const Dr="databases.".concat(al.databaseId,".collections.").concat(ll,".documents");class qr{constructor(){i(this,"reloadSubject",new b),i(this,"updateSubject",new b),i(this,"appwriteService",_(Ul.appwriteService)),i(this,"realtimeService",_(Ul.realtimeService)),i(this,"getMetadata",(e=>{const t=[];return t.push(e.middle_name),t.push(e.last_name),t.push(e.first_name),t.push(e.email),t.push(e.phone),t.join(" ").slice(0,1024)})),i(this,"createIndex",(async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(al.databaseId,dl,[f.limit(1),f.select(["index"])]);return e+1})),i(this,"findById",(async e=>{const t=(await this.findAll()).find((t=>t.id===e));if(!t)throw new Error("userDbService findById user not found");return ql(t)})),i(this,"paginate",(async(...e)=>{const t=X(e),i=await wn(kn(ll,[f.equal("system_is_remove",!!t._archive)]));return Pl(i)})),i(this,"findAll",k((async()=>{const e=await wn(kn(ll));return Pl(e)}))),i(this,"toggleArchive",(async e=>{const{system_is_remove:t}=await this.findById(e),i=await this.appwriteService.databases.updateDocument(al.databaseId,ll,e,{system_is_remove:!t}),a=ql(i);this.updateSubject.next([e,a]),this.reloadSubject.next()})),i(this,"update",(async(e,t)=>{const i=await this.appwriteService.databases.updateDocument(al.databaseId,ll,e,{...El(t),system_metadata:await this.getMetadata(t)});this.findAll.clear();const a=ql(i);return this.updateSubject.next([e,a]),a})),i(this,"remove",(async e=>(this.findAll.clear(),await this.appwriteService.databases.deleteDocument(al.databaseId,ll,e)))),i(this,"prefetch",k((async()=>{this.realtimeService.subscribe(Dr,(({events:e,payload:t})=>{if(e.includes(Al)&&(this.findAll.clear(),this.reloadSubject.next()),e.includes(Tl)&&(this.findAll.clear(),this.reloadSubject.next()),e.includes(xl)){this.findAll.clear();const e=ql(t);this.updateSubject.next([t.$id,e])}}))}))),v(this,{})}}class Pr{constructor(){i(this,"userDbService",_(Ul.userDbService)),i(this,"loggerService",_(Ul.loggerService)),i(this,"reloadSubject",this.userDbService.reloadSubject),i(this,"updateSubject",this.userDbService.updateSubject),i(this,"update",(async(e,t)=>(this.loggerService.log("userViewService update",t),await this.userDbService.update(e,t)))),i(this,"remove",(async e=>(this.loggerService.log("userViewService remove",{id:e}),await this.userDbService.remove(e)))),i(this,"read",(async e=>(this.loggerService.log("userViewService read",{id:e}),await this.userDbService.findById(e)))),i(this,"toggleArchive",(async e=>(this.loggerService.log("userViewService toggleArchive",{id:e}),await this.userDbService.toggleArchive(e)))),i(this,"tryRead",(async e=>{this.loggerService.log("userViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),i(this,"paginate",(async(...e)=>(this.loggerService.log("userViewService paginate"),await this.userDbService.paginate(...e)))),i(this,"findAll",(async()=>(this.loggerService.log("userViewService findAll"),await this.userDbService.findAll()))),v(this,{})}}class Er{constructor(){i(this,"readyStateSubject",new J(!1)),i(this,"suggest",(async e=>{await this.init();return(await ymaps.suggest(e)).map((({value:e})=>e))})),i(this,"geocode",(async e=>{await this.init();const t=(await ymaps.geocode(e)).geoObjects.get(0);if(t){const[e,i]=t.geometry.getCoordinates();return{lat:e,lon:i}}return{lat:null,lon:null}})),i(this,"openAddress",(async e=>{await this.init();const{lat:t,lon:i}=await this.geocode(e);if(t&&i){const a=new URL("https://maps.yandex.com");a.searchParams.set("ll","".concat(i,", ").concat(t)),a.searchParams.set("text",e),a.searchParams.set("z","16"),Z(a.toString())}})),i(this,"getAddressString",(async({lat:e,lon:t})=>{await this.init();const i=[e,t];return(await ymaps.geocode(i)).geoObjects.get(0).getAddressLine()})),i(this,"getAddress",(async({lat:e,lon:t})=>{await this.init();const i=[e,t],a=(await ymaps.geocode(i)).geoObjects.get(0);let o=a.getAdministrativeAreas()||"",l=a.getPremise()||"",n=a.getLocalities()||"",r=a.getThoroughfare()||"",s=a.getCountry()||"",d=a.getPremiseNumber()||"";return Array.isArray(n)&&(n=n[1]||""),Array.isArray(r)&&(r=r[0]||""),Array.isArray(l)&&(l=l[0]||""),Array.isArray(o)&&(o=o[0]||""),Array.isArray(s)&&(s=s[0]||""),Array.isArray(d)&&(d=d[0]||""),{strana:s.toString(),gorod:o.toString(),nomer_doma:d.toString(),rajon:n.toString(),ulicza:r.toString(),metro:null,mahallya:l.toString()}})),i(this,"drawMap",((e,{address:t,change:i})=>{let a=null,o=null;console.log({address:t});return(async()=>{await this.init();const l=t?await this.geocode(t):{lat:null,lon:null};if(l.lat&&l.lon)a=new ymaps.Map(e,{center:[l.lat,l.lon],zoom:9}),o=new ymaps.Placemark([l.lat,l.lon],{iconCaption:t},{preset:"islands#violetDotIconWithCaption",draggable:!0}),a.geoObjects.add(o);else{const{lat:t,lon:i}=await this.geocode("Ташкент, Узбекистан");a=new ymaps.Map(e,{center:[t,i],zoom:10})}a.events.add("click",(async e=>{const t=e.get("coords");o||(o=new ymaps.Placemark(t,{iconCaption:"поиск..."},{preset:"islands#violetDotIconWithCaption",draggable:!0}),a&&a.geoObjects.add(o)),o.geometry.setCoordinates(t),o.properties.set({iconCaption:"поиск..."}),o.properties.set({iconCaption:await this.getAddressString({lat:t[0],lon:t[1]})}),i({lat:t[0],lon:t[1]})}))})(),()=>{null==a||a.destroy(),a=null}})),i(this,"init",k((async()=>{const e=new URL("2.1","https://api-maps.yandex.ru");e.searchParams.set("apikey","03219f2d-b9b3-4850-98ea-9db0670d8a6b"),e.searchParams.set("lang","ru"),e.searchParams.set("load","SuggestView,suggest,geocode,Map,Placemark"),await Q(e.toString()),await ymaps.ready(),this.readyStateSubject.next(!0)}))),v(this,{})}}class Nr{constructor(){i(this,"appwriteService",_(Ul.appwriteService)),i(this,"getAllApartmentCount",ee((async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(al.databaseId,sl,[f.select(["$id"]),f.limit(1)]);return e}))),i(this,"getRentApartmentCount",ee((async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(al.databaseId,sl,[f.select(["$id"]),f.equal("system_is_rent",!0),f.equal("system_is_archive",!1),f.limit(1)]);return e}))),i(this,"getSellApartmentCount",ee((async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(al.databaseId,sl,[f.select(["$id"]),f.equal("system_is_sell",!0),f.equal("system_is_archive",!1),f.limit(1)]);return e}))),i(this,"getArchiveApartmentCount",ee((async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(al.databaseId,sl,[f.select(["$id"]),f.equal("system_is_archive",!0),f.limit(1)]);return e}))),i(this,"getNewApartmentCount",ee((async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(al.databaseId,sl,[f.select(["$id"]),f.equal("system_is_rent",!1),f.equal("system_is_sell",!1),f.equal("system_is_archive",!1),f.limit(1)]);return e}))),i(this,"getTotalDealCount",ee((async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(al.databaseId,ul,[f.select(["$id"]),f.limit(1)]);return e}))),i(this,"getMyDealCount",ee((async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(al.databaseId,ul,[f.select(["$id"]),f.equal("user_id",this.appwriteService.currentUser.$id),f.limit(1)]);return e}))),i(this,"getNewDealCount",ee((async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(al.databaseId,ul,[f.select(["$id"]),f.equal("status","Новая сделка"),f.limit(1)]);return e}))),i(this,"getArchiveDealCount",ee((async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(al.databaseId,ul,[f.select(["$id"]),f.equal("status",["Закрытая сделка","Сделка сорвана"]),f.limit(1)]);return e}))),v(this,{})}}const Or="databases.".concat(al.databaseId,".collections.").concat(gl,".documents");class Ur{constructor(){i(this,"reloadSubject",new b),i(this,"updateSubject",new b),i(this,"createSubject",new b),i(this,"appwriteService",_(Ul.appwriteService)),i(this,"realtimeService",_(Ul.realtimeService)),i(this,"createIndex",(async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(al.databaseId,gl,[f.limit(1),f.select(["index"])]);return e+1})),i(this,"getIdByApartment",(async e=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(al.databaseId,gl,[f.equal("apartment_id",e),f.select(["$id"]),f.limit(1)]);if(!t)throw new Error("advertisingDbService getIdByApartment document not found");return t.$id})),i(this,"findById",(async e=>{const t=await this.appwriteService.databases.getDocument(al.databaseId,gl,e);return ql(t)})),i(this,"findByApartmentId",(async e=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(al.databaseId,gl,[f.equal("apartment_id",e),f.limit(1)]);if(!t)throw new Error("advertisingDbService findByApartmentId document not found");return ql(t)})),i(this,"create",(async e=>{const t=await this.appwriteService.databases.createDocument(al.databaseId,gl,this.appwriteService.createId(),{...El(e),system_created_by:this.appwriteService.currentUser.$id,index:await this.createIndex()}),i=ql(t);return this.createSubject.next(i),i})),i(this,"update",(async(e,t)=>{const i=await this.appwriteService.databases.updateDocument(al.databaseId,gl,e,{...El(t)}),a=ql(i);return this.updateSubject.next([e,a]),a})),i(this,"remove",(async e=>{await this.appwriteService.databases.deleteDocument(al.databaseId,gl,e)})),i(this,"prefetch",k((async()=>{this.realtimeService.subscribe(Or,(({events:e,payload:t})=>{if(e.includes(Al)){const e=ql(t);this.reloadSubject.next(),this.createSubject.next(e)}if(e.includes(Tl)&&this.reloadSubject.next(),e.includes(xl)){const e=ql(t);this.updateSubject.next([t.$id,e])}}))}))),v(this,{})}}class Hr{constructor(){i(this,"advertisingDbService",_(Ul.advertisingDbService)),i(this,"loggerService",_(Ul.loggerService)),i(this,"reloadSubject",this.advertisingDbService.reloadSubject),i(this,"updateSubject",this.advertisingDbService.updateSubject),i(this,"createSubject",this.advertisingDbService.createSubject),i(this,"findByApartmentId",(async e=>(this.loggerService.log("advertisingViewService findByApartmentId"),await this.advertisingDbService.findByApartmentId(e)))),i(this,"create",(async e=>(this.loggerService.log("advertisingViewService create",e),await this.advertisingDbService.create(e)))),i(this,"update",(async(e,t)=>(this.loggerService.log("advertisingViewService update",t),await this.advertisingDbService.update(e,t)))),i(this,"remove",(async e=>(this.loggerService.log("advertisingViewService remove",{id:e}),await this.advertisingDbService.remove(e)))),i(this,"read",(async e=>{this.loggerService.log("advertisingViewService read",{id:e});return await this.advertisingDbService.findById(e)})),i(this,"getIdByApartment",(async e=>{this.loggerService.log("advertisingViewService getIdByApartment",{apartmentId:e});return await this.advertisingDbService.getIdByApartment(e)})),i(this,"tryRead",(async e=>{this.loggerService.log("advertisingViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),i(this,"tryReadByApartmentId",(async e=>{this.loggerService.log("tryReadByApartmentId tryRead",{apartmentId:e});try{return"create"===e||"unknown"===e?null:await this.advertisingDbService.findByApartmentId(e)}catch(t){return null}})),v(this,{})}}class Wr{constructor(){i(this,"appwriteService",_(Ul.appwriteService)),i(this,"getAllBidCount",ee((async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(al.databaseId,pl,[f.select(["$id"]),f.limit(1)]);return e}))),i(this,"getRentBidCount",ee((async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(al.databaseId,pl,[f.select(["$id"]),f.equal("system_is_rent",!0),f.equal("system_is_archive",!1),f.limit(1)]);return e}))),i(this,"getSellBidCount",ee((async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(al.databaseId,pl,[f.select(["$id"]),f.equal("system_is_sell",!0),f.equal("system_is_archive",!1),f.limit(1)]);return e}))),i(this,"getArchiveBidCount",ee((async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(al.databaseId,pl,[f.select(["$id"]),f.equal("system_is_archive",!0),f.limit(1)]);return e}))),i(this,"getNewBidCount",ee((async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(al.databaseId,pl,[f.select(["$id"]),f.equal("system_is_rent",!1),f.equal("system_is_sell",!1),f.equal("system_is_archive",!1),f.limit(1)]);return e}))),v(this,{})}}const $r={},Gr=function(e,t,i){if(!t||0===t.length)return e();const a=document.getElementsByTagName("link");return Promise.all(t.map((e=>{if((e=function(e){return"/"+e}(e))in $r)return;$r[e]=!0;const t=e.endsWith(".css"),o=t?'[rel="stylesheet"]':"";if(!!i)for(let i=a.length-1;i>=0;i--){const o=a[i];if(o.href===e&&(!t||"stylesheet"===o.rel))return}else if(document.querySelector('link[href="'.concat(e,'"]').concat(o)))return;const l=document.createElement("link");return l.rel=t?"stylesheet":"modulepreload",t||(l.as="script",l.crossOrigin=""),l.href=e,document.head.appendChild(l),t?new Promise(((t,i)=>{l.addEventListener("load",t),l.addEventListener("error",(()=>i(new Error("Unable to preload CSS for ".concat(e)))))})):void 0}))).then((()=>e())).catch((e=>{const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}))},Yr=k((async()=>{const{default:e}=await Gr((()=>import("./index-a790305c.js")),["assets/index-a790305c.js","assets/vendor-83ed1c12.js"]);return{advertising_fields:e}}));class Kr{constructor(){i(this,"advertisingViewService",_(Ul.advertisingViewService)),i(this,"apartmentViewService",_(Ul.apartmentViewService)),i(this,"layoutService",_(Ul.layoutService)),i(this,"buildAdvertisingByApartment",(async e=>{var t;const{advertising_fields:i}=await Yr(),a={};return te(i).forEach((({name:t})=>{if(t){const i=h.get(e,t);h.set(a,t,i)}})),h.set(a,"apartment_id",e.id),h.set(a,"apartment_index",h.get(e,"index")),h.set(a,"apartment_images",e.apartment_images),h.set(a,"advertising_images",(null==(t=e.apartment_images)?void 0:t.slice(0,10))||[]),a})),i(this,"createAdvertisingByApartment",(async(e,t)=>{var i;const{advertising_fields:a}=await Yr(),o={};te(a).forEach((({name:e})=>{if(e){const i=h.get(t,e);h.set(o,e,i)}})),h.set(o,"apartment_id",e),h.set(o,"apartment_index",h.get(t,"index")),h.set(o,"apartment_images",t.apartment_images),h.set(o,"advertising_images",(null==(i=t.apartment_images)?void 0:i.slice(0,10))||[]);const l=await this.advertisingViewService.create(o);return this.layoutService.reloadOutlet(),ql(l)})),i(this,"updateAdvertisingByApartment",(async(e,t)=>{var i;const{advertising_fields:a}=await Yr(),o=await this.advertisingViewService.findByApartmentId(e),l=await this.advertisingViewService.findByApartmentId(e);te(a).forEach((({name:e})=>{if(e){const i=h.get(t,e)||h.get(o,e);h.set(l,e,i)}})),h.set(l,"apartment_id",e),h.set(l,"apartment_index",h.get(t,"index")),h.set(l,"apartment_images",t.apartment_images),h.set(l,"advertising_images",(null==(i=t.apartment_images)?void 0:i.slice(0,10))||[]);const n=await this.advertisingViewService.update(o.id,l);return this.layoutService.reloadOutlet(),ql(n)})),v(this,{})}}const Xr=async(e,t,i)=>{try{const a="".concat(t,"-watermark");let o=await bs.cacheService.readImage(a);return o||(o=await(async(e,t)=>{const i=document.createElement("img"),a=document.createElement("img"),{watermark_file_id:o}=await bs.settingsViewService.getValue(),l=o?await bs.appwriteService.getImageURL(o):new URL("/watermark.png",window.origin);return a.src=l.toString(),a.crossOrigin="anonymous",i.src=e,i.crossOrigin="anonymous",Promise.resolve().then((()=>Promise.all([new Promise(((e,t)=>{a.addEventListener("load",(()=>e())),a.addEventListener("error",(()=>t()))})),new Promise(((e,t)=>{i.addEventListener("load",(()=>e())),i.addEventListener("error",(()=>t()))}))]))).then((()=>new Promise(((e,o)=>{const l=document.createElement("canvas");l.width=i.width,l.height=i.height;const n=l.getContext("2d");if(!n)return void o("there's an error");if(n.translate(l.width/2,l.height/2),n.drawImage(i,-i.width/2,-i.height/2),t){const e=.07*Math.min(i.height,i.width);n.lineWidth=.05*e,n.font="bold ".concat(e,"px Segoe UI, Arial, sans-serif"),n.fillStyle="white",n.strokeStyle="black",n.fillText(String(t||""),-1*i.width/2+10,i.height/2-10),n.strokeText(String(t||""),-1*i.width/2+10,i.height/2-10)}n.globalAlpha=1;const r=.3*Math.min(l.width/a.naturalWidth,l.height/a.naturalHeight),s=a.naturalWidth*r,d=a.naturalHeight*r;n.drawImage(a,-s/2,-d/2,s,d),l.toBlob((t=>{t?e(t):o("there's an error")}))}))))})(e,i),o&&await bs.cacheService.writeImage(o,a)),o?URL.createObjectURL(o):null}catch(a){return null}};class Jr{constructor(){i(this,"appwriteService",_(Ul.appwriteService)),i(this,"routerService",_(Ul.routerService)),i(this,"dictService",_(Ul.dictService)),i(this,"executionService",_(Ul.executionService)),i(this,"publishTelegram",ie((async(e,t,i,a="")=>{const o=await this.dictService.getTelegramMapRaw(),l=h.get(o,e);if(!l)throw new Error("publishService unknown telegram id");i&&(i=await Promise.all(i.map((async e=>{const t=await this.appwriteService.getImageURL(e),i=await Xr(t,e,a);if(i){const e=await fetch(i).then((e=>e.blob()));URL.revokeObjectURL(i);const t=await this.appwriteService.uploadBlob(e,"__DANGEROUS_WILL_BE_REMOVED_TELEGRAM__.png");return await this.appwriteService.getFileURL(t)}return this.appwriteService.getFileURL(e)})))),await this.executionService.executeRaw(zl,{msg:t,channel:l.channel,token:l.token,userId:this.appwriteService.currentUser.$id,url:this.routerService.location.pathname,images:i})}))),i(this,"publishTelegraph",ie((async(e,t)=>await this.executionService.executeRaw(Vl,{appName:Qo,appLink:"https://github.com/tripolskypetr",title:e,content:t})))),v(this,{})}}class Zr{constructor(){i(this,"settingsViewService",_(Ul.settingsViewService)),i(this,"loggerService",_(Ul.loggerService)),i(this,"convertToUsd",(async(e,t)=>{if(e&&"eur"===t){let t=await this.settingsViewService.getExchangeRate("usd_eur");if(t)return t=1/t,Number(parseFloat(e)*t).toFixed()}if(e&&"uzs"===t){let t=await this.settingsViewService.getExchangeRate("usd_uzs");if(t)return t=1/t,Number(parseFloat(e)*t).toFixed()}return e||""})),i(this,"getApartmentPriceRecord",((e,t)=>{const i={czena_sobstvennika:h.get(e,t+"czena_sobstvennika"),startovaya_czena:h.get(e,t+"startovaya_czena"),startovaya_czena_valyuta:h.get(e,t+"startovaya_czena_valyuta")};return this.convertToUsd(i.startovaya_czena||i.czena_sobstvennika,i.startovaya_czena_valyuta)})),i(this,"getBidPriceRecord",(async(e,t)=>{const i={czena_sobstvennika_ot:h.get(e,t+"czena_sobstvennika_ot"),czena_sobstvennika_do:h.get(e,t+"czena_sobstvennika_do"),startovaya_czena_ot:h.get(e,t+"startovaya_czena_ot"),startovaya_czena_do:h.get(e,t+"startovaya_czena_do"),startovaya_czena_valyuta:h.get(e,t+"startovaya_czena_valyuta")},a=this.convertToUsd(i.startovaya_czena_ot||i.czena_sobstvennika_ot,i.startovaya_czena_valyuta),o=this.convertToUsd(i.startovaya_czena_do||i.czena_sobstvennika_do,i.startovaya_czena_valyuta),l=await Promise.all([a,o]);return ae(l)&&X(l)&&l.sort(((e,t)=>parseFloat(e)-parseFloat(t))),l})),i(this,"getBidProdPriceLabel",(async(e,t=!1)=>{const{system_prod_kom_price_do:i,system_prod_kom_price_ot:a,system_prod_price_do:o,system_prod_price_ot:l}=await this.getBidPriceMetadata(e),n=l||a,r=o||i,s=[];return n&&s.push("От ".concat(oe(n),"$")),r&&s.push("До ".concat(oe(r),"$")),t?s.join("\n"):s.join(" ")})),i(this,"getBidRentPriceLabel",(async(e,t=!1)=>{const{system_rent_kom_price_do:i,system_rent_kom_price_ot:a,system_rent_price_do:o,system_rent_price_ot:l}=await this.getBidPriceMetadata(e),n=l||a,r=o||i,s=[];return n&&s.push("От ".concat(oe(n),"$")),r&&s.push("До ".concat(oe(r),"$")),t?s.join("\n"):s.join(" ")})),i(this,"getApartmentRentPriceLabel",(async e=>{const{system_rent_price:t,system_rent_kom_price:i}=await this.getApartmentPriceMetadata(e),a=t||i;return a?"".concat(oe(a),"$"):""})),i(this,"getApartmentProdPriceLabel",(async e=>{const{system_prod_price:t,system_prod_kom_price:i}=await this.getApartmentPriceMetadata(e),a=t||i;return a?"".concat(oe(a),"$"):""})),i(this,"getApartmentPriceMetadata",(async e=>{const t={system_prod_kom_price:await this.getApartmentPriceRecord(e,"prod_kom_"),system_prod_price:await this.getApartmentPriceRecord(e,"prod_"),system_rent_kom_price:await this.getApartmentPriceRecord(e,"rent_kom_"),system_rent_price:await this.getApartmentPriceRecord(e,"rent_")};return this.loggerService.log("exchangeService getApartmentPriceMetadata",{metadata:t}),t})),i(this,"getBidPriceMetadata",(async e=>{const[t,i]=await this.getBidPriceRecord(e,"prod_kom_"),[a,o]=await this.getBidPriceRecord(e,"prod_"),[l,n]=await this.getBidPriceRecord(e,"rent_kom_"),[r,s]=await this.getBidPriceRecord(e,"rent_"),d={system_prod_kom_price_do:i,system_prod_kom_price_ot:t,system_prod_price_do:o,system_prod_price_ot:a,system_rent_kom_price_do:n,system_rent_kom_price_ot:l,system_rent_price_do:s,system_rent_price_ot:r};return this.loggerService.log("exchangeService getBidPriceMetadata",{metadata:d}),d})),v(this,{})}}class Qr{constructor(){i(this,"bidViewService",_(Ul.bidViewService)),i(this,"apartmentViewService",_(Ul.apartmentViewService)),i(this,"dealViewService",_(Ul.dealViewService)),i(this,"dealHistoryViewService",_(Ul.dealHistoryViewService)),i(this,"taskViewService",_(Ul.taskViewService)),i(this,"taskHistoryViewService",_(Ul.taskHistoryViewService)),i(this,"loggerService",_(Ul.loggerService)),i(this,"findAllDealByBidId",(async e=>{const t=await Promise.all([wn(kn(ul,[f.equal("bid_id",e)])),wn(kn(ul,[f.equal("target_bid_id",e)]))]);return N(t)})),i(this,"findAllDealHistoryBidId",(async e=>{const t=await Promise.all([wn(kn(yl,[f.equal("bid_id",e)]))]);return N(t)})),i(this,"findAllDealByApartmentId",(async e=>{const t=await Promise.all([wn(kn(ul,[f.equal("apartment_id",e)])),wn(kn(ul,[f.equal("target_apartment_id",e)]))]);return N(t)})),i(this,"findAllDealHistoryApartmentId",(async e=>{const t=await Promise.all([wn(kn(yl,[f.equal("apartment_id",e)]))]);return N(t)})),i(this,"findAllDealHistoryByDealId",(async e=>{const t=await Promise.all([wn(kn(yl,[f.equal("deal_id",e)]))]);return N(t)})),i(this,"findAllTaskByContactId",(async e=>{const t=await Promise.all([wn(kn(hl,[f.equal("contact_id",e)]))]);return N(t)})),i(this,"findAllTaskHistoryByContactId",(async e=>{const t=await Promise.all([wn(kn(fl,[f.equal("contact_id",e)]))]);return N(t)})),i(this,"findAllTaskHistoryByTaskId",(async e=>{const t=await Promise.all([wn(kn(fl,[f.equal("task_id",e)]))]);return N(t)})),i(this,"findAllApartmentByContactId",(async e=>{const t=await Promise.all([wn(kn(sl,[f.equal("contact_id",e)]))]);return N(t)})),i(this,"findAllBidByContactId",(async e=>{const t=await Promise.all([wn(kn(pl,[f.equal("contact_id",e)]))]);return N(t)})),i(this,"removeBid",ie((async e=>{this.loggerService.log("cleanupService removeBid",{bidId:e});for(const t of await this.findAllDealByBidId(e))await this.dealViewService.remove(t.$id);for(const t of await this.findAllDealHistoryBidId(e))await this.dealHistoryViewService.remove(t.$id);await this.bidViewService.remove(e)}))),i(this,"removeApartment",ie((async e=>{this.loggerService.log("cleanupService removeApartment",{apartmentId:e});for(const t of await this.findAllDealByApartmentId(e))await this.dealViewService.remove(t.$id);for(const t of await this.findAllDealHistoryApartmentId(e))await this.dealHistoryViewService.remove(t.$id);await this.apartmentViewService.remove(e)}))),i(this,"removeContact",ie((async e=>{this.loggerService.log("cleanupService removeContact",{contactId:e});for(const t of await this.findAllTaskByContactId(e))await this.taskViewService.remove(t.$id);for(const t of await this.findAllTaskHistoryByContactId(e))await this.taskHistoryViewService.remove(t.$id);for(const t of await this.findAllBidByContactId(e))await this.removeBid(t.$id);for(const t of await this.findAllApartmentByContactId(e))await this.removeApartment(t.$id)}))),i(this,"removeTask",ie((async e=>{this.loggerService.log("cleanupService removeTask",{taskId:e});for(const t of await this.findAllTaskHistoryByTaskId(e))await this.taskHistoryViewService.remove(t.$id);await this.taskViewService.remove(e)}))),i(this,"removeDeal",ie((async e=>{this.loggerService.log("cleanupService removeDeal",{dealId:e});for(const t of await this.findAllDealHistoryByDealId(e))await this.dealHistoryViewService.remove(t.$id);await this.dealViewService.remove(e)}))),v(this,{})}}const es=k((()=>M(1e3).then((()=>{es.clear()})))),ts={[kl]:8081,[Sl]:8082,[wl]:8083,[zl]:8084,[Vl]:8085};class is{constructor(){i(this,"appwriteService",_(Ul.appwriteService)),i(this,"run",(async(e,t)=>{const i=JSON.stringify(t),a=h.get(ts,e);if(a&&Yo)return await B((e=>{const{href:t,origin:i,protocol:a}=window.location,o="file:"===a?new URL(al.endpoint):new URL(t,i);return o.pathname="/",o.search="",o.hash="",o.port=String(e),o.toString()})(a),{method:"POST",body:i});const{responseBody:o,status:l}=await this.appwriteService.functions.createExecution(e,i,!1);if("failed"===l)throw new Error("Function failed ".concat(o));const n=JSON.parse(o||"{}");if(n.error)throw new Error("Function error ".concat(n.error));return n})),i(this,"executeRaw",(async(e,t)=>{if(e in ts)return await this.run(e,t);const[i]=await Promise.all([this.run(e,t),es()]);return i})),i(this,"execute",le((async(e,t)=>{try{return await this.executeRaw(e,t)}catch(i){throw await M(15e3),i}}),3)),v(this,{})}}const as=ne("LAST_NOTIFY_DATE");class os{constructor(){i(this,"notifyViewService",_(Ul.notifyViewService)),i(this,"taskViewService",_(Ul.taskViewService)),i(this,"appwriteService",_(Ul.appwriteService)),i(this,"doNotify",(async()=>{const e=this.appwriteService.currentUser.$id,t=await this.taskViewService.findDailyTaskByUserId(e);t.length&&await this.notifyViewService.create({title:"На сегодня задач: ".concat(t.length),url:"/task_mine",user_id:e})})),i(this,"checkNotify",(async()=>{const e=as.getValue(),t=un();e!==t&&await this.doNotify(),as.setValue(t)})),v(this,{})}}const ls=k((async()=>{const{default:e}=await Gr((()=>import("./index-3416161c.js")),["assets/index-3416161c.js","assets/vendor-83ed1c12.js"]),{address_fields:t}=await Gr((()=>import("./index-0c455f1a.js")),["assets/index-0c455f1a.js","assets/vendor-83ed1c12.js"]),{area_fields:i}=await Gr((()=>import("./index-0c455f1a.js")),["assets/index-0c455f1a.js","assets/vendor-83ed1c12.js"]),{default:a}=await Gr((()=>import("./index-a77babcb.js")),["assets/index-a77babcb.js","assets/vendor-83ed1c12.js"]),{default:o}=await Gr((()=>import("./index-1ebd2332.js")),["assets/index-1ebd2332.js","assets/vendor-83ed1c12.js"]);return{bid_fields:e,apartment_fields:a,contact_fields:o,bid_address_fields:t,bid_area_fields:i}}));class ns{constructor(){i(this,"featureService",_(Ul.featureService)),i(this,"checkReferenceField",(e=>!!e.endsWith("_id")||(!!e.endsWith("_files")||(!!e.endsWith("_images")||(!!Ml.includes(e)||(!!jl.includes(e)||(!!Xl.includes(e)||!!Jl.includes(e)))))))),i(this,"polishApartment",(async(e,t={})=>{const{apartment_fields:i}=await ls(),a=await this.featureService.getFeatures(),o={};Object.entries(e).forEach((([e,t])=>{this.checkReferenceField(e)&&h.set(o,e,t)}));const{visible:l,hidden:n}=await re(i,e,t,a);return l.forEach((({name:t})=>{if(t){const i=h.get(e,t);h.set(o,t,i)}})),n.forEach((({name:e})=>{if(e){if(this.checkReferenceField(e))return;h.set(o,e,null)}})),o})),i(this,"polishBid",(async(e,t={})=>{const{bid_fields:i,bid_address_fields:a,bid_area_fields:o}=await ls(),l=await this.featureService.getFeatures(),n={};Object.entries(e).forEach((([e,t])=>{this.checkReferenceField(e)&&h.set(n,e,t)}));const{visible:r,hidden:s}=await re(i,e,t,l);return r.forEach((({name:t})=>{if(t){const i=h.get(e,t);h.set(n,t,i)}})),s.forEach((({name:e})=>{if(e){if(this.checkReferenceField(e))return;h.set(n,e,null)}})),te(a).forEach((({name:t})=>{if(t){const i=h.get(e,t);h.set(n,t,i)}})),te(o).forEach((({name:t})=>{if(t){const i=h.get(e,t);h.set(n,t,i)}})),n})),i(this,"polishContact",(async(e,t={})=>{const{contact_fields:i}=await ls(),a=await this.featureService.getFeatures(),o={};Object.entries(e).forEach((([e,t])=>{this.checkReferenceField(e)&&h.set(o,e,t)}));const{visible:l,hidden:n}=await re(i,e,t,a);return l.forEach((({name:t})=>{if(t){const i=h.get(e,t);h.set(o,t,i)}})),n.forEach((({name:e})=>{if(e){if(this.checkReferenceField(e))return;h.set(o,e,null)}})),o})),v(this,{})}}const rs=e=>new Promise(((t,i)=>{const a=new Image,o=URL.createObjectURL(e);a.src=o,a.onerror=function(){URL.revokeObjectURL(o),i(new Error("previewService image load error"))},a.onload=function(){URL.revokeObjectURL(o);const[e,l]=((e,t,i)=>{let a=e.width,o=e.height;return a>o?a>t&&(o=Math.round(o*t/a),a=t):o>i&&(a=Math.round(a*i/o),o=i),[a,o]})(a,275,275),n=document.createElement("canvas");n.width=e,n.height=l;const r=n.getContext("2d");if(!r)throw new Error("previewService null canvas ctx");r.drawImage(a,0,0,e,l),n.toBlob((e=>{e?t(e):i(new Error("previewService null blob"))}),"image/jpeg",.6)}}));class ss{constructor(){i(this,"appwriteService",_(Ul.appwriteService)),i(this,"createPreview",I((async(e,t)=>{const i=u(),{$id:a}=await this.appwriteService.storage.createFile(ol,i,t);return await this.appwriteService.databases.createDocument(al.databaseId,ml,e,{preview_file_id:a}),a}))),i(this,"readPreview",(async e=>{const{preview_file_id:t}=await this.appwriteService.databases.getDocument(al.databaseId,ml,e);return t})),i(this,"tryReadPreview",(async e=>{try{const t=await this.readPreview(e);return await this.appwriteService.getImageURL(t)}catch(t){return null}})),i(this,"compressImage",(async e=>{const t=await this.appwriteService.getImageURL(e),i=await fetch(t),a=await i.blob(),o=await rs(a);return new File([o],"__DANGEROUS_WILL_BE_REMOVED_PREVIEW__.png")})),i(this,"getImageURL",I((async e=>{try{let t=await this.tryReadPreview(e);if(!t){const i=await this.compressImage(e),a=await this.createPreview(e,i);t=await this.appwriteService.getImageURL(a)}return t}catch(t){return await this.appwriteService.getImageURL(e)}}))),v(this,{})}}const ds=k((async()=>{const{default:e}=await Gr((()=>import("./index-a77babcb.js")),["assets/index-a77babcb.js","assets/vendor-83ed1c12.js"]);return{apartment_fields:e}})),cs=new Set([o.Text,o.Time,o.Date,o.Items,o.Combo,o.Checkbox,o.Choose,o.Complete,o.Radio,o.YesNo,o.Switch,o.Component]);class ms{constructor(){i(this,"settingsViewService",_(Ul.settingsViewService)),i(this,"getFieldVisibilityVariant",k((async()=>{const{apartment_fields:e}=await ds(),t=[];for(const{name:i,type:a,title:o}of te(e))i&&(t.some((e=>e.value===i))||cs.has(a)&&t.push({label:o||i,value:i}));return t}))),i(this,"getFieldVisibility",k((async()=>{const{field_visibility:e}=await this.settingsViewService.getValue(),t=await this.getFieldVisibilityVariant();return e||t.map((({value:e})=>e))}))),i(this,"getFieldVisibilitySet",k((async()=>new Set(await this.getFieldVisibility())))),i(this,"setFieldVisibility",(async e=>{this.settingsViewService.setValue({...await this.settingsViewService.getValue(),field_visibility:e})})),v(this,{})}}se(Ul.appwriteService,(()=>new Gl)),se(Ul.authService,(()=>new Kl)),se(Ul.alertService,(()=>new $o)),se(Ul.layoutService,(()=>new Nn)),se(Ul.routerService,(()=>new mr)),se(Ul.errorService,(()=>new Pn)),se(Ul.dictService,(()=>new Dn)),se(Ul.cacheService,(()=>new rn)),se(Ul.ymapsService,(()=>new Er)),se(Ul.loggerService,(()=>new On)),se(Ul.realtimeService,(()=>new or)),se(Ul.executionService,(()=>new is)),se(Ul.previewService,(()=>new ss)),se(Ul.editTargetService,(()=>new qn)),se(Ul.permissionService,(()=>new tr)),se(Ul.featureService,(()=>new En)),se(Ul.previewModeService,(()=>new ar)),se(Ul.metadataService,(()=>new Gn)),se(Ul.publishService,(()=>new Jr)),se(Ul.exchangeService,(()=>new Zr)),se(Ul.cleanupService,(()=>new Qr)),se(Ul.dailyNotifyService,(()=>new os)),se(Ul.polishService,(()=>new ns)),se(Ul.visibilityService,(()=>new ms)),se(Ul.userDbService,(()=>new qr)),se(Ul.settingsDbService,(()=>new vr)),se(Ul.apartmentDbService,(()=>new Wl)),se(Ul.bidDbService,(()=>new an)),se(Ul.dealDbService,(()=>new xn)),se(Ul.contactDbService,(()=>new dn)),se(Ul.dealHistoryDbService,(()=>new Tn)),se(Ul.serviceCommentDbService,(()=>new ur)),se(Ul.roleDbService,(()=>new nr)),se(Ul.notifyDbService,(()=>new Kn)),se(Ul.taskDbService,(()=>new Vr)),se(Ul.taskHistoryDbService,(()=>new Ar)),se(Ul.advertisingDbService,(()=>new Ur)),se(Ul.contactRequestService,(()=>new cn)),se(Ul.dealHistoryRequestService,(()=>new Mn)),se(Ul.dealRequestService,(()=>new Bn)),se(Ul.taskRequestService,(()=>new Br)),se(Ul.taskHistoryRequestService,(()=>new Tr)),se(Ul.dashboardRequestService,(()=>new vn)),se(Ul.permissionRequestService,(()=>new er)),se(Ul.apartmentRequestService,(()=>new Nr)),se(Ul.bidRequestService,(()=>new Wr)),se(Ul.advertisingRequestService,(()=>new Kr)),se(Ul.userViewService,(()=>new Pr)),se(Ul.settingsViewService,(()=>new fr)),se(Ul.apartmentViewService,(()=>new $l)),se(Ul.bidViewService,(()=>new on)),se(Ul.dealViewService,(()=>new Rn)),se(Ul.contactViewService,(()=>new mn)),se(Ul.dealHistoryViewService,(()=>new jn)),se(Ul.serviceCommentViewService,(()=>new hr)),se(Ul.roleViewService,(()=>new rr)),se(Ul.notifyViewService,(()=>new Xn)),se(Ul.taskViewService,(()=>new Rr)),se(Ul.taskHistoryViewService,(()=>new Cr)),se(Ul.advertisingViewService,(()=>new Hr));const ps={appwriteService:_(Ul.appwriteService),authService:_(Ul.authService),alertService:_(Ul.alertService),routerService:_(Ul.routerService),layoutService:_(Ul.layoutService),errorService:_(Ul.errorService),dictService:_(Ul.dictService),cacheService:_(Ul.cacheService),ymapsService:_(Ul.ymapsService),loggerService:_(Ul.loggerService),realtimeService:_(Ul.realtimeService),executionService:_(Ul.executionService),previewService:_(Ul.previewService)},us={editTargetService:_(Ul.editTargetService),permissionService:_(Ul.permissionService),featureService:_(Ul.featureService),previewModeService:_(Ul.previewModeService),metadataService:_(Ul.metadataService),publishService:_(Ul.publishService),exchangeService:_(Ul.exchangeService),cleanupService:_(Ul.cleanupService),dailyNotifyService:_(Ul.dailyNotifyService),polishService:_(Ul.polishService),visibilityService:_(Ul.visibilityService)},hs={contactRequestService:_(Ul.contactRequestService),dealHistoryRequestService:_(Ul.dealHistoryRequestService),dealRequestService:_(Ul.dealRequestService),taskRequestService:_(Ul.taskRequestService),taskHistoryRequestService:_(Ul.taskHistoryRequestService),dashboardRequestService:_(Ul.dashboardRequestService),permissionRequestService:_(Ul.permissionRequestService),apartmentRequestService:_(Ul.apartmentRequestService),bidRequestService:_(Ul.bidRequestService),advertisingRequestService:_(Ul.advertisingRequestService)},ys={...ps,...{settingsDbService:_(Ul.settingsDbService),apartmentDbService:_(Ul.apartmentDbService),bidDbService:_(Ul.bidDbService),dealDbService:_(Ul.dealDbService),userDbService:_(Ul.userDbService),contactDbService:_(Ul.contactDbService),dealHistoryDbService:_(Ul.dealHistoryDbService),serviceCommentDbService:_(Ul.serviceCommentDbService),roleDbService:_(Ul.roleDbService),notifyDbService:_(Ul.notifyDbService),taskDbService:_(Ul.taskDbService),taskHistoryDbService:_(Ul.taskHistoryDbService),advertisingDbService:_(Ul.advertisingDbService)},...{userViewService:_(Ul.userViewService),apartmentViewService:_(Ul.apartmentViewService),bidViewService:_(Ul.bidViewService),dealViewService:_(Ul.dealViewService),settingsViewService:_(Ul.settingsViewService),contactViewService:_(Ul.contactViewService),dealHistoryViewService:_(Ul.dealHistoryViewService),serviceCommentViewService:_(Ul.serviceCommentViewService),roleViewService:_(Ul.roleViewService),notifyViewService:_(Ul.notifyViewService),taskViewService:_(Ul.taskViewService),taskHistoryViewService:_(Ul.taskHistoryViewService),advertisingViewService:_(Ul.advertisingViewService)},...us,...hs};window.addEventListener("unhandledrejection",(e=>{ys.errorService.handleGlobalError(new Error(e.reason))})),window.addEventListener("offline",(()=>{L()})),window.addEventListener("error",(e=>{e instanceof de&&ys.errorService.handleGlobalError(e)})),ys.layoutService.setModalLoader(!0),ys.layoutService.appbarSubject.filter((e=>!e)).filter((()=>!ys.layoutService.hasAppbarLoader)).operator(ce.take(1)).debounce(1e3).once((()=>{ys.layoutService.setModalLoader(!1)})),Y.join([ys.layoutService.appbarSubject.toObserver(),Y.fromInterval(1e4)],{race:!0}).reduce(((e,[t])=>t?e+1:0),0).filter((e=>6===e)).connect((()=>{ys.layoutService.hasModalLoader||ys.layoutService.dropAppbarLoader()})),ys.routerService.listen((({action:e})=>{"PUSH"===e&&ys.cacheService.collectGarbage()})),me((()=>ys.appwriteService.isAuthorized),(()=>{ys.appwriteService.isAuthorized&&ys.dailyNotifyService.checkNotify()})),ys.routerService.listen((()=>{ys.executionService.execute.cancel()})),ys.userViewService.updateSubject.subscribe((([e])=>{ys.appwriteService.currentUser.$id===e&&L()})),ys.settingsViewService.updateSubject.subscribe((()=>{L()})),ys.roleViewService.updateSubject.subscribe((async([e])=>{const t=ys.appwriteService.currentUser.$id,i=await ys.userViewService.read(t);ae(i.user_role)===e&&L()})),window.ioc=ys;const bs=ys,_s=(()=>{let e=null,t={};return()=>{const{pathname:i}=bs.routerService.location;return e!==i&&(t=pe(s_,bs.routerService.location.pathname)||{},e=i),t}})(),vs=(e,t=null)=>{const i=_s();return h.get(i,e)||t},fs=_s,gs=ue.forwardRef((({sx:e,variant:t="filled"},i)=>{const[a,o]=ue.useState([]);return ue.useEffect((()=>me((()=>bs.editTargetService.alerts),(()=>{o(bs.editTargetService.alerts)}))),[]),ue.useEffect((()=>{o(bs.editTargetService.alerts)}),[]),he(ye,{ref:i,sx:{...e,mb:2},variant:t,items:a})})),ks=({children:e})=>{const{execute:t}=be((async()=>{const{sideMenu:e=null}=m_()||{},{id:t=null}=fs();if(!bs.appwriteService.isAuthorized)return;if(await bs.featureService.hasFeature("anonimnoe_redaktirovanie"))return;const i=await bs.editTargetService.getDocument(bs.appwriteService.currentUser.$id);if(!i)return void(await bs.editTargetService.create({entity_id:t,path:e}));let a=!1;a=a||i.entity_id!==t,a=a||i.path!==e,a&&await bs.editTargetService.update({entity_id:t,path:e})}),{onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),fallback:bs.errorService.handleGlobalError});return ue.useEffect((()=>me((()=>bs.routerService.location.pathname),(()=>{bs.appwriteService.isAuthorized&&t()}))),[]),he(_e,{children:e})},ws=(e,t=bs.routerService.location.pathname)=>!!ve(s_.filter((({path:t})=>e.includes(t))),t),Ss=[{id:"owner_contact",isVisible:({permissions:e})=>e.hasMasterDetailPermission,label:"Контакт",isActive:()=>ws(["/apartment_view/:id/owner_contact"])},{id:"object",label:"Объект",isActive:()=>ws(["/apartment_view/:id","/apartment_view/:id/object"])},{id:"tasks",isVisible:({permissions:e})=>e.hasMasterDetailPermission,label:"Задачи",isActive:()=>ws(["/apartment_view/:id/tasks"])},{id:"advertising",label:"Реклама",isActive:()=>ws(["/apartment_view/:id/advertising"])},{id:"service_comment",isVisible:({permissions:e})=>e.hasMasterDetailPermission,label:"Служебный комментарий",isActive:()=>ws(["/apartment_view/:id/service_comment"])},{id:"history",isVisible:({permissions:e})=>e.hasMasterDetailPermission,label:"История",isActive:()=>ws(["/apartment_view/:id/history"])},{id:"documents",isVisible:({permissions:e})=>e.hasMasterDetailPermission,label:"Документы",isActive:()=>ws(["/apartment_view/:id/documents"])},{id:"commission_and_status",isVisible:({permissions:e})=>e.hasMasterDetailPermission,label:"Комиссия и статус",isDisabled:()=>!0,isActive:()=>ws(["/apartment_view/:id/commission_and_status"])}],zs=(e,t)=>{if(t)return;const i=vs("id","create");"owner_contact"===e&&bs.routerService.replace("/apartment_view/".concat(i,"/owner_contact")),"object"===e&&bs.routerService.replace("/apartment_view/".concat(i,"/object")),"tasks"===e&&bs.routerService.replace("/apartment_view/".concat(i,"/tasks")),"advertising"===e&&bs.routerService.replace("/apartment_view/".concat(i,"/advertising")),"service_comment"===e&&bs.routerService.replace("/apartment_view/".concat(i,"/service_comment")),"history"===e&&bs.routerService.replace("/apartment_view/".concat(i,"/history")),"documents"===e&&bs.routerService.replace("/apartment_view/".concat(i,"/documents")),"commission_and_status"===e&&bs.routerService.replace("/apartment_view/".concat(i,"/commission_and_status"))},Vs=({children:e,payload:t,mode:i=j.Paper})=>{const a=ue.useMemo((()=>"tabs"===i?j.Tabs:j.Paper),[i]);return he(fe,{withFixedPos:!0,payload:t,fixedPosHeaderAdjust:i===j.Paper?85:64,mode:a,options:Ss,onActiveOptionChange:zs,children:e})},[xs,As]=ge(),[Ts,Cs]=ge(),{makeStyles:Fs}=ke({useTheme:we}),Ls=Se.createLoader(96),Is=Fs()((e=>({square:{position:"relative"},dragHoverActive:{background:ze(e.palette.primary.main,.5)},dragHoverInactive:{background:"#ccc"},prev:{position:"absolute",margin:"auto",left:"0",top:"0",bottom:0,zIndex:"2 !important",color:e.palette.background.paper,width:"30%"},next:{position:"absolute",margin:"auto",right:"10px",top:"10px",bottom:"5px",zIndex:"2 !important",color:e.palette.background.paper,width:"30%"},action:{zIndex:"5 !important"},defaultIcon:{position:"absolute",right:10,bottom:10,height:35,width:35,fill:"orange",background:"white",borderRadius:"50%",padding:"1.5px",zIndex:"1"},"tss-nuqny4-root":{zIndex:"5 !important"}}))),Ms=({dropSubject:e,modal:t,className:i,readonly:a,image:o,apartment_images:l,advertising_images:n,text:r,sx:s,onClick:d,onChange:c,drag:m})=>{const{classes:p}=Is(),[u,h]=ue.useState(!1),y=Ve(e),b=Ve(),_=l||[],v=n||[];ue.useEffect((()=>()=>{b.next()}),[]),ue.useEffect((()=>y.subscribe((()=>{h(!1)}))),[]);const[,f]=As(),[,g]=Cs(),k=ue.useMemo((()=>[...v].sort(((e,t)=>Math.max(_.indexOf(t),0)-Math.max(_.indexOf(e),0))).reverse()[0]||"unknown"),[_,v]),w=ue.useMemo((()=>v.includes(o)),[o,v]);return he(Te,{className:i,sx:s,onClick:()=>d&&d(o),children:he(xe,{draggable:m,onDragStart:()=>f(o),onDragOver:e=>{e.preventDefault(),g(o)},onDragLeave:()=>h(!1),onDragEnter:()=>h(!0),className:p.square,children:[o===k&&he(Ae,{className:p.defaultIcon}),he(Te,{className:Ce({[p.dragHoverActive]:u,[p.dragHoverInactive]:!u}),component:"div",sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:[he(Te,{sx:{position:"absolute",top:10,left:10,transition:"opacity 150ms",background:"white",borderRadius:"50%",zIndex:"5 !important"},children:he(Fe,{size:"small",disabled:a,checked:w,onClick:e=>{e.preventDefault(),e.stopPropagation(),(()=>{const e=new Set(v);e.has(o)?e.delete(o):e.add(o),c({advertising_images:[...e],apartment_images:_})})()}})}),he(Le,{Loader:Ls,payload:o,children:async e=>{if(!e)return he(Ie,{sx:{fontSize:96,fill:"white"}});const i=async()=>t?await bs.appwriteService.getImageURL(e):await bs.previewService.getImageURL(e);let a,o;return Xo||(a=await i(),o=await Xr(a,"".concat(e,"-").concat(t?"modal":""),r),b.once((()=>{o&&URL.revokeObjectURL(o)}))),a||(a=await i()),he("img",{crossOrigin:"anonymous",loading:"lazy",alt:e,src:Xo?a:o||a,style:{objectFit:"contain",height:"100%",width:"100%",pointerEvents:"none"}})}})]})]})})},js=Fs()((e=>({root:{position:"fixed",padding:20,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"stretch",transform:"translate(-50%, -50%)",backgroundColor:e.palette.background.paper,borderRadius:5,gap:5,top:"50%",left:"50%",width:"calc(100vmin - 60px)",height:"calc(100vmin - 60px)",outline:"none"},content:{overflow:"hidden",padding:e.spacing(1),flex:1},container:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flex:1,overflow:"hidden",paddingTop:e.spacing(1)},title:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:15,color:e.palette.text.primary},submit:{marginTop:15},disabled:{opacity:.5,pointerEvents:"none"},indicatorTransparent:{height:6,background:e.palette.primary.main},tabRootTransparent:{minHeight:54,height:54},tabsRoot:{minHeight:54,height:54,marginLeft:"0 !important",marginRight:"0 !important"},prev:{position:"absolute",margin:"auto",left:"10px",top:"10px",bottom:"5px",zIndex:"2 !important",color:e.palette.background.paper,width:"30%"},next:{position:"absolute",margin:"auto",right:"10px",top:"10px",bottom:"5px",zIndex:"2 !important",color:e.palette.background.paper,width:"30%"},icon_border:{border:"1px solid black"}}))),Bs=({apartment_images:e,advertising_images:t,_fieldData:i,payload:a,readonly:o,onChange:l})=>{const[n]=As(),[r]=Cs(),s=t||[],d=e||[],{pickImage:c,render:m}=(({_fieldData:e,advertising_images:t,apartment_images:i,readonly:a,payload:o,onChange:l})=>{const[n,r]=ue.useState(""),[s,d]=ue.useState(!1),c=(null==i?void 0:i.length)||0,[m,p]=ue.useState(0),[u,h]=ue.useState(!1),[y,b]=ue.useState(0),[_,v]=ue.useState(!1);ue.useEffect((()=>{p(Array.isArray(i)?i.indexOf(n):0)}),[n]);const{classes:f,cx:g}=js(),k=()=>{y||(r(""),p(0),h(!1))},w=()=>{b((e=>e+1))},S=()=>{b((e=>e-1))},z=e=>{e.preventDefault(),e.stopPropagation(),r(i?i[m+1]:"")},V=e=>{e.preventDefault(),e.stopPropagation(),r(i?i[m-1]:"")};return{render:()=>he(qe,{open:u,onClose:k,sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center","& .MuiBackdrop-root":{background:ze("#000",.5)}},children:he("div",{className:f.root,onMouseEnter:()=>{d(!0)},onMouseLeave:()=>{d(!1)},onClick:()=>h(!1),children:he("div",{className:f.container,children:[he(Me,{className:f.prev,onClick:V,disabled:0===m,onMouseOver:()=>v(!0),onMouseLeave:()=>v(!1)}),he(Me,{className:f.next,onClick:z,disabled:m===c-1,onMouseOver:()=>v(!0),onMouseLeave:()=>v(!1)}),he(Ms,{modal:!0,onLoadEnd:S,onLoadStart:w,className:f.content,advertising_images:t,apartment_images:i,text:"№".concat(e.apartment_index),payload:o,onChange:l,image:n,readonly:a,drag:!1,onMouseOver:_}),c>1&&he(Te,{sx:{position:"absolute",left:0,bottom:0,width:"100%",height:75,display:"flex",alignItems:"space-beetween",justifyContent:"center",transition:"opacity 150ms",opacity:s?1:0},children:he(je,{onClick:e=>{e.preventDefault(),e.stopPropagation()},steps:c,position:"static",activeStep:m,nextButton:he(Be,{size:"small",sx:{ml:1},onClick:z,disabled:m===c-1,children:he(Re,{})}),backButton:he(Be,{size:"small",sx:{mr:1},onClick:V,disabled:0===m,children:he(De,{})}),sx:{height:"45px",backdropFilter:"blur(20px)",backgroundColor:"#00000012",borderRadius:"25px",zIndex:"1000"}})})]})})}),handleNext:z,handleBack:V,pickImage:e=>{r(e),h(!0)}}})({_fieldData:i,payload:a,apartment_images:d,advertising_images:s,onChange:({apartment_images:e,advertising_images:t})=>{l({apartment_images:e,advertising_images:t})},readonly:o}),p=Ve(),u=e=>{o?c(e):(e=>{const t=new Set(s);t.has(e)?t.delete(e):t.add(e),l({advertising_images:[...t],apartment_images:d})})(e)};return he(_e,{children:[he(Pe,{gap:1,sx:{pointerEvents:"all",minHeight:"calc(100vh - 270px)"},flexWrap:"wrap",direction:"row",onDrop:()=>{(()=>{if(n==r)return;const e=d.indexOf(n),t=d.indexOf(r),i=d[e];d[e]=d[t],d[t]=i,l({apartment_images:d,advertising_images:s})})(),p.next()},children:d.filter((e=>!o||s.includes(e))).map(((e,t)=>he(Ms,{sx:{width:275},image:e,apartment_images:d,advertising_images:s,onChange:({apartment_images:e,advertising_images:t})=>{l({apartment_images:e,advertising_images:t})},text:"№".concat(i.apartment_index),dropSubject:p,drag:!o,payload:a,readonly:o,onClick:u},t)))}),m()]})},Rs=e=>he(xs,{initialState:"",children:he(Ts,{initialState:"",children:he(Bs,{...e})})}),Ds=(e,...t)=>{let i=!1;if(e instanceof Set){for(const a of t)if(e.has(a)){i=!0;break}}else for(const a of t)if(String("boolean"==typeof e[a]?e[a]:e[a]||"").length){i=!0;break}return i},qs=[{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&Ee(e.podkategoriya_obekta,"Квартиры"),t=t&&Ee(e.kategoriya_obekta,"Жилая"),t=t&&!Ee(e.kategoriya_obekta,"Коммерческая"),t},fields:[{type:o.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилая квартира)"})},{type:o.Text,isVisible:e=>Ds(e,"zagolovok_dlya_reklamy"),outlined:!1,compute:({zagolovok_dlya_reklamy:e})=>e||"",title:"Заголовок для рекламы"},{type:o.Text,outlined:!1,compute:async({apartment_id:e})=>{const t=await bs.apartmentViewService.tryRead(e);if(!t)return"";const{arenda:i,prodazha:a}=t;return a&&i?"Продажа, Аренда":a?"Продажа":i?"Аренда":""},title:"Тип сделки"},{type:o.Text,isVisible:e=>Ds(e,"rajon"),outlined:!1,compute:({rajon:e})=>e||"",title:"Район"},{type:o.Text,isVisible:e=>Ds(e,"ulicza"),outlined:!1,compute:({ulicza:e})=>e||"",title:"Адрес"},{type:o.Text,isVisible:e=>Ds(e,"orientir"),outlined:!1,compute:({orientir:e})=>e||"",title:"Ориентир"},{type:o.Text,isVisible:e=>Ds(e,"metro"),outlined:!1,compute:({metro:e})=>e||"",title:"Метро"},{type:o.Text,isVisible:e=>Ds(e,"kolichestvo_komnat"),outlined:!1,compute:({kolichestvo_komnat:e})=>e||"",title:"Количество комнат"},{type:o.Text,isVisible:e=>Ds(e,"etazh"),outlined:!1,compute:({etazh:e})=>e||"",title:"Этаж"},{type:o.Text,isVisible:e=>Ds(e,"etazhnost"),outlined:!1,compute:({etazhnost:e})=>e||"",title:"Этажность"},{type:o.Text,isVisible:e=>Ds(e,"obshhaya_ploshhad"),outlined:!1,compute:({obshhaya_ploshhad:e})=>e||"",title:"Общая площадь М²"},{type:o.Text,outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>Ds(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},{type:o.Text,isVisible:(e,{permissions:t})=>W(Ds(e,"kategoriya_obekta"),t.hasAdvertisingKategoryAddPermission),outlined:!1,compute:({kategoriya_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)).join(", ")||"",title:"Категория объекта"},{type:o.Text,isVisible:(e,{permissions:t})=>W(Ds(e,"podkategoriya_obekta"),t.hasAdvertisingKategoryAddPermission),outlined:!1,compute:({podkategoriya_obekta:e})=>e||"",title:"Подкатегория объекта"},{type:o.Text,isVisible:e=>Ds(e,"tip_nedvizhimosti"),outlined:!1,compute:({tip_nedvizhimosti:e})=>e||"",title:"Тип недвижимости"},{type:o.Text,isVisible:e=>Ds(e,"nazvanie_zhk"),outlined:!1,compute:({nazvanie_zhk:e})=>e||"",title:"Название ЖК"},{type:o.Text,isVisible:e=>Ds(e,"primechanie"),outlined:!1,inputRows:4,compute:({primechanie:e})=>e||"",title:"Примечание"},{type:o.Text,outlined:!1,compute:async({nomer_agenstva:e})=>{const t=await bs.dictService.getAgencyMap();return h.get(t,e)||e},title:"Номер агенства"},{type:o.Text,outlined:!1,compute:async({nomer_agenta:e})=>{const t=await bs.dictService.getAgentMap();return h.get(t,e)||e},title:"Номер агента"}]},{type:o.Group,columns:"6",fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>e.apartment_images&&e.apartment_images.length,fields:[{type:o.Component,sx:{mb:2},element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})},{type:o.Component,element:Rs}]}]}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&Ee(e.podkategoriya_obekta,"Дома"),t=t&&Ee(e.kategoriya_obekta,"Жилая"),t=t&&!Ee(e.kategoriya_obekta,"Коммерческая"),t},fields:[{type:o.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилой дом)"})},{type:o.Text,isVisible:e=>Ds(e,"zagolovok_dlya_reklamy"),outlined:!1,compute:({zagolovok_dlya_reklamy:e})=>e||"",title:"Заголовок для рекламы"},{type:o.Text,outlined:!1,compute:async({apartment_id:e})=>{const t=await bs.apartmentViewService.tryRead(e);if(!t)return"";const{arenda:i,prodazha:a}=t;return a&&i?"Продажа, Аренда":a?"Продажа":i?"Аренда":""},title:"Тип сделки"},{type:o.Text,isVisible:e=>Ds(e,"rajon"),outlined:!1,compute:({rajon:e})=>e||"",title:"Район"},{type:o.Text,isVisible:e=>Ds(e,"ulicza"),outlined:!1,compute:({ulicza:e})=>e||"",title:"Адрес"},{type:o.Text,isVisible:e=>Ds(e,"orientir"),outlined:!1,compute:({orientir:e})=>e||"",title:"Ориентир"},{type:o.Text,isVisible:e=>Ds(e,"metro"),outlined:!1,compute:({metro:e})=>e||"",title:"Метро"},{type:o.Text,isVisible:e=>Ds(e,"kolichestvo_komnat"),outlined:!1,compute:({kolichestvo_komnat:e})=>e||"",title:"Количество комнат"},{type:o.Text,isVisible:e=>Ds(e,"etazhnost"),outlined:!1,compute:({etazhnost:e})=>e||"",title:"Этажность"},{type:o.Text,isVisible:e=>Ds(e,"kolichestvo_sotok"),outlined:!1,compute:({kolichestvo_sotok:e})=>e||"",title:"Количество соток"},{type:o.Text,outlined:!1,compute:e=>[e.bassejn||""].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>Ds(e,"bassejn"),title:"Бассейн"},{type:o.Text,isVisible:e=>Ds(e,"ploshhad_doma"),outlined:!1,compute:({ploshhad_doma:e})=>e||"",title:"Площадь дома М²"},{type:o.Text,outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>Ds(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},{type:o.Text,isVisible:(e,{permissions:t})=>W(Ds(e,"kategoriya_obekta"),t.hasAdvertisingKategoryAddPermission),outlined:!1,compute:({kategoriya_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)).join(", ")||"",title:"Категория объекта"},{type:o.Text,isVisible:(e,{permissions:t})=>W(Ds(e,"podkategoriya_obekta"),t.hasAdvertisingKategoryAddPermission),outlined:!1,compute:({podkategoriya_obekta:e})=>e||"",title:"Подкатегория объекта"},{type:o.Text,isVisible:e=>Ds(e,"primechanie"),outlined:!1,inputRows:4,compute:({primechanie:e})=>e||"",title:"Примечание"},{type:o.Text,outlined:!1,compute:async({nomer_agenstva:e})=>{const t=await bs.dictService.getAgencyMap();return h.get(t,e)||e},title:"Номер агенства"},{type:o.Text,outlined:!1,compute:async({nomer_agenta:e})=>{const t=await bs.dictService.getAgentMap();return h.get(t,e)||e},title:"Номер агента"}]},{type:o.Group,columns:"6",fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>e.apartment_images&&e.apartment_images.length,fields:[{type:o.Component,sx:{mb:2},element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})},{type:o.Component,element:Rs}]}]}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&Ee(e.podkategoriya_obekta,"Земля/Участок"),t=t&&Ee(e.kategoriya_obekta,"Жилая"),t=t&&!Ee(e.kategoriya_obekta,"Коммерческая"),t},fields:[{type:o.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилая земля/участок)"})},{type:o.Text,isVisible:e=>Ds(e,"zagolovok_dlya_reklamy"),outlined:!1,compute:({zagolovok_dlya_reklamy:e})=>e||"",title:"Заголовок для рекламы"},{type:o.Text,outlined:!1,compute:async({apartment_id:e})=>{const t=await bs.apartmentViewService.tryRead(e);if(!t)return"";const{arenda:i,prodazha:a}=t;return a&&i?"Продажа, Аренда":a?"Продажа":i?"Аренда":""},title:"Тип сделки"},{type:o.Text,outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>Ds(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:"Назначение объекта"},{type:o.Text,outlined:!1,compute:e=>[e.sostoyanie_obekta,e["sostoyanie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>Ds(e,"sostoyanie_obekta","sostoyanie-obekta_zemlya"),title:"Состояние объекта"},{type:o.Text,isVisible:e=>Ds(e,"rajon"),outlined:!1,compute:({rajon:e})=>e||"",title:"Район"},{type:o.Text,isVisible:e=>Ds(e,"ulicza"),outlined:!1,compute:({ulicza:e})=>e||"",title:"Адрес"},{type:o.Text,isVisible:e=>Ds(e,"orientir"),outlined:!1,compute:({orientir:e})=>e||"",title:"Ориентир"},{type:o.Text,isVisible:e=>Ds(e,"metro"),outlined:!1,compute:({metro:e})=>e||"",title:"Метро"},{type:o.Text,isVisible:e=>Ds(e,"kolichestvo_sotok"),outlined:!1,compute:({kolichestvo_sotok:e})=>e||"",title:"Количество соток"},{type:o.Text,outlined:!1,compute:({vid_liczenzii:e})=>[e].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>Ds(e,"vid_liczenzii"),title:"Вид лицензии"},{type:o.Text,isVisible:(e,{permissions:t})=>W(Ds(e,"kategoriya_obekta"),t.hasAdvertisingKategoryAddPermission),outlined:!1,compute:({kategoriya_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)).join(", ")||"",title:"Категория объекта"},{type:o.Text,isVisible:(e,{permissions:t})=>W(Ds(e,"podkategoriya_obekta"),t.hasAdvertisingKategoryAddPermission),outlined:!1,compute:({podkategoriya_obekta:e})=>e||"",title:"Подкатегория объекта"},{type:o.Text,isVisible:e=>Ds(e,"primechanie"),outlined:!1,inputRows:4,compute:({primechanie:e})=>e||"",title:"Примечание"},{type:o.Text,outlined:!1,compute:async({nomer_agenstva:e})=>{const t=await bs.dictService.getAgencyMap();return h.get(t,e)||e},title:"Номер агенства"},{type:o.Text,outlined:!1,compute:async({nomer_agenta:e})=>{const t=await bs.dictService.getAgentMap();return h.get(t,e)||e},title:"Номер агента"}]},{type:o.Group,columns:"6",fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>e.apartment_images&&e.apartment_images.length,fields:[{type:o.Component,sx:{mb:2},element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})},{type:o.Component,element:Rs}]}]}]},{type:o.Fragment,isVisible:e=>(!Ee(e.podkategoriya_obekta,"Квартиры")||!Ee(e.kategoriya_obekta,"Коммерческая"))&&((!Ee(e.podkategoriya_obekta,"Дома")||!Ee(e.kategoriya_obekta,"Коммерческая"))&&((!Ee(e.podkategoriya_obekta,"Земля/Участок")||!Ee(e.kategoriya_obekta,"Коммерческая"))&&Ee(e.kategoriya_obekta,"Коммерческая"))),fields:[{type:o.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая недвижимость)"})},{type:o.Text,isVisible:e=>Ds(e,"zagolovok_dlya_reklamy"),outlined:!1,compute:({zagolovok_dlya_reklamy:e})=>e||"",title:"Заголовок для рекламы"},{type:o.Text,outlined:!1,compute:async({apartment_id:e})=>{const t=await bs.apartmentViewService.tryRead(e);if(!t)return"";const{arenda:i,prodazha:a}=t;return a&&i?"Продажа, Аренда":a?"Продажа":i?"Аренда":""},title:"Тип сделки"},{type:o.Text,outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>Ds(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:"Назначение объекта"},{type:o.Text,outlined:!1,compute:({raspolozhenie_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>Ds(e,"raspolozhenie_obekta"),title:"Расположение объекта"},{type:o.Text,isVisible:e=>Ds(e,"rajon"),outlined:!1,compute:({rajon:e})=>e||"",title:"Район"},{type:o.Text,isVisible:e=>Ds(e,"ulicza"),outlined:!1,compute:({ulicza:e})=>e||"",title:"Адрес"},{type:o.Text,isVisible:e=>Ds(e,"orientir"),outlined:!1,compute:({orientir:e})=>e||"",title:"Ориентир"},{type:o.Text,isVisible:e=>Ds(e,"metro"),outlined:!1,compute:({metro:e})=>e||"",title:"Метро"},{type:o.Text,isVisible:e=>Ds(e,"obshhaya_ploshhad"),outlined:!1,compute:({obshhaya_ploshhad:e})=>e||"",title:"Общая площадь М²"},{type:o.Text,isVisible:e=>Ds(e,"kolichestvo_komnat"),outlined:!1,compute:({kolichestvo_komnat:e})=>e||"",title:"Количество комнат"},{type:o.Text,isVisible:e=>Ds(e,"etazh"),outlined:!1,compute:({etazh:e})=>e||"",title:"Этаж"},{type:o.Text,isVisible:e=>Ds(e,"etazhnost"),outlined:!1,compute:({etazhnost:e})=>e||"",title:"Этажность"},{type:o.Text,outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>Ds(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},{type:o.Text,isVisible:e=>Ds(e,"primechanie"),outlined:!1,inputRows:4,compute:({primechanie:e})=>e||"",title:"Примечание"},{type:o.Text,isVisible:(e,{permissions:t})=>W(Ds(e,"kategoriya_obekta"),t.hasAdvertisingKategoryAddPermission),outlined:!1,compute:({kategoriya_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)).join(", ")||"",title:"Категория объекта"},{type:o.Text,isVisible:(e,{permissions:t})=>W(Ds(e,"podkategoriya_obekta"),t.hasAdvertisingKategoryAddPermission),outlined:!1,compute:({podkategoriya_obekta:e})=>e||"",title:"Подкатегория объекта"},{type:o.Text,outlined:!1,compute:async({nomer_agenstva:e})=>{const t=await bs.dictService.getAgencyMap();return h.get(t,e)||e},title:"Номер агенства"},{type:o.Text,outlined:!1,compute:async({nomer_agenta:e})=>{const t=await bs.dictService.getAgentMap();return h.get(t,e)||e},title:"Номер агента"}]},{type:o.Group,columns:"6",fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>e.apartment_images&&e.apartment_images.length,fields:[{type:o.Component,sx:{mb:2},element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})},{type:o.Component,element:Rs}]}]}]},{type:o.Fragment,isVisible:e=>!(!Ee(e.kategoriya_obekta,"Коммерческая")||!Ee(e.podkategoriya_obekta,"Квартиры")),fields:[{type:o.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая + Жилая квартира)"})},{type:o.Text,isVisible:e=>Ds(e,"zagolovok_dlya_reklamy"),outlined:!1,compute:({zagolovok_dlya_reklamy:e})=>e||"",title:"Заголовок для рекламы"},{type:o.Text,outlined:!1,compute:async({apartment_id:e})=>{const t=await bs.apartmentViewService.tryRead(e);if(!t)return"";const{arenda:i,prodazha:a}=t;return a&&i?"Продажа, Аренда":a?"Продажа":i?"Аренда":""},title:"Тип сделки"},{type:o.Text,isVisible:e=>Ds(e,"tip_nedvizhimosti"),outlined:!1,compute:({tip_nedvizhimosti:e})=>e||"",title:"Тип недвижимости"},{type:o.Text,isVisible:e=>Ds(e,"nazvanie_zhk"),outlined:!1,compute:({nazvanie_zhk:e})=>e||"",title:"Название ЖК"},{type:o.Text,outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>Ds(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:"Назначение объекта"},{type:o.Text,outlined:!1,compute:({raspolozhenie_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>Ds(e,"raspolozhenie_obekta"),title:"Расположение объекта"},{type:o.Text,isVisible:e=>Ds(e,"rajon"),outlined:!1,compute:({rajon:e})=>e||"",title:"Район"},{type:o.Text,isVisible:e=>Ds(e,"ulicza"),outlined:!1,compute:({ulicza:e})=>e||"",title:"Адрес"},{type:o.Text,isVisible:e=>Ds(e,"orientir"),outlined:!1,compute:({orientir:e})=>e||"",title:"Ориентир"},{type:o.Text,isVisible:e=>Ds(e,"metro"),outlined:!1,compute:({metro:e})=>e||"",title:"Метро"},{type:o.Text,isVisible:e=>Ds(e,"obshhaya_ploshhad"),outlined:!1,compute:({obshhaya_ploshhad:e})=>e||"",title:"Общая площадь М²"},{type:o.Text,isVisible:e=>Ds(e,"kolichestvo_komnat"),outlined:!1,compute:({kolichestvo_komnat:e})=>e||"",title:"Количество комнат"},{type:o.Text,outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>Ds(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},{type:o.Text,isVisible:e=>Ds(e,"primechanie"),outlined:!1,inputRows:4,compute:({primechanie:e})=>e||"",title:"Примечание"},{type:o.Text,isVisible:(e,{permissions:t})=>W(Ds(e,"kategoriya_obekta"),t.hasAdvertisingKategoryAddPermission),outlined:!1,compute:({kategoriya_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)).join(", ")||"",title:"Категория объекта"},{type:o.Text,isVisible:(e,{permissions:t})=>W(Ds(e,"podkategoriya_obekta"),t.hasAdvertisingKategoryAddPermission),outlined:!1,compute:({podkategoriya_obekta:e})=>e||"",title:"Подкатегория объекта"},{type:o.Text,outlined:!1,compute:async({nomer_agenstva:e})=>{const t=await bs.dictService.getAgencyMap();return h.get(t,e)||e},title:"Номер агенства"},{type:o.Text,outlined:!1,compute:async({nomer_agenta:e})=>{const t=await bs.dictService.getAgentMap();return h.get(t,e)||e},title:"Номер агента"}]},{type:o.Group,columns:"6",fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>e.apartment_images&&e.apartment_images.length,fields:[{type:o.Component,sx:{mb:2},element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})},{type:o.Component,element:Rs}]}]}]},{type:o.Fragment,isVisible:e=>!(!Ee(e.kategoriya_obekta,"Коммерческая")||!Ee(e.podkategoriya_obekta,"Дома")),fields:[{type:o.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческий + Жилой дом)"})},{type:o.Text,isVisible:e=>Ds(e,"zagolovok_dlya_reklamy"),outlined:!1,compute:({zagolovok_dlya_reklamy:e})=>e||"",title:"Заголовок для рекламы"},{type:o.Text,outlined:!1,compute:async({apartment_id:e})=>{const t=await bs.apartmentViewService.tryRead(e);if(!t)return"";const{arenda:i,prodazha:a}=t;return a&&i?"Продажа, Аренда":a?"Продажа":i?"Аренда":""},title:"Тип сделки"},{type:o.Text,outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>Ds(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:"Назначение объекта"},{type:o.Text,outlined:!1,compute:({raspolozhenie_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>Ds(e,"raspolozhenie_obekta"),title:"Расположение объекта"},{type:o.Text,isVisible:e=>Ds(e,"rajon"),outlined:!1,compute:({rajon:e})=>e||"",title:"Район"},{type:o.Text,isVisible:e=>Ds(e,"ulicza"),outlined:!1,compute:({ulicza:e})=>e||"",title:"Адрес"},{type:o.Text,isVisible:e=>Ds(e,"orientir"),outlined:!1,compute:({orientir:e})=>e||"",title:"Ориентир"},{type:o.Text,isVisible:e=>Ds(e,"metro"),outlined:!1,compute:({metro:e})=>e||"",title:"Метро"},{type:o.Text,isVisible:e=>Ds(e,"ploshhad_doma"),outlined:!1,compute:({ploshhad_doma:e})=>e||"",title:"Площадь дома М²"},{type:o.Text,isVisible:e=>Ds(e,"kolichestvo_komnat"),outlined:!1,compute:({kolichestvo_komnat:e})=>e||"",title:"Количество комнат"},{type:o.Text,outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>Ds(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},{type:o.Text,isVisible:e=>Ds(e,"kolichestvo_sotok"),outlined:!1,compute:({kolichestvo_sotok:e})=>e||"",title:"Количество соток"},{type:o.Text,isVisible:e=>Ds(e,"etazhnost"),outlined:!1,compute:({etazhnost:e})=>e||"",title:"Этажность"},{type:o.Text,isVisible:e=>Ds(e,"primechanie"),outlined:!1,inputRows:4,compute:({primechanie:e})=>e||"",title:"Примечание"},{type:o.Text,isVisible:(e,{permissions:t})=>W(Ds(e,"kategoriya_obekta"),t.hasAdvertisingKategoryAddPermission),outlined:!1,compute:({kategoriya_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)).join(", ")||"",title:"Категория объекта"},{type:o.Text,isVisible:(e,{permissions:t})=>W(Ds(e,"podkategoriya_obekta"),t.hasAdvertisingKategoryAddPermission),outlined:!1,compute:({podkategoriya_obekta:e})=>e||"",title:"Подкатегория объекта"},{type:o.Text,outlined:!1,compute:async({nomer_agenstva:e})=>{const t=await bs.dictService.getAgencyMap();return h.get(t,e)||e},title:"Номер агенства"},{type:o.Text,outlined:!1,compute:async({nomer_agenta:e})=>{const t=await bs.dictService.getAgentMap();return h.get(t,e)||e},title:"Номер агента"}]},{type:o.Group,columns:"6",fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>e.apartment_images&&e.apartment_images.length,fields:[{type:o.Component,sx:{mb:2},element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})},{type:o.Component,element:Rs}]}]}]},{type:o.Fragment,isVisible:e=>!(!Ee(e.kategoriya_obekta,"Коммерческая")||!Ee(e.podkategoriya_obekta,"Земля/Участок")),fields:[{type:o.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая + Жилая земля/участок)"})},{type:o.Text,isVisible:e=>Ds(e,"zagolovok_dlya_reklamy"),outlined:!1,compute:({zagolovok_dlya_reklamy:e})=>e||"",title:"Заголовок для рекламы"},{type:o.Text,outlined:!1,compute:async({apartment_id:e})=>{const t=await bs.apartmentViewService.tryRead(e);if(!t)return"";const{arenda:i,prodazha:a}=t;return a&&i?"Продажа, Аренда":a?"Продажа":i?"Аренда":""},title:"Тип сделки"},{type:o.Text,outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>Ds(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:"Назначение объекта"},{type:o.Text,outlined:!1,compute:e=>[e.sostoyanie_obekta,e["sostoyanie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>Ds(e,"sostoyanie_obekta","sostoyanie-obekta_zemlya"),title:"Состояние объекта"},{type:o.Text,isVisible:e=>Ds(e,"rajon"),outlined:!1,compute:({rajon:e})=>e||"",title:"Район"},{type:o.Text,isVisible:e=>Ds(e,"ulicza"),outlined:!1,compute:({ulicza:e})=>e||"",title:"Адрес"},{type:o.Text,isVisible:e=>Ds(e,"orientir"),outlined:!1,compute:({orientir:e})=>e||"",title:"Ориентир"},{type:o.Text,isVisible:e=>Ds(e,"metro"),outlined:!1,compute:({metro:e})=>e||"",title:"Метро"},{type:o.Text,isVisible:e=>Ds(e,"kolichestvo_sotok"),outlined:!1,compute:({kolichestvo_sotok:e})=>e||"",title:"Количество соток"},{type:o.Text,outlined:!1,compute:({vid_liczenzii:e})=>[e].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>Ds(e,"vid_liczenzii"),title:"Вид лицензии"},{type:o.Text,isVisible:e=>Ds(e,"primechanie"),outlined:!1,inputRows:4,compute:({primechanie:e})=>e||"",title:"Примечание"},{type:o.Text,isVisible:(e,{permissions:t})=>W(Ds(e,"kategoriya_obekta"),t.hasAdvertisingKategoryAddPermission),outlined:!1,compute:({kategoriya_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)).join(", ")||"",title:"Категория объекта"},{type:o.Text,isVisible:(e,{permissions:t})=>W(Ds(e,"podkategoriya_obekta"),t.hasAdvertisingKategoryAddPermission),outlined:!1,compute:({podkategoriya_obekta:e})=>e||"",title:"Подкатегория объекта"},{type:o.Text,outlined:!1,compute:async({nomer_agenstva:e})=>{const t=await bs.dictService.getAgencyMap();return h.get(t,e)||e},title:"Номер агенства"},{type:o.Text,outlined:!1,compute:async({nomer_agenta:e})=>{const t=await bs.dictService.getAgentMap();return h.get(t,e)||e},title:"Номер агента"}]},{type:o.Group,columns:"6",fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>e.apartment_images&&e.apartment_images.length,fields:[{type:o.Component,sx:{mb:2},element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})},{type:o.Component,element:Rs}]}]}]}],Ps=[{type:o.Fragment,isVisible:e=>null===e.kategoriya_obekta||!(!Ee(e.kategoriya_obekta,"Жилая")||!Ee(e.podkategoriya_obekta,"Квартиры")),fields:[{type:o.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилая квартира)"})},{type:o.Text,outlined:!1,name:"zagolovok_dlya_reklamy",title:"Заголовок для рекламы"},{type:o.Text,outlined:!1,name:"rajon",title:"Район"},{type:o.Text,outlined:!1,name:"ulicza",title:"Адрес"},{type:o.Complete,tip:bs.dictService.getOrientir,outlined:!1,name:"orientir",title:"Ориентир"},{type:o.Combo,freeSolo:!0,outlined:!1,name:"metro",title:"Метро",itemList:["А. Ходжаев","Абдулла Кодирий","Алишер Навоий","Амир Темур хиёбони","Беруний","Бобур","Бодомзор","Буюк Ипак йули","Гофур Гулом","Дружба народов","Дустлик","Жанубий","Космонавтлар","Машинасозлар","Миллий бог","Мингурик","Минор","Мирзо Улугбек","Мустакиллик майдони","Новза","Ойбек","Олмазор","Отчопар","Пахтакор","Пушкинская","Сергели","Тинчлик","Тошкент","Тукимачи","Туркистон","Турсунзода","Узбекистон","Усмон Носыр","Файзулла Ходжаев","Хамид Олимжон","Чилонзор","Чорсу","Чош-тепа","Шахристан","Эхтиром","Юнус Ражабий","Юнусабад"]},{type:o.Text,outlined:!1,name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Text,outlined:!1,name:"etazh",title:"Этаж"},{type:o.Text,outlined:!1,name:"etazhnost",title:"Этажность"},{type:o.Text,outlined:!1,name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:o.Combo,freeSolo:!0,outlined:!1,name:"sostoyanie_remonta-kvartiry",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Combo,outlined:!1,name:"kategoriya_obekta",title:"Категория объекта",itemList:["Жилая","Коммерческая","От застройщика"]},{type:o.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>Ee(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок","Здания","Базы"]},{type:o.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>!Ee(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок"]},{type:o.Combo,outlined:!1,name:"tip_nedvizhimosti",title:"Тип недвижимости",itemList:["Вторичное жилье","Новостройка"]},{type:o.Text,outlined:!1,name:"nazvanie_zhk",title:"Название ЖК"},{type:o.Text,outlined:!1,inputRows:4,name:"primechanie",title:"Примечание"},{type:o.Combo,outlined:!1,name:"nomer_agenstva",itemList:async()=>{const e=await bs.dictService.getAgencyMap();return Object.keys(e)},tr:async e=>{const t=await bs.dictService.getAgencyMap();return h.get(t,e)||""},title:"Номер агенства"},{type:o.Combo,outlined:!1,name:"nomer_agenta",itemList:async()=>{const e=await bs.dictService.getAgentMap();return Object.keys(e)},tr:async e=>{const t=await bs.dictService.getAgentMap();return h.get(t,e)||""},title:"Номер агента"}]},{type:o.Group,columns:"6",fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>e.apartment_images&&e.apartment_images.length,fields:[{type:o.Component,sx:{mb:2},element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})},{type:o.Component,element:Rs}]}]}]},{type:o.Fragment,isVisible:e=>!(!Ee(e.kategoriya_obekta,"Жилая")||!Ee(e.podkategoriya_obekta,"Дома")),fields:[{type:o.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилой дом)"})},{type:o.Text,outlined:!1,name:"zagolovok_dlya_reklamy",title:"Заголовок для рекламы"},{type:o.Text,outlined:!1,name:"rajon",title:"Район"},{type:o.Text,outlined:!1,name:"ulicza",title:"Адрес"},{type:o.Complete,tip:bs.dictService.getOrientir,outlined:!1,name:"orientir",title:"Ориентир"},{type:o.Combo,freeSolo:!0,outlined:!1,name:"metro",title:"Метро",itemList:["А. Ходжаев","Абдулла Кодирий","Алишер Навоий","Амир Темур хиёбони","Беруний","Бобур","Бодомзор","Буюк Ипак йули","Гофур Гулом","Дружба народов","Дустлик","Жанубий","Космонавтлар","Машинасозлар","Миллий бог","Мингурик","Минор","Мирзо Улугбек","Мустакиллик майдони","Новза","Ойбек","Олмазор","Отчопар","Пахтакор","Пушкинская","Сергели","Тинчлик","Тошкент","Тукимачи","Туркистон","Турсунзода","Узбекистон","Усмон Носыр","Файзулла Ходжаев","Хамид Олимжон","Чилонзор","Чорсу","Чош-тепа","Шахристан","Эхтиром","Юнус Ражабий","Юнусабад"]},{type:o.Text,outlined:!1,name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Text,outlined:!1,name:"etazhnost",title:"Этажность"},{type:o.Text,outlined:!1,name:"kolichestvo_sotok",title:"Количество соток"},{type:o.Items,freeSolo:!1,outlined:!1,name:"bassejn",title:"Бассейн",itemList:["Летний","Зимний","Сауна","Нет"]},{type:o.Text,outlined:!1,name:"ploshhad_doma",title:"Площадь дома М²"},{type:o.Combo,freeSolo:!0,outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Combo,outlined:!1,name:"kategoriya_obekta",title:"Категория объекта",itemList:["Жилая","Коммерческая","От застройщика"]},{type:o.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>Ee(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок","Здания","Базы"]},{type:o.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>!Ee(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок"]},{type:o.Text,outlined:!1,inputRows:4,name:"primechanie",title:"Примечание"},{type:o.Combo,outlined:!1,name:"nomer_agenstva",itemList:async()=>{const e=await bs.dictService.getAgencyMap();return Object.keys(e)},tr:async e=>{const t=await bs.dictService.getAgencyMap();return h.get(t,e)||""},title:"Номер агенства"},{type:o.Combo,outlined:!1,name:"nomer_agenta",itemList:async()=>{const e=await bs.dictService.getAgentMap();return Object.keys(e)},tr:async e=>{const t=await bs.dictService.getAgentMap();return h.get(t,e)||""},title:"Номер агента"}]},{type:o.Group,columns:"6",fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>e.apartment_images&&e.apartment_images.length,fields:[{type:o.Component,sx:{mb:2},element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})},{type:o.Component,element:Rs}]}]}]},{type:o.Fragment,isVisible:e=>null===e.kategoriya_obekta||!(!Ee(e.kategoriya_obekta,"Жилая")||!Ee(e.podkategoriya_obekta,"Земля/Участок")),fields:[{type:o.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилая земля/участок)"})},{type:o.Text,outlined:!1,name:"zagolovok_dlya_reklamy",title:"Заголовок для рекламы"},{type:o.Component,sx:{pr:1,mb:2},name:"naznachenie-obekta_zemlya",element:e=>he(Oe,{variant:"standard",label:"Назначение объекта",items:[{label:"Сельхоз использование",value:"Сельхоз использование"},{label:"ИЖС",value:"ИЖС"},{label:"Высотная застройка",value:"Высотная застройка"},{label:"Промышленное назначение",value:"Промышленное назначение"},{label:"ТЦ",value:"ТЦ"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Склады",value:"Склады"},{label:"Инвестпроект",value:"Инвестпроект"},{label:"Строительство образовательных учреждений",value:"Строительство образовательных учреждений"},{label:"АЗС",value:"АЗС"},{label:"Мойка",value:"Мойка"}],value:e["naznachenie-obekta_zemlya"],onChange:t=>e.onChange({"naznachenie-obekta_zemlya":t})})},{type:o.Combo,freeSolo:!0,outlined:!1,name:"sostoyanie-obekta_zemlya",title:"Состояние объекта",itemList:["Пустая земля/участок","Недостроенная","Под снос"]},{type:o.Text,outlined:!1,name:"rajon",title:"Район"},{type:o.Text,outlined:!1,name:"ulicza",title:"Адрес"},{type:o.Complete,tip:bs.dictService.getOrientir,outlined:!1,name:"orientir",title:"Ориентир"},{type:o.Combo,freeSolo:!0,outlined:!1,name:"metro",title:"Метро",itemList:["А. Ходжаев","Абдулла Кодирий","Алишер Навоий","Амир Темур хиёбони","Беруний","Бобур","Бодомзор","Буюк Ипак йули","Гофур Гулом","Дружба народов","Дустлик","Жанубий","Космонавтлар","Машинасозлар","Миллий бог","Мингурик","Минор","Мирзо Улугбек","Мустакиллик майдони","Новза","Ойбек","Олмазор","Отчопар","Пахтакор","Пушкинская","Сергели","Тинчлик","Тошкент","Тукимачи","Туркистон","Турсунзода","Узбекистон","Усмон Носыр","Файзулла Ходжаев","Хамид Олимжон","Чилонзор","Чорсу","Чош-тепа","Шахристан","Эхтиром","Юнус Ражабий","Юнусабад"]},{type:o.Text,outlined:!1,name:"kolichestvo_sotok",title:"Количество соток"},{type:o.Items,freeSolo:!1,outlined:!1,name:"vid_liczenzii",title:"Вид лицензии",itemList:["Коммерческая","Жилая"]},{type:o.Text,outlined:!1,inputRows:4,name:"primechanie",title:"Примечание"},{type:o.Combo,outlined:!1,name:"kategoriya_obekta",title:"Категория объекта",itemList:["Жилая","Коммерческая","От застройщика"]},{type:o.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>Ee(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок","Здания","Базы"]},{type:o.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>!Ee(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок"]},{type:o.Combo,outlined:!1,name:"nomer_agenstva",itemList:async()=>{const e=await bs.dictService.getAgencyMap();return Object.keys(e)},tr:async e=>{const t=await bs.dictService.getAgencyMap();return h.get(t,e)||""},title:"Номер агенства"},{type:o.Combo,outlined:!1,name:"nomer_agenta",itemList:async()=>{const e=await bs.dictService.getAgentMap();return Object.keys(e)},tr:async e=>{const t=await bs.dictService.getAgentMap();return h.get(t,e)||""},title:"Номер агента"}]},{type:o.Group,columns:"6",fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>e.apartment_images&&e.apartment_images.length,fields:[{type:o.Component,sx:{mb:2},element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})},{type:o.Component,element:Rs}]}]}]},{type:o.Fragment,isVisible:e=>(!Ee(e.podkategoriya_obekta,"Квартиры")||!Ee(e.kategoriya_obekta,"Коммерческая"))&&((!Ee(e.podkategoriya_obekta,"Дома")||!Ee(e.kategoriya_obekta,"Коммерческая"))&&((!Ee(e.podkategoriya_obekta,"Земля/Участок")||!Ee(e.kategoriya_obekta,"Коммерческая"))&&Ee(e.kategoriya_obekta,"Коммерческая"))),fields:[{type:o.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая недвижимость)"})},{type:o.Text,outlined:!1,name:"zagolovok_dlya_reklamy",title:"Заголовок для рекламы"},{type:o.Component,sx:{pr:1,mb:2},name:"naznachenie_obekta",element:e=>he(Oe,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},{type:o.Items,freeSolo:!1,outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:o.Text,outlined:!1,name:"rajon",title:"Район"},{type:o.Text,outlined:!1,name:"ulicza",title:"Адрес"},{type:o.Complete,tip:bs.dictService.getOrientir,outlined:!1,name:"orientir",title:"Ориентир"},{type:o.Combo,freeSolo:!0,outlined:!1,name:"metro",title:"Метро",itemList:["А. Ходжаев","Абдулла Кодирий","Алишер Навоий","Амир Темур хиёбони","Беруний","Бобур","Бодомзор","Буюк Ипак йули","Гофур Гулом","Дружба народов","Дустлик","Жанубий","Космонавтлар","Машинасозлар","Миллий бог","Мингурик","Минор","Мирзо Улугбек","Мустакиллик майдони","Новза","Ойбек","Олмазор","Отчопар","Пахтакор","Пушкинская","Сергели","Тинчлик","Тошкент","Тукимачи","Туркистон","Турсунзода","Узбекистон","Усмон Носыр","Файзулла Ходжаев","Хамид Олимжон","Чилонзор","Чорсу","Чош-тепа","Шахристан","Эхтиром","Юнус Ражабий","Юнусабад"]},{type:o.Text,outlined:!1,name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:o.Text,outlined:!1,name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Text,outlined:!1,name:"etazh",title:"Этаж"},{type:o.Text,outlined:!1,name:"etazhnost",title:"Этажность"},{type:o.Combo,freeSolo:!0,outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Text,outlined:!1,inputRows:4,name:"primechanie",title:"Примечание"},{type:o.Combo,outlined:!1,name:"kategoriya_obekta",title:"Категория объекта",itemList:["Жилая","Коммерческая","От застройщика"]},{type:o.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>Ee(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок","Здания","Базы"]},{type:o.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>!Ee(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок"]},{type:o.Combo,outlined:!1,name:"nomer_agenstva",itemList:async()=>{const e=await bs.dictService.getAgencyMap();return Object.keys(e)},tr:async e=>{const t=await bs.dictService.getAgencyMap();return h.get(t,e)||""},title:"Номер агенства"},{type:o.Combo,outlined:!1,name:"nomer_agenta",itemList:async()=>{const e=await bs.dictService.getAgentMap();return Object.keys(e)},tr:async e=>{const t=await bs.dictService.getAgentMap();return h.get(t,e)||""},title:"Номер агента"}]},{type:o.Group,columns:"6",fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>e.apartment_images&&e.apartment_images.length,fields:[{type:o.Component,sx:{mb:2},element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})},{type:o.Component,element:Rs}]}]}]},{type:o.Fragment,isVisible:e=>null===e.kategoriya_obekta||!(!Ee(e.kategoriya_obekta,"Коммерческая")||!Ee(e.podkategoriya_obekta,"Квартиры")),fields:[{type:o.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая + Жилая квартира)"})},{type:o.Text,outlined:!1,name:"zagolovok_dlya_reklamy",title:"Заголовок для рекламы"},{type:o.Combo,outlined:!1,name:"tip_nedvizhimosti",title:"Тип недвижимости",itemList:["Вторичное жилье","Новостройка"]},{type:o.Text,outlined:!1,name:"nazvanie_zhk",title:"Название ЖК"},{type:o.Component,sx:{pr:1,mb:2},name:"naznachenie_obekta",element:e=>he(Oe,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},{type:o.Items,freeSolo:!1,outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:o.Text,outlined:!1,name:"rajon",title:"Район"},{type:o.Text,outlined:!1,name:"ulicza",title:"Адрес"},{type:o.Complete,tip:bs.dictService.getOrientir,outlined:!1,name:"orientir",title:"Ориентир"},{type:o.Combo,freeSolo:!0,outlined:!1,name:"metro",title:"Метро",itemList:["А. Ходжаев","Абдулла Кодирий","Алишер Навоий","Амир Темур хиёбони","Беруний","Бобур","Бодомзор","Буюк Ипак йули","Гофур Гулом","Дружба народов","Дустлик","Жанубий","Космонавтлар","Машинасозлар","Миллий бог","Мингурик","Минор","Мирзо Улугбек","Мустакиллик майдони","Новза","Ойбек","Олмазор","Отчопар","Пахтакор","Пушкинская","Сергели","Тинчлик","Тошкент","Тукимачи","Туркистон","Турсунзода","Узбекистон","Усмон Носыр","Файзулла Ходжаев","Хамид Олимжон","Чилонзор","Чорсу","Чош-тепа","Шахристан","Эхтиром","Юнус Ражабий","Юнусабад"]},{type:o.Text,outlined:!1,name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:o.Text,outlined:!1,name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Combo,freeSolo:!0,outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Text,outlined:!1,inputRows:4,name:"primechanie",title:"Примечание"},{type:o.Combo,outlined:!1,name:"kategoriya_obekta",title:"Категория объекта",itemList:["Жилая","Коммерческая","От застройщика"]},{type:o.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>Ee(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок","Здания","Базы"]},{type:o.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>!Ee(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок"]},{type:o.Combo,outlined:!1,name:"nomer_agenstva",itemList:async()=>{const e=await bs.dictService.getAgencyMap();return Object.keys(e)},tr:async e=>{const t=await bs.dictService.getAgencyMap();return h.get(t,e)||""},title:"Номер агенства"},{type:o.Combo,outlined:!1,name:"nomer_agenta",itemList:async()=>{const e=await bs.dictService.getAgentMap();return Object.keys(e)},tr:async e=>{const t=await bs.dictService.getAgentMap();return h.get(t,e)||""},title:"Номер агента"}]},{type:o.Group,columns:"6",fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>e.apartment_images&&e.apartment_images.length,fields:[{type:o.Component,sx:{mb:2},element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})},{type:o.Component,element:Rs}]}]}]},{type:o.Fragment,isVisible:e=>null===e.kategoriya_obekta||!(!Ee(e.kategoriya_obekta,"Коммерческая")||!Ee(e.podkategoriya_obekta,"Дома")),fields:[{type:o.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческий + Жилой дом)"})},{type:o.Text,outlined:!1,name:"zagolovok_dlya_reklamy",title:"Заголовок для рекламы"},{type:o.Component,sx:{pr:1,mb:2},name:"naznachenie_obekta",element:e=>he(Oe,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},{type:o.Items,freeSolo:!1,outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:o.Text,outlined:!1,name:"rajon",title:"Район"},{type:o.Text,outlined:!1,name:"ulicza",title:"Адрес"},{type:o.Complete,tip:bs.dictService.getOrientir,outlined:!1,name:"orientir",title:"Ориентир"},{type:o.Combo,freeSolo:!0,outlined:!1,name:"metro",title:"Метро",itemList:["А. Ходжаев","Абдулла Кодирий","Алишер Навоий","Амир Темур хиёбони","Беруний","Бобур","Бодомзор","Буюк Ипак йули","Гофур Гулом","Дружба народов","Дустлик","Жанубий","Космонавтлар","Машинасозлар","Миллий бог","Мингурик","Минор","Мирзо Улугбек","Мустакиллик майдони","Новза","Ойбек","Олмазор","Отчопар","Пахтакор","Пушкинская","Сергели","Тинчлик","Тошкент","Тукимачи","Туркистон","Турсунзода","Узбекистон","Усмон Носыр","Файзулла Ходжаев","Хамид Олимжон","Чилонзор","Чорсу","Чош-тепа","Шахристан","Эхтиром","Юнус Ражабий","Юнусабад"]},{type:o.Text,outlined:!1,name:"ploshhad_doma",title:"Площадь дома М²"},{type:o.Text,outlined:!1,name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Combo,freeSolo:!0,outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Text,outlined:!1,name:"kolichestvo_sotok",title:"Количество соток"},{type:o.Text,outlined:!1,name:"etazhnost",title:"Этажность"},{type:o.Text,outlined:!1,inputRows:4,name:"primechanie",title:"Примечание"},{type:o.Combo,outlined:!1,name:"kategoriya_obekta",title:"Категория объекта",itemList:["Жилая","Коммерческая","От застройщика"]},{type:o.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>Ee(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок","Здания","Базы"]},{type:o.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>!Ee(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок"]},{type:o.Combo,outlined:!1,name:"nomer_agenstva",itemList:async()=>{const e=await bs.dictService.getAgencyMap();return Object.keys(e)},tr:async e=>{const t=await bs.dictService.getAgencyMap();return h.get(t,e)||""},title:"Номер агенства"},{type:o.Combo,outlined:!1,name:"nomer_agenta",itemList:async()=>{const e=await bs.dictService.getAgentMap();return Object.keys(e)},tr:async e=>{const t=await bs.dictService.getAgentMap();return h.get(t,e)||""},title:"Номер агента"}]},{type:o.Group,columns:"6",fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>e.apartment_images&&e.apartment_images.length,fields:[{type:o.Component,sx:{mb:2},element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})},{type:o.Component,element:Rs}]}]}]},{type:o.Fragment,isVisible:e=>null===e.kategoriya_obekta||!(!Ee(e.kategoriya_obekta,"Коммерческая")||!Ee(e.podkategoriya_obekta,"Земля/Участок")),fields:[{type:o.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая + Жилая земля/участок)"})},{type:o.Text,outlined:!1,name:"zagolovok_dlya_reklamy",title:"Заголовок для рекламы"},{type:o.Component,sx:{pr:1,mb:2},name:"naznachenie-obekta-zemlya_uchastok",element:e=>he(Oe,{variant:"standard",label:"Назначение объекта",items:[{label:"Сельхоз использование",value:"Сельхоз использование"},{label:"ИЖС",value:"ИЖС"},{label:"Высотная застройка",value:"Высотная застройка"},{label:"Промышленное назначение",value:"Промышленное назначение"},{label:"ТЦ",value:"ТЦ"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Склады",value:"Склады"},{label:"Инвестпроект",value:"Инвестпроект"},{label:"Строительство образовательных учреждений",value:"Строительство образовательных учреждений"},{label:"АЗС",value:"АЗС"},{label:"Мойка",value:"Мойка"}],value:e["naznachenie-obekta_zemlya"],onChange:t=>e.onChange({"naznachenie-obekta_zemlya":t})})},{type:o.Combo,freeSolo:!0,outlined:!1,name:"sostoyanie-obekta_zemlya",title:"Состояние объекта",itemList:["Пустая земля/участок","Недостроенная","Под снос"]},{type:o.Text,outlined:!1,name:"rajon",title:"Район"},{type:o.Text,outlined:!1,name:"ulicza",title:"Адрес"},{type:o.Complete,tip:bs.dictService.getOrientir,outlined:!1,name:"orientir",title:"Ориентир"},{type:o.Combo,freeSolo:!0,outlined:!1,name:"metro",title:"Метро",itemList:["А. Ходжаев","Абдулла Кодирий","Алишер Навоий","Амир Темур хиёбони","Беруний","Бобур","Бодомзор","Буюк Ипак йули","Гофур Гулом","Дружба народов","Дустлик","Жанубий","Космонавтлар","Машинасозлар","Миллий бог","Мингурик","Минор","Мирзо Улугбек","Мустакиллик майдони","Новза","Ойбек","Олмазор","Отчопар","Пахтакор","Пушкинская","Сергели","Тинчлик","Тошкент","Тукимачи","Туркистон","Турсунзода","Узбекистон","Усмон Носыр","Файзулла Ходжаев","Хамид Олимжон","Чилонзор","Чорсу","Чош-тепа","Шахристан","Эхтиром","Юнус Ражабий","Юнусабад"]},{type:o.Text,outlined:!1,name:"kolichestvo_sotok",title:"Количество соток"},{type:o.Items,freeSolo:!1,outlined:!1,name:"vid_liczenzii",title:"Вид лицензии",itemList:["Коммерческая","Жилая"]},{type:o.Text,outlined:!1,inputRows:4,name:"primechanie",title:"Примечание"},{type:o.Combo,outlined:!1,name:"kategoriya_obekta",title:"Категория объекта",itemList:["Жилая","Коммерческая","От застройщика"]},{type:o.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>Ee(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок","Здания","Базы"]},{type:o.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>!Ee(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок"]},{type:o.Combo,outlined:!1,name:"nomer_agenstva",itemList:async()=>{const e=await bs.dictService.getAgencyMap();return Object.keys(e)},tr:async e=>{const t=await bs.dictService.getAgencyMap();return h.get(t,e)||""},title:"Номер агенства"},{type:o.Combo,outlined:!1,name:"nomer_agenta",itemList:async()=>{const e=await bs.dictService.getAgentMap();return Object.keys(e)},tr:async e=>{const t=await bs.dictService.getAgentMap();return h.get(t,e)||""},title:"Номер агента"}]},{type:o.Group,columns:"6",fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>e.apartment_images&&e.apartment_images.length,fields:[{type:o.Component,sx:{mb:2},element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})},{type:o.Component,element:Rs}]}]}]}];window.advertising_fields=Ps;const Es=[".","-",'"',"'",",","(",")"],Ns=e=>{const t=e=>"#"+Ue(e.split(" ").join("_").split("/").join("_"),...Es);return e.includes(", ")?e.split(", ").map(t).join(", "):t(e)},Os={"Категория объекта":"📌","Подкатегория объекта":"📌","Название ЖК":"👷","Тип недвижимости":"🏗️","Район":"📍","Адрес":"🛣️","Ориентир":"🚏","Метро":"🚊","Количество комнат":"🚪","Количество спален":"🛏️","Количество соток":"🏡","Этаж":"🪜","Этажность":"🏢","Бассейн":"🏊","Общая площадь М²":"📐","Площадь дома М²":"📐","Состояние ремонта":"⚒️","Назначение объекта":"✅","Расположение объекта":"🏫","Состояние объекта":"📊","Примечание":"💡","Тип сделки":"🔹"},Us={etazh:{1:Ns("Первый этаж"),2:Ns("Второй этаж"),3:Ns("Третий этаж"),4:Ns("Четвертый этаж"),5:Ns("Пятый этаж"),6:Ns("Шестой этаж"),7:Ns("Седьмой этаж"),8:Ns("Восьмой этаж"),9:Ns("Девятый этаж"),10:Ns("Десятый этаж"),11:Ns("Одиннадцатый этаж"),12:Ns("Двенадцатый этаж"),13:Ns("Тринадцатый этаж"),14:Ns("Четырнадцатый этаж"),15:Ns("Пятнадцатый этаж"),16:Ns("Шестнадцатый этаж"),17:Ns("Семнадцатый этаж"),18:Ns("Восемнадцатый этаж"),19:Ns("Девятнадцатый этаж"),20:Ns("Двадцатый этаж"),21:Ns("Двадцать первый этаж"),22:Ns("Двадцать второй этаж"),23:Ns("Двадцать третий этаж"),24:Ns("Двадцать четвертый этаж"),25:Ns("Двадцать пятый этаж"),26:Ns("Двадцать шестой этаж"),27:Ns("Двадцать седьмой этаж"),28:Ns("Двадцать восьмой этаж"),29:Ns("Двадцать девятый этаж"),30:Ns("Тридцатый этаж")},etazhnost:{1:Ns("Одноэтажный"),2:Ns("Двухэтажный"),3:Ns("Трехэтажный"),4:Ns("Четырехэтажный"),5:Ns("Пятиэтажный"),6:Ns("Шестиэтажный"),7:Ns("Семиэтажный"),8:Ns("Восьмиэтажный"),9:Ns("Девятиэтажный"),10:Ns("Десятиэтажный"),11:Ns("Одиннадцатиэтажный"),12:Ns("Двенадцатиэтажный"),13:Ns("Тринадцатиэтажный"),14:Ns("Четырнадцатиэтажный"),15:Ns("Пятнадцатиэтажный"),16:Ns("Шестнадцатиэтажный"),17:Ns("Семнадцатиэтажный"),18:Ns("Восемнадцатиэтажный"),19:Ns("Девятнадцатиэтажный"),20:Ns("Двадцатиэтажный")},kolichestvo_komnat:{1:Ns("Одна комната"),2:Ns("Две комнаты"),3:Ns("Три комнаты"),4:Ns("Четыре комнаты"),5:Ns("Пять комнат"),6:Ns("Шесть комнат"),7:Ns("Семь комнат"),8:Ns("Восемь комнат"),9:Ns("Девять комнат"),10:Ns("Десять комнат"),11:Ns("Одиннадцать комнат"),12:Ns("Двенадцать комнат"),13:Ns("Тринадцать комнат"),14:Ns("Четырнадцать комнат"),15:Ns("Пятнадцать комнат"),16:Ns("Шестнадцать комнат"),17:Ns("Семнадцать комнат"),18:Ns("Восемнадцать комнат"),19:Ns("Девятнадцать комнат"),20:Ns("Двадцать комнат"),21:Ns("Двадцать одна комната"),22:Ns("Двадцать две комнаты"),23:Ns("Двадцать три комнаты"),24:Ns("Двадцать четыре комнаты"),25:Ns("Двадцать пять комнат")}},Hs=e=>t=>(t=String(t),"Метро"===e&&(t=Ns(t)),"Район"===e&&(t=Ns(t)),"Адрес"===e&&(t=Ns(t)),"Состояние ремонта"===e&&(t=Ns(t)),"Тип недвижимости"===e&&(t=Ns(t)),"Название ЖК"===e&&(t=Ns(t)),"Категория объекта"===e&&(t=Ns(t)),"Подкатегория объекта"===e&&(t=Ns(t)),"Состояние объекта"===e&&(t=Ns(t)),"Назначение объекта"===e&&(t=Ns(t)),"Расположение объекта"===e&&(t=Ns(t)),"Местоположение объекта"===e&&(t=Ns(t)),"Бассейн"===e&&(t=Ns(t)),"Тип сделки"===e&&(t=Ns(t)),t),Ws=(e,t,i)=>{const{isVisible:a=(()=>!0)}=e;if(!a(t,i)){if(e.fields)for(const a of e.fields)a.isVisible=()=>!1,Ws(a,t,i);e.child&&(e.child.isVisible=()=>!1,Ws(e.child,t,i))}},$s=async(e,t,i)=>{let a="";e.zagolovok_dlya_reklamy&&(a+="🏛️ <b>".concat(e.zagolovok_dlya_reklamy,"</b>\n\n")),a+=await(async(e,t)=>{let i="",a=h.cloneDeep(qs);a=te(a),a.forEach((i=>Ws(i,e,t)));for(const{title:o,isVisible:l=(()=>!0),compute:n}of a)l(e,t)&&n&&o&&"Заголовок для рекламы"!==o&&"Номер агента"!==o&&"Номер агенства"!==o&&(i+="".concat(Os[o]||"➡️"," <b>").concat(o,":</b> ").concat(Hs(o)(await n(e,{})),"\n"),"Метро"===o&&(i+="\n"),"Состояние ремонта"===o&&(i+="\n"));return i})(e,i);const o=await bs.dictService.getAgentMapRaw(),l=await bs.dictService.getAgencyMapRaw();if(e.nomer_agenstva){const{phone:t,telegram:i}=h.get(l,e.nomer_agenstva);a+="\n<b>Агенство:</b>\n",a+="📲 <a href='tel:".concat(t,"'>").concat(t,"</a>\n"),a+="📩 <a href='https://t.me/".concat(i,"'>").concat(i,"</a>\n")}if(e.nomer_agenta){const{phone:t,telegram:i}=h.get(o,e.nomer_agenta);a+="\n<b>Агент:</b>\n",a+="📲 <a href='tel:".concat(t,"'>").concat(t,"</a>\n"),a+="📩 <a href='https://t.me/".concat(i,"'>").concat(i,"</a>\n")}a+="\n";const n=[];Object.entries(e).forEach((([e,t])=>{const i=h.get(Us,e);i&&n.push(h.get(i,t))})),e.apartment_id&&(a+=await(async e=>{const t=await bs.apartmentViewService.read(e);let i="";const a=e=>"uzs"===e?"сум":"у.е.";let o=!1;return Ee(t.kategoriya_obekta,"Коммерческая")?(t.prodazha&&t.prod_kom_startovaya_czena&&(i+="💵 <b>Продажа:</b> ".concat(t.prod_kom_startovaya_czena," ").concat(a(t.prod_kom_startovaya_czena_valyuta),"\n"),o=!0),t.arenda&&t.rent_kom_startovaya_czena&&(i+="🔑 <b>В аренду:</b> ".concat(t.rent_kom_startovaya_czena," ").concat(a(t.rent_kom_startovaya_czena_valyuta)),t.rent_kom_komissiya_agenstva&&(i+=" (Есть комиссия)"),i+="\n",o=!0)):Ee(t.kategoriya_obekta,"Жилая","От застройщика")&&(t.prodazha&&t.prod_startovaya_czena&&(i+="💵 <b>Продажа:</b> ".concat(t.prod_startovaya_czena," ").concat(a(t.prod_startovaya_czena_valyuta),"\n"),o=!0),t.arenda&&t.rent_startovaya_czena&&(i+="🔑 <b>В аренду:</b> ".concat(t.rent_startovaya_czena," ").concat(a(t.rent_startovaya_czena_valyuta)),t.rent_komissiya_agenstva&&(i+=" (Есть комиссия)"),i+="\n",o=!0)),o&&(i+="\n\n"),i})(e.apartment_id));const r={YouTube:await bs.dictService.getYoutubePrimaryLink(),Instagram:await bs.dictService.getInstagramPrimaryLink(),Facebook:await bs.dictService.getFacebookPrimaryLink(),Telegram:await bs.dictService.getTelegramPrimaryLink()};return a+=Object.entries(r).filter((([,e])=>e)).map((([e,t])=>"<a href='".concat(t,"'>").concat(e,"</a>"))).join(" | "),a+="\n\n",a+=n.filter((e=>e)).join(" "),a},Gs=[{type:o.Combo,outlined:!1,name:"telegram_channel",itemList:async()=>{const e=await bs.dictService.getTelegramMap();return Object.keys(e)},tr:async e=>{const t=await bs.dictService.getTelegramMap();return h.get(t,e)||""},title:"Канал Telegram"}],Ys=[{type:He.Link,isVisible:()=>!!bs.routerService.previousPath,action:"list-action",label:he(De,{sx:{display:"block"}})},{type:He.Link,action:"list-action",label:"База объектов"},{type:He.Link,action:"list-action",label:"Просмотр рекламы"},{type:He.Button,isDisabled:({payload:{permissions:e}})=>!e.hasAdvertisingPublicationPermission,action:"publish-action",label:"Опубликовать в канал"},{type:He.Button,action:"edit-action",label:"Редактировать"}],Ks=[{id:"apartments",label:"Объекты"},{id:"bids",label:"Заявки"},{id:"contact",label:"Контакт"},{id:"service_comment",label:"Служебный комментарий"}],Xs=Fs()((e=>({root:{["& .".concat("react-declatative__master-detail-header")]:{position:"sticky",top:0,background:"white",marginBottom:e.spacing(1)}}}))),Js=({children:e,payload:t,history:i})=>{const{classes:a}=Xs(),[o,l]=ue.useState((()=>Zm(i)));return he(fe,{className:a.root,activeOption:o,withTransparentTabs:!0,withMenuCollapse:!0,payload:t,mode:j.Tabs,options:Ks,onActiveOptionChange:(e,t)=>{t||("apartments"===e&&i.replace("/contact/apartments"),"bids"===e&&i.replace("/contact/bids"),"contact"===e&&i.replace("/contact/contact"),"parameter"===e&&i.replace("/contact/parameter"),"service_comment"===e&&i.replace("/contact/service_comment"),"documents"===e&&i.replace("/contact/documents"),l(e))},children:e})},Zs=()=>et(bs.userViewService.paginate,{onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),fallback:bs.errorService.handleGlobalError}),Qs=Se.createLoader(28),ed=[{type:o.Text,outlined:!0,name:"email",title:"Email"},{type:o.Text,outlined:!0,name:"phone",title:"Телефон"}],td=[{type:tt.Component,sortable:!1,headerName:"Аватар",width:()=>65,element:({avatar:e,email:t})=>he(Le,{Loader:Qs,children:async()=>{const i=e?await bs.appwriteService.getImageURL(e):"";return he(Te,{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:he(it,{src:i||void 0,alt:t})})}})},{type:tt.Compute,sortable:!1,headerName:"Имя",compute:({first_name:e="",last_name:t="",middle_name:i=""})=>[e,t,i].filter((e=>e.length)).join(" ")||"Unset",width:e=>Math.max(e/3-65,200)},{type:tt.Compute,sortable:!1,compute:({phone:e})=>e||"Unset",field:"phone",headerName:"Телефон",width:e=>Math.max(e/3-65,200)},{type:tt.Compute,sortable:!1,compute:({email:e})=>e||"Unset",field:"email",headerName:"Email",width:e=>Math.max(e/3-65,200)}],id=({payload:e})=>{const t=Zs(),i=Ve(),{pickData:a,render:o,open:l}=at({title:"Выбрать сотрудника",withSearch:!0,withLoader:!0,slots:{FilterListSlot:ot},AfterTitle:({onClose:e})=>he(Be,{size:"small",onClick:e,children:he(Ye,{})}),noInitialFilters:!0,fetchDebounce:el,reloadSubject:bs.userViewService.reloadSubject,selectionMode:lt.Single,onSubmit:e=>(i.next(e),!0),filterLabel:"Выбрать сотрудника",filters:ed,columns:td,handler:t,payload:e});return{pickData:a,render:o,resultSubject:i,open:l}},ad=Fs()({container:{alignItems:"center",backgroundColor:"#F7F7F7",border:"1px solid #ECECEC",boxShadow:"0 4px 16px 0px rgba(0,0,0,0.2)",display:"flex",gap:8,justifyContent:"stretch",minHeight:"72px",padding:"10px 24px",borderRadius:"0 0 8px 8px"},textInput:{flex:1,"& textarea::-webkit-scrollbar":{display:"none"}},contained:{color:"#FFFFFF",backgroundColor:"#3578E5","&:hover":{backgroundColor:"#3578E5"}}}),od=[{type:o.Choose,fieldBottomMargin:"3",fieldRightMargin:"0",choose:async(e,t)=>{t.pickData(e.user_id?[e.user_id]:[]);const i=await t.resultSubject.toPromise();if(i&&i.length){const[e]=i;return e}return null},tr:async e=>{const t=await bs.userViewService.tryRead(e);return[null==t?void 0:t.last_name,null==t?void 0:t.first_name,null==t?void 0:t.middle_name].filter((e=>e)).join(" ")||(null==t?void 0:t.$id)||""},name:"user_id",title:"",placeholder:"Кому"},{type:o.Text,fieldBottomMargin:"0",fieldRightMargin:"0",placeholder:"Введите сообщение",inputRows:3,labelShrink:!0,name:"comment",title:""}],ld=()=>{const e=m_(),t=vs("id");if(e&&t){if(e.path.includes("apartment"))return"/apartment_view/".concat(t,"/service_comment");if(e.path.includes("bid"))return"/bid_view/".concat(t,"/service_comment")}return""},nd=({addMessage:e=(()=>null),addFile:t=(()=>null),payload:i})=>{const{classes:a}=ad(),[o,l]=ue.useState(""),{pickData:n,render:r,resultSubject:s}=id({payload:i}),{handleLoadStart:d,handleLoadEnd:c,loading:m}=$e({history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)}),p=We({large:!0,title:"Уведомить сотрудника",fields:od,payload:{pickData:n,resultSubject:s}});return he("div",{className:a.container,children:[he(nt,{className:a.textInput,readOnly:m,value:o,onChange:({target:e})=>l(e.value),placeholder:"Введите комментарий",multiline:!0,maxRows:5}),he(rt,{condition:async()=>(await bs.permissionService.getPermissions()).hasUserServiceCommentMentionPermission,children:he(st,{disabled:m,onClick:async()=>{const t=await p().toPromise();if(!t)return;if(!t.user_id||!t.comment)return void bs.alertService.notify("Укажите получателя и сообщение");const{user_id:i,comment:a}=t,{first_name:o}=await bs.userViewService.read(i),n=['<blank-link href="/user_view/'.concat(i,'">@').concat(o,"</blank-link>"),a].join("\n");await bs.notifyViewService.create({title:"Вас упомянули в служебном комментарии",user_id:i,url:ld()}),await e(n),l("")},onLoadStart:d,onLoadEnd:c,children:he(dt,{})})}),he(rt,{condition:async()=>(await bs.permissionService.getPermissions()).hasUserServiceCommentAddingFilePermission,children:he(st,{disabled:m,onClick:async()=>{const i=await ct();if(i){for(const e of i){const i=await bs.appwriteService.uploadFile(e);await t(o,i)}o&&await e(o),l("")}},onLoadStart:d,onLoadEnd:c,children:he(mt,{})})}),he(pt,{disabled:m,className:a.contained,onClick:async()=>{o&&(await e(o),l(""))},onLoadStart:d,onLoadEnd:c,variant:"contained",size:"large",children:he(ut,{children:he(ht,{})})}),r()]})},rd={allowCustomElements:!0,allowElements:["text-underline","blank-link"],allowAttributes:{href:["blank-link"]}},sd=Fs()(((e,t,i)=>({newMessage:{backgroundColor:"#3578E5",borderRadius:"8px",color:"#FFFFFF",display:"flex",fontFamily:"Roboto, sans-serif",padding:12,paddingRight:0,width:"65%","& pre":{margin:0}},newFile:{backgroundColor:"#3578E5",overflow:"hidden",borderRadius:"8px",color:"#FFFFFF",display:"flex",fontFamily:"Roboto, sans-serif",width:"65%"},newMessageContainer:{display:"flex",flex:"0 0 auto",justifyContent:"flex-end",width:"100%",paddingBottom:"12px"},receivedMessage:{backgroundColor:"#FFFFFF",borderRadius:"8px",display:"flex",padding:12,paddingRight:0,fontFamily:"Roboto, sans-serif",width:"65%"},recievedFile:{backgroundColor:"#FFFFFF",overflow:"hidden",borderRadius:"8px",display:"flex",fontFamily:"Roboto, sans-serif",width:"65%"},receivedMessageContainer:{display:"flex",flex:"0 0 auto",justifyContent:"flex-start",flexDirection:"row-reverse",width:"100%",paddingBottom:"12px","& pre":{margin:0}},receivedMessageSender:{paddingRight:10,paddingTop:5},stretch:{flex:1},copy:{width:"100%",alignItems:"flex-start !important"}}))),dd=({sessionData:e})=>{const{classes:t}=sd(),{handleLoadStart:i,handleLoadEnd:a}=$e({history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)}),{execute:o}=be((async()=>{if(e.fileId){const t=await bs.appwriteService.getFileURL(e.fileId),i=await bs.appwriteService.readFileName(e.fileId);yt(t,i)}}),{onLoadStart:i,onLoadEnd:a});return he("div",{children:e.userId===bs.appwriteService.currentUser.$id?he("div",{className:t.newMessageContainer,children:e.fileId?he(bt,{disablePadding:!0,className:t.newFile,onClick:()=>o(),children:he(Me,{children:[he(_t,{children:he(it,{children:he(vt,{})})}),he(ft,{primary:e.fileName||"Файл"})]})}):he("div",{className:t.newMessage,children:he(gt,{onCopyClick:()=>bs.alertService.notify("Сообщение скопировано в буфер обмена"),className:t.copy,sx:{"& svg":{color:"white"}},content:kt.sanitize(e.message),children:he("pre",{children:he(kt,{config:rd,handler:()=>e.message})})})})}):he("div",{className:t.receivedMessageContainer,children:[he("div",{className:t.stretch}),e.fileId?he(bt,{disablePadding:!0,className:t.recievedFile,onClick:()=>o(),children:he(Me,{children:[he(_t,{children:he(it,{children:he(vt,{})})}),he(ft,{primary:e.fileName||"Файл"})]})}):he("div",{className:t.receivedMessage,children:he(gt,{onCopyClick:()=>bs.alertService.notify("Сообщение скопировано в буфер обмена"),className:t.copy,content:kt.sanitize(e.message),children:he("pre",{children:he(kt,{config:rd,handler:()=>e.message})})})}),he("div",{className:t.receivedMessageSender,children:he(wt,{title:e.displayName,children:he(it,{src:e.avatar,style:{height:28,width:28}})})})]})})},cd=Fs()({container:{backgroundColor:"#F0F0F0",borderRadius:"8px",overflow:"hidden",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"stretch",height:"100%",width:"100%"},content:{padding:"8px",flex:1}}),md=({className:e,style:t,messages:i,payload:a,onText:o,onFile:l})=>{const{classes:n,cx:r}=cd(),s=ue.useMemo((()=>(null==i?void 0:i.length)?i[(null==i?void 0:i.length)-1]:null),[i]),d=ue.useCallback(((e=!1)=>{const t=bs.appwriteService.currentUser.$id;return!(!e&&(null==s?void 0:s.userId)!==t)&&"auto"}),[s]),c=ue.useCallback(((e,t)=>he(dd,{sessionData:t},"".concat(t.id,"-").concat(e))),[]);return he("div",{className:r(n.container,e),style:t,children:[he("div",{className:n.content,children:he(St,{data:i,followOutput:d,initialTopMostItemIndex:null==i?void 0:i.length,itemContent:c,computeItemKey:e=>{const t=i[e];return(null==t?void 0:t.id)||u()}})}),he(nd,{payload:a,addMessage:o,addFile:l})]})},pd=[{action:"edit-action",label:"Редактировать"},{action:"remove-action",label:"Удалить"}],ud=({id:e,name:t,phone:i,sx:a,onChange:l,onRemove:n})=>{const r=zt({title:"Удалить",msg:"Вы уверены что хотите удалить?"}),s=We({title:"Редактировать номер",fields:[{type:o.Text,name:"name",title:"Имя",isInvalid:({name:e})=>e?null:"Укажите имя"},{type:o.Text,name:"phone",title:"Телефон",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",isInvalid:({phone:e})=>e?null:"Укажите телефон"}]}),d=()=>s({handler:{id:e,name:t,phone:i}}).then((t=>{t&&l({id:e,name:t.name,phone:t.phone})}));return he(bt,{sx:a,disablePadding:!0,dense:!0,children:he(Me,{disableRipple:!0,onClick:d,children:[he(_t,{children:he(it,{sx:{"& svg":{color:"#aaa !important"},background:"transparent"},children:he(Vt,{})})}),he(ft,{primary:"Имя: ".concat(t),secondary:"Телефон: ".concat(i)}),he(xt,{sx:{mr:1},transparent:!0,options:pd,onAction:a=>{"edit-action"===a&&d(),"remove-action"===a&&(async()=>{await r().toPromise()&&n({id:e,name:t,phone:i})})()}})]})})},hd=({contact_phones:e,contact_names:t})=>{e=e||[],t=t||[];const i=[];for(let a=0;a!==t.length;a++)i.push({id:u(),name:t[a],phone:e[a]});return i},yd=({contact_phones:e,contact_names:t,onChange:i})=>{const[a,l]=ue.useState((()=>hd({contact_phones:e,contact_names:t}))),{resetWatcher:n}=At((()=>{var e;i({contact_names:(e=a)?e.map((({name:e})=>e)):null,contact_phones:e?e.map((({phone:e})=>e)):null})}),[a]);ue.useEffect((()=>{const i=hd({contact_names:t,contact_phones:e});n(),l(i)}),[t,e]);const r=We({title:"Создание номера",fields:[{type:o.Text,sx:{mt:-2},name:"name",title:"Имя",isInvalid:({name:e})=>e?null:"Укажите имя"},{type:o.Text,name:"phone",title:"Телефон",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",isInvalid:({phone:e})=>e?null:"Укажите телефон"}]});return he(Te,{style:{display:"flex",flexDirection:"column",overflowY:"auto",marginRight:"1px",minHeight:275},children:[he(Pe,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:1},children:[he(Ne,{sx:{ml:2,mt:1},variant:"h6",fontWeight:"bold",children:"Список номеров телефонов"}),he(Be,{sx:{mr:3,mt:1},onClick:()=>r().then((e=>{e&&l((t=>[...t,{...e,id:u()}]))})),children:he(Tt,{})})]}),he(Ct,{dense:!0,disablePadding:!0,children:a.map(((e,t)=>he(ud,{sx:{...t%2==0&&{background:"#ccc2"}},id:e.id,name:e.name,phone:e.phone,onChange:e=>l((t=>t.map((t=>t.id===e.id?e:t)))),onRemove:({id:e})=>l((t=>t.filter((t=>t.id!==e))))})))}),he(Te,{sx:{flex:1}})]})},bd="Вы уверены, что хотите удалить файл?",_d="Подтверждение",vd=Se.createLoader(24),fd=e=>e&&"Физическое лицо"!==e?{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Основная информация"})},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"kontakt"),name:"kontakt",title:"Контакт"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"naimenovanie_organizaczii"),name:"naimenovanie_organizaczii",title:"Наименование организации"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"fio"),name:"fio",title:"Ф.И.О."},{type:o.Text,description:"Основной",features:["hasContactNumberPermission"],outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",isVisible:e=>Ds(e,"telefon"),name:"telefon",title:"Телефон"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"tip_klienta"),name:"tip_klienta",title:"Тип клиента"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"status_klienta"),name:"status_klienta",title:"Статус клиента"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"loyalnost_klienta"),name:"loyalnost_klienta",title:"Лояльность клиента"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"data-sozdaniya_klienta"),name:"data-sozdaniya_klienta",title:"Дата создания клиента"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"fakticheskij_adres"),name:"fakticheskij_adres",title:"Фактический адрес"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"email"),name:"email",title:"Email"},{type:o.Fragment,isVisible:()=>{let e=!0;return e=e&&!bs.routerService.location.pathname.includes("bid_view"),e=e&&!bs.routerService.location.pathname.includes("bid_edit"),e},fields:[{type:o.Component,fieldBottomMargin:"1",isVisible:e=>Ds(e,"kadastrovyj-nomer_obekta","kadastrovyj-nomer_zemli"),element:()=>he(Ne,{variant:"subtitle2",fontWeight:"bold",sx:{textDecoration:"underline",mt:2,mb:1},children:"Кадастр"})},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"kadastrovyj-nomer_obekta"),name:"kadastrovyj-nomer_obekta",title:"Кадастровый номер объекта"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"kadastrovyj-nomer_zemli"),name:"kadastrovyj-nomer_zemli",title:"Кадастровый номер земли"}]}]}:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"0",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Основная информация"})},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"kontakt"),name:"kontakt",title:"Контакт"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"fio"),name:"fio",title:"Ф.И.О."},{type:o.Text,description:"Основной",features:["hasContactNumberPermission"],outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",isVisible:e=>Ds(e,"telefon"),name:"telefon",title:"Телефон"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"tip_klienta"),name:"tip_klienta",title:"Тип клиента"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"status_klienta"),name:"status_klienta",title:"Статус клиента"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"loyalnost_klienta"),name:"loyalnost_klienta",title:"Лояльность клиента"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"data-sozdaniya_klienta"),name:"data-sozdaniya_klienta",title:"Дата создания клиента"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"fakticheskij_adres"),name:"fakticheskij_adres",title:"Фактический адрес"},{type:o.Text,isVisible:e=>Ds(e,"email"),outlined:!1,name:"email",title:"Email"},{type:o.Fragment,isVisible:()=>{let e=!0;return e=e&&!bs.routerService.location.pathname.includes("bid_view"),e=e&&!bs.routerService.location.pathname.includes("bid_edit"),e},fields:[{type:o.Component,fieldBottomMargin:"1",isVisible:e=>Ds(e,"kadastrovyj-nomer_obekta","kadastrovyj-nomer_zemli"),element:()=>he(Ne,{variant:"subtitle2",fontWeight:"bold",sx:{textDecoration:"underline",mt:2,mb:1},children:"Кадастр"})},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"kadastrovyj-nomer_obekta"),name:"kadastrovyj-nomer_obekta",title:"Кадастровый номер объекта"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"kadastrovyj-nomer_zemli"),name:"kadastrovyj-nomer_zemli",title:"Кадастровый номер земли"}]}]},gd=e=>e&&"Физическое лицо"!==e?{type:o.Paper,isVisible:e=>Ds(e,"seriya-i-nomer_pasporta","data_rozhdeniya","pol","data-vydachi_pasporta","kem_vydan","adres_registraczii","pinfl","inn","dolzhnost_rukovoditelya","osnovanie-deyatelnosti-dannogo_licza","yuridicheskij_adres","sertifikat_kompanii","rekvizity"),fieldBottomMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Паспортные данные"})},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"seriya-i-nomer_pasporta"),name:"seriya-i-nomer_pasporta",title:"Серия и номер паспорта"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"data_rozhdeniya"),name:"data_rozhdeniya",title:"Дата рождения"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"pol"),name:"pol",title:"Пол"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"data-vydachi_pasporta"),name:"data-vydachi_pasporta",title:"Дата выдачи паспорта"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"kem_vydan"),name:"kem_vydan",title:"Кем выдан"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"adres_registraczii"),name:"adres_registraczii",title:"Адрес регистрации"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"pinfl"),name:"pinfl",title:"ПИНФЛ"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"inn"),name:"inn",title:"ИНН"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"dolzhnost_rukovoditelya"),name:"dolzhnost_rukovoditelya",title:"Должность руководителя"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"osnovanie-deyatelnosti-dannogo_licza"),name:"osnovanie-deyatelnosti-dannogo_licza",title:"Основание деятельности данного лица"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"yuridicheskij_adres"),name:"yuridicheskij_adres",title:"Юридический адрес"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"sertifikat_kompanii"),name:"sertifikat_kompanii",title:"Сертификат компании (Гувохнома)"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"rekvizity"),name:"rekvizity",title:"Реквизиты"}]}:{type:o.Paper,isVisible:e=>Ds(e,"seriya-i-nomer_pasporta","data_rozhdeniya","pol","data-vydachi_pasporta","kem_vydan","adres_registraczii","pinfl","inn","rekvizity"),fieldBottomMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Паспортные данные"})},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"seriya-i-nomer_pasporta"),name:"seriya-i-nomer_pasporta",title:"Серия и номер паспорта"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"data_rozhdeniya"),name:"data_rozhdeniya",title:"Дата рождения"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"pol"),name:"pol",title:"Пол"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"data-vydachi_pasporta"),name:"data-vydachi_pasporta",title:"Дата выдачи паспорта"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"kem_vydan"),name:"kem_vydan",title:"Кем выдан"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"adres_registraczii"),name:"adres_registraczii",title:"Адрес регистрации"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"pinfl"),name:"pinfl",title:"ПИНФЛ"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"inn"),name:"inn",title:"ИНН"},{type:o.Text,outlined:!1,isVisible:e=>Ds(e,"rekvizity"),name:"rekvizity",title:"Реквизиты"}]},kd=e=>"desktop"===e?{type:o.Paper,features:["hasContactNumberPermission"],fieldRightMargin:"0",innerPadding:"0",tabletHidden:!0,phoneHidden:!0,isVisible:e=>Ds(e,"contact_phones","contact_names"),child:{type:o.Component,element:yd}}:{type:o.Paper,features:["hasContactNumberPermission"],fieldBottomMargin:"1",innerPadding:"0",desktopHidden:!0,isVisible:e=>Ds(e,"contact_phones","contact_names"),child:{type:o.Component,element:yd}},wd=e=>e&&"Физическое лицо"!==e?[{type:o.Paper,fieldBottomMargin:"1",sx:{padding:"0 !important"},isVisible:e=>e.contact_files&&e.contact_files.length,child:{type:o.Component,element:({contact_files:e,onChange:t,readonly:i})=>{const a=zt({title:_d,msg:bd});return he(Ct,{sx:{pointerEvents:"all"},children:null==e?void 0:e.map(((o,l)=>he(bt,{disableGutters:!0,secondaryAction:he(st,{disabled:i,onClick:()=>{const i=Ft(e)||[];a().then((e=>{e&&t({contact_files:i.filter((e=>e!==o))})}))},children:he(Lt,{})}),children:he(Me,{onClick:async()=>{const e=await bs.appwriteService.getFileURL(o),t=await bs.appwriteService.readFileName(o);yt(e,t)},children:he(Le,{payload:o,Loader:vd,children:async e=>{const t=await bs.appwriteService.readFileName(e);return he(ft,{primary:t})}})})},"".concat(o,"-").concat(l))))})}}}]:[{type:o.Paper,fieldBottomMargin:"1",sx:{padding:"0 !important"},isVisible:e=>e.contact_files&&e.contact_files.length,child:{type:o.Component,element:({contact_files:e,onChange:t,readonly:i})=>{const a=zt({title:_d,msg:bd});return he(Ct,{sx:{pointerEvents:"all"},children:null==e?void 0:e.map(((o,l)=>he(bt,{disableGutters:!0,secondaryAction:he(st,{disabled:i,onClick:()=>{const i=Ft(e)||[];a().then((e=>{e&&t({contact_files:i.filter((e=>e!==o))})}))},children:he(Lt,{})}),children:he(Me,{onClick:async()=>{const e=await bs.appwriteService.getFileURL(o),t=await bs.appwriteService.readFileName(o);yt(e,t)},children:he(Le,{payload:o,Loader:vd,children:async e=>{const t=await bs.appwriteService.readFileName(e);return he(ft,{primary:t})}})})},"".concat(o,"-").concat(l))))})}}}],Sd=[{type:o.Init,name:"contact_phones",defaultValue:null},{type:o.Init,name:"contact_names",defaultValue:null},{type:o.Fragment,isVisible:e=>!e.kontakt||!!Ee(e.kontakt,"Физическое лицо"),fields:[{type:o.Group,fieldBottomMargin:"0",fieldRightMargin:"1",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",phoneHidden:!0,tabletHidden:!0,fields:[fd("Физическое лицо"),kd("desktop")]},{type:o.Group,fieldBottomMargin:"0",fieldRightMargin:"0",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",desktopHidden:!0,fields:[fd("Физическое лицо"),kd("desktop")]},{type:o.Group,fieldBottomMargin:"0",fieldRightMargin:"0",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",fields:[gd("Физическое лицо"),kd("mobile"),...wd("Физическое лицо")]}]},{type:o.Fragment,isVisible:e=>!!Ee(e.kontakt,"Юридическое лицо"),fields:[{type:o.Group,fieldBottomMargin:"0",fieldRightMargin:"1",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",phoneHidden:!0,tabletHidden:!0,fields:[fd("Юридическое лицо"),kd("desktop")]},{type:o.Group,fieldBottomMargin:"0",fieldRightMargin:"0",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",desktopHidden:!0,fields:[fd("Юридическое лицо"),kd("desktop")]},{type:o.Group,fieldBottomMargin:"0",fieldRightMargin:"0",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",fields:[gd("Юридическое лицо"),kd("mobile"),...wd("Юридическое лицо")]}]}];window.contact_fields=Sd;const zd=[{type:It.Add,isDisabled:(e,{permissions:t})=>!t.hasApartmentCreatePermission,label:"Создать"},{type:It.Fab,action:"column-setup-action",icon:Mt,label:"Колонки"},{type:It.Menu,options:[{action:"add-action",isDisabled:(e,{permissions:t})=>!t.hasApartmentCreatePermission},{action:"update-now"},{action:"resort-action"},{action:"drop-filters"},{action:"excel-action",isVisible:(e,{permissions:t})=>t.hasOfficeManagerFlagPermission,label:"Скачать лист Excel",icon:jt}]}],[Vd,xd]=ge(),[Ad,Td]=ge(),Cd=(e,t)=>new Promise(((i,a)=>{e.onload=()=>{const o=document.createElement("canvas");o.width=e.height,o.height=e.width;const l=o.getContext("2d");l?(l.translate(o.width/2,o.height/2),l.rotate(t*Math.PI/180),l.drawImage(e,-e.width/2,-e.height/2),o.toBlob((e=>{e?i(e):a("there's an error")}))):a("there's an error")},e.onerror=e=>{a("there's an error"),console.error(e)}}));const Fd=Se.createLoader(96),Ld=[{action:"download-action",label:"Скачать изображение"},{action:"open-action",label:"Открыть оригинальное изображение",isVisible:({permissions:e})=>e.hasSuperAdminFlagPermission},{action:"rotate-left-action",icon:Bt,label:"Поворот влево",isVisible:e=>!e.readonly},{action:"rotate-right-action",icon:Rt,label:"Поворот вправо",isVisible:e=>!e.readonly},{action:"remove-action",isVisible:e=>!e.readonly,label:"Удалить"}],Id=Fs()((e=>({square:{position:"relative"},dragHoverActive:{background:ze(e.palette.primary.main,.5)},dragHoverInactive:{background:"#ccc"},prev:{position:"absolute",margin:"auto",left:"0",top:"0",bottom:0,zIndex:"2 !important",color:e.palette.background.paper,width:"30%"},next:{position:"absolute",margin:"auto",right:"10px",top:"10px",bottom:"5px",zIndex:"2 !important",color:e.palette.background.paper,width:"30%"},action:{zIndex:"5 !important"},defaultIcon:{position:"absolute",right:10,bottom:10,height:35,width:35,fill:"orange",background:"white",borderRadius:"50%",padding:"1.5px",zIndex:"1"},"tss-nuqny4-root":{zIndex:"5 !important"}}))),Md=({dropSubject:e,modal:t,className:i,readonly:a,image:o,images:l,payload:n,text:r,sx:s,onChange:d,onClick:c,onLoadStart:m,onLoadEnd:p,onMouseOver:u,drag:h})=>{const{classes:y}=Id(),b=zt({title:"Продолжить?",msg:"Вы собираетесь удалить файл"}),[_,v]=ue.useState(!1),[f,g]=ue.useState(!1),[k,w]=ue.useState(!1),S=Ve(e),z=Ve();ue.useEffect((()=>()=>{z.next()}),[]),ue.useEffect((()=>S.subscribe((()=>{w(!1)}))),[]);const[,V]=xd(),[,x]=Td(),{handleLoadStart:A,handleLoadEnd:T,loading:C}=$e({history:bs.routerService,onLoadStart:()=>{m&&m(),bs.layoutService.setAppbarLoader(!0)},onLoadEnd:()=>{p&&p(),bs.layoutService.setAppbarLoader(!1)}}),F=async()=>{let e=!0;A();try{const e=await async function(e,t){const i=await bs.appwriteService.getImageURL(e),a=document.createElement("img");a.src=i,a.crossOrigin="anonymous";const o=await Cd(a,90);if(!o)return t;const l=t.indexOf(e),n=await bs.appwriteService.tryReadFileName(e),r=await bs.appwriteService.uploadBlob(o,n||o.type||"unknown.png");return t[l]=r,[...t]}(o,l);d(e)}catch(t){e=!1}finally{T(e)}},L=async()=>{let e=!0;A();try{const e=await async function(e,t){const i=await bs.appwriteService.getImageURL(e),a=document.createElement("img");a.src=i,a.crossOrigin="anonymous",console.log(a.height),console.log(a.width);const o=await Cd(a,-90);if(!o)return t;const l=t.indexOf(e),n=await bs.appwriteService.tryReadFileName(e),r=await bs.appwriteService.uploadBlob(o,n||o.type||"unknown.png");return t[l]=r,[...t]}(o,l);d(e)}catch(t){e=!1}finally{T(e)}};return he(Te,{className:i,sx:s,onClick:()=>c&&c(o),children:he(xe,{draggable:h,onDragStart:()=>V(o),onDragOver:e=>{e.preventDefault(),x(o)},onDragLeave:()=>w(!1),onDragEnter:()=>w(!0),className:y.square,children:[!!Array.isArray(l)&&0===l.indexOf(o)&&he(Ae,{className:y.defaultIcon}),he(Te,{className:Ce({[y.dragHoverActive]:k,[y.dragHoverInactive]:!k}),component:"div",sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:()=>{f||v(!0)},onMouseLeave:()=>{f||v(!1)},children:[he(xt,{disabled:C,className:y.action,sx:{position:"absolute",top:10,left:10,transition:"opacity 150ms",opacity:_||u||f?1:0},payload:{...n,readonly:a},options:Ld,onAction:async e=>{if("download-action"===e&&(async()=>{const e=await bs.appwriteService.getImageURL(o),t=await Xr(e,o,r);z.once((()=>{t&&URL.revokeObjectURL(t)})),yt(t||e,"".concat(r,".png"))})(),"open-action"===e&&(async()=>{let e=!0;A();try{const e=await bs.appwriteService.getImageURL(o);Z(e)}catch(t){e=!1,bs.alertService.notify(jr(t))}finally{T(e)}})(),"remove-action"===e){await b().toPromise()&&await(()=>{const e=(Ft(l)||[]).filter((e=>e!==o));d(e.length?e:null)})()}"rotate-left-action"===e&&await L(),"rotate-right-action"===e&&await F()},onToggle:e=>{e&&v(!1),g(e)}}),he(Le,{Loader:Fd,payload:o,children:async e=>{if(!e)return he(Ie,{sx:{fontSize:96,fill:"white"}});const i=async()=>t?await bs.appwriteService.getImageURL(e):(console.log(t),await bs.previewService.getImageURL(e));let a,o;return Xo||(a=await i(),o=await Xr(a,"".concat(e,"-").concat(t?"modal":""),r),z.once((()=>{o&&URL.revokeObjectURL(o)}))),a||(a=await i()),he("img",{crossOrigin:"anonymous",loading:"lazy",alt:e,src:Xo?a:o||a,style:{objectFit:"contain",height:"100%",width:"100%",pointerEvents:"none"}})}})]})]})})},jd=Fs()((e=>({root:{position:"fixed",padding:20,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"stretch",transform:"translate(-50%, -50%)",backgroundColor:e.palette.background.paper,borderRadius:5,gap:5,top:"50%",left:"50%",width:"calc(100vmin - 60px)",height:"calc(100vmin - 60px)",outline:"none"},content:{overflow:"hidden",padding:e.spacing(1),flex:1},container:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flex:1,overflow:"hidden",paddingTop:e.spacing(1)},title:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:15,color:e.palette.text.primary},submit:{marginTop:15},disabled:{opacity:.5,pointerEvents:"none"},indicatorTransparent:{height:6,background:e.palette.primary.main},tabRootTransparent:{minHeight:54,height:54},tabsRoot:{minHeight:54,height:54,marginLeft:"0 !important",marginRight:"0 !important"},prev:{position:"absolute",margin:"auto",left:"10px",top:"10px",bottom:"5px",zIndex:"2 !important",color:e.palette.background.paper,width:"30%"},next:{position:"absolute",margin:"auto",right:"10px",top:"10px",bottom:"5px",zIndex:"2 !important",color:e.palette.background.paper,width:"30%"},icon_border:{border:"1px solid black"}}))),Bd=({_fieldData:e,payload:t,onChange:i})=>{var a;const[o,l]=ue.useState(""),[n,r]=ue.useState(!1),s=(null==(a=e.apartment_images)?void 0:a.length)||0,[d,c]=ue.useState(0),[m,p]=ue.useState(!1),[u,h]=ue.useState(0),[y,b]=ue.useState(!1);ue.useEffect((()=>{const t=e.apartment_images;c(Array.isArray(t)?t.indexOf(o):0)}),[o]);const{classes:_}=jd(),v=()=>{u||(l(""),c(0),p(!1))},f=()=>{h((e=>e+1))},g=()=>{h((e=>e-1))},k=t=>{t.preventDefault(),t.stopPropagation(),l(e.apartment_images[d+1])},w=t=>{t.preventDefault(),t.stopPropagation(),l(e.apartment_images[d-1])};return{render:()=>he(qe,{open:m,onClose:v,sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center","& .MuiBackdrop-root":{background:ze("#000",.5)}},children:he("div",{className:_.root,onMouseEnter:()=>{r(!0)},onMouseLeave:()=>{r(!1)},onClick:()=>p(!1),children:he("div",{className:_.container,children:[he(Me,{className:_.prev,onClick:w,disabled:0===d,onMouseOver:()=>b(!0),onMouseLeave:()=>b(!1)}),he(Me,{className:_.next,onClick:k,disabled:d===s-1,onMouseOver:()=>b(!0),onMouseLeave:()=>b(!1)}),he(Md,{modal:!0,onLoadEnd:g,onLoadStart:f,className:_.content,images:e.apartment_images,text:"№".concat(e.index),payload:t,onChange:i,image:o,readonly:!0,drag:!1,onMouseOver:y}),s>1&&he(Te,{sx:{position:"absolute",left:0,bottom:0,width:"100%",height:75,display:"flex",alignItems:"space-beetween",justifyContent:"center",transition:"opacity 150ms",opacity:n?1:0},children:he(je,{onClick:e=>{e.preventDefault(),e.stopPropagation()},steps:s,position:"static",activeStep:d,nextButton:he(Be,{size:"small",sx:{ml:1},onClick:k,disabled:d===s-1,children:he(Re,{})}),backButton:he(Be,{size:"small",sx:{mr:1},onClick:w,disabled:0===d,children:he(De,{})}),sx:{height:"45px",backdropFilter:"blur(20px)",backgroundColor:"#00000012",borderRadius:"25px",zIndex:"1000"}})})]})})}),handleNext:k,handleBack:w,pickImage:e=>{l(e),p(!0)}}},Rd=({apartment_images:e,_fieldData:t,payload:i,readonly:a,onChange:o})=>{const[l]=xd(),[n]=Td(),r=Dt(e),s=Dt(l),d=Dt(n),{pickImage:c,render:m}=Bd({_fieldData:t,payload:i,apartment_images:e,onChange:e=>{o({apartment_images:e})},readonly:a}),p=Ve();return he(_e,{children:[he(Pe,{gap:1,sx:{pointerEvents:"all"},flexWrap:"wrap",direction:"row",onDrop:()=>{(()=>{const{current:e}=r,{current:t}=s,{current:i}=d;if(!e)return;if(t==i)return;const a=e.indexOf(t),l=e.indexOf(i),n=e[a];e[a]=e[l],e[l]=n,o({apartment_images:e})})(),p.next()},children:null==e?void 0:e.map(((e,l)=>he(Md,{sx:{width:175},image:e,images:t.apartment_images,onChange:e=>{o({apartment_images:e})},text:"№".concat(t.index),dropSubject:p,drag:!a,payload:i,readonly:a,onClick:c},l)))}),m()]})},Dd=e=>he(Vd,{initialState:"",children:he(Ad,{initialState:"",children:he(Rd,{...e})})}),qd=Se.createLoader(28),Pd=e=>{const{pickImage:t,render:i}=Bd({_fieldData:e,payload:e._payload,apartment_images:e.apartment_images||[],onChange:()=>{},readonly:!0});return he(Te,{style:{height:84,width:170,display:"flex",alignItems:"center",background:"#ccc",justifyContent:"center"},onClick:e=>{e.preventDefault(),e.stopPropagation()},children:[he(Le,{Loader:qd,children:async()=>{const i=e.apartment_images?e.apartment_images[0]:null,a=i?await bs.previewService.getImageURL(i):"";return he(_e,{children:a?he("img",{crossOrigin:"anonymous",onClick:()=>{e.apartment_images&&e.apartment_images[0]&&t(e.apartment_images[0])},loading:"lazy",alt:"apartment",src:a,style:{objectFit:"cover",height:"100%",width:"100%"}}):he(Ie,{sx:{color:"white",fontSize:28}})})}}),i()]})},Ed=e=>he(Vd,{initialState:"",children:he(Ad,{initialState:"",children:he(Pd,{...e})})}),Nd=[{type:tt.Compute,sortable:!1,field:"index",description:"Номер объекта",headerName:"Номер",element:({index:e})=>he(gt,{content:e}),width:()=>100},{type:tt.Compute,sortable:!1,field:"photo",description:"Фотография объекта",headerName:"Фото",serialize:async({apartment_images:e})=>{const t=ae(e)||"";return t?await bs.appwriteService.getFileURL(t):""},width:()=>170,element:Ed},{type:tt.Compute,field:"zagolovok",description:"Заголовок объекта",headerName:"Заголовок",element:({zagolovok:e})=>he(wt,{title:e,sx:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},children:he(Ne,{variant:"body1",children:e})}),width:()=>200},{type:tt.Text,field:"kolichestvo_komnat",description:"Количество комнат у объекта",fullName:"Количество комнат",headerName:"Комнат",width:()=>60},{type:tt.Text,field:"etazh",description:"Количество этажей объекта",headerName:"Этаж",width:()=>60},{type:tt.Text,field:"etazhnost",description:"Этажность объекта",headerName:"Этажность",width:()=>80},{type:tt.Compute,serialize:e=>e.ploshhad_doma?e.ploshhad_doma:e.obshhaya_ploshhad,field:"ploshhad",description:"Площадь объекта",compute:e=>[e.obshhaya_ploshhad,e.ploshhad_doma].filter((e=>!!e)).join(", "),headerName:"М²",width:()=>60},{type:tt.Compute,serialize:e=>[e.strana,e.gorod,e.oblast,e.rajon,e.mahallya,e.ulicza,e.orientir].filter((e=>!!e)).join(", "),description:"Адрес",field:"adres",compute:e=>[e.strana,e.gorod,e.oblast,e.rajon,e.mahallya,e.ulicza,e.orientir].filter((e=>!!e)).join(", "),headerName:"Адрес",width:()=>125},{type:tt.Compute,field:"kategoriya_obekta",description:"Категория объекта",serialize:e=>{var t;return(null==(t=e.kategoriya_obekta)?void 0:t.join(", "))||""},compute:e=>{var t;return(null==(t=e.kategoriya_obekta)?void 0:t.join(", "))||""},headerName:"Категория",width:()=>100},{type:tt.Compute,description:"Продажа",field:"czena_prodazha",isVisible:({payload:e})=>e.permissions.hasOwnerPricePermission,compute:async e=>await bs.exchangeService.getApartmentProdPriceLabel(e),headerName:"Продажа",width:()=>100},{type:tt.Compute,description:"Аренда",field:"czena_arenda",isVisible:({payload:e})=>e.permissions.hasOwnerPricePermission,compute:async e=>await bs.exchangeService.getApartmentRentPriceLabel(e),headerName:"Аренда",width:()=>100},{type:tt.Compute,description:"Источник",field:"istochnik",compute:e=>e.istochnik||"",headerName:"Источник",width:()=>100},{type:tt.Compute,description:"Статус объекта",sortable:!1,field:"status",headerName:"Статус",compute:async({id:e})=>await bs.dealViewService.readStatusByApartmentId(e),width:()=>100},{type:tt.Compute,isVisible:({payload:{permissions:e}})=>e.hasFioPermission,description:"Фамилия, имя, отчество контакта",sortable:!1,field:"fio",compute:async({contact_id:e})=>{const t=await bs.contactViewService.tryRead(e);return t?t.fio:""},headerName:"Ф.И.О.",width:()=>125},{type:tt.Compute,isVisible:({payload:{permissions:e}})=>e.hasPreviewModeDisabled,sortable:!1,field:"telefon",description:"Номер телефона контакта",serialize:async({id:e,contact_id:t},i)=>{if(await bs.permissionRequestService.getOwnerContactPermissionByApartmentId(e)){const e=await bs.contactViewService.tryRead(t);return e?e.telefon:""}return"Скрыто"},element:({id:e,contact_id:t})=>he(rt,{payload:e,condition:e=>bs.permissionRequestService.getOwnerContactPermissionByApartmentId(e),Loading:"Загрузка",Else:"Скрыто",children:he(Le,{payload:t,children:async e=>{const t=await bs.contactViewService.tryRead(e);return t?t.telefon:""}})}),headerName:"Телефон",width:()=>125},{type:tt.Compute,field:"$createdAt",description:"Дата создания объекта",headerName:"Создано",compute:({$createdAt:e})=>r(e).format("DD/MM/YYYY"),width:()=>145},{type:tt.Compute,field:"$updatedAt",description:"Дата обновления объекта",headerName:"Обновлено",compute:({$updatedAt:e})=>r(e).format("DD/MM/YYYY"),width:()=>145},{type:tt.Compute,headerName:"Создал",description:"Сотрудник, добавивший объект в базу",field:"system_created_by",serialize:async({system_created_by:e})=>{if(!e)return"Не указано";const t=await bs.userViewService.read(e);return[t.last_name,t.first_name,t.middle_name].filter((e=>e)).join(" ")},element:e=>he(Le,{payload:e,children:async e=>{if(!e.system_created_by)return"Не указано";const t=await bs.userViewService.read(e.system_created_by);return[t.last_name,t.first_name,t.middle_name].filter((e=>e)).join(" ")}}),width:()=>100},{type:tt.Action,headerName:"Действие",sortable:!1,width:()=>100}],Od=[{label:"Жилая",name:"zhilaya"},{label:"Коммерческая",name:"kommercheskaya"},{label:"От застройщика",name:"novostrojka"}],Ud=[{label:"Редактировать",isDisabled:(e,{permissions:t})=>!t.hasApartmentUpdatePermission,action:"edit-action",icon:qt},{label:"В архиве",action:"toggle-archive",icon:Pt,isVisible:({system_is_archive:e,system_is_remove:t})=>W(!e,!t)},{label:"В архиве",action:"toggle-archive",icon:Et,isVisible:({system_is_archive:e,system_is_remove:t})=>W(!!e,!t)},{label:"Удалить",action:"toggle-remove",icon:Lt,isVisible:({system_is_archive:e,system_is_remove:t})=>W(!t,!e)},{label:"Восстановить",action:"toggle-remove",icon:Nt,isVisible:({system_is_archive:e,system_is_remove:t})=>W(!!t,!e)},{label:"Создать копию",isVisible:(e,{permissions:t})=>t.hasSuperAdminFlagPermission,action:"copy-action",icon:Ot}],Hd=[{id:"owner_contact",label:"Контакт"},{id:"object",label:"Объект"},{id:"service_comment",label:"Служебный комментарий"},{id:"documents",label:"Документы"}],Wd=Fs()((e=>({root:{["& .".concat("react-declatative__master-detail-header")]:{position:"sticky",top:0,background:"white",marginBottom:e.spacing(1)}}}))),$d=({children:e,payload:t,history:i})=>{const{classes:a}=Wd(),[o,l]=ue.useState((()=>Um(i)));return he(fe,{className:a.root,activeOption:o,withTransparentTabs:!0,withMenuCollapse:!0,payload:t,mode:j.Tabs,options:Hd,onActiveOptionChange:(e,t)=>{t||("owner_contact"===e&&i.replace("/apartment/owner_contact"),"object"===e&&i.replace("/apartment/object"),"service_comment"===e&&i.replace("/apartment/service_comment"),"documents"===e&&i.replace("/apartment/documents"),l(e))},children:e})},Gd=Fs()((e=>({listItemAccient:{background:ze(e.palette.getContrastText(e.palette.background.paper),.018)}}))),Yd=({addon_square_names:e,addon_square_values:t})=>{e=e||[],t=t||[];const i=[];for(let a=0;a!==e.length;a++)i.push({id:u(),title:e[a],number:t[a]});return i},Kd=({addon_square_names:e,addon_square_values:t,readonly:i,onChange:a})=>{const[l,n]=ue.useState((()=>Yd({addon_square_names:e,addon_square_values:t}))),r=We({fields:[{type:o.Text,sx:{mt:-2},name:"title",title:"Название",isInvalid:({title:e})=>e?null:"Укажите название"},{type:o.Text,name:"number",title:"Значение",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isInvalid:({number:e})=>e?null:"Укажите значение"}]}),s=zt({title:"Вы уверены?",msg:"Вы уверены, что хотите удалить площадь?"}),{resetWatcher:d}=At((()=>{var e;a({addon_square_names:(e=l).length?e.map((({title:e})=>e)):null,addon_square_values:e.length?e.map((({number:e})=>e)):null})}),[l]);ue.useEffect((()=>{const i=Yd({addon_square_names:e,addon_square_values:t});d(),n(i)}),[e,t]);return he(Pe,{direction:"column",children:[he(Pe,{direction:"row",alignItems:"center",justifyContent:"space-between",marginBottom:"20px",children:[he(Ne,{variant:"h6",fontWeight:"bold",children:"Доп. площадь"}),he(Ht,{disabled:i,onClick:()=>{r({title:"Создание площади",handler:{id:u(),title:"",number:""}}).then((e=>{e&&n((t=>[...t,e]))}))},variant:"contained",children:"Добавить"})]}),he(Te,{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"10px"},children:l.map((e=>he(Wt,{id:"standard-read-only-input",label:e.title,value:e.number,onClick:()=>{var t;t={id:e.id,title:e.title,number:e.number},r({title:"Редактирование площади",handler:{id:t.id,title:t.title,number:t.number}}).then((e=>{e&&(n((t=>{const i=t.findIndex((t=>t.id===e.id));return t[i]=e,[...t]})),console.log(l))}))},InputProps:{readOnly:!0,endAdornment:he($t,{position:"end",children:he(Be,{disabled:i,edge:"end",onClick:t=>{var i;t.preventDefault(),t.stopPropagation(),i=e.id,s().then((e=>{e&&n((e=>e.filter((e=>e.id!==i))))}))},children:he(Lt,{fill:"white",style:{cursor:"pointer",color:"grey"}})})})},variant:"standard"})))})]})},Xd=[{type:tt.Compute,sortable:!1,field:"index",headerName:"Номер",element:({index:e})=>he(gt,{content:e}),width:()=>100},{type:tt.Compute,field:"zagolovok",headerName:"Заголовок",element:({zagolovok:e})=>he(wt,{title:e,children:he(Ne,{variant:"body1",sx:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},children:e})}),width:()=>200},{type:tt.Compute,isVisible:({payload:{permissions:e}})=>e.hasFioPermission,sortable:!1,field:"fio",compute:async({contact_id:e})=>{const t=await bs.contactViewService.tryRead(e);return t?t.fio:""},headerName:"Ф.И.О.",width:()=>125},{type:tt.Compute,isVisible:({payload:{permissions:e}})=>e.hasPreviewModeDisabled,sortable:!1,field:"telefon",element:({id:e,contact_id:t})=>he(rt,{payload:e,condition:e=>bs.permissionRequestService.getOwnerContactPermissionByBidId(e),Loading:"Загрузка",Else:"Скрыто",children:he(Le,{payload:t,children:async e=>{const t=await bs.contactViewService.tryRead(e);return t?t.telefon:""}})}),headerName:"Телефон",width:()=>125},{type:tt.Compute,field:"kategoriya_obekta",compute:e=>e.kategoriya_obekta||"",headerName:"Категория",width:()=>100},{type:tt.Compute,field:"podkategoriya_obekta",compute:e=>e.podkategoriya_obekta||"",headerName:"Подкатегория",width:()=>100},{type:tt.Compute,field:"czena_prodazha",description:"Покупка",isVisible:({payload:e})=>e.permissions.hasOwnerPricePermission,element:e=>he(Le,{payload:e,children:async()=>he("pre",{children:await bs.exchangeService.getBidProdPriceLabel(e,!0)})}),headerName:"Покупка",width:()=>100},{type:tt.Compute,field:"czena_arenda",description:"Аренда",isVisible:({payload:e})=>e.permissions.hasOwnerPricePermission,element:e=>he(Le,{payload:e,children:async()=>he("pre",{children:await bs.exchangeService.getBidRentPriceLabel(e,!0)})}),headerName:"Аренда",width:()=>100},{type:tt.Compute,field:"prodazha_arenda",headerName:"Варианты сделки",element:({prodazha:e,arenda:t})=>{const i=[...e||[],...t||[]];return he(Te,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",gap:1},children:[!i.length&&"",i.map((e=>he(Gt,{label:e})))]})},width:()=>170},{type:tt.Compute,sortable:!1,description:"Статус заявки",field:"status",headerName:"Статус",compute:async({id:e})=>await bs.dealViewService.readStatusByBidId(e),width:()=>100},{type:tt.Compute,headerName:"Создано",compute:({$createdAt:e})=>r(e).format("DD/MM/YYYY"),field:"$createdAt",width:()=>145},{type:tt.Compute,headerName:"Обновлено",compute:({$updatedAt:e})=>r(e).format("DD/MM/YYYY"),field:"$updatedAt",width:()=>145},{type:tt.Compute,headerName:"Создал",description:"Сотрудник, добавивший заявку в базу",field:"system_created_by",element:e=>he(Le,{payload:e,children:async e=>{if(!e.system_created_by)return"Не указано";const t=await bs.userViewService.read(e.system_created_by);return[t.last_name,t.first_name,t.middle_name].filter((e=>e)).join(" ")}}),width:()=>100}],Jd=e=>{var t;const i={};for(const a of Object.keys(e||{}))Ml.includes(a)||jl.includes(a)||Xl.includes(a)||Jl.includes(a)||"id"!==a&&(a.startsWith("$")||a.startsWith("system_")||a.endsWith("_images")||a.endsWith("_files")||Array.isArray(e[a])&&!(null==(t=e[a])?void 0:t.length)||null!==e[a]&&""!==e[a]&&!1!==e[a]&&(i[a]=e[a]));return i},Zd=new Set([o.Text,o.Date,o.Time,o.Combo,o.Items,o.Checkbox,o.Radio,o.YesNo,o.Component]),Qd=e=>{const t=[];for(const{name:i,type:a,title:o}of e)i&&(t.some((e=>e.value===i))||Zd.has(a)&&t.push({label:o||i,value:i}));return t},ec=(e,t)=>e.some((e=>e.includes(t))),tc=[{id:"fields",element:({data:e,params:{apartment_fields:t},payload:i,onChange:a})=>{const l=ue.useMemo((()=>Qd(t).map((({label:t,value:i})=>({type:o.Checkbox,name:i,title:"".concat(t),defaultValue:0===e.length})))),[t]);return he(Je,{fields:l,change:(e,t)=>{a(Object.entries(e).filter((([,e])=>e)).map((([e])=>e)),t)},handler:()=>e.reduce(((e,t)=>({...e,[t]:!0})),{}),payload:i})},isActive:e=>ec(["/apartment_columns"],e)},{id:"fields",element:({data:e,payload:t,params:{bid_fields:i},onChange:a})=>{const l=ue.useMemo((()=>Qd(i).map((({label:t,value:i})=>({type:o.Checkbox,name:i,title:"".concat(t),defaultValue:0===e.length})))),[i]);return he(Je,{fields:l,change:(e,t)=>{a(Object.entries(e).filter((([,e])=>e)).map((([e])=>e)),t)},handler:()=>e.reduce(((e,t)=>({...e,[t]:!0})),{}),payload:t})},isActive:e=>ec(["/bid_columns"],e)}],ic=({name:e,columns:t,title:i,hidden:a,isVisible:l,inputFormatterAllowed:n,inputFormatterTemplate:r})=>({type:o.Group,isVisible:l,hidden:a,columns:t,fields:[{type:o.Component,fieldRightMargin:"0",fieldBottomMargin:"0",element:()=>he(Ne,{variant:"caption",sx:{opacity:.8},children:i})},{type:o.Text,sx:{"& .MuiIconButton-root":{pointerEvents:"none"}},isInvalid:t=>t["".concat(e,"_ot")]&&t["".concat(e,"_do")]&&parseInt(t["".concat(e,"_ot")])>parseInt(t["".concat(e,"_do")])?"От должно быть меньше До":null,title:"",columns:"6",outlined:!1,inputFormatterAllowed:n,inputFormatterTemplate:r,name:"".concat(e,"_ot"),leadingIcon:()=>he(Te,{sx:{height:20,width:20,display:"flex",alignItems:"center",justifyContent:"center"},children:he(Ne,{textTransform:"lowercase",variant:"caption",children:"От"})})},{type:o.Text,sx:{"& .MuiIconButton-root":{pointerEvents:"none"}},isInvalid:t=>t["".concat(e,"_ot")]&&t["".concat(e,"_do")]&&parseInt(t["".concat(e,"_ot")])>parseInt(t["".concat(e,"_do")])?"От должно быть меньше До":null,title:"",columns:"6",outlined:!1,inputFormatterAllowed:n,inputFormatterTemplate:r,name:"".concat(e,"_do"),leadingIcon:()=>he(Te,{sx:{height:20,width:20,display:"flex",alignItems:"center",justifyContent:"center"},children:he(Ne,{textTransform:"lowercase",variant:"caption",children:"До"})})}]}),ac=[{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany"),isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&!Ee(e.podkategoriya_obekta,"Квартиры"),t=t&&!Ee(e.podkategoriya_obekta,"Дома"),t=t&&!Ee(e.podkategoriya_obekta,"Земля/Участок"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая недвижимость)"})},ic({hidden:e=>!e.fieldVisibility.has("ploshhad_gostinnoj"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_spalni"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_holla"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_kuhni"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_sanuzla"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_balkona"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_terrasy"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_komnaty_ohrany"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"})]}]},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany"),isVisible:e=>!Ee(e.kategoriya_obekta,"Коммерческая")&&Ee(e.podkategoriya_obekta,"Земля/Участок"),fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Земля/Участок)"})},ic({hidden:e=>!e.fieldVisibility.has("ploshhad_gostinnoj"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_spalni"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_holla"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_kuhni"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_sanuzla"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_balkona"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_terrasy"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_komnaty_ohrany"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"})]}]},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona"),isVisible:e=>{let t=!0;return t=t&&!Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Квартиры"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Квартиры)"})},ic({hidden:e=>!e.fieldVisibility.has("ploshhad_gostinnoj"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_spalni"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_holla"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_kuhni"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_sanuzla"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_balkona"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"})]}]},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany","ploshhad_gostevogo_doma","ploshhad_dopolnitelnoj_pristrojki"),isVisible:e=>{let t=!0;return t=t&&!Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Дома"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Дома)"})},ic({hidden:e=>!e.fieldVisibility.has("ploshhad_gostinnoj"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_spalni"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_holla"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_kuhni"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_sanuzla"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_balkona"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_terrasy"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_komnaty_ohrany"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_gostevogo_doma"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostevogo_doma",title:"Площадь гостевого дома М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_dopolnitelnoj_pristrojki"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_dopolnitelnoj_pristrojki",title:"Площадь дополнительной пристройки М²"})]}]},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona"),isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Квартиры"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая + Жилая квартира)"})},ic({hidden:e=>!e.fieldVisibility.has("ploshhad_gostinnoj"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_spalni"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_holla"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_kuhni"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_sanuzla"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_balkona"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"})]}]},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany","ploshhad_gostevogo_doma","ploshhad_dopolnitelnoj_pristrojki"),isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Дома"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческий + Жилой дом)"})},ic({hidden:e=>!e.fieldVisibility.has("ploshhad_gostinnoj"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_spalni"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_holla"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_kuhni"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_sanuzla"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_balkona"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_terrasy"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_komnaty_ohrany"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_gostevogo_doma"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostevogo_doma",title:"Площадь гостевого дома М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_dopolnitelnoj_pristrojki"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_dopolnitelnoj_pristrojki",title:"Площадь дополнительной пристройки М²"})]}]},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany"),isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Земля/Участок"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая + Жилая земля/участок)"})},ic({hidden:e=>!e.fieldVisibility.has("ploshhad_gostinnoj"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_spalni"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_holla"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_kuhni"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_sanuzla"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_balkona"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_terrasy"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_komnaty_ohrany"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"})]}]}],oc=[{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"vnutri_est","ryadom_est"),isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&!Ee(e.podkategoriya_obekta,"Квартиры"),t=t&&!Ee(e.podkategoriya_obekta,"Дома"),t=t&&!Ee(e.podkategoriya_obekta,"Земля/Участок"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая недвижимость)"})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vnutri_est"),columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Телевизор","Кондиционер","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("ryadom_est"),columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Охрана","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"vnutri_est","ryadom_est"),isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Квартиры"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая + Жилая квартира)"})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vnutri_est"),columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Холодильник","Телевизор","Кондиционер","Стиральная машина","Мусоропровод","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг","Пожарная сигнализация","Видеонаблюдение","Сигнализация"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("ryadom_est"),columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Охрана","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"vnutri_est","ryadom_est"),isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Дома"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческий + Жилой дом)"})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vnutri_est"),columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Телевизор","Кондиционер","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг","Полисадник"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("ryadom_est"),columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Охрана","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"vnutri_est","ryadom_est"),isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Земля/Участок"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая + Жилая земля/участок)"})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vnutri_est"),columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Забор","Катлаван","Пожарная сигнализация","Видеонаблюдение","Сигнализация"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("ryadom_est"),columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Охрана","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}}],lc=[{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"kolichestvo_komnat","sostoyanie_obekta","sostoyanie_remonta","poleznaya_ploshhad","etazh","tip_stroeniya","mashina_mesto","kolichestvo_sotok","etazhnost","balkon","parkovka","vysota_potolkov","obshhaya_ploshhad","sanuzel","mebel","voda","gaz","lift_kommercziya","sistema_otopleniya","elektrichestvo","kanalizacziya","rasstoyanie_do_metro","mestopolozhenie_obekta","god_postrojki","sistema_kondiczionirovaniya","vid_liczenzii","naznachenie_obekta"),isVisible:e=>(!Ee(e.podkategoriya_obekta,"Земля/Участок")||!Ee(e.kategoriya_obekta,"Коммерческая"))&&((!Ee(e.podkategoriya_obekta,"Дома")||!Ee(e.kategoriya_obekta,"Коммерческая"))&&((!Ee(e.podkategoriya_obekta,"Квартиры")||!Ee(e.kategoriya_obekta,"Коммерческая"))&&Ee(e.kategoriya_obekta,"Коммерческая"))),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая недвижимость)"})},ic({hidden:e=>!e.fieldVisibility.has("kolichestvo_komnat"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sostoyanie_obekta"),sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_obekta",title:"Состояние объекта",itemList:["Новой постройки","Недостроенный","Под снос","Коробка","Пустая земля/участок"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sostoyanie_remonta"),sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},ic({hidden:e=>!e.fieldVisibility.has("poleznaya_ploshhad"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"}),ic({hidden:e=>!e.fieldVisibility.has("etazh"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("tip_stroeniya"),sx:{mt:2},columns:"3",outlined:!1,name:"tip_stroeniya",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},ic({hidden:e=>!e.fieldVisibility.has("mashina_mesto"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),ic({hidden:e=>!e.fieldVisibility.has("kolichestvo_sotok"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"}),ic({hidden:e=>!e.fieldVisibility.has("etazhnost"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("balkon"),sx:{mt:2},columns:"3",outlined:!1,name:"balkon",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("parkovka"),sx:{mt:2},columns:"3",outlined:!1,name:"parkovka",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},ic({hidden:e=>!e.fieldVisibility.has("vysota_potolkov"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"}),ic({hidden:e=>!e.fieldVisibility.has("obshhaya_ploshhad"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sanuzel"),sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("mebel"),sx:{mt:2},columns:"3",outlined:!1,name:"mebel",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("voda"),columns:"3",outlined:!1,name:"voda",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("gaz"),columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("lift_kommercziya"),columns:"3",outlined:!1,name:"lift_kommercziya",title:"Лифт",itemList:["Есть","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema_otopleniya"),columns:"3",outlined:!1,name:"sistema_otopleniya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("elektrichestvo"),columns:"3",outlined:!1,name:"elektrichestvo",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("kanalizacziya"),columns:"3",outlined:!1,name:"kanalizacziya",title:"Канализация",itemList:["Да","Нет"]},ic({hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_metro"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("mestopolozhenie_obekta"),sx:{mt:2},columns:"3",outlined:!1,name:"mestopolozhenie_obekta",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},ic({hidden:e=>!e.fieldVisibility.has("god_postrojki"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema_kondiczionirovaniya"),columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vid_liczenzii"),columns:"3",outlined:!1,name:"vid_liczenzii",title:"Вид лицензии",itemList:["Коммерческая","Жилая"]},{type:o.Component,hidden:e=>!e.fieldVisibility.has("naznachenie_obekta"),sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>he(Oe,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"kolichestvo_komnat","sostoyanie_remonta-kvartiry","nazvanie_zhk","tip-stroeniya_kvartiry","etazh","balkon_kvartira","tip_planirovki","lift_kvartira","etazhnost","sanuzel_kvartira","zhilaya_ploshhad","mebel_kvartira","obshhaya_ploshhad","vysota_potolkov","kolichestvo_spalen","sistema-otopleniya_kvartiry","spalnya_sanuzel","gaz","rasstoyanie_do_metro","vid_iz_okna","parkovka_kvartira","god_postrojki"),isVisible:e=>{if(Ee(e.podkategoriya_obekta,"Квартиры")&&Ee(e.kategoriya_obekta,"Коммерческая"))return!1;let t=!1;return t=t||Ee(e.podkategoriya_obekta,"Квартиры"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Квартиры)"})},ic({hidden:e=>!e.fieldVisibility.has("kolichestvo_komnat"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sostoyanie_remonta-kvartiry"),sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_remonta-kvartiry",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Complete,hidden:e=>!e.fieldVisibility.has("nazvanie_zhk"),columns:"3",outlined:!1,name:"nazvanie_zhk",title:"Название ЖК",tip:['ЖК "Greenwich"','ЖК "OzMahal"','ЖК "Elysium"','ЖК "Binkat"','ЖК "Brooklyn"','ЖК "Assalom Havo"','ЖК "Istanbul City"']},{type:o.Items,hidden:e=>!e.fieldVisibility.has("tip-stroeniya_kvartiry"),sx:{mt:2},columns:"3",outlined:!1,name:"tip-stroeniya_kvartiry",title:"Тип строения",itemList:["Кирпичный","Монолитный","Блочный","Панельный","Деревянный","Газоблочный","Бетонно-керамзитный"]},ic({hidden:e=>!e.fieldVisibility.has("etazh"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("balkon_kvartira"),sx:{mt:2},columns:"3",outlined:!1,name:"balkon_kvartira",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("tip_planirovki"),sx:{mt:2},columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Малосемейная","Общежитие","Пентхаус","Дуплекс","Комната"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("lift_kvartira"),sx:{mt:2},columns:"3",outlined:!1,name:"lift_kvartira",title:"Лифт",itemList:["Пассажирский","Грузовой","Нет"]},ic({hidden:e=>!e.fieldVisibility.has("etazhnost"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sanuzel_kvartira"),sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel_kvartira",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более"]},ic({hidden:e=>!e.fieldVisibility.has("zhilaya_ploshhad"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"zhilaya_ploshhad",title:"Жилая площадь М²"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("mebel_kvartira"),sx:{mt:2},columns:"3",outlined:!1,name:"mebel_kvartira",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},ic({hidden:e=>!e.fieldVisibility.has("obshhaya_ploshhad"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"}),ic({hidden:e=>!e.fieldVisibility.has("vysota_potolkov"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"}),ic({hidden:e=>!e.fieldVisibility.has("kolichestvo_spalen"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema-otopleniya_kvartiry"),sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_kvartiry",title:"Система отопления",itemList:["Центральное","2х контурный котел","Теплый пол"]},ic({hidden:e=>!e.fieldVisibility.has("spalnya_sanuzel"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("gaz"),sx:{mt:2},columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},ic({hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_metro"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("vid_iz_okna"),sx:{mt:2},columns:"3",outlined:!1,name:"vid_iz_okna",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("parkovka_kvartira"),sx:{mt:2},columns:"3",outlined:!1,name:"parkovka_kvartira",title:"Парковка",itemList:["Наземная","Собственная","Подземная","В аренду","Нет"]},ic({hidden:e=>!e.fieldVisibility.has("god_postrojki"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"})]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"kolichestvo_komnat","sostoyanie_doma","god_postrojki","tip-stroeniya_doma","etazhnost","balkon_doma","tip_planirovki","bassejn","ploshhad_doma","sanuzel_doma","mashina_mesto","kolichestvo_spalen","kolichestvo_sotok","voda_dom","lift_dom","spalnya_sanuzel","sistema-otopleniya_dom","mebel_dom","rasstoyanie_do_metro","gaz_dom","sistema-kondiczionirovaniya_dom","vysota_potolkov","elektrichestvo_dom","vid_iz_okna_dom","garazh","kanalizacziya_dom","raspolozhenie_doma","mestopolozhenie-obekta_dom"),isVisible:e=>{if(Ee(e.podkategoriya_obekta,"Дома")&&Ee(e.kategoriya_obekta,"Коммерческая"))return!1;let t=!1;return t=t||Ee(e.podkategoriya_obekta,"Дома"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Дома)"})},ic({hidden:e=>!e.fieldVisibility.has("kolichestvo_komnat"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sostoyanie_doma"),sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_doma",title:"Состояние дома",itemList:["Новой постройки","Недостроенный","Под снос","Коробка"]},ic({hidden:e=>!e.fieldVisibility.has("god_postrojki"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("tip-stroeniya_doma"),sx:{mt:2},columns:"3",outlined:!1,name:"tip-stroeniya_doma",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},ic({hidden:e=>!e.fieldVisibility.has("etazhnost"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("balkon_doma"),sx:{mt:2},columns:"3",outlined:!1,name:"balkon_doma",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("tip_planirovki"),sx:{mt:2},columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Смешанный"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("bassejn"),sx:{mt:2},columns:"3",outlined:!1,name:"bassejn",title:"Бассейн",itemList:["Летний","Зимний","Сауна","Нет"]},ic({hidden:e=>!e.fieldVisibility.has("ploshhad_doma"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_doma",title:"Площадь дома М²"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sanuzel_doma"),sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel_doma",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},ic({hidden:e=>!e.fieldVisibility.has("mashina_mesto"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),ic({hidden:e=>!e.fieldVisibility.has("kolichestvo_spalen"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"}),ic({hidden:e=>!e.fieldVisibility.has("kolichestvo_sotok"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("voda_dom"),sx:{mt:2},columns:"3",outlined:!1,name:"voda_dom",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("lift_dom"),sx:{mt:2},columns:"3",outlined:!1,name:"lift_dom",title:"Лифт",itemList:["Есть","Нет"]},ic({hidden:e=>!e.fieldVisibility.has("spalnya_sanuzel"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema-otopleniya_dom"),sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_dom",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("mebel_dom"),sx:{mt:2},columns:"3",outlined:!1,name:"mebel_dom",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},ic({hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_metro"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("gaz_dom"),sx:{mt:2},columns:"3",outlined:!1,name:"gaz_dom",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema-kondiczionirovaniya_dom"),sx:{mt:2},columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_dom",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},ic({hidden:e=>!e.fieldVisibility.has("vysota_potolkov"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"}),{type:o.Combo,hidden:e=>!e.fieldVisibility.has("elektrichestvo_dom"),sx:{mt:2},columns:"3",outlined:!1,name:"elektrichestvo_dom",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vid_iz_okna_dom"),sx:{mt:2},columns:"3",outlined:!1,name:"vid_iz_okna_dom",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("garazh"),columns:"3",outlined:!1,name:"garazh",title:"Гараж",itemList:["Подземный","Закрытый","Под навесом","Уличный"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("kanalizacziya_dom"),columns:"3",outlined:!1,name:"kanalizacziya_dom",title:"Канализация",itemList:["Да","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("raspolozhenie_doma"),columns:"3",outlined:!1,name:"raspolozhenie_doma",title:"Расположение дома",itemList:["По середине","В начале двора","В конце двора"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("mestopolozhenie-obekta_dom"),columns:"3",outlined:!1,name:"mestopolozhenie-obekta_dom",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"kolichestvo_komnat","naznachenie-obekta-zemlya_uchastok","tip_zemli_uchastka","poleznaya_ploshhad","etazh","sostoyanie-obekta_zemlya","mashina_mesto","kolichestvo_sotok","etazhnost","sostoyanie-remonta_zemlya","parkovka_zemlya","rasstoyanie_do_metro","obshhaya_ploshhad","voda_zemlya","mestopolozhenie-obekta_zemlya","rasstoyanie_do_goroda","sistema-otopleniya_zemlya","podezdnye_puti","sistema-kondiczionirovaniya_zemlya","god_postrojki","elektrichestvo_zemlya","gaz_zemlya","kanalizacziya_zemlya"),isVisible:e=>!Ee(e.kategoriya_obekta,"Коммерческая")&&Ee(e.podkategoriya_obekta,"Земля/Участок"),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Земля/Участок)"})},ic({hidden:e=>!e.fieldVisibility.has("kolichestvo_komnat"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Component,hidden:e=>!e.fieldVisibility.has("naznachenie-obekta-zemlya_uchastok"),sx:{mb:2,pr:1},columns:"3",name:"naznachenie-obekta-zemlya_uchastok",element:e=>he(Oe,{variant:"standard",label:"Назначение объекта",items:[{label:"Сельхоз использование",value:"Сельхоз использование"},{label:"ИЖС",value:"ИЖС"},{label:"Высотная застройка",value:"Высотная застройка"},{label:"Промышленное назначение",value:"Промышленное назначение"},{label:"ТЦ",value:"ТЦ"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Склады",value:"Склады"},{label:"Инвестпроект",value:"Инвестпроект"},{label:"Строительство образовательных учреждений",value:"Строительство образовательных учреждений"},{label:"АЗС",value:"АЗС"},{label:"Мойка",value:"Мойка"}],value:e["naznachenie-obekta_zemlya"],onChange:t=>e.onChange({"naznachenie-obekta_zemlya":t})})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("tip_zemli_uchastka"),sx:{mt:2},columns:"3",outlined:!1,name:"tip_zemli_uchastka",title:"Тип земли/участка",itemList:["Делимый","Неделимый"]},ic({hidden:e=>!e.fieldVisibility.has("poleznaya_ploshhad"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"}),ic({hidden:e=>!e.fieldVisibility.has("etazh"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sostoyanie-obekta_zemlya"),sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie-obekta_zemlya",title:"Состояние объекта",itemList:["Пустая земля/участок","Недостроенная","Под снос"]},ic({hidden:e=>!e.fieldVisibility.has("mashina_mesto"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),ic({hidden:e=>!e.fieldVisibility.has("kolichestvo_sotok"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"}),ic({hidden:e=>!e.fieldVisibility.has("etazhnost"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sostoyanie-remonta_zemlya"),sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie-remonta_zemlya",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("parkovka_zemlya"),sx:{mt:2},columns:"3",outlined:!1,name:"parkovka_zemlya",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},ic({hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_metro"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),ic({hidden:e=>!e.fieldVisibility.has("obshhaya_ploshhad"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("voda_zemlya"),sx:{mt:2},columns:"3",outlined:!1,name:"voda_zemlya",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("mestopolozhenie-obekta_zemlya"),sx:{mt:2},columns:"3",outlined:!1,name:"mestopolozhenie-obekta_zemlya",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},ic({hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_goroda"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_goroda",title:"Расстояние до города (м)"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema-otopleniya_zemlya"),sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_zemlya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("podezdnye_puti"),columns:"3",outlined:!1,name:"podezdnye_puti",title:"Подъездные пути",itemList:["Асфальтированная дорога","Грунтовая дорога","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema-kondiczionirovaniya_zemlya"),columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_zemlya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},ic({hidden:e=>!e.fieldVisibility.has("god_postrojki"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("elektrichestvo_zemlya"),sx:{mt:2},columns:"3",outlined:!1,name:"elektrichestvo_zemlya",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("gaz_zemlya"),columns:"3",outlined:!1,name:"gaz_zemlya",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("kanalizacziya_zemlya"),columns:"3",outlined:!1,name:"kanalizacziya_zemlya",title:"Канализация",itemList:["Да","Нет"]}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"kolichestvo_komnat","sostoyanie_remonta-kvartiry","naznachenie_obekta","raspolozhenie_obekta","etazh","balkon_kvartira","tip_planirovki","lift_kvartira","etazhnost","god_postrojki","nazvanie_zhk","mashina_mesto","obshhaya_ploshhad","sanuzel_kvartira","parkovka_kvartira","zhilaya_ploshhad","mebel_kvartira","vysota_potolkov","kolichestvo_spalen","sistema-otopleniya_kvartiry","vid_iz_okna","spalnya_sanuzel","gaz","rasstoyanie_do_metro","sistema_kondiczionirovaniya","tip-stroeniya_kvartiry"),isVisible:e=>!(!Ee(e.kategoriya_obekta,"Коммерческая")||!Ee(e.podkategoriya_obekta,"Квартиры")),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая + Жилая квартира)"})},ic({hidden:e=>!e.fieldVisibility.has("kolichestvo_komnat"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sostoyanie_remonta-kvartiry"),sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_remonta-kvartiry",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Component,hidden:e=>!e.fieldVisibility.has("naznachenie_obekta"),sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>he(Oe,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("raspolozhenie_obekta"),columns:"3",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},ic({hidden:e=>!e.fieldVisibility.has("etazh"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("balkon_kvartira"),sx:{mt:2},columns:"3",outlined:!1,name:"balkon_kvartira",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("tip_planirovki"),sx:{mt:2},columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Малосемейная","Общежитие","Пентхаус","Дуплекс","Комната"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("lift_kvartira"),sx:{mt:2},columns:"3",outlined:!1,name:"lift_kvartira",title:"Лифт",itemList:["Пассажирский","Грузовой","Нет"]},ic({hidden:e=>!e.fieldVisibility.has("etazhnost"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),ic({hidden:e=>!e.fieldVisibility.has("god_postrojki"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),{type:o.Complete,hidden:e=>!e.fieldVisibility.has("nazvanie_zhk"),columns:"3",outlined:!1,name:"nazvanie_zhk",title:"Название ЖК",tip:['ЖК "Greenwich"','ЖК "OzMahal"','ЖК "Elysium"','ЖК "Binkat"','ЖК "Brooklyn"','ЖК "Assalom Havo"','ЖК "Istanbul City"']},ic({hidden:e=>!e.fieldVisibility.has("mashina_mesto"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),ic({hidden:e=>!e.fieldVisibility.has("obshhaya_ploshhad"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sanuzel_kvartira"),sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel_kvartira",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("parkovka_kvartira"),sx:{mt:2},columns:"3",outlined:!1,name:"parkovka_kvartira",title:"Парковка",itemList:["Наземная","Собственная","Подземная","В аренду","Нет"]},ic({hidden:e=>!e.fieldVisibility.has("zhilaya_ploshhad"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"zhilaya_ploshhad",title:"Жилая площадь М²"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("mebel_kvartira"),sx:{mt:2},columns:"3",outlined:!1,name:"mebel_kvartira",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},ic({hidden:e=>!e.fieldVisibility.has("vysota_potolkov"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"}),ic({hidden:e=>!e.fieldVisibility.has("kolichestvo_spalen"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema-otopleniya_kvartiry"),sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_kvartiry",title:"Система отопления",itemList:["Центральное","2х контурный котел","Теплый пол"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vid_iz_okna"),sx:{mt:2},columns:"3",outlined:!1,name:"vid_iz_okna",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},ic({hidden:e=>!e.fieldVisibility.has("spalnya_sanuzel"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("gaz"),sx:{mt:2},columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},ic({hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_metro"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema_kondiczionirovaniya"),columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("tip-stroeniya_kvartiry"),sx:{mt:2},columns:"3",outlined:!1,name:"tip-stroeniya_kvartiry",title:"Тип строения",itemList:["Кирпичный","Монолитный","Блочный","Панельный","Деревянный","Газоблочный","Бетонно-керамзитный"]}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"kolichestvo_komnat","sostoyanie_doma","mestopolozhenie-obekta_dom","naznachenie_obekta","etazhnost","sostoyanie_remonta","raspolozhenie_obekta","tip-stroeniya_doma","ploshhad_doma","raspolozhenie_doma","tip_planirovki","bassejn","kolichestvo_sotok","sanuzel_doma","mashina_mesto","kolichestvo_spalen","voda_dom","lift_dom","spalnya_sanuzel","sistema-otopleniya_dom","mebel_dom","rasstoyanie_do_metro","gaz_dom","god_postrojki","vysota_potolkov","elektrichestvo_dom","vid_iz_okna_dom","garazh","kanalizacziya_dom","balkon_doma","sistema-kondiczionirovaniya_dom"),isVisible:e=>!(!Ee(e.kategoriya_obekta,"Коммерческая")||!Ee(e.podkategoriya_obekta,"Дома")),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческий + Жилой дом)"})},ic({hidden:e=>!e.fieldVisibility.has("kolichestvo_komnat"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sostoyanie_doma"),sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_doma",title:"Состояние дома",itemList:["Новой постройки","Недостроенный","Под снос","Коробка"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("mestopolozhenie-obekta_dom"),sx:{mt:2},columns:"3",outlined:!1,name:"mestopolozhenie-obekta_dom",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:o.Component,hidden:e=>!e.fieldVisibility.has("naznachenie_obekta"),sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>he(Oe,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},ic({hidden:e=>!e.fieldVisibility.has("etazhnost"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sostoyanie_remonta"),sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("raspolozhenie_obekta"),columns:"3",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("tip-stroeniya_doma"),sx:{mt:2},columns:"3",outlined:!1,name:"tip-stroeniya_doma",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},ic({hidden:e=>!e.fieldVisibility.has("ploshhad_doma"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_doma",title:"Площадь дома М²"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("raspolozhenie_doma"),sx:{mt:2},columns:"3",outlined:!1,name:"raspolozhenie_doma",title:"Расположение дома",itemList:["По середине","В начале двора","В конце двора"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("tip_planirovki"),sx:{mt:2},columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Смешанный"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("bassejn"),sx:{mt:2},columns:"3",outlined:!1,name:"bassejn",title:"Бассейн",itemList:["Летний","Зимний","Сауна","Нет"]},ic({hidden:e=>!e.fieldVisibility.has("kolichestvo_sotok"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sanuzel_doma"),sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel_doma",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},ic({hidden:e=>!e.fieldVisibility.has("mashina_mesto"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),ic({hidden:e=>!e.fieldVisibility.has("kolichestvo_spalen"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("voda_dom"),sx:{mt:2},columns:"3",outlined:!1,name:"voda_dom",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("lift_dom"),sx:{mt:2},columns:"3",outlined:!1,name:"lift_dom",title:"Лифт",itemList:["Есть","Нет"]},ic({hidden:e=>!e.fieldVisibility.has("spalnya_sanuzel"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema-otopleniya_dom"),sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_dom",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("mebel_dom"),sx:{mt:2},columns:"3",outlined:!1,name:"mebel_dom",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},ic({hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_metro"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("gaz_dom"),sx:{mt:2},columns:"3",outlined:!1,name:"gaz_dom",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},ic({hidden:e=>!e.fieldVisibility.has("god_postrojki"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),ic({hidden:e=>!e.fieldVisibility.has("vysota_potolkov"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"}),{type:o.Combo,hidden:e=>!e.fieldVisibility.has("elektrichestvo_dom"),sx:{mt:2},columns:"3",outlined:!1,name:"elektrichestvo_dom",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vid_iz_okna_dom"),sx:{mt:2},columns:"3",outlined:!1,name:"vid_iz_okna_dom",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("garazh"),columns:"3",outlined:!1,name:"garazh",title:"Гараж",itemList:["Подземный","Закрытый","Под навесом","Уличный"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("kanalizacziya_dom"),columns:"3",outlined:!1,name:"kanalizacziya_dom",title:"Канализация",itemList:["Да","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("balkon_doma"),sx:{mt:2},columns:"3",outlined:!1,name:"balkon_doma",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema-kondiczionirovaniya_dom"),columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_dom",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"kolichestvo_komnat","naznachenie-obekta-zemlya_uchastok","tip_zemli_uchastka","poleznaya_ploshhad","etazh","sostoyanie-obekta_zemlya","mashina_mesto","kolichestvo_sotok","etazhnost","sostoyanie-remonta_zemlya","parkovka_zemlya","rasstoyanie_do_metro","obshhaya_ploshhad","voda_zemlya","mestopolozhenie-obekta_zemlya","rasstoyanie_do_goroda","sistema-otopleniya_zemlya","god_postrojki","elektrichestvo_zemlya","podezdnye_puti","sistema-kondiczionirovaniya_zemlya","gaz_zemlya","kanalizacziya_zemlya"),isVisible:e=>!(!Ee(e.kategoriya_obekta,"Коммерческая")||!Ee(e.podkategoriya_obekta,"Земля/Участок")),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая + Жилая земля/участок)"})},ic({hidden:e=>!e.fieldVisibility.has("kolichestvo_komnat"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Component,hidden:e=>!e.fieldVisibility.has("naznachenie-obekta-zemlya_uchastok"),sx:{mt:2,mb:2,pr:1},columns:"3",name:"naznachenie-obekta-zemlya_uchastok",element:e=>he(Oe,{variant:"standard",label:"Назначение объекта",items:[{label:"Сельхоз использование",value:"Сельхоз использование"},{label:"ИЖС",value:"ИЖС"},{label:"Высотная застройка",value:"Высотная застройка"},{label:"Промышленное назначение",value:"Промышленное назначение"},{label:"ТЦ",value:"ТЦ"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Склады",value:"Склады"},{label:"Инвестпроект",value:"Инвестпроект"},{label:"Строительство образовательных учреждений",value:"Строительство образовательных учреждений"},{label:"АЗС",value:"АЗС"},{label:"Мойка",value:"Мойка"}],value:e["naznachenie-obekta_zemlya"],onChange:t=>e.onChange({"naznachenie-obekta_zemlya":t})})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("tip_zemli_uchastka"),sx:{mt:2},columns:"3",outlined:!1,name:"tip_zemli_uchastka",title:"Тип земли/участка",itemList:["Делимый","Неделимый"]},ic({hidden:e=>!e.fieldVisibility.has("poleznaya_ploshhad"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"}),ic({hidden:e=>!e.fieldVisibility.has("etazh"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sostoyanie-obekta_zemlya"),sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie-obekta_zemlya",title:"Состояние объекта",itemList:["Пустая земля/участок","Недостроенная","Под снос"]},ic({hidden:e=>!e.fieldVisibility.has("mashina_mesto"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),ic({hidden:e=>!e.fieldVisibility.has("kolichestvo_sotok"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"}),ic({hidden:e=>!e.fieldVisibility.has("etazhnost"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sostoyanie-remonta_zemlya"),sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie-remonta_zemlya",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("parkovka_zemlya"),sx:{mt:2},columns:"3",outlined:!1,name:"parkovka_zemlya",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},ic({hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_metro"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),ic({hidden:e=>!e.fieldVisibility.has("obshhaya_ploshhad"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("voda_zemlya"),sx:{mt:2},columns:"3",outlined:!1,name:"voda_zemlya",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("mestopolozhenie-obekta_zemlya"),sx:{mt:2},columns:"3",outlined:!1,name:"mestopolozhenie-obekta_zemlya",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},ic({hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_goroda"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_goroda",title:"Расстояние до города (м)"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema-otopleniya_zemlya"),sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_zemlya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},ic({hidden:e=>!e.fieldVisibility.has("god_postrojki"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("elektrichestvo_zemlya"),sx:{mt:2},columns:"3",outlined:!1,name:"elektrichestvo_zemlya",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("podezdnye_puti"),columns:"3",outlined:!1,name:"podezdnye_puti",title:"Подъездные пути",itemList:["Асфальтированная дорога","Грунтовая дорога","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema-kondiczionirovaniya_zemlya"),columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_zemlya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("gaz_zemlya"),columns:"3",outlined:!1,name:"gaz_zemlya",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("kanalizacziya_zemlya"),columns:"3",outlined:!1,name:"kanalizacziya_zemlya",title:"Канализация",itemList:["Да","Нет"]}]}}],nc=[{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"vnutri_est","ryadom_est"),isVisible:e=>{let t=!0;return t=t&&!Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Квартиры"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Квартиры)"})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vnutri_est"),columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Холодильник","Телевизор","Кондиционер","Стиральная машина","Мусоропровод","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("ryadom_est"),columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"vnutri_est","ryadom_est"),isVisible:e=>{let t=!0;return t=t&&!Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Дома"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Дома)"})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vnutri_est"),columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Холодильник","Телевизор","Кондиционер","Стиральная машина","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг","Полисадник"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("ryadom_est"),columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Охрана","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"vnutri_est","ryadom_est"),isVisible:e=>{let t=!1;return t=t||Ee(e.podkategoriya_obekta,"Земля/Участок"),t=t&&!Ee(e.kategoriya_obekta,"Коммерческая"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Земля/Участок)"})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vnutri_est"),columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Забор","Катлаван","Пожарная сигнализация","Видеонаблюдение","Сигнализация","Разгрузочный пандус"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("ryadom_est"),columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Охрана","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}}],rc=[{type:o.Paper,hidden:e=>!Ds(e.fieldVisibility,"zagolovok","kategoriya_obekta","prodazha","arenda","podkategoriya_obekta","raspolozhenie_obekta","istochnik","tip_nedvizhimosti","vid_obekta","vid_liczenzii"),fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Основная информация"})},{type:o.Text,hidden:e=>!e.fieldVisibility.has("zagolovok"),outlined:!1,name:"zagolovok",title:"Заголовок",placeholder:"Введите текст"},{type:o.Fragment,isVisible:e=>Ee(e.kategoriya_obekta,"Коммерческая"),fields:[{type:o.Combo,hidden:e=>!e.fieldVisibility.has("kategoriya_obekta"),outlined:!1,columns:"4",name:"kategoriya_obekta",title:"Категория объекта",itemList:["Жилая","Коммерческая","От застройщика"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("prodazha"),outlined:!1,columns:"4",name:"prodazha",title:"Продажа",itemList:["Прямая продажа","Рассрочка","Через банк","Обмен"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("arenda"),outlined:!1,columns:"4",name:"arenda",title:"Аренда",itemList:["Долгосрочная","Ежемесячная","Посуточная"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("podkategoriya_obekta"),outlined:!1,columns:"4",name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>Ee(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок","Здания","Базы"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("raspolozhenie_obekta"),isVisible:e=>{if(Ee(e.kategoriya_obekta,"Коммерческая")){if(Ee(e.podkategoriya_obekta,"Дома","Квартиры"))return!1;if(Ee(e.podkategoriya_obekta,"Земля/Участок"))return!1}return!0},columns:"4",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("istochnik"),isVisible:e=>!(!Ee(e.kategoriya_obekta,"Коммерческая")||!Ee(e.podkategoriya_obekta,"Дома"))||!Ee(e.podkategoriya_obekta,"Дома"),columns:"4",outlined:!1,name:"istochnik",title:"Источник",itemList:["По звонку","Личные связи","Самостоятельный поиск","Риелтор","С сайта","Прибытие в офис","OLX","Facebook","Instagram","Telegram","Эксклюзив","Другое"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("tip_nedvizhimosti"),isVisible:e=>!(!Ee(e.podkategoriya_obekta,"Квартиры")||!Ee(e.kategoriya_obekta,"Коммерческая","Жилая")),columns:"4",outlined:!1,name:"tip_nedvizhimosti",title:"Тип недвижимости",itemList:["Вторичное жилье","Новостройка"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("vid_obekta"),isVisible:e=>{let t=!1;return t=t||Ee(e.podkategoriya_obekta,"Дома"),t},columns:"4",outlined:!1,name:"vid_obekta",title:"Вид объекта",itemList:["Дом","Коттедж","Таунхаус","ЖАКТ","Часть дома","Дача"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vid_liczenzii"),isVisible:e=>!(!Ee(e.kategoriya_obekta,"Коммерческая")||!Ee(e.podkategoriya_obekta,"Земля/Участок")),columns:"4",outlined:!1,name:"vid_liczenzii",title:"Вид лицензии",itemList:["Коммерческая","Жилая"]}]},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"kategoriya_obekta","prodazha","arenda","podkategoriya_obekta","istochnik","tip_nedvizhimosti","vid_obekta","raspolozhenie_obekta","vid_liczenzii"),isVisible:e=>!Ee(e.kategoriya_obekta,"Коммерческая"),fields:[{type:o.Combo,hidden:e=>!e.fieldVisibility.has("kategoriya_obekta"),outlined:!1,columns:"4",name:"kategoriya_obekta",title:"Категория объекта",itemList:["Жилая","Коммерческая","От застройщика"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("prodazha"),outlined:!1,columns:"4",name:"prodazha",title:"Продажа",itemList:["Прямая продажа","Рассрочка","Через банк","Обмен"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("arenda"),outlined:!1,columns:"4",name:"arenda",title:"Аренда",itemList:["Долгосрочная","Ежемесячная","Посуточная"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("podkategoriya_obekta"),outlined:!1,columns:"4",name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>!Ee(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("istochnik"),columns:"4",outlined:!1,name:"istochnik",title:"Источник",itemList:["По звонку","Личные связи","Самостоятельный поиск","Риелтор","С сайта","Прибытие в офис","OLX","Facebook","Instagram","Telegram","Эксклюзив","Другое"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("tip_nedvizhimosti"),isVisible:e=>!!Ee(e.podkategoriya_obekta,"Квартиры")&&!Ee(e.kategoriya_obekta,"Коммерческая"),columns:"4",outlined:!1,name:"tip_nedvizhimosti",title:"Тип недвижимости",itemList:["Вторичное жилье","Новостройка"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("vid_obekta"),isVisible:e=>{let t=!1;return t=t||Ee(e.podkategoriya_obekta,"Дома"),t},columns:"4",outlined:!1,name:"vid_obekta",title:"Вид объекта",itemList:["Дом","Коттедж","Таунхаус","ЖАКТ","Часть дома","Дача"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("raspolozhenie_obekta"),isVisible:e=>{let t=!1;return t=t||Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&!Ee(e.podkategoriya_obekta,"Дома"),t=t&&!Ee(e.podkategoriya_obekta,"Земля/Участок"),t},columns:"4",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vid_liczenzii"),isVisible:e=>{let t=!1;return t=t||Ee(e.podkategoriya_obekta,"Земля/Участок"),t},columns:"4",outlined:!1,name:"vid_liczenzii",title:"Вид лицензии",itemList:["Коммерческая","Жилая"]}]}]},...lc,...nc,...oc,...ac];window.apartment_filters=rc;const sc=new class{constructor(){i(this,"reloadSubject",new b),i(this,"columnMap",new Map),i(this,"getFields",(e=>this.columnMap.get(e)||[])),i(this,"setFields",((e,t)=>{this.columnMap.set(e,t),this.reloadSubject.next()})),i(this,"clear",(e=>{e?this.columnMap.delete(e):this.columnMap.clear()})),v(this,{columnMap:S,clear:Yt})}};bs.apartmentViewService.updateSubject.subscribe((([e])=>{sc.clear(e)})),bs.routerService.listen((({action:e})=>{"PUSH"===e&&sc.clear()}));const dc=new class{constructor(){i(this,"reloadSubject",new b),i(this,"columnMap",new Map),i(this,"getFields",(e=>this.columnMap.get(e)||[])),i(this,"setFields",((e,t)=>{this.columnMap.set(e,t),this.reloadSubject.next()})),i(this,"clear",(e=>{e?this.columnMap.delete(e):this.columnMap.clear()})),v(this,{columnMap:S,clear:Yt})}};bs.bidViewService.updateSubject.subscribe((([e])=>{dc.clear(e)})),bs.routerService.listen((({action:e})=>{"PUSH"===e&&dc.clear()}));const cc=G(),mc=(e,t)=>"apartment"===t?sc.getFields(e):"bid"===t?dc.getFields(e):[],pc=({payload:e,mode:t})=>{const{push:i,pop:a}=Kt(),{pickData:o,render:l}=Xt({animation:"none",title:"Критерии автоподбора",history:cc,routes:tc,AfterTitle:({onClose:e})=>he(Be,{size:"small",onClick:e,children:he(Ye,{})}),fetchState:async e=>"apartment"===t?await bs.apartmentViewService.read(e):"bid"===t?await bs.bidViewService.read(e):void 0,mapInitialData:e=>({fields:mc(e,t)}),mapParams:async(i,[a])=>{const o=await bs.featureService.getFeatures();return{apartment_fields:"apartment"===t?re(rc,a,e,o).visible:[],bid_fields:"bid"===t?re(rc,a,e,o).visible:[]}},mapPayload:()=>e,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),onSubmit:(e,i)=>(i&&((e,t,i)=>{"apartment"===i?sc.setFields(e,t):"bid"===i&&dc.setFields(e,t)})(e,i.fields,t),!0),onClose:()=>{a()},submitLabel:"Применить"});return e=>{i({id:"apartment_autofind_columns",render:l,onInit:()=>{"apartment"===t&&cc.push("/apartment_columns"),"bid"===t&&cc.push("/bid_columns")},onMount:()=>{o(e)}})}},uc=async({name:e=r().format("DD.MM.YYYY-HH:mm"),columns:t,handler:i,payload:a,selectedRows:o,query:{filterData:l={},limit:n=25,page:s=0,chipData:d={},search:c="",sortModel:m=[]}={}})=>{const p=[],u=t.filter((({type:e})=>e!==tt.Action)).filter((({headerName:e})=>e)).filter((({field:e})=>e));p.push(u.map((({headerName:e})=>e||"")));let h="function"==typeof i?await i(l,{limit:n,offset:n*s},m,d,c,a):i;"rows"in h&&(h=h.rows),o&&(h=h.filter((e=>o.includes(e.id))));for(const r of h){const e=[];for(const{field:t,compute:i,serialize:o}of u){let l;o?l=await o(r,a):i?l=await i(r,a):t&&(l=r[t]),"string"==typeof l?e.push(l):"number"==typeof l||"boolean"==typeof l?e.push(String(l)):e.push("")}p.push(e)}const y=Jt.aoa_to_sheet(p),b=Jt.book_new();Jt.book_append_sheet(b,y,e);const _=Zt(b,{type:"array",bookType:"xlsx"}),v=new Blob([_],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),f=URL.createObjectURL(v);yt(f,"".concat(e,".xlsx")),bs.routerService.subscribeLeave((()=>{URL.revokeObjectURL(f)}))},hc=[{type:It.Add,isDisabled:(e,{permissions:t})=>!t.hasBidCreatePermission,label:"Создать"},{type:It.Fab,action:"column-setup-action",icon:Mt,label:"Колонки"},{type:It.Menu,options:[{action:"add-action",isDisabled:(e,{permissions:t})=>!t.hasBidCreatePermission},{action:"update-now"},{action:"resort-action"},{action:"drop-filters"},{action:"excel-action",isVisible:(e,{permissions:t})=>t.hasOfficeManagerFlagPermission,label:"Скачать лист Excel",icon:jt}]}],yc=[{type:tt.Compute,sortable:!1,field:"index",description:"Номер заявки",headerName:"Номер",element:({index:e})=>he(gt,{content:e}),width:()=>100},{type:tt.Text,field:"zagolovok",description:"Заголовок заявки",headerName:"Заголовок",element:({zagolovok:e})=>he(wt,{title:e,children:he(Ne,{variant:"body1",sx:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},children:e})}),width:()=>200},{type:tt.Compute,isVisible:({payload:{permissions:e}})=>e.hasFioPermission,sortable:!1,field:"fio",description:"Фамилия, имя, отчество контакта",compute:async({contact_id:e})=>{const t=await bs.contactViewService.tryRead(e);return t?t.fio:""},headerName:"Ф.И.О.",width:()=>125},{type:tt.Compute,isVisible:({payload:{permissions:e}})=>e.hasPreviewModeDisabled,sortable:!1,field:"telefon",description:"Номер телефона контакта",serialize:async({id:e,contact_id:t})=>{if(await bs.permissionRequestService.getOwnerContactPermissionByBidId(e)){const e=await bs.contactViewService.tryRead(t);return e?e.telefon:""}return"Скрыто"},element:({id:e,contact_id:t})=>he(rt,{payload:e,condition:e=>bs.permissionRequestService.getOwnerContactPermissionByBidId(e),Loading:"Загрузка",Else:"Скрыто",children:he(Le,{payload:t,children:async e=>{const t=await bs.contactViewService.tryRead(e);return t?t.telefon:""}})}),headerName:"Телефон",width:()=>125},{type:tt.Compute,field:"kategoriya_obekta",description:"Категория объекта",compute:e=>e.kategoriya_obekta||"",headerName:"Категория",width:()=>100},{type:tt.Compute,field:"podkategoriya_obekta",description:"Подкатегория объекта",compute:e=>e.podkategoriya_obekta||"",headerName:"Подкатегория",width:()=>100},{type:tt.Compute,field:"prodazha_arenda",description:"Покупка/Аренда",headerName:"Тип сделки",serialize:({prodazha:e,arenda:t})=>[...e||[],...t||[]].join(", "),element:({prodazha:e,arenda:t})=>{const i=[...e||[],...t||[]];return he(Te,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",gap:1},children:[!i.length&&"",i.map((e=>he(Ut,{label:e})))]})},width:()=>170},{type:tt.Compute,field:"czena_prodazha",description:"Покупка",isVisible:({payload:e})=>e.permissions.hasOwnerPricePermission,serialize:async e=>await bs.exchangeService.getBidProdPriceLabel(e),element:e=>he(Le,{payload:e,children:async()=>he("pre",{children:await bs.exchangeService.getBidProdPriceLabel(e,!0)})}),headerName:"Покупка",width:()=>100},{type:tt.Compute,field:"czena_arenda",description:"Аренда",isVisible:({payload:e})=>e.permissions.hasOwnerPricePermission,serialize:async e=>await bs.exchangeService.getBidRentPriceLabel(e),element:e=>he(Le,{payload:e,children:async()=>he("pre",{children:await bs.exchangeService.getBidRentPriceLabel(e,!0)})}),headerName:"Аренда",width:()=>100},{type:tt.Compute,sortable:!1,description:"Статус заявки",field:"status",headerName:"Статус",compute:async({id:e})=>await bs.dealViewService.readStatusByBidId(e),width:()=>100},{type:tt.Compute,headerName:"Создано",description:"Дата создания заявки",compute:({$createdAt:e})=>r(e).format("DD/MM/YYYY"),field:"$createdAt",width:()=>145},{type:tt.Compute,headerName:"Обновлено",description:"Дата обновления заявки",compute:({$updatedAt:e})=>r(e).format("DD/MM/YYYY"),field:"$updatedAt",width:()=>145},{type:tt.Compute,headerName:"Создал",description:"Сотрудник, добавивший заявку в базу",field:"system_created_by",serialize:async({system_created_by:e})=>{if(!e)return"Не указано";const t=await bs.userViewService.read(e);return[t.last_name,t.first_name,t.middle_name].filter((e=>e)).join(" ")},element:e=>he(Le,{payload:e,children:async e=>{if(!e.system_created_by)return"Не указано";const t=await bs.userViewService.read(e.system_created_by);return[t.last_name,t.first_name,t.middle_name].filter((e=>e)).join(" ")}}),width:()=>100},{type:tt.Action,headerName:"Действие",sortable:!1,width:()=>100}],bc=[{label:"Редактировать",isDisabled:(e,{permissions:t})=>!t.hasBidUpdatePermission,action:"edit-action",icon:qt},{label:"В архиве",action:"toggle-archive",icon:Pt,isVisible:({system_is_archive:e})=>!e},{label:"В архиве",action:"toggle-archive",icon:Et,isVisible:({system_is_archive:e})=>!!e},{label:"Создать копию",isVisible:(e,{permissions:t})=>t.hasSuperAdminFlagPermission,action:"copy-action",icon:Ot}],_c=[{label:"Жилая",name:"zhilaya"},{label:"Коммерческая",name:"kommercheskaya"},{label:"От застройщика",name:"novostrojka"}],vc=Fs()((e=>({root:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:e.spacing(1),marginBottom:e.spacing(1),gap:e.spacing(1)},stretch:{flex:2}}))),fc=[{action:"excel-action",isDisabled:e=>!e.length,label:"Скачать Excel"}],gc=({payload:e})=>{const{classes:t}=vc(),{selectedRows:i}=Qt(),a=pc({payload:e,mode:"apartment"}),{loading:o}=ei(),{columns:l}=ti({columns:yc,storageKey:"bid_columns"}),n=ue.useMemo((()=>l.filter((({type:e})=>e!==tt.Action))),[l]),r=Dt(i),s=ii((async t=>{await uc({handler:()=>t,columns:n,payload:e})}));return he(ai,{className:t.root,children:[he(Ne,{className:t.stretch,fontWeight:"bold",children:"Подходящие заявки"}),he(pt,{variant:"outlined",onClick:()=>a(e.id),children:"Указать критерии"}),he(xt,{disabled:o,payload:i,options:fc,onAction:async e=>{"excel-action"===e&&await s(r.current)}})]})},kc=new Set(["system_metro","system_rajon","system_mahallya","system_rent_price","system_rent_price_ot","system_rent_price_do","system_rent_kom_price","system_rent_kom_price_ot","system_rent_kom_price_do","system_prod_price","system_prod_price_ot","system_prod_price_do","system_prod_kom_price","system_prod_kom_price_ot","system_prod_kom_price_do"]),wc=e=>{var t;const i={};for(const a of Object.keys(e||{}))Array.isArray(e[a])&&!(null==(t=e[a])?void 0:t.length)||null!==e[a]&&""!==e[a]&&!1!==e[a]&&kc.has(a)&&(i[a]=e[a]);return i},Sc=[{id:"contact",label:"Контакт"},{id:"parameter",label:"Заявка"},{id:"service_comment",label:"Служебный комментарий"},{id:"documents",label:"Документы"}],zc=Fs()((e=>({root:{["& .".concat("react-declatative__master-detail-header")]:{position:"sticky",top:0,background:"white",marginBottom:e.spacing(1)}}}))),Vc=({children:e,payload:t,history:i})=>{const{classes:a}=zc(),[o,l]=ue.useState((()=>pm(i)));return he(fe,{className:a.root,activeOption:o,withTransparentTabs:!0,withMenuCollapse:!0,payload:t,mode:j.Tabs,options:Sc,onActiveOptionChange:(e,t)=>{t||("contact"===e&&i.replace("/bid/contact"),"parameter"===e&&i.replace("/bid/parameter"),"service_comment"===e&&i.replace("/bid/service_comment"),"documents"===e&&i.replace("/bid/documents"),l(e))},children:e})},xc=Fs()((e=>({listItemAccient:{background:ze(e.palette.getContrastText(e.palette.background.paper),.018)}})));Se.createLoader(28);const Ac=[{type:tt.Compute,sortable:!1,field:"index",headerName:"Номер",element:({index:e})=>he(gt,{content:String(e)}),width:()=>100},{type:tt.Compute,sortable:!1,field:"photo",headerName:"Фото",width:()=>170,element:Ed},{type:tt.Compute,field:"zagolovok",headerName:"Заголовок",element:({zagolovok:e})=>he(wt,{title:e,children:he(Ne,{variant:"body1",sx:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},children:e})}),width:()=>200},{type:tt.Text,field:"kolichestvo_komnat",headerName:"Комнат",width:()=>60},{type:tt.Text,field:"etazh",headerName:"Этаж",width:()=>60},{type:tt.Text,field:"etazhnost",headerName:"Этажность",width:()=>80},{type:tt.Compute,field:"ploshhad",compute:e=>[e.obshhaya_ploshhad,e.ploshhad_doma].filter((e=>!!e)).join(", "),headerName:"М²",width:()=>60},{type:tt.Compute,field:"adres",compute:e=>[e.strana,e.gorod,e.oblast,e.rajon,e.mahallya,e.ulicza,e.orientir].filter((e=>!!e)).join(", "),headerName:"Адрес",width:()=>125},{type:tt.Compute,field:"kategoriya_obekta",compute:e=>{var t;return(null==(t=e.kategoriya_obekta)?void 0:t.join(", "))||""},headerName:"Категория",width:()=>100},{type:tt.Compute,isVisible:({payload:e})=>e.permissions.hasOwnerPricePermission,field:"czena_prodazha",compute:async e=>await bs.exchangeService.getApartmentProdPriceLabel(e),headerName:"Продажа",width:()=>100},{type:tt.Compute,field:"czena_arenda",isVisible:({payload:e})=>e.permissions.hasOwnerPricePermission,compute:async e=>await bs.exchangeService.getApartmentRentPriceLabel(e),headerName:"Аренда",width:()=>100},{type:tt.Compute,field:"istochnik",compute:e=>e.istochnik||"",headerName:"Источник",width:()=>100},{type:tt.Compute,sortable:!1,field:"status",headerName:"Статус",compute:async({id:e})=>await bs.dealViewService.readStatusByApartmentId(e),width:()=>100},{type:tt.Compute,isVisible:({payload:{permissions:e}})=>e.hasFioPermission,sortable:!1,field:"fio",compute:async({contact_id:e})=>{const t=await bs.contactViewService.tryRead(e);return t?t.fio:""},headerName:"Ф.И.О.",width:()=>125},{type:tt.Compute,isVisible:({payload:{permissions:e}})=>e.hasPreviewModeDisabled,sortable:!1,field:"telefon",element:({id:e,contact_id:t})=>he(rt,{payload:e,condition:e=>bs.permissionRequestService.getOwnerContactPermissionByApartmentId(e),Loading:"Загрузка",Else:"Скрыто",children:he(Le,{payload:t,children:async e=>{const t=await bs.contactViewService.tryRead(e);return t?t.telefon:""}})}),headerName:"Телефон",width:()=>125},{type:tt.Compute,field:"$createdAt",headerName:"Создано",compute:({$createdAt:e})=>r(e).format("DD/MM/YYYY"),width:()=>145},{type:tt.Compute,field:"$updatedAt",headerName:"Обновлено",compute:({$updatedAt:e})=>r(e).format("DD/MM/YYYY"),width:()=>145},{type:tt.Compute,headerName:"Создал",description:"Сотрудник, добавивший объект в базу",field:"system_created_by",element:e=>he(Le,{payload:e,children:async e=>{if(!e.system_created_by)return"Не указано";const t=await bs.userViewService.read(e.system_created_by);return[t.last_name,t.first_name,t.middle_name].filter((e=>e)).join(" ")}}),width:()=>100}],Tc={"Категория объекта":"📌","Подкатегория объекта":"📌","Название ЖК":"👷","Тип недвижимости":"🏗️","Район":"📍","Адрес":"🛣️","Ориентир":"🚏","Метро":"🚊","Количество комнат":"🚪","Количество спален":"🛏️","Количество соток":"🏡","Этаж":"🪜","Этажность":"🏢","Бассейн":"🏊","Общая площадь М²":"📐","Площадь дома М²":"📐","Состояние ремонта":"⚒️","Назначение объекта":"✅","Расположение объекта":"🏫","Состояние объекта":"📊","Примечание":"💡","Тип сделки":"🔹"},Cc=(e,t,i)=>{const{isVisible:a=(()=>!0)}=e;if(!a(t,i)){if(e.fields)for(const a of e.fields)a.isVisible=()=>!1,Cc(a,t,i);e.child&&(e.child.isVisible=()=>!1,Cc(e.child,t,i))}},Fc=async(e,t,i)=>{let a="";e.opisanie&&(a+="<blockquote>".concat(e.opisanie,"</blockquote>")),a+="<br>";for(const[l,n]of t.entries())a+="<figure>",a+='<img src="'.concat(n,'" />'),a+="<figcaption><em>Изображение".concat(oi.nbsp).concat(l+1,"</em></figcaption>"),a+="</figure>";a+="<br>",a+=await(async(e,t)=>{let i="",a=h.cloneDeep(Nm);a=te(a),a.forEach((i=>Cc(i,e,t)));const o=[];for(const n of a){const{title:i,isVisible:a=(()=>!0),compute:l}=n;a(e,t)&&l&&i&&"Источник"!==i&&"Категория объекта"!==i&&"Подкатегория объекта"!==i&&"Тип клиента"!==i&&"Статус клиента"!==i&&"Лояльность клиента"!==i&&"Фактический адрес"!==i&&"Серия и номер паспорта"!==i&&"Дата выдачи паспорта"!==i&&"ПИНФЛ"!==i&&"ИНН"!==i&&"Кадастровый номер объекта"!==i&&"Кадастровый номер земли"!==i&&"Телефон"!==i&&"Email"!==i&&"№ дома"!==i&&"№ квартиры"!==i&&"Код домофона"!==i&&"Подъезд №"!==i&&o.push(n)}o.sort((({title:e=""},{title:t=""})=>(h.get(Tc,t)?1:0)-(h.get(Tc,e)?1:0)));const l=o.findIndex((({title:e=""})=>!h.get(Tc,e)));for(const[n,{title:r,compute:s}]of o.entries())n===l&&(i+="<br>"),s&&r&&(i+="<li><p>".concat(h.get(Tc,r)||"","<b>").concat(r,":").concat(oi.nbsp,"</b>").concat(await s(e,t),"</p></li>"));return i+="<br>",i})(e,i),a+="<p>",a+=await(async e=>{const t=await bs.apartmentViewService.read(e);let i="";const a=e=>"uzs"===e?"сум":"у.е.";let o=!1;return Ee(t.kategoriya_obekta,"Коммерческая")?(t.prodazha&&t.prod_kom_startovaya_czena&&(i+="<p>💵 <b>Продажа:".concat(oi.nbsp,"</b> ").concat(t.prod_kom_startovaya_czena," ").concat(a(t.prod_kom_startovaya_czena_valyuta),"</p>"),o=!0),t.arenda&&t.rent_kom_startovaya_czena&&(i+="<p>🔑 <b>В аренду:".concat(oi.nbsp,"</b> ").concat(t.rent_kom_startovaya_czena," ").concat(a(t.rent_kom_startovaya_czena_valyuta)),t.rent_kom_komissiya_agenstva&&(i+=" (Есть комиссия)"),i+="</p>",o=!0)):Ee(t.kategoriya_obekta,"Жилая","От застройщика")&&(t.prodazha&&t.prod_startovaya_czena&&(i+="<p>💵 <b>Продажа:".concat(oi.nbsp,"</b> ").concat(t.prod_startovaya_czena," ").concat(a(t.prod_startovaya_czena_valyuta),"</p>"),o=!0),t.arenda&&t.rent_startovaya_czena&&(i+="<p>🔑 <b>В аренду:".concat(oi.nbsp,"</b> ").concat(t.rent_startovaya_czena," ").concat(a(t.rent_startovaya_czena_valyuta)),t.rent_komissiya_agenstva&&(i+=" (Есть комиссия)"),i+="</p>",o=!0)),o&&(i+="\n\n"),i})(e.id),a+="</p>",a+="<br>";const o={YouTube:await bs.dictService.getYoutubePrimaryLink(),Instagram:await bs.dictService.getInstagramPrimaryLink(),Facebook:await bs.dictService.getFacebookPrimaryLink(),Telegram:await bs.dictService.getTelegramPrimaryLink()};return a+="<br>",a+="<p>",a+=Object.entries(o).filter((([,e])=>e)).map((([e,t])=>"<a href='".concat(t,"'>").concat(e,"</a>"))).join("".concat(oi.nbsp,"|").concat(oi.nbsp)),a+="</p>",a};const Lc=e=>{const t=document.createElement("canvas"),i=t.getContext&&t.getContext("2d");let a,o,l,n,r={r:0,g:0,b:0},s=0;if(l=t.height=e.naturalHeight||e.offsetHeight||e.height,o=t.width=e.naturalWidth||e.offsetWidth||e.width,!i)return null;i.drawImage(e,0,0),a=i.getImageData(0,0,o,l),n=a.data.length;for(var d=0;d<n;d+=4)r.r+=a.data[d],r.g+=a.data[d+1],r.b+=a.data[d+2],s++;return r.r=Math.floor(r.r/s),r.g=Math.floor(r.g/s),r.b=Math.floor(r.b/s),function({r:e,g:t,b:i},a){return e=(e=Math.floor(e*(100+a)/100))<255?e:255,t=(t=Math.floor(t*(100+a)/100))<255?t:255,i=(i=Math.floor(i*(100+a)/100))<255?i:255,e=Math.round(e),t=Math.round(t),i=Math.round(i),"#"+(1==e.toString(16).length?"0"+e.toString(16):e.toString(16))+(1==t.toString(16).length?"0"+t.toString(16):t.toString(16))+(1==i.toString(16).length?"0"+i.toString(16):i.toString(16))}(r,-40)},Ic=1024,Mc=async(e,t=!1)=>{try{const i=await(async(e,t=!1)=>{const i=document.createElement("img");return i.src=e,i.crossOrigin="anonymous",Promise.resolve().then((()=>new Promise(((e,t)=>{i.addEventListener("load",(()=>e())),i.addEventListener("error",(()=>t()))})))).then((()=>new Promise((async(e,a)=>{const o=document.createElement("canvas");o.width=Math.max(i.naturalHeight,i.naturalWidth),o.height=Math.max(i.naturalHeight,i.naturalWidth);const l=o.getContext("2d");if(!l)return void a("there's an error");if(!t){const e=Lc(i);l.fillStyle=e||"#ccc",l.fillRect(0,0,o.width,o.height)}l.translate(o.width/2,o.height/2),l.drawImage(i,-i.width/2,-i.height/2),l.translate(0,0);const n=await createImageBitmap(o);o.width=Ic,o.height=Ic,l.drawImage(n,0,0,Ic,Ic),o.toBlob((t=>{t?e(t):a("there's an error")}))}))))})(e,t);return i?URL.createObjectURL(i):null}catch(i){return null}},jc=li.create({body:{fontFamily:"Roboto",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start",paddingTop:35,paddingBottom:65,paddingHorizontal:35},header:{minWidth:"15%",maxWidth:"15%",paddingBottom:20},logo:{width:"auto",height:"auto"},content:{flex:1,width:"100%",maxHeight:"80%",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start"},apartmentNumber:{position:"absolute",fontSize:12,bottom:30,left:0,right:0,textAlign:"center",color:"grey"},image:{objectFit:"contain",height:"auto",width:"auto"},textContainer:{display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start"},imageContainer:{paddingVertical:10,marginVertical:10,display:"flex",alignContent:"center",justifyContent:"center",width:"100%"},stretchContainer:{flex:1},inline:{display:"flex",flexDirection:"row"}}),Bc=({title:e,payload:t})=>async i=>{const a=await Promise.all(i.map((async e=>{const t=e.apartment_images||[];return{data:e,images:(await Promise.all(t.map((async(e,t)=>0!==t?null:bs.appwriteService.getImageURL(e))))).filter((e=>e))}}))),o=await(async(e,t)=>{const i=await bs.featureService.getFeatures(),a=await(async()=>{const{logo_file_id:a}=await bs.settingsViewService.getValue(),o=a?await bs.appwriteService.getImageURL(a):null;return he(mi,{children:await Promise.all(e.map((async e=>{const{visible:a}=re(Nm,e.data,t,i),l=await bs.exchangeService.getApartmentRentPriceLabel(e.data),n=await bs.exchangeService.getApartmentProdPriceLabel(e.data);return he(ri,{size:"A4",style:jc.body,children:[!!o&&he(si,{style:jc.header,children:he(di,{style:jc.logo,src:o})}),he(si,{style:jc.content,children:[he(si,{style:jc.textContainer,children:[await Promise.all(a.map((async({title:i,name:a,compute:o})=>{let l="";return i?"Источник"===i||"Описание"===i||"Название ЖК"===i?null:(a&&(l=h.get(e.data,a),l=Array.isArray(l)?l.join(", "):l),o&&(l=await o(e.data,t),l=Array.isArray(l)?l.join(", "):l),l?he(_e,{children:he(si,{style:jc.inline,children:[he(ci,{style:{fontSize:12,fontWeight:"normal"},children:[i,":",oi.nbsp]}),he(ci,{style:{fontSize:12,fontWeight:"bold"},children:l})]})}):null):null}))),!!l&&he(si,{style:jc.inline,children:[he(ci,{style:{fontSize:12,fontWeight:"normal"},children:["Цена (Аренда):",oi.nbsp]}),he(ci,{style:{fontSize:12,fontWeight:"bold"},children:l})]}),!!n&&he(si,{style:jc.inline,children:[he(ci,{style:{fontSize:12,fontWeight:"normal"},children:["Цена (Продажа):",oi.nbsp]}),he(ci,{style:{fontSize:12,fontWeight:"bold"},children:n})]})]}),e.images[0]&&he(si,{style:jc.imageContainer,children:he(di,{style:jc.image,src:e.images[0]})}),he(si,{style:jc.stretchContainer})]}),he(ci,{style:jc.apartmentNumber,fixed:!0,children:"Объект №".concat(e.data.index)})]})})))})})();return await ni(a).toBlob()})(a,t),l=URL.createObjectURL(o);bs.routerService.subscribeLeave((()=>URL.revokeObjectURL(l))),yt(l,"".concat(e||r().format("DD/MM/YYYY HH:mm"),".pdf"))},Rc=Fs()((e=>({root:{display:"flex",alignItems:"center",justifyContent:"stretch",padding:e.spacing(1),marginBottom:e.spacing(1),gap:e.spacing(1)},stretch:{flex:2}}))),Dc=[{action:"pdf-action",isDisabled:e=>!e.length,label:"Скачать PDF"},{action:"excel-action",isDisabled:e=>!e.length,label:"Скачать Excel"},{action:"telegraph-action",isDisabled:e=>!e.length,isVisible:()=>!1,label:"Опубликовать в Telegraph"}],qc=({payload:e})=>{const t=pc({payload:e,mode:"bid"}),{classes:i}=Rc(),{loading:a}=ei(),{selectedRows:o}=Qt(),l=Dt(o),{columns:n}=ti({columns:Nd,storageKey:"apartment_columns"}),r=ue.useMemo((()=>n.filter((({type:e})=>e!==tt.Action))),[n]),s=pi({large:!0,title:"Предпросмотр",canCancel:!1}),d=(({payload:e})=>async t=>{const i=t.apartment_images||[],a=await Promise.all(i.map((async e=>{const i=await bs.appwriteService.getImageURL(e);let a=await Xr(i,e,"№".concat(t.index));if(a=a?await Mc(a):a,a){const e=await fetch(a).then((e=>e.blob()));URL.revokeObjectURL(a);const t=await bs.appwriteService.uploadBlob(e,"__DANGEROUS_WILL_BE_REMOVED_TELEGRAPH__.png");return await bs.appwriteService.getFileURL(t)}return bs.appwriteService.getFileURL(e)})));let o="🔥 ";t.prodazha&&!t.arenda&&(o+="Продажа! "),t.arenda&&!t.prodazha&&(o+="Аренда! "),t.zagolovok&&(o+="".concat(t.zagolovok," "));const l=await bs.publishService.publishTelegraph(o,await Fc(t,a,e));return console.log({title:o,result:l}),l.response})({payload:e}),c=Bc({title:e.zagolovok,payload:e}),{handleLoadStart:m,handleLoadEnd:p}=$e({history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)}),{execute:u}=be((async e=>{const t=[];for(const a of e.filter((e=>e.zagolovok)))t.push({label:a.zagolovok,link:await d(a)});const i=t.filter((({link:e})=>e)).map((({label:e,link:t})=>"".concat(e,"\n").concat(t,"\n"))).join("\n");await s({value:i}).toPromise(),ui(i),await bs.alertService.notify("Сообщение скопировано в буфер обмена!")}),{onLoadStart:m,onLoadEnd:p,fallback:bs.errorService.handleGlobalError}),{execute:h}=be((async e=>{await c(e)}),{onLoadStart:m,onLoadEnd:p,fallback:bs.errorService.handleGlobalError}),y=ii((async t=>{await uc({handler:()=>t,columns:r,payload:e})}));return he(ai,{className:i.root,children:[he(Ne,{className:i.stretch,fontWeight:"bold",children:"Подходящие объекты"}),he(pt,{variant:"outlined",onClick:()=>t(e.id),children:"Указать критерии"}),he(xt,{disabled:a,payload:o,options:Dc,onAction:async e=>{"telegraph-action"===e&&await u(l.current),"pdf-action"===e&&await h(l.current),"excel-action"===e&&await y(l.current)}})]})},Pc=({fieldData:e,payload:t})=>{const i=Dt(e),a=Ve(dc.reloadSubject),o=Ke(e);ue.useEffect((()=>o.subscribe((()=>{a.next()}))),[]);const l=hi(),n=Ym({payload:t});ue.useEffect((()=>l.subscribe((e=>{n(e.$id)}))),[]);const{columns:r}=ti({storageKey:"apartment_columns",columns:Ac}),s=ue.useCallback((()=>{const{current:e}=i,a=Jd(e);{const i=dc.getFields(t.id);i.length&&Object.keys(a).forEach((t=>{i.includes(t)||(e[t]=void 0)}))}const o=wc({system_metro:e.system_metro,system_rajon:e.system_rajon,system_mahallya:e.system_mahallya,system_rent_price_ot:e.system_rent_price_ot,system_rent_price_do:e.system_rent_price_do,system_rent_kom_price_ot:e.system_rent_kom_price_ot,system_rent_kom_price_do:e.system_rent_kom_price_do,system_prod_price_ot:e.system_prod_price_ot,system_prod_price_do:e.system_prod_price_do,system_prod_kom_price_ot:e.system_prod_kom_price_ot,system_prod_kom_price_do:e.system_prod_kom_price_do});return bs.loggerService.log("bid_card_fields systemData",{systemData:o}),bs.loggerService.log("bid_card_fields filterData",{filterData:a}),{...a,...o}}),[]);return he(Te,{sx:{pointerEvents:"all",height:"max(60vh, 350px)",mb:5},children:he(yi,{withLoader:!0,withInitialLoader:!0,reloadSubject:a,selectionMode:lt.Multiple,AfterOperationList:qc,handler:(e,...t)=>bs.apartmentViewService.paginate({...s(),_accessLevel:5,_mode:"audit"},...t),isRowDisabled:({system_access_level:e})=>e>t.accessLevel,onRowClick:e=>l.next(e),columns:r,payload:()=>({...t,zagolovok:e.zagolovok})})})},Ec=()=>et(bs.apartmentViewService.paginate,{onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),fallback:bs.errorService.handleGlobalError});Se.createLoader(24);const Nc=[{type:o.Fragment,isVisible:e=>!e.kontakt||!!Ee(e.kontakt,"Физическое лицо"),fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",columns:"6",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Основная информация"})},{type:o.Combo,outlined:!1,name:"kontakt",title:"Контакт",itemList:["Физическое лицо","Юридическое лицо"]},{type:o.Text,outlined:!1,name:"fio",title:"Ф.И.О."},{type:o.Text,description:"Основной",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon",title:"Телефон"},{type:o.Combo,outlined:!1,name:"tip_klienta",title:"Тип клиента",itemList:["Собственник","Доверенное лицо","Риелтор","Информатор","Застройщик"]},{type:o.Combo,outlined:!1,name:"status_klienta",title:"Статус клиента",itemList:["VIP-клиент","Клиент","Постоянный клиент","Специальный клиент","Черный список"]},{type:o.Combo,outlined:!1,name:"loyalnost_klienta",title:"Лояльность клиента",itemList:["Высокая","Средняя","Низкая"]},{type:o.Text,outlined:!1,name:"email",title:"Email"},{type:o.Fragment,isVisible:()=>{let e=!0;return e=e&&!bs.routerService.location.pathname.includes("bid_view"),e=e&&!bs.routerService.location.pathname.includes("bid_edit"),e},fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"subtitle2",fontWeight:"bold",sx:{textDecoration:"underline",mt:2,mb:1},children:"Кадастр"})},{type:o.Text,outlined:!1,name:"kadastrovyj-nomer_obekta",title:"Кадастровый номер объекта"},{type:o.Text,outlined:!1,name:"kadastrovyj-nomer_zemli",title:"Кадастровый номер земли"}]}]},{type:o.Group,fieldBottomMargin:"0",fieldRightMargin:"0",columns:"6",fields:[{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Паспортные данные"})},{type:o.Text,outlined:!1,name:"seriya-i-nomer_pasporta",title:"Серия и номер паспорта"},{type:o.Combo,outlined:!1,name:"pol",title:"Пол",itemList:["Мужской","Женский"]},{type:o.Text,outlined:!1,name:"pinfl",title:"ПИНФЛ"},{type:o.Text,outlined:!1,name:"inn",title:"ИНН"}]}]}]},{type:o.Fragment,isVisible:e=>!!Ee(e.kontakt,"Юридическое лицо"),fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",columns:"6",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Основная информация"})},{type:o.Combo,outlined:!1,name:"kontakt",title:"Контакт",itemList:["Физическое лицо","Юридическое лицо"]},{type:o.Text,outlined:!1,name:"naimenovanie_organizaczii",title:"Наименование организации"},{type:o.Text,outlined:!1,name:"fio",title:"Ф.И.О."},{type:o.Text,description:"Основной",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon",title:"Телефон"},{type:o.Combo,outlined:!1,name:"tip_klienta",title:"Тип клиента",itemList:["Собственник","Доверенное лицо","Риелтор","Информатор","Застройщик"]},{type:o.Combo,outlined:!1,name:"status_klienta",title:"Статус клиента",itemList:["VIP-клиент","Клиент","Постоянный клиент","Специальный клиент","Черный список"]},{type:o.Combo,outlined:!1,name:"loyalnost_klienta",title:"Лояльность клиента",itemList:["Высокая","Средняя","Низкая"]},{type:o.Text,outlined:!1,name:"email",title:"Email"},{type:o.Fragment,isVisible:()=>{let e=!0;return e=e&&!bs.routerService.location.pathname.includes("bid_view"),e=e&&!bs.routerService.location.pathname.includes("bid_edit"),e},fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"subtitle2",fontWeight:"bold",sx:{textDecoration:"underline",mt:2,mb:1},children:"Кадастр"})},{type:o.Text,outlined:!1,name:"kadastrovyj-nomer_obekta",title:"Кадастровый номер объекта"},{type:o.Text,outlined:!1,name:"kadastrovyj-nomer_zemli",title:"Кадастровый номер земли"}]}]},{type:o.Group,fieldBottomMargin:"0",fieldRightMargin:"0",columns:"6",fields:[{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Паспортные данные"})},{type:o.Text,outlined:!1,name:"seriya-i-nomer_pasporta",title:"Серия и номер паспорта"},{type:o.Combo,outlined:!1,name:"pol",title:"Пол",itemList:["Мужской","Женский"]},{type:o.Text,outlined:!1,name:"kem_vydan",title:"Кем выдан"},{type:o.Text,outlined:!1,name:"pinfl",title:"ПИНФЛ"},{type:o.Text,outlined:!1,name:"inn",title:"ИНН"},{type:o.Combo,outlined:!1,name:"osnovanie-deyatelnosti-dannogo_licza",title:"Основание деятельности данного лица",itemList:["На основании устава","По доверенности"]}]}]}]}];window.contact_filters=Nc;const Oc=()=>et(bs.contactViewService.paginate,{onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),fallback:bs.errorService.handleGlobalError}),Uc=[{type:o.Box,noBaseline:!0,sx:{display:"grid",gridTemplateColumns:"auto auto 1fr auto","& > .MuiGrid-root":{minWidth:"275px"},minWidth:"calc(275px * 3)",mt:-1},fields:[{type:o.Choose,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",choose:async(e,t)=>{t.pickUser(e.system_created_by?[e.system_created_by]:[]);const i=await t.userResultSubject.toPromise();if(i&&i.length){const[e]=i;return e}return null},tr:async e=>{const t=await bs.userViewService.tryRead(e);return[null==t?void 0:t.last_name,null==t?void 0:t.first_name,null==t?void 0:t.middle_name].filter((e=>e)).join(" ")||(null==t?void 0:t.$id)||""},name:"system_created_by",title:"",placeholder:"Создал"},{type:o.Combo,fieldBottomMargin:"1",fieldRightMargin:"1",outlined:!1,name:"tip_klienta",title:"",placeholder:"Тип клиента",itemList:["Собственник","Доверенное лицо","Риелтор","Информатор","Застройщик"]},{type:o.Div},{type:o.Text,fieldRightMargin:"1",fieldBottomMargin:"0",inputFormatterTemplate:"0000000000",inputFormatterAllowed:/^[0-9]/,name:"index",title:"",leadingIcon:()=>he(Te,{sx:{height:20,width:20,display:"flex",alignItems:"center",justifyContent:"center"},children:he(Ne,{textTransform:"lowercase",variant:"caption",children:"№"})}),placeholder:"",trailingIcon:()=>he(bi,{sx:{opacity:.5}}),trailingIconClick(e,t,i){e&&i("")}}]}],Hc=()=>{const{filterData:e,handleFilter:t,payload:i,loading:a}=ei(),{pickData:o,render:l,resultSubject:n}=id({payload:i}),{pickData:r,render:s,resultSubject:d}=$c({payload:i});return he(Te,{sx:{mb:1},children:[he(_i,{sx:{height:"100%",minHeight:48},hideOverflowY:!0,children:he(Te,{sx:{display:"flex",alignItems:"center",justifyContent:"stretch",pt:1,pb:1},children:he(Je,{handler:e,fields:Uc,readonly:a,change:(e,i)=>{i||t(e)},payload:()=>({...i,pickUser:o,userResultSubject:n,pickContact:r,contactResultSubject:d}),fieldDebounce:el})})}),s(),l()]})},Wc=[{type:tt.Compute,field:"fio",compute:e=>e.fio||"",headerName:"Ф.И.О. Клиента",width:()=>200},{type:tt.Compute,field:"tip_klienta",compute:e=>e.tip_klienta||"",headerName:"Тип клиента",width:()=>200},{type:tt.Compute,field:"status_klienta",compute:e=>e.status_klienta||"",headerName:"Статус клиента",width:()=>200},{type:tt.Compute,sortable:!1,field:"status",headerName:"Статус сделки",compute:async({id:e})=>await bs.dealViewService.readStatusByContactId(e),width:()=>150}],$c=({payload:e})=>{const t=Oc(),i=Ve(),{pickData:a,render:o,open:l}=at({title:"Выбор контакта",AfterTitle:({onClose:e})=>he(Be,{size:"small",onClick:e,children:he(Ye,{})}),withSearch:!0,slots:{FilterListSlot:vi},noInitialFilters:!0,withLoader:!0,fetchDebounce:el,reloadSubject:bs.userViewService.reloadSubject,selectionMode:lt.Single,AfterOperationList:Hc,onSubmit:e=>(i.next(e),!0),filterLabel:"Выбрать контакт",filters:Nc,payload:e,columns:Wc,handler:t});return{pickData:a,render:o,resultSubject:i,open:l}},Gc=[{type:o.Box,noBaseline:!0,sx:{display:"grid",gridTemplateColumns:"auto auto 1fr auto","& > .MuiGrid-root":{minWidth:"275px"},minWidth:"calc(275px * 3)",mt:-1},fields:[{type:o.Choose,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",choose:async(e,t)=>{t.pickUser(e.system_created_by?[e.system_created_by]:[]);const i=await t.userResultSubject.toPromise();if(i&&i.length){const[e]=i;return e}return null},tr:async e=>{const t=await bs.userViewService.tryRead(e);return[null==t?void 0:t.last_name,null==t?void 0:t.first_name,null==t?void 0:t.middle_name].filter((e=>e)).join(" ")||(null==t?void 0:t.$id)||""},name:"system_created_by",title:"",placeholder:"Создал"},{type:o.Choose,sx:{minWidth:"100% !important"},fieldBottomMargin:"0",fieldRightMargin:"3",columns:"4",choose:async(e,t)=>{t.pickContact(e.contact_id?[e.contact_id]:[]);const i=await t.contactResultSubject.toPromise();if(i&&i.length){const[e]=i;return e}return null},tr:async e=>{const t=await bs.contactViewService.tryRead(e);return(null==t?void 0:t.fio)||(null==t?void 0:t.id)||""},name:"contact_id",title:"",placeholder:"Владелец"},{type:o.Div},{type:o.Text,fieldRightMargin:"1",fieldBottomMargin:"0",inputFormatterTemplate:"0000000000",inputFormatterAllowed:/^[0-9]/,name:"index",title:"",leadingIcon:()=>he(Te,{sx:{height:20,width:20,display:"flex",alignItems:"center",justifyContent:"center"},children:he(Ne,{textTransform:"lowercase",variant:"caption",children:"№"})}),placeholder:"",trailingIcon:()=>he(bi,{sx:{opacity:.5}}),trailingIconClick(e,t,i){e&&i("")}}]}],Yc=()=>{const{filterData:e,handleFilter:t,payload:i,loading:a}=ei(),{pickData:o,render:l,resultSubject:n}=id({payload:i}),{pickData:r,render:s,resultSubject:d}=$c({payload:i});return he(Te,{sx:{mb:1},children:[he(_i,{sx:{height:"100%",minHeight:48},hideOverflowY:!0,children:he(Te,{sx:{display:"flex",alignItems:"center",justifyContent:"stretch",pt:1,pb:1},children:he(Je,{handler:e,fields:Gc,readonly:a,change:(e,i)=>{i||t(e)},payload:()=>({...i,pickUser:o,userResultSubject:n,pickContact:r,contactResultSubject:d}),fieldDebounce:el})})}),s(),l()]})},Kc=({payload:e,features:t})=>{const i=Ec(),a=Ve(),{columns:o}=ti({storageKey:"apartment_columns",columns:Nd}),{pickData:l,render:n,open:r}=at({title:"Выбор объекта",AfterTitle:({onClose:e})=>he(Be,{size:"small",onClick:e,children:he(Ye,{})}),withSearch:!0,withLoader:!0,withSingleChip:!0,noInitialFilters:!0,fetchDebounce:el,reloadSubject:bs.userViewService.reloadSubject,selectionMode:lt.Single,onSubmit:e=>(a.next(e),!0),AfterOperationList:Yc,filterLabel:"Выбрать объект недвижимости",filters:rc,columns:o,handler:i,payload:e,features:t,chips:Od});return{pickData:l,render:n,resultSubject:a,open:r}},Xc=[{type:o.Group,style:{minWidth:540},fields:[{type:o.Combo,title:"Тип сделки",isInvalid:e=>e.deal_type?null:"Укажите тип сделки",name:"deal_type",map:(e,t)=>{const{prod_czena_ot:i,prod_startovaya_czena_ot:a=i,prod_czena_do:o,prod_startovaya_czena_do:l=o,prod_kom_czena_ot:n,prod_kom_startovaya_czena_ot:r=n,prod_kom_czena_do:s,prod_kom_startovaya_czena_do:d=s,rent_czena_ot:c,rent_startovaya_czena_ot:m=c,rent_czena_do:p,rent_startovaya_czena_do:u=p,rent_kom_czena_ot:y,rent_kom_startovaya_czena_ot:b=y,rent_kom_czena_do:_,rent_kom_startovaya_czena_do:v=_,prod_czena_valyuta:f="usd",rent_czena_valyuta:g="usd"}=t.data;return e.deal_type&&"Продажа"===e.deal_type[0]&&(h.set(e,"price_ot",a||r),h.set(e,"price_do",l||d),h.set(e,"unit",[f||"usd"])),e.deal_type&&"Аренда"===e.deal_type[0]&&(h.set(e,"price_ot",m||b),h.set(e,"price_do",u||v),h.set(e,"unit",[g||"usd"])),e},itemList:()=>[...zn]},{type:o.Box,isVisible:({deal_type:e,price_type:t})=>!!e&&"range"===t,style:{display:"grid",gridTemplateColumns:"1fr 1fr 125px"},fields:[{type:o.Text,outlined:!1,placeholder:"Не указано",labelShrink:!0,name:"price_ot",title:"Цена От (Итог)"},{type:o.Text,outlined:!1,placeholder:"Не указано",labelShrink:!0,name:"price_do",title:"Цена До (Итог)"},{type:o.Combo,noDeselect:!0,fieldBottomMargin:"0",title:"Валюта",placeholder:"USD",itemList:["usd","uzs"],tr:e=>"uzs"===e?"SUM":"USD",defaultValue:"usd",outlined:!1,name:"unit"}]},{type:o.Text,fieldBottomMargin:"1",placeholder:"Введите комментарий",inputRows:3,labelShrink:!0,name:"comment",title:"Комментарий"},{hidden:!0,type:o.Radio,fieldBottomMargin:"0",name:"price_type",radioValue:"unset",defaultValue:"unset",title:"Цена не указана"},{hidden:!0,type:o.Radio,fieldBottomMargin:"0",name:"price_type",radioValue:"range",title:"Промежуток"}]}],Jc=[{type:o.Choose,fieldBottomMargin:"1",isInvalid:e=>e.target_apartment_id?null:"Укажите объект недвижимости",choose:async(e,t)=>{t.pickApartment(e.target_apartment_id?[e.target_apartment_id]:[]);const i=await t.apartmentResultSubject.toPromise();if(i&&i.length){const[e]=i;return e}return null},tr:async e=>{const t=await bs.apartmentViewService.tryRead(e);return(null==t?void 0:t.zagolovok)||(null==t?void 0:t.$id)||""},name:"target_apartment_id",title:"Выберите объект",placeholder:"Не выбрано"},{type:o.Text,fieldBottomMargin:"1",placeholder:"Введите комментарий",inputRows:3,labelShrink:!0,name:"comment",title:"Комментарий"},{type:o.Radio,fieldBottomMargin:"0",title:"Закрытая сделка",name:"status",radioValue:"Закрытая сделка",defaultValue:"Закрытая сделка"},{type:o.Radio,fieldBottomMargin:"0",title:"Сделка сорвана",name:"status",radioValue:"Сделка сорвана"}],Zc=[{action:"deal-end-action",isDisabled:({activeItem:e})=>!e,label:"Завершить сделку"}],Qc=Fs()((e=>({row:{display:"grid",gridTemplateColumns:"1fr 1fr auto",alignItems:"flex-end"},input:{paddingRight:"4px",paddingBottom:"4px"},onlyInput:{maxWidth:"500px",width:"100%"},select:{margin:"0 5px"},checkbox:{}}))),em=new Set(["0","1","2","3","4","5","6","7","8","9","Backspace","ArrowLeft","ArrowRight"]),tm=e=>em.has(e),im=({className:e,style:t,sx:i,value_ot:a="",value_do:o="",unit:l="usd",title:n,readonly:r,onChange:s})=>{const{reloadTrigger:d,doReload:c}=wi(),m=ue.useMemo((()=>(e=>"uzs"===e?"uzs":"usd")(l)),[l]),p=Ke(r);ue.useEffect((()=>p.subscribe(c)),[]);return he(_e,{children:[he(Ne,{sx:{mb:-2.5},variant:"caption",children:n}),he("div",{}),he("div",{}),he(Wt,{type:"number",defaultValue:a,value:r?a:void 0,className:e,style:t,sx:i,onKeyDown:e=>{tm(e.key)||e.preventDefault()},onChange:({target:e})=>{s({unit:m,value_do:o,value_ot:e.value})},variant:"standard",fullWidth:!0,InputProps:{startAdornment:he($t,{sx:{userSelect:"none",pointerEvents:"none"},position:"start",children:he(Te,{sx:{height:20,width:20,display:"flex",alignItems:"center",justifyContent:"center"},children:he(Ne,{textTransform:"lowercase",variant:"caption",children:"От"})})})}},d),he(Wt,{type:"number",defaultValue:o,value:r?o:void 0,className:e,style:t,sx:i,onKeyDown:e=>{tm(e.key)||e.preventDefault()},onChange:({target:e})=>{s({unit:m,value_do:e.value,value_ot:a})},variant:"standard",fullWidth:!0,InputProps:{startAdornment:he($t,{sx:{userSelect:"none",pointerEvents:"none"},position:"start",children:he(Te,{sx:{height:20,width:20,display:"flex",alignItems:"center",justifyContent:"center"},children:he(Ne,{textTransform:"lowercase",variant:"caption",children:"До"})})})}},d),he(Te,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:55,width:55},children:he(Be,{size:"small",onClick:()=>{"usd"===m&&s({value_ot:a,value_do:o,unit:"uzs"}),"uzs"===m&&s({value_ot:a,value_do:o,unit:"usd"})},children:["usd"===m&&he(Si,{}),"uzs"===m&&he(Te,{sx:{position:"relative",height:36,width:36},children:he("span",{style:{fontWeight:"bold",position:"absolute",top:"50%",left:"50%",fontSize:"12px",transform:"translate(-50%, -50%)"},children:"SUM"})})]})})]})},am=({className:e,style:t,sx:i,title:a,readonly:o,value:l="",unit:n="%",onChange:r})=>{const{reloadTrigger:s,doReload:d}=wi(),c=ue.useMemo((()=>(e=>"1"===e?"1":"%")(n)),[n]),m=Ke(o);ue.useEffect((()=>m.subscribe(d)),[]);return he(Wt,{type:"number",label:a,className:e,style:t,sx:i,defaultValue:l,value:o?l:void 0,onKeyDown:e=>{tm(e.key)||e.preventDefault()},onChange:({target:e})=>{r({unit:c,value:e.value})},variant:"standard",fullWidth:!0,InputProps:{startAdornment:he($t,{sx:{userSelect:"none",cursor:"pointer"},onClick:()=>{"1"===c&&r({unit:"%",value:l}),"%"===c&&r({unit:"1",value:l})},position:"start",children:["%"===c&&he(zi,{}),"1"===c&&he(Vi,{})]})}})},om={},lm=["komissiya_agenstva_unit","czena_sobstvennika_ot","czena_sobstvennika_do","startovaya_czena_valyuta","komissiya_menedzhera","komissiya_agenstva","komissiya_menedzhera_unit","startovaya_czena_ot","startovaya_czena_do","torg"],nm=({isViewMode:e,value:t=om,title:i,prefix:a,readonly:o,onChange:l})=>{const{classes:n}=Qc(),r=ue.useCallback((()=>{const e=Object.entries(t).map((([e,t])=>[Ue(e,a),t])).filter((([e])=>lm.includes(e)));return Object.fromEntries(e)}),[t]),[s,d]=ue.useState(r),c=ue.useMemo((()=>h.debounce(l,0)),[]),{resetWatcher:m}=At((()=>{const e=Object.entries(s).map((([e,t])=>[a+e,t]));c(Object.fromEntries(e))}),[s]);return At((()=>{m(),d(r)}),[t]),ue.useEffect((()=>()=>{c.flush()}),[]),he(_e,e?{children:[he(Ne,{variant:"h6",fontWeight:"bold",children:i}),he(im,{title:"Стартовая цена",readonly:o,unit:s.startovaya_czena_valyuta,value_ot:s.startovaya_czena_ot,value_do:s.startovaya_czena_do,onChange:({unit:e,value_ot:t,value_do:i})=>d((a=>({...a,startovaya_czena_valyuta:e,startovaya_czena_ot:t,startovaya_czena_do:i}))),className:n.onlyInput})]}:{children:[he(Ne,{variant:"h6",fontWeight:"bold",children:i}),he(Te,{className:n.row,children:he(im,{title:"Бюджет клиента",readonly:o,unit:s.startovaya_czena_valyuta,value_ot:s.czena_sobstvennika_ot,value_do:s.czena_sobstvennika_do,onChange:({unit:e,value_ot:t,value_do:i})=>d((a=>({...a,startovaya_czena_valyuta:e,czena_sobstvennika_ot:t,czena_sobstvennika_do:i}))),className:n.input})}),he(Te,{className:n.row,children:he(xi,{className:n.checkbox,control:he(Fe,{checked:s.torg}),onChange:()=>d((e=>({...e,torg:!e.torg}))),label:"Торг"})}),!e&&he(Te,{className:n.row,children:[he(am,{readonly:o,title:"Комиссия агенства",unit:s.komissiya_agenstva_unit,value:s.komissiya_agenstva,onChange:({unit:e,value:t})=>d((i=>({...i,komissiya_agenstva_unit:e,komissiya_agenstva:t}))),className:n.input}),he(am,{readonly:o,title:"Комиссия менеджера",unit:s.komissiya_menedzhera_unit,value:s.komissiya_menedzhera,onChange:({unit:e,value:t})=>d((i=>({...i,komissiya_menedzhera_unit:e,komissiya_menedzhera:t}))),className:n.input})]})]})},rm=54,sm=Fs()((e=>({root:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",overflow:"hidden",paddingBottom:"10px"},typogrphy:{padding:"10px"},container:{overflowX:"hidden",overflowY:"scroll",padding:e.spacing(1),flex:1},appBarRoot:{background:e.palette.primary.main,maxHeight:rm,height:rm,boxShadow:"unset",color:"#000"},tabsRoot:{minHeight:rm,height:rm,marginLeft:"0 !important",marginRight:"0 !important"},tabRoot:{minHeight:rm,height:rm,color:"#fff"},tabRootTransparent:{minHeight:rm,height:rm},tabSelected:{color:"#fff !important"},indicator:{height:6,background:"#0288d1"},indicatorTransparent:{height:6,background:e.palette.primary.main}}))),dm=({sx:e,withTransparentHeader:t,withRentTab:i=!0,withSellTab:a=!0,withCommonRow:o=!0,withCommerialRow:l=!0,readonly:n,isViewMode:r=!1,fieldData:s,onChange:d=(()=>{})})=>{const{classes:c}=sm(),[m,p]=ue.useState("rent");return ue.useEffect((()=>{a?p("sell"):i&&p("rent")}),[i,a]),he(ai,{className:c.root,sx:{...e,height:"100%"},children:he(Ai,{value:m,children:[t&&he(Te,{sx:{borderBottom:1,borderColor:"divider",pointerEvents:"all"},children:he(Ti,{variant:"fullWidth",classes:{root:c.tabsRoot,indicator:c.indicatorTransparent},onChange:(e,t)=>p(t),children:[a&&he(Ci,{classes:{root:c.tabRootTransparent},label:"Покупка",value:"sell"}),i&&he(Ci,{classes:{root:c.tabRootTransparent},label:"Аренда",value:"rent"})]})}),!t&&he(Fi,{classes:{root:c.appBarRoot},position:"static",sx:{borderBottom:1,borderColor:"divider",pointerEvents:"all"},children:he(Ti,{variant:"fullWidth",classes:{root:c.tabsRoot,indicator:c.indicator},onChange:(e,t)=>p(t),children:[a&&he(Ci,{classes:{root:c.tabRoot,selected:c.tabSelected},label:"Покупка",value:"sell"}),i&&he(Ci,{classes:{root:c.tabRoot,selected:c.tabSelected},label:"Аренда",value:"rent"})]})}),a&&he(Li,{className:c.container,sx:{pointerEvents:n?"none":"unset"},value:"sell",children:[o&&he(nm,{readonly:n,isViewMode:r,title:"Покупка",prefix:"prod_",value:s,onChange:d}),l&&he(nm,{readonly:n,isViewMode:r,title:"Покупка ком.",prefix:"prod_kom_",value:s,onChange:d})]}),i&&he(Li,{className:c.container,sx:{pointerEvents:n?"none":"unset"},value:"rent",children:[o&&he(nm,{readonly:n,isViewMode:r,title:"Аренда",prefix:"rent_",value:s,onChange:d}),l&&he(nm,{readonly:n,isViewMode:r,title:"Аренда ком.",prefix:"rent_kom_",value:s,onChange:d})]})]})})},cm=[{type:o.Paper,isVisible:(e,{hideAutofindFlag:t})=>!t,features:["hasResponsiblePermission"],fieldBottomMargin:"1",fieldRightMargin:"1",columns:"12",fields:[{type:o.Component,element:({id:e,payload:t,features:i,_fieldData:a})=>{const[o,l]=ue.useState(null),[n,r]=ue.useState(null),s=ue.useMemo((()=>({...o,occupiedBy:n})),[o,n]),{pickData:d,render:c,resultSubject:m}=Kc({payload:t,features:i}),{loading:p,execute:u}=be((async()=>{const t=bs.appwriteService.currentUser.$id,i=await bs.dealHistoryRequestService.readDealStateByBid(e,t),a=await bs.dealViewService.findOccupiedByTagetBidId(e);l(i),r(a)}),{onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),fallback:bs.errorService.handleGlobalError}),{handleLoadStart:y,handleLoadEnd:b}=$e({history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)}),_=We({large:!0,title:"Завершение сделки",fields:Jc,payload:()=>({...t,pickApartment:d,apartmentResultSubject:m}),features:i}),v=We({large:!0,title:"Начало сделки",fields:Xc,payload:{data:a,...t},features:i});ue.useEffect((()=>bs.dealHistoryViewService.createSubject.subscribe((t=>{t.bid_id===e&&u()}))),[]),ue.useEffect((()=>{u()}),[]);const f=()=>{v().then((async t=>{if(!t)return;const i=t.deal_type?t.deal_type[0]:"";if(!i)return;let a=[],o="";"range"===t.price_type&&(a=[t.price_ot,t.price_do].filter((e=>e)),o=t.unit?t.unit[0]:"usd"),(async(t,i=[],a="usd",o="")=>{let l=!0;y();try{const l=bs.appwriteService.currentUser.$id;await bs.dealHistoryRequestService.commitBidDealBegin(e,l,t,i,a,o),await u()}catch(n){bs.alertService.notify(jr(n)),l=!1}finally{b(l)}})(i,a,o,t.comment)}))},g=async()=>{let t=!0;y();try{const t=bs.appwriteService.currentUser.$id;await bs.dealHistoryRequestService.commitBidDealReassign(e,t),await u()}catch(i){t=!1}finally{b(t)}},k=t=>{"deal-end-action"===t&&_().then((t=>{t&&(async(t,i,a)=>{let o=!0;y();try{await bs.dealRequestService.commitBidDealEnd(e,t,i,a),await u()}catch(l){o=!1}finally{b(o)}})(t.target_apartment_id,t.status,t.comment)}))};return he(Pe,{style:{pointerEvents:"all"},direction:"column",children:[he(Ne,{variant:"body1",sx:{mt:-.5,mb:1,color:e=>e.palette.action.active,fontWeight:"bold"},children:"Сделка"}),he(Pe,{direction:"column",gap:"16px",children:[he(Pe,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[he(Le,{loading:p,Loader:()=>he(Pe,{direction:"row",gap:"16px",alignItems:"center",children:[he(fi,{variant:"circular",width:40,height:40}),he(Pe,{children:[he(fi,{sx:{mb:1},variant:"rectangular",width:210,height:20}),he(fi,{variant:"rectangular",width:210,height:20})]})]}),payload:s,children:async e=>{if(e.occupiedBy)return he(Ne,{variant:"body1",children:["Сделка в статусе"," ",he(gi,{href:"#",onClick:()=>Z("/deal"),children:e.occupiedBy.status})]});if(!(null==e?void 0:e.activeItem))return he(Ne,{variant:"body1",children:"Сделка не создана"});const{first_name:t="Не указано",user_role:i,avatar:a=null}=await bs.userViewService.read(e.activeItem.user_id),o=a?await bs.appwriteService.getImageURL(a):"",l=await bs.dictService.getUserRoles();return he(Pe,{direction:"row",gap:"16px",alignItems:"center",children:[he(it,{alt:t,src:o}),he(Pe,{direction:"column",children:[he(Ne,{variant:"body1",children:t}),he(Ne,{variant:"caption",style:{fontSize:"14px"},children:(null==i?void 0:i.length)?h.get(l,i[0])||i[0]:"Не указано"})]})]})}}),he(Pe,{direction:"row",gap:1,alignItems:"center",children:[he(Le,{loading:p,Loader:()=>he(fi,{variant:"rectangular",sx:{borderRadius:"4px"},width:100,height:35}),payload:s,children:async t=>{if(t.occupiedBy)return null;if(await bs.permissionRequestService.hasReassignDelayFlagByBidId(e))return he(pt,{disabled:!0,variant:"contained",children:"Сделка активна"});if(null==t?void 0:t.activeItem){const e=bs.appwriteService.currentUser.$id,i=t.activeItem.user_id===e;return he(pt,{disabled:i,onClick:g,variant:"contained",children:i?"Сделка создана":"Забрать сделку"})}return he(pt,{onClick:f,variant:"contained",children:"Создать сделку"})}}),he(Le,{loading:p,Loader:()=>he(fi,{variant:"circular",width:40,height:40}),payload:s,children:async e=>he(xt,{transparent:!0,options:Zc,payload:e,onAction:k})})]})]}),he(Le,{loading:p,Loader:()=>he(ki,{max:Number.POSITIVE_INFINITY,style:{marginRight:"auto"},children:[he(fi,{variant:"circular",width:28,height:28}),he(fi,{variant:"circular",width:28,height:28}),he(fi,{variant:"circular",width:28,height:28})]}),payload:s,children:async e=>{var t;if(!(null==(t=null==e?void 0:e.reassign)?void 0:t.length))return null;const i=await Promise.all(e.reassign.filter(((e,t,i)=>i.findIndex((({user_id:t})=>t===e.user_id))==t)).map((async({user_id:e})=>{const t=await bs.userViewService.tryRead(e);let i="";return(null==t?void 0:t.avatar)&&(i=await bs.appwriteService.getImageURL(t.avatar)),he(it,{style:{height:"28px",width:"28px"},alt:null==t?void 0:t.email,src:i})})));return he(ki,{max:Number.POSITIVE_INFINITY,style:{marginRight:"auto"},children:i})}})]}),c()]})}}]},{type:o.Paper,features:["hasResponsiblePermission"],fieldBottomMargin:"1",fieldRightMargin:"1",columns:"12",innerPadding:"0",fields:[{type:o.Component,element:({system_created_by:e,system_only_for_owner:t,system_allowance:i})=>{const{classes:a}=xc();return he(Pe,{style:{pointerEvents:"all"},direction:"column",children:[he(Ne,{variant:"body1",sx:{m:2,color:e=>e.palette.action.active,fontWeight:"bold"},children:"Доступ"}),he(Ct,{disablePadding:!0,dense:!0,children:he(Le,{deps:[t,i],children:async()=>{const o=[];return e&&o.push(e),i&&i.forEach((e=>o.push(e))),o.length?he(_e,{children:await Promise.all(o.filter(((e,t,i)=>i.indexOf(e)==t)).map((async(i,o)=>{var l;const n=await bs.userViewService.read(i),r=n.avatar?await bs.appwriteService.getImageURL(n.avatar):"",s=await bs.dictService.getUserRoles(),d=[n.last_name,n.first_name,n.middle_name].filter((e=>e)).join(" "),c=(null==(l=n.user_role)?void 0:l.length)?h.get(s,n.user_role[0])||n.user_role[0]:"Не указано";return he(bt,{className:Ce({[a.listItemAccient]:o%2==0}),children:[he(_t,{children:he(it,{src:r})}),he(ft,{primary:d,secondary:n.phone||c}),i===e&&he(Pe,{gap:1,direction:"row",children:[he(Ut,{label:"Создал заявку",color:"info"}),!!t&&he(Ut,{label:"Эксклюзив",color:"warning"})]})]})})))}):he(Ne,{sx:{m:2,mt:-.5},children:"Все пользователи"})}})})]})}}]},{type:o.Group,columns:"12",fieldRightMargin:"0",fieldBottomMargin:"0",fields:[{type:o.Paper,style:{height:"100%"},columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Основная информация"})},{type:o.Text,isVisible:e=>Ds(e,"zagolovok"),outlined:!1,name:"zagolovok",title:"Заголовок",placeholder:"Введите текст"},{type:o.Text,isVisible:e=>Ds(e,"kategoriya_obekta"),outlined:!1,compute:({kategoriya_obekta:e})=>e||"",title:"Категория объекта"},{type:o.Text,isVisible:e=>!!Ee(e.kategoriya_obekta,"Жилая")||!!Ee(e.kategoriya_obekta,"Коммерческая"),outlined:!1,compute:({podkategoriya_obekta:e})=>e||"Не задано",title:"Подкатегория объекта"},{type:o.Text,isVisible:e=>Ds(e,"arenda","prodazha"),outlined:!1,compute:({arenda:e,prodazha:t})=>t&&e?"Покупка, Аренда":t?"Покупка":e?"Аренда":"Не задано",title:"Тип сделки"},{type:o.Text,isVisible:e=>Ds(e,"strana"),outlined:!1,columns:"6",compute:({strana:e})=>e||"",title:"Страна"},{type:o.Text,isVisible:e=>Ds(e,"oblast"),outlined:!1,columns:"6",compute:({oblast:e})=>e||"",title:"Область"},{type:o.Text,isVisible:e=>Ds(e,"gorod"),outlined:!1,compute:({gorod:e})=>e||"",title:"Город"},{type:o.Text,isVisible:e=>Ds(e,"ulicza"),outlined:!1,compute:({ulicza:e})=>{const t=[e?e.toLowerCase().includes("улица")?e:"улица ".concat(e):null].filter((e=>e));return t.length?t.flatMap((e=>e)).join(", "):"Не указан"},title:"Адрес"},{type:o.Text,isVisible:e=>Ds(e,"rajon"),outlined:!1,compute:({rajon:e})=>e||"",title:"Район"},{type:o.Text,isVisible:e=>Ds(e,"mahallya"),outlined:!1,compute:({mahallya:e})=>e||"",title:"Махалля"},{type:o.Text,isVisible:e=>Ds(e,"orientir"),outlined:!1,compute:({orientir:e})=>e||"",title:"Ориентир"},{type:o.Text,isVisible:e=>Ds(e,"metro"),outlined:!1,compute:({metro:e})=>e||"",title:"Метро"},{type:o.Fragment,isVisible:e=>{let t=!1;return t=t||Ee(e.podkategoriya_obekta,"Квартиры"),t},fields:[{type:o.Text,isVisible:e=>Ds(e,"nomer_doma"),features:["hasBidHouseNumberPermission"],columns:"6",outlined:!1,name:"nomer_doma",title:"№ дома"},{type:o.Text,isVisible:e=>Ds(e,"nomer_kvartiry"),features:["hasBidHouseNumberPermission"],columns:"6",outlined:!1,name:"nomer_kvartiry",title:"№ квартиры"}]},{type:o.Fragment,isVisible:e=>{let t=!1;return t=t||null!==e.kategoriya_obekta,t=t||null!==e.podkategoriya_obekta,t=t&&!Ee(e.podkategoriya_obekta,"Квартиры"),t},fields:[{type:o.Text,isVisible:e=>Ds(e,"nomer_doma"),features:["hasBidHouseNumberPermission"],outlined:!1,name:"nomer_doma",title:"№ дома"}]},{type:o.Text,isVisible:e=>Ds(e,"istochnik"),outlined:!1,compute:({istochnik:e})=>e||"",title:"Источник"},{type:o.Text,isVisible:e=>{let t=!0;return t=t&&Ee(e.podkategoriya_obekta,"Квартиры"),t=t&&Ee(e.kategoriya_obekta,"Коммерческая","Жилая"),W(t,Ds(e,"tip_nedvizhimosti"))},outlined:!1,compute:({tip_nedvizhimosti:e})=>e||"",title:"Тип недвижимости"},{type:o.Text,isVisible:e=>{let t=!0;return t=t&&Ee(e.podkategoriya_obekta,"Квартиры"),t=t&&Ee(e.kategoriya_obekta,"Коммерческая","Жилая"),W(t,Ds(e,"nazvanie_zhk"))},outlined:!1,compute:({nazvanie_zhk:e})=>e||"",title:"Название ЖК"},{type:o.Component,isVisible:e=>Ds(e,"tip_klienta"),fieldBottomMargin:"2",element:({contact_id:e})=>he(Le,{payload:e,Loader:()=>he(Wt,{fullWidth:!0,variant:"standard",label:"Тип клиента",InputProps:{readOnly:!0},value:"Загрузка"}),children:async()=>{const t=await bs.contactViewService.tryRead(e),i=(null==t?void 0:t.tip_klienta)||"";return he(Wt,{fullWidth:!0,variant:"standard",label:"Тип клиента",InputProps:{readOnly:!0},value:i})}})}]},{type:o.Component,style:{height:"100%"},columns:"6",fieldRightMargin:"1",fieldBottomMargin:"1",element:({onChange:e,_fieldData:t,features:i})=>he(dm,{withTransparentHeader:!0,readonly:!0,isViewMode:!i.includes("hasCommissionPermission"),onChange:e,fieldData:t})}]},{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&Ee(e.podkategoriya_obekta,"Квартиры"),t=t&&Ee(e.kategoriya_obekta,"Жилая"),t=t&&!Ee(e.kategoriya_obekta,"Коммерческая"),t},fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилая квартира)"})},ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"kolichestvo_komnat_ot","kolichestvo_komnat_do"),name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma"),title:"Тип строения"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"balkon","balkon_kvartira","balkon_doma"),title:"Балкон"},ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"etazh_ot","etazh_do"),name:"etazh",title:"Этаж"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({tip_planirovki:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"tip_planirovki"),title:"Тип планировки"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"lift_kommercziya","lift_kvartira","lift_dom"),title:"Лифт"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sanuzel","sanuzel_kvartira","sanuzel_doma"),title:"Санузел"},ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"etazhnost_ot","etazhnost_do"),name:"etazhnost",title:"Этажность"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"zhilaya_ploshhad_ot","zhilaya_ploshhad_do"),name:"zhilaya_ploshhad",title:"Жилая площадь М²"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"mebel","mebel_kvartira","mebel_dom"),title:"Мебель"},ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"vysota_potolkov_ot","vysota_potolkov_do"),name:"vysota_potolkov",title:"Высота потолков"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"obshhaya_ploshhad_ot","obshhaya_ploshhad_do"),name:"obshhaya_ploshhad",title:"Общая площадь М²"}),ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"kolichestvo_spalen_ot","kolichestvo_spalen_do"),name:"kolichestvo_spalen",title:"Количество спален"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:"Система отопления"},ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"spalnya_sanuzel_ot","spalnya_sanuzel_do"),name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"gaz","gaz_dom","gaz_zemlya"),title:"Газ"},ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"rasstoyanie_do_metro_ot","rasstoyanie_do_metro_do"),name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({vid_iz_okna:e,vid_iz_okna_dom:t})=>[...e||[],...t||[]].reduce(((e,t)=>e.includes(t)?e:[...e,t]),[]).filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"vid_iz_okna","vid_iz_okna_dom"),title:"Вид из окна"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"parkovka","parkovka_kvartira","parkovka_zemlya"),title:"Парковка"},ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",isVisible:e=>Ds(e,"god_postrojki_ot","god_postrojki_do"),name:"god_postrojki",title:"Год постройки"})]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&Ee(e.podkategoriya_obekta,"Дома"),t=t&&Ee(e.kategoriya_obekta,"Жилая"),t=t&&!Ee(e.kategoriya_obekta,"Коммерческая"),t},fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилой дом)"})},ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"kolichestvo_komnat_ot","kolichestvo_komnat_do"),name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({sostoyanie_doma:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sostoyanie_doma"),title:"Состояние дома"},ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",isVisible:e=>Ds(e,"god_postrojki_ot","god_postrojki_do"),name:"god_postrojki",title:"Год постройки"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma"),title:"Тип строения"},ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"etazhnost_ot","etazhnost_do"),name:"etazhnost",title:"Этажность"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"balkon","balkon_kvartira","balkon_doma"),title:"Балкон"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({tip_planirovki:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"tip_planirovki"),title:"Тип планировки"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({bassejn:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"bassejn"),title:"Бассейн"},ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"ploshhad_doma_ot","ploshhad_doma_do"),name:"ploshhad_doma",title:"Площадь дома М²"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sanuzel","sanuzel_kvartira","sanuzel_doma"),title:"Санузел"},ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"mashina_mesto_ot","mashina_mesto_do"),name:"mashina_mesto",title:"Машина-место"}),ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"kolichestvo_spalen_ot","kolichestvo_spalen_do"),name:"kolichestvo_spalen",title:"Количество спален"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"kolichestvo_sotok_ot","kolichestvo_sotok_do"),name:"kolichestvo_sotok",title:"Количество соток"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.voda,e.voda_dom,e.voda_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"voda","voda_dom","voda_zemlya"),title:"Вода"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"lift_kommercziya","lift_kvartira","lift_dom"),title:"Лифт"},ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"spalnya_sanuzel_ot","spalnya_sanuzel_do"),name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:"Система отопления"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"mebel","mebel_kvartira","mebel_dom"),title:"Мебель"},ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"rasstoyanie_do_metro_ot","rasstoyanie_do_metro_do"),name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"gaz","gaz_dom","gaz_zemlya"),title:"Газ"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:"Система кондиционирования"},ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"vysota_potolkov_ot","vysota_potolkov_do"),name:"vysota_potolkov",title:"Высота потолков"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya"),title:"Электричество"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({vid_iz_okna:e,vid_iz_okna_dom:t})=>[...e||[],...t||[]].reduce(((e,t)=>e.includes(t)?e:[...e,t]),[]).filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"vid_iz_okna","vid_iz_okna_dom"),title:"Вид из окна"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({garazh:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"garazh"),title:"Гараж"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya"),title:"Канализация"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({raspolozhenie_doma:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"raspolozhenie_doma"),title:"Расположение дома"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya"),title:"Местоположение объекта"}]},{type:o.Fragment,isVisible:e=>(!Ee(e.podkategoriya_obekta,"Земля/Участок")||!Ee(e.kategoriya_obekta,"Коммерческая"))&&((!Ee(e.podkategoriya_obekta,"Дома")||!Ee(e.kategoriya_obekta,"Коммерческая"))&&((!Ee(e.podkategoriya_obekta,"Квартиры")||!Ee(e.kategoriya_obekta,"Коммерческая"))&&Ee(e.kategoriya_obekta,"Коммерческая"))),fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая недвижимость)"})},ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"kolichestvo_komnat_ot","kolichestvo_komnat_do"),name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_obekta,e["sostoyanie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sostoyanie_obekta","sostoyanie-obekta_zemlya"),title:"Состояние объекта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"poleznaya_ploshhad_ot","poleznaya_ploshhad_do"),name:"poleznaya_ploshhad",title:"Полезная площадь М²"}),ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"etazh_ot","etazh_do"),name:"etazh",title:"Этаж"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma"),title:"Тип строения"},ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"mashina_mesto_ot","mashina_mesto_do"),name:"mashina_mesto",title:"Машина-место"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"kolichestvo_sotok_ot","kolichestvo_sotok_do"),name:"kolichestvo_sotok",title:"Количество соток"}),ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"etazhnost_ot","etazhnost_do"),name:"etazhnost",title:"Этажность"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"balkon","balkon_kvartira","balkon_doma"),title:"Балкон"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"parkovka","parkovka_kvartira","parkovka_zemlya"),title:"Парковка"},ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"vysota_potolkov_ot","vysota_potolkov_do"),name:"vysota_potolkov",title:"Высота потолков"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"obshhaya_ploshhad_ot","obshhaya_ploshhad_do"),name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sanuzel","sanuzel_kvartira","sanuzel_doma"),title:"Санузел"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"mebel","mebel_kvartira","mebel_dom"),title:"Мебель"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.voda,e.voda_dom,e.voda_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"voda","voda_dom","voda_zemlya"),title:"Вода"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"gaz","gaz_dom","gaz_zemlya"),title:"Газ"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"lift_kommercziya","lift_kvartira","lift_dom"),title:"Лифт"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:"Система отопления"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya"),title:"Электричество"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya"),title:"Канализация"},ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"rasstoyanie_do_metro_ot","rasstoyanie_do_metro_do"),name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya"),title:"Местоположение объекта"},ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",isVisible:e=>Ds(e,"god_postrojki_ot","god_postrojki_do"),name:"god_postrojki",title:"Год постройки"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:"Система кондиционирования"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({vid_liczenzii:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"vid_liczenzii"),title:"Вид лицензии"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({raspolozhenie_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"raspolozhenie_obekta"),title:"Расположение объекта"}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&Ee(e.podkategoriya_obekta,"Земля/Участок"),t=t&&Ee(e.kategoriya_obekta,"Жилая"),t=t&&!Ee(e.kategoriya_obekta,"Коммерческая"),t},fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилая земля/участок)"})},ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"kolichestvo_komnat_ot","kolichestvo_komnat_do"),name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:"Назначение объекта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({tip_zemli_uchastka:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"tip_zemli_uchastka"),title:"Тип земли/участка"},ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"poleznaya_ploshhad_ot","poleznaya_ploshhad_do"),name:"poleznaya_ploshhad",title:"Полезная площадь М²"}),ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"etazh_ot","etazh_do"),name:"etazh",title:"Этаж"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_obekta,e["sostoyanie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sostoyanie_obekta","sostoyanie-obekta_zemlya"),title:"Состояние объекта"},ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"mashina_mesto_ot","mashina_mesto_do"),name:"mashina_mesto",title:"Машина-место"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"kolichestvo_sotok_ot","kolichestvo_sotok_do"),name:"kolichestvo_sotok",title:"Количество соток"}),ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"etazhnost_ot","etazhnost_do"),name:"etazhnost",title:"Этажность"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"parkovka","parkovka_kvartira","parkovka_zemlya"),title:"Парковка"},ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"rasstoyanie_do_metro_ot","rasstoyanie_do_metro_do"),name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"obshhaya_ploshhad_ot","obshhaya_ploshhad_do"),name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.voda,e.voda_dom,e.voda_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"voda","voda_dom","voda_zemlya"),title:"Вода"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya"),title:"Местоположение объекта"},ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"rasstoyanie_do_goroda_ot","rasstoyanie_do_goroda_do"),name:"rasstoyanie_do_goroda",title:"Расстояние до города (м)"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:"Система отопления"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({podezdnye_puti:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"podezdnye_puti"),title:"Подъездные пути"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:"Система кондиционирования"},ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",isVisible:e=>Ds(e,"god_postrojki_ot","god_postrojki_do"),name:"god_postrojki",title:"Год постройки"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya"),title:"Электричество"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"gaz","gaz_dom","gaz_zemlya"),title:"Газ"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya"),title:"Канализация"}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&Ee(e.podkategoriya_obekta,"Квартиры"),t=t&&U(W(Ee(e.kategoriya_obekta,"Коммерческая"),Ee(e.kategoriya_obekta,"Жилая")),W(Ee(e.kategoriya_obekta,"Коммерческая"),!Ee(e.kategoriya_obekta,"Жилая"))),t},fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая + Жилая квартира)"})},ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"kolichestvo_komnat_ot","kolichestvo_komnat_do"),name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:"Назначение объекта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma"),title:"Тип строения"},ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"etazh_ot","etazh_do"),name:"etazh",title:"Этаж"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"balkon","balkon_kvartira","balkon_doma"),title:"Балкон"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({tip_planirovki:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"tip_planirovki"),title:"Тип планировки"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"lift_kommercziya","lift_kvartira","lift_dom"),title:"Лифт"},ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"etazhnost_ot","etazhnost_do"),name:"etazhnost",title:"Этажность"}),ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",isVisible:e=>Ds(e,"god_postrojki_ot","god_postrojki_do"),name:"god_postrojki",title:"Год постройки"}),ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"mashina_mesto_ot","mashina_mesto_do"),name:"mashina_mesto",title:"Машина-место"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sanuzel","sanuzel_kvartira","sanuzel_doma"),title:"Санузел"},ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"obshhaya_ploshhad_ot","obshhaya_ploshhad_do"),name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"parkovka","parkovka_kvartira","parkovka_zemlya"),title:"Парковка"},ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"zhilaya_ploshhad_ot","zhilaya_ploshhad_do"),name:"zhilaya_ploshhad",title:"Жилая площадь М²"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"mebel","mebel_kvartira","mebel_dom"),title:"Мебель"},ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"vysota_potolkov_ot","vysota_potolkov_do"),name:"vysota_potolkov",title:"Высота потолков"}),ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"kolichestvo_spalen_ot","kolichestvo_spalen_do"),name:"kolichestvo_spalen",title:"Количество спален"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:"Система отопления"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({vid_iz_okna:e,vid_iz_okna_dom:t})=>[...e||[],...t||[]].reduce(((e,t)=>e.includes(t)?e:[...e,t]),[]).filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"vid_iz_okna","vid_iz_okna_dom"),title:"Вид из окна"},ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"spalnya_sanuzel_ot","spalnya_sanuzel_do"),name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"gaz","gaz_dom","gaz_zemlya"),title:"Газ"},ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"rasstoyanie_do_metro_ot","rasstoyanie_do_metro_do"),name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:"Система кондиционирования"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({raspolozhenie_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"raspolozhenie_obekta"),title:"Расположение объекта"}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&Ee(e.podkategoriya_obekta,"Дома"),t=t&&U(W(Ee(e.kategoriya_obekta,"Коммерческая"),Ee(e.kategoriya_obekta,"Жилая")),W(Ee(e.kategoriya_obekta,"Коммерческая"),!Ee(e.kategoriya_obekta,"Жилая"))),t},fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческий + Жилой дом)"})},ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"kolichestvo_komnat_ot","kolichestvo_komnat_do"),name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({sostoyanie_doma:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sostoyanie_doma"),title:"Состояние дома"},{type:o.Items,columns:"3",freeSolo:!0,outlined:!1,compute:e=>[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya"),title:"Местоположение объекта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:"Назначение объекта"},ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"etazhnost_ot","etazhnost_do"),name:"etazhnost",title:"Этажность"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({raspolozhenie_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"raspolozhenie_obekta"),title:"Расположение объекта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma"),title:"Тип строения"},ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"ploshhad_doma_ot","ploshhad_doma_do"),name:"ploshhad_doma",title:"Площадь дома М²"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({raspolozhenie_doma:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"raspolozhenie_doma"),title:"Расположение дома"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({tip_planirovki:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"tip_planirovki"),title:"Тип планировки"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({bassejn:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"bassejn"),title:"Бассейн"},ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"kolichestvo_sotok_ot","kolichestvo_sotok_do"),name:"kolichestvo_sotok",title:"Количество соток"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sanuzel","sanuzel_kvartira","sanuzel_doma"),title:"Санузел"},ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"mashina_mesto_ot","mashina_mesto_do"),name:"mashina_mesto",title:"Машина-место"}),ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"kolichestvo_spalen_ot","kolichestvo_spalen_do"),name:"kolichestvo_spalen",title:"Количество спален"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.voda,e.voda_dom,e.voda_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"voda","voda_dom","voda_zemlya"),title:"Вода"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"lift_kommercziya","lift_kvartira","lift_dom"),title:"Лифт"},ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"spalnya_sanuzel_ot","spalnya_sanuzel_do"),name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:"Система отопления"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"mebel","mebel_kvartira","mebel_dom"),title:"Мебель"},ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"rasstoyanie_do_metro_ot","rasstoyanie_do_metro_do"),name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"gaz","gaz_dom","gaz_zemlya"),title:"Газ"},ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",isVisible:e=>Ds(e,"god_postrojki_ot","god_postrojki_do"),name:"god_postrojki",title:"Год постройки"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"vysota_potolkov_ot","vysota_potolkov_do"),name:"vysota_potolkov",title:"Высота потолков"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya"),title:"Электричество"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({vid_iz_okna:e,vid_iz_okna_dom:t})=>[...e||[],...t||[]].reduce(((e,t)=>e.includes(t)?e:[...e,t]),[]).filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"vid_iz_okna","vid_iz_okna_dom"),title:"Вид из окна"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({garazh:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"garazh"),title:"Гараж"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya"),title:"Канализация"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"balkon","balkon_kvartira","balkon_doma"),title:"Балкон"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:"Система кондиционирования"}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&Ee(e.podkategoriya_obekta,"Земля/Участок"),t=t&&U(W(Ee(e.kategoriya_obekta,"Коммерческая"),Ee(e.kategoriya_obekta,"Жилая")),W(Ee(e.kategoriya_obekta,"Коммерческая"),!Ee(e.kategoriya_obekta,"Жилая"))),t},fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая + Жилая земля/участок)"})},ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"kolichestvo_komnat_ot","kolichestvo_komnat_do"),name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:"Назначение объекта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({tip_zemli_uchastka:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"tip_zemli_uchastka"),title:"Тип земли/участка"},ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"poleznaya_ploshhad_ot","poleznaya_ploshhad_do"),name:"poleznaya_ploshhad",title:"Полезная площадь М²"}),ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"etazh_ot","etazh_do"),name:"etazh",title:"Этаж"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_obekta,e["sostoyanie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sostoyanie_obekta","sostoyanie-obekta_zemlya"),title:"Состояние объекта"},ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"mashina_mesto_ot","mashina_mesto_do"),name:"mashina_mesto",title:"Машина-место"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"kolichestvo_sotok_ot","kolichestvo_sotok_do"),name:"kolichestvo_sotok",title:"Количество соток"}),ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"etazhnost_ot","etazhnost_do"),name:"etazhnost",title:"Этажность"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"parkovka","parkovka_kvartira","parkovka_zemlya"),title:"Парковка"},ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"rasstoyanie_do_metro_ot","rasstoyanie_do_metro_do"),name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"obshhaya_ploshhad_ot","obshhaya_ploshhad_do"),name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.voda,e.voda_dom,e.voda_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"voda","voda_dom","voda_zemlya"),title:"Вода"},{type:o.Items,columns:"3",freeSolo:!0,outlined:!1,compute:e=>[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya"),title:"Местоположение объекта"},ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"rasstoyanie_do_goroda_ot","rasstoyanie_do_goroda_do"),name:"rasstoyanie_do_goroda",title:"Расстояние до города (м)"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:"Система отопления"},ic({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",isVisible:e=>Ds(e,"god_postrojki_ot","god_postrojki_do"),name:"god_postrojki",title:"Год постройки"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya"),title:"Электричество"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({podezdnye_puti:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"podezdnye_puti"),title:"Подъездные пути"},{type:o.Items,columns:"3",freeSolo:!0,outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:"Система кондиционирования"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"gaz","gaz_dom","gaz_zemlya"),title:"Газ"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,i)=>i.indexOf(e)===t)),isVisible:e=>Ds(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya"),title:"Канализация"}]}]},{type:o.Paper,isVisible:e=>Ds(e,"vnutri_est","ryadom_est"),fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте"})},{type:o.Component,fieldBottomMargin:"1",columns:"6",element:()=>he(Ne,{children:"Внутри есть:"})},{type:o.Component,fieldBottomMargin:"1",columns:"6",element:()=>he(Ne,{children:"Рядом есть:"})},{type:o.Component,columns:"6",isVisible:({vnutri_est:e})=>!!(null==e?void 0:e.length),element:({vnutri_est:e})=>he("div",{children:he(Te,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",gap:1},children:null==e?void 0:e.map(((e,t)=>he(Ut,{label:e},t)))})})},{type:o.Component,columns:"6",isVisible:({ryadom_est:e})=>!!(null==e?void 0:e.length),element:({ryadom_est:e})=>he("div",{children:he(Te,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",gap:1},children:null==e?void 0:e.map(((e,t)=>he(Ut,{label:e},t)))})})}]},{type:o.Paper,isVisible:e=>Ds(e,"ploshhad_gostinnoj_ot","ploshhad_gostinnoj_do","ploshhad_spalni_ot","ploshhad_spalni_do","ploshhad_holla_ot","ploshhad_holla_do","ploshhad_kuhni_ot","ploshhad_kuhni_do","ploshhad_sanuzla_ot","ploshhad_sanuzla_do","ploshhad_balkona_ot","ploshhad_balkona_do","ploshhad_terrasy_ot","ploshhad_terrasy_do","ploshhad_komnaty_ohrany_ot","ploshhad_komnaty_ohrany_do","ploshhad_gostevogo_doma_ot","ploshhad_gostevogo_doma_do","ploshhad_dopolnitelnoj_pristrojki_ot","ploshhad_dopolnitelnoj_pristrojki_do"),fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,sx:{mb:2},element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади"})},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&U(Ee(e.kategoriya_obekta,"Коммерческая"),Ee(e.kategoriya_obekta,"Жилая")),t=t&&Ee(e.podkategoriya_obekta,"Квартиры"),t},fields:[ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"ploshhad_gostinnoj_ot","ploshhad_gostinnoj_do"),name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"ploshhad_spalni_ot","ploshhad_spalni_do"),name:"ploshhad_spalni",title:"Площадь комнаты М²"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"ploshhad_holla_ot","ploshhad_holla_do"),name:"ploshhad_holla",title:"Площадь холла М²"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"ploshhad_kuhni_ot","ploshhad_kuhni_do"),name:"ploshhad_kuhni",title:"Площадь кухни М²"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"ploshhad_sanuzla_ot","ploshhad_sanuzla_do"),name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"ploshhad_balkona_ot","ploshhad_balkona_do"),name:"ploshhad_balkona",title:"Площадь балкона М²"})]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&U(Ee(e.kategoriya_obekta,"Коммерческая"),Ee(e.kategoriya_obekta,"Жилая")),t=t&&Ee(e.podkategoriya_obekta,"Дома"),t},fields:[ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"ploshhad_gostinnoj_ot","ploshhad_gostinnoj_do"),name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"ploshhad_spalni_ot","ploshhad_spalni_do"),name:"ploshhad_spalni",title:"Площадь комнаты М²"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"ploshhad_holla_ot","ploshhad_holla_do"),name:"ploshhad_holla",title:"Площадь холла М²"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"ploshhad_kuhni_ot","ploshhad_kuhni_do"),name:"ploshhad_kuhni",title:"Площадь кухни М²"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"ploshhad_sanuzla_ot","ploshhad_sanuzla_do"),name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"ploshhad_balkona_ot","ploshhad_balkona_do"),name:"ploshhad_balkona",title:"Площадь балкона М²"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"ploshhad_terrasy_ot","ploshhad_terrasy_do"),name:"ploshhad_terrasy",title:"Площадь террасы М²"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"ploshhad_komnaty_ohrany_ot","ploshhad_komnaty_ohrany_do"),name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"ploshhad_gostevogo_doma_ot","ploshhad_gostevogo_doma_do"),name:"ploshhad_gostevogo_doma",title:"Площадь гостевого дома М²"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"ploshhad_dopolnitelnoj_pristrojki_ot","ploshhad_dopolnitelnoj_pristrojki_do"),name:"ploshhad_dopolnitelnoj_pristrojki",title:"Площадь дополнительной пристройки М²"})]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&U(Ee(e.kategoriya_obekta,"Коммерческая"),Ee(e.kategoriya_obekta,"Жилая")),t=t&&Ee(e.podkategoriya_obekta,"Земля/Участок"),t},fields:[ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"ploshhad_gostinnoj_ot","ploshhad_gostinnoj_do"),name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"ploshhad_spalni_ot","ploshhad_spalni_do"),name:"ploshhad_spalni",title:"Площадь комнаты М²"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"ploshhad_holla_ot","ploshhad_holla_do"),name:"ploshhad_holla",title:"Площадь холла М²"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"ploshhad_kuhni_ot","ploshhad_kuhni_do"),name:"ploshhad_kuhni",title:"Площадь кухни М²"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"ploshhad_sanuzla_ot","ploshhad_sanuzla_do"),name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"ploshhad_balkona_ot","ploshhad_balkona_do"),name:"ploshhad_balkona",title:"Площадь балкона М²"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"ploshhad_terrasy_ot","ploshhad_terrasy_do"),name:"ploshhad_terrasy",title:"Площадь террасы М²"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"ploshhad_komnaty_ohrany_ot","ploshhad_komnaty_ohrany_do"),name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"})]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&U(Ee(e.kategoriya_obekta,"Коммерческая")),t=t&&!Ee(e.podkategoriya_obekta,"Квартиры"),t=t&&!Ee(e.podkategoriya_obekta,"Дома"),t=t&&!Ee(e.podkategoriya_obekta,"Земля/Участок"),t},fields:[ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"ploshhad_gostinnoj_ot","ploshhad_gostinnoj_do"),name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"ploshhad_spalni_ot","ploshhad_spalni_do"),name:"ploshhad_spalni",title:"Площадь комнаты М²"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"ploshhad_holla_ot","ploshhad_holla_do"),name:"ploshhad_holla",title:"Площадь холла М²"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"ploshhad_kuhni_ot","ploshhad_kuhni_do"),name:"ploshhad_kuhni",title:"Площадь кухни М²"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"ploshhad_sanuzla_ot","ploshhad_sanuzla_do"),name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"ploshhad_balkona_ot","ploshhad_balkona_do"),name:"ploshhad_balkona",title:"Площадь балкона М²"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"ploshhad_terrasy_ot","ploshhad_terrasy_do"),name:"ploshhad_terrasy",title:"Площадь террасы М²"}),ic({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>Ds(e,"ploshhad_komnaty_ohrany_ot","ploshhad_komnaty_ohrany_do"),name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"})]}]},{type:o.Paper,features:["hasDescriptionPermission"],fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,sx:{mb:2},element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Описание объекта"})},{type:o.Text,sx:{pointerEvents:"all"},inputRows:8,outlined:!1,name:"opisanie",title:"Описание"}]},{type:o.Component,isVisible:(e,{hideAutofindFlag:t})=>!t,fieldBottomMargin:"1",fieldRightMargin:"1",element:({_fieldData:e,payload:t,features:i})=>he(Pc,{payload:t,features:i,fieldData:e})}],mm=(e,t)=>e.some((e=>e.includes(t))),pm=e=>{var t;return(null==(t=um.find((({isActive:t})=>t(e.location.pathname))))?void 0:t.id)||"parameter"},um=[{id:"contact",element:({history:e,payload:t,data:i})=>he(Vc,{history:e,payload:t,children:he(Je,{outlinePaper:!0,readonly:!0,fields:Sd,handler:()=>i,payload:()=>({...t,hideAutofindFlag:!0}),features:t.permissions})}),isActive:e=>mm(["/bid/contact"],e)},{id:"parameter",element:({history:e,payload:t,data:i})=>he(Vc,{history:e,payload:t,children:he(Je,{outlinePaper:!0,readonly:!0,fields:cm,handler:()=>i,payload:()=>({...t,hideAutofindFlag:!0}),features:t.permissions})}),isActive:e=>(console.log(e),mm(["/bid/parameter"],e))},{id:"documents",element:({history:e,payload:t,data:i})=>he(Vc,{history:e,payload:t,children:he(ai,{sx:{p:1,mt:1},children:he(Ii,{disabled:!0,accept:"*",multiple:!0,items:i,tr:async e=>await bs.appwriteService.tryReadFileName(e)||e,fallback:bs.errorService.handleGlobalError,onClick:async e=>{const t=await bs.appwriteService.getFileURL(e),i=await bs.appwriteService.readFileName(e);yt(t,i)},onUpload:e=>bs.appwriteService.uploadFile(e)})})}),isActive:e=>mm(["/bid/documents"],e)},{id:"service_comment",element:({history:e,payload:t,params:{id:i}})=>{const[a,o]=ue.useState([]),{execute:l}=be((async()=>{const e=await bs.serviceCommentViewService.findByBidId(i);o(await Promise.all(e.map((async({$id:e,user_id:t,file_id:i,comment:a,$createdAt:o})=>{const l=await bs.userViewService.tryRead(t);if(!l)return null;const n=i?await bs.appwriteService.tryReadFileName(i):"";return{id:e,message:a,fileId:i,userId:t,displayName:[l.last_name,l.first_name,l.middle_name,r(o).format("DD.MM.YYYY / HH:mm")].join(" "),fileName:n,avatar:l.avatar||""}})).filter((e=>!!e)).reverse()))}),{fallback:bs.errorService.handleGlobalError,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)});ue.useEffect((()=>{l()}),[]),ue.useEffect((()=>bs.serviceCommentViewService.createSubject.subscribe((e=>{e.bid_id===i&&l()}))),[]);return he(Vc,{history:e,payload:t,children:he(md,{payload:t,style:{height:"calc(100vh - 280px)"},messages:a,onText:async e=>{const t=bs.appwriteService.currentUser.$id;await bs.serviceCommentViewService.create({user_id:t,comment:e,apartment_id:null,bid_id:i,contact_id:null,file_id:null}),await l()},onFile:async(e,t)=>{const a=bs.appwriteService.currentUser.$id;await bs.serviceCommentViewService.create({user_id:a,comment:e,apartment_id:null,bid_id:i,contact_id:null,file_id:t}),await l()}})})},isActive:e=>mm(["/bid/service_comment"],e)}],hm=async e=>{const{contact_id:t}=await bs.bidViewService.read(e);return await bs.contactViewService.tryRead(t)},ym="/bid/parameter",bm=G(),_m=({payload:e})=>{const{push:t,pop:i,clear:a}=Kt(),o=hi(),{pickData:l,render:n}=Xt({withActionButton:!0,animation:"none",title:"Предпросмотр",history:bm,routes:um,BeforeTitle:({onClose:e})=>{const{total:t}=Kt();return he(Be,{sx:{mr:1,display:1===t?"none":"flex"},size:"small",onClick:e,children:he(Mi,{})})},AfterTitle:({id:e,onClose:t})=>he(Pe,{direction:"row",gap:1,children:[he(Be,{size:"small",onClick:()=>{const{pathname:t}=bm.location,i={"/bid/parameter":"/bid_edit/".concat(e,"/parameter"),"/bid/contact":"/bid_edit/".concat(e,"/contact")};bs.routerService.push(i[t]||i[ym]),a()},children:he(ji,{})}),he(Be,{size:"small",onClick:t,children:he(Ye,{})})]}),fetchState:async e=>[await hm(e),await bs.bidViewService.tryRead(e)],mapInitialData:(e,[t,i])=>({contact:t,parameter:i,documents:(null==i?void 0:i.bid_files)||[]}),mapPayload:()=>e,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),onSubmit:(e,t)=>{if(t){const{pathname:t}=bm.location,i={"/bid/parameter":"/bid_view/".concat(e,"/parameter"),"/bid/contact":"/bid_view/".concat(e,"/contact"),"/bid/documents":"/bid_view/".concat(e,"/documents"),"/bid/service_comment":"/bid_view/".concat(e,"/service_comment")};bs.routerService.push(i[t]||i[ym]),a()}return!0},onClose:()=>{i()},submitLabel:"Открыть"});return ue.useEffect((()=>o.subscribe((e=>{l(e)}))),[]),e=>{t({id:"bid",render:n,onInit:()=>{bm.push(ym)},onMount:()=>{l(e)}})}},vm=({fieldData:e,payload:t})=>{const i=Dt(e),a=Ve(sc.reloadSubject),o=Ke(e);ue.useEffect((()=>o.subscribe((()=>{a.next()}))),[]);const l=hi(),n=_m({payload:t});ue.useEffect((()=>l.subscribe((e=>{n(e.$id)}))),[]);const{columns:r}=ti({storageKey:"bid_columns",columns:Xd}),s=ue.useCallback((()=>{const{current:e}=i,a=Jd(e);{const i=sc.getFields(t.id);i.length&&Object.keys(a).forEach((t=>{i.includes(t)||(e[t]=void 0)}))}const o=wc({system_metro:e.system_metro,system_rajon:e.system_rajon,system_mahallya:e.system_mahallya,system_rent_price:e.system_rent_price,system_rent_kom_price:e.system_rent_kom_price,system_prod_price:e.system_prod_price,system_prod_kom_price:e.system_prod_kom_price});return bs.loggerService.log("apartment_card_fields systemData",{systemData:o}),bs.loggerService.log("apartment_card_fields filterData",{filterData:a}),{...a,...o}}),[]);return he(Te,{sx:{pointerEvents:"all",height:"max(60vh, 350px)",mb:5},children:he(yi,{withLoader:!0,withInitialLoader:!0,reloadSubject:a,AfterOperationList:gc,handler:async(e,...t)=>await bs.bidViewService.paginate({...s(),_accessLevel:5,_mode:"audit"},...t),isRowDisabled:({system_access_level:e})=>e>t.accessLevel,onRowClick:e=>l.next(e),columns:r,payload:t})})},fm=[{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany"),isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&!Ee(e.podkategoriya_obekta,"Квартиры"),t=t&&!Ee(e.podkategoriya_obekta,"Дома"),t=t&&!Ee(e.podkategoriya_obekta,"Земля/Участок"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая недвижимость)"})},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_gostinnoj"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_spalni"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_holla"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_kuhni"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_sanuzla"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_balkona"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_terrasy"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_komnaty_ohrany"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"}]}]},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany"),isVisible:e=>!Ee(e.kategoriya_obekta,"Коммерческая")&&Ee(e.podkategoriya_obekta,"Земля/Участок"),fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Земля/Участок)"})},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_gostinnoj"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_spalni"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_holla"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_kuhni"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_sanuzla"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_balkona"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_terrasy"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_komnaty_ohrany"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"}]}]},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona"),isVisible:e=>{let t=!0;return t=t&&!Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Квартиры"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Квартиры)"})},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_gostinnoj"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_spalni"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_holla"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_kuhni"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_sanuzla"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_balkona"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}]}]},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany","ploshhad_gostevogo_doma","ploshhad_dopolnitelnoj_pristrojki"),isVisible:e=>{let t=!0;return t=t&&!Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Дома"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Дома)"})},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_gostinnoj"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_spalni"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_holla"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_kuhni"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_sanuzla"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_balkona"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_terrasy"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_komnaty_ohrany"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_gostevogo_doma"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostevogo_doma",title:"Площадь гостевого дома М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_dopolnitelnoj_pristrojki"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_dopolnitelnoj_pristrojki",title:"Площадь дополнительной пристройки М²"}]}]},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona"),isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Квартиры"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая + Жилая квартира)"})},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_gostinnoj"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_spalni"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_holla"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_kuhni"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_sanuzla"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_balkona"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}]}]},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany","ploshhad_gostevogo_doma","ploshhad_dopolnitelnoj_pristrojki"),isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Дома"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческий + Жилой дом)"})},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_gostinnoj"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_spalni"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_holla"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_kuhni"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_sanuzla"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_balkona"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_terrasy"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_komnaty_ohrany"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_gostevogo_doma"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostevogo_doma",title:"Площадь гостевого дома М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_dopolnitelnoj_pristrojki"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_dopolnitelnoj_pristrojki",title:"Площадь дополнительной пристройки М²"}]}]},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany"),isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Земля/Участок"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая + Жилая земля/участок)"})},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_gostinnoj"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_spalni"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_holla"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_kuhni"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_sanuzla"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_balkona"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_terrasy"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_komnaty_ohrany"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"}]}]}],gm=[{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"vnutri_est","ryadom_est"),isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&!Ee(e.podkategoriya_obekta,"Квартиры"),t=t&&!Ee(e.podkategoriya_obekta,"Дома"),t=t&&!Ee(e.podkategoriya_obekta,"Земля/Участок"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая недвижимость)"})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vnutri_est"),columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Телевизор","Кондиционер","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("ryadom_est"),columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Охрана","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"vnutri_est","ryadom_est"),isVisible:e=>{let t=!1;return t=t||Ee(e.podkategoriya_obekta,"Земля/Участок"),t=t&&!Ee(e.kategoriya_obekta,"Коммерческая"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Земля/Участок)"})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vnutri_est"),columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Забор","Катлаван","Пожарная сигнализация","Видеонаблюдение","Сигнализация","Разгрузочный пандус"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("ryadom_est"),columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Охрана","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"vnutri_est","ryadom_est"),isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Дома"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческий + Жилой дом)"})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vnutri_est"),columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Телевизор","Кондиционер","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг","Полисадник"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("ryadom_est"),columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Охрана","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}}],km=[{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"kolichestvo_komnat","naznachenie_obekta","sostoyanie_obekta","poleznaya_ploshhad","etazh","sostoyanie_remonta","mashina_mesto","kolichestvo_sotok","etazhnost","tip_stroeniya","parkovka","sanuzel","obshhaya_ploshhad","balkon","voda","kanalizacziya","lift_kommercziya","sistema_otopleniya","gaz","mebel","rasstoyanie_do_metro","elektrichestvo","god_postrojki","vysota_potolkov","mestopolozhenie_obekta","sistema_kondiczionirovaniya"),isVisible:e=>(!Ee(e.podkategoriya_obekta,"Земля/Участок")||!Ee(e.kategoriya_obekta,"Коммерческая"))&&((!Ee(e.podkategoriya_obekta,"Дома")||!Ee(e.kategoriya_obekta,"Коммерческая"))&&((!Ee(e.podkategoriya_obekta,"Квартиры")||!Ee(e.kategoriya_obekta,"Коммерческая"))&&Ee(e.kategoriya_obekta,"Коммерческая"))),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая недвижимость)"})},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kolichestvo_komnat"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Component,hidden:e=>!e.fieldVisibility.has("naznachenie_obekta"),sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>he(Oe,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("sostoyanie_obekta"),columns:"3",outlined:!1,name:"sostoyanie_obekta",title:"Состояние объекта",itemList:["Новой постройки","Недостроенный","Под снос","Коробка"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("poleznaya_ploshhad"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("etazh"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("sostoyanie_remonta"),columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("mashina_mesto"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kolichestvo_sotok"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("etazhnost"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("tip_stroeniya"),columns:"3",outlined:!1,name:"tip_stroeniya",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("parkovka"),columns:"3",outlined:!1,name:"parkovka",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sanuzel"),columns:"3",outlined:!1,name:"sanuzel",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("obshhaya_ploshhad"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("balkon"),columns:"3",outlined:!1,name:"balkon",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("voda"),columns:"3",outlined:!1,name:"voda",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("kanalizacziya"),columns:"3",outlined:!1,name:"kanalizacziya",title:"Канализация",itemList:["Да","Нет"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("lift_kommercziya"),columns:"3",outlined:!1,name:"lift_kommercziya",title:"Лифт",itemList:["Есть","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema_otopleniya"),columns:"3",outlined:!1,name:"sistema_otopleniya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("gaz"),columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("mebel"),columns:"3",outlined:!1,name:"mebel",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_metro"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("elektrichestvo"),columns:"3",outlined:!1,name:"elektrichestvo",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("god_postrojki"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("vysota_potolkov"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("mestopolozhenie_obekta"),columns:"3",outlined:!1,name:"mestopolozhenie_obekta",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema_kondiczionirovaniya"),columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"nazvanie_zhk","kolichestvo_komnat","etazh","etazhnost","etazh","obshhaya_ploshhad","sostoyanie_remonta-kvartiry","kolichestvo_spalen","spalnya_sanuzel","zhilaya_ploshhad","balkon_kvartira","tip_planirovki","mebel_kvartira","sanuzel_kvartira","tip-stroeniya_kvartiry","vysota_potolkov","sistema-otopleniya_kvartiry","energonositel_obekta","lift_kvartira","podezd_nomer","kod_domofona","rasstoyanie_do_metro","vid_iz_okna","parkovka_kvartira","god_postrojki","terrasa","czokol_podval","garderobnaya","umnyj_dom"),isVisible:e=>{if(Ee(e.podkategoriya_obekta,"Квартиры")&&Ee(e.kategoriya_obekta,"Коммерческая"))return!1;let t=!1;return t=t||Ee(e.podkategoriya_obekta,"Квартиры"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Квартиры)"})},{type:o.Complete,hidden:e=>!e.fieldVisibility.has("nazvanie_zhk"),columns:"3",outlined:!1,name:"nazvanie_zhk",title:"Название ЖК",tip:['ЖК "Greenwich"','ЖК "OzMahal"','ЖК "Elysium"','ЖК "Binkat"','ЖК "Brooklyn"','ЖК "Assalom Havo"','ЖК "Istanbul City"']},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kolichestvo_komnat"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("etazh"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("etazhnost"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("obshhaya_ploshhad"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("sostoyanie_remonta-kvartiry"),columns:"3",outlined:!1,name:"sostoyanie_remonta-kvartiry",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kolichestvo_spalen"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("spalnya_sanuzel"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("zhilaya_ploshhad"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"zhilaya_ploshhad",title:"Жилая площадь М²"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("balkon_kvartira"),columns:"3",outlined:!1,name:"balkon_kvartira",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("tip_planirovki"),columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Малосемейная","Общежитие","Пентхаус","Дуплекс","Комната"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("mebel_kvartira"),columns:"3",outlined:!1,name:"mebel_kvartira",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sanuzel_kvartira"),columns:"3",outlined:!1,name:"sanuzel_kvartira",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("tip-stroeniya_kvartiry"),columns:"3",outlined:!1,name:"tip-stroeniya_kvartiry",title:"Тип строения",itemList:["Кирпичный","Монолитный","Блочный","Панельный","Деревянный","Газоблочный","Бетонно-керамзитный"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("vysota_potolkov"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema-otopleniya_kvartiry"),columns:"3",outlined:!1,name:"sistema-otopleniya_kvartiry",title:"Система отопления",itemList:["Центральное","2х контурный котел","Теплый пол"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("energonositel_obekta"),columns:"3",outlined:!1,name:"energonositel_obekta",title:"Энергоноситель объекта",itemList:["Электрофицирован","Газифицирован"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("lift_kvartira"),columns:"3",outlined:!1,name:"lift_kvartira",title:"Лифт",itemList:["Пассажирский","Грузовой","Нет"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("podezd_nomer"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"podezd_nomer",title:"Подъезд №"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kod_domofona"),columns:"3",outlined:!1,name:"kod_domofona",title:"Код домофона"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_metro"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vid_iz_okna"),columns:"3",outlined:!1,name:"vid_iz_okna",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("parkovka_kvartira"),columns:"3",outlined:!1,name:"parkovka_kvartira",title:"Парковка",itemList:["Наземная","Собственная","Подземная","В аренду","Нет"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("god_postrojki"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("terrasa"),columns:"3",outlined:!1,name:"terrasa",title:"Терраса",tr:e=>"Yes"===e?"Да":"Нет"},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("czokol_podval"),columns:"3",outlined:!1,name:"czokol_podval",title:"Цоколь/Подвал",tr:e=>"Yes"===e?"Да":"Нет"},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("garderobnaya"),columns:"3",outlined:!1,name:"garderobnaya",title:"Гардеробная",tr:e=>"Yes"===e?"Да":"Нет"},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("umnyj_dom"),columns:"3",outlined:!1,name:"umnyj_dom",title:"Умный дом",tr:e=>"Yes"===e?"Да":"Нет"}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"kolichestvo_komnat","sostoyanie_doma","god_postrojki","tip-stroeniya_doma","etazhnost","balkon_doma","tip_planirovki","bassejn","ploshhad_doma","sanuzel_doma","mashina_mesto","kolichestvo_spalen","kolichestvo_sotok","sostoyanie_remonta","lift_dom","spalnya_sanuzel","sistema-otopleniya_dom","mebel_dom","rasstoyanie_do_metro","gaz_dom","sistema-kondiczionirovaniya_dom","vysota_potolkov","elektrichestvo_dom","vid_iz_okna_dom","garazh","kanalizacziya_dom","raspolozhenie_doma","mestopolozhenie-obekta_dom","voda_dom","terrasa","garderobnaya","czokol","podval","vdol_dorogi","uglovoj","dva_doma_vo_dvore","komnata_ohrany","gostevoj_domik","barbekyu_zona","dopolnitelnaya_pristrojka","ogorod","saraj","umnyj_dom"),isVisible:e=>{if(Ee(e.podkategoriya_obekta,"Дома")&&Ee(e.kategoriya_obekta,"Коммерческая"))return!1;let t=!1;return t=t||Ee(e.podkategoriya_obekta,"Дома"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Дома)"})},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kolichestvo_komnat"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("etazhnost"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_doma"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_doma",title:"Площадь дома М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kolichestvo_sotok"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kolichestvo_spalen"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("spalnya_sanuzel"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("sostoyanie_remonta"),columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sanuzel_doma"),columns:"3",outlined:!1,name:"sanuzel_doma",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("bassejn"),columns:"3",outlined:!1,name:"bassejn",title:"Бассейн",itemList:["Летний","Зимний","Сауна","Нет"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("mebel_dom"),columns:"3",outlined:!1,name:"mebel_dom",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("sostoyanie_doma"),columns:"3",outlined:!1,name:"sostoyanie_doma",title:"Состояние дома",itemList:["Новой постройки","Недостроенный","Под снос","Коробка"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("mashina_mesto"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("tip_planirovki"),columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Смешанный"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("tip-stroeniya_doma"),columns:"3",outlined:!1,name:"tip-stroeniya_doma",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("vysota_potolkov"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("garazh"),columns:"3",outlined:!1,name:"garazh",title:"Гараж",itemList:["Подземный","Закрытый","Под навесом","Уличный"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema-otopleniya_dom"),columns:"3",outlined:!1,name:"sistema-otopleniya_dom",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema-kondiczionirovaniya_dom"),columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_dom",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("raspolozhenie_doma"),columns:"3",outlined:!1,name:"raspolozhenie_doma",title:"Расположение дома",itemList:["По середине","В начале двора","В конце двора"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("kanalizacziya_dom"),columns:"3",outlined:!1,name:"kanalizacziya_dom",title:"Канализация",itemList:["Да","Нет"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_metro"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vid_iz_okna_dom"),columns:"3",outlined:!1,name:"vid_iz_okna_dom",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("lift_dom"),columns:"3",outlined:!1,name:"lift_dom",title:"Лифт",itemList:["Есть","Нет"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("god_postrojki"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("voda_dom"),columns:"3",outlined:!1,name:"voda_dom",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("gaz_dom"),columns:"3",outlined:!1,name:"gaz_dom",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("elektrichestvo_dom"),columns:"3",outlined:!1,name:"elektrichestvo_dom",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("balkon_doma"),columns:"3",outlined:!1,name:"balkon_doma",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("mestopolozhenie-obekta_dom"),columns:"3",outlined:!1,name:"mestopolozhenie-obekta_dom",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("terrasa"),columns:"3",outlined:!1,name:"terrasa",title:"Терраса",tr:e=>"Yes"===e?"Да":"Нет"},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("garderobnaya"),columns:"3",outlined:!1,name:"garderobnaya",title:"Гардеробная",tr:e=>"Yes"===e?"Да":"Нет"},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("czokol"),columns:"3",outlined:!1,name:"czokol",title:"Цоколь",tr:e=>"Yes"===e?"Да":"Нет"},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("podval"),columns:"3",outlined:!1,name:"podval",title:"Подвал",tr:e=>"Yes"===e?"Да":"Нет"},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("umnyj_dom"),columns:"3",outlined:!1,name:"umnyj_dom",title:"Умный дом",tr:e=>"Yes"===e?"Да":"Нет"},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("vdol_dorogi"),columns:"3",outlined:!1,name:"vdol_dorogi",title:"Вдоль дороги",tr:e=>"Yes"===e?"Да":"Нет"},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("uglovoj"),columns:"3",outlined:!1,name:"uglovoj",title:"Угловой",tr:e=>"Yes"===e?"Да":"Нет"},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("dva_doma_vo_dvore"),columns:"3",outlined:!1,name:"dva_doma_vo_dvore",title:"2 дома во дворе",tr:e=>"Yes"===e?"Да":"Нет"},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("komnata_ohrany"),columns:"3",outlined:!1,name:"komnata_ohrany",title:"Комната охраны",tr:e=>"Yes"===e?"Да":"Нет"},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("gostevoj_domik"),columns:"3",outlined:!1,name:"gostevoj_domik",title:"Гостевой домик",tr:e=>"Yes"===e?"Да":"Нет"},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("barbekyu_zona"),columns:"3",outlined:!1,name:"barbekyu_zona",title:"Барбекю зона",tr:e=>"Yes"===e?"Да":"Нет"},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("dopolnitelnaya_pristrojka"),columns:"3",outlined:!1,name:"dopolnitelnaya_pristrojka",title:"Дополнительная пристройка",tr:e=>"Yes"===e?"Да":"Нет"},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("ogorod"),columns:"3",outlined:!1,name:"ogorod",title:"Огород",tr:e=>"Yes"===e?"Да":"Нет"},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("saraj"),columns:"3",outlined:!1,name:"saraj",title:"Сарай",tr:e=>"Yes"===e?"Да":"Нет"}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"kolichestvo_komnat","naznachenie-obekta-zemlya_uchastok","tip_zemli_uchastka","poleznaya_ploshhad","etazh","sostoyanie-obekta_zemlya","mashina_mesto","kolichestvo_sotok","etazhnost","sostoyanie-remonta_zemlya","parkovka_zemlya","rasstoyanie_do_metro","obshhaya_ploshhad","voda_zemlya","mestopolozhenie-obekta_zemlya","rasstoyanie_do_goroda","sistema-otopleniya_zemlya","podezdnye_puti","sistema-kondiczionirovaniya_zemlya","god_postrojki","elektrichestvo_zemlya","gaz_zemlya","kanalizacziya_zemlya"),isVisible:e=>!Ee(e.kategoriya_obekta,"Коммерческая")&&Ee(e.podkategoriya_obekta,"Земля/Участок"),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Земля/Участок)"})},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kolichestvo_komnat"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Component,hidden:e=>!e.fieldVisibility.has("naznachenie-obekta-zemlya_uchastok"),sx:{pr:1,mb:2},columns:"3",name:"naznachenie-obekta-zemlya_uchastok",element:e=>he(Oe,{variant:"standard",label:"Назначение объекта",items:[{label:"Сельхоз использование",value:"Сельхоз использование"},{label:"ИЖС",value:"ИЖС"},{label:"Высотная застройка",value:"Высотная застройка"},{label:"Промышленное назначение",value:"Промышленное назначение"},{label:"ТЦ",value:"ТЦ"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Склады",value:"Склады"},{label:"Инвестпроект",value:"Инвестпроект"},{label:"Строительство образовательных учреждений",value:"Строительство образовательных учреждений"},{label:"АЗС",value:"АЗС"},{label:"Мойка",value:"Мойка"}],value:e["naznachenie-obekta_zemlya"],onChange:t=>e.onChange({"naznachenie-obekta_zemlya":t})})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("tip_zemli_uchastka"),columns:"3",outlined:!1,name:"tip_zemli_uchastka",title:"Тип земли/участка",itemList:["Делимый","Неделимый"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("poleznaya_ploshhad"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("etazh"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("sostoyanie-obekta_zemlya"),columns:"3",outlined:!1,name:"sostoyanie-obekta_zemlya",title:"Состояние объекта",itemList:["Пустая земля/участок","Недостроенная","Под снос"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("mashina_mesto"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kolichestvo_sotok"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("etazhnost"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("sostoyanie-remonta_zemlya"),columns:"3",outlined:!1,name:"sostoyanie-remonta_zemlya",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("parkovka_zemlya"),columns:"3",outlined:!1,name:"parkovka_zemlya",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_metro"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("obshhaya_ploshhad"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("voda_zemlya"),columns:"3",outlined:!1,name:"voda_zemlya",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("mestopolozhenie-obekta_zemlya"),columns:"3",outlined:!1,name:"mestopolozhenie-obekta_zemlya",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_goroda"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_goroda",title:"Расстояние до города (м)"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema-otopleniya_zemlya"),columns:"3",outlined:!1,name:"sistema-otopleniya_zemlya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("podezdnye_puti"),columns:"3",outlined:!1,name:"podezdnye_puti",title:"Подъездные пути",itemList:["Асфальтированная дорога","Грунтовая дорога","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema-kondiczionirovaniya_zemlya"),columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_zemlya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("god_postrojki"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("elektrichestvo_zemlya"),columns:"3",outlined:!1,name:"elektrichestvo_zemlya",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("gaz_zemlya"),columns:"3",outlined:!1,name:"gaz_zemlya",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("kanalizacziya_zemlya"),columns:"3",outlined:!1,name:"kanalizacziya_zemlya",title:"Канализация",itemList:["Да","Нет"]}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"kolichestvo_komnat","sostoyanie_remonta","naznachenie_obekta","raspolozhenie_obekta","etazh","balkon","tip_planirovki","lift_kvartira","etazhnost","god_postrojki","nazvanie_zhk","mashina_mesto","obshhaya_ploshhad","sanuzel_kvartira","parkovka_kvartira","zhilaya_ploshhad","mebel","vysota_potolkov","kolichestvo_spalen","sistema_otopleniya","kod_domofona","spalnya_sanuzel","gaz","podezd_nomer","rasstoyanie_do_metro","vid_iz_okna","sistema_kondiczionirovaniya","tip_stroeniya"),isVisible:e=>!(!Ee(e.podkategoriya_obekta,"Квартиры")||!Ee(e.kategoriya_obekta,"Коммерческая")),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая + Жилая квартира)"})},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kolichestvo_komnat"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("sostoyanie_remonta"),columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Component,hidden:e=>!e.fieldVisibility.has("naznachenie_obekta"),sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>he(Oe,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("raspolozhenie_obekta"),columns:"3",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("etazh"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("balkon"),columns:"3",outlined:!1,name:"balkon",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("tip_planirovki"),columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Малосемейная","Общежитие","Пентхаус","Дуплекс","Комната"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("lift_kvartira"),columns:"3",outlined:!1,name:"lift_kvartira",title:"Лифт",itemList:["Пассажирский","Грузовой","Нет"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("etazhnost"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("god_postrojki"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"},{type:o.Complete,hidden:e=>!e.fieldVisibility.has("nazvanie_zhk"),columns:"3",outlined:!1,name:"nazvanie_zhk",title:"Название ЖК",tip:['ЖК "Greenwich"','ЖК "OzMahal"','ЖК "Elysium"','ЖК "Binkat"','ЖК "Brooklyn"','ЖК "Assalom Havo"','ЖК "Istanbul City"']},{type:o.Text,hidden:e=>!e.fieldVisibility.has("mashina_mesto"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("obshhaya_ploshhad"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sanuzel_kvartira"),columns:"3",outlined:!1,name:"sanuzel_kvartira",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("parkovka_kvartira"),columns:"3",outlined:!1,name:"parkovka_kvartira",title:"Парковка",itemList:["Наземная","Собственная","Подземная","В аренду","Нет"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("zhilaya_ploshhad"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"zhilaya_ploshhad",title:"Жилая площадь М²"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("mebel"),columns:"3",outlined:!1,name:"mebel",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("vysota_potolkov"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kolichestvo_spalen"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema_otopleniya"),columns:"3",outlined:!1,name:"sistema_otopleniya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kod_domofona"),columns:"3",outlined:!1,name:"kod_domofona",title:"Код домофона"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("spalnya_sanuzel"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("gaz"),columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("podezd_nomer"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"podezd_nomer",title:"Подъезд №"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_metro"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vid_iz_okna"),columns:"3",outlined:!1,name:"vid_iz_okna",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema_kondiczionirovaniya"),columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("tip_stroeniya"),columns:"3",outlined:!1,name:"tip_stroeniya",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"kolichestvo_komnat","sostoyanie_doma","mestopolozhenie_obekta","naznachenie_obekta","etazhnost","sostoyanie_remonta","raspolozhenie_obekta","tip_stroeniya","ploshhad_doma","raspolozhenie_doma","tip_planirovki","bassejn","kolichestvo_sotok","sanuzel_doma","mashina_mesto","kolichestvo_spalen","voda_dom","lift_kvartira","spalnya_sanuzel","sistema_otopleniya","mebel","rasstoyanie_do_metro","gaz","sistema_kondiczionirovaniya","vysota_potolkov","elektrichestvo_dom","vid_iz_okna","garazh","kanalizacziya_dom","balkon","god_postrojki"),isVisible:e=>!(!Ee(e.podkategoriya_obekta,"Дома")||!Ee(e.kategoriya_obekta,"Коммерческая")),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческий + Жилой дом)"})},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kolichestvo_komnat"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("sostoyanie_doma"),columns:"3",outlined:!1,name:"sostoyanie_doma",title:"Состояние дома",itemList:["Новой постройки","Недостроенный","Под снос","Коробка"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("mestopolozhenie_obekta"),columns:"3",outlined:!1,name:"mestopolozhenie_obekta",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:o.Component,hidden:e=>!e.fieldVisibility.has("naznachenie_obekta"),sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>he(Oe,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},{type:o.Text,hidden:e=>!e.fieldVisibility.has("etazhnost"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("sostoyanie_remonta"),columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("raspolozhenie_obekta"),columns:"3",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("tip_stroeniya"),columns:"3",outlined:!1,name:"tip_stroeniya",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_doma"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_doma",title:"Площадь дома М²"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("raspolozhenie_doma"),columns:"3",outlined:!1,name:"raspolozhenie_doma",title:"Расположение дома",itemList:["По середине","В начале двора","В конце двора"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("tip_planirovki"),columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Малосемейная","Общежитие","Пентхаус","Дуплекс","Комната"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("bassejn"),columns:"3",outlined:!1,name:"bassejn",title:"Бассейн",itemList:["Летний","Зимний","Сауна","Нет"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kolichestvo_sotok"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sanuzel_doma"),columns:"3",outlined:!1,name:"sanuzel_doma",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("mashina_mesto"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kolichestvo_spalen"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("voda_dom"),columns:"3",outlined:!1,name:"voda_dom",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("lift_kvartira"),columns:"3",outlined:!1,name:"lift_kvartira",title:"Лифт",itemList:["Пассажирский","Грузовой","Нет"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("spalnya_sanuzel"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema_otopleniya"),columns:"3",outlined:!1,name:"sistema_otopleniya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("mebel"),columns:"3",outlined:!1,name:"mebel",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_metro"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("gaz"),columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema_kondiczionirovaniya"),columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("vysota_potolkov"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("elektrichestvo_dom"),columns:"3",outlined:!1,name:"elektrichestvo_dom",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vid_iz_okna"),columns:"3",outlined:!1,name:"vid_iz_okna",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("garazh"),columns:"3",outlined:!1,name:"garazh",title:"Гараж",itemList:["Подземный","Закрытый","Под навесом","Уличный"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("kanalizacziya_dom"),columns:"3",outlined:!1,name:"kanalizacziya_dom",title:"Канализация",itemList:["Да","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("balkon"),columns:"3",outlined:!1,name:"balkon",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("god_postrojki"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"kolichestvo_komnat","naznachenie-obekta-zemlya_uchastok","tip_zemli_uchastka","poleznaya_ploshhad","etazh","sostoyanie-obekta_zemlya","mashina_mesto","kolichestvo_sotok","etazhnost","sostoyanie-remonta_zemlya","parkovka_zemlya","rasstoyanie_do_metro","obshhaya_ploshhad","voda_zemlya","mestopolozhenie-obekta_zemlya","rasstoyanie_do_goroda","sistema-otopleniya_zemlya","podezdnye_puti","sistema-kondiczionirovaniya_zemlya","god_postrojki","elektrichestvo_zemlya","gaz_zemlya","kanalizacziya_zemlya"),isVisible:e=>!(!Ee(e.podkategoriya_obekta,"Земля/Участок")||!Ee(e.kategoriya_obekta,"Коммерческая")),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая + Жилая земля/участок)"})},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kolichestvo_komnat"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Component,hidden:e=>!e.fieldVisibility.has("naznachenie-obekta-zemlya_uchastok"),sx:{pr:1,mb:2},columns:"3",name:"naznachenie-obekta-zemlya_uchastok",element:e=>he(Oe,{variant:"standard",label:"Назначение объекта",items:[{label:"Сельхоз использование",value:"Сельхоз использование"},{label:"ИЖС",value:"ИЖС"},{label:"Высотная застройка",value:"Высотная застройка"},{label:"Промышленное назначение",value:"Промышленное назначение"},{label:"ТЦ",value:"ТЦ"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Склады",value:"Склады"},{label:"Инвестпроект",value:"Инвестпроект"},{label:"Строительство образовательных учреждений",value:"Строительство образовательных учреждений"},{label:"АЗС",value:"АЗС"},{label:"Мойка",value:"Мойка"}],value:e["naznachenie-obekta_zemlya"],onChange:t=>e.onChange({"naznachenie-obekta_zemlya":t})})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("tip_zemli_uchastka"),columns:"3",outlined:!1,name:"tip_zemli_uchastka",title:"Тип земли/участка",itemList:["Делимый","Неделимый"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("poleznaya_ploshhad"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("etazh"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("sostoyanie-obekta_zemlya"),columns:"3",outlined:!1,name:"sostoyanie-obekta_zemlya",title:"Состояние объекта",itemList:["Пустая земля/участок","Недостроенная","Под снос"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("mashina_mesto"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kolichestvo_sotok"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("etazhnost"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("sostoyanie-remonta_zemlya"),columns:"3",outlined:!1,name:"sostoyanie-remonta_zemlya",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("parkovka_zemlya"),columns:"3",outlined:!1,name:"parkovka_zemlya",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_metro"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("obshhaya_ploshhad"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("voda_zemlya"),columns:"3",outlined:!1,name:"voda_zemlya",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("mestopolozhenie-obekta_zemlya"),columns:"3",outlined:!1,name:"mestopolozhenie-obekta_zemlya",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_goroda"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_goroda",title:"Расстояние до города (м)"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema-otopleniya_zemlya"),columns:"3",outlined:!1,name:"sistema-otopleniya_zemlya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("podezdnye_puti"),columns:"3",outlined:!1,name:"podezdnye_puti",title:"Подъездные пути",itemList:["Асфальтированная дорога","Грунтовая дорога","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema-kondiczionirovaniya_zemlya"),columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_zemlya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("god_postrojki"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("elektrichestvo_zemlya"),columns:"3",outlined:!1,name:"elektrichestvo_zemlya",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("gaz_zemlya"),columns:"3",outlined:!1,name:"gaz_zemlya",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("kanalizacziya_zemlya"),columns:"3",outlined:!1,name:"kanalizacziya_zemlya",title:"Канализация",itemList:["Да","Нет"]}]}}],wm=[{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"vnutri_est","ryadom_est"),isVisible:e=>{let t=!0;return t=t&&!Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Квартиры"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Квартиры)"})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vnutri_est"),columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Холодильник","Телевизор","Кондиционер","Стиральная машина","Мусоропровод","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("ryadom_est"),columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"vnutri_est","ryadom_est"),isVisible:e=>{let t=!0;return t=t&&!Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Дома"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Дома)"})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vnutri_est"),columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Холодильник","Телевизор","Кондиционер","Стиральная машина","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг","Полисадник"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("ryadom_est"),columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Охрана","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"vnutri_est","ryadom_est"),isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Квартиры"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая + Жилая квартира)"})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vnutri_est"),columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Холодильник","Телевизор","Кондиционер","Стиральная машина","Мусоропровод","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг","Пожарная сигнализация","Видеонаблюдение","Сигнализация"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("ryadom_est"),columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Охрана","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"vnutri_est","ryadom_est"),isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Земля/Участок"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая + Жилая земля/участок)"})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vnutri_est"),columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Забор","Катлаван","Пожарная сигнализация","Видеонаблюдение","Сигнализация"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("ryadom_est"),columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Охрана","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}}],Sm=[{type:o.Paper,hidden:e=>!Ds(e.fieldVisibility,"zagolovok","kategoriya_obekta","prodazha","arenda","podkategoriya_obekta","istochnik","tip_nedvizhimosti","vid_obekta","raspolozhenie_obekta","vid_liczenzii"),fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Основная информация"})},{type:o.Text,hidden:e=>!e.fieldVisibility.has("zagolovok"),outlined:!1,name:"zagolovok",title:"Заголовок",placeholder:"Введите текст"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("kategoriya_obekta"),outlined:!1,columns:"4",name:"kategoriya_obekta",title:"Категория объекта",itemList:["Жилая","Коммерческая","От застройщика"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("prodazha"),outlined:!1,columns:"4",name:"prodazha",title:"Покупка",itemList:["Прямая продажа","Рассрочка","Через банк","Обмен"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("arenda"),outlined:!1,columns:"4",name:"arenda",title:"Аренда",itemList:["Долгосрочная","Ежемесячная","Посуточная"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("podkategoriya_obekta"),outlined:!1,columns:"4",name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>Ee(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок","Здания","Базы"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("podkategoriya_obekta"),outlined:!1,columns:"4",name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>!Ee(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("istochnik"),columns:"4",outlined:!1,name:"istochnik",title:"Источник",itemList:["По звонку","Личные связи","Самостоятельный поиск","Риелтор","С сайта","Прибытие в офис","OLX","Facebook","Instagram","Telegram","Эксклюзив","Другое"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("tip_nedvizhimosti"),isVisible:e=>!(!Ee(e.podkategoriya_obekta,"Квартиры")||!Ee(e.kategoriya_obekta,"Коммерческая","Жилая")),columns:"4",outlined:!1,name:"tip_nedvizhimosti",title:"Тип недвижимости",itemList:["Вторичное жилье","Новостройка"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("vid_obekta"),isVisible:e=>{let t=!1;return t=t||Ee(e.podkategoriya_obekta,"Дома"),t},columns:"4",outlined:!1,name:"vid_obekta",title:"Вид объекта",itemList:["Дом","Коттедж","Таунхаус","ЖАКТ","Часть дома","Дача"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("raspolozhenie_obekta"),isVisible:e=>{let t=!1;return t=t||Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&!Ee(e.podkategoriya_obekta,"Дома"),t=t&&!Ee(e.podkategoriya_obekta,"Земля/Участок"),t=t&&!Ee(e.podkategoriya_obekta,"Квартиры"),t},columns:"4",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("vid_liczenzii"),isVisible:e=>{let t=!1;return t=t||Ee(e.podkategoriya_obekta,"Земля/Участок"),t},columns:"4",outlined:!1,name:"vid_liczenzii",title:"Вид лицензии",itemList:["Коммерческая","Жилая"]}]},...km,...wm,...gm,...fm];window.bid_filters=Sm;const zm=()=>et(bs.bidViewService.paginate,{onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),fallback:bs.errorService.handleGlobalError}),Vm=[{type:o.Box,noBaseline:!0,sx:{display:"grid",gridTemplateColumns:"auto auto 1fr auto","& > .MuiGrid-root":{minWidth:"275px"},minWidth:"calc(275px * 3)",mt:-1},fields:[{type:o.Choose,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",choose:async(e,t)=>{t.pickUser(e.system_created_by?[e.system_created_by]:[]);const i=await t.userResultSubject.toPromise();if(i&&i.length){const[e]=i;return e}return null},tr:async e=>{const t=await bs.userViewService.tryRead(e);return[null==t?void 0:t.last_name,null==t?void 0:t.first_name,null==t?void 0:t.middle_name].filter((e=>e)).join(" ")||(null==t?void 0:t.$id)||""},name:"system_created_by",title:"",placeholder:"Создал"},{type:o.Choose,sx:{minWidth:"100% !important"},fieldBottomMargin:"0",fieldRightMargin:"3",columns:"4",choose:async(e,t)=>{t.pickContact(e.contact_id?[e.contact_id]:[]);const i=await t.contactResultSubject.toPromise();if(i&&i.length){const[e]=i;return e}return null},tr:async e=>{const t=await bs.contactViewService.tryRead(e);return(null==t?void 0:t.fio)||(null==t?void 0:t.id)||""},name:"contact_id",title:"",placeholder:"Контакт"},{type:o.Div},{type:o.Text,fieldRightMargin:"1",fieldBottomMargin:"0",inputFormatterTemplate:"0000000000",inputFormatterAllowed:/^[0-9]/,name:"index",title:"",leadingIcon:()=>he(Te,{sx:{height:20,width:20,display:"flex",alignItems:"center",justifyContent:"center"},children:he(Ne,{textTransform:"lowercase",variant:"caption",children:"№"})}),placeholder:"",trailingIcon:()=>he(bi,{sx:{opacity:.5}}),trailingIconClick(e,t,i){e&&i("")}}]}],xm=()=>{const{filterData:e,handleFilter:t,payload:i,loading:a}=ei(),{pickData:o,render:l,resultSubject:n}=id({payload:i}),{pickData:r,render:s,resultSubject:d}=$c({payload:i});return he(Te,{sx:{mb:1},children:[he(_i,{sx:{height:"100%",minHeight:48},hideOverflowY:!0,children:he(Te,{sx:{display:"flex",alignItems:"center",justifyContent:"stretch",pt:1,pb:1},children:he(Je,{handler:e,fields:Vm,readonly:a,change:(e,i)=>{i||t(e)},payload:()=>({...i,pickUser:o,userResultSubject:n,pickContact:r,contactResultSubject:d}),fieldDebounce:el})})}),s(),l()]})},Am=({payload:e,features:t})=>{const i=zm(),a=Ve(),{columns:o}=ti({storageKey:"bid_columns",columns:yc}),{pickData:l,render:n,open:r}=at({title:"Выбор заявки",AfterTitle:({onClose:e})=>he(Be,{size:"small",onClick:e,children:he(Ye,{})}),withSearch:!0,withLoader:!0,withSingleChip:!0,noInitialFilters:!0,fetchDebounce:el,reloadSubject:bs.userViewService.reloadSubject,selectionMode:lt.Single,onSubmit:e=>(a.next(e),!0),AfterOperationList:xm,filterLabel:"Выбрать заявку",filters:Sm,chips:_c,columns:o,handler:i,payload:e,features:t});return{pickData:l,render:n,resultSubject:a,open:r}},Tm=[{type:o.Group,style:{minWidth:540},fields:[{type:o.Combo,title:"Тип сделки",isInvalid:e=>e.deal_type?null:"Укажите тип сделки",name:"deal_type",map:(e,t)=>{const{prod_czena:i,prod_startovaya_czena:a=i,prod_kom_czena:o,prod_kom_startovaya_czena:l=o,rent_czena:n,rent_startovaya_czena:r=n,rent_kom_czena:s,rent_kom_startovaya_czena:d=s,prod_czena_valyuta:c="usd",rent_czena_valyuta:m="usd"}=t.data;return e.deal_type&&"Продажа"===e.deal_type[0]&&(h.set(e,"price",a||l),h.set(e,"unit",[c||"usd"])),e.deal_type&&"Аренда"===e.deal_type[0]&&(h.set(e,"price",r||d),h.set(e,"unit",[m||"usd"])),e},itemList:()=>[...zn]},{type:o.Box,isVisible:({deal_type:e,price_type:t})=>!!e&&"fixed"===t,style:{display:"grid",gridTemplateColumns:"1fr 125px"},fields:[{type:o.Text,outlined:!1,placeholder:"Не указано",labelShrink:!0,name:"price",title:"Цена (Итог)"},{type:o.Combo,noDeselect:!0,fieldBottomMargin:"0",title:"Валюта",placeholder:"USD",itemList:["usd","uzs"],tr:e=>"uzs"===e?"SUM":"USD",defaultValue:"usd",outlined:!1,name:"unit"}]},{type:o.Text,fieldBottomMargin:"1",placeholder:"Введите комментарий",inputRows:3,labelShrink:!0,name:"comment",title:"Комментарий"},{hidden:!0,type:o.Radio,fieldBottomMargin:"0",name:"price_type",radioValue:"unset",defaultValue:"unset",title:"Цена не указана"},{hidden:!0,type:o.Radio,fieldBottomMargin:"0",name:"price_type",radioValue:"fixed",title:"Фиксированная"}]}],Cm=[{type:o.Choose,fieldBottomMargin:"1",isInvalid:e=>e.target_bid_id?null:"Укажите заявку",choose:async(e,t)=>{t.pickBid(e.target_bid_id?[e.target_bid_id]:[]);const i=await t.bidResultSubject.toPromise();if(i&&i.length){const[e]=i;return e}return null},tr:async e=>{const t=await bs.bidViewService.tryRead(e);return(null==t?void 0:t.zagolovok)||(null==t?void 0:t.$id)||""},name:"target_bid_id",title:"Выберите заявку",placeholder:"Не выбрано"},{type:o.Text,fieldBottomMargin:"1",placeholder:"Введите комментарий",inputRows:3,labelShrink:!0,name:"comment",title:"Комментарий"},{type:o.Radio,fieldBottomMargin:"0",title:"Закрытая сделка",name:"status",radioValue:"Закрытая сделка",defaultValue:"Закрытая сделка"},{type:o.Radio,fieldBottomMargin:"0",title:"Сделка сорвана",name:"status",radioValue:"Сделка сорвана"}],Fm=[{action:"deal-end-action",label:"Завершить сделку",isDisabled:({activeItem:e})=>!e}],Lm=Fs()((e=>({row:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr"},input:{paddingRight:"4px",paddingBottom:"4px"},onlyInput:{maxWidth:"500px",width:"100%"},select:{margin:"0 5px"},checkbox:{}}))),Im=({className:e,style:t,sx:i,value:a="",readonly:o,unit:l="usd",title:n,onChange:r})=>{const{reloadTrigger:s,doReload:d}=wi(),[c,m]=ue.useState(!1),p=(e=>"uzs"===e?"uzs":"usd")(l),u=Ke(o),h=Ke(c);ue.useEffect((()=>Y.join([u.toObserver(),h.toObserver()],{race:!0}).connect(d)),[]);return he(Wt,{type:"number",label:n,value:o||!c?a:void 0,defaultValue:a,className:e,style:t,sx:i,onKeyDown:e=>{tm(e.key)||e.preventDefault()},onChange:({target:e})=>{r({unit:p,value:e.value})},onFocus:()=>m(!0),onBlur:()=>m(!1),variant:"standard",fullWidth:!0,InputProps:{startAdornment:he($t,{sx:{userSelect:"none",cursor:"pointer"},onClick:()=>{"usd"===p&&r({value:a,unit:"uzs"}),"uzs"===p&&r({value:a,unit:"usd"})},position:"start",children:["usd"===p&&he(Si,{sx:{width:"36px"}}),"uzs"===p&&he("span",{style:{fontWeight:"bold"},children:"SUM"})]})}})},Mm=({className:e,style:t,sx:i,title:a,square:o,readonly:l,unit:n="usd",value:r="",onChange:s})=>{const{reloadTrigger:d,doReload:c}=wi(),[m,p]=ue.useState(!1),u=ue.useMemo((()=>(e=>"uzs"===e?"uzs":"usd")(n)),[n]),h=Ke(l),y=Ke(m);ue.useEffect((()=>Y.join([h.toObserver(),y.toObserver()],{race:!0}).connect(c)),[]);const b=ue.useMemo((()=>{if(!o||isNaN(o))return"";if(!r)return"";const e=+r/Math.max(+o,1);return l?e.toFixed(2):e}),[o,r,l]);return he(Wt,{type:"number",label:a,value:l||!m?b:void 0,defaultValue:b,disabled:!o||isNaN(o),className:e,style:t,sx:i,onKeyDown:e=>{tm(e.key)||e.preventDefault()},onChange:({target:e})=>{""!==e.value?s({square:o,unit:u,value:""===e.value?"":String(+e.value*+o)}):s({square:o,unit:u,value:""})},onFocus:()=>p(!0),onBlur:()=>p(!1),variant:"standard",fullWidth:!0,InputProps:{startAdornment:he($t,{sx:{userSelect:"none",cursor:"pointer"},onClick:()=>{"usd"===u&&s({value:r,unit:"uzs",square:o}),"uzs"===u&&s({value:r,unit:"usd",square:o})},position:"start",children:["usd"===u&&he(Si,{sx:{width:"36px"}}),"uzs"===u&&he("span",{style:{fontWeight:"bold"},children:"SUM"})]})}})},jm=({className:e,style:t,sx:i,title:a,value:o="",unit:l="%",readonly:n,onChange:r})=>{const{reloadTrigger:s,doReload:d}=wi(),c=ue.useMemo((()=>(e=>"1"===e?"1":"%")(l)),[l]),m=Ke(n);ue.useEffect((()=>m.subscribe(d)),[]);return he(Wt,{type:"number",label:a,className:e,style:t,sx:i,defaultValue:o,value:n?o:void 0,onKeyDown:e=>{tm(e.key)||e.preventDefault()},onChange:({target:e})=>{r({unit:c,value:e.value})},variant:"standard",fullWidth:!0,InputProps:{startAdornment:he($t,{sx:{userSelect:"none",cursor:"pointer"},onClick:()=>{"1"===c&&r({value:o,unit:"%"}),"%"===c&&r({value:o,unit:"1"})},position:"start",children:["%"===c&&he(zi,{}),"1"===c&&he(Vi,{})]})}})},Bm={},Rm=["komissiya_agenstva_unit","czena_sobstvennika","startovaya_czena_valyuta","komissiya_menedzhera","komissiya_agenstva","komissiya_menedzhera_unit","startovaya_czena","torg"],Dm=({isViewMode:e,square:t,value:i=Bm,title:a,prefix:o,readonly:l,onChange:n})=>{const{classes:r}=Lm(),s=ue.useCallback((()=>{const e=Object.entries(i).map((([e,t])=>[Ue(e,o),t])).filter((([e])=>Rm.includes(e)));return Object.fromEntries(e)}),[i]),[d,c]=ue.useState(s),m=ue.useMemo((()=>h.debounce(n,0)),[]),{resetWatcher:p}=At((()=>{const e=Object.entries(d).map((([e,t])=>[o+e,t]));m(Object.fromEntries(e))}),[d]);return At((()=>{p(),c(s)}),[t,i]),ue.useEffect((()=>()=>{m.flush()}),[]),he(_e,e?{children:[he(Ne,{variant:"h6",fontWeight:"bold",children:a}),he(Im,{title:"Стартовая цена",unit:d.startovaya_czena_valyuta,value:d.startovaya_czena,onChange:({unit:e,value:t})=>c((i=>({...i,startovaya_czena_valyuta:e,startovaya_czena:t}))),className:r.onlyInput})]}:{children:[he(Ne,{variant:"h6",fontWeight:"bold",children:a}),he(Te,{className:r.row,children:[he(Im,{readonly:l,title:"Цена собственника",unit:d.startovaya_czena_valyuta,value:d.czena_sobstvennika,onChange:({unit:e,value:t})=>c((i=>({...i,startovaya_czena_valyuta:e,czena_sobstvennika:t}))),className:r.input}),he(Im,{readonly:l,title:"Стартовая цена",unit:d.startovaya_czena_valyuta,value:d.startovaya_czena,onChange:({unit:e,value:t})=>c((i=>({...i,startovaya_czena_valyuta:e,startovaya_czena:t}))),className:r.input}),he(Mm,{readonly:l,title:"Стартовая цена м²",square:t,unit:d.startovaya_czena_valyuta,value:d.startovaya_czena,onChange:({unit:e,value:t})=>c((i=>({...i,startovaya_czena_valyuta:e,startovaya_czena:t}))),className:r.input})]}),he(Te,{className:r.row,children:he(xi,{className:r.checkbox,control:he(Fe,{checked:d.torg}),onChange:()=>c((e=>({...e,torg:!e.torg}))),label:"Торг"})}),!e&&he(Te,{className:r.row,children:[he(jm,{readonly:l,title:"Комиссия агенства",unit:d.komissiya_agenstva_unit,value:d.komissiya_agenstva,onChange:({unit:e,value:t})=>c((i=>({...i,komissiya_agenstva_unit:e,komissiya_agenstva:t}))),className:r.input}),he(jm,{readonly:l,title:"Комиссия менеджера",unit:d.komissiya_menedzhera_unit,value:d.komissiya_menedzhera,onChange:({unit:e,value:t})=>c((i=>({...i,komissiya_menedzhera_unit:e,komissiya_menedzhera:t}))),className:r.input})]})]})},qm=54,Pm=Fs()((e=>({root:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",overflow:"hidden",paddingBottom:"10px"},typogrphy:{padding:"10px"},container:{overflowX:"hidden",overflowY:"scroll",padding:e.spacing(1),flex:1},appBarRoot:{background:e.palette.primary.main,maxHeight:qm,height:qm,boxShadow:"unset",color:"#000"},tabsRoot:{minHeight:qm,height:qm,marginLeft:"0 !important",marginRight:"0 !important"},tabRoot:{minHeight:qm,height:qm,color:"#fff"},tabRootTransparent:{minHeight:qm,height:qm},tabSelected:{color:"#fff !important"},indicator:{height:6,background:"#0288d1"},indicatorTransparent:{height:6,background:e.palette.primary.main}}))),Em=({sx:e,withTransparentHeader:t,withRentTab:i=!0,withSellTab:a=!0,withCommonRow:o=!0,withCommerialRow:l=!0,readonly:n,isViewMode:r=!1,fieldData:s,onChange:d=(()=>{})})=>{const{classes:c}=Pm(),[m,p]=ue.useState("rent"),u=ue.useMemo((()=>s.obshhaya_ploshhad?s.obshhaya_ploshhad:s.ploshhad_doma?s.ploshhad_doma:""),[s]);return ue.useEffect((()=>{a?p("sell"):i&&p("rent")}),[i,a]),he(ai,{className:c.root,sx:{...e,height:"100%"},children:he(Ai,{value:m,children:[t&&he(Te,{sx:{borderBottom:1,borderColor:"divider",pointerEvents:"all"},children:he(Ti,{variant:"fullWidth",classes:{root:c.tabsRoot,indicator:c.indicatorTransparent},onChange:(e,t)=>p(t),children:[a&&he(Ci,{classes:{root:c.tabRootTransparent},label:"Продажа",value:"sell"}),i&&he(Ci,{classes:{root:c.tabRootTransparent},label:"Аренда",value:"rent"})]})}),!t&&he(Fi,{classes:{root:c.appBarRoot},position:"static",sx:{borderBottom:1,borderColor:"divider",pointerEvents:"all"},children:he(Ti,{variant:"fullWidth",classes:{root:c.tabsRoot,indicator:c.indicator},onChange:(e,t)=>p(t),children:[a&&he(Ci,{classes:{root:c.tabRoot,selected:c.tabSelected},label:"Продажа",value:"sell"}),i&&he(Ci,{classes:{root:c.tabRoot,selected:c.tabSelected},label:"Аренда",value:"rent"})]})}),a&&he(Li,{className:c.container,sx:{pointerEvents:n?"none":"unset"},value:"sell",children:[o&&he(Dm,{isViewMode:r,readonly:n,title:"Продажа",prefix:"prod_",square:u,value:s,onChange:d}),l&&he(Dm,{isViewMode:r,readonly:n,title:"Продажа ком.",prefix:"prod_kom_",square:u,value:s,onChange:d})]}),i&&he(Li,{className:c.container,sx:{pointerEvents:n?"none":"unset"},value:"rent",children:[o&&he(Dm,{isViewMode:r,readonly:n,title:"Аренда",prefix:"rent_",value:s,onChange:d,square:u}),l&&he(Dm,{isViewMode:r,readonly:n,title:"Аренда ком.",prefix:"rent_kom_",value:s,onChange:d,square:u})]})]})})},Nm=[{type:o.Paper,isVisible:(e,{hideAutofindFlag:t})=>!t,features:["hasResponsiblePermission"],fieldBottomMargin:"1",fieldRightMargin:"1",columns:"12",fields:[{type:o.Component,element:({id:e,payload:t,features:i,_fieldData:a})=>{const[o,l]=ue.useState(null),[n,r]=ue.useState(null),s=ue.useMemo((()=>({...o,occupiedBy:n})),[o,n]),{pickData:d,render:c,resultSubject:m}=Am({payload:t,features:i}),{loading:p,execute:u}=be((async()=>{const t=bs.appwriteService.currentUser.$id,i=await bs.dealHistoryRequestService.readDealStateByApartment(e,t),a=await bs.dealViewService.findOccupiedByTargetApartmentId(e);l(i),r(a)}),{onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),fallback:bs.errorService.handleGlobalError}),{handleLoadStart:y,handleLoadEnd:b}=$e({history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)}),_=We({large:!0,title:"Завершение сделки",fields:Cm,payload:()=>({...t,pickBid:d,bidResultSubject:m}),features:i}),v=We({large:!0,title:"Начало сделки",fields:Tm,payload:()=>({...t,data:a}),features:i});ue.useEffect((()=>bs.dealHistoryViewService.createSubject.subscribe((t=>{t.apartment_id===e&&u()}))),[]),ue.useEffect((()=>{u()}),[]);const f=()=>{v().then((async t=>{if(!t)return;const i=t.deal_type?t.deal_type[0]:"";if(!i)return;let a=[],o="usd";"fixed"===t.price_type&&(a=[t.price],o=t.unit?t.unit[0]:"usd"),(async(t,i=[],a="usd",o="")=>{let l=!0;y();try{const l=bs.appwriteService.currentUser.$id;await bs.dealHistoryRequestService.commitApartmentDealBegin(e,l,t,i,a,o),await u()}catch(n){bs.alertService.notify(jr(n)),l=!1}finally{b(l)}})(i,a,o,t.comment)}))},g=async()=>{let t=!0;y();try{const t=bs.appwriteService.currentUser.$id;await bs.dealHistoryRequestService.commitApartmentDealReassign(e,t),await u()}catch(i){t=!1}finally{b(t)}},k=t=>{"deal-end-action"===t&&_().then((t=>{t&&(async(t,i,a)=>{let o=!0;y();try{bs.appwriteService.currentUser.$id,await bs.dealRequestService.commitApartmentDealEnd(e,t,i,a),await u()}catch(l){o=!1}finally{b(o)}})(t.target_bid_id,t.status,t.comment)}))};return he(Pe,{style:{pointerEvents:"all"},direction:"column",children:[he(Ne,{variant:"body1",sx:{mt:-.5,mb:1,color:e=>e.palette.action.active,fontWeight:"bold"},children:"Сделка"}),he(Pe,{direction:"column",gap:"16px",children:[he(Pe,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[he(Le,{loading:p,Loader:()=>he(Pe,{direction:"row",gap:"16px",alignItems:"center",children:[he(fi,{variant:"circular",width:40,height:40}),he(Pe,{children:[he(fi,{sx:{mb:1},variant:"rectangular",width:210,height:20}),he(fi,{variant:"rectangular",width:210,height:20})]})]}),payload:s,children:async e=>{if(e.occupiedBy)return he(Ne,{variant:"body1",children:["Сделка в статусе"," ",he(gi,{href:"#",onClick:()=>Z("/deal"),children:e.occupiedBy.status})]});if(!(null==e?void 0:e.activeItem))return he(Ne,{variant:"body1",children:"Сделка не создана"});const{first_name:t="Не указано",user_role:i,avatar:a=null}=await bs.userViewService.read(e.activeItem.user_id),o=a?await bs.appwriteService.getImageURL(a):"",l=await bs.dictService.getUserRoles();return he(Pe,{direction:"row",gap:"16px",alignItems:"center",children:[he(it,{alt:t,src:o}),he(Pe,{direction:"column",children:[he(Ne,{variant:"body1",children:t}),he(Ne,{variant:"caption",style:{fontSize:"14px"},children:(null==i?void 0:i.length)?h.get(l,i[0])||i[0]:"Не указано"})]})]})}}),he(Pe,{direction:"row",gap:1,alignItems:"center",children:[he(Le,{loading:p,Loader:()=>he(fi,{variant:"rectangular",sx:{borderRadius:"4px"},width:100,height:35}),payload:s,children:async t=>{if(t.occupiedBy)return null;if(await bs.permissionRequestService.hasReassignDelayFlagByApartmentId(e))return he(pt,{disabled:!0,variant:"contained",children:"Сделка активна"});if(null==t?void 0:t.activeItem){const e=bs.appwriteService.currentUser.$id,i=t.activeItem.user_id===e;return he(pt,{disabled:i,onClick:g,variant:"contained",children:i?"Сделка создана":"Забрать сделку"})}return he(pt,{onClick:f,variant:"contained",children:"Создать сделку"})}}),he(Le,{loading:p,Loader:()=>he(fi,{variant:"circular",width:40,height:40}),payload:s,children:async e=>he(xt,{transparent:!0,options:Fm,payload:e,onAction:k})})]})]}),he(Le,{loading:p,Loader:()=>he(ki,{max:Number.POSITIVE_INFINITY,style:{marginRight:"auto"},children:[he(fi,{variant:"circular",width:28,height:28}),he(fi,{variant:"circular",width:28,height:28}),he(fi,{variant:"circular",width:28,height:28})]}),payload:s,children:async e=>{var t;if(!(null==(t=null==e?void 0:e.reassign)?void 0:t.length))return null;const i=await Promise.all(e.reassign.filter(((e,t,i)=>i.findIndex((({user_id:t})=>t===e.user_id))==t)).map((async({user_id:e})=>{const t=await bs.userViewService.tryRead(e);let i="";return(null==t?void 0:t.avatar)&&(i=await bs.appwriteService.getImageURL(t.avatar)),he(it,{style:{height:"28px",width:"28px"},alt:null==t?void 0:t.email,src:i})})));return he(ki,{max:Number.POSITIVE_INFINITY,style:{marginRight:"auto"},children:i})}})]}),c()]})}}]},{type:o.Paper,innerPadding:"0",features:["hasResponsiblePermission"],fieldBottomMargin:"1",fieldRightMargin:"1",columns:"12",fields:[{type:o.Component,element:({system_created_by:e,system_only_for_owner:t,system_allowance:i})=>{const{classes:a}=Gd();return he(Pe,{style:{pointerEvents:"all"},direction:"column",children:[he(Ne,{variant:"body1",sx:{m:2,color:e=>e.palette.action.active,fontWeight:"bold"},children:"Доступ"}),he(Ct,{disablePadding:!0,dense:!0,children:he(Le,{deps:[t,i],children:async()=>{const o=[];return e&&o.push(e),i&&i.forEach((e=>o.push(e))),o.length?he(_e,{children:await Promise.all(o.filter(((e,t,i)=>i.indexOf(e)==t)).map((async(i,o)=>{var l;const n=await bs.userViewService.read(i),r=n.avatar?await bs.appwriteService.getImageURL(n.avatar):"",s=await bs.dictService.getUserRoles(),d=[n.last_name,n.first_name,n.middle_name].filter((e=>e)).join(" "),c=(null==(l=n.user_role)?void 0:l.length)?h.get(s,n.user_role[0])||n.user_role[0]:"Не указано";return he(bt,{className:Ce({[a.listItemAccient]:o%2==0}),children:[he(_t,{children:he(it,{src:r})}),he(ft,{primary:d,secondary:n.phone||c}),i===e&&he(Pe,{gap:1,direction:"row",children:[he(Ut,{label:"Создал объект",color:"info"}),!!t&&he(Ut,{label:"Эксклюзив",color:"warning"})]})]})})))}):he(Ne,{sx:{m:2,mt:-.5},children:"Все пользователи"})}})})]})}}]},{type:o.Group,fieldRightMargin:"0",fieldBottomMargin:"0",columns:"12",fields:[{type:o.Paper,style:{height:"100%"},columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>Ds(e,"kategoriya_obekta","podkategoriya_obekta","arenda","prodazha","istochnik"),fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Основная информация"})},{type:o.Text,isVisible:e=>Ds(e,"zagolovok"),outlined:!1,name:"zagolovok",title:"Заголовок",placeholder:"Введите текст"},{type:o.Text,isVisible:e=>Ds(e,"kategoriya_obekta"),outlined:!1,compute:({kategoriya_obekta:e})=>(null==e?void 0:e.flatMap((e=>e)).join(", "))||"",title:"Категория объекта"},{type:o.Text,isVisible:e=>Ds(e,"podkategoriya_obekta"),outlined:!1,compute:({podkategoriya_obekta:e})=>e||"",title:"Подкатегория объекта"},{type:o.Text,isVisible:e=>Ds(e,"arenda","prodazha"),outlined:!1,compute:({arenda:e,prodazha:t})=>t&&e?"Продажа, Аренда":t?"Продажа":e?"Аренда":"Не задано",title:"Тип сделки"},{type:o.Text,isVisible:e=>Ds(e,"strana"),outlined:!1,columns:"6",compute:({strana:e})=>e||"",title:"Страна"},{type:o.Text,isVisible:e=>Ds(e,"oblast"),outlined:!1,columns:"6",compute:({oblast:e})=>e||"",title:"Область"},{type:o.Text,isVisible:e=>Ds(e,"gorod"),outlined:!1,compute:({gorod:e})=>e||"",title:"Город"},{type:o.Text,isVisible:e=>Ds(e,"ulicza"),outlined:!1,compute:({ulicza:e})=>{const t=[e?e.toLowerCase().includes("улица")?e:"улица ".concat(e):null].filter((e=>e));return t.length?t.flatMap((e=>e)).join(", "):"Не указан"},title:"Адрес"},{type:o.Text,isVisible:e=>Ds(e,"rajon"),outlined:!1,compute:({rajon:e})=>e||"",title:"Район"},{type:o.Text,isVisible:e=>Ds(e,"mahallya"),outlined:!1,compute:({mahallya:e})=>e||"",title:"Махалля"},{type:o.Text,isVisible:e=>Ds(e,"orientir"),outlined:!1,compute:({orientir:e})=>e||"",title:"Ориентир"},{type:o.Text,isVisible:e=>Ds(e,"metro"),outlined:!1,compute:({metro:e})=>e||"",title:"Метро"},{type:o.Fragment,isVisible:e=>{let t=!1;return t=t||Ee(e.podkategoriya_obekta,"Квартиры"),t},fields:[{type:o.Text,isVisible:e=>Ds(e,"nomer_doma"),features:["hasApartmentHouseNumberPermission"],columns:"6",outlined:!1,name:"nomer_doma",title:"№ дома"},{type:o.Text,isVisible:e=>Ds(e,"nomer_kvartiry"),features:["hasApartmentHouseNumberPermission"],columns:"6",outlined:!1,name:"nomer_kvartiry",title:"№ квартиры"}]},{type:o.Fragment,isVisible:e=>{let t=!1;return t=t||null!==e.kategoriya_obekta,t=t||null!==e.podkategoriya_obekta,t=t&&!Ee(e.podkategoriya_obekta,"Квартиры"),t},fields:[{type:o.Text,isVisible:e=>Ds(e,"nomer_doma"),features:["hasApartmentHouseNumberPermission"],outlined:!1,name:"nomer_doma",title:"№ дома"}]},{type:o.Text,isVisible:e=>Ds(e,"istochnik"),outlined:!1,compute:({istochnik:e})=>e||"",title:"Источник"},{type:o.Component,isVisible:e=>Ds(e,"tip_klienta"),fieldBottomMargin:"2",element:({contact_id:e})=>he(Le,{payload:e,Loader:()=>he(Wt,{fullWidth:!0,variant:"standard",label:"Тип клиента",InputProps:{readOnly:!0},value:"Загрузка"}),children:async()=>{const t=await bs.contactViewService.tryRead(e),i=(null==t?void 0:t.tip_klienta)||"";return he(Wt,{fullWidth:!0,variant:"standard",label:"Тип клиента",InputProps:{readOnly:!0},value:i})}})},{type:o.Text,isVisible:e=>{let t=!0;return t=t&&Ee(e.podkategoriya_obekta,"Квартиры"),t=t&&Ee(e.kategoriya_obekta,"Коммерческая","Жилая"),W(t,Ds(e,"tip_nedvizhimosti"))},outlined:!1,compute:({tip_nedvizhimosti:e})=>e||"",title:"Тип недвижимости"}]},{type:o.Group,style:{height:"100%"},columns:"6",fields:[{type:o.Component,style:{height:"100%"},fieldRightMargin:"1",fieldBottomMargin:"1",element:({onChange:e,_fieldData:t,features:i})=>he(Em,{withTransparentHeader:!0,readonly:!0,onChange:e,fieldData:t,isViewMode:!i.includes("hasCommissionPermission")})}]}]},{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&Ee(e.podkategoriya_obekta,"Квартиры"),t=t&&Ee(e.kategoriya_obekta,"Жилая"),t=t&&!Ee(e.kategoriya_obekta,"Коммерческая"),t},fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилая квартира)"})},{type:o.Text,columns:"3",isVisible:e=>{let t=!0;return t=t&&Ee(e.podkategoriya_obekta,"Квартиры"),t=t&&Ee(e.kategoriya_obekta,"Коммерческая","Жилая"),W(t,Ds(e,"nazvanie_zhk"))},outlined:!1,compute:({nazvanie_zhk:e})=>e||"",title:"Название ЖК"},{type:o.Text,columns:"3",outlined:!1,compute:({kolichestvo_komnat:e})=>e||"",isVisible:e=>Ds(e,"kolichestvo_komnat"),title:"Количество комнат"},{type:o.Text,columns:"3",outlined:!1,compute:({etazh:e})=>e||"",isVisible:e=>Ds(e,"etazh"),title:"Этаж"},{type:o.Text,columns:"3",outlined:!1,compute:({etazhnost:e})=>e||"",isVisible:e=>Ds(e,"etazhnost"),title:"Этажность"},{type:o.Text,columns:"3",outlined:!1,placeholder:"Нет данных",compute:({obshhaya_ploshhad:e,ploshhad_doma:t})=>[e,t].flatMap((e=>e)).join(" "),isVisible:e=>Ds(e,"obshhaya_ploshhad","ploshhad_doma"),title:"Общая площадь М²"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},{type:o.Text,columns:"3",outlined:!1,compute:({kolichestvo_spalen:e})=>e||"",isVisible:e=>Ds(e,"kolichestvo_spalen"),title:"Количество спален"},{type:o.Text,columns:"3",outlined:!1,compute:({spalnya_sanuzel:e})=>e||"",isVisible:e=>Ds(e,"spalnya_sanuzel"),title:"Комната + санузел"},{type:o.Text,columns:"3",outlined:!1,placeholder:"Нет данных",compute:({zhilaya_ploshhad:e})=>e||"",isVisible:e=>Ds(e,"zhilaya_ploshhad"),title:"Жилая площадь М²"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,placeholder:"Нет данных",compute:e=>[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"balkon","balkon_kvartira","balkon_doma"),title:"Балкон"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,placeholder:"Нет данных",compute:({tip_planirovki:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"tip_planirovki"),title:"Тип планировки"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,placeholder:"Нет данных",compute:e=>[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"mebel","mebel_kvartira","mebel_dom"),title:"Мебель"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,placeholder:"Нет данных",compute:e=>[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sanuzel","sanuzel_kvartira","sanuzel_doma"),title:"Санузел"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,placeholder:"Нет данных",compute:e=>[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma"),title:"Тип строения"},{type:o.Text,columns:"3",outlined:!1,placeholder:"Нет данных",compute:({vysota_potolkov:e})=>e||"",isVisible:e=>Ds(e,"vysota_potolkov"),title:"Высота потолков"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:"Система отопления"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,placeholder:"Нет данных",compute:({energonositel_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"energonositel_obekta"),title:"Энергоноситель объекта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"lift_kommercziya","lift_kvartira","lift_dom"),title:"Лифт"},{type:o.Text,columns:"3",outlined:!1,placeholder:"Нет данных",compute:({podezd_nomer:e})=>e||"",isVisible:e=>Ds(e,"podezd_nomer"),title:"Подъезд №"},{type:o.Text,columns:"3",outlined:!1,compute:({kod_domofona:e})=>e||"",isVisible:e=>Ds(e,"kod_domofona"),title:"Код домофона"},{type:o.Text,columns:"3",outlined:!1,placeholder:"Нет данных",compute:({rasstoyanie_do_metro:e})=>e||"",isVisible:e=>Ds(e,"rasstoyanie_do_metro"),title:"Расстояние до метро (м)"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,placeholder:"Нет данных",compute:({vid_iz_okna:e,vid_iz_okna_dom:t})=>[...e||[],...t||[]].reduce(((e,t)=>e.includes(t)?e:[...e,t]),[]).filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"vid_iz_okna","vid_iz_okna_dom"),title:"Вид из окна"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"parkovka","parkovka_kvartira","parkovka_zemlya"),title:"Парковка"},{type:o.Text,columns:"3",outlined:!1,compute:({god_postrojki:e})=>e||"",isVisible:e=>Ds(e,"god_postrojki"),title:"Год постройки"},{type:o.Text,columns:"3",outlined:!1,compute:({terrasa:e})=>e?"Да":"Нет",isVisible:e=>Ds(e,"terrasa"),title:"Терраса"},{type:o.Text,columns:"3",outlined:!1,compute:({czokol_podval:e})=>e?"Да":"Нет",isVisible:e=>Ds(e,"czokol_podval"),title:"Цоколь/Подвал"},{type:o.Text,columns:"3",outlined:!1,compute:({garderobnaya:e})=>e?"Да":"Нет",isVisible:e=>Ds(e,"garderobnaya"),title:"Гардеробная"},{type:o.Text,columns:"3",outlined:!1,compute:({umnyj_dom:e})=>e?"Да":"Нет",isVisible:e=>Ds(e,"umnyj_dom"),title:"Умный дом"}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&Ee(e.podkategoriya_obekta,"Дома"),t=t&&Ee(e.kategoriya_obekta,"Жилая"),t=t&&!Ee(e.kategoriya_obekta,"Коммерческая"),t},fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилой дом)"})},{type:o.Text,columns:"3",outlined:!1,placeholder:"Нет данных",compute:({kolichestvo_komnat:e})=>e||"",isVisible:e=>Ds(e,"kolichestvo_komnat"),title:"Количество комнат"},{type:o.Text,columns:"3",outlined:!1,placeholder:"Нет данных",compute:({etazhnost:e})=>e||"",isVisible:e=>Ds(e,"etazhnost"),title:"Этажность"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_doma:e})=>e||"",isVisible:e=>Ds(e,"ploshhad_doma"),title:"Площадь дома М²"},{type:o.Text,columns:"3",outlined:!1,compute:({kolichestvo_sotok:e})=>e||"",isVisible:e=>Ds(e,"kolichestvo_sotok"),title:"Количество соток"},{type:o.Text,columns:"3",outlined:!1,compute:({kolichestvo_spalen:e})=>e||"",isVisible:e=>Ds(e,"kolichestvo_spalen"),title:"Количество спален"},{type:o.Text,columns:"3",outlined:!1,compute:({spalnya_sanuzel:e})=>e||"",isVisible:e=>Ds(e,"spalnya_sanuzel"),title:"Комната + санузел"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sanuzel","sanuzel_kvartira","sanuzel_doma"),title:"Санузел"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({bassejn:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"bassejn"),title:"Бассейн"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"mebel","mebel_kvartira","mebel_dom"),title:"Мебель"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,placeholder:"Нет данных",compute:({sostoyanie_doma:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sostoyanie_doma"),title:"Состояние дома"},{type:o.Text,columns:"3",outlined:!1,compute:({mashina_mesto:e})=>e||"",isVisible:e=>Ds(e,"mashina_mesto"),title:"Машина-место"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({tip_planirovki:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"tip_planirovki"),title:"Тип планировки"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma"),title:"Тип строения"},{type:o.Text,columns:"3",outlined:!1,compute:({vysota_potolkov:e})=>e||"",isVisible:e=>Ds(e,"vysota_potolkov"),title:"Высота потолков"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({garazh:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"garazh"),title:"Гараж"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:"Система отопления"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:"Система кондиционирования"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({raspolozhenie_doma:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"raspolozhenie_doma"),title:"Расположение дома"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya"),title:"Канализация"},{type:o.Text,columns:"3",outlined:!1,compute:({rasstoyanie_do_metro:e})=>e||"",isVisible:e=>Ds(e,"rasstoyanie_do_metro"),title:"Расстояние до метро (м)"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({vid_iz_okna:e,vid_iz_okna_dom:t})=>[...e||[],...t||[]].reduce(((e,t)=>e.includes(t)?e:[...e,t]),[]).filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"vid_iz_okna","vid_iz_okna_dom"),title:"Вид из окна"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"lift_kommercziya","lift_kvartira","lift_dom"),title:"Лифт"},{type:o.Text,columns:"3",outlined:!1,placeholder:"Нет данных",compute:({god_postrojki:e})=>e||"",isVisible:e=>Ds(e,"god_postrojki"),title:"Год постройки"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.voda,e.voda_dom,e.voda_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"voda","voda_dom","voda_zemlya"),title:"Вода"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"gaz","gaz_dom","gaz_zemlya"),title:"Газ"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya"),title:"Электричество"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"balkon","balkon_kvartira","balkon_doma"),title:"Балкон"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya"),title:"Местоположение объекта"},{type:o.Text,columns:"3",outlined:!1,compute:({terrasa:e})=>e?"Да":"Нет",isVisible:e=>Ds(e,"terrasa"),title:"Терраса"},{type:o.Text,columns:"3",outlined:!1,compute:({garderobnaya:e})=>e?"Да":"Нет",isVisible:e=>Ds(e,"garderobnaya"),title:"Гардеробная"},{type:o.Text,columns:"3",outlined:!1,compute:({czokol:e})=>e?"Да":"Нет",isVisible:e=>Ds(e,"czokol"),title:"Цоколь"},{type:o.Text,columns:"3",outlined:!1,compute:({podval:e})=>e?"Да":"Нет",isVisible:e=>Ds(e,"podval"),title:"Подвал"},{type:o.Text,columns:"3",outlined:!1,compute:({umnyj_dom:e})=>e?"Да":"Нет",isVisible:e=>Ds(e,"umnyj_dom"),title:"Умный дом"},{type:o.Text,columns:"3",outlined:!1,compute:({vdol_dorogi:e})=>e?"Да":"Нет",isVisible:e=>Ds(e,"vdol_dorogi"),title:"Вдоль дороги"},{type:o.Text,columns:"3",outlined:!1,compute:({uglovoj:e})=>e?"Да":"Нет",isVisible:e=>Ds(e,"uglovoj"),title:"Угловой"},{type:o.Text,columns:"3",outlined:!1,compute:({dva_doma_vo_dvore:e})=>e?"Да":"Нет",isVisible:e=>Ds(e,"dva_doma_vo_dvore"),title:"2 дома во дворе"},{type:o.Text,columns:"3",outlined:!1,compute:({komnata_ohrany:e})=>e?"Да":"Нет",isVisible:e=>Ds(e,"komnata_ohrany"),title:"Комната охраны"},{type:o.Text,columns:"3",outlined:!1,compute:({gostevoj_domik:e})=>e?"Да":"Нет",isVisible:e=>Ds(e,"gostevoj_domik"),title:"Гостевой домик"},{type:o.Text,columns:"3",outlined:!1,compute:({barbekyu_zona:e})=>e?"Да":"Нет",isVisible:e=>Ds(e,"barbekyu_zona"),title:"Барбекю зона"},{type:o.Text,columns:"3",outlined:!1,compute:({dopolnitelnaya_pristrojka:e})=>e?"Да":"Нет",isVisible:e=>Ds(e,"dopolnitelnaya_pristrojka"),title:"Дополнительная пристройка"},{type:o.Text,columns:"3",outlined:!1,compute:({ogorod:e})=>e?"Да":"Нет",isVisible:e=>Ds(e,"ogorod"),title:"Огород"},{type:o.Text,columns:"3",outlined:!1,compute:({saraj:e})=>e?"Да":"Нет",isVisible:e=>Ds(e,"saraj"),title:"Сарай"}]},{type:o.Fragment,isVisible:e=>(!Ee(e.podkategoriya_obekta,"Земля/Участок")||!Ee(e.kategoriya_obekta,"Коммерческая"))&&((!Ee(e.podkategoriya_obekta,"Дома")||!Ee(e.kategoriya_obekta,"Коммерческая"))&&((!Ee(e.podkategoriya_obekta,"Квартиры")||!Ee(e.kategoriya_obekta,"Коммерческая"))&&Ee(e.kategoriya_obekta,"Коммерческая"))),fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая недвижимость)"})},{type:o.Text,columns:"3",outlined:!1,compute:({kolichestvo_komnat:e})=>e||"",isVisible:e=>Ds(e,"kolichestvo_komnat"),title:"Количество комнат"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:"Назначение объекта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_obekta,e["sostoyanie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sostoyanie_obekta","sostoyanie-obekta_zemlya"),title:"Состояние объекта"},{type:o.Text,columns:"3",outlined:!1,compute:({poleznaya_ploshhad:e})=>e||"",isVisible:e=>Ds(e,"poleznaya_ploshhad"),title:"Полезная площадь М²"},{type:o.Text,columns:"3",outlined:!1,compute:({etazh:e})=>e||"",isVisible:e=>Ds(e,"etazh"),title:"Этаж"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},{type:o.Text,columns:"3",outlined:!1,compute:({mashina_mesto:e})=>e||"",isVisible:e=>Ds(e,"mashina_mesto"),title:"Машина-место"},{type:o.Text,columns:"3",outlined:!1,compute:({kolichestvo_sotok:e})=>e||"",isVisible:e=>Ds(e,"kolichestvo_sotok"),title:"Количество соток"},{type:o.Text,columns:"3",outlined:!1,compute:({etazhnost:e})=>e||"",isVisible:e=>Ds(e,"etazhnost"),title:"Этажность"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma"),title:"Тип строения"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"parkovka","parkovka_kvartira","parkovka_zemlya"),title:"Парковка"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sanuzel","sanuzel_kvartira","sanuzel_doma"),title:"Санузел"},{type:o.Text,columns:"3",outlined:!1,compute:({obshhaya_ploshhad:e,ploshhad_doma:t})=>[e,t].filter((e=>e)).flatMap((e=>e)).join(" "),isVisible:e=>Ds(e,"obshhaya_ploshhad","ploshhad_doma"),title:"Общая площадь М²"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"balkon","balkon_kvartira","balkon_doma"),title:"Балкон"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.voda,e.voda_dom,e.voda_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"voda","voda_dom","voda_zemlya"),title:"Вода"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya"),title:"Канализация"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"lift_kommercziya","lift_kvartira","lift_dom"),title:"Лифт"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:"Система отопления"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"gaz","gaz_dom","gaz_zemlya"),title:"Газ"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"mebel","mebel_kvartira","mebel_dom"),title:"Мебель"},{type:o.Text,columns:"3",outlined:!1,compute:({rasstoyanie_do_metro:e})=>e||"",isVisible:e=>Ds(e,"rasstoyanie_do_metro"),title:"Расстояние до метро (м)"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya"),title:"Электричество"},{type:o.Text,columns:"3",outlined:!1,compute:({god_postrojki:e})=>e||"",isVisible:e=>Ds(e,"god_postrojki"),title:"Год постройки"},{type:o.Text,columns:"3",outlined:!1,compute:({vysota_potolkov:e})=>e||"",isVisible:e=>Ds(e,"vysota_potolkov"),title:"Высота потолков"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya"),title:"Местоположение объекта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:"Система кондиционирования"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({raspolozhenie_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"raspolozhenie_obekta"),title:"Расположение объекта"}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&Ee(e.podkategoriya_obekta,"Земля/Участок"),t=t&&Ee(e.kategoriya_obekta,"Жилая"),t=t&&!Ee(e.kategoriya_obekta,"Коммерческая"),t},fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилая земля/участок)"})},{type:o.Text,columns:"3",outlined:!1,compute:({kolichestvo_komnat:e})=>e||"",title:"Количество комнат",isVisible:e=>Ds(e,"kolichestvo_komnat")},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:"Назначение объекта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({tip_zemli_uchastka:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"tip_zemli_uchastka"),title:"Тип земли/участка"},{type:o.Text,columns:"3",outlined:!1,compute:({poleznaya_ploshhad:e})=>e||"",isVisible:e=>Ds(e,"poleznaya_ploshhad"),title:"Полезная площадь М²"},{type:o.Text,columns:"3",outlined:!1,compute:({etazh:e})=>e||"",isVisible:e=>Ds(e,"etazh"),title:"Этаж"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_obekta,e["sostoyanie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sostoyanie_obekta","sostoyanie-obekta_zemlya"),title:"Состояние объекта"},{type:o.Text,columns:"3",outlined:!1,compute:({mashina_mesto:e})=>e||"",isVisible:e=>Ds(e,"mashina_mesto"),title:"Машина-место"},{type:o.Text,columns:"3",outlined:!1,compute:({kolichestvo_sotok:e})=>e||"",isVisible:e=>Ds(e,"kolichestvo_sotok"),title:"Количество соток"},{type:o.Text,columns:"3",outlined:!1,compute:({etazhnost:e})=>e||"",isVisible:e=>Ds(e,"etazhnost"),title:"Этажность"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"parkovka","parkovka_kvartira","parkovka_zemlya"),title:"Парковка"},{type:o.Text,columns:"3",outlined:!1,compute:({rasstoyanie_do_metro:e})=>e||"",isVisible:e=>Ds(e,"rasstoyanie_do_metro"),title:"Расстояние до метро (м)"},{type:o.Text,columns:"3",outlined:!1,compute:({obshhaya_ploshhad:e,ploshhad_doma:t})=>[e,t].filter((e=>e)).flatMap((e=>e)).join(" "),isVisible:e=>Ds(e,"obshhaya_ploshhad","ploshhad_doma"),title:"Общая площадь М²"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.voda,e.voda_dom,e.voda_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"voda","voda_dom","voda_zemlya"),title:"Вода"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya"),title:"Местоположение объекта"},{type:o.Text,columns:"3",outlined:!1,compute:({rasstoyanie_do_goroda:e})=>e||"",isVisible:e=>Ds(e,"rasstoyanie_do_goroda"),title:"Расстояние до города (м)"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:"Система отопления"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({podezdnye_puti:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"podezdnye_puti"),title:"Подъездные пути"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:"Система кондиционирования"},{type:o.Text,columns:"3",outlined:!1,compute:({god_postrojki:e})=>e||"",isVisible:e=>Ds(e,"god_postrojki"),title:"Год постройки"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya"),title:"Электричество"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"gaz","gaz_dom","gaz_zemlya"),title:"Газ"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya"),title:"Канализация"}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&Ee(e.podkategoriya_obekta,"Квартиры"),t=t&&U(W(Ee(e.kategoriya_obekta,"Коммерческая"),Ee(e.kategoriya_obekta,"Жилая")),W(Ee(e.kategoriya_obekta,"Коммерческая"),!Ee(e.kategoriya_obekta,"Жилая"))),t},fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая + Жилая квартира)"})},{type:o.Text,columns:"3",outlined:!1,compute:({kolichestvo_komnat:e})=>e||"",isVisible:e=>Ds(e,"kolichestvo_komnat"),title:"Количество комнат"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:"Назначение объекта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma"),title:"Тип строения"},{type:o.Text,columns:"3",outlined:!1,compute:({etazh:e})=>e||"",isVisible:e=>Ds(e,"etazh"),title:"Этаж"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"balkon","balkon_kvartira","balkon_doma"),title:"Балкон"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({tip_planirovki:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"tip_planirovki"),title:"Тип планировки"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"lift_kommercziya","lift_kvartira","lift_dom"),title:"Лифт"},{type:o.Text,columns:"3",outlined:!1,compute:({etazhnost:e})=>e||"",isVisible:e=>Ds(e,"etazhnost"),title:"Этажность"},{type:o.Text,columns:"3",outlined:!1,compute:({god_postrojki:e})=>e||"",isVisible:e=>Ds(e,"god_postrojki"),title:"Год постройки"},{type:o.Text,columns:"3",outlined:!1,compute:({mashina_mesto:e})=>e||"",isVisible:e=>Ds(e,"mashina_mesto"),title:"Машина-место"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sanuzel","sanuzel_kvartira","sanuzel_doma"),title:"Санузел"},{type:o.Text,columns:"3",outlined:!1,compute:({obshhaya_ploshhad:e,ploshhad_doma:t})=>[e,t].filter((e=>e)).flatMap((e=>e)).join(" "),isVisible:e=>Ds(e,"obshhaya_ploshhad","ploshhad_doma"),title:"Общая площадь М²"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"parkovka","parkovka_kvartira","parkovka_zemlya"),title:"Парковка"},{type:o.Text,columns:"3",outlined:!1,compute:({zhilaya_ploshhad:e})=>e||"",isVisible:e=>Ds(e,"zhilaya_ploshhad"),title:"Жилая площадь М²"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"mebel","mebel_kvartira","mebel_dom"),title:"Мебель"},{type:o.Text,columns:"3",outlined:!1,compute:({vysota_potolkov:e})=>e||"",isVisible:e=>Ds(e,"vysota_potolkov"),title:"Высота потолков"},{type:o.Text,columns:"3",outlined:!1,compute:({kolichestvo_spalen:e})=>e||"",isVisible:e=>Ds(e,"kolichestvo_spalen"),title:"Количество спален"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:"Система отопления"},{type:o.Text,columns:"3",outlined:!1,compute:({kod_domofona:e})=>e||"",isVisible:e=>Ds(e,"kod_domofona"),title:"Код домофона"},{type:o.Text,columns:"3",outlined:!1,compute:({spalnya_sanuzel:e})=>e||"",isVisible:e=>Ds(e,"spalnya_sanuzel"),title:"Комната + санузел"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"gaz","gaz_dom","gaz_zemlya"),title:"Газ"},{type:o.Text,columns:"3",outlined:!1,compute:({podezd_nomer:e})=>e||"",isVisible:e=>Ds(e,"podezd_nomer"),title:"Подъезд №"},{type:o.Text,columns:"3",outlined:!1,compute:({rasstoyanie_do_metro:e})=>e||"",isVisible:e=>Ds(e,"rasstoyanie_do_metro"),title:"Расстояние до метро (м)"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({vid_iz_okna:e,vid_iz_okna_dom:t})=>[...e||[],...t||[]].reduce(((e,t)=>e.includes(t)?e:[...e,t]),[]).filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"vid_iz_okna","vid_iz_okna_dom"),title:"Вид из окна"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:"Система кондиционирования"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({raspolozhenie_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"raspolozhenie_obekta"),title:"Расположение объекта"}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&Ee(e.podkategoriya_obekta,"Дома"),t=t&&U(W(Ee(e.kategoriya_obekta,"Коммерческая"),Ee(e.kategoriya_obekta,"Жилая")),W(Ee(e.kategoriya_obekta,"Коммерческая"),!Ee(e.kategoriya_obekta,"Жилая"))),t},fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческий + Жилой дом)"})},{type:o.Text,columns:"3",outlined:!1,compute:({kolichestvo_komnat:e})=>e||"",isVisible:e=>Ds(e,"kolichestvo_komnat"),title:"Количество комнат"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({sostoyanie_doma:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sostoyanie_doma"),title:"Состояние дома"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya"),title:"Местоположение объекта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:"Назначение объекта"},{type:o.Text,columns:"3",outlined:!1,compute:({etazhnost:e})=>e||"",isVisible:e=>Ds(e,"etazhnost"),title:"Этажность"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({raspolozhenie_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"raspolozhenie_obekta"),title:"Расположение объекта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma"),title:"Тип строения"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_doma:e})=>e||"",isVisible:e=>Ds(e,"ploshhad_doma"),title:"Площадь дома М²"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({raspolozhenie_doma:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"raspolozhenie_doma"),title:"Расположение дома"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({tip_planirovki:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"tip_planirovki"),title:"Тип планировки"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({bassejn:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"bassejn"),title:"Бассейн"},{type:o.Text,columns:"3",outlined:!1,compute:({kolichestvo_sotok:e})=>e||"",isVisible:e=>Ds(e,"kolichestvo_sotok"),title:"Количество соток"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sanuzel","sanuzel_kvartira","sanuzel_doma"),title:"Санузел"},{type:o.Text,columns:"3",outlined:!1,compute:({mashina_mesto:e})=>e||"",isVisible:e=>Ds(e,"mashina_mesto"),title:"Машина-место"},{type:o.Text,columns:"3",outlined:!1,compute:({kolichestvo_spalen:e})=>e||"",isVisible:e=>Ds(e,"kolichestvo_spalen"),title:"Количество спален"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.voda,e.voda_dom,e.voda_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"voda","voda_dom","voda_zemlya"),title:"Вода"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"lift_kommercziya","lift_kvartira","lift_dom"),title:"Лифт"},{type:o.Text,columns:"3",outlined:!1,compute:({spalnya_sanuzel:e})=>e||"",isVisible:e=>Ds(e,"spalnya_sanuzel"),title:"Комната + санузел"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:"Система отопления"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"mebel","mebel_kvartira","mebel_dom"),title:"Мебель"},{type:o.Text,columns:"3",outlined:!1,compute:({rasstoyanie_do_metro:e})=>e||"",isVisible:e=>Ds(e,"rasstoyanie_do_metro"),title:"Расстояние до метро (м)"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"gaz","gaz_dom","gaz_zemlya"),title:"Газ"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:"Система кондиционирования"},{type:o.Text,columns:"3",outlined:!1,compute:({vysota_potolkov:e})=>e||"",isVisible:e=>Ds(e,"vysota_potolkov"),title:"Высота потолков"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya"),title:"Электричество"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({vid_iz_okna:e,vid_iz_okna_dom:t})=>[...e||[],...t||[]].reduce(((e,t)=>e.includes(t)?e:[...e,t]),[]).filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"vid_iz_okna","vid_iz_okna_dom"),title:"Вид из окна"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({garazh:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"garazh"),title:"Гараж"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya"),title:"Канализация"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"balkon","balkon_kvartira","balkon_doma"),title:"Балкон"},{type:o.Text,columns:"3",outlined:!1,compute:({god_postrojki:e})=>e||"",isVisible:e=>Ds(e,"god_postrojki"),title:"Год постройки"}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&Ee(e.podkategoriya_obekta,"Земля/Участок"),t=t&&U(W(Ee(e.kategoriya_obekta,"Коммерческая"),Ee(e.kategoriya_obekta,"Жилая")),W(Ee(e.kategoriya_obekta,"Коммерческая"),!Ee(e.kategoriya_obekta,"Жилая"))),t},fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая + Жилая земля/участок)"})},{type:o.Text,columns:"3",outlined:!1,compute:({kolichestvo_komnat:e})=>e||"",isVisible:e=>Ds(e,"kolichestvo_komnat"),title:"Количество комнат"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:"Назначение объекта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({tip_zemli_uchastka:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"tip_zemli_uchastka"),title:"Тип земли/участка"},{type:o.Text,columns:"3",outlined:!1,compute:({poleznaya_ploshhad:e})=>e||"",isVisible:e=>Ds(e,"poleznaya_ploshhad"),title:"Полезная площадь М²"},{type:o.Text,columns:"3",outlined:!1,compute:({etazh:e})=>e||"",isVisible:e=>Ds(e,"etazh"),title:"Этаж"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_obekta,e["sostoyanie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sostoyanie_obekta","sostoyanie-obekta_zemlya"),title:"Состояние объекта"},{type:o.Text,columns:"3",outlined:!1,compute:({mashina_mesto:e})=>e||"",isVisible:e=>Ds(e,"mashina_mesto"),title:"Машина-место"},{type:o.Text,columns:"3",outlined:!1,compute:({kolichestvo_sotok:e})=>e||"",isVisible:e=>Ds(e,"kolichestvo_sotok"),title:"Количество соток"},{type:o.Text,columns:"3",outlined:!1,compute:({etazhnost:e})=>e||"",isVisible:e=>Ds(e,"etazhnost"),title:"Этажность"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"parkovka","parkovka_kvartira","parkovka_zemlya"),title:"Парковка"},{type:o.Text,columns:"3",outlined:!1,compute:({rasstoyanie_do_metro:e})=>e||"",isVisible:e=>Ds(e,"rasstoyanie_do_metro"),title:"Расстояние до метро (м)"},{type:o.Text,columns:"3",outlined:!1,compute:({obshhaya_ploshhad:e,ploshhad_doma:t})=>[e,t].filter((e=>e)).flatMap((e=>e)).join(" "),isVisible:e=>Ds(e,"obshhaya_ploshhad","ploshhad_doma"),title:"Общая площадь М²"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.voda,e.voda_dom,e.voda_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"voda","voda_dom","voda_zemlya"),title:"Вода"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya"),title:"Местоположение объекта"},{type:o.Text,columns:"3",outlined:!1,compute:({rasstoyanie_do_goroda:e})=>e||"",isVisible:e=>Ds(e,"rasstoyanie_do_goroda"),title:"Расстояние до города (м)"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:"Система отопления"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({podezdnye_puti:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"podezdnye_puti"),title:"Подъездные пути"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:"Система кондиционирования"},{type:o.Text,columns:"3",outlined:!1,compute:({god_postrojki:e})=>e||"",isVisible:e=>Ds(e,"god_postrojki"),title:"Год постройки"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya"),title:"Электричество"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"gaz","gaz_dom","gaz_zemlya"),title:"Газ"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>Ds(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya"),title:"Канализация"}]}]},{type:o.Paper,isVisible:e=>Ds(e,"vnutri_est","ryadom_est"),fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте"})},{type:o.Component,fieldBottomMargin:"1",columns:"6",element:()=>he(Ne,{children:"Внутри есть:"})},{type:o.Component,fieldBottomMargin:"1",columns:"6",element:()=>he(Ne,{children:"Рядом есть:"})},{type:o.Component,columns:"6",isVisible:({vnutri_est:e})=>!!(null==e?void 0:e.length),element:({vnutri_est:e})=>he("div",{children:he(Te,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",gap:1},children:null==e?void 0:e.map(((e,t)=>he(Ut,{label:e},t)))})})},{type:o.Component,columns:"6",isVisible:({ryadom_est:e})=>!!(null==e?void 0:e.length),element:({ryadom_est:e})=>he("div",{children:he(Te,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",gap:1},children:null==e?void 0:e.map(((e,t)=>he(Ut,{label:e},t)))})})}]},{type:o.Paper,isVisible:e=>Ds(e,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany","ploshhad_gostevogo_doma","ploshhad_dopolnitelnoj_pristrojki"),fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,sx:{mb:2},element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади"})},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая","Жилая"),t=t&&Ee(e.podkategoriya_obekta,"Квартиры"),t},fields:[{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_gostinnoj:e})=>e||"",isVisible:e=>Ds(e,"ploshhad_gostinnoj"),title:"Площадь гостинной М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_spalni:e})=>e||"",isVisible:e=>Ds(e,"ploshhad_spalni"),title:"Площадь комнаты М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_holla:e})=>e||"",isVisible:e=>Ds(e,"ploshhad_holla"),title:"Площадь холла М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_kuhni:e})=>e||"",isVisible:e=>Ds(e,"ploshhad_kuhni"),title:"Площадь кухни М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_sanuzla:e})=>e||"",isVisible:e=>Ds(e,"ploshhad_sanuzla"),title:"Площадь санузла М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_balkona:e})=>e||"",isVisible:e=>Ds(e,"ploshhad_balkona"),title:"Площадь балкона М²"}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая","Жилая"),t=t&&Ee(e.podkategoriya_obekta,"Дома"),t},fields:[{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_gostinnoj:e})=>e||"",isVisible:e=>Ds(e,"ploshhad_gostinnoj"),title:"Площадь гостинной М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_spalni:e})=>e||"",isVisible:e=>Ds(e,"ploshhad_spalni"),title:"Площадь комнаты М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_holla:e})=>e||"",isVisible:e=>Ds(e,"ploshhad_holla"),title:"Площадь холла М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_kuhni:e})=>e||"",isVisible:e=>Ds(e,"ploshhad_kuhni"),title:"Площадь кухни М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_sanuzla:e})=>e||"",isVisible:e=>Ds(e,"ploshhad_sanuzla"),title:"Площадь санузла М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_balkona:e})=>e||"",isVisible:e=>Ds(e,"ploshhad_balkona"),title:"Площадь балкона М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_terrasy:e})=>e||"",isVisible:e=>Ds(e,"ploshhad_terrasy"),title:"Площадь террасы М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_komnaty_ohrany:e})=>e||"",isVisible:e=>Ds(e,"ploshhad_komnaty_ohrany"),title:"Площадь комнаты охраны М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_gostevogo_doma:e})=>e||"",isVisible:e=>Ds(e,"ploshhad_gostevogo_doma"),title:"Площадь гостевого дома М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_dopolnitelnoj_pristrojki:e})=>e||"",isVisible:e=>Ds(e,"ploshhad_dopolnitelnoj_pristrojki"),title:"Площадь дополнительной пристройки М²"}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая","Жилая"),t=t&&Ee(e.podkategoriya_obekta,"Земля/Участок"),t},fields:[{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_gostinnoj:e})=>e||"",isVisible:e=>Ds(e,"ploshhad_gostinnoj"),title:"Площадь гостинной М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_spalni:e})=>e||"",isVisible:e=>Ds(e,"ploshhad_spalni"),title:"Площадь комнаты М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_holla:e})=>e||"",isVisible:e=>Ds(e,"ploshhad_holla"),title:"Площадь холла М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_kuhni:e})=>e||"",isVisible:e=>Ds(e,"ploshhad_kuhni"),title:"Площадь кухни М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_sanuzla:e})=>e||"",isVisible:e=>Ds(e,"ploshhad_sanuzla"),title:"Площадь санузла М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_balkona:e})=>e||"",isVisible:e=>Ds(e,"ploshhad_balkona"),title:"Площадь балкона М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_terrasy:e})=>e||"",isVisible:e=>Ds(e,"ploshhad_terrasy"),title:"Площадь террасы М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_komnaty_ohrany:e})=>e||"",isVisible:e=>Ds(e,"ploshhad_komnaty_ohrany"),title:"Площадь комнаты охраны М²"}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&!Ee(e.podkategoriya_obekta,"Квартиры"),t=t&&!Ee(e.podkategoriya_obekta,"Дома"),t=t&&!Ee(e.podkategoriya_obekta,"Земля/Участок"),t},fields:[{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_gostinnoj:e})=>e||"",isVisible:e=>Ds(e,"ploshhad_gostinnoj"),title:"Площадь гостинной М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_spalni:e})=>e||"",isVisible:e=>Ds(e,"ploshhad_spalni"),title:"Площадь комнаты М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_holla:e})=>e||"",isVisible:e=>Ds(e,"ploshhad_holla"),title:"Площадь холла М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_kuhni:e})=>e||"",isVisible:e=>Ds(e,"ploshhad_kuhni"),title:"Площадь кухни М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_sanuzla:e})=>e||"",isVisible:e=>Ds(e,"ploshhad_sanuzla"),title:"Площадь санузла М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_balkona:e})=>e||"",isVisible:e=>Ds(e,"ploshhad_balkona"),title:"Площадь балкона М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_terrasy:e})=>e||"",isVisible:e=>Ds(e,"ploshhad_terrasy"),title:"Площадь террасы М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_komnaty_ohrany:e})=>e||"",isVisible:e=>Ds(e,"ploshhad_komnaty_ohrany"),title:"Площадь комнаты охраны М²"}]}]},{type:o.Paper,isVisible:e=>(Ee(e.kategoriya_obekta,"Коммерческая","Жилая")&&Ee(e.podkategoriya_obekta,"Квартиры","Дома","Земля/Участок","Здания","Базы"),!1),fieldBottomMargin:"1",fieldRightMargin:"1",tabletHidden:!0,phoneHidden:!0,child:{type:o.Component,element:Kd}},{type:o.Paper,features:["hasDescriptionPermission"],fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,sx:{mb:2},element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Описание объекта"})},{type:o.Text,sx:{pointerEvents:"all"},inputRows:8,outlined:!1,name:"opisanie",title:"Описание"}]},{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>e.apartment_images&&e.apartment_images.length,fields:[{type:o.Component,sx:{mb:2},element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})},{type:o.Component,element:Dd}]},{type:o.Component,isVisible:(e,{hideAutofindFlag:t})=>!t,fieldBottomMargin:"1",fieldRightMargin:"1",element:({_fieldData:e,payload:t,features:i})=>he(vm,{payload:t,features:i,fieldData:e})}];window.apartment_card_fields=Nm;const Om=(e,t)=>e.some((e=>e.includes(t))),Um=e=>{var t;return(null==(t=Hm.find((({isActive:t})=>t(e.location.pathname))))?void 0:t.id)||"object"},Hm=[{id:"owner_contact",element:({history:e,payload:t,data:i})=>he($d,{history:e,payload:t,children:he(Je,{outlinePaper:!0,readonly:!0,fields:Sd,handler:()=>i,payload:()=>({...t,hideAutofindFlag:!0}),features:t.permissions})}),isActive:e=>Om(["/apartment/owner_contact"],e)},{id:"object",element:({history:e,payload:t,data:i})=>he($d,{history:e,payload:t,children:he(Je,{outlinePaper:!0,readonly:!0,fields:Nm,handler:()=>i,payload:()=>({...t,hideAutofindFlag:!0}),features:t.permissions})}),isActive:e=>(console.log(e),Om(["/apartment/object"],e))},{id:"documents",element:({history:e,payload:t,data:i})=>he($d,{history:e,payload:t,children:he(ai,{sx:{p:1,mt:1},children:he(Ii,{disabled:!0,accept:"*",multiple:!0,items:i,tr:async e=>await bs.appwriteService.tryReadFileName(e)||e,fallback:bs.errorService.handleGlobalError,onClick:async e=>{const t=await bs.appwriteService.getFileURL(e),i=await bs.appwriteService.readFileName(e);yt(t,i)},onUpload:e=>bs.appwriteService.uploadFile(e)})})}),isActive:e=>Om(["/apartment/documents"],e)},{id:"service_comment",element:({history:e,payload:t,params:{id:i}})=>{const[a,o]=ue.useState([]),{execute:l}=be((async()=>{const e=await bs.serviceCommentViewService.findAllByApartmentId(i);o(await Promise.all(e.map((async({$id:e,user_id:t,file_id:i,comment:a,$createdAt:o})=>{const l=await bs.userViewService.tryRead(t);if(!l)return null;const n=l.avatar?await bs.appwriteService.getImageURL(l.avatar):"",s=i?await bs.appwriteService.tryReadFileName(i):"";return{id:e,message:a,fileId:i,userId:t,displayName:[l.last_name,l.first_name,l.middle_name,r(o).format("DD.MM.YYYY / HH:mm")].join(" "),fileName:s,avatar:n}})).filter((e=>!!e)).reverse()))}),{fallback:bs.errorService.handleGlobalError,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)});ue.useEffect((()=>{l()}),[]),ue.useEffect((()=>bs.serviceCommentViewService.createSubject.subscribe((e=>{e.apartment_id===i&&l()}))),[]);return he($d,{history:e,payload:t,children:he(md,{payload:t,style:{height:"calc(100vh - 280px)"},messages:a,onText:async e=>{const t=bs.appwriteService.currentUser.$id;await bs.serviceCommentViewService.create({user_id:t,comment:e,apartment_id:i,bid_id:null,contact_id:null,file_id:null}),await l()},onFile:async(e,t)=>{const a=bs.appwriteService.currentUser.$id;await bs.serviceCommentViewService.create({user_id:a,comment:e,apartment_id:i,bid_id:null,contact_id:null,file_id:t}),await l()}})})},isActive:e=>Om(["/apartment/service_comment"],e)}],Wm="/apartment/object",$m=async e=>{const{contact_id:t}=await bs.apartmentViewService.read(e);return await bs.contactViewService.tryRead(t)},Gm=G(),Ym=({payload:e})=>{const{push:t,pop:i,clear:a}=Kt(),{pickData:o,render:l}=Xt({history:Gm,withActionButton:!0,animation:"none",title:"Предпросмотр",pathname:"/apartment/object",routes:Hm,BeforeTitle:({onClose:e})=>{const{total:t}=Kt();return he(Be,{sx:{mr:1,display:1===t?"none":"flex"},size:"small",onClick:e,children:he(Mi,{})})},AfterTitle:({id:e,onClose:t})=>he(Pe,{direction:"row",gap:1,children:[he(Be,{size:"small",onClick:()=>{const{pathname:t}=Gm.location,i={"/apartment/object":"/apartment_edit/".concat(e,"/object"),"/apartment/owner_contact":"/apartment_edit/".concat(e,"/owner_contact")};bs.routerService.push(i[t]||i[Wm]),a()},children:he(ji,{})}),he(Be,{size:"small",onClick:t,children:he(Ye,{})})]}),fetchState:async e=>[await $m(e),await bs.apartmentViewService.tryRead(e)],mapInitialData:(e,[t,i])=>({owner_contact:t,object:i,documents:i.apartment_files||[]}),mapPayload:()=>e,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),onSubmit:(e,t)=>{if(t){const{pathname:t}=Gm.location,i={"/apartment/object":"/apartment_view/".concat(e,"/object"),"/apartment/owner_contact":"/apartment_view/".concat(e,"/owner_contact"),"/apartment/documents":"/apartment_view/".concat(e,"/documents"),"/apartment/service_comment":"/apartment_view/".concat(e,"/service_comment")};bs.routerService.push(i[t]||i[Wm]),a()}return!0},onClose:()=>{i()},submitLabel:"Открыть"});return e=>{t({id:"apartment",render:l,onInit:()=>{Gm.push(Wm)},onMount:()=>{o(e)}})}},Km=()=>window.innerHeight-280,Xm=()=>window.innerHeight-280,Jm=(e,t)=>e.some((e=>e.includes(t))),Zm=e=>{var t;return(null==(t=Qm.find((({isActive:t})=>t(e.location.pathname))))?void 0:t.id)||"contact"},Qm=[{id:"apartments",element:({history:e,payload:t,params:{id:i}})=>{const{listProps:a}=Bi(e),o=Ym({payload:t}),{columns:l}=ti({columns:Nd,storageKey:"apartment_columns"}),n=ue.useMemo((()=>l.filter((({type:e})=>e!==tt.Action))),[l]);return he(_e,{children:he(Js,{payload:t,history:e,children:he(yi,{withInitialLoader:!0,withLoader:!0,columns:n,handler:async(e,...t)=>await bs.apartmentViewService.paginate({...e,contact_id:i},...t),onRowClick:e=>o(e.id),onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),heightRequest:Km,payload:t,...a})})})},isActive:e=>Jm(["/contact/apartments"],e)},{id:"bids",element:({history:e,payload:t,params:{id:i}})=>{const{listProps:a}=Bi(e),o=_m({payload:t}),{columns:l}=ti({columns:yc,storageKey:"bid_columns"}),n=ue.useMemo((()=>l.filter((({type:e})=>e!==tt.Action))),[l]);return he(_e,{children:he(Js,{history:e,payload:t,children:he(yi,{withInitialLoader:!0,withLoader:!0,columns:n,handler:async(e,...t)=>await bs.bidViewService.paginate({...e,contact_id:i},...t),onRowClick:e=>o(e.id),onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),heightRequest:Xm,payload:t,...a})})})},isActive:e=>Jm(["/contact/bids"],e)},{id:"contact",element:({history:e,payload:t,data:i})=>he(Js,{history:e,payload:t,children:he(Je,{outlinePaper:!0,readonly:!0,fields:Sd,handler:()=>i,payload:()=>({...t,hideAutofindFlag:!0}),features:t.permissions})}),isActive:e=>Jm(["/contact/contact"],e)},{id:"service_comment",element:({history:e,payload:t,params:{id:i}})=>{const[a,o]=ue.useState([]),{execute:l}=be((async()=>{const e=await bs.serviceCommentViewService.findAllByContactId(i);o(await Promise.all(e.map((async({$id:e,user_id:t,file_id:i,comment:a,$createdAt:o})=>{const l=await bs.userViewService.tryRead(t);if(!l)return null;const n=i?await bs.appwriteService.tryReadFileName(i):"";return{id:e,message:a,fileId:i,userId:t,displayName:[l.last_name,l.first_name,l.middle_name,r(o).format("DD.MM.YYYY / HH:mm")].join(" "),fileName:n,avatar:l.avatar||""}})).filter((e=>!!e)).reverse()))}),{fallback:bs.errorService.handleGlobalError,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)});ue.useEffect((()=>{l()}),[]),ue.useEffect((()=>bs.serviceCommentViewService.createSubject.subscribe((e=>{e.contact_id===i&&l()}))),[]);return he(Js,{history:e,payload:t,children:he(md,{payload:t,style:{height:"calc(100vh - 280px)"},messages:a,onText:async e=>{const t=bs.appwriteService.currentUser.$id;await bs.serviceCommentViewService.create({user_id:t,comment:e,apartment_id:null,bid_id:null,contact_id:i,file_id:null}),await l()},onFile:async(e,t)=>{const a=bs.appwriteService.currentUser.$id;await bs.serviceCommentViewService.create({user_id:a,comment:e,apartment_id:null,bid_id:null,contact_id:i,file_id:t}),await l()}})})},isActive:e=>Jm(["/contact/service_comment"],e)}],ep="/contact/contact",tp=G(),ip=({payload:e})=>{const t=Kt(),{push:i,pop:a,clear:o}=t,{pickData:l,render:n}=Xt({withActionButton:!0,animation:"none",title:"Предпросмотр",history:tp,routes:Qm,BeforeTitle:({onClose:e})=>{const{total:t}=Kt();return he(Be,{sx:{mr:1,display:1===t?"none":"flex"},size:"small",onClick:e,children:he(Mi,{})})},AfterTitle:({id:e,onClose:t})=>he(Pe,{direction:"row",gap:1,children:[he(Be,{size:"small",onClick:()=>{bs.routerService.push("/contact_edit/".concat(e)),o()},children:he(ji,{})}),he(Be,{size:"small",onClick:t,children:he(Ye,{})})]}),fetchState:async e=>[await bs.contactViewService.tryRead(e)],mapInitialData:(e,[t])=>({contact:t}),mapPayload:()=>e,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),onSubmit:(e,t)=>{if(t){const{pathname:t}=tp.location,i={"/contact/apartments":"/contact_view/".concat(e,"/apartments"),"/contact/bids":"/contact_view/".concat(e,"/bids"),"/contact/contact":"/contact_view/".concat(e,"/contact"),"/contact/service_comment":"/contact_view/".concat(e,"/service_comment")};bs.routerService.push(i[t]||i[ep]),o()}return!0},onClose:()=>{a()},submitLabel:"Открыть"});return e=>{i({id:"contact",render:n,onInit:()=>{tp.push(ep)},onMount:()=>{l(e)}})}},ap=[{type:o.Fragment,isVisible:({activeStep:e})=>0===e,fields:[{type:o.Component,element:()=>he(Ne,{variant:"h6",fontWeight:"bold",mb:2,children:"Данные контакта"})},{type:o.Text,outlined:!0,title:"Ф.И.О",isInvalid:({fio:e})=>e?null:"Обязательно к заполнению",description:"Фамилия Имя Отчество контакта",name:"fio"},{type:o.Text,outlined:!0,title:"Телефон",isInvalid:({telefon:e})=>e?null:"Обязательно к заполнению",description:"Телефон контакта",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon"},{type:o.Combo,outlined:!0,name:"tip_klienta",title:"Тип клиента",itemList:["Собственник","Доверенное лицо","Риелтор","Информатор","Застройщик"]}]},{type:o.Fragment,isVisible:({activeStep:e})=>2===e,fields:[{type:o.Component,element:()=>he(Ne,{variant:"h6",fontWeight:"bold",mb:1,children:"Предпросмотр"})},{type:o.Component,isVisible:({contact_id:e})=>!e,element:()=>he(Ri,{variant:"outlined",color:"warning",sx:{mb:2},children:"Создавая новый объект, убедитесь, что нет дубликата контакта"})},{type:o.Component,isVisible:({contact_id:e})=>!!e,element:()=>he(Ri,{variant:"outlined",color:"info",sx:{mb:2},children:"Убедитесь, что это контактные данные клиента"})},{type:o.Text,isVisible:({contact_id:e})=>!!e,compute:async({contact_id:e})=>{const{fio:t=""}=await bs.contactViewService.tryRead(e)||{};return t},disabled:!0,outlined:!0,title:"Ф.И.О"},{type:o.Text,isVisible:({contact_id:e})=>!!e,compute:async({contact_id:e})=>{const{telefon:t=""}=await bs.contactViewService.tryRead(e)||{};return t},disabled:!0,outlined:!0,title:"Телефон",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000"},{type:o.Text,fieldBottomMargin:"0",isVisible:({contact_id:e})=>!!e,compute:async({contact_id:e})=>{const{tip_klienta:t=null}=await bs.contactViewService.tryRead(e)||{};return ae(t)||"Не указано"},disabled:!0,outlined:!0,name:"tip_klienta",title:"Тип клиента"},{type:o.Text,isVisible:({contact_id:e})=>!e,outlined:!0,title:"Ф.И.О",isInvalid:({fio:e})=>e?null:"Обязательно к заполнению",description:"Фамилия Имя Отчество контакта",name:"fio"},{type:o.Text,isVisible:({contact_id:e})=>!e,outlined:!0,title:"Телефон",isInvalid:({telefon:e})=>e?null:"Обязательно к заполнению",description:"Телефон контакта",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon"},{type:o.Combo,isVisible:({contact_id:e})=>!e,outlined:!0,name:"tip_klienta",title:"Тип клиента",itemList:["Собственник","Доверенное лицо","Риелтор","Информатор","Застройщик"]}]}],op=[{type:He.Link,action:"list-action",label:"Список объектов"},{type:He.Link,action:"list-action",label:"Создание объекта"}],lp=Fs()((e=>({root:{position:"relative",overflow:"hidden"},header:{position:"absolute",top:0,left:0,height:65,paddingLeft:e.spacing(2),paddingRight:e.spacing(2),background:"whitesmoke",width:"100%"},content:{minHeight:300},adjust:{paddingBottom:65},listItemBackground:{background:ze(e.palette.primary.main,.05)}}))),np=Se.createLoader(12),rp=[{id:"owner_contact",label:"Контакт",isActive:()=>ws(["/apartment_edit/:id/owner_contact"])},{id:"object",label:"Объект",isActive:()=>ws(["/apartment_edit/:id","/apartment_edit/:id/object"])},{id:"tasks",isDisabled:()=>!0,label:"Задачи",isActive:()=>ws(["/apartment_edit/:id/tasks"])},{id:"advertising",isDisabled:()=>!0,label:"Реклама",isActive:()=>ws(["/apartment_edit/:id/advertising"])},{id:"service_comment",isDisabled:()=>!0,label:"Служебный комментарий",isActive:()=>ws(["/apartment_edit/:id/service_comment"])},{id:"history",isDisabled:()=>!0,label:"История",isActive:()=>ws(["/apartment_edit/:id/history"])},{id:"documents",label:"Документы",isActive:()=>ws(["/apartment_edit/:id/documents"])},{id:"commission_and_status",label:"Комиссия и статус",isDisabled:()=>!0,isActive:()=>ws(["/apartment_edit/:id/commission_and_status"])}],sp=(e,t)=>{if(t)return;const i=vs("id","create");"owner_contact"===e&&bs.routerService.replace("/apartment_edit/".concat(i,"/owner_contact")),"object"===e&&bs.routerService.replace("/apartment_edit/".concat(i,"/object")),"tasks"===e&&bs.routerService.replace("/apartment_edit/".concat(i,"/tasks")),"advertising"===e&&bs.routerService.replace("/apartment_edit/".concat(i,"/advertising")),"service_comment"===e&&bs.routerService.replace("/apartment_edit/".concat(i,"/service_comment")),"history"===e&&bs.routerService.replace("/apartment_edit/".concat(i,"/history")),"documents"===e&&bs.routerService.replace("/apartment_edit/".concat(i,"/documents")),"commission_and_status"===e&&bs.routerService.replace("/apartment_edit/".concat(i,"/commission_and_status"))},dp=({payload:e,children:t,mode:i=j.Paper})=>{const a=ue.useMemo((()=>"tabs"===i?j.Tabs:j.Paper),[i]);return he(fe,{withFixedPos:!0,fixedPosHeaderAdjust:i===j.Paper?85:64,mode:a,options:rp,payload:e,onActiveOptionChange:sp,children:t})},cp=[{type:He.Link,isVisible:()=>!!bs.routerService.previousPath,action:"list-action",label:he(De,{sx:{display:"block"}})},{type:He.Link,action:"list-action",label:"База объектов"},{type:He.Link,action:"list-action",isVisible:({id:e})=>"create"!==e,label:"Редактирование документа"},{type:He.Link,action:"list-action",isVisible:({id:e})=>"create"===e,label:"Создание документа"},{type:He.Button,isDisabled:({hasChanged:e})=>!e,action:"save-action",label:"Сохранить"}],mp=({data:e,onSubmit:t,onChange:i,fullScreen:a})=>{const{handleLoadStart:o,handleLoadEnd:l}=$e({history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)});return Gi({data:e,fullScreen:a,fallback:bs.errorService.handleGlobalError,onClick:async e=>{const t=await bs.appwriteService.getFileURL(e),i=await bs.appwriteService.readFileName(e);yt(t,i)},onUpload:e=>bs.appwriteService.uploadFile(e),onLoadStart:o,onLoadEnd:l,onSubmit:async e=>{t&&await t(e)},onChange:i,submitLabel:"Сохранить",tr:async e=>await bs.appwriteService.tryReadFileName(e)||e})},pp=[{type:He.Link,isVisible:()=>!!bs.routerService.previousPath,action:"list-action",label:he(De,{sx:{display:"block"}})},{type:He.Link,action:"list-action",label:"База объектов"},{type:He.Link,action:"list-action",label:"Просмотр документа"},{type:He.Button,isDisabled:({payload:{permissions:e}})=>!e.hasApartmentUpdatePermission,action:"edit-action",label:"Редактировать"}],up=ue.forwardRef((({item:e,loading:t,className:i,style:a},o)=>he("div",{className:i,style:a,ref:o,children:he(ai,{sx:{position:"relative",overflow:"hidden"},children:[he(bt,{children:[he(_t,{children:he(Le,{loading:t,payload:e,Loader:()=>he(fi,{variant:"circular",width:40,height:40}),children:async({user_id:e})=>{const t=await bs.userViewService.tryRead(e),i=(null==t?void 0:t.avatar)?await bs.appwriteService.getImageURL(t.avatar):void 0;return he(it,{alt:null==t?void 0:t.email,src:i,sx:{height:40,mr:2,width:40}})}})}),he(Le,{loading:t,payload:e,Loader:()=>he(Pe,{flex:1,children:[he(fi,{sx:{mb:1},variant:"rectangular",width:210,height:22}),he(fi,{variant:"rectangular",width:170,height:22})]}),children:async({user_id:e,type:t})=>{const i=await bs.userViewService.tryRead(e),a=[null==i?void 0:i.first_name,null==i?void 0:i.last_name,null==i?void 0:i.middle_name].filter((e=>e)).join(" ");return he(ft,{primary:a,secondary:"deal-begin"===t?"Создал сделку":"deal-end"===t?"Завершил сделку":"deal-reassign"===t?"Взял ответственность":"deal-status"===t?"Изменил статус":"Что-то сделал"})}}),he(Ne,{children:r(e.$createdAt).format("HH:mm DD/MM/YYYY")})]}),!!e.comment&&he(Te,{component:"pre",sx:{ml:1,mr:1,mb:1},children:he(kt,{config:rd,handler:()=>e.comment})}),he(Te,{sx:{position:"absolute",top:0,left:0,bottom:0,width:6,zIndex:1,background:"skyblue"}})]})}))),hp="real-estate__headerRoot",yp=[{type:He.Link,isVisible:()=>!!bs.routerService.previousPath,action:"list-action",label:he(De,{sx:{display:"block"}})},{type:He.Link,action:"list-action",label:"База объектов"},{type:He.Link,action:"list-action",label:"Просмотр истории"}],bp=Se.createLoader(12),_p=()=>he(Te,{sx:{mb:1,minHeight:32},children:he(_i,{sx:{height:"100%"},hideOverflowY:!0,children:he(Te,{sx:{display:"flex",alignItems:"center",justifyContent:"stretch",gap:1},children:[he(Ne,{variant:"subtitle2",children:"Объекты:"}),he(Le,{payload:null,Loader:bp,children:async()=>{const e=await bs.apartmentRequestService.getAllApartmentCount(),t=await bs.apartmentRequestService.getRentApartmentCount(),i=await bs.apartmentRequestService.getSellApartmentCount(),a=await bs.apartmentRequestService.getArchiveApartmentCount(),o=await bs.apartmentRequestService.getNewApartmentCount();return he(Pe,{direction:"row",gap:1,sx:{pointerEvents:"none"},children:[he(Te,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[he(Ki,{orientation:"vertical"}),he(gi,{href:"#",children:["Всего ",e]}),he(Ki,{orientation:"vertical"})]}),he(Te,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[he(Ki,{orientation:"vertical"}),he(gi,{href:"#",children:["Аренда ",t]}),he(Ki,{orientation:"vertical"})]}),he(Te,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[he(Ki,{orientation:"vertical"}),he(gi,{href:"#",children:["Продажа ",i]}),he(Ki,{orientation:"vertical"})]}),he(Te,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[he(Ki,{orientation:"vertical"}),he(gi,{href:"#",children:["Архив ",a]}),he(Ki,{orientation:"vertical"})]}),he(Te,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[he(Ki,{orientation:"vertical"}),he(gi,{href:"#",children:["Новые ",o]}),he(Ki,{orientation:"vertical"})]})]})}}),he(Ne,{variant:"subtitle2",children:"Сделки:"}),he(Le,{Loader:bp,children:async()=>{const e=await bs.apartmentRequestService.getMyDealCount(),t=await bs.apartmentRequestService.getTotalDealCount(),i=await bs.apartmentRequestService.getNewDealCount(),a=await bs.apartmentRequestService.getArchiveDealCount();return he(Pe,{direction:"row",gap:1,sx:{pointerEvents:"none"},children:[he(Te,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[he(Ki,{orientation:"vertical"}),he(gi,{href:"#",children:["Всего ",t]}),he(Ki,{orientation:"vertical"})]}),he(Te,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[he(Ki,{orientation:"vertical"}),he(gi,{href:"#",children:["Мои ",e]}),he(Ki,{orientation:"vertical"})]}),he(Te,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[he(Ki,{orientation:"vertical"}),he(gi,{href:"#",children:["Новые ",i]}),he(Ki,{orientation:"vertical"})]}),he(Te,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[he(Ki,{orientation:"vertical"}),he(gi,{href:"#",children:["Архив ",a]}),he(Ki,{orientation:"vertical"})]})]})}})]})})}),vp=()=>window.innerHeight-100,fp=()=>window.innerHeight-100,gp=()=>window.innerHeight-100,kp=()=>window.innerHeight-100,wp=()=>window.innerHeight-100,Sp=[{id:"common",element:({payload:e})=>{const t=Ym({payload:e}),i=Ve(bs.apartmentViewService.reloadSubject),{render:a,pickColumns:o,columns:l}=ti({columns:Nd,storageKey:"apartment_columns"}),{listProps:n}=Xi(bs.routerService.locationState,{fallback:bs.errorService.handleGlobalError}),r=Ec();return he(_e,{children:[he(yi,{withSearch:!0,withSingleSort:!0,noInitialFilters:!0,fetchDebounce:el,reloadSubject:i,title:"Объект недвижимости",filterLabel:"Фильтры",heightRequest:fp,rowActions:Ud,actions:zd,filters:rc,columns:l,handler:r,chips:Od,AfterActionList:_p,AfterOperationList:Yc,onRowAction:async(e,t)=>{bs.layoutService.setAppbarLoader(!0);try{if("remove-action"===e&&(await bs.apartmentViewService.remove(t.id),i.next()),"edit-action"===e&&bs.routerService.push("/apartment_edit/".concat(t.id)),"copy-action"===e){const e=await bs.apartmentViewService.read(t.id);await bs.apartmentViewService.create(e),i.next()}"toggle-archive"===e&&(await bs.apartmentViewService.toggleArchive(t.id),i.next()),"toggle-remove"===e&&(await bs.apartmentViewService.toggleRemove(t.id),i.next())}finally{bs.layoutService.setAppbarLoader(!1)}},onRowClick:async e=>{(await bs.permissionService.getPermissions()).hasApartmentViewPermission&&(async e=>{await bs.featureService.hasFeature("officemanager")?t(e):bs.routerService.push("/apartment_view/".concat(e))})(e.id)},onAction:async t=>{"add-action"===t&&bs.routerService.push("/apartment/create"),"column-setup-action"===t&&o(),"excel-action"===t&&await uc({query:n,handler:r,payload:e,columns:l})},selectionMode:lt.Multiple,payload:e,...n}),a()]})},isActive:e=>ws(["/apartment"],e),isAvailable:()=>!1},{id:"rent",element:({payload:e})=>{const t=Ym({payload:e}),i=Ve(bs.apartmentViewService.reloadSubject),{render:a,columns:o,pickColumns:l}=ti({columns:Nd,storageKey:"apartment_columns"}),{listProps:n}=Xi(bs.routerService.locationState,{fallback:bs.errorService.handleGlobalError}),r=Ec();return he(_e,{children:[he(yi,{withSearch:!0,withSingleSort:!0,noInitialFilters:!0,fetchDebounce:el,reloadSubject:i,title:"Объект недвижимости",filterLabel:"Фильтры",heightRequest:gp,rowActions:Ud,actions:zd,filters:rc,columns:o,handler:r,chips:Od,AfterActionList:_p,AfterOperationList:Yc,onRowAction:async(e,t)=>{bs.layoutService.setAppbarLoader(!0);try{if("remove-action"===e&&(await bs.apartmentViewService.remove(t.id),i.next()),"edit-action"===e&&bs.routerService.push("/apartment_edit/".concat(t.id)),"copy-action"===e){const e=await bs.apartmentViewService.read(t.id);await bs.apartmentViewService.create(e),i.next()}"toggle-archive"===e&&(await bs.apartmentViewService.toggleArchive(t.id),i.next()),"toggle-remove"===e&&(await bs.apartmentViewService.toggleRemove(t.id),i.next())}finally{bs.layoutService.setAppbarLoader(!1)}},onRowClick:async e=>{(await bs.permissionService.getPermissions()).hasApartmentViewPermission&&(async e=>{await bs.featureService.hasFeature("officemanager")?t(e):bs.routerService.push("/apartment_view/".concat(e))})(e.id)},onAction:async t=>{"add-action"===t&&bs.routerService.push("/apartment/create"),"column-setup-action"===t&&l(),"excel-action"===t&&await uc({query:n,payload:{...e,_rent:!0},handler:r,columns:o})},selectionMode:lt.Multiple,payload:()=>({...e,_rent:!0}),...n}),a()]})},isActive:e=>ws(["/apartment_rent"],e),isAvailable:()=>!1},{id:"sell",element:({payload:e})=>{const t=Ym({payload:e}),i=Ve(bs.apartmentViewService.reloadSubject),{render:a,pickColumns:o,columns:l}=ti({columns:Nd,storageKey:"apartment_columns"}),{listProps:n}=Xi(bs.routerService.locationState,{fallback:bs.errorService.handleGlobalError}),r=Ec();return he(_e,{children:[he(yi,{withSearch:!0,withSingleSort:!0,noInitialFilters:!0,fetchDebounce:el,reloadSubject:i,title:"Объект недвижимости",filterLabel:"Фильтры",heightRequest:kp,rowActions:Ud,actions:zd,filters:rc,columns:l,handler:r,chips:Od,AfterActionList:_p,AfterOperationList:Yc,onRowAction:async(e,t)=>{bs.layoutService.setAppbarLoader(!0);try{if("remove-action"===e&&(await bs.apartmentViewService.remove(t.id),i.next()),"edit-action"===e&&bs.routerService.push("/apartment_edit/".concat(t.id)),"copy-action"===e){const e=await bs.apartmentViewService.read(t.id);await bs.apartmentViewService.create(e),i.next()}"toggle-archive"===e&&(await bs.apartmentViewService.toggleArchive(t.id),i.next()),"toggle-remove"===e&&(await bs.apartmentViewService.toggleRemove(t.id),i.next())}finally{bs.layoutService.setAppbarLoader(!1)}},onRowClick:async e=>{(await bs.permissionService.getPermissions()).hasApartmentViewPermission&&(async e=>{await bs.featureService.hasFeature("officemanager")?t(e):bs.routerService.push("/apartment_view/".concat(e))})(e.id)},onAction:async t=>{"add-action"===t&&bs.routerService.push("/apartment/create"),"column-setup-action"===t&&o(),"excel-action"===t&&await uc({query:n,payload:{...e,_sell:!0},handler:r,columns:l})},selectionMode:lt.Multiple,payload:()=>({...e,_sell:!0}),...n}),a()]})},isActive:e=>ws(["/apartment_sell"],e),isAvailable:()=>!1},{id:"archive",element:({payload:e})=>{const t=Ym({payload:e}),i=Ve(bs.apartmentViewService.reloadSubject),{render:a,pickColumns:o,columns:l}=ti({columns:Nd,storageKey:"apartment_columns"}),{listProps:n}=Xi(bs.routerService.locationState,{fallback:bs.errorService.handleGlobalError}),r=Ec();return he(_e,{children:[he(yi,{withSearch:!0,withSingleSort:!0,noInitialFilters:!0,fetchDebounce:el,reloadSubject:i,title:"Неактивные объекты",filterLabel:"Фильтры",heightRequest:vp,rowActions:Ud,actions:zd,filters:rc,columns:l,handler:r,chips:Od,onRowAction:async(e,t)=>{bs.layoutService.setAppbarLoader(!0);try{if("remove-action"===e&&(await bs.apartmentViewService.remove(t.id),i.next()),"edit-action"===e&&bs.routerService.push("/apartment_edit/".concat(t.id)),"copy-action"===e){const e=await bs.apartmentViewService.read(t.id);await bs.apartmentViewService.create(e),i.next()}"toggle-archive"===e&&(await bs.apartmentViewService.toggleArchive(t.id),i.next()),"toggle-remove"===e&&(await bs.apartmentViewService.toggleRemove(t.id),i.next())}finally{bs.layoutService.setAppbarLoader(!1)}},onRowClick:async e=>{(await bs.permissionService.getPermissions()).hasApartmentViewPermission&&(async e=>{await bs.featureService.hasFeature("officemanager")?t(e):bs.routerService.push("/apartment_view/".concat(e))})(e.id)},onAction:async t=>{"add-action"===t&&bs.routerService.push("/apartment/create"),"column-setup-action"===t&&o(),"excel-action"===t&&await uc({query:n,payload:{...e,_archive:!0},handler:r,columns:l})},AfterActionList:_p,AfterOperationList:Yc,selectionMode:lt.Multiple,payload:()=>({...e,_archive:!0}),...n}),a()]})},isActive:e=>ws(["/apartment_archive"],e),isAvailable:()=>!1},{id:"remove",element:({payload:e})=>{const t=Ym({payload:e}),i=Ve(bs.apartmentViewService.reloadSubject),{render:a,pickColumns:o,columns:l}=ti({columns:Nd,storageKey:"apartment_columns"}),{listProps:n}=Xi(bs.routerService.locationState,{fallback:bs.errorService.handleGlobalError}),r=Ec();return he(_e,{children:[he(yi,{withSearch:!0,withSingleSort:!0,noInitialFilters:!0,fetchDebounce:el,reloadSubject:i,title:"Удаленные объекты",filterLabel:"Фильтры",heightRequest:wp,rowActions:Ud,actions:zd,filters:rc,columns:l,handler:r,chips:Od,onRowAction:async(e,t)=>{bs.layoutService.setAppbarLoader(!0);try{if("remove-action"===e&&(await bs.apartmentViewService.remove(t.id),i.next()),"edit-action"===e&&bs.routerService.push("/apartment_edit/".concat(t.id)),"copy-action"===e){const e=await bs.apartmentViewService.read(t.id);await bs.apartmentViewService.create(e),i.next()}"toggle-archive"===e&&(await bs.apartmentViewService.toggleArchive(t.id),i.next()),"toggle-remove"===e&&(await bs.apartmentViewService.toggleRemove(t.id),i.next())}finally{bs.layoutService.setAppbarLoader(!1)}},onRowClick:async e=>{(await bs.permissionService.getPermissions()).hasApartmentViewPermission&&(async e=>{await bs.featureService.hasFeature("officemanager")?t(e):bs.routerService.push("/apartment_view/".concat(e))})(e.id)},onAction:async t=>{"add-action"===t&&bs.routerService.push("/apartment/create"),"column-setup-action"===t&&o(),"excel-action"===t&&await uc({query:n,payload:{...e,_remove:!0},handler:r,columns:l})},AfterActionList:_p,AfterOperationList:Yc,selectionMode:lt.Multiple,payload:()=>({...e,_remove:!0}),...n}),a()]})},isActive:e=>ws(["/apartment_remove"],e),isAvailable:()=>!1}],zp=({images:e,onChange:t})=>{const{handleLoadStart:i,handleLoadEnd:a,loading:o}=$e({history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)});return he(ut,{children:he(pt,{disabled:o,sx:{borderRadius:"20px"},startIcon:he(Zi,{}),variant:"contained",onClick:async()=>{let o=!0;i();try{const i=await ct("*");if(!i)return;const a=Ft(e)||[],o=await Promise.all(i.map((async e=>bs.appwriteService.uploadFile(e)))),l=[...a,...o];t(l)}catch(l){o=!1,bs.alertService.notify(jr(l))}finally{a(o)}},children:"Добавить фото"})})},Vp=({payload:e,context:t})=>he(Pe,{direction:"column",children:[he(pt,{disabled:!t.hasChanged,variant:"contained",color:"info",sx:{height:48},onClick:e.beginSave,children:"Сохранить"}),he(Te,{sx:{paddingTop:"24px"}})]}),xp=Fs()((e=>({root:{position:"absolute",padding:20,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"stretch",transform:"translate(-50%, -50%)",backgroundColor:e.palette.background.paper,borderRadius:5,gap:5},small:{top:"40%",left:"50%",maxHeight:"80%",width:500},large:{top:"50%",left:"50%",width:"calc(100vw - 60px)",height:"calc(100vh - 60px)"},content:{position:"relative",flex:1,overflowY:"auto",paddingTop:e.spacing(1),display:"flex",alignItems:"stretch",justifyContent:"stretch","& > *":{flex:1}},title:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:15,color:e.palette.text.primary},submit:{marginTop:15},disabled:{opacity:.5,pointerEvents:"none"}}))),Ap=({onChange:e})=>{const[t,i]=ue.useState(bs.ymapsService.readyStateSubject.data),[a,o]=ue.useState((()=>({address:"",open:!1})));ue.useEffect((()=>bs.ymapsService.readyStateSubject.subscribe((e=>{i(e)}))),[]);const[l,n]=ue.useState(null),r=ue.useRef(null),{handleLoadStart:s,handleLoadEnd:d}=$e({history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)}),{address:c,open:m}=a,p=()=>{r.current=null,y.current&&y.current(),o({address:"",open:!1})},u=async()=>{const{current:t}=r;try{if(t){const i=await bs.ymapsService.getAddress(t);e(i)}}finally{p()}},{classes:h}=xp(),y=ue.useRef(null);ue.useEffect((()=>{if(l)return bs.ymapsService.drawMap(l,{address:c,change:e=>r.current=e})}),[l]);return{render:()=>he(qe,{open:m,onClose:p,children:he(Te,{className:Ce(h.root,{[h.large]:!0}),children:[he("div",{className:h.title,children:he(Ne,{variant:"h6",component:"h2",children:"Выберите точку"})}),he(Te,{className:h.content,children:[he("div",{ref:n}),!t&&he(Se,{size:24,sx:{position:"absolute",top:0,left:0,right:0,bottom:0}})]}),he(pt,{onClick:u,onLoadStart:s,onLoadEnd:d,variant:"contained",children:"Применить"})]})}),pickMap:(e="")=>o({address:e,open:!0})}},Tp=({gorod:e,mahallya:t,nomer_doma:i,rajon:a,strana:o,ulicza:l,metro:n,onChange:r})=>{const{render:s,pickMap:d}=Ap({onChange:r}),c=ue.useMemo((()=>[o||null,e?"Город ".concat(e):null,a?"".concat(a):null,t?" ".concat(t):l?" ".concat(l):null,i?"".concat(i):null,n?"Метро ".concat(n):null].filter((e=>e)).join(", ")),[e,t,i,a,o,l,n]);return he(_e,{children:[he(Ht,{onClick:()=>{"action-modal"==="action-modal"&&d(c)},fullWidth:!0,variant:"contained",children:"Найти на карте"}),s()]})},Cp=[{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany"),isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&!Ee(e.podkategoriya_obekta,"Квартиры"),t=t&&!Ee(e.podkategoriya_obekta,"Дома"),t=t&&!Ee(e.podkategoriya_obekta,"Земля/Участок"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая недвижимость)"})},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_gostinnoj"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_spalni"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_holla"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_kuhni"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_sanuzla"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_balkona"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_terrasy"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_komnaty_ohrany"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"}]}]},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany"),isVisible:e=>!Ee(e.kategoriya_obekta,"Коммерческая")&&Ee(e.podkategoriya_obekta,"Земля/Участок"),fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Земля/Участок)"})},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_gostinnoj"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_spalni"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_holla"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_kuhni"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_sanuzla"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_balkona"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_terrasy"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_komnaty_ohrany"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"}]}]},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona"),isVisible:e=>{let t=!0;return t=t&&!Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Квартиры"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Квартиры)"})},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_gostinnoj"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_spalni"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_holla"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_kuhni"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_sanuzla"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_balkona"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}]}]},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany","ploshhad_gostevogo_doma","ploshhad_dopolnitelnoj_pristrojki"),isVisible:e=>{let t=!0;return t=t&&!Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Дома"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Дома)"})},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_gostinnoj"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_spalni"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_holla"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_kuhni"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_sanuzla"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_balkona"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_terrasy"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_komnaty_ohrany"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_gostevogo_doma"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostevogo_doma",title:"Площадь гостевого дома М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_dopolnitelnoj_pristrojki"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_dopolnitelnoj_pristrojki",title:"Площадь дополнительной пристройки М²"}]}]},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona"),isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Квартиры"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая + Жилая квартира)"})},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_gostinnoj"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_spalni"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_holla"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_kuhni"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_sanuzla"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_balkona"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}]}]},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany","ploshhad_gostevogo_doma","ploshhad_dopolnitelnoj_pristrojki"),isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Дома"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческий + Жилой дом)"})},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_gostinnoj"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_spalni"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_holla"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_kuhni"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_sanuzla"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_balkona"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_terrasy"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_komnaty_ohrany"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_gostevogo_doma"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostevogo_doma",title:"Площадь гостевого дома М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_dopolnitelnoj_pristrojki"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_dopolnitelnoj_pristrojki",title:"Площадь дополнительной пристройки М²"}]}]},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany"),isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Земля/Участок"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая + Жилая земля/участок)"})},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_gostinnoj"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_spalni"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_holla"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_kuhni"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_sanuzla"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_balkona"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_terrasy"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_komnaty_ohrany"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"}]}]}],Fp=[{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"vnutri_est","ryadom_est"),isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&!Ee(e.podkategoriya_obekta,"Квартиры"),t=t&&!Ee(e.podkategoriya_obekta,"Дома"),t=t&&!Ee(e.podkategoriya_obekta,"Земля/Участок"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая недвижимость)"})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vnutri_est"),columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Телевизор","Кондиционер","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("ryadom_est"),columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Охрана","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"vnutri_est","ryadom_est"),isVisible:e=>{let t=!1;return t=t||Ee(e.podkategoriya_obekta,"Земля/Участок"),t=t&&!Ee(e.kategoriya_obekta,"Коммерческая"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Земля/Участок)"})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vnutri_est"),columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Забор","Катлаван","Пожарная сигнализация","Видеонаблюдение","Сигнализация","Разгрузочный пандус"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("ryadom_est"),columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Охрана","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"vnutri_est","ryadom_est"),isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Дома"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческий + Жилой дом)"})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vnutri_est"),columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Телевизор","Кондиционер","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг","Полисадник"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("ryadom_est"),columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Охрана","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}}],Lp=[{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"kolichestvo_komnat","naznachenie_obekta","sostoyanie_obekta","poleznaya_ploshhad","etazh","sostoyanie_remonta","mashina_mesto","kolichestvo_sotok","etazhnost","tip_stroeniya","parkovka","sanuzel","obshhaya_ploshhad","balkon","voda","kanalizacziya","lift_kommercziya","sistema_otopleniya","gaz","mebel","rasstoyanie_do_metro","elektrichestvo","god_postrojki","vysota_potolkov","mestopolozhenie_obekta","sistema_kondiczionirovaniya"),isVisible:e=>(!Ee(e.podkategoriya_obekta,"Земля/Участок")||!Ee(e.kategoriya_obekta,"Коммерческая"))&&((!Ee(e.podkategoriya_obekta,"Дома")||!Ee(e.kategoriya_obekta,"Коммерческая"))&&((!Ee(e.podkategoriya_obekta,"Квартиры")||!Ee(e.kategoriya_obekta,"Коммерческая"))&&Ee(e.kategoriya_obekta,"Коммерческая"))),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая недвижимость)"})},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kolichestvo_komnat"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Component,hidden:e=>!e.fieldVisibility.has("naznachenie_obekta"),sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>he(Oe,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("sostoyanie_obekta"),columns:"3",outlined:!1,name:"sostoyanie_obekta",title:"Состояние объекта",itemList:["Новой постройки","Недостроенный","Под снос","Коробка"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("poleznaya_ploshhad"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("etazh"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("sostoyanie_remonta"),columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("mashina_mesto"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kolichestvo_sotok"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("etazhnost"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("tip_stroeniya"),columns:"3",outlined:!1,name:"tip_stroeniya",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("parkovka"),columns:"3",outlined:!1,name:"parkovka",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sanuzel"),columns:"3",outlined:!1,name:"sanuzel",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("obshhaya_ploshhad"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("balkon"),columns:"3",outlined:!1,name:"balkon",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("voda"),columns:"3",outlined:!1,name:"voda",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("kanalizacziya"),columns:"3",outlined:!1,name:"kanalizacziya",title:"Канализация",itemList:["Да","Нет"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("lift_kommercziya"),columns:"3",outlined:!1,name:"lift_kommercziya",title:"Лифт",itemList:["Есть","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema_otopleniya"),columns:"3",outlined:!1,name:"sistema_otopleniya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("gaz"),columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("mebel"),columns:"3",outlined:!1,name:"mebel",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_metro"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("elektrichestvo"),columns:"3",outlined:!1,name:"elektrichestvo",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("god_postrojki"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("vysota_potolkov"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("mestopolozhenie_obekta"),columns:"3",outlined:!1,name:"mestopolozhenie_obekta",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema_kondiczionirovaniya"),columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"nazvanie_zhk","kolichestvo_komnat","etazh","etazhnost","etazh","obshhaya_ploshhad","sostoyanie_remonta-kvartiry","kolichestvo_spalen","spalnya_sanuzel","zhilaya_ploshhad","balkon_kvartira","tip_planirovki","mebel_kvartira","sanuzel_kvartira","tip-stroeniya_kvartiry","vysota_potolkov","sistema-otopleniya_kvartiry","energonositel_obekta","lift_kvartira","podezd_nomer","kod_domofona","rasstoyanie_do_metro","vid_iz_okna","parkovka_kvartira","god_postrojki","terrasa","czokol_podval","garderobnaya","umnyj_dom"),isVisible:e=>{if(Ee(e.podkategoriya_obekta,"Квартиры")&&Ee(e.kategoriya_obekta,"Коммерческая"))return!1;let t=!1;return t=t||Ee(e.podkategoriya_obekta,"Квартиры"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Квартиры)"})},{type:o.Complete,hidden:e=>!e.fieldVisibility.has("nazvanie_zhk"),columns:"3",outlined:!1,name:"nazvanie_zhk",title:"Название ЖК",tip:['ЖК "Greenwich"','ЖК "OzMahal"','ЖК "Elysium"','ЖК "Binkat"','ЖК "Brooklyn"','ЖК "Assalom Havo"','ЖК "Istanbul City"']},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kolichestvo_komnat"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("etazh"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("etazhnost"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("obshhaya_ploshhad"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("sostoyanie_remonta-kvartiry"),columns:"3",outlined:!1,name:"sostoyanie_remonta-kvartiry",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kolichestvo_spalen"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("spalnya_sanuzel"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("zhilaya_ploshhad"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"zhilaya_ploshhad",title:"Жилая площадь М²"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("balkon_kvartira"),columns:"3",outlined:!1,name:"balkon_kvartira",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("tip_planirovki"),columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Малосемейная","Общежитие","Пентхаус","Дуплекс","Комната"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("mebel_kvartira"),columns:"3",outlined:!1,name:"mebel_kvartira",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sanuzel_kvartira"),columns:"3",outlined:!1,name:"sanuzel_kvartira",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("tip-stroeniya_kvartiry"),columns:"3",outlined:!1,name:"tip-stroeniya_kvartiry",title:"Тип строения",itemList:["Кирпичный","Монолитный","Блочный","Панельный","Деревянный","Газоблочный","Бетонно-керамзитный"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("vysota_potolkov"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema-otopleniya_kvartiry"),columns:"3",outlined:!1,name:"sistema-otopleniya_kvartiry",title:"Система отопления",itemList:["Центральное","2х контурный котел","Теплый пол"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("energonositel_obekta"),columns:"3",outlined:!1,name:"energonositel_obekta",title:"Энергоноситель объекта",itemList:["Электрофицирован","Газифицирован"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("lift_kvartira"),columns:"3",outlined:!1,name:"lift_kvartira",title:"Лифт",itemList:["Пассажирский","Грузовой","Нет"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("podezd_nomer"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"podezd_nomer",title:"Подъезд №"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kod_domofona"),columns:"3",outlined:!1,name:"kod_domofona",title:"Код домофона"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_metro"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vid_iz_okna"),columns:"3",outlined:!1,name:"vid_iz_okna",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("parkovka_kvartira"),columns:"3",outlined:!1,name:"parkovka_kvartira",title:"Парковка",itemList:["Наземная","Собственная","Подземная","В аренду","Нет"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("god_postrojki"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("terrasa"),columns:"3",outlined:!1,name:"terrasa",title:"Терраса",tr:e=>"Yes"===e?"Да":"Нет"},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("czokol_podval"),columns:"3",outlined:!1,name:"czokol_podval",title:"Цоколь/Подвал",tr:e=>"Yes"===e?"Да":"Нет"},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("garderobnaya"),columns:"3",outlined:!1,name:"garderobnaya",title:"Гардеробная",tr:e=>"Yes"===e?"Да":"Нет"},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("umnyj_dom"),columns:"3",outlined:!1,name:"umnyj_dom",title:"Умный дом",tr:e=>"Yes"===e?"Да":"Нет"}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"kolichestvo_komnat","sostoyanie_doma","god_postrojki","tip-stroeniya_doma","etazhnost","balkon_doma","tip_planirovki","bassejn","ploshhad_doma","sanuzel_doma","mashina_mesto","kolichestvo_spalen","kolichestvo_sotok","sostoyanie_remonta","lift_dom","spalnya_sanuzel","sistema-otopleniya_dom","mebel_dom","rasstoyanie_do_metro","gaz_dom","sistema-kondiczionirovaniya_dom","vysota_potolkov","elektrichestvo_dom","vid_iz_okna_dom","garazh","kanalizacziya_dom","raspolozhenie_doma","mestopolozhenie-obekta_dom","voda_dom","terrasa","garderobnaya","czokol","podval","vdol_dorogi","uglovoj","dva_doma_vo_dvore","komnata_ohrany","gostevoj_domik","barbekyu_zona","dopolnitelnaya_pristrojka","ogorod","saraj","umnyj_dom"),isVisible:e=>{if(Ee(e.podkategoriya_obekta,"Дома")&&Ee(e.kategoriya_obekta,"Коммерческая"))return!1;let t=!1;return t=t||Ee(e.podkategoriya_obekta,"Дома"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Дома)"})},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kolichestvo_komnat"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("etazhnost"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_doma"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_doma",title:"Площадь дома М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kolichestvo_sotok"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kolichestvo_spalen"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("spalnya_sanuzel"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("sostoyanie_remonta"),columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sanuzel_doma"),columns:"3",outlined:!1,name:"sanuzel_doma",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("bassejn"),columns:"3",outlined:!1,name:"bassejn",title:"Бассейн",itemList:["Летний","Зимний","Сауна","Нет"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("mebel_dom"),columns:"3",outlined:!1,name:"mebel_dom",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("sostoyanie_doma"),columns:"3",outlined:!1,name:"sostoyanie_doma",title:"Состояние дома",itemList:["Новой постройки","Недостроенный","Под снос","Коробка"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("mashina_mesto"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("tip_planirovki"),columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Смешанный"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("tip-stroeniya_doma"),columns:"3",outlined:!1,name:"tip-stroeniya_doma",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("vysota_potolkov"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("garazh"),columns:"3",outlined:!1,name:"garazh",title:"Гараж",itemList:["Подземный","Закрытый","Под навесом","Уличный"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema-otopleniya_dom"),columns:"3",outlined:!1,name:"sistema-otopleniya_dom",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema-kondiczionirovaniya_dom"),columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_dom",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("raspolozhenie_doma"),columns:"3",outlined:!1,name:"raspolozhenie_doma",title:"Расположение дома",itemList:["По середине","В начале двора","В конце двора"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("kanalizacziya_dom"),columns:"3",outlined:!1,name:"kanalizacziya_dom",title:"Канализация",itemList:["Да","Нет"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_metro"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vid_iz_okna_dom"),columns:"3",outlined:!1,name:"vid_iz_okna_dom",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("lift_dom"),columns:"3",outlined:!1,name:"lift_dom",title:"Лифт",itemList:["Есть","Нет"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("god_postrojki"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("voda_dom"),columns:"3",outlined:!1,name:"voda_dom",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("gaz_dom"),columns:"3",outlined:!1,name:"gaz_dom",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("elektrichestvo_dom"),columns:"3",outlined:!1,name:"elektrichestvo_dom",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("balkon_doma"),columns:"3",outlined:!1,name:"balkon_doma",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("mestopolozhenie-obekta_dom"),columns:"3",outlined:!1,name:"mestopolozhenie-obekta_dom",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("terrasa"),columns:"3",outlined:!1,name:"terrasa",title:"Терраса",tr:e=>"Yes"===e?"Да":"Нет"},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("garderobnaya"),columns:"3",outlined:!1,name:"garderobnaya",title:"Гардеробная",tr:e=>"Yes"===e?"Да":"Нет"},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("czokol"),columns:"3",outlined:!1,name:"czokol",title:"Цоколь",tr:e=>"Yes"===e?"Да":"Нет"},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("podval"),columns:"3",outlined:!1,name:"podval",title:"Подвал",tr:e=>"Yes"===e?"Да":"Нет"},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("umnyj_dom"),columns:"3",outlined:!1,name:"umnyj_dom",title:"Умный дом",tr:e=>"Yes"===e?"Да":"Нет"},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("vdol_dorogi"),columns:"3",outlined:!1,name:"vdol_dorogi",title:"Вдоль дороги",tr:e=>"Yes"===e?"Да":"Нет"},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("uglovoj"),columns:"3",outlined:!1,name:"uglovoj",title:"Угловой",tr:e=>"Yes"===e?"Да":"Нет"},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("dva_doma_vo_dvore"),columns:"3",outlined:!1,name:"dva_doma_vo_dvore",title:"2 дома во дворе",tr:e=>"Yes"===e?"Да":"Нет"},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("komnata_ohrany"),columns:"3",outlined:!1,name:"komnata_ohrany",title:"Комната охраны",tr:e=>"Yes"===e?"Да":"Нет"},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("gostevoj_domik"),columns:"3",outlined:!1,name:"gostevoj_domik",title:"Гостевой домик",tr:e=>"Yes"===e?"Да":"Нет"},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("barbekyu_zona"),columns:"3",outlined:!1,name:"barbekyu_zona",title:"Барбекю зона",tr:e=>"Yes"===e?"Да":"Нет"},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("dopolnitelnaya_pristrojka"),columns:"3",outlined:!1,name:"dopolnitelnaya_pristrojka",title:"Дополнительная пристройка",tr:e=>"Yes"===e?"Да":"Нет"},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("ogorod"),columns:"3",outlined:!1,name:"ogorod",title:"Огород",tr:e=>"Yes"===e?"Да":"Нет"},{type:o.YesNo,hidden:e=>!e.fieldVisibility.has("saraj"),columns:"3",outlined:!1,name:"saraj",title:"Сарай",tr:e=>"Yes"===e?"Да":"Нет"}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"kolichestvo_komnat","naznachenie-obekta-zemlya_uchastok","tip_zemli_uchastka","poleznaya_ploshhad","etazh","sostoyanie-obekta_zemlya","mashina_mesto","kolichestvo_sotok","etazhnost","sostoyanie-remonta_zemlya","parkovka_zemlya","rasstoyanie_do_metro","obshhaya_ploshhad","voda_zemlya","mestopolozhenie-obekta_zemlya","rasstoyanie_do_goroda","sistema-otopleniya_zemlya","podezdnye_puti","sistema-kondiczionirovaniya_zemlya","god_postrojki","elektrichestvo_zemlya","gaz_zemlya","kanalizacziya_zemlya"),isVisible:e=>!Ee(e.kategoriya_obekta,"Коммерческая")&&Ee(e.podkategoriya_obekta,"Земля/Участок"),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Земля/Участок)"})},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kolichestvo_komnat"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Component,hidden:e=>!e.fieldVisibility.has("naznachenie-obekta-zemlya_uchastok"),sx:{pr:1,mb:2},columns:"3",name:"naznachenie-obekta-zemlya_uchastok",element:e=>he(Oe,{variant:"standard",label:"Назначение объекта",items:[{label:"Сельхоз использование",value:"Сельхоз использование"},{label:"ИЖС",value:"ИЖС"},{label:"Высотная застройка",value:"Высотная застройка"},{label:"Промышленное назначение",value:"Промышленное назначение"},{label:"ТЦ",value:"ТЦ"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Склады",value:"Склады"},{label:"Инвестпроект",value:"Инвестпроект"},{label:"Строительство образовательных учреждений",value:"Строительство образовательных учреждений"},{label:"АЗС",value:"АЗС"},{label:"Мойка",value:"Мойка"}],value:e["naznachenie-obekta_zemlya"],onChange:t=>e.onChange({"naznachenie-obekta_zemlya":t})})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("tip_zemli_uchastka"),columns:"3",outlined:!1,name:"tip_zemli_uchastka",title:"Тип земли/участка",itemList:["Делимый","Неделимый"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("poleznaya_ploshhad"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("etazh"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("sostoyanie-obekta_zemlya"),columns:"3",outlined:!1,name:"sostoyanie-obekta_zemlya",title:"Состояние объекта",itemList:["Пустая земля/участок","Недостроенная","Под снос"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("mashina_mesto"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kolichestvo_sotok"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("etazhnost"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("sostoyanie-remonta_zemlya"),columns:"3",outlined:!1,name:"sostoyanie-remonta_zemlya",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("parkovka_zemlya"),columns:"3",outlined:!1,name:"parkovka_zemlya",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_metro"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("obshhaya_ploshhad"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("voda_zemlya"),columns:"3",outlined:!1,name:"voda_zemlya",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("mestopolozhenie-obekta_zemlya"),columns:"3",outlined:!1,name:"mestopolozhenie-obekta_zemlya",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_goroda"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_goroda",title:"Расстояние до города (м)"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema-otopleniya_zemlya"),columns:"3",outlined:!1,name:"sistema-otopleniya_zemlya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("podezdnye_puti"),columns:"3",outlined:!1,name:"podezdnye_puti",title:"Подъездные пути",itemList:["Асфальтированная дорога","Грунтовая дорога","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema-kondiczionirovaniya_zemlya"),columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_zemlya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("god_postrojki"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("elektrichestvo_zemlya"),columns:"3",outlined:!1,name:"elektrichestvo_zemlya",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("gaz_zemlya"),columns:"3",outlined:!1,name:"gaz_zemlya",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("kanalizacziya_zemlya"),columns:"3",outlined:!1,name:"kanalizacziya_zemlya",title:"Канализация",itemList:["Да","Нет"]}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"kolichestvo_komnat","sostoyanie_remonta","naznachenie_obekta","raspolozhenie_obekta","etazh","balkon","tip_planirovki","lift_kvartira","etazhnost","god_postrojki","nazvanie_zhk","mashina_mesto","obshhaya_ploshhad","sanuzel_kvartira","parkovka_kvartira","zhilaya_ploshhad","mebel","vysota_potolkov","kolichestvo_spalen","sistema_otopleniya","kod_domofona","spalnya_sanuzel","gaz","podezd_nomer","rasstoyanie_do_metro","vid_iz_okna","sistema_kondiczionirovaniya","tip_stroeniya"),isVisible:e=>!(!Ee(e.podkategoriya_obekta,"Квартиры")||!Ee(e.kategoriya_obekta,"Коммерческая")),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая + Жилая квартира)"})},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kolichestvo_komnat"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("sostoyanie_remonta"),columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Component,hidden:e=>!e.fieldVisibility.has("naznachenie_obekta"),sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>he(Oe,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("raspolozhenie_obekta"),columns:"3",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("etazh"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("balkon"),columns:"3",outlined:!1,name:"balkon",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("tip_planirovki"),columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Малосемейная","Общежитие","Пентхаус","Дуплекс","Комната"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("lift_kvartira"),columns:"3",outlined:!1,name:"lift_kvartira",title:"Лифт",itemList:["Пассажирский","Грузовой","Нет"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("etazhnost"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("god_postrojki"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"},{type:o.Complete,hidden:e=>!e.fieldVisibility.has("nazvanie_zhk"),columns:"3",outlined:!1,name:"nazvanie_zhk",title:"Название ЖК",tip:['ЖК "Greenwich"','ЖК "OzMahal"','ЖК "Elysium"','ЖК "Binkat"','ЖК "Brooklyn"','ЖК "Assalom Havo"','ЖК "Istanbul City"']},{type:o.Text,hidden:e=>!e.fieldVisibility.has("mashina_mesto"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("obshhaya_ploshhad"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sanuzel_kvartira"),columns:"3",outlined:!1,name:"sanuzel_kvartira",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("parkovka_kvartira"),columns:"3",outlined:!1,name:"parkovka_kvartira",title:"Парковка",itemList:["Наземная","Собственная","Подземная","В аренду","Нет"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("zhilaya_ploshhad"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"zhilaya_ploshhad",title:"Жилая площадь М²"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("mebel"),columns:"3",outlined:!1,name:"mebel",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("vysota_potolkov"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kolichestvo_spalen"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema_otopleniya"),columns:"3",outlined:!1,name:"sistema_otopleniya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kod_domofona"),columns:"3",outlined:!1,name:"kod_domofona",title:"Код домофона"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("spalnya_sanuzel"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("gaz"),columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("podezd_nomer"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"podezd_nomer",title:"Подъезд №"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_metro"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vid_iz_okna"),columns:"3",outlined:!1,name:"vid_iz_okna",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema_kondiczionirovaniya"),columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("tip_stroeniya"),columns:"3",outlined:!1,name:"tip_stroeniya",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"kolichestvo_komnat","sostoyanie_doma","mestopolozhenie_obekta","naznachenie_obekta","etazhnost","sostoyanie_remonta","raspolozhenie_obekta","tip_stroeniya","ploshhad_doma","raspolozhenie_doma","tip_planirovki","bassejn","kolichestvo_sotok","sanuzel_doma","mashina_mesto","kolichestvo_spalen","voda_dom","lift_kvartira","spalnya_sanuzel","sistema_otopleniya","mebel","rasstoyanie_do_metro","gaz","sistema_kondiczionirovaniya","vysota_potolkov","elektrichestvo_dom","vid_iz_okna","garazh","kanalizacziya_dom","balkon","god_postrojki"),isVisible:e=>!(!Ee(e.podkategoriya_obekta,"Дома")||!Ee(e.kategoriya_obekta,"Коммерческая")),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческий + Жилой дом)"})},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kolichestvo_komnat"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("sostoyanie_doma"),columns:"3",outlined:!1,name:"sostoyanie_doma",title:"Состояние дома",itemList:["Новой постройки","Недостроенный","Под снос","Коробка"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("mestopolozhenie_obekta"),columns:"3",outlined:!1,name:"mestopolozhenie_obekta",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:o.Component,hidden:e=>!e.fieldVisibility.has("naznachenie_obekta"),sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>he(Oe,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},{type:o.Text,hidden:e=>!e.fieldVisibility.has("etazhnost"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("sostoyanie_remonta"),columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("raspolozhenie_obekta"),columns:"3",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("tip_stroeniya"),columns:"3",outlined:!1,name:"tip_stroeniya",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("ploshhad_doma"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_doma",title:"Площадь дома М²"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("raspolozhenie_doma"),columns:"3",outlined:!1,name:"raspolozhenie_doma",title:"Расположение дома",itemList:["По середине","В начале двора","В конце двора"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("tip_planirovki"),columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Малосемейная","Общежитие","Пентхаус","Дуплекс","Комната"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("bassejn"),columns:"3",outlined:!1,name:"bassejn",title:"Бассейн",itemList:["Летний","Зимний","Сауна","Нет"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kolichestvo_sotok"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sanuzel_doma"),columns:"3",outlined:!1,name:"sanuzel_doma",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("mashina_mesto"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kolichestvo_spalen"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("voda_dom"),columns:"3",outlined:!1,name:"voda_dom",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("lift_kvartira"),columns:"3",outlined:!1,name:"lift_kvartira",title:"Лифт",itemList:["Пассажирский","Грузовой","Нет"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("spalnya_sanuzel"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema_otopleniya"),columns:"3",outlined:!1,name:"sistema_otopleniya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("mebel"),columns:"3",outlined:!1,name:"mebel",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_metro"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("gaz"),columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema_kondiczionirovaniya"),columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("vysota_potolkov"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("elektrichestvo_dom"),columns:"3",outlined:!1,name:"elektrichestvo_dom",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vid_iz_okna"),columns:"3",outlined:!1,name:"vid_iz_okna",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("garazh"),columns:"3",outlined:!1,name:"garazh",title:"Гараж",itemList:["Подземный","Закрытый","Под навесом","Уличный"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("kanalizacziya_dom"),columns:"3",outlined:!1,name:"kanalizacziya_dom",title:"Канализация",itemList:["Да","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("balkon"),columns:"3",outlined:!1,name:"balkon",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("god_postrojki"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"kolichestvo_komnat","naznachenie-obekta-zemlya_uchastok","tip_zemli_uchastka","poleznaya_ploshhad","etazh","sostoyanie-obekta_zemlya","mashina_mesto","kolichestvo_sotok","etazhnost","sostoyanie-remonta_zemlya","parkovka_zemlya","rasstoyanie_do_metro","obshhaya_ploshhad","voda_zemlya","mestopolozhenie-obekta_zemlya","rasstoyanie_do_goroda","sistema-otopleniya_zemlya","podezdnye_puti","sistema-kondiczionirovaniya_zemlya","god_postrojki","elektrichestvo_zemlya","gaz_zemlya","kanalizacziya_zemlya"),isVisible:e=>!(!Ee(e.podkategoriya_obekta,"Земля/Участок")||!Ee(e.kategoriya_obekta,"Коммерческая")),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая + Жилая земля/участок)"})},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kolichestvo_komnat"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Component,hidden:e=>!e.fieldVisibility.has("naznachenie-obekta-zemlya_uchastok"),sx:{pr:1,mb:2},columns:"3",name:"naznachenie-obekta-zemlya_uchastok",element:e=>he(Oe,{variant:"standard",label:"Назначение объекта",items:[{label:"Сельхоз использование",value:"Сельхоз использование"},{label:"ИЖС",value:"ИЖС"},{label:"Высотная застройка",value:"Высотная застройка"},{label:"Промышленное назначение",value:"Промышленное назначение"},{label:"ТЦ",value:"ТЦ"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Склады",value:"Склады"},{label:"Инвестпроект",value:"Инвестпроект"},{label:"Строительство образовательных учреждений",value:"Строительство образовательных учреждений"},{label:"АЗС",value:"АЗС"},{label:"Мойка",value:"Мойка"}],value:e["naznachenie-obekta_zemlya"],onChange:t=>e.onChange({"naznachenie-obekta_zemlya":t})})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("tip_zemli_uchastka"),columns:"3",outlined:!1,name:"tip_zemli_uchastka",title:"Тип земли/участка",itemList:["Делимый","Неделимый"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("poleznaya_ploshhad"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("etazh"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("sostoyanie-obekta_zemlya"),columns:"3",outlined:!1,name:"sostoyanie-obekta_zemlya",title:"Состояние объекта",itemList:["Пустая земля/участок","Недостроенная","Под снос"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("mashina_mesto"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("kolichestvo_sotok"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("etazhnost"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("sostoyanie-remonta_zemlya"),columns:"3",outlined:!1,name:"sostoyanie-remonta_zemlya",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("parkovka_zemlya"),columns:"3",outlined:!1,name:"parkovka_zemlya",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_metro"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("obshhaya_ploshhad"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("voda_zemlya"),columns:"3",outlined:!1,name:"voda_zemlya",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("mestopolozhenie-obekta_zemlya"),columns:"3",outlined:!1,name:"mestopolozhenie-obekta_zemlya",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_goroda"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_goroda",title:"Расстояние до города (м)"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema-otopleniya_zemlya"),columns:"3",outlined:!1,name:"sistema-otopleniya_zemlya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("podezdnye_puti"),columns:"3",outlined:!1,name:"podezdnye_puti",title:"Подъездные пути",itemList:["Асфальтированная дорога","Грунтовая дорога","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema-kondiczionirovaniya_zemlya"),columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_zemlya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:o.Text,hidden:e=>!e.fieldVisibility.has("god_postrojki"),columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("elektrichestvo_zemlya"),columns:"3",outlined:!1,name:"elektrichestvo_zemlya",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("gaz_zemlya"),columns:"3",outlined:!1,name:"gaz_zemlya",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("kanalizacziya_zemlya"),columns:"3",outlined:!1,name:"kanalizacziya_zemlya",title:"Канализация",itemList:["Да","Нет"]}]}}],Ip=[{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"vnutri_est","ryadom_est"),isVisible:e=>{let t=!0;return t=t&&!Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Квартиры"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Квартиры)"})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vnutri_est"),columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Холодильник","Телевизор","Кондиционер","Стиральная машина","Мусоропровод","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("ryadom_est"),columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"vnutri_est","ryadom_est"),isVisible:e=>{let t=!0;return t=t&&!Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Дома"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Дома)"})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vnutri_est"),columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Холодильник","Телевизор","Кондиционер","Стиральная машина","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг","Полисадник"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("ryadom_est"),columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Охрана","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"vnutri_est","ryadom_est"),isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Квартиры"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая + Жилая квартира)"})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vnutri_est"),columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Холодильник","Телевизор","Кондиционер","Стиральная машина","Мусоропровод","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг","Пожарная сигнализация","Видеонаблюдение","Сигнализация"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("ryadom_est"),columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Охрана","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"vnutri_est","ryadom_est"),isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Земля/Участок"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая + Жилая земля/участок)"})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vnutri_est"),columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Забор","Катлаван","Пожарная сигнализация","Видеонаблюдение","Сигнализация"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("ryadom_est"),columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Охрана","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}}],Mp=[{type:o.Paper,hidden:e=>!Ds(e.fieldVisibility,"zagolovok","kategoriya_obekta","prodazha","arenda","podkategoriya_obekta","istochnik","tip_nedvizhimosti","vid_obekta","raspolozhenie_obekta","vid_liczenzii"),fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Основная информация"})},{type:o.Text,hidden:e=>!e.fieldVisibility.has("zagolovok"),outlined:!1,name:"zagolovok",title:"Заголовок",placeholder:"Введите текст"},{type:o.Items,hidden:e=>!e.fieldVisibility.has("kategoriya_obekta"),outlined:!1,columns:"4",name:"kategoriya_obekta",title:"Категория объекта",itemList:["Жилая","Коммерческая","От застройщика"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("prodazha"),outlined:!1,columns:"4",name:"prodazha",title:"Продажа",itemList:["Прямая продажа","Рассрочка","Через банк","Обмен"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("arenda"),outlined:!1,columns:"4",name:"arenda",title:"Аренда",itemList:["Долгосрочная","Ежемесячная","Посуточная"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("podkategoriya_obekta"),outlined:!1,columns:"4",name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>Ee(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок","Здания","Базы"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("podkategoriya_obekta"),outlined:!1,columns:"4",name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>!Ee(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("istochnik"),columns:"4",outlined:!1,name:"istochnik",title:"Источник",itemList:["По звонку","Личные связи","Самостоятельный поиск","Риелтор","С сайта","Прибытие в офис","OLX","Facebook","Instagram","Telegram","Эксклюзив","Другое"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("tip_nedvizhimosti"),isVisible:e=>!(!Ee(e.podkategoriya_obekta,"Квартиры")||!Ee(e.kategoriya_obekta,"Коммерческая","Жилая")),columns:"4",outlined:!1,name:"tip_nedvizhimosti",title:"Тип недвижимости",itemList:["Вторичное жилье","Новостройка"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("vid_obekta"),isVisible:e=>{let t=!1;return t=t||Ee(e.podkategoriya_obekta,"Дома"),t},columns:"4",outlined:!1,name:"vid_obekta",title:"Вид объекта",itemList:["Дом","Коттедж","Таунхаус","ЖАКТ","Часть дома","Дача"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("raspolozhenie_obekta"),isVisible:e=>{let t=!1;return t=t||Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&!Ee(e.podkategoriya_obekta,"Дома"),t=t&&!Ee(e.podkategoriya_obekta,"Земля/Участок"),t=t&&!Ee(e.podkategoriya_obekta,"Квартиры"),t},columns:"4",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("vid_liczenzii"),isVisible:e=>{let t=!1;return t=t||Ee(e.podkategoriya_obekta,"Земля/Участок"),t},columns:"4",outlined:!1,name:"vid_liczenzii",title:"Вид лицензии",itemList:["Коммерческая","Жилая"]}]},...Lp,{type:o.Box,isVisible:e=>{let t=!1;return t=t||null!==e.podkategoriya_obekta,t=t||null!==e.kategoriya_obekta,t},sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gridColumnGap:"8px"},fields:[{type:o.Paper,hidden:e=>!Ds(e.fieldVisibility,"strana","gorod","oblast","rajon","mahallya","ulicza","orientir","metro","nomer_doma","nomer_kvartiry"),fieldBottomMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Расположение объекта"})},{type:o.Complete,hidden:e=>!e.fieldVisibility.has("strana"),outlined:!1,name:"strana",title:"Страна",tip:async()=>["Узбекистан"]},{type:o.Complete,hidden:e=>!e.fieldVisibility.has("gorod"),outlined:!1,name:"gorod",title:"Город",tip:["Ташкент"]},{type:o.Complete,hidden:e=>!e.fieldVisibility.has("oblast"),outlined:!1,name:"oblast",title:"Область",tip:async()=>["Ташкентская область"]},{type:o.Complete,hidden:e=>!e.fieldVisibility.has("rajon"),outlined:!1,name:"rajon",title:"Район",tip:["Алмазарский район","Бектемирский район","Мирабадский район","Мирзо-Улугбекский район","Сергелийский район","Учтепинский район","Чиланзарский район","Шайхантахурский район","Юнусабадский район","Яккасарайский район","Янгихаётский район","Яшнабадский район"]},{type:o.Complete,hidden:e=>!e.fieldVisibility.has("mahallya"),tip:bs.dictService.getMahallya,outlined:!1,name:"mahallya",title:"Махалля"},{type:o.Complete,hidden:e=>!e.fieldVisibility.has("ulicza"),tip:bs.dictService.getUlicza,outlined:!1,name:"ulicza",title:"Улица"},{type:o.Complete,hidden:e=>!e.fieldVisibility.has("orientir"),tip:bs.dictService.getOrientir,outlined:!1,name:"orientir",title:"Ориентир"},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("metro"),freeSolo:!0,outlined:!1,name:"metro",title:"Метро",itemList:["А. Ходжаев","Абдулла Кодирий","Алишер Навоий","Амир Темур хиёбони","Беруний","Бобур","Бодомзор","Буюк Ипак йули","Гофур Гулом","Дружба народов","Дустлик","Жанубий","Космонавтлар","Машинасозлар","Миллий бог","Мингурик","Минор","Мирзо Улугбек","Мустакиллик майдони","Новза","Ойбек","Олмазор","Отчопар","Пахтакор","Пушкинская","Сергели","Тинчлик","Тошкент","Тукимачи","Туркистон","Турсунзода","Узбекистон","Усмон Носыр","Файзулла Ходжаев","Хамид Олимжон","Чилонзор","Чорсу","Чош-тепа","Шахристан","Эхтиром","Юнус Ражабий","Юнусабад"]},{type:o.Fragment,isVisible:e=>{let t=!1;return t=t||Ee(e.podkategoriya_obekta,"Квартиры"),t},fields:[{type:o.Text,hidden:e=>!e.fieldVisibility.has("nomer_doma"),columns:"6",outlined:!1,name:"nomer_doma",title:"№ дома"},{type:o.Text,hidden:e=>!e.fieldVisibility.has("nomer_kvartiry"),columns:"6",outlined:!1,name:"nomer_kvartiry",title:"№ квартиры"}]},{type:o.Fragment,isVisible:e=>{let t=!1;return t=t||null!==e.kategoriya_obekta,t=t||null!==e.podkategoriya_obekta,t=t&&!Ee(e.podkategoriya_obekta,"Квартиры"),t},fields:[{type:o.Text,hidden:e=>!e.fieldVisibility.has("nomer_doma"),outlined:!1,name:"nomer_doma",title:"№ дома"}]},{type:o.Component,element:Tp}]},{type:o.Box,sx:{display:"grid",gridTemplateRows:"auto 1fr",gridRowGap:"8px"},fields:[{type:o.Component,fieldRightMargin:"1",fieldBottomMargin:"1",element:({onChange:e,_fieldData:t})=>he(Em,{onChange:e,fieldData:t})},{type:o.Paper,hidden:e=>!Ds(e.fieldVisibility,"opisanie"),fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Описание объекта"})},{type:o.Text,hidden:e=>!e.fieldVisibility.has("opisanie"),inputRows:6,outlined:!1,name:"opisanie",title:"Описание"}]}]}]},...Ip,...Fp,...Cp,{type:o.Paper,isVisible:e=>(Ee(e.kategoriya_obekta,"Коммерческая","Жилая")&&Ee(e.podkategoriya_obekta,"Квартиры","Дома","Земля/Участок","Здания","Базы"),!1),fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,element:Kd}]},{type:o.Fragment,isVisible:e=>{let t=!1;return t=t||null!==e.kategoriya_obekta,t=t||null!==e.podkategoriya_obekta,t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>e.apartment_images&&e.apartment_images.length,fields:[{type:o.Component,sx:{mb:2},element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})},{type:o.Component,element:Dd}]},{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,element:({_fieldData:e,onChange:t})=>he(zp,{images:e.apartment_images,onChange:e=>t({apartment_images:e})})}]}]},{type:o.Component,features:["withBottomSaveButton"],watchOneContext:!0,element:Vp}];window.apartment_fields=Mp;const jp=[{type:He.Link,isVisible:()=>!!bs.routerService.previousPath,action:"list-action",label:he(De,{sx:{display:"block"}})},{type:He.Link,action:"list-action",label:"База объектов"},{type:He.Link,action:"list-action",isVisible:({id:e})=>"create"!==e,label:"Редактирование объекта"},{type:He.Link,action:"list-action",isVisible:({id:e})=>"create"===e,label:"Создание Объекта"},{type:He.Button,isDisabled:({hasChanged:e})=>!e,action:"save-action",label:"Сохранить"}],Bp=Se.createLoader(28),Rp=[],Dp=[{type:tt.Component,headerName:"Аватар",sortable:!1,avatar:!0,width:()=>65,element:({avatar:e,email:t})=>he(Le,{Loader:Bp,children:async()=>{const i=e?await bs.appwriteService.getImageURL(e):"";return he(Te,{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:he(it,{src:i||void 0,alt:t})})}})},{type:tt.Compute,sortable:!1,primary:!0,headerName:"Ф.И.О.",compute:({first_name:e="",last_name:t="",middle_name:i=""})=>[e,t,i].filter((e=>e.length)).join(" ")||"Unset",width:()=>200},{type:tt.Compute,sortable:!1,secondary:!0,compute:async({user_role:e,telefon:t})=>{const i=await bs.dictService.getUserRoles(),a=(null==e?void 0:e.length)?h.get(i,e[0])||e[0]:"Не указано";return t||a},headerName:"Роль",width:()=>200}],qp=({title:e,payload:t,features:i,selectedRows:a=Rp,selectionMode:o=lt.Multiple})=>{const l=Zs(),n=Qi({title:e,selectedRows:a,columns:Dp,handler:l,payload:t,features:i,selectionMode:o}),{handleLoadStart:r,handleLoadEnd:s}=$e({history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)}),{execute:d}=be((async()=>await n({selectedRows:a}).toPromise()),{onLoadStart:r,onLoadEnd:s,fallback:bs.errorService.handleGlobalError});return d},Pp=[{type:He.Link,isVisible:()=>!!bs.routerService.previousPath,action:"list-action",label:he(De,{sx:{display:"block"}})},{type:He.Link,action:"list-action",label:"База объектов"},{type:He.Link,action:"list-action",label:"Просмотр объекта"},{type:He.Button,isDisabled:({payload:{permissions:e}})=>!e.hasApartmentUpdatePermission,action:"edit-action",label:"Редактировать"}],Ep=[{action:"pick-allowance-action",isDisabled:async({data:{object:e}})=>{const t=bs.appwriteService.currentUser.$id;return H(U(Promise.resolve(e.system_created_by===t),bs.featureService.hasFeature("vizhu_kontakty_pod_bronyu")))},label:"Поделиться объектом"},{action:"toggle-only-for-owner-action",isVisible:({data:{object:e}})=>!!e.system_only_for_owner,isDisabled:async({data:{object:e}})=>{const t=bs.appwriteService.currentUser.$id;return H(U(Promise.resolve(e.system_created_by===t),bs.featureService.hasFeature("vizhu_kontakty_pod_bronyu")))},icon:Et,label:"Эксклюзив"},{action:"toggle-only-for-owner-action",isVisible:({data:{object:e}})=>!e.system_only_for_owner,isDisabled:async({data:{object:e}})=>{const t=bs.appwriteService.currentUser.$id;return H(U(Promise.resolve(e.system_created_by===t),bs.featureService.hasFeature("vizhu_kontakty_pod_bronyu")))},icon:Pt,label:"Эксклюзив"},{action:"superadmin-remove-action",isVisible:({payload:e})=>e.permissions.hasSuperAdminFlagPermission,label:"Удалить навсегда"}],Np=({fieldData:e,onChange:t})=>{const{handleLoadStart:i,handleLoadEnd:a,loading:o}=$e({history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)});return he(ut,{children:he(pt,{disabled:o,sx:{borderRadius:"20px"},startIcon:he(Zi,{}),onClick:async()=>{let o=!0;i();try{const i=await ct("*");if(!i)return;const a=Ft(e.contact_files)||[],o=await Promise.all(i.map((async e=>bs.appwriteService.uploadFile(e)))),l=[...a,...o];t({contact_files:l})}catch(l){o=!1,bs.alertService.notify(jr(l))}finally{a(o)}},variant:"contained",children:"Юридическое лицо"===e.kontakt?"Скан документов организации":"Скан документа"})})},Op="Вы уверены, что хотите удалить файл?",Up="Подтверждение",Hp=Se.createLoader(24),Wp=e=>e&&"Физическое лицо"!==e?{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Основная информация"})},{type:o.Combo,outlined:!1,name:"kontakt",title:"Контакт",itemList:["Физическое лицо","Юридическое лицо"]},{type:o.Text,outlined:!1,name:"naimenovanie_organizaczii",title:"Наименование организации"},{type:o.Text,outlined:!1,name:"fio",title:"Ф.И.О."},{type:o.Text,description:"Основной",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon",title:"Телефон"},{type:o.Combo,outlined:!1,name:"tip_klienta",title:"Тип клиента",itemList:["Собственник","Доверенное лицо","Риелтор","Информатор","Застройщик"]},{type:o.Combo,outlined:!1,name:"status_klienta",title:"Статус клиента",itemList:["VIP-клиент","Клиент","Постоянный клиент","Специальный клиент","Черный список"]},{type:o.Combo,outlined:!1,name:"loyalnost_klienta",title:"Лояльность клиента",itemList:["Высокая","Средняя","Низкая"]},{type:o.Date,outlined:!1,name:"data-sozdaniya_klienta",title:"Дата создания клиента"},{type:o.Text,outlined:!1,name:"fakticheskij_adres",title:"Фактический адрес"},{type:o.Text,outlined:!1,name:"email",title:"Email"},{type:o.Fragment,isVisible:()=>{let e=!0;return e=e&&!bs.routerService.location.pathname.includes("bid_view"),e=e&&!bs.routerService.location.pathname.includes("bid_edit"),e},fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"subtitle2",fontWeight:"bold",sx:{textDecoration:"underline",mt:2,mb:1},children:"Кадастр"})},{type:o.Text,outlined:!1,name:"kadastrovyj-nomer_obekta",title:"Кадастровый номер объекта"},{type:o.Text,outlined:!1,name:"kadastrovyj-nomer_zemli",title:"Кадастровый номер земли"}]}]}:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"0",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Основная информация"})},{type:o.Combo,outlined:!1,name:"kontakt",title:"Контакт",itemList:["Физическое лицо","Юридическое лицо"]},{type:o.Text,outlined:!1,name:"fio",title:"Ф.И.О."},{type:o.Text,description:"Основной",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon",title:"Телефон"},{type:o.Combo,outlined:!1,name:"tip_klienta",title:"Тип клиента",itemList:["Собственник","Доверенное лицо","Риелтор","Информатор","Застройщик"]},{type:o.Combo,outlined:!1,name:"status_klienta",title:"Статус клиента",itemList:["VIP-клиент","Клиент","Постоянный клиент","Специальный клиент","Черный список"]},{type:o.Combo,outlined:!1,name:"loyalnost_klienta",title:"Лояльность клиента",itemList:["Высокая","Средняя","Низкая"]},{type:o.Date,outlined:!1,name:"data-sozdaniya_klienta",title:"Дата создания клиента"},{type:o.Text,outlined:!1,name:"fakticheskij_adres",title:"Фактический адрес"},{type:o.Text,outlined:!1,name:"email",title:"Email"},{type:o.Fragment,isVisible:()=>{let e=!0;return e=e&&!bs.routerService.location.pathname.includes("bid_view"),e=e&&!bs.routerService.location.pathname.includes("bid_edit"),e},fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"subtitle2",fontWeight:"bold",sx:{textDecoration:"underline",mt:2,mb:1},children:"Кадастр"})},{type:o.Text,outlined:!1,name:"kadastrovyj-nomer_obekta",title:"Кадастровый номер объекта"},{type:o.Text,outlined:!1,name:"kadastrovyj-nomer_zemli",title:"Кадастровый номер земли"}]}]},$p=e=>e&&"Физическое лицо"!==e?{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Паспортные данные"})},{type:o.Text,outlined:!1,name:"seriya-i-nomer_pasporta",title:"Серия и номер паспорта"},{type:o.Date,outlined:!1,name:"data_rozhdeniya",title:"Дата рождения"},{type:o.Combo,outlined:!1,name:"pol",title:"Пол",itemList:["Мужской","Женский"]},{type:o.Date,outlined:!1,name:"data-vydachi_pasporta",title:"Дата выдачи паспорта"},{type:o.Text,outlined:!1,name:"kem_vydan",title:"Кем выдан"},{type:o.Text,outlined:!1,name:"adres_registraczii",title:"Адрес регистрации"},{type:o.Text,outlined:!1,name:"pinfl",title:"ПИНФЛ"},{type:o.Text,outlined:!1,name:"inn",title:"ИНН"},{type:o.Text,outlined:!1,name:"dolzhnost_rukovoditelya",title:"Должность руководителя"},{type:o.Combo,outlined:!1,name:"osnovanie-deyatelnosti-dannogo_licza",title:"Основание деятельности данного лица",itemList:["На основании устава","По доверенности"]},{type:o.Text,outlined:!1,name:"yuridicheskij_adres",title:"Юридический адрес"},{type:o.Text,outlined:!1,name:"sertifikat_kompanii",title:"Сертификат компании (Гувохнома)"},{type:o.Text,outlined:!1,name:"rekvizity",title:"Реквизиты"}]}:{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Паспортные данные"})},{type:o.Text,outlined:!1,name:"seriya-i-nomer_pasporta",title:"Серия и номер паспорта"},{type:o.Date,outlined:!1,name:"data_rozhdeniya",title:"Дата рождения"},{type:o.Combo,outlined:!1,name:"pol",title:"Пол",itemList:["Мужской","Женский"]},{type:o.Date,outlined:!1,name:"data-vydachi_pasporta",title:"Дата выдачи паспорта"},{type:o.Text,outlined:!1,name:"kem_vydan",title:"Кем выдан"},{type:o.Text,outlined:!1,name:"adres_registraczii",title:"Адрес регистрации"},{type:o.Text,outlined:!1,name:"pinfl",title:"ПИНФЛ"},{type:o.Text,outlined:!1,name:"inn",title:"ИНН"},{type:o.Text,outlined:!1,name:"rekvizity",title:"Реквизиты"}]},Gp=e=>"desktop"===e?{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"0",innerPadding:"0",tabletHidden:!0,phoneHidden:!0,child:{type:o.Component,element:yd}}:{type:o.Paper,fieldBottomMargin:"1",innerPadding:"0",desktopHidden:!0,child:{type:o.Component,element:yd}},Yp=e=>e&&"Физическое лицо"!==e?[{type:o.Paper,fieldBottomMargin:"1",sx:{padding:"0 !important"},isVisible:e=>e.contact_files&&e.contact_files.length,child:{type:o.Component,element:({contact_files:e,onChange:t})=>{const i=zt({title:Up,msg:Op});return he(Ct,{children:null==e?void 0:e.map(((a,o)=>he(bt,{disableGutters:!0,secondaryAction:he(st,{onClick:()=>{const o=Ft(e)||[];i().then((e=>{e&&t({contact_files:o.filter((e=>e!==a))})}))},children:he(Lt,{})}),children:he(Me,{onClick:async()=>{const e=await bs.appwriteService.getFileURL(a),t=await bs.appwriteService.readFileName(a);yt(e,t)},children:he(Le,{payload:a,Loader:Hp,children:async e=>{const t=await bs.appwriteService.readFileName(e);return he(ft,{primary:t})}})})},"".concat(a,"-").concat(o))))})}}},{type:o.Paper,fieldBottomMargin:"0",fields:[{type:o.Component,element:({_fieldData:e,onChange:t})=>he(Np,{fieldData:e,onChange:t})}]}]:[{type:o.Paper,fieldBottomMargin:"1",sx:{padding:"0 !important"},isVisible:e=>e.contact_files&&e.contact_files.length,child:{type:o.Component,element:({contact_files:e,onChange:t})=>{const i=zt({title:Up,msg:Op});return he(Ct,{children:null==e?void 0:e.map(((a,o)=>he(bt,{disableGutters:!0,secondaryAction:he(st,{onClick:()=>{const o=Ft(e)||[];i().then((e=>{e&&t({contact_files:o.filter((e=>e!==a))})}))},children:he(Lt,{})}),children:he(Me,{onClick:async()=>{const e=await bs.appwriteService.getFileURL(a),t=await bs.appwriteService.readFileName(a);yt(e,t)},children:he(Le,{payload:a,Loader:Hp,children:async e=>{const t=await bs.appwriteService.readFileName(e);return he(ft,{primary:t})}})})},"".concat(a,"-").concat(o))))})}}},{type:o.Paper,fieldBottomMargin:"0",fields:[{type:o.Component,element:({_fieldData:e,onChange:t})=>he(Np,{fieldData:e,onChange:t})}]}],Kp=[{type:o.Init,name:"contact_phones",defaultValue:null},{type:o.Init,name:"contact_names",defaultValue:null},{type:o.Fragment,isVisible:e=>!e.kontakt||!!Ee(e.kontakt,"Физическое лицо"),fields:[{type:o.Group,fieldBottomMargin:"0",fieldRightMargin:"1",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",phoneHidden:!0,tabletHidden:!0,fields:[Wp("Физическое лицо"),Gp("desktop")]},{type:o.Group,fieldBottomMargin:"0",fieldRightMargin:"0",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",desktopHidden:!0,fields:[Wp("Физическое лицо"),Gp("desktop")]},{type:o.Group,fieldBottomMargin:"1",fieldRightMargin:"0",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",fields:[$p("Физическое лицо"),Gp("mobile"),...Yp("Физическое лицо")]}]},{type:o.Fragment,isVisible:e=>!!Ee(e.kontakt,"Юридическое лицо"),fields:[{type:o.Group,fieldBottomMargin:"0",fieldRightMargin:"1",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",phoneHidden:!0,tabletHidden:!0,fields:[Wp("Юридическое лицо"),Gp("desktop")]},{type:o.Group,fieldBottomMargin:"0",fieldRightMargin:"0",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",desktopHidden:!0,fields:[Wp("Юридическое лицо"),Gp("desktop")]},{type:o.Group,fieldBottomMargin:"1",fieldRightMargin:"0",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",fields:[$p("Юридическое лицо"),Gp("mobile"),...Yp("Юридическое лицо")]}]},{type:o.Component,features:["withBottomSaveButton"],watchOneContext:!0,element:Vp}];window.contact_fields=Kp;const Xp=[{type:He.Link,isVisible:()=>!!bs.routerService.previousPath,action:"list-action",label:he(De,{sx:{display:"block"}})},{type:He.Link,action:"list-action",label:"База объектов"},{type:He.Link,action:"list-action",isVisible:({id:e})=>"create"!==e,label:"Редактирование контакта"},{type:He.Link,action:"list-action",isVisible:({id:e})=>"create"===e,label:"Создание контакта"},{type:He.Button,isDisabled:({hasChanged:e})=>!e,action:"save-action",label:"Сохранить"}],Jp=[{type:He.Link,isVisible:()=>!!bs.routerService.previousPath,action:"list-action",label:he(De,{sx:{display:"block"}})},{type:He.Link,action:"list-action",label:"База объектов"},{type:He.Link,action:"list-action",label:"Просмотр контакта"},{type:He.Button,isDisabled:({payload:{permissions:e}})=>!e.hasApartmentUpdatePermission,action:"edit-action",label:"Редактировать"}],Zp=[{action:"show-contact-action",label:"Показать карточку контакта"}],Qp=async e=>{const{contact_id:t}=await bs.apartmentViewService.read(e);return t},eu="real-estate__headerRoot",tu=[{type:He.Link,isVisible:()=>!!bs.routerService.previousPath,action:"list-action",label:he(De,{sx:{display:"block"}})},{type:He.Link,action:"list-action",label:"База объектов"},{type:He.Link,action:"list-action",label:"Просмотр служебных комментариев"}],iu=async e=>{const{moment_stamp:t,from_user_id:i,to_user_id:a,contact_id:o,from_user_fio:l,to_user_fio:n,contact_fio:s,title:d,$createdAt:c,$updatedAt:m,is_call:p,is_meet:u,time_stamp:h,$id:y,type:b}=e,_=r(c).format("HH:mm DD/MM/YYYY");let v=l||"Не указано",f=n||"Не указано",g="Не указано",k=s||"Не указано",w="Не указано";const S=await Sr(e);if(null===S)throw new Error("TaskBoard fetchCard unknown status");return t&&(w=yn(t).format("DD/MM/YYYY")),t&&"number"==typeof h&&(w+=" ",w+=bn(h).format("HH:mm")),d&&(g=d),{id:y,type:b,completionTime:w,fromWhom:v,toWhom:f,task:g,metadata_task:g,createdDate:_,updatedAt:m,metadata_created_at:r(c).format("DD/MM/YYYY"),metadata_updated_at:r(m).format("DD/MM/YYYY"),moment_stamp:t,toUserId:a,isCall:p,isMeet:u,contact_id:o,time_stamp:h,status:S,contact:k}},au=ue.forwardRef((({item:e,loading:t,className:i,style:a},o)=>he("div",{className:i,style:a,ref:o,children:he(ai,{sx:{position:"relative",overflow:"hidden"},children:[he(bt,{children:[he(_t,{children:he(Le,{loading:t,payload:e,Loader:()=>he(fi,{variant:"circular",width:40,height:40}),children:async({user_id:e})=>{const t=await bs.userViewService.tryRead(e),i=(null==t?void 0:t.avatar)?await bs.appwriteService.getImageURL(t.avatar):void 0;return he(it,{alt:null==t?void 0:t.email,src:i,sx:{height:40,mr:2,width:40}})}})}),he(Le,{loading:t,payload:e,Loader:()=>he(Pe,{flex:1,children:[he(fi,{sx:{mb:1},variant:"rectangular",width:210,height:22}),he(fi,{variant:"rectangular",width:170,height:22})]}),children:async({user_id:e})=>{const t=await bs.userViewService.tryRead(e),i=[null==t?void 0:t.first_name,null==t?void 0:t.last_name,null==t?void 0:t.middle_name].filter((e=>e)).join(" "),a=await(async()=>{var e;if(null==(e=null==t?void 0:t.user_role)?void 0:e.length){const e=await bs.roleViewService.tryRead(t.user_role[0]);return(null==e?void 0:e.title)||""}return""})();return he(ft,{primary:i,secondary:a})}}),he(Ne,{children:r(e.$createdAt).format("HH:mm DD/MM/YYYY")})]}),!!e.comment&&he(Te,{component:"pre",sx:{ml:1,mr:1,mb:1},children:he(kt,{config:rd,handler:()=>e.comment})}),he(Te,{sx:{position:"absolute",top:0,left:0,bottom:0,width:6,zIndex:1,background:"skyblue"}})]})}))),ou=[{type:He.Button,action:"reassign-action",isDisabled:async()=>!(await bs.featureService.hasFeature("vizhu_kontakty_pod_bronyu")),label:"Передать задачу"}],lu=[{action:"superadmin-remove-action",isVisible:async({permissions:e})=>await bs.featureService.hasFeature("superadmin"),label:"Удалить навсегда"}],nu=[{id:"history",element:({formState:e,payload:t,params:{id:i}})=>{const a=(({taskId:e})=>{const{handleLoadStart:t,handleLoadEnd:i}=$e({history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)}),{execute:a}=be((async()=>{await bs.featureService.hasFeature("superadmin")&&(await bs.cleanupService.removeTask(e),bs.routerService.push("/task"))}),{onLoadStart:t,onLoadEnd:i,fallback:bs.errorService.handleGlobalError}),o=zt({title:"Вы уверены?",msg:"Удаление задачи сотрет соответствующие записи в истории задач. Продолжить?"});return()=>o().then((e=>{e&&a()}))})({taskId:i}),[o,l]=ue.useState([]),n=qp({selectionMode:lt.Single,payload:t,features:t.permissions,title:"Выберите ответственного"}),{handleLoadStart:r,handleLoadEnd:s}=$e({history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)}),{height:d}=ea({compute:e=>(e.height-=350,e)}),{loading:c,execute:m}=be((async e=>{if(e){const e=await bs.taskHistoryViewService.findAllByTaskId(i);l(e)}}),{fallback:bs.errorService.handleGlobalError,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)}),{execute:p}=be((async()=>{const{title:e}=await bs.taskViewService.read(i),t=await n();t&&t[0]&&await bs.taskRequestService.reassignClientTask(i,t[0],"",e)}),{onLoadStart:r,onLoadEnd:s,fallback:bs.errorService.handleGlobalError});ue.useEffect((()=>bs.taskHistoryViewService.reloadSubject.subscribe((()=>{m(!0)}))),[]);return he(_e,{children:[he("div",{className:"real-estate__headerRoot",children:he(Xe,{payload:e,items:ou,actions:lu,onAction:e=>{"list-action"===e&&bs.routerService.back("/task"),"reassign-action"===e&&p(),"superadmin-remove-action"===e&&a()}})}),he(Wi,{sx:{height:d},minHeight:72,loading:c,onDataRequest:e=>{m(e)},children:he(Pe,{spacing:1,children:o.map((e=>he(au,{loading:c,status:"info",item:e},e.$id)))})})]})},isActive:e=>((e,t)=>e.some((e=>e.includes(t))))(["/task_history"],e)}],ru=G(),su=Fs()((e=>({root:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",minHeight:150},box:{display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(1),flex:1},box_list:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 0",borderBottom:"1px solid gray",width:"100%",gap:"10px"},created_time:{alignSelf:"flex-start"},key:{color:"grey",fontSize:"14px"},value:{textAlign:"end",fontSize:"15px"},btn:{borderRadius:"25px"},adjust:{maxHeight:10,minHeight:10,flex:1},task:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"150px"}}))),du=ue.forwardRef((({id:e,className:t,style:i,completionTime:a,fromWhom:o,toWhom:l,task:n,createdDate:r,contact:s,type:d,status:c,isCall:m,isMeet:p,contact_id:u,payload:h,onChangeStatus:y,onDrag:b},_)=>{const{classes:v,cx:f}=su(),g=ip({payload:h}),k=(({payload:e})=>{const{push:t,pop:i}=Kt(),{pickData:a,render:o}=Xt({withActionButton:!0,animation:"none",title:"История задачи",history:ru,routes:nu,AfterTitle:({onClose:e})=>he(Be,{size:"small",onClick:e,children:he(Ye,{})}),fetchState:async e=>[await bs.contactViewService.tryRead(e)],mapInitialData:(e,[t])=>({contact:t}),mapPayload:()=>e,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),onSubmit:()=>(i(),!0),submitLabel:"Закрыть"});return e=>{t({id:"task_history",render:o,onInit:()=>{ru.push("/task_history")},onMount:()=>{a(e)}})}})({payload:h}),[w,S]=ue.useState(null),[z,V]=ue.useState(null),{execute:x,loading:A}=be((async e=>{await y(e)}),{onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),fallback:bs.errorService.handleGlobalError}),T=ue.useMemo((()=>{const e=gr.findIndex((e=>e===c)),t=gr.filter(((t,i)=>i<e)).filter((e=>"Просрочено"!==e)).filter((e=>"Выполненные задачи"!==e)).reverse();return t.push("Просрочено"),t.push("Выполненные задачи"),t}),[c]),C=ue.useMemo((()=>{const e=gr.findIndex((e=>e===c)),t=gr.filter(((t,i)=>i>e)).filter((e=>"Просрочено"!==e)).filter((e=>"Выполненные задачи"!==e));return t.push("Просрочено"),t.push("Выполненные задачи"),t}),[c]),F=ue.useMemo((()=>!bs.featureService.features.includes("vizhu_kontakty_pod_bronyu")&&("Выполненные задачи"===c||"Просрочено"===c)),[c]);return he("div",{"data-dealid":e,className:Ce(v.root,t),onDrag:()=>b(e),style:i,ref:_,draggable:!F,children:[he(ai,"Клиент"===d?{className:v.box,children:[he(Pe,{justifyContent:"space-between",alignItems:"center",direction:"row",width:"100%",children:[he(Be,{onClick:({currentTarget:e})=>{S(e),V(null)},disabled:!T.length||A||F,size:"small",children:he(De,{})}),he(ta,{anchorEl:w,open:!!w,onClose:()=>S(null),children:T.map(((e,t)=>he(ia,{onClick:()=>{x(e),S(null)},children:e},"".concat(e,"-").concat(t))))}),he(Ut,{label:a,onClick:()=>{k(e)},variant:"filled",color:"primary"}),he(Be,{onClick:({currentTarget:e})=>{S(null),V(e)},disabled:!C.length||A||F,size:"small",children:he(Re,{})}),he(ta,{anchorEl:z,open:!!z,onClose:()=>V(null),children:C.map(((e,t)=>he(ia,{onClick:()=>{x(e),V(null)},children:e},"".concat(e,"-").concat(t))))})]}),he(Te,{className:v.box_list,children:[he(Ne,{className:v.key,children:"Кому:"}),he(Ne,{className:v.value,children:l})]}),he(Te,{className:v.box_list,children:[he(Ne,{className:v.key,children:"Контакт:"}),he(Ne,{className:v.value,children:he(gi,{href:"#",onClick:()=>u&&g(u),children:s})})]}),he(Te,{className:v.box_list,children:[he(Ne,{className:v.key,children:"Задача:"}),he(wt,{title:n,children:he(Ne,{className:f(v.value,v.task),children:n})})]}),he(Te,{sx:{display:p||p?"flex":"none",justifyContent:"space-around",gap:"10px",margin:"10px 0",width:"100%"},children:[he(Ut,{label:"Встреча",color:"info",sx:{opacity:p?1:0}}),he(Ut,{label:"Звонок",color:"warning",sx:{opacity:m?1:0}})]}),he(Te,{className:v.created_time,children:[he(Ne,{className:v.key,children:"Дата создания:"}),he(Ne,{className:v.value,children:r})]})]}:{className:v.box,children:[he(Pe,{justifyContent:"space-between",alignItems:"center",direction:"row",width:"100%",children:[he(Be,{onClick:({currentTarget:e})=>{S(e),V(null)},disabled:!T.length||A||F,size:"small",children:he(De,{})}),he(ta,{anchorEl:w,open:!!w,onClose:()=>S(null),children:T.map(((e,t)=>he(ia,{onClick:()=>{x(e),S(null)},children:e},"".concat(e,"-").concat(t))))}),he(Ut,{label:a,onClick:()=>{k(e)},variant:"filled",color:"primary"}),he(Be,{onClick:({currentTarget:e})=>{S(null),V(e)},disabled:!C.length||A||F,size:"small",children:he(Re,{})}),he(ta,{anchorEl:z,open:!!z,onClose:()=>V(null),children:C.map(((e,t)=>he(ia,{onClick:()=>{x(e),V(null)},children:e},"".concat(e,"-").concat(t))))})]}),he(Te,{className:v.box_list,children:[he(Ne,{className:v.key,children:"От кого:"}),he(Ne,{className:v.value,children:o})]}),he(Te,{className:v.box_list,children:[he(Ne,{className:v.key,children:"Кому:"}),he(Ne,{className:v.value,children:l})]}),he(Te,{className:v.box_list,children:[he(Ne,{className:v.key,children:"Задача:"}),he(Ne,{className:v.value,children:he(wt,{title:n,children:he(Ne,{className:f(v.value,v.task),children:n})})})]}),he(Te,{className:v.created_time,children:[he(Ne,{className:v.key,children:"Дата создания:"}),he(Ne,{className:v.value,children:r})]})]}),he("div",{className:v.adjust})]})})),cu=Fs()({transparentHeader:{background:"transparent !important",boxShadow:"none !important"}}),mu=[{type:o.Box,sx:{display:"grid",gridTemplateColumns:"auto auto 1fr auto auto","& > .MuiGrid-root":{minWidth:"275px"},mt:-1},fields:[{type:o.Choose,fieldBottomMargin:"0",fieldRightMargin:"2",choose:async(e,t)=>{t.pickData(e.user_id?[e.user_id]:[]);const i=await t.resultSubject.toPromise();if(i&&i.length){const[e]=i;return e}return null},tr:async e=>{const t=await bs.userViewService.tryRead(e);return[null==t?void 0:t.last_name,null==t?void 0:t.first_name,null==t?void 0:t.middle_name].filter((e=>e)).join(" ")||(null==t?void 0:t.$id)||""},name:"user_id",placeholder:"Ответственный",title:""},{type:o.Combo,fieldBottomMargin:"0",fieldRightMargin:"5",name:"task_type",title:"",placeholder:"Тип задачи",itemList:["Внутренняя","Клиент"]},{type:o.Div},{type:o.Component,fieldRightMargin:"2",sx:{maxWidth:"185px 1important",minWidth:"185px !important"},element:({payload:{onCreateTask:e}})=>he(pt,{sx:{mt:1,mr:1,whiteSpace:"nowrap"},onClick:e,size:"small",variant:"contained",children:"Создать задачу"})},{type:o.Text,fieldBottomMargin:"0",name:"search",title:"",placeholder:"Поиск",leadingIcon:aa,trailingIcon:()=>he(bi,{sx:{opacity:.5}}),trailingIconClick(e,t,i){e&&i("")}}]}],pu=({withTransparentHeader:e,onChange:t,onCreateTask:i,className:a,style:o,data:l,sx:n,payload:r})=>{const{classes:s,cx:d}=cu(),{pickData:c,render:m,resultSubject:p}=id({payload:r});return he(ai,{className:d(a,{[s.transparentHeader]:e}),style:o,sx:{minHeight:48,...n},children:[he(_i,{sx:{height:"100%"},hideOverflowY:!0,children:he(Te,{sx:{p:1,display:"flex",alignItems:"center",justifyContent:"stretch"},children:he(Je,{fields:mu,handler:()=>l,onChange:(e,i)=>{i||t(e)},payload:()=>({...r,pickData:c,resultSubject:p,onCreateTask:i}),fieldDebounce:el})})}),m()]})},uu=(e,...t)=>{let i=!0;if(e instanceof Set)for(const a of t)i=i&&e.has(a);else for(const a of t)i=i&&!!String(e[a]||"").length;return i},hu=[{type:o.Text,columns:"6",fieldBottomMargin:"1",shouldRecompute:()=>!1,compute:async()=>{const e=bs.appwriteService.currentUser.$id,t=await bs.userViewService.tryRead(e);return[null==t?void 0:t.last_name,null==t?void 0:t.first_name,null==t?void 0:t.middle_name].filter((e=>e)).join(" ")},name:"from_user_id",title:"От кого"},{type:o.Choose,columns:"6",fieldBottomMargin:"1",choose:async(e,t)=>{t.pickUser(e.to_user_id?[e.to_user_id]:[]);const i=await t.userResultSubject.toPromise();if(i&&i.length){const[e]=i;return e}return null},tr:async e=>{const t=await bs.userViewService.tryRead(e);return[null==t?void 0:t.last_name,null==t?void 0:t.first_name,null==t?void 0:t.middle_name].filter((e=>e)).join(" ")||(null==t?void 0:t.$id)||""},name:"to_user_id",defaultValue:()=>bs.appwriteService.currentUser.$id,title:"Кому",placeholder:"Не выбрано"},{type:o.Date,columns:"6",fieldBottomMargin:"1",name:"date",title:"Дата выполнения",labelShrink:!0,placeholder:"Новые задачи"},{type:o.Time,columns:"6",fieldBottomMargin:"1",name:"time",title:"",labelShrink:!0,placeholder:"Не выбрано"},{type:o.Box,noBaseline:!0,isVisible:e=>"Клиент"===e.type,sx:{display:"grid",gridTemplateColumns:"1fr auto auto"},fields:[{type:o.Choose,sx:{minWidth:"100% !important"},fieldBottomMargin:"0",fieldRightMargin:"3",columns:"4",choose:async(e,t)=>{t.pickContact(e.contact_id?[e.contact_id]:[]);const i=await t.contactResultSubject.toPromise();if(i&&i.length){const[e]=i;return e}return null},tr:async e=>{const t=await bs.contactViewService.tryRead(e);return(null==t?void 0:t.fio)||(null==t?void 0:t.id)||""},name:"contact_id",title:"",placeholder:"Контакт"},{type:o.Checkbox,fieldBottomMargin:"0",name:"is_call",title:"Звонок"},{type:o.Checkbox,fieldBottomMargin:"0",name:"is_meet",title:"Встреча"}]},{type:o.Text,fieldBottomMargin:"1",title:"",placeholder:"Задача",name:"title"},{type:o.Text,fieldBottomMargin:"1",title:"",placeholder:"Комментарий",inputRows:3,name:"comment"},{type:o.Radio,fieldBottomMargin:"0",name:"type",radioValue:"Внутренняя",defaultValue:"Внутренняя",title:"Внутренняя"},{type:o.Radio,fieldBottomMargin:"0",name:"type",radioValue:"Клиент",title:"Клиент"}],yu=({payload:e,contactId:t})=>{const{handleLoadStart:i,handleLoadEnd:a}=$e({history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)}),{pickData:o,render:l,resultSubject:n}=id({payload:e}),{pickData:r,render:s,resultSubject:d}=$c({payload:e}),c=We({fields:hu,title:"Создать задачу",payload:{...e,pickUser:o,userResultSubject:n,pickContact:r,contactResultSubject:d},handler:()=>({from_user_id:bs.appwriteService.currentUser.$id,...t&&{contact_id:t,type:"Клиент"}})}),{execute:m}=be((async()=>{const e=await c().toPromise();if(e&&"Внутренняя"===e.type){const{to_user_id:t,comment:i,date:a,time:o,title:l}=e,n=a?qi.dateStamp(a):null,r=o?qi.timeStamp(o):null;if(!uu(e,"to_user_id","title"))return void bs.alertService.notify("Укажите все поля");await bs.taskRequestService.createTodoTask(t,n,r,l,i)}if(e&&"Клиент"===e.type){const{to_user_id:t,comment:i,date:a,time:o,contact_id:l,title:n,is_meet:r,is_call:s}=e;if(!uu(e,"to_user_id","contact_id"))return void bs.alertService.notify("Укажите все поля");const d=a?qi.dateStamp(a):null,c=o?qi.timeStamp(o):null;await bs.taskRequestService.createClientTask(t,l,d,c,n,!!s,!!r,i)}}),{onLoadStart:i,onLoadEnd:a,fallback:bs.errorService.handleGlobalError});return{execute:m,render:()=>he(_e,{children:[s(),l()]})}},bu=[{type:o.Group,fieldBottomMargin:"0",fieldRightMargin:"0",noBaseline:!0,fields:[{type:o.Component,sx:{mb:-1},element:()=>he(Ne,{variant:"caption",sx:{opacity:.8},children:"Перенос с"})},{type:o.Group,fieldRightMargin:"0",fieldBottomMargin:"1",fields:[{type:o.Text,fieldBottomMargin:"0",columns:"6",compute:e=>{const t=e.fromStatus;return"Выполненные задачи"===t||"Просрочено"===t||"Новые задачи"===t?t:yn(e.fromStamp||un()).format("DD/MM/YYYY")}},{type:o.Time,sx:{pointerEvents:"none",opacity:.5},fieldBottomMargin:"0",columns:"6",compute:({fromTimeStamp:e})=>"number"==typeof e?bn(e).format("HH:mm"):null,title:"",placeholder:"Не указано"}]},{type:o.Component,sx:{mb:-1},element:()=>he(Ne,{variant:"caption",sx:{opacity:.8},children:"Перенос на"})},{type:o.Group,fieldRightMargin:"0",fieldBottomMargin:"1",fields:[{type:o.Text,fieldBottomMargin:"0",columns:"6",compute:e=>{const t=e.toStatus;return"Выполненные задачи"===t||"Просрочено"===t||"Новые задачи"===t?t:yn(h.get(kr,t)||un()).format("DD/MM/YYYY")}},{type:o.Time,fieldBottomMargin:"0",columns:"6",name:"time_stamp",title:"",placeholder:"Не указано"}]}]},{type:o.Text,name:"comment",title:"",placeholder:"Комментарий",inputRows:3}],_u=Fs()((e=>({root:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",height:"calc(100vh - 85px)",width:"100%",["& .".concat("react-declarative__scrollViewTarget")]:{transform:"rotateX(180deg)","& > div > div":{marginBottom:"25px",transform:"rotateX(180deg)"}}},container:{position:"relative",flex:1,display:"flex",alignItems:"stretch",justifyContent:"stretch"},content:{flex:1,display:"flex"},group:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",maxWidth:"276px",minWidth:"276px",gap:10,padding:10,marginRight:10},inactiveGroup:{background:"#E1E2E6"},activeGroup:{background:ze(e.palette.primary.main,.5)},list:{flex:1,minWidth:"256px",height:"100%"},loading:{pointerEvents:"none"}}))),vu=["fromWhom","toWhom","task","contact","type","metadata_created_at","metadata_updated_at","metadata_task"],fu={user_id:"",tip_klienta:null,search:""},gu=({withTransparentHeader:e,dealCardMap:t,payload:i,contactId:a})=>{const{classes:o}=_u(),[l,n]=oa((()=>({...fu,user_id:"/task_mine"===bs.routerService.location.pathname?bs.appwriteService.currentUser.$id:void 0}))),[s,d]=la((()=>({user_id:l.user_id,tip_klienta:JSON.parse(l.tip_klienta),search:l.search})));At((()=>{n(s.current)}),[s.current]);const[c,m]=ue.useState((()=>new Map(t))),p=(({payload:e})=>{const{handleLoadStart:t,handleLoadEnd:i}=$e({history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)}),a=We({large:!0,payload:e,fields:bu}),{execute:o}=be((async({fromStamp:e,toStatus:t,fromStatus:i,fromTimeStamp:o,type:l,id:n,call:r,meet:s})=>{var d;const c=await a({title:"Перенос задачи",handler:()=>({fromStamp:e,toStatus:t,fromStatus:i,fromTimeStamp:o,time_stamp:"number"==typeof o?bn(o).format("HH:mm"):null})}).toPromise();if(c){const{to_user_id:e,title:a,contact_id:o}=await bs.taskViewService.read(n),m=h.get(kr,t)||null,p=(null==(d=qi.parseTime(c.time_stamp))?void 0:d.toStamp())||null;"Внутренняя"===l&&await bs.taskRequestService.updateTodoTask(n,e,i,m,p,"Выполненные задачи"===t,a,c.comment),"Клиент"===l&&await bs.taskRequestService.updateClientTask(n,e,i,o,m,p,"Выполненные задачи"===t,r,s,a,c.comment)}}),{onLoadStart:t,onLoadEnd:i,fallback:bs.errorService.handleGlobalError});return async e=>await o(e)})({payload:i}),{execute:u,render:y}=yu({payload:i,contactId:a}),b=ue.useMemo((()=>{const e=[];for(const t of c.values())e.push(t);return e.flatMap((e=>e))}),[c]),_=Dt(c),v=ue.useRef(null),[f,g]=ue.useState(null),k=async(e,t)=>{const i=b.find((t=>t.id===e));if(!i)return;const{status:a,type:o,moment_stamp:l,time_stamp:n,isCall:r,isMeet:s}=i;a!==t&&await p({id:e,type:o,fromStamp:l,toStatus:t,fromTimeStamp:n,fromStatus:a,call:!!r,meet:!!s})},{loading:w,execute:S}=be((async([e])=>{g(null),await k(v.current,e)}),{onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),fallback:bs.errorService.handleGlobalError});ue.useEffect((()=>bs.taskViewService.updateSubject.subscribe(I((async([e,t])=>{const i=new Map(_.current);for(const o of gr){const t=i.get(o)||[];i.set(o,t.filter((t=>t.id!==e)))}const a=await Sr(t);for(const o of gr)if(o===a){const e=i.get(o)||[],a=await iu(t);a&&e.unshift(a),i.set(o,e)}m(i)})))),[]),ue.useEffect((()=>bs.taskViewService.removeSubject.subscribe(I((async e=>{const t=new Map(_.current);for(const i of gr){const a=t.get(i)||[];t.set(i,a.filter((t=>t.id!==e)))}m(t)})))),[]),ue.useEffect((()=>bs.taskViewService.createSubject.subscribe(I((async e=>{if(a&&e.contact_id!==a)return;const t=new Map(_.current),i=await Sr(e);for(const a of gr)if(a===i){let i=t.get(a)||[];i=i.filter((t=>t.id!==e.$id));const o=await iu(e);null!==o&&i.unshift(o),t.set(a,i)}m(t)})))),[]);const z=w;return he(Te,{className:Ce(o.root,{[o.loading]:z}),children:[he(pu,{withTransparentHeader:e,sx:{...!e&&{mb:2}},data:s.current,payload:i,onChange:d,onCreateTask:u}),he(Te,{className:o.container,children:[he(_i,{withScrollbar:!0,hideOverflowY:!0,className:o.content,children:gr.map((e=>{const t=_.current.get(e)||[];return he(Te,{onDrop:({currentTarget:t})=>S([e,t]),onDragEnd:()=>{g(null)},onDragOver:t=>{g(e),t.preventDefault()},className:Ce(o.group,{[o.activeGroup]:f===e,[o.inactiveGroup]:f!==e}),children:[he(Ne,{variant:"h6",fontWeight:"bold",children:e}),he(Wi,{className:o.list,minRowHeight:150,children:t.sort((({updatedAt:e},{updatedAt:t})=>r(e).isBefore(t)?1:-1)).filter((e=>{const{user_id:t}=s.current;return!t||e.toUserId===t})).filter((e=>{const{task_type:t}=s.current;return!(null==t?void 0:t.length)||e.type===t[0]})).filter((e=>{const{search:t}=s.current;return!t||na(e,t,...vu)})).map((e=>he(du,{payload:i,onChangeStatus:async t=>{await k(e.id,t)},onDrag:()=>{v.current=e.id},...e},e.id)))})]})}))}),y()]})]})},ku=async e=>{const t=new Map;return await Promise.all(gr.map((async i=>{const a=e?await bs.taskViewService.findByTaskStatusAndContactId(i,e):await bs.taskViewService.findByTaskStatus(i),o=await Promise.all(a.map((async e=>await iu(e))));t.set(i,o.filter((e=>null!==e)))}))),t},wu=({contactId:e,payload:t,withTransparentHeader:i})=>he(ra,{state:async()=>[await ku(e)],fallback:bs.errorService.handleGlobalError,children:async([a])=>he(gu,{withTransparentHeader:i,dealCardMap:a,contactId:e,payload:t})}),Su=[{type:He.Link,isVisible:()=>!!bs.routerService.previousPath,action:"list-action",label:he(De,{sx:{display:"block"}})},{type:He.Link,action:"list-action",label:"База объектов"},{type:He.Link,action:"list-action",label:"Просмотр задач"}],zu=[{id:"list",element:({payload:e})=>he(Ji,{history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),routes:Sp,payload:e}),isActive:e=>ws(["/apartment","/apartment_rent","/apartment_sell","/apartment_archive","/apartment_remove"],e),isAvailable:()=>!1},{id:"create",element:({payload:e})=>{const{elementRef:t,size:i}=Di(),a=ip({payload:e}),[o,l]=ue.useState((()=>({activeStep:0,contact_id:null,fio:"",telefon:"",tip_klienta:null}))),[n,r]=ue.useState([]),[s,d]=ue.useState(!1),[c,m]=ue.useState(!1),p=ue.useMemo((()=>new Date(Date.now()+1e4)),[o.activeStep]);ue.useEffect((()=>{m(!1)}),[o.activeStep]);const u=e=>l((t=>({...t,activeStep:e}))),{activeStep:h}=o,{classes:y}=lp(),{handleLoadStart:b,handleLoadEnd:_,loading:v,unblock:f}=$e({history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)}),g=Dt(o),{execute:k}=be((async()=>{try{let{contact_id:e,fio:t,telefon:i,tip_klienta:a}=g.current;if(!e){e=(await bs.contactViewService.create({fio:t,telefon:i,tip_klienta:a,"data-sozdaniya_klienta":qi.currentDate()})).$id}const{id:o}=await bs.apartmentViewService.create({contact_id:e});f(),bs.routerService.push("/apartment_edit/".concat(o),{viewRedirectFlag:!0})}catch(e){bs.alertService.notify(jr(e))}}),{onLoadStart:b,onLoadEnd:_}),w=async()=>{if(d(!0),o.fio||o.telefon){if(0===h){const{rows:e,total:t}=await bs.contactRequestService.findDuplicates(o.telefon);r(e),u(0===t?2:1)}1===h&&u(2),2===h&&await k()}},S=()=>{let e=!1;return 1===h&&(e=e||!c),e=e||v,e=e||3===h,e};return he(Oi,{children:[he(Xe,{items:op}),he(ai,{className:y.root,children:[he(Pi,{className:y.header,activeStep:h,children:[he(Ei,{completed:h>0,children:he(Ni,{children:"Первичные данные"})},0),he(Ei,{completed:h>1,children:he(Ni,{children:"Поиск дубликатов"})},1),he(Ei,{completed:h>2,children:he(Ni,{children:"Создание объекта"})},2)]}),he("div",{className:y.adjust}),he(Te,{ref:t,className:y.content,children:0===h?he(Je,{sx:{pl:1,pr:1,pt:2,pb:3},handler:o,onChange:l,dirty:s,fields:ap}):1===h?he(Wi,{sx:{height:i.height},component:Ct,minRowHeight:54,children:n.map((({fio:e,telefon:t,$id:i,tip_klienta:n,system_created_by:r,index:s},d)=>he(Me,{disableRipple:!0,className:Ce({[y.listItemBackground]:d%2==1}),onClick:()=>{l((e=>({...e,contact_id:i,activeStep:2})))},dense:!0,children:[he(Ui,{children:he(Hi,{edge:"start",checked:o.contact_id===i,sx:{marginLeft:"0 !important"},disableRipple:!0})}),he(ft,{primary:e,secondary:he(Le,{Loader:np,children:async()=>{const e=await bs.userViewService.tryRead(r),t=e?"Создал "+[e.last_name,e.first_name,e.middle_name].filter((e=>e)).join(" "):"";return["№".concat(s),t,n].filter((e=>e)).join(", ")}})}),he(Ht,{variant:"outlined",onClick:e=>{e.preventDefault(),e.stopPropagation(),a(i)},sx:{ml:3},children:"Показать контакт"})]},d)))}):2===h?he(Je,{sx:{pl:1,pr:1,pt:2,pb:3},handler:o,dirty:s,fields:ap}):null}),he(Pe,{sx:{pl:1,pr:1,pb:1},justifyContent:"space-between",flexDirection:"row",children:[he(pt,{disabled:v||0===h,fallback:bs.errorService.handleGlobalError,onClick:()=>{l((e=>({...e,contact_id:null}))),0===n.length?u(0):u(h-1)},sx:{mt:1},variant:"contained",onLoadStart:b,onLoadEnd:_,children:"Назад"}),he(pt,1===h?{disabled:S(),fallback:bs.errorService.handleGlobalError,onClick:w,sx:{mt:1},variant:"contained",onLoadStart:b,onLoadEnd:_,children:he($i,{expireAt:p,onExpire:()=>m(!0),children:"Не вижу дубликат"})}:2===h?{disabled:S(),fallback:bs.errorService.handleGlobalError,onClick:w,sx:{mt:1},variant:"contained",onLoadStart:b,onLoadEnd:_,children:"Создать объект"}:{disabled:S(),fallback:bs.errorService.handleGlobalError,onClick:w,sx:{mt:1},variant:"contained",onLoadStart:b,onLoadEnd:_,children:"Далее"})]})]})]})},isActive:e=>ws(["/apartment/create"],e),isAvailable:()=>!1},{id:"object",element:({beginSave:e,onChange:t,payload:i,data:a,formState:o})=>{const l=Ke(a);return he(_e,{children:[he(Xe,{items:jp,payload:o,onAction:t=>{"list-action"===t&&bs.routerService.back("/apartment"),"save-action"===t&&e()}}),he(gs,{}),he(dp,{payload:i,mode:i.menuMode,children:[he(Je,{fields:Mp,changeSubject:l,features:()=>({...i.permissions,withBottomSaveButton:!0}),payload:()=>({...i,beginSave:e}),context:o,onChange:t,handler:()=>a}),he(Ze,{}),he(Qe,{})]})]})},isActive:e=>ws(["/apartment_edit/:id","/apartment_edit/:id/object"],e)},{id:"documents",element:({onChange:e,payload:t,beginSave:i,formState:a,data:o})=>{const{handleLoadStart:l,handleLoadEnd:n,loading:r}=$e({history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)});return he(_e,{children:[he(Xe,{items:cp,payload:a,onAction:e=>{"list-action"===e&&bs.routerService.back("/apartment"),"save-action"===e&&i()}}),he(gs,{}),he(dp,{payload:t,mode:t.menuMode,children:[he(ai,{sx:{p:1},children:he(Ii,{disabled:r,accept:"*",multiple:!0,items:o,tr:async e=>await bs.appwriteService.tryReadFileName(e)||e,fallback:bs.errorService.handleGlobalError,onClick:async e=>{const t=await bs.appwriteService.getFileURL(e),i=await bs.appwriteService.readFileName(e);yt(t,i)},onUpload:e=>bs.appwriteService.uploadFile(e),onChange:async t=>{e(t)},onLoadStart:l,onLoadEnd:n})}),he(Ze,{}),he(Qe,{})]})]})},isActive:e=>ws(["/apartment_edit/:id/documents"],e)},{id:"owner_contact",element:({data:e,payload:t,formState:i,onChange:a,beginSave:o})=>{const l=Ke(e);return he(_e,{children:[he(Xe,{items:Xp,onAction:e=>{"list-action"===e&&bs.routerService.back("/apartment"),"save-action"===e&&o()},payload:i}),he(gs,{}),he(dp,{payload:t,mode:t.menuMode,children:[he(Je,{handler:()=>e,onChange:a,features:()=>({...t.permissions,withBottomSaveButton:!0}),payload:()=>({...t,beginSave:o}),context:i,changeSubject:l,fields:Kp}),he(Ze,{}),he(Qe,{})]})]})},isActive:e=>ws(["/apartment_edit/:id/owner_contact"],e)},{id:"object",element:({params:{id:e},formState:t,payload:i,data:a})=>{const o=(({apartmentId:e})=>{const{handleLoadStart:t,handleLoadEnd:i}=$e({history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)}),{execute:a}=be((async()=>{await bs.featureService.hasFeature("superadmin")&&(await bs.cleanupService.removeApartment(e),bs.routerService.push("/apartment"))}),{onLoadStart:t,onLoadEnd:i,fallback:bs.errorService.handleGlobalError}),o=zt({title:"Вы уверены?",msg:"Удаление объекта сотрет соответствующие записи в объектах недвижимости, сделках. Продолжить?"});return()=>o().then((e=>{e&&a()}))})({apartmentId:e}),{pickData:l,render:n}=Ge({AfterTitle:({onClose:e})=>he(Be,{size:"small",onClick:e,children:he(Ye,{})}),fields:Mp,payload:i,features:i.permissions,outlinePaper:!0,handler:async()=>await bs.apartmentViewService.tryRead(e),fullScreen:!0,title:"Редактировать",onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),onSubmit:async(t,i)=>{let a=!0;try{t&&(await bs.apartmentViewService.update(e,await bs.polishService.polishApartment(t,i)),i.hasAdvertising&&await bs.advertisingRequestService.updateAdvertisingByApartment(e,t))}catch(o){a=!1;const e=jr(o);return bs.alertService.notify(e),!1}finally{return a}},submitLabel:"Сохранить"}),r=qp({title:"Поделиться объектом",payload:i,features:i.permissions,selectedRows:a.system_allowance||[]}),{execute:s}=be((async t=>{if("list-action"===t&&bs.routerService.back("/apartment"),"edit-action"===t&&l(),"toggle-only-for-owner-action"===t&&await bs.apartmentViewService.toggleOnlyForOwner(e),"pick-allowance-action"===t){const t=await r();if(!t)return;await bs.apartmentViewService.updateAllowance(e,t)}"superadmin-remove-action"===t&&o()}),{onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)}),d=Ke(a);return he(_e,{children:[he(Xe,{payload:t,items:Pp,actions:Ep,onAction:async e=>{await s(e)}}),he(gs,{}),he(Vs,{payload:i,mode:i.menuMode,children:[he(Je,{dirty:!0,readonly:!0,changeSubject:d,features:i.permissions,payload:i,fields:Nm,handler:()=>a}),he(Ze,{}),he(Qe,{})]}),n()]})},isActive:e=>ws(["/apartment_view/:id","/apartment_view/:id/object"],e)},{id:"owner_contact",element:({params:{id:e},payload:t,formState:i,data:a})=>{const o=Ke(a),{pickData:l,render:n}=Ge({AfterTitle:({onClose:e})=>he(Be,{size:"small",onClick:e,children:he(Ye,{})}),fields:Kp,payload:t,features:t.permissions,outlinePaper:!0,handler:async()=>{const t=await Qp(e);return await bs.contactViewService.tryRead(t)},fullScreen:!0,title:"Редактировать",onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),onSubmit:async i=>{let a=!0;try{if(i){const a=await Qp(e);await bs.contactViewService.update(a,await bs.polishService.polishContact(i,t))}}catch(o){a=!1;const e=jr(o);return bs.alertService.notify(e),!1}finally{return a}},submitLabel:"Сохранить"});return he(_e,{children:[he(Xe,{items:Jp,actions:Zp,payload:i,onAction:async e=>{"list-action"===e&&bs.routerService.back("/apartment"),"edit-action"===e&&l(),"show-contact-action"===e&&bs.routerService.push("/contact_view/".concat(i.data.object.contact_id))}}),he(gs,{}),he(Vs,{payload:t,mode:t.menuMode,children:[he(Je,{changeSubject:o,readonly:!0,handler:()=>a,features:t.permissions,fields:Sd,payload:t}),he(Ze,{}),he(Qe,{})]}),n()]})},isActive:e=>ws(["/apartment_view/:id/owner_contact"],e)},{id:"documents",element:({params:{id:e},data:t,payload:i,formState:a})=>{const{render:o,pickFiles:l}=mp({data:t,onSubmit:async t=>{await bs.apartmentViewService.update(e,{...a.data.object,apartment_files:t})}});return he(_e,{children:[he(Xe,{items:pp,payload:a,onAction:e=>{"list-action"===e&&bs.routerService.back("/apartment"),"edit-action"===e&&l()}}),he(gs,{}),he(Vs,{payload:i,mode:i.menuMode,children:[he(ai,{sx:{p:1},children:he(Ii,{disabled:!0,accept:"*",multiple:!0,items:t,tr:async e=>await bs.appwriteService.tryReadFileName(e)||e,fallback:bs.errorService.handleGlobalError,onClick:async e=>{const t=await bs.appwriteService.getFileURL(e),i=await bs.appwriteService.readFileName(e);yt(t,i)},onUpload:e=>bs.appwriteService.uploadFile(e)})}),he(Ze,{}),he(Qe,{})]}),o()]})},isActive:e=>ws(["/apartment_view/:id/documents"],e)},{id:"tasks",element:({formState:e,payload:t})=>he(_e,{children:[he("div",{className:"real-estate__headerRoot",children:[he(Xe,{payload:e,items:Su,onAction:e=>{"list-action"===e&&bs.routerService.back("/apartment")}}),he(gs,{})]}),he(Vs,{payload:t,mode:t.menuMode,children:he(wu,{withTransparentHeader:!0,contactId:e.data.object.contact_id,payload:t})})]}),isActive:e=>ws(["/apartment_view/:id/tasks"],e)},{id:"advertising",element:({formState:e,payload:t,data:i,params:{id:a}})=>{const o=We({large:!0,title:"Опубликовать в Telegram",fields:Gs}),{handleLoadStart:l,handleLoadEnd:n}=$e({history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)}),{execute:r}=be((async()=>{const l=await o().toPromise();if(!l)return;const n=i||await bs.advertisingRequestService.buildAdvertisingByApartment({...e.data.object,id:a}),r=await bs.dictService.getTelegramMapRaw(),s=h.get(r,l.telegram_channel),d=await $s(n,s.channel,t),c=n.apartment_images||[],m=n.advertising_images||[],p=c.filter((e=>m.includes(e)));await bs.publishService.publishTelegram(l.telegram_channel,d,p,"№".concat(n.apartment_index)),bs.alertService.notify("Пост отправлен в очередь на публикацию")}),{onLoadStart:l,onLoadEnd:n,fallback:bs.errorService.handleGlobalError}),s=async()=>i||await bs.advertisingRequestService.buildAdvertisingByApartment({...e.data.object,id:a}),{pickData:d,render:c}=Ge({AfterTitle:({onClose:e})=>he(Be,{size:"small",onClick:e,children:he(Ye,{})}),fields:Ps,handler:s,payload:t,features:t.permissions,outlinePaper:!0,fullScreen:!0,title:"Редактировать",onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),onSubmit:async e=>{let t=!0;try{e&&((null==i?void 0:i.id)?await bs.advertisingViewService.update(i.id,e):await bs.advertisingViewService.create(e))}catch(a){t=!1;const e=jr(a);return bs.alertService.notify(e),!1}finally{return t}},submitLabel:"Сохранить"}),m=Ke(i);return he(_e,{children:[he(Xe,{payload:e,items:Ys,onAction:async e=>{"list-action"===e&&bs.routerService.back("/apartment"),"edit-action"===e&&d(),"publish-action"===e&&await r()}}),he(gs,{}),he(Vs,{payload:t,mode:t.menuMode,children:[he(Je,{dirty:!0,readonly:!0,changeSubject:m,features:t.permissions,payload:t,fields:qs,handler:s}),he(Ze,{}),he(Qe,{})]}),c()]})},isActive:e=>ws(["/apartment_view/:id/advertising"],e)},{id:"history",element:({payload:e,formState:t})=>{const[i,a]=ue.useState([]),{size:o}=Di({target:document.body,selector:"main",compute:t=>{var i;let{height:a,width:o}=t;if(e.menuMode===j.Tabs){const e=document.querySelector(".".concat(Yi));a-=(null==e?void 0:e.offsetHeight)||0}return a-=(null==(i=document.querySelector(".".concat(hp)))?void 0:i.offsetHeight)||0,a-=50,a=Math.min(window.innerHeight-50,a),{width:o,height:a}}}),{loading:l,execute:n}=be((async e=>{if(e){const e=vs("id"),t=await bs.dealHistoryViewService.findAllByApartmentId(e);a(t)}}),{fallback:bs.errorService.handleGlobalError,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)});return he(_e,{children:[he("div",{className:hp,children:[he(Xe,{payload:t,items:yp,onAction:e=>{"list-action"===e&&bs.routerService.back("/apartment")}}),he(gs,{})]}),he(Vs,{payload:e,mode:e.menuMode,children:he(Wi,{sx:{height:o.height},minHeight:72,loading:l,onDataRequest:e=>{n(e)},children:he(Pe,{spacing:1,children:i.map((e=>he(up,{loading:l,status:"info",item:e},e.$id)))})})})]})},isActive:e=>ws(["/apartment_view/:id/history"],e)},{id:"service_comment",element:({payload:e,formState:t})=>{const[i,a]=ue.useState([]),{size:o}=Di({target:document.body,selector:"main",compute:t=>{var i;let{height:a,width:o}=t;if(e.menuMode===j.Tabs){const e=document.querySelector(".".concat(Yi));a-=(null==e?void 0:e.offsetHeight)||0}return a-=(null==(i=document.querySelector(".".concat(eu)))?void 0:i.offsetHeight)||0,a-=50,a=Math.min(window.innerHeight-50,a),{width:o,height:a}}}),{execute:l}=be((async()=>{const e=vs("id"),t=await bs.serviceCommentViewService.findAllByApartmentId(e);a(await Promise.all(t.map((async({$id:e,user_id:t,file_id:i,comment:a,$createdAt:o})=>{const l=await bs.userViewService.tryRead(t);if(!l)return null;const n=l.avatar?await bs.appwriteService.getImageURL(l.avatar):"",s=i?await bs.appwriteService.tryReadFileName(i):"";return{id:e,message:a,fileId:i,userId:t,displayName:[l.last_name,l.first_name,l.middle_name,r(o).format("DD.MM.YYYY / HH:mm")].join(" "),fileName:s,avatar:n}})).filter((e=>!!e)).reverse()))}),{fallback:bs.errorService.handleGlobalError,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)});ue.useEffect((()=>{l()}),[]),ue.useEffect((()=>bs.serviceCommentViewService.createSubject.subscribe((e=>{const t=vs("id");e.apartment_id===t&&l()}))),[]);return he(_e,{children:[he("div",{className:eu,children:[he(Xe,{payload:t,items:tu,onAction:e=>{"list-action"===e&&bs.routerService.back("/apartment")}}),he(gs,{})]}),he(Vs,{payload:e,mode:e.menuMode,children:he(md,{payload:e,style:{height:o.height},messages:i,onText:async e=>{const t=bs.appwriteService.currentUser.$id,i=vs("id");await bs.serviceCommentViewService.create({user_id:t,comment:e,apartment_id:i,bid_id:null,contact_id:null,file_id:null}),await l()},onFile:async(e,t)=>{const i=bs.appwriteService.currentUser.$id,a=vs("id");await bs.serviceCommentViewService.create({user_id:i,comment:e,apartment_id:a,bid_id:null,contact_id:null,file_id:t}),await l()}})})]})},isActive:e=>ws(["/apartment_view/:id/service_comment"],e)}],Vu=async e=>{if("create"===e)return{"data-sozdaniya_klienta":qi.currentDate()};const{contact_id:t}=await bs.apartmentViewService.read(e);return await bs.contactViewService.tryRead(t)},xu=({id:e="create"})=>{const t=async(t,i,{afterSave:a})=>{let o=!0;try{const o=await bs.polishService.polishApartment(h.get(t,"object")||{},i),l=await bs.polishService.polishContact(h.get(t,"owner_contact")||{},i),n=h.get(t,"documents")||[];let r=h.get(t,"object.contact_id");h.set(t,"object.apartment_files",n);const s=!!r&&await bs.contactViewService.tryRead(r);if(r&&s)await bs.contactViewService.update(r,l);else{const{id:e}=await bs.contactViewService.create(l);r=e}if(h.set(t,"object.contact_id",r),"create"===e){const{id:e}=await bs.apartmentViewService.create(o);await bs.advertisingRequestService.createAdvertisingByApartment(e,o),await a(),bs.routerService.push("/apartment_edit/".concat(e))}else await bs.apartmentViewService.update(e,o);bs.routerService.hasViewRedirectFlag()&&(await a(),bs.routerService.push("/apartment_view/".concat(e))),bs.alertService.notify("Изменения сохранены")}catch(l){o=!1;const e=jr(l);bs.alertService.notify(e)}finally{return o}},i=Ve();return ue.useEffect((()=>bs.contactViewService.updateSubject.subscribe((async([e,t])=>{const a=vs("id");if(!a)return;const o=await bs.apartmentViewService.tryRead(a);e===(null==o?void 0:o.contact_id)&&i.next(["owner_contact",t])}))),[]),ue.useEffect((()=>bs.apartmentViewService.updateSubject.subscribe((([t,a])=>{e===t&&(i.next(["object",a]),i.next(["documents",(null==a?void 0:a.apartment_files)||[]]))}))),[]),ue.useEffect((()=>bs.advertisingViewService.updateSubject.subscribe((([t,a])=>{e===a.apartment_id&&i.next(["advertising",a])}))),[]),ue.useEffect((()=>bs.advertisingViewService.createSubject.subscribe((t=>{e===t.apartment_id&&i.next(["advertising",t])}))),[]),he(ra,{state:async()=>[await Vu(e),await bs.apartmentViewService.tryRead(e),await bs.advertisingViewService.tryReadByApartmentId(e),await bs.settingsViewService.getMasterDetailMode(),await bs.permissionService.getPermissions(),await bs.featureService.getAccessLevel(),await bs.visibilityService.getFieldVisibilitySet()],reloadSubject:bs.layoutService.reloadOutletSubject,fallback:bs.errorService.handleGlobalError,children:async([a,o,l,n,r,s,d])=>he(Ji,{changeSubject:i,history:bs.routerService,waitForChangesDelay:tl,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),routes:zu,params:{id:e},initialData:{owner_contact:a,advertising:l,object:o,documents:(null==o?void 0:o.apartment_files)||[]},payload:()=>({menuMode:n,permissions:r,accessLevel:s,hasAdvertising:!!l,fieldVisibility:d,id:e}),onChange:console.log,onSubmit:t})})},Au=Se.createLoader(12),Tu=()=>he(Te,{sx:{mb:1,minHeight:32},children:he(_i,{sx:{height:"100%"},hideOverflowY:!0,children:he(Te,{sx:{display:"flex",alignItems:"center",justifyContent:"stretch",gap:1},children:[he(Ne,{variant:"subtitle2",children:"Заявки:"}),he(Le,{payload:null,Loader:Au,children:async()=>{const e=await bs.bidRequestService.getAllBidCount(),t=await bs.bidRequestService.getRentBidCount(),i=await bs.bidRequestService.getSellBidCount(),a=await bs.bidRequestService.getArchiveBidCount(),o=await bs.bidRequestService.getNewBidCount();return he(Pe,{direction:"row",gap:1,sx:{pointerEvents:"none"},children:[he(Te,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[he(Ki,{orientation:"vertical"}),he(gi,{href:"#",children:["Всего ",e]}),he(Ki,{orientation:"vertical"})]}),he(Te,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[he(Ki,{orientation:"vertical"}),he(gi,{href:"#",children:["Аренда ",t]}),he(Ki,{orientation:"vertical"})]}),he(Te,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[he(Ki,{orientation:"vertical"}),he(gi,{href:"#",children:["Продажа ",i]}),he(Ki,{orientation:"vertical"})]}),he(Te,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[he(Ki,{orientation:"vertical"}),he(gi,{href:"#",children:["Архив ",a]}),he(Ki,{orientation:"vertical"})]}),he(Te,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[he(Ki,{orientation:"vertical"}),he(gi,{href:"#",children:["Новые ",o]}),he(Ki,{orientation:"vertical"})]})]})}})]})})}),Cu=()=>window.innerHeight-100,Fu=()=>window.innerHeight-100,Lu=()=>window.innerHeight-100,Iu=()=>window.innerHeight-100,Mu=[{id:"common",element:({payload:e})=>{const t=_m({payload:e}),i=Ve(bs.bidViewService.reloadSubject),{render:a,pickColumns:o,columns:l}=ti({columns:yc,storageKey:"bid_columns"}),{listProps:n}=Xi(bs.routerService.locationState,{fallback:bs.errorService.handleGlobalError}),r=zm();return he(_e,{children:[he(yi,{withSearch:!0,withSingleSort:!0,withSingleChip:!0,noInitialFilters:!0,fetchDebounce:el,reloadSubject:i,title:"Заявки",filterLabel:"Фильтры",heightRequest:Fu,rowActions:bc,actions:hc,filters:Sm,columns:l,handler:r,chips:_c,AfterActionList:Tu,AfterOperationList:xm,onRowAction:async(e,t)=>{bs.layoutService.setAppbarLoader(!0);try{if("edit-action"===e&&bs.routerService.push("/bid_edit/".concat(t.id)),"remove-action"===e&&(await bs.bidViewService.remove(t.id),i.next()),"copy-action"===e){const e=await bs.bidViewService.read(t.id);await bs.bidViewService.create(e),i.next()}"toggle-archive"===e&&(await bs.bidViewService.toggleArchive(t.id),i.next())}finally{bs.layoutService.setAppbarLoader(!1)}},onRowClick:async e=>{(await bs.permissionService.getPermissions()).hasBidViewPermission&&(async e=>{await bs.featureService.hasFeature("officemanager")?t(e):bs.routerService.push("/bid_view/".concat(e))})(e.id)},onAction:async t=>{"add-action"===t&&bs.routerService.push("/bid/create"),"column-setup-action"===t&&o(),"excel-action"===t&&await uc({query:n,handler:r,payload:e,columns:l})},selectionMode:lt.Multiple,payload:e,...n}),a()]})},isActive:e=>ws(["/bid"],e),isAvailable:()=>!1},{id:"rent",element:({payload:e})=>{const t=_m({payload:e}),i=Ve(bs.bidViewService.reloadSubject),{render:a,pickColumns:o,columns:l}=ti({columns:yc,storageKey:"bid_columns"}),{listProps:n}=Xi(bs.routerService.locationState,{fallback:bs.errorService.handleGlobalError}),r=zm();return he(_e,{children:[he(yi,{withSearch:!0,withSingleSort:!0,withSingleChip:!0,noInitialFilters:!0,fetchDebounce:el,reloadSubject:i,title:"Заявки",filterLabel:"Фильтры",heightRequest:Lu,rowActions:bc,actions:hc,filters:Sm,columns:l,handler:r,chips:_c,AfterActionList:Tu,AfterOperationList:xm,onRowAction:async(e,t)=>{bs.layoutService.setAppbarLoader(!0);try{if("edit-action"===e&&bs.routerService.push("/bid_edit/".concat(t.id)),"remove-action"===e&&(await bs.bidViewService.remove(t.id),i.next()),"copy-action"===e){const e=await bs.bidViewService.read(t.id);await bs.bidViewService.create(e),i.next()}"toggle-archive"===e&&(await bs.bidViewService.toggleArchive(t.id),i.next())}finally{bs.layoutService.setAppbarLoader(!1)}},onRowClick:async e=>{(await bs.permissionService.getPermissions()).hasBidViewPermission&&(async e=>{await bs.featureService.hasFeature("officemanager")?t(e):bs.routerService.push("/bid_view/".concat(e))})(e.id)},onAction:async t=>{"add-action"===t&&bs.routerService.push("/bid/create"),"column-setup-action"===t&&o(),"excel-action"===t&&await uc({query:n,payload:{...e,_rent:!0},handler:r,columns:l})},selectionMode:lt.Multiple,payload:{...e,_rent:!0},...n}),a()]})},isActive:e=>ws(["/bid_rent"],e),isAvailable:()=>!1},{id:"sell",element:({payload:e})=>{const t=_m({payload:e}),i=Ve(bs.bidViewService.reloadSubject),{render:a,pickColumns:o,columns:l}=ti({columns:yc,storageKey:"bid_columns"}),{listProps:n}=Xi(bs.routerService.locationState,{fallback:bs.errorService.handleGlobalError}),r=zm();return he(_e,{children:[he(yi,{withSearch:!0,withSingleSort:!0,withSingleChip:!0,noInitialFilters:!0,fetchDebounce:el,reloadSubject:i,title:"Заявки",filterLabel:"Фильтры",heightRequest:Iu,rowActions:bc,actions:hc,filters:Sm,columns:l,handler:r,chips:_c,AfterActionList:Tu,AfterOperationList:xm,onRowAction:async(e,t)=>{bs.layoutService.setAppbarLoader(!0);try{if("edit-action"===e&&bs.routerService.push("/bid_edit/".concat(t.id)),"remove-action"===e&&(await bs.bidViewService.remove(t.id),i.next()),"copy-action"===e){const e=await bs.bidViewService.read(t.id);await bs.bidViewService.create(e),i.next()}"toggle-archive"===e&&(await bs.bidViewService.toggleArchive(t.id),i.next())}finally{bs.layoutService.setAppbarLoader(!1)}},onRowClick:async e=>{(await bs.permissionService.getPermissions()).hasBidViewPermission&&(async e=>{await bs.featureService.hasFeature("officemanager")?t(e):bs.routerService.push("/bid_view/".concat(e))})(e.id)},onAction:async t=>{"add-action"===t&&bs.routerService.push("/bid/create"),"column-setup-action"===t&&o(),"excel-action"===t&&await uc({query:n,payload:{...e,_sell:!0},handler:r,columns:l})},selectionMode:lt.Multiple,payload:{...e,_sell:!0},...n}),a()]})},isActive:e=>ws(["/bid_sell"],e),isAvailable:()=>!1},{id:"archive",element:({payload:e})=>{const t=_m({payload:e}),i=Ve(bs.bidViewService.reloadSubject),{render:a,pickColumns:o,columns:l}=ti({columns:yc,storageKey:"bid_columns"}),{listProps:n}=Xi(bs.routerService.locationState,{fallback:bs.errorService.handleGlobalError}),r=zm();return he(_e,{children:[he(yi,{withSearch:!0,withSingleSort:!0,withSingleChip:!0,noInitialFilters:!0,fetchDebounce:el,reloadSubject:i,title:"Заявки",filterLabel:"Фильтры",heightRequest:Cu,rowActions:bc,actions:hc,filters:Sm,columns:l,handler:r,chips:_c,AfterActionList:Tu,AfterOperationList:Yc,onRowAction:async(e,t)=>{bs.layoutService.setAppbarLoader(!0);try{if("edit-action"===e&&bs.routerService.push("/bid_edit/".concat(t.id)),"remove-action"===e&&(await bs.bidViewService.remove(t.id),i.next()),"copy-action"===e){const e=await bs.bidViewService.read(t.id);await bs.bidViewService.create(e),i.next()}"toggle-archive"===e&&(await bs.bidViewService.toggleArchive(t.id),i.next())}finally{bs.layoutService.setAppbarLoader(!1)}},onRowClick:async e=>{(await bs.permissionService.getPermissions()).hasBidViewPermission&&(async e=>{await bs.featureService.hasFeature("officemanager")?t(e):bs.routerService.push("/bid_view/".concat(e))})(e.id)},onAction:async t=>{"add-action"===t&&bs.routerService.push("/bid/create"),"column-setup-action"===t&&o(),"excel-action"===t&&await uc({query:n,payload:{...e,_archive:!0},handler:r,columns:l})},selectionMode:lt.Multiple,payload:{...e,_archive:!0},...n}),a()]})},isActive:e=>ws(["/bid_archive"],e),isAvailable:()=>!1}],ju=[{id:"contact",label:"Контакт",isActive:()=>ws(["/bid_edit/:id/contact"])},{id:"parameter",label:"Параметры заявки",isActive:()=>ws(["/bid_edit/:id","/bid_edit/:id/parameter"])},{id:"tasks",label:"Задачи",isDisabled:()=>!0,isActive:()=>ws(["/bid_edit/:id/tasks"])},{id:"service_comment",label:"Служебный комментарий",isDisabled:()=>!0,isActive:()=>ws(["/bid_edit/:id/service_comment"])},{id:"history",label:"История",isDisabled:()=>!0,isActive:()=>ws(["/bid_edit/:id/history"])},{id:"documents",label:"Документы",isActive:()=>ws(["/bid_edit/:id/documents"])},{id:"commission_and_status",label:"Комиссия и статус",isDisabled:()=>!0,isActive:()=>ws(["/bid_edit/:id/commission_and_status"])}],Bu=(e,t)=>{if(t)return;const i=vs("id","create");"contact"===e&&bs.routerService.replace("/bid_edit/".concat(i,"/contact")),"parameter"===e&&bs.routerService.replace("/bid_edit/".concat(i,"/parameter")),"tasks"===e&&bs.routerService.replace("/bid_edit/".concat(i,"/tasks")),"service_comment"===e&&bs.routerService.replace("/bid_edit/".concat(i,"/service_comment")),"history"===e&&bs.routerService.replace("/bid_edit/".concat(i,"/history")),"documents"===e&&bs.routerService.replace("/bid_edit/".concat(i,"/documents")),"commission_and_status"===e&&bs.routerService.replace("/bid_edit/".concat(i,"/commission_and_status"))},Ru=({payload:e,children:t,mode:i=j.Paper})=>{const a=ue.useMemo((()=>"tabs"===i?j.Tabs:j.Paper),[i]);return he(fe,{withFixedPos:!0,payload:e,fixedPosHeaderAdjust:i===j.Paper?85:64,mode:a,options:ju,onActiveOptionChange:Bu,children:t})},Du=[{type:He.Link,isVisible:()=>!!bs.routerService.previousPath,action:"list-action",label:he(De,{sx:{display:"block"}})},{type:He.Link,action:"list-action",label:"Заявки"},{type:He.Link,action:"list-action",isVisible:({id:e})=>"create"!==e,label:"Редактирование контакта"},{type:He.Link,action:"list-action",isVisible:({id:e})=>"create"===e,label:"Создание контакта"},{type:He.Button,isDisabled:({hasChanged:e})=>!e,action:"save-action",label:"Сохранить"}],qu=[{id:"contact",label:"Контакт",isActive:()=>ws(["/bid_view/:id/contact"])},{id:"parameter",label:"Параметры заявки",isActive:()=>ws(["/bid_view/:id","/bid_view/:id/parameter"])},{id:"tasks",label:"Задачи",isActive:()=>ws(["/bid_view/:id/tasks"])},{id:"service_comment",isVisible:({permissions:e})=>e.hasMasterDetailPermission,label:"Служебный комментарий",isActive:()=>ws(["/bid_view/:id/service_comment"])},{id:"history",label:"История",isActive:()=>ws(["/bid_view/:id/history"])},{id:"documents",label:"Документы",isActive:()=>ws(["/bid_view/:id/documents"])},{id:"commission_and_status",label:"Комиссия и статус",isDisabled:()=>!0,isActive:()=>ws(["/bid_view/:id/commission_and_status"])}],Pu=(e,t)=>{if(t)return;const i=vs("id","create");"contact"===e&&bs.routerService.replace("/bid_view/".concat(i,"/contact")),"parameter"===e&&bs.routerService.replace("/bid_view/".concat(i,"/parameter")),"tasks"===e&&bs.routerService.replace("/bid_view/".concat(i,"/tasks")),"service_comment"===e&&bs.routerService.replace("/bid_view/".concat(i,"/service_comment")),"history"===e&&bs.routerService.replace("/bid_view/".concat(i,"/history")),"documents"===e&&bs.routerService.replace("/bid_view/".concat(i,"/documents")),"commission_and_status"===e&&bs.routerService.replace("/bid_view/".concat(i,"/commission_and_status"))},Eu=({children:e,payload:t,mode:i=j.Paper})=>{const a=ue.useMemo((()=>"tabs"===i?j.Tabs:j.Paper),[i]);return he(fe,{payload:t,withFixedPos:!0,fixedPosHeaderAdjust:i===j.Paper?85:64,mode:a,options:qu,onActiveOptionChange:Pu,children:e})},Nu=[{type:He.Link,isVisible:()=>!!bs.routerService.previousPath,action:"list-action",label:he(De,{sx:{display:"block"}})},{type:He.Link,action:"list-action",label:"Заявки"},{type:He.Link,action:"list-action",label:"Просмотр контакта"},{type:He.Button,isDisabled:({payload:{permissions:e}})=>!e.hasBidUpdatePermission,action:"edit-action",label:"Редактировать"}],Ou=[{action:"show-contact-action",label:"Показать карточку контакта"}],Uu=async e=>{const{contact_id:t}=await bs.bidViewService.read(e);return t},Hu=[{type:o.Fragment,isVisible:({activeStep:e})=>0===e,fields:[{type:o.Component,element:()=>he(Ne,{variant:"h6",fontWeight:"bold",mb:2,children:"Данные контакта"})},{type:o.Text,outlined:!0,title:"Ф.И.О",isInvalid:({fio:e})=>e?null:"Обязательно к заполнению",description:"Фамилия Имя Отчество контакта",name:"fio"},{type:o.Text,outlined:!0,title:"Телефон",isInvalid:({telefon:e})=>e?null:"Обязательно к заполнению",description:"Телефон контакта",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon"},{type:o.Combo,outlined:!0,name:"tip_klienta",title:"Тип клиента",itemList:["Собственник","Доверенное лицо","Риелтор","Информатор","Застройщик"]}]},{type:o.Fragment,isVisible:({activeStep:e})=>2===e,fields:[{type:o.Component,element:()=>he(Ne,{variant:"h6",fontWeight:"bold",mb:1,children:"Предпросмотр"})},{type:o.Component,isVisible:({contact_id:e})=>!e,element:()=>he(Ri,{variant:"outlined",color:"warning",sx:{mb:2},children:"Создавая новую заявку, убедитесь, что нет дубликата контакта"})},{type:o.Component,isVisible:({contact_id:e})=>!!e,element:()=>he(Ri,{variant:"outlined",color:"info",sx:{mb:2},children:"Убедитесь, что это контактные данные клиента"})},{type:o.Text,isVisible:({contact_id:e})=>!!e,compute:async({contact_id:e})=>{const{fio:t=""}=await bs.contactViewService.tryRead(e)||{};return t},disabled:!0,outlined:!0,title:"Ф.И.О"},{type:o.Text,isVisible:({contact_id:e})=>!!e,compute:async({contact_id:e})=>{const{telefon:t=""}=await bs.contactViewService.tryRead(e)||{};return t},disabled:!0,outlined:!0,title:"Телефон",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000"},{type:o.Text,isVisible:({contact_id:e})=>!!e,fieldBottomMargin:"0",compute:async({contact_id:e})=>{const{tip_klienta:t=null}=await bs.contactViewService.tryRead(e)||{};return ae(t)||"Не указано"},disabled:!0,outlined:!0,name:"tip_klienta",title:"Тип клиента"},{type:o.Text,isVisible:({contact_id:e})=>!e,outlined:!0,title:"Ф.И.О",isInvalid:({fio:e})=>e?null:"Обязательно к заполнению",description:"Фамилия Имя Отчество контакта",name:"fio"},{type:o.Text,isVisible:({contact_id:e})=>!e,outlined:!0,title:"Телефон",isInvalid:({telefon:e})=>e?null:"Обязательно к заполнению",description:"Телефон контакта",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon"},{type:o.Combo,isVisible:({contact_id:e})=>!e,outlined:!0,name:"tip_klienta",title:"Тип клиента",itemList:["Собственник","Доверенное лицо","Риелтор","Информатор","Застройщик"]}]}],Wu=[{type:He.Link,action:"list-action",label:"Список заявок"},{type:He.Link,action:"list-action",label:"Создание заявки"}],$u=Fs()((e=>({root:{position:"relative",overflow:"hidden"},header:{position:"absolute",top:0,left:0,height:65,paddingLeft:e.spacing(2),paddingRight:e.spacing(2),background:"whitesmoke",width:"100%"},content:{minHeight:300},adjust:{paddingBottom:65},listItemBackground:{background:ze(e.palette.primary.main,.05)}}))),Gu=Se.createLoader(12),Yu=[{type:He.Link,isVisible:()=>!!bs.routerService.previousPath,action:"list-action",label:he(De,{sx:{display:"block"}})},{type:He.Link,action:"list-action",label:"Заявки"},{type:He.Link,action:"list-action",isVisible:({id:e})=>"create"!==e,label:"Редактирование документа"},{type:He.Link,action:"list-action",isVisible:({id:e})=>"create"===e,label:"Создание документа"},{type:He.Button,isDisabled:({hasChanged:e})=>!e,action:"save-action",label:"Сохранить"}],Ku=[{type:He.Link,isVisible:()=>!!bs.routerService.previousPath,action:"list-action",label:he(De,{sx:{display:"block"}})},{type:He.Link,action:"list-action",label:"Заявки"},{type:He.Link,action:"list-action",label:"Просмотр документа"},{type:He.Button,isDisabled:({payload:{permissions:e}})=>!e.hasBidUpdatePermission,action:"edit-action",label:"Редактировать"}],Xu="real-estate__headerRoot",Ju=[{type:He.Link,isVisible:()=>!!bs.routerService.previousPath,action:"list-action",label:he(De,{sx:{display:"block"}})},{type:He.Link,action:"list-action",label:"Заявки"},{type:He.Link,action:"list-action",label:"Просмотр истории"}],Zu=[{type:o.Complete,fieldRightMargin:"0",outlined:!1,name:"strana",title:"Страна",tip:async()=>["Узбекистан"]},{type:o.Complete,fieldRightMargin:"0",outlined:!1,name:"gorod",title:"Город",tip:["Ташкент"]},{type:o.Complete,fieldRightMargin:"0",outlined:!1,name:"oblast",title:"Область",tip:async()=>["Ташкентская область"]},{type:o.Complete,fieldRightMargin:"0",outlined:!1,name:"rajon",title:"Район",tip:["Алмазарский район","Бектемирский район","Мирабадский район","Мирзо-Улугбекский район","Сергелийский район","Учтепинский район","Чиланзарский район","Шайхантахурский район","Юнусабадский район","Яккасарайский район","Янгихаётский район","Яшнабадский район"]},{type:o.Complete,fieldRightMargin:"0",tip:bs.dictService.getMahallya,outlined:!1,name:"mahallya",title:"Махалля"},{type:o.Complete,fieldRightMargin:"0",tip:bs.dictService.getUlicza,outlined:!1,name:"ulicza",title:"Улица"},{type:o.Complete,tip:bs.dictService.getOrientir,fieldRightMargin:"0",outlined:!1,name:"orientir",title:"Ориентир"},{type:o.Combo,fieldRightMargin:"0",freeSolo:!0,outlined:!1,name:"metro",title:"Метро",itemList:["А. Ходжаев","Абдулла Кодирий","Алишер Навоий","Амир Темур хиёбони","Беруний","Бобур","Бодомзор","Буюк Ипак йули","Гофур Гулом","Дружба народов","Дустлик","Жанубий","Космонавтлар","Машинасозлар","Миллий бог","Мингурик","Минор","Мирзо Улугбек","Мустакиллик майдони","Новза","Ойбек","Олмазор","Отчопар","Пахтакор","Пушкинская","Сергели","Тинчлик","Тошкент","Тукимачи","Туркистон","Турсунзода","Узбекистон","Усмон Носыр","Файзулла Ходжаев","Хамид Олимжон","Чилонзор","Чорсу","Чош-тепа","Шахристан","Эхтиром","Юнус Ражабий","Юнусабад"]},{type:o.Fragment,isVisible:e=>{let t=!1;return t=t||Ee(e.podkategoriya_obekta,"Квартиры"),t},fields:[{type:o.Text,columns:"6",outlined:!1,name:"nomer_doma",title:"№ дома"},{type:o.Text,fieldRightMargin:"0",columns:"6",outlined:!1,name:"nomer_kvartiry",title:"№ квартиры"}]},{type:o.Fragment,isVisible:e=>{let t=!1;return t=t||null!==e.kategoriya_obekta,t=t||null!==e.podkategoriya_obekta,t=t&&!Ee(e.podkategoriya_obekta,"Квартиры"),t},fields:[{type:o.Text,fieldRightMargin:"0",outlined:!1,name:"nomer_doma",title:"№ дома"}]},{type:o.Component,element:Tp}];window.address_fields=Zu;const Qu=[{type:o.Items,labelShrink:!0,placeholder:"Выберите несколько",freeSolo:!0,outlined:!1,name:"metro_list",title:"Метро",itemList:["А. Ходжаев","Абдулла Кодирий","Алишер Навоий","Амир Темур хиёбони","Беруний","Бобур","Бодомзор","Буюк Ипак йули","Гофур Гулом","Дружба народов","Дустлик","Жанубий","Космонавтлар","Машинасозлар","Миллий бог","Мингурик","Минор","Мирзо Улугбек","Мустакиллик майдони","Новза","Ойбек","Олмазор","Отчопар","Пахтакор","Пушкинская","Сергели","Тинчлик","Тошкент","Тукимачи","Туркистон","Турсунзода","Узбекистон","Усмон Носыр","Файзулла Ходжаев","Хамид Олимжон","Чилонзор","Чорсу","Чош-тепа","Шахристан","Эхтиром","Юнус Ражабий","Юнусабад"]},{type:o.Items,labelShrink:!0,freeSolo:!0,placeholder:"Выберите несколько",fieldRightMargin:"0",outlined:!1,name:"rajon_list",title:"Район",itemList:["Алмазарский район","Бектемирский район","Мирабадский район","Мирзо-Улугбекский район","Сергелийский район","Учтепинский район","Чиланзарский район","Шайхантахурский район","Юнусабадский район","Яккасарайский район","Янгихаётский район","Яшнабадский район"]},{type:o.Items,labelShrink:!0,freeSolo:!0,placeholder:"Выберите несколько",fieldRightMargin:"0",itemList:bs.dictService.getMahallya,outlined:!1,name:"mahallya_list",title:"Махалля"}];window.area_fields=Qu;const eh=54,th=Fs()((e=>({root:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",overflow:"hidden",height:775},container:{overflow:"hidden",padding:e.spacing(1),flex:1},appBarRoot:{background:e.palette.primary.main,maxHeight:eh,height:eh,boxShadow:"unset",color:"#000"},tabsRoot:{minHeight:eh,height:eh,marginLeft:"0 !important",marginRight:"0 !important"},tabRoot:{minHeight:eh,height:eh,color:"#fff"},tabRootTransparent:{minHeight:eh,height:eh},tabSelected:{color:"#fff !important"},indicator:{height:6,background:"#0288d1"},indicatorTransparent:{height:6,background:e.palette.primary.main}}))),ih={},ah=({sx:e,withTransparentHeader:t=!1,readonly:i=!1,_fieldData:a=ih,onChange:o})=>{const{classes:l}=th(),[n,r]=ue.useState("area"),{reloadTrigger:s,doReload:d}=wi(),c=Ke(a);return ue.useEffect((()=>c.subscribe((()=>{i&&d()}))),[i]),he(ai,{className:l.root,sx:{...e,height:"100%"},children:he(Ai,{value:n,children:[t&&he(Te,{sx:{borderBottom:1,borderColor:"divider",pointerEvents:"all"},children:he(Ti,{variant:"fullWidth",classes:{root:l.tabsRoot,indicator:l.indicatorTransparent},onChange:(e,t)=>r(t),children:[he(Ci,{classes:{root:l.tabRootTransparent},label:"Территория",value:"area"}),he(Ci,{classes:{root:l.tabRootTransparent},label:"Адрес",value:"address"})]})}),!t&&he(Fi,{classes:{root:l.appBarRoot},position:"static",sx:{borderBottom:1,borderColor:"divider",pointerEvents:"all"},children:he(Ti,{variant:"fullWidth",classes:{root:l.tabsRoot,indicator:l.indicator},onChange:(e,t)=>r(t),children:[he(Ci,{classes:{root:l.tabRoot,selected:l.tabSelected},label:"Территория",value:"area"}),he(Ci,{classes:{root:l.tabRoot,selected:l.tabSelected},label:"Адрес",value:"address"})]})}),he(Li,{className:l.container,value:"address",children:he(Je,{readonly:i,sx:{marginRight:-8},payload:()=>({readonly:i}),handler:a,fields:Zu,onChange:o},s)}),he(Li,{className:l.container,value:"area",children:he(Je,{readonly:i,payload:()=>({readonly:i}),handler:a,fields:Qu,onChange:o},s)})]})})},oh=[{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany"),isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&!Ee(e.podkategoriya_obekta,"Квартиры"),t=t&&!Ee(e.podkategoriya_obekta,"Дома"),t=t&&!Ee(e.podkategoriya_obekta,"Земля/Участок"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая недвижимость)"})},ic({hidden:e=>!e.fieldVisibility.has("ploshhad_gostinnoj"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_spalni"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_holla"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_kuhni"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_sanuzla"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_balkona"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_terrasy"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_komnaty_ohrany"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"})]}]},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany"),isVisible:e=>!Ee(e.kategoriya_obekta,"Коммерческая")&&Ee(e.podkategoriya_obekta,"Земля/Участок"),fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Земля/Участок)"})},ic({hidden:e=>!e.fieldVisibility.has("ploshhad_gostinnoj"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_spalni"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_holla"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_kuhni"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_sanuzla"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_balkona"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_terrasy"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_komnaty_ohrany"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"})]}]},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona"),isVisible:e=>{let t=!0;return t=t&&!Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Квартиры"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Квартиры)"})},ic({hidden:e=>!e.fieldVisibility.has("ploshhad_gostinnoj"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_spalni"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_holla"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_kuhni"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_sanuzla"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_balkona"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"})]}]},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany","ploshhad_gostevogo_doma","ploshhad_dopolnitelnoj_pristrojki"),isVisible:e=>{let t=!0;return t=t&&!Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Дома"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Дома)"})},ic({hidden:e=>!e.fieldVisibility.has("ploshhad_gostinnoj"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_spalni"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_holla"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_kuhni"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_sanuzla"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_balkona"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_terrasy"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_komnaty_ohrany"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_gostevogo_doma"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostevogo_doma",title:"Площадь гостевого дома М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_dopolnitelnoj_pristrojki"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_dopolnitelnoj_pristrojki",title:"Площадь дополнительной пристройки М²"})]}]},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona"),isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Квартиры"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая + Жилая квартира)"})},ic({hidden:e=>!e.fieldVisibility.has("ploshhad_gostinnoj"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_spalni"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_holla"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_kuhni"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_sanuzla"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_balkona"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"})]}]},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany","ploshhad_gostevogo_doma","ploshhad_dopolnitelnoj_pristrojki"),isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Дома"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческий + Жилой дом)"})},ic({hidden:e=>!e.fieldVisibility.has("ploshhad_gostinnoj"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_spalni"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_holla"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_kuhni"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_sanuzla"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_balkona"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_terrasy"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_komnaty_ohrany"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_gostevogo_doma"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostevogo_doma",title:"Площадь гостевого дома М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_dopolnitelnoj_pristrojki"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_dopolnitelnoj_pristrojki",title:"Площадь дополнительной пристройки М²"})]}]},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany"),isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Земля/Участок"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая + Жилая земля/участок)"})},ic({hidden:e=>!e.fieldVisibility.has("ploshhad_gostinnoj"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_spalni"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_holla"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_kuhni"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_sanuzla"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_balkona"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_terrasy"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"}),ic({hidden:e=>!e.fieldVisibility.has("ploshhad_komnaty_ohrany"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"})]}]}],lh=[{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"vnutri_est","ryadom_est"),isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&!Ee(e.podkategoriya_obekta,"Квартиры"),t=t&&!Ee(e.podkategoriya_obekta,"Дома"),t=t&&!Ee(e.podkategoriya_obekta,"Земля/Участок"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая недвижимость)"})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vnutri_est"),columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Телевизор","Кондиционер","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("ryadom_est"),columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Охрана","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"vnutri_est","ryadom_est"),isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Квартиры"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая + Жилая квартира)"})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vnutri_est"),columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Холодильник","Телевизор","Кондиционер","Стиральная машина","Мусоропровод","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг","Пожарная сигнализация","Видеонаблюдение","Сигнализация"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("ryadom_est"),columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Охрана","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"vnutri_est","ryadom_est"),isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Дома"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческий + Жилой дом)"})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vnutri_est"),columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Телевизор","Кондиционер","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг","Полисадник"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("ryadom_est"),columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Охрана","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"vnutri_est","ryadom_est"),isVisible:e=>{let t=!0;return t=t&&Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Земля/Участок"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая + Жилая земля/участок)"})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vnutri_est"),columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Забор","Катлаван","Пожарная сигнализация","Видеонаблюдение","Сигнализация"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("ryadom_est"),columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Охрана","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}}],nh=[{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"kolichestvo_komnat","sostoyanie_obekta","sostoyanie_remonta","poleznaya_ploshhad","etazh","tip_stroeniya","mashina_mesto","kolichestvo_sotok","etazhnost","balkon","parkovka","vysota_potolkov","obshhaya_ploshhad","sanuzel","mebel","voda","gaz","lift_kommercziya","sistema_otopleniya","elektrichestvo","kanalizacziya","rasstoyanie_do_metro","mestopolozhenie_obekta","god_postrojki","sistema_kondiczionirovaniya","vid_liczenzii","naznachenie_obekta"),isVisible:e=>(!Ee(e.podkategoriya_obekta,"Земля/Участок")||!Ee(e.kategoriya_obekta,"Коммерческая"))&&((!Ee(e.podkategoriya_obekta,"Дома")||!Ee(e.kategoriya_obekta,"Коммерческая"))&&((!Ee(e.podkategoriya_obekta,"Квартиры")||!Ee(e.kategoriya_obekta,"Коммерческая"))&&Ee(e.kategoriya_obekta,"Коммерческая"))),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая недвижимость)"})},ic({hidden:e=>!e.fieldVisibility.has("kolichestvo_komnat"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sostoyanie_obekta"),sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_obekta",title:"Состояние объекта",itemList:["Новой постройки","Недостроенный","Под снос","Коробка","Пустая земля/участок"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sostoyanie_remonta"),sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},ic({hidden:e=>!e.fieldVisibility.has("poleznaya_ploshhad"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"}),ic({hidden:e=>!e.fieldVisibility.has("etazh"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("tip_stroeniya"),sx:{mt:2},columns:"3",outlined:!1,name:"tip_stroeniya",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},ic({hidden:e=>!e.fieldVisibility.has("mashina_mesto"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),ic({hidden:e=>!e.fieldVisibility.has("kolichestvo_sotok"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"}),ic({hidden:e=>!e.fieldVisibility.has("etazhnost"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("balkon"),sx:{mt:2},columns:"3",outlined:!1,name:"balkon",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("parkovka"),sx:{mt:2},columns:"3",outlined:!1,name:"parkovka",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},ic({hidden:e=>!e.fieldVisibility.has("vysota_potolkov"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"}),ic({hidden:e=>!e.fieldVisibility.has("obshhaya_ploshhad"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sanuzel"),sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("mebel"),sx:{mt:2},columns:"3",outlined:!1,name:"mebel",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("voda"),columns:"3",outlined:!1,name:"voda",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("gaz"),columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("lift_kommercziya"),columns:"3",outlined:!1,name:"lift_kommercziya",title:"Лифт",itemList:["Есть","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema_otopleniya"),columns:"3",outlined:!1,name:"sistema_otopleniya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("elektrichestvo"),columns:"3",outlined:!1,name:"elektrichestvo",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("kanalizacziya"),columns:"3",outlined:!1,name:"kanalizacziya",title:"Канализация",itemList:["Да","Нет"]},ic({hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_metro"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("mestopolozhenie_obekta"),sx:{mt:2},columns:"3",outlined:!1,name:"mestopolozhenie_obekta",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},ic({hidden:e=>!e.fieldVisibility.has("god_postrojki"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema_kondiczionirovaniya"),columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vid_liczenzii"),columns:"3",outlined:!1,name:"vid_liczenzii",title:"Вид лицензии",itemList:["Коммерческая","Жилая"]},{type:o.Component,hidden:e=>!e.fieldVisibility.has("naznachenie_obekta"),sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>he(Oe,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"kolichestvo_komnat","sostoyanie_remonta-kvartiry","nazvanie_zhk","tip-stroeniya_kvartiry","etazh","balkon_kvartira","tip_planirovki","lift_kvartira","etazhnost","sanuzel_kvartira","zhilaya_ploshhad","mebel_kvartira","obshhaya_ploshhad","vysota_potolkov","kolichestvo_spalen","sistema-otopleniya_kvartiry","spalnya_sanuzel","gaz","rasstoyanie_do_metro","vid_iz_okna","parkovka_kvartira","god_postrojki"),isVisible:e=>{if(Ee(e.podkategoriya_obekta,"Квартиры")&&Ee(e.kategoriya_obekta,"Коммерческая"))return!1;let t=!1;return t=t||Ee(e.podkategoriya_obekta,"Квартиры"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Квартиры)"})},ic({hidden:e=>!e.fieldVisibility.has("kolichestvo_komnat"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sostoyanie_remonta-kvartiry"),sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_remonta-kvartiry",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Complete,hidden:e=>!e.fieldVisibility.has("nazvanie_zhk"),columns:"3",outlined:!1,name:"nazvanie_zhk",title:"Название ЖК",tip:['ЖК "Greenwich"','ЖК "OzMahal"','ЖК "Elysium"','ЖК "Binkat"','ЖК "Brooklyn"','ЖК "Assalom Havo"','ЖК "Istanbul City"']},{type:o.Items,hidden:e=>!e.fieldVisibility.has("tip-stroeniya_kvartiry"),sx:{mt:2},columns:"3",outlined:!1,name:"tip-stroeniya_kvartiry",title:"Тип строения",itemList:["Кирпичный","Монолитный","Блочный","Панельный","Деревянный","Газоблочный","Бетонно-керамзитный"]},ic({hidden:e=>!e.fieldVisibility.has("etazh"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("balkon_kvartira"),sx:{mt:2},columns:"3",outlined:!1,name:"balkon_kvartira",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("tip_planirovki"),sx:{mt:2},columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Малосемейная","Общежитие","Пентхаус","Дуплекс","Комната"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("lift_kvartira"),sx:{mt:2},columns:"3",outlined:!1,name:"lift_kvartira",title:"Лифт",itemList:["Пассажирский","Грузовой","Нет"]},ic({hidden:e=>!e.fieldVisibility.has("etazhnost"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sanuzel_kvartira"),sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel_kvartira",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более"]},ic({hidden:e=>!e.fieldVisibility.has("zhilaya_ploshhad"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"zhilaya_ploshhad",title:"Жилая площадь М²"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("mebel_kvartira"),sx:{mt:2},columns:"3",outlined:!1,name:"mebel_kvartira",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},ic({hidden:e=>!e.fieldVisibility.has("obshhaya_ploshhad"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"}),ic({hidden:e=>!e.fieldVisibility.has("vysota_potolkov"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"}),ic({hidden:e=>!e.fieldVisibility.has("kolichestvo_spalen"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema-otopleniya_kvartiry"),sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_kvartiry",title:"Система отопления",itemList:["Центральное","2х контурный котел","Теплый пол"]},ic({hidden:e=>!e.fieldVisibility.has("spalnya_sanuzel"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("gaz"),sx:{mt:2},columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},ic({hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_metro"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("vid_iz_okna"),sx:{mt:2},columns:"3",outlined:!1,name:"vid_iz_okna",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("parkovka_kvartira"),sx:{mt:2},columns:"3",outlined:!1,name:"parkovka_kvartira",title:"Парковка",itemList:["Наземная","Собственная","Подземная","В аренду","Нет"]},ic({hidden:e=>!e.fieldVisibility.has("god_postrojki"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"})]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"kolichestvo_komnat","sostoyanie_doma","god_postrojki","tip-stroeniya_doma","etazhnost","balkon_doma","tip_planirovki","bassejn","ploshhad_doma","sanuzel_doma","mashina_mesto","kolichestvo_spalen","kolichestvo_sotok","voda_dom","lift_dom","spalnya_sanuzel","sistema-otopleniya_dom","mebel_dom","rasstoyanie_do_metro","gaz_dom","sistema-kondiczionirovaniya_dom","vysota_potolkov","elektrichestvo_dom","vid_iz_okna_dom","garazh","kanalizacziya_dom","raspolozhenie_doma","mestopolozhenie-obekta_dom"),isVisible:e=>{if(Ee(e.podkategoriya_obekta,"Дома")&&Ee(e.kategoriya_obekta,"Коммерческая"))return!1;let t=!1;return t=t||Ee(e.podkategoriya_obekta,"Дома"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Дома)"})},ic({hidden:e=>!e.fieldVisibility.has("kolichestvo_komnat"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sostoyanie_doma"),sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_doma",title:"Состояние дома",itemList:["Новой постройки","Недостроенный","Под снос","Коробка"]},ic({hidden:e=>!e.fieldVisibility.has("god_postrojki"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("tip-stroeniya_doma"),sx:{mt:2},columns:"3",outlined:!1,name:"tip-stroeniya_doma",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},ic({hidden:e=>!e.fieldVisibility.has("etazhnost"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("balkon_doma"),sx:{mt:2},columns:"3",outlined:!1,name:"balkon_doma",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("tip_planirovki"),sx:{mt:2},columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Смешанный"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("bassejn"),sx:{mt:2},columns:"3",outlined:!1,name:"bassejn",title:"Бассейн",itemList:["Летний","Зимний","Сауна","Нет"]},ic({hidden:e=>!e.fieldVisibility.has("ploshhad_doma"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_doma",title:"Площадь дома М²"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sanuzel_doma"),sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel_doma",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},ic({hidden:e=>!e.fieldVisibility.has("mashina_mesto"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),ic({hidden:e=>!e.fieldVisibility.has("kolichestvo_spalen"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"}),ic({hidden:e=>!e.fieldVisibility.has("kolichestvo_sotok"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("voda_dom"),sx:{mt:2},columns:"3",outlined:!1,name:"voda_dom",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("lift_dom"),sx:{mt:2},columns:"3",outlined:!1,name:"lift_dom",title:"Лифт",itemList:["Есть","Нет"]},ic({hidden:e=>!e.fieldVisibility.has("spalnya_sanuzel"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema-otopleniya_dom"),sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_dom",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("mebel_dom"),sx:{mt:2},columns:"3",outlined:!1,name:"mebel_dom",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},ic({hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_metro"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("gaz_dom"),sx:{mt:2},columns:"3",outlined:!1,name:"gaz_dom",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema-kondiczionirovaniya_dom"),sx:{mt:2},columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_dom",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},ic({hidden:e=>!e.fieldVisibility.has("vysota_potolkov"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"}),{type:o.Combo,hidden:e=>!e.fieldVisibility.has("elektrichestvo_dom"),sx:{mt:2},columns:"3",outlined:!1,name:"elektrichestvo_dom",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vid_iz_okna_dom"),sx:{mt:2},columns:"3",outlined:!1,name:"vid_iz_okna_dom",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("garazh"),columns:"3",outlined:!1,name:"garazh",title:"Гараж",itemList:["Подземный","Закрытый","Под навесом","Уличный"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("kanalizacziya_dom"),columns:"3",outlined:!1,name:"kanalizacziya_dom",title:"Канализация",itemList:["Да","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("raspolozhenie_doma"),columns:"3",outlined:!1,name:"raspolozhenie_doma",title:"Расположение дома",itemList:["По середине","В начале двора","В конце двора"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("mestopolozhenie-obekta_dom"),outlined:!1,columns:"3",name:"mestopolozhenie-obekta_dom",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"kolichestvo_komnat","naznachenie-obekta-zemlya_uchastok","tip_zemli_uchastka","poleznaya_ploshhad","etazh","sostoyanie-obekta_zemlya","mashina_mesto","kolichestvo_sotok","etazhnost","sostoyanie-remonta_zemlya","parkovka_zemlya","rasstoyanie_do_metro","obshhaya_ploshhad","voda_zemlya","mestopolozhenie-obekta_zemlya","rasstoyanie_do_goroda","sistema-otopleniya_zemlya","podezdnye_puti","sistema-kondiczionirovaniya_zemlya","god_postrojki","elektrichestvo_zemlya","gaz_zemlya","kanalizacziya_zemlya"),isVisible:e=>!Ee(e.kategoriya_obekta,"Коммерческая")&&Ee(e.podkategoriya_obekta,"Земля/Участок"),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Земля/Участок)"})},ic({hidden:e=>!e.fieldVisibility.has("kolichestvo_komnat"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Component,hidden:e=>!e.fieldVisibility.has("naznachenie-obekta-zemlya_uchastok"),sx:{mb:2,pr:1},columns:"3",name:"naznachenie-obekta-zemlya_uchastok",element:e=>he(Oe,{variant:"standard",label:"Назначение объекта",items:[{label:"Сельхоз использование",value:"Сельхоз использование"},{label:"ИЖС",value:"ИЖС"},{label:"Высотная застройка",value:"Высотная застройка"},{label:"Промышленное назначение",value:"Промышленное назначение"},{label:"ТЦ",value:"ТЦ"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Склады",value:"Склады"},{label:"Инвестпроект",value:"Инвестпроект"},{label:"Строительство образовательных учреждений",value:"Строительство образовательных учреждений"},{label:"АЗС",value:"АЗС"},{label:"Мойка",value:"Мойка"}],value:e["naznachenie-obekta_zemlya"],onChange:t=>e.onChange({"naznachenie-obekta_zemlya":t})})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("tip_zemli_uchastka"),sx:{mt:2},columns:"3",outlined:!1,name:"tip_zemli_uchastka",title:"Тип земли/участка",itemList:["Делимый","Неделимый"]},ic({hidden:e=>!e.fieldVisibility.has("poleznaya_ploshhad"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"}),ic({hidden:e=>!e.fieldVisibility.has("etazh"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sostoyanie-obekta_zemlya"),sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie-obekta_zemlya",title:"Состояние объекта",itemList:["Пустая земля/участок","Недостроенная","Под снос"]},ic({hidden:e=>!e.fieldVisibility.has("mashina_mesto"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),ic({hidden:e=>!e.fieldVisibility.has("kolichestvo_sotok"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"}),ic({hidden:e=>!e.fieldVisibility.has("etazhnost"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sostoyanie-remonta_zemlya"),sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie-remonta_zemlya",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("parkovka_zemlya"),sx:{mt:2},columns:"3",outlined:!1,name:"parkovka_zemlya",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},ic({hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_metro"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),ic({hidden:e=>!e.fieldVisibility.has("obshhaya_ploshhad"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("voda_zemlya"),sx:{mt:2},columns:"3",outlined:!1,name:"voda_zemlya",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("mestopolozhenie-obekta_zemlya"),sx:{mt:2},columns:"3",outlined:!1,name:"mestopolozhenie-obekta_zemlya",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},ic({hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_goroda"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_goroda",title:"Расстояние до города (м)"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema-otopleniya_zemlya"),sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_zemlya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("podezdnye_puti"),columns:"3",outlined:!1,name:"podezdnye_puti",title:"Подъездные пути",itemList:["Асфальтированная дорога","Грунтовая дорога","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema-kondiczionirovaniya_zemlya"),columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_zemlya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},ic({hidden:e=>!e.fieldVisibility.has("god_postrojki"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("elektrichestvo_zemlya"),sx:{mt:2},columns:"3",outlined:!1,name:"elektrichestvo_zemlya",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("gaz_zemlya"),columns:"3",outlined:!1,name:"gaz_zemlya",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("kanalizacziya_zemlya"),columns:"3",outlined:!1,name:"kanalizacziya_zemlya",title:"Канализация",itemList:["Да","Нет"]}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"kolichestvo_komnat","sostoyanie_remonta-kvartiry","naznachenie_obekta","raspolozhenie_obekta","etazh","balkon_kvartira","tip_planirovki","lift_kvartira","etazhnost","god_postrojki","nazvanie_zhk","mashina_mesto","obshhaya_ploshhad","sanuzel_kvartira","parkovka_kvartira","zhilaya_ploshhad","mebel_kvartira","vysota_potolkov","kolichestvo_spalen","sistema-otopleniya_kvartiry","vid_iz_okna","spalnya_sanuzel","gaz","rasstoyanie_do_metro","sistema_kondiczionirovaniya","tip-stroeniya_kvartiry"),isVisible:e=>!(!Ee(e.kategoriya_obekta,"Коммерческая")||!Ee(e.podkategoriya_obekta,"Квартиры")),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая + Жилая квартира)"})},ic({hidden:e=>!e.fieldVisibility.has("kolichestvo_komnat"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sostoyanie_remonta-kvartiry"),sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_remonta-kvartiry",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Component,hidden:e=>!e.fieldVisibility.has("naznachenie_obekta"),sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>he(Oe,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("raspolozhenie_obekta"),columns:"3",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},ic({hidden:e=>!e.fieldVisibility.has("etazh"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("balkon_kvartira"),sx:{mt:2},columns:"3",outlined:!1,name:"balkon_kvartira",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("tip_planirovki"),sx:{mt:2},columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Малосемейная","Общежитие","Пентхаус","Дуплекс","Комната"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("lift_kvartira"),sx:{mt:2},columns:"3",outlined:!1,name:"lift_kvartira",title:"Лифт",itemList:["Пассажирский","Грузовой","Нет"]},ic({hidden:e=>!e.fieldVisibility.has("etazhnost"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),ic({hidden:e=>!e.fieldVisibility.has("god_postrojki"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),{type:o.Complete,hidden:e=>!e.fieldVisibility.has("nazvanie_zhk"),columns:"3",outlined:!1,name:"nazvanie_zhk",title:"Название ЖК",tip:['ЖК "Greenwich"','ЖК "OzMahal"','ЖК "Elysium"','ЖК "Binkat"','ЖК "Brooklyn"','ЖК "Assalom Havo"','ЖК "Istanbul City"']},ic({hidden:e=>!e.fieldVisibility.has("mashina_mesto"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),ic({hidden:e=>!e.fieldVisibility.has("obshhaya_ploshhad"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sanuzel_kvartira"),sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel_kvartira",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("parkovka_kvartira"),sx:{mt:2},columns:"3",outlined:!1,name:"parkovka_kvartira",title:"Парковка",itemList:["Наземная","Собственная","Подземная","В аренду","Нет"]},ic({hidden:e=>!e.fieldVisibility.has("zhilaya_ploshhad"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"zhilaya_ploshhad",title:"Жилая площадь М²"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("mebel_kvartira"),sx:{mt:2},columns:"3",outlined:!1,name:"mebel_kvartira",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},ic({hidden:e=>!e.fieldVisibility.has("vysota_potolkov"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"}),ic({hidden:e=>!e.fieldVisibility.has("kolichestvo_spalen"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema-otopleniya_kvartiry"),sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_kvartiry",title:"Система отопления",itemList:["Центральное","2х контурный котел","Теплый пол"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vid_iz_okna"),sx:{mt:2},columns:"3",outlined:!1,name:"vid_iz_okna",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},ic({hidden:e=>!e.fieldVisibility.has("spalnya_sanuzel"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("gaz"),sx:{mt:2},columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},ic({hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_metro"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema_kondiczionirovaniya"),columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("tip-stroeniya_kvartiry"),sx:{mt:2},columns:"3",outlined:!1,name:"tip-stroeniya_kvartiry",title:"Тип строения",itemList:["Кирпичный","Монолитный","Блочный","Панельный","Деревянный","Газоблочный","Бетонно-керамзитный"]}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"kolichestvo_komnat","sostoyanie_doma","mestopolozhenie-obekta_dom","naznachenie_obekta","etazhnost","sostoyanie_remonta","raspolozhenie_obekta","tip-stroeniya_doma","ploshhad_doma","raspolozhenie_doma","tip_planirovki","bassejn","kolichestvo_sotok","sanuzel_doma","mashina_mesto","kolichestvo_spalen","voda_dom","lift_dom","spalnya_sanuzel","sistema-otopleniya_dom","mebel_dom","rasstoyanie_do_metro","gaz_dom","god_postrojki","vysota_potolkov","elektrichestvo_dom","vid_iz_okna_dom","garazh","kanalizacziya_dom","balkon_doma","sistema-kondiczionirovaniya_dom"),isVisible:e=>!(!Ee(e.kategoriya_obekta,"Коммерческая")||!Ee(e.podkategoriya_obekta,"Дома")),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческий + Жилой дом)"})},ic({hidden:e=>!e.fieldVisibility.has("kolichestvo_komnat"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sostoyanie_doma"),sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_doma",title:"Состояние дома",itemList:["Новой постройки","Недостроенный","Под снос","Коробка"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("mestopolozhenie-obekta_dom"),sx:{mt:2},columns:"3",outlined:!1,name:"mestopolozhenie-obekta_dom",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:o.Component,hidden:e=>!e.fieldVisibility.has("naznachenie_obekta"),sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>he(Oe,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},ic({hidden:e=>!e.fieldVisibility.has("etazhnost"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sostoyanie_remonta"),sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("raspolozhenie_obekta"),columns:"3",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("tip-stroeniya_doma"),sx:{mt:2},columns:"3",outlined:!1,name:"tip-stroeniya_doma",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},ic({hidden:e=>!e.fieldVisibility.has("ploshhad_doma"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_doma",title:"Площадь дома М²"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("raspolozhenie_doma"),sx:{mt:2},columns:"3",outlined:!1,name:"raspolozhenie_doma",title:"Расположение дома",itemList:["По середине","В начале двора","В конце двора"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("tip_planirovki"),sx:{mt:2},columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Смешанный"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("bassejn"),sx:{mt:2},columns:"3",outlined:!1,name:"bassejn",title:"Бассейн",itemList:["Летний","Зимний","Сауна","Нет"]},ic({hidden:e=>!e.fieldVisibility.has("kolichestvo_sotok"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sanuzel_doma"),sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel_doma",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},ic({hidden:e=>!e.fieldVisibility.has("mashina_mesto"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),ic({hidden:e=>!e.fieldVisibility.has("kolichestvo_spalen"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("voda_dom"),sx:{mt:2},columns:"3",outlined:!1,name:"voda_dom",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("lift_dom"),sx:{mt:2},columns:"3",outlined:!1,name:"lift_dom",title:"Лифт",itemList:["Есть","Нет"]},ic({hidden:e=>!e.fieldVisibility.has("spalnya_sanuzel"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema-otopleniya_dom"),sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_dom",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("mebel_dom"),sx:{mt:2},columns:"3",outlined:!1,name:"mebel_dom",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},ic({hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_metro"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("gaz_dom"),sx:{mt:2},columns:"3",outlined:!1,name:"gaz_dom",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},ic({hidden:e=>!e.fieldVisibility.has("god_postrojki"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),ic({hidden:e=>!e.fieldVisibility.has("vysota_potolkov"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"}),{type:o.Combo,hidden:e=>!e.fieldVisibility.has("elektrichestvo_dom"),sx:{mt:2},columns:"3",outlined:!1,name:"elektrichestvo_dom",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vid_iz_okna_dom"),sx:{mt:2},columns:"3",outlined:!1,name:"vid_iz_okna_dom",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("garazh"),columns:"3",outlined:!1,name:"garazh",title:"Гараж",itemList:["Подземный","Закрытый","Под навесом","Уличный"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("kanalizacziya_dom"),columns:"3",outlined:!1,name:"kanalizacziya_dom",title:"Канализация",itemList:["Да","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("balkon_doma"),sx:{mt:2},columns:"3",outlined:!1,name:"balkon_doma",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema-kondiczionirovaniya_dom"),columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_dom",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"kolichestvo_komnat","naznachenie-obekta-zemlya_uchastok","tip_zemli_uchastka","poleznaya_ploshhad","etazh","sostoyanie-obekta_zemlya","mashina_mesto","kolichestvo_sotok","etazhnost","sostoyanie-remonta_zemlya","parkovka_zemlya","rasstoyanie_do_metro","obshhaya_ploshhad","voda_zemlya","mestopolozhenie-obekta_zemlya","rasstoyanie_do_goroda","sistema-otopleniya_zemlya","god_postrojki","elektrichestvo_zemlya","podezdnye_puti","sistema-kondiczionirovaniya_zemlya","gaz_zemlya","kanalizacziya_zemlya"),isVisible:e=>!(!Ee(e.kategoriya_obekta,"Коммерческая")||!Ee(e.podkategoriya_obekta,"Земля/Участок")),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая + Жилая земля/участок)"})},ic({hidden:e=>!e.fieldVisibility.has("kolichestvo_komnat"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Component,hidden:e=>!e.fieldVisibility.has("naznachenie-obekta-zemlya_uchastok"),sx:{mt:2,mb:2,pr:1},columns:"3",name:"naznachenie-obekta-zemlya_uchastok",element:e=>he(Oe,{variant:"standard",label:"Назначение объекта",items:[{label:"Сельхоз использование",value:"Сельхоз использование"},{label:"ИЖС",value:"ИЖС"},{label:"Высотная застройка",value:"Высотная застройка"},{label:"Промышленное назначение",value:"Промышленное назначение"},{label:"ТЦ",value:"ТЦ"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Склады",value:"Склады"},{label:"Инвестпроект",value:"Инвестпроект"},{label:"Строительство образовательных учреждений",value:"Строительство образовательных учреждений"},{label:"АЗС",value:"АЗС"},{label:"Мойка",value:"Мойка"}],value:e["naznachenie-obekta_zemlya"],onChange:t=>e.onChange({"naznachenie-obekta_zemlya":t})})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("tip_zemli_uchastka"),sx:{mt:2},columns:"3",outlined:!1,name:"tip_zemli_uchastka",title:"Тип земли/участка",itemList:["Делимый","Неделимый"]},ic({hidden:e=>!e.fieldVisibility.has("poleznaya_ploshhad"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"}),ic({hidden:e=>!e.fieldVisibility.has("etazh"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sostoyanie-obekta_zemlya"),sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie-obekta_zemlya",title:"Состояние объекта",itemList:["Пустая земля/участок","Недостроенная","Под снос"]},ic({hidden:e=>!e.fieldVisibility.has("mashina_mesto"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),ic({hidden:e=>!e.fieldVisibility.has("kolichestvo_sotok"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"}),ic({hidden:e=>!e.fieldVisibility.has("etazhnost"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sostoyanie-remonta_zemlya"),sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie-remonta_zemlya",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("parkovka_zemlya"),sx:{mt:2},columns:"3",outlined:!1,name:"parkovka_zemlya",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},ic({hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_metro"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),ic({hidden:e=>!e.fieldVisibility.has("obshhaya_ploshhad"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("voda_zemlya"),sx:{mt:2},columns:"3",outlined:!1,name:"voda_zemlya",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("mestopolozhenie-obekta_zemlya"),sx:{mt:2},columns:"3",outlined:!1,name:"mestopolozhenie-obekta_zemlya",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},ic({hidden:e=>!e.fieldVisibility.has("rasstoyanie_do_goroda"),columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_goroda",title:"Расстояние до города (м)"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema-otopleniya_zemlya"),sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_zemlya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},ic({hidden:e=>!e.fieldVisibility.has("god_postrojki"),columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),{type:o.Items,hidden:e=>!e.fieldVisibility.has("elektrichestvo_zemlya"),sx:{mt:2},columns:"3",outlined:!1,name:"elektrichestvo_zemlya",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("podezdnye_puti"),columns:"3",outlined:!1,name:"podezdnye_puti",title:"Подъездные пути",itemList:["Асфальтированная дорога","Грунтовая дорога","Нет"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("sistema-kondiczionirovaniya_zemlya"),columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_zemlya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("gaz_zemlya"),columns:"3",outlined:!1,name:"gaz_zemlya",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("kanalizacziya_zemlya"),columns:"3",outlined:!1,name:"kanalizacziya_zemlya",title:"Канализация",itemList:["Да","Нет"]}]}}],rh=[{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"vnutri_est","ryadom_est"),isVisible:e=>{let t=!0;return t=t&&!Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Квартиры"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Квартиры)"})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vnutri_est"),columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Холодильник","Телевизор","Кондиционер","Стиральная машина","Мусоропровод","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("ryadom_est"),columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"vnutri_est","ryadom_est"),isVisible:e=>{let t=!0;return t=t&&!Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&Ee(e.podkategoriya_obekta,"Дома"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Дома)"})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vnutri_est"),columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Холодильник","Телевизор","Кондиционер","Стиральная машина","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг","Полисадник"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("ryadom_est"),columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Охрана","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"vnutri_est","ryadom_est"),isVisible:e=>{let t=!1;return t=t||Ee(e.podkategoriya_obekta,"Земля/Участок"),t=t&&!Ee(e.kategoriya_obekta,"Коммерческая"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Земля/Участок)"})},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vnutri_est"),columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Забор","Катлаван","Пожарная сигнализация","Видеонаблюдение","Сигнализация","Разгрузочный пандус"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("ryadom_est"),columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Охрана","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}}],sh=[{type:o.Paper,hidden:e=>!Ds(e.fieldVisibility,"zagolovok","kategoriya_obekta","prodazha","arenda","podkategoriya_obekta","raspolozhenie_obekta","istochnik","tip_nedvizhimosti","vid_obekta","vid_liczenzii"),fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Основная информация"})},{type:o.Text,hidden:e=>!e.fieldVisibility.has("zagolovok"),outlined:!1,name:"zagolovok",title:"Заголовок",placeholder:"Введите текст"},{type:o.Fragment,isVisible:e=>Ee(e.kategoriya_obekta,"Коммерческая"),fields:[{type:o.Combo,hidden:e=>!e.fieldVisibility.has("kategoriya_obekta"),outlined:!1,columns:"4",name:"kategoriya_obekta",title:"Категория объекта",itemList:["Жилая","Коммерческая","От застройщика"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("prodazha"),outlined:!1,columns:"4",name:"prodazha",title:"Покупка",itemList:["Прямая продажа","Рассрочка","Через банк","Обмен"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("arenda"),outlined:!1,columns:"4",name:"arenda",title:"Аренда",itemList:["Долгосрочная","Ежемесячная","Посуточная"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("podkategoriya_obekta"),outlined:!1,columns:"4",name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>Ee(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок","Здания","Базы"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("raspolozhenie_obekta"),isVisible:e=>{if(Ee(e.kategoriya_obekta,"Коммерческая")){if(Ee(e.podkategoriya_obekta,"Дома","Квартиры"))return!1;if(Ee(e.podkategoriya_obekta,"Земля/Участок"))return!1}return!0},columns:"4",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("istochnik"),isVisible:e=>!(!Ee(e.kategoriya_obekta,"Коммерческая")||!Ee(e.podkategoriya_obekta,"Дома"))||!Ee(e.podkategoriya_obekta,"Дома"),columns:"4",outlined:!1,name:"istochnik",title:"Источник",itemList:["По звонку","Личные связи","Самостоятельный поиск","Риелтор","С сайта","Прибытие в офис","OLX","Facebook","Instagram","Telegram","Эксклюзив","Другое"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("tip_nedvizhimosti"),isVisible:e=>!(!Ee(e.podkategoriya_obekta,"Квартиры")||!Ee(e.kategoriya_obekta,"Коммерческая","Жилая")),columns:"4",outlined:!1,name:"tip_nedvizhimosti",title:"Тип недвижимости",itemList:["Вторичное жилье","Новостройка"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("vid_obekta"),isVisible:e=>{let t=!1;return t=t||Ee(e.podkategoriya_obekta,"Дома"),t},columns:"4",outlined:!1,name:"vid_obekta",title:"Вид объекта",itemList:["Дом","Коттедж","Таунхаус","ЖАКТ","Часть дома","Дача"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vid_liczenzii"),isVisible:e=>!(!Ee(e.kategoriya_obekta,"Коммерческая")||!Ee(e.podkategoriya_obekta,"Земля/Участок")),columns:"4",outlined:!1,name:"vid_liczenzii",title:"Вид лицензии",itemList:["Коммерческая","Жилая"]}]},{type:o.Fragment,hidden:e=>!Ds(e.fieldVisibility,"kategoriya_obekta","prodazha","arenda","podkategoriya_obekta","istochnik","tip_nedvizhimosti","vid_obekta","raspolozhenie_obekta","vid_liczenzii"),isVisible:e=>!Ee(e.kategoriya_obekta,"Коммерческая"),fields:[{type:o.Combo,hidden:e=>!e.fieldVisibility.has("kategoriya_obekta"),outlined:!1,columns:"4",name:"kategoriya_obekta",title:"Категория объекта",itemList:["Жилая","Коммерческая","От застройщика"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("prodazha"),outlined:!1,columns:"4",name:"prodazha",title:"Покупка",itemList:["Прямая продажа","Рассрочка","Через банк","Обмен"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("arenda"),outlined:!1,columns:"4",name:"arenda",title:"Аренда",itemList:["Долгосрочная","Ежемесячная","Посуточная"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("podkategoriya_obekta"),outlined:!1,columns:"4",name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>!Ee(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("istochnik"),columns:"4",outlined:!1,name:"istochnik",title:"Источник",itemList:["По звонку","Личные связи","Самостоятельный поиск","Риелтор","С сайта","Прибытие в офис","OLX","Facebook","Instagram","Telegram","Эксклюзив","Другое"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("tip_nedvizhimosti"),isVisible:e=>!!Ee(e.podkategoriya_obekta,"Квартиры")&&!Ee(e.kategoriya_obekta,"Коммерческая"),columns:"4",outlined:!1,name:"tip_nedvizhimosti",title:"Тип недвижимости",itemList:["Вторичное жилье","Новостройка"]},{type:o.Combo,hidden:e=>!e.fieldVisibility.has("vid_obekta"),isVisible:e=>{let t=!1;return t=t||Ee(e.podkategoriya_obekta,"Дома"),t},columns:"4",outlined:!1,name:"vid_obekta",title:"Вид объекта",itemList:["Дом","Коттедж","Таунхаус","ЖАКТ","Часть дома","Дача"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("raspolozhenie_obekta"),isVisible:e=>{let t=!1;return t=t||Ee(e.kategoriya_obekta,"Коммерческая"),t=t&&!Ee(e.podkategoriya_obekta,"Дома"),t=t&&!Ee(e.podkategoriya_obekta,"Земля/Участок"),t},columns:"4",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:o.Items,hidden:e=>!e.fieldVisibility.has("vid_liczenzii"),isVisible:e=>{let t=!1;return t=t||Ee(e.podkategoriya_obekta,"Земля/Участок"),t},columns:"4",outlined:!1,name:"vid_liczenzii",title:"Вид лицензии",itemList:["Коммерческая","Жилая"]}]}]},...nh,{type:o.Box,sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gridColumnGap:"8px"},fields:[{type:o.Component,fieldRightMargin:"1",fieldBottomMargin:"1",element:ah},{type:o.Box,sx:{display:"grid",gridTemplateRows:"1fr auto",gridRowGap:"8px"},fields:[{type:o.Component,fieldRightMargin:"1",fieldBottomMargin:"1",element:({onChange:e,_fieldData:t})=>he(dm,{onChange:e,fieldData:t})},{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",hidden:e=>!e.fieldVisibility.has("opisanie"),fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Описание объекта"})},{type:o.Text,hidden:e=>!e.fieldVisibility.has("opisanie"),inputRows:6,outlined:!1,name:"opisanie",title:"Описание"}]}]}]},...rh,...lh,...oh,{type:o.Component,features:["withBottomSaveButton"],watchOneContext:!0,element:Vp}];window.bid_fields=sh;const dh=[{type:He.Link,isVisible:()=>!!bs.routerService.previousPath,action:"list-action",label:he(De,{sx:{display:"block"}})},{type:He.Link,action:"list-action",label:"Заявки"},{type:He.Link,action:"list-action",label:"Редактирование заявки"},{type:He.Button,isDisabled:({hasChanged:e})=>!e,action:"save-action",label:"Сохранить"}],ch=[{type:He.Link,isVisible:()=>!!bs.routerService.previousPath,action:"list-action",label:he(De,{sx:{display:"block"}})},{type:He.Link,action:"list-action",label:"Заявки"},{type:He.Link,action:"list-action",label:"Просмотр заявки"},{type:He.Button,isDisabled:({payload:{permissions:e}})=>!e.hasBidUpdatePermission,action:"edit-action",label:"Редактировать"}],mh=[{action:"pick-allowance-action",isDisabled:async({data:{parameter:e}})=>{const t=bs.appwriteService.currentUser.$id;return H(U(Promise.resolve(e.system_created_by===t),bs.featureService.hasFeature("vizhu_kontakty_pod_bronyu")))},label:"Поделиться объектом"},{action:"toggle-only-for-owner-action",isVisible:({data:{parameter:e}})=>!!e.system_only_for_owner,isDisabled:async({data:{parameter:e}})=>{const t=bs.appwriteService.currentUser.$id;return H(U(Promise.resolve(e.system_created_by===t),bs.featureService.hasFeature("vizhu_kontakty_pod_bronyu")))},icon:Et,label:"Эксклюзив"},{action:"toggle-only-for-owner-action",isVisible:({data:{parameter:e}})=>!e.system_only_for_owner,isDisabled:async({data:{parameter:e}})=>{const t=bs.appwriteService.currentUser.$id;return H(U(Promise.resolve(e.system_created_by===t),bs.featureService.hasFeature("vizhu_kontakty_pod_bronyu")))},icon:Pt,label:"Эксклюзив"},{action:"superadmin-remove-action",isVisible:({payload:e})=>e.permissions.hasSuperAdminFlagPermission,label:"Удалить навсегда"}],ph="real-estate__headerRoot",uh=[{type:He.Link,isVisible:()=>!!bs.routerService.previousPath,action:"list-action",label:he(De,{sx:{display:"block"}})},{type:He.Link,action:"list-action",label:"Заявки"},{type:He.Link,action:"list-action",label:"Просмотр служебных комментариев"}],hh=[{type:He.Link,isVisible:()=>!!bs.routerService.previousPath,action:"list-action",label:he(De,{sx:{display:"block"}})},{type:He.Link,action:"list-action",label:"Заявки"},{type:He.Link,action:"list-action",label:"Просмотр задач"}],yh=[{id:"list",element:({payload:e})=>he(Ji,{history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),routes:Mu,payload:e}),isActive:e=>ws(["/bid","/bid_rent","/bid_sell","/bid_archive"],e),isAvailable:()=>!1},{id:"create",element:({payload:e})=>{const{elementRef:t,size:i}=Di(),a=ip({payload:e}),[o,l]=ue.useState((()=>({activeStep:0,contact_id:null,fio:"",telefon:"",tip_klienta:null}))),[n,r]=ue.useState([]),[s,d]=ue.useState(!1),[c,m]=ue.useState(!1),p=ue.useMemo((()=>new Date(Date.now()+1e4)),[o.activeStep]);ue.useEffect((()=>{m(!1)}),[o.activeStep]);const u=e=>l((t=>({...t,activeStep:e}))),{activeStep:h}=o,{classes:y}=$u(),{handleLoadStart:b,handleLoadEnd:_,loading:v,unblock:f}=$e({history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)}),g=Dt(o),{execute:k}=be((async()=>{try{let{contact_id:e,fio:t,telefon:i,tip_klienta:a}=g.current;if(!e){e=(await bs.contactViewService.create({fio:t,telefon:i,tip_klienta:a,"data-sozdaniya_klienta":qi.currentDate()})).$id}const{id:o}=await bs.bidViewService.create({contact_id:e});f(),bs.routerService.push("/bid_edit/".concat(o),{viewRedirectFlag:!0})}catch(e){bs.alertService.notify(jr(e))}}),{onLoadStart:b,onLoadEnd:_}),w=async()=>{if(d(!0),o.fio||o.telefon){if(0===h){const{rows:e,total:t}=await bs.contactRequestService.findDuplicates(o.telefon);r(e),u(0===t?2:1)}1===h&&u(2),2===h&&await k()}},S=()=>{let e=!1;return 1===h&&(e=e||!c),e=e||v,e=e||3===h,e};return he(Oi,{children:[he(Xe,{items:Wu}),he(ai,{className:y.root,children:[he(Pi,{className:y.header,activeStep:h,children:[he(Ei,{completed:h>0,children:he(Ni,{children:"Первичные данные"})},0),he(Ei,{completed:h>1,children:he(Ni,{children:"Поиск дубликатов"})},1),he(Ei,{completed:h>2,children:he(Ni,{children:"Создание заявки"})},2)]}),he("div",{className:y.adjust}),he(Te,{ref:t,className:y.content,children:0===h?he(Je,{sx:{pl:1,pr:1,pt:2,pb:3},handler:o,onChange:l,dirty:s,fields:Hu}):1===h?he(Wi,{sx:{height:i.height},component:Ct,minRowHeight:54,children:n.map((({fio:e,telefon:t,$id:i,tip_klienta:n,index:r,system_created_by:s},d)=>he(Me,{disableRipple:!0,className:Ce({[y.listItemBackground]:d%2==1}),onClick:()=>{l((e=>({...e,contact_id:i,activeStep:2})))},dense:!0,children:[he(Ui,{children:he(Hi,{edge:"start",checked:o.contact_id===i,sx:{marginLeft:"0 !important"},disableRipple:!0})}),he(ft,{primary:e,secondary:he(Le,{Loader:Gu,children:async()=>{const e=await bs.userViewService.tryRead(s),t=e?"Создал "+[e.last_name,e.first_name,e.middle_name].filter((e=>e)).join(" "):"";return["№".concat(r),t,n].filter((e=>e)).join(", ")}})}),he(Ht,{variant:"outlined",onClick:e=>{e.preventDefault(),e.stopPropagation(),a(i)},sx:{ml:3},children:"Показать контакт"})]},d)))}):2===h?he(Je,{sx:{pl:1,pr:1,pt:2,pb:3},handler:o,dirty:s,fields:Hu}):null}),he(Pe,{sx:{pl:1,pr:1,pb:1},justifyContent:"space-between",flexDirection:"row",children:[he(pt,{disabled:v||0===h,fallback:bs.errorService.handleGlobalError,onClick:()=>{l((e=>({...e,contact_id:null}))),0===n.length?u(0):u(h-1)},sx:{mt:1},variant:"contained",onLoadStart:b,onLoadEnd:_,children:"Назад"}),he(pt,1===h?{disabled:S(),fallback:bs.errorService.handleGlobalError,onClick:w,sx:{mt:1},variant:"contained",onLoadStart:b,onLoadEnd:_,children:he($i,{expireAt:p,onExpire:()=>m(!0),children:"Не вижу дубликат"})}:2===h?{disabled:S(),fallback:bs.errorService.handleGlobalError,onClick:w,sx:{mt:1},variant:"contained",onLoadStart:b,onLoadEnd:_,children:"Создать заявку"}:{disabled:S(),fallback:bs.errorService.handleGlobalError,onClick:w,sx:{mt:1},variant:"contained",onLoadStart:b,onLoadEnd:_,children:"Далее"})]})]})]})},isActive:e=>ws(["/bid/create"],e),isAvailable:()=>!1},{id:"contact",element:({formState:e,payload:t,data:i,beginSave:a,onChange:o})=>{const l=Ke(i);return he(_e,{children:[he(Xe,{items:Du,onAction:e=>{"list-action"===e&&bs.routerService.back("/contact"),"save-action"===e&&a()},payload:e}),he(gs,{}),he(Ru,{payload:t,mode:t.menuMode,children:[he(Je,{changeSubject:l,features:()=>({...t.permissions,withBottomSaveButton:!0}),handler:()=>i,payload:()=>({...t,beginSave:a}),context:e,fields:Kp,onChange:o}),he(Ze,{}),he(Qe,{})]})]})},isActive:e=>ws(["/bid_edit/:id/contact"],e)},{id:"parameter",element:({payload:e,formState:t,beginSave:i,data:a,onChange:o})=>{const l=Ke(a);return he(_e,{children:[he(Xe,{items:dh,onAction:e=>{"list-action"===e&&bs.routerService.back("/bid"),"save-action"===e&&i()},payload:t}),he(gs,{}),he(Ru,{payload:e,mode:e.menuMode,children:[he(Je,{changeSubject:l,features:()=>({...e.permissions,withBottomSaveButton:!0}),fields:sh,payload:()=>({...e,beginSave:i}),context:t,handler:()=>a,onChange:o}),he(Ze,{}),he(Qe,{})]})]})},isActive:e=>ws(["/bid_edit/:id","/bid_edit/:id/parameter"],e)},{id:"documents",element:({data:e,onChange:t,payload:i,beginSave:a,formState:o})=>{const{handleLoadStart:l,handleLoadEnd:n,loading:r}=$e({history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)});return he(_e,{children:[he(Xe,{items:Yu,payload:o,onAction:e=>{"list-action"===e&&bs.routerService.back("/apartment"),"save-action"===e&&a()}}),he(gs,{}),he(Ru,{payload:i,mode:i.menuMode,children:[he(ai,{sx:{p:1},children:he(Ii,{disabled:r,accept:"*",multiple:!0,items:e,tr:async e=>await bs.appwriteService.tryReadFileName(e)||e,fallback:bs.errorService.handleGlobalError,onClick:async e=>{const t=await bs.appwriteService.getFileURL(e),i=await bs.appwriteService.readFileName(e);yt(t,i)},onUpload:e=>bs.appwriteService.uploadFile(e),onChange:async e=>{t(e)},onLoadStart:l,onLoadEnd:n})}),he(Ze,{}),he(Qe,{})]})]})},isActive:e=>ws(["/bid_edit/:id/documents"],e)},{id:"contact",element:({params:{id:e},formState:t,payload:i,data:a,beginSave:o,onChange:l})=>{const{pickData:n,render:r}=Ge({AfterTitle:({onClose:e})=>he(Be,{size:"small",onClick:e,children:he(Ye,{})}),fields:Kp,payload:i,features:i.permissions,outlinePaper:!0,handler:async()=>{const t=await Uu(e);return await bs.contactViewService.tryRead(t)},fullScreen:!0,title:"Редактировать",onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),onSubmit:async t=>{let a=!0;try{if(t){const a=await Uu(e);await bs.contactViewService.update(a,await bs.polishService.polishContact(t,i))}}catch(o){a=!1;const e=jr(o);return bs.alertService.notify(e),!1}finally{return a}},submitLabel:"Сохранить"}),s=Ke(a);return he(_e,{children:[he(Xe,{items:Nu,actions:Ou,onAction:e=>{"list-action"===e&&bs.routerService.back("/bid"),"save-action"===e&&o(),"edit-action"===e&&n(),"show-contact-action"===e&&bs.routerService.push("/contact_view/".concat(t.data.parameter.contact_id))},payload:t}),he(gs,{}),he(Eu,{payload:i,mode:i.menuMode,children:[he(Je,{readonly:!0,handler:()=>a,fields:Sd,features:i.permissions,changeSubject:s,payload:i,onChange:l}),he(Ze,{}),he(Qe,{})]}),r()]})},isActive:e=>ws(["/bid_view/:id/contact"],e)},{id:"parameter",element:({params:{id:e="create"},payload:t,formState:i,data:a,onChange:o})=>{const l=(({bidId:e})=>{const{handleLoadStart:t,handleLoadEnd:i}=$e({history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)}),{execute:a}=be((async()=>{await bs.featureService.hasFeature("superadmin")&&(await bs.cleanupService.removeBid(e),bs.routerService.push("/bid"))}),{onLoadStart:t,onLoadEnd:i,fallback:bs.errorService.handleGlobalError}),o=zt({title:"Вы уверены?",msg:"Удаление заявки сотрет соответствующие записи в заявках, сделках. Продолжить?"});return()=>o().then((e=>{e&&a()}))})({bidId:e}),{pickData:n,render:r}=Ge({AfterTitle:({onClose:e})=>he(Be,{size:"small",onClick:e,children:he(Ye,{})}),fields:sh,payload:t,features:t.permissions,outlinePaper:!0,handler:async()=>await bs.bidViewService.tryRead(e),fullScreen:!0,title:"Редактировать",onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),onSubmit:async i=>{let a=!0;try{i&&await bs.bidViewService.update(e,await bs.polishService.polishBid(i,t))}catch(o){a=!1;const e=jr(o);return bs.alertService.notify(e),!1}finally{return a}},submitLabel:"Сохранить"}),s=qp({title:"Поделиться заявкой",payload:t,features:t.permissions,selectedRows:a.system_allowance||[]}),{execute:d}=be((async t=>{if("list-action"===t&&bs.routerService.back("/bid"),"edit-action"===t&&n(),"toggle-only-for-owner-action"===t&&await bs.bidViewService.toggleOnlyForOwner(e),"pick-allowance-action"===t){const t=await s();if(!t)return;await bs.bidViewService.updateAllowance(e,t)}"superadmin-remove-action"===t&&l()}),{onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)}),c=Ke(a);return he(_e,{children:[he(Xe,{items:ch,actions:mh,onAction:async e=>{await d(e)},payload:i}),he(gs,{}),he(Eu,{payload:t,mode:t.menuMode,children:[he(Je,{readonly:!0,changeSubject:c,features:t.permissions,fields:cm,handler:()=>a,payload:t,onChange:o}),he(Ze,{}),he(Qe,{})]}),r()]})},isActive:e=>ws(["/bid_view/:id","/bid_view/:id/parameter"],e)},{id:"history",element:({formState:e,payload:t})=>{const[i,a]=ue.useState([]),{size:o}=Di({target:document.body,selector:"main",compute:e=>{var i;let{height:a,width:o}=e;if(t.menuMode===j.Tabs){const e=document.querySelector(".".concat(Yi));a-=(null==e?void 0:e.offsetHeight)||0}return a-=(null==(i=document.querySelector(".".concat(Xu)))?void 0:i.offsetHeight)||0,a-=50,a=Math.min(window.innerHeight-50,a),{width:o,height:a}}}),{loading:l,execute:n}=be((async e=>{if(e){const e=vs("id"),t=await bs.dealHistoryViewService.findAllByBidId(e);a(t)}}),{fallback:bs.errorService.handleGlobalError,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)});return he(_e,{children:[he("div",{className:Xu,children:[he(Xe,{payload:e,items:Ju,onAction:e=>{"list-action"===e&&bs.routerService.back("/bid")}}),he(gs,{})]}),he(Eu,{payload:t,mode:t.menuMode,children:he(Wi,{sx:{height:o.height},minHeight:72,loading:l,onDataRequest:e=>{n(e)},children:he(Pe,{spacing:1,children:i.map((e=>he(up,{loading:l,status:"info",item:e},e.$id)))})})})]})},isActive:e=>ws(["/bid_view/:id/history"],e)},{id:"tasks",element:({formState:e,payload:t})=>he(_e,{children:[he("div",{className:"real-estate__headerRoot",children:[he(Xe,{payload:e,items:hh,onAction:e=>{"list-action"===e&&bs.routerService.back("/apartment")}}),he(gs,{})]}),he(Eu,{payload:t,mode:t.menuMode,children:he(wu,{withTransparentHeader:!0,contactId:e.data.parameter.contact_id,payload:t})})]}),isActive:e=>ws(["/bid_view/:id/tasks"],e)},{id:"documents",element:({params:{id:e},data:t,payload:i,formState:a})=>{const{render:o,pickFiles:l}=mp({data:t,onSubmit:async t=>{await bs.bidViewService.update(e,{...a.data.parameter,bid_files:t})}});return he(_e,{children:[he(Xe,{items:Ku,payload:a,onAction:e=>{"list-action"===e&&bs.routerService.back("/bid"),"edit-action"===e&&l()}}),he(gs,{}),he(Eu,{payload:i,mode:i.menuMode,children:[he(ai,{sx:{p:1},children:he(Ii,{disabled:!0,accept:"*",multiple:!0,items:t,tr:async e=>await bs.appwriteService.tryReadFileName(e)||e,fallback:bs.errorService.handleGlobalError,onClick:async e=>{const t=await bs.appwriteService.getFileURL(e),i=await bs.appwriteService.readFileName(e);yt(t,i)},onUpload:e=>bs.appwriteService.uploadFile(e)})}),he(Ze,{}),he(Qe,{})]}),o()]})},isActive:e=>ws(["/bid_view/:id/documents"],e)},{id:"service_comment",element:({formState:e,payload:t})=>{const[i,a]=ue.useState([]),{size:o}=Di({target:document.body,selector:"main",compute:e=>{var i;let{height:a,width:o}=e;if(t.menuMode===j.Tabs){const e=document.querySelector(".".concat(Yi));a-=(null==e?void 0:e.offsetHeight)||0}return a-=(null==(i=document.querySelector(".".concat(ph)))?void 0:i.offsetHeight)||0,a-=50,a=Math.min(window.innerHeight-50,a),{width:o,height:a}}}),{execute:l}=be((async()=>{const e=vs("id"),t=await bs.serviceCommentViewService.findByBidId(e);a(await Promise.all(t.map((async({$id:e,user_id:t,file_id:i,comment:a,$createdAt:o})=>{const l=await bs.userViewService.tryRead(t);if(!l)return null;const n=i?await bs.appwriteService.tryReadFileName(i):"";return{id:e,message:a,fileId:i,userId:t,displayName:[l.last_name,l.first_name,l.middle_name,r(o).format("DD.MM.YYYY / HH:mm")].join(" "),fileName:n,avatar:l.avatar||""}})).filter((e=>!!e)).reverse()))}),{fallback:bs.errorService.handleGlobalError,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)});ue.useEffect((()=>{l()}),[]),ue.useEffect((()=>bs.serviceCommentViewService.createSubject.subscribe((e=>{const t=vs("id");e.bid_id===t&&l()}))),[]);return he(_e,{children:[he("div",{className:ph,children:[he(Xe,{payload:e,items:uh,onAction:e=>{"list-action"===e&&bs.routerService.back("/apartment")}}),he(gs,{})]}),he(Eu,{payload:t,mode:t.menuMode,children:he(md,{payload:t,style:{height:o.height},messages:i,onText:async e=>{const t=bs.appwriteService.currentUser.$id,i=vs("id");await bs.serviceCommentViewService.create({user_id:t,comment:e,bid_id:i,apartment_id:null,contact_id:null,file_id:null}),await l()},onFile:async(e,t)=>{const i=bs.appwriteService.currentUser.$id,a=vs("id");await bs.serviceCommentViewService.create({user_id:i,comment:e,apartment_id:a,bid_id:null,contact_id:null,file_id:t}),await l()}})})]})},isActive:e=>ws(["/bid_view/:id/service_comment"],e)}],bh=async e=>{if("create"===e)return{"data-sozdaniya_klienta":qi.currentDate()};const{contact_id:t}=await bs.bidViewService.read(e);return await bs.contactViewService.tryRead(t)},_h=({id:e="create"})=>{const t=async(t,i,{afterSave:a})=>{let o=!0;try{const o=await bs.polishService.polishBid(h.get(t,"parameter")||{},i),l=await bs.polishService.polishContact(h.get(t,"contact")||{},i),n=h.get(t,"documents")||[];let r=h.get(t,"parameter.contact_id");h.set(t,"parameter.bid_files",n);const s=!!r&&await bs.contactViewService.tryRead(r);if(r&&s)await bs.contactViewService.update(r,l);else{const{id:e}=await bs.contactViewService.create(l);r=e}if(h.set(t,"parameter.contact_id",r),"create"===e){const{id:e}=await bs.bidViewService.create(o);await a(),bs.routerService.push("/bid_edit/".concat(e))}else await bs.bidViewService.update(e,o);bs.routerService.hasViewRedirectFlag()&&(await a(),bs.routerService.push("/bid_view/".concat(e))),bs.alertService.notify("Изменения сохранены")}catch(l){o=!1;const e=jr(l);bs.alertService.notify(e)}finally{return o}},i=Ve();return ue.useEffect((()=>bs.contactViewService.updateSubject.subscribe((async([e,t])=>{const a=vs("id");if(!a)return;const o=await bs.bidViewService.read(a);e===(null==o?void 0:o.contact_id)&&i.next(["contact",t])}))),[]),ue.useEffect((()=>bs.bidViewService.updateSubject.subscribe((([t,a])=>{e===t&&(i.next(["parameter",a]),i.next(["documents",(null==a?void 0:a.bid_files)||[]]))}))),[]),he(ra,{state:async()=>[await bh(e),await bs.bidViewService.tryRead(e),await bs.settingsViewService.getMasterDetailMode(),await bs.permissionService.getPermissions(),await bs.featureService.getAccessLevel(),await bs.visibilityService.getFieldVisibilitySet()],reloadSubject:bs.layoutService.reloadOutletSubject,fallback:bs.errorService.handleGlobalError,children:async([a,o,l,n,r,s])=>he(Ji,{history:bs.routerService,waitForChangesDelay:tl,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),routes:yh,params:{id:e},initialData:{contact:a,parameter:o,documents:(null==o?void 0:o.bid_files)||[]},payload:()=>({menuMode:l,permissions:n,accessLevel:r,fieldVisibility:s,id:e}),changeSubject:i,onChange:console.log,onSubmit:t})})},vh=[{id:"objects",label:"Объекты",isDisabled:()=>!0},{id:"bids",label:"Заявки",isDisabled:()=>!0},{id:"contact",label:"Контакт",isActive:()=>!0},{id:"tasks",isDisabled:()=>!0,label:"Задачи"},{id:"service_comment",isDisabled:()=>!0,label:"Служебный комментарий"},{id:"history",isDisabled:()=>!0,label:"История"}],fh=(e,t)=>{if(t)return;const i=vs("id","create");"contact"===e&&bs.routerService.replace("/contact_edit/".concat(i,"/contact")),"tasks"===e&&bs.routerService.replace("/contact_edit/".concat(i,"/tasks")),"history"===e&&bs.routerService.replace("/contact_edit/".concat(i,"/history"))},gh=({payload:e,children:t,mode:i=j.Paper})=>{const a=ue.useMemo((()=>"tabs"===i?j.Tabs:j.Paper),[i]);return he(fe,{withFixedPos:!0,fixedPosHeaderAdjust:i===j.Paper?85:64,mode:a,options:vh,payload:e,onActiveOptionChange:fh,children:t})},kh=[{type:He.Link,isVisible:()=>!!bs.routerService.previousPath,action:"list-action",label:he(De,{sx:{display:"block"}})},{type:He.Link,action:"list-action",label:"Список контактов"},{type:He.Link,action:"user-list-action",label:"Данные контакта"},{type:He.Button,isDisabled:({hasChanged:e})=>!e,action:"save-action",label:"Сохранить"}],wh=[{id:"objects",label:"Объекты",isActive:()=>ws(["/contact_view/:id/objects"])},{id:"bids",label:"Заявки",isActive:()=>ws(["/contact_view/:id/bids"])},{id:"contact",label:"Контакт",isActive:()=>ws(["/contact_view/:id","/contact_view/:id/contact"])},{id:"tasks",label:"Задачи",isActive:()=>ws(["/contact_view/:id/tasks"])},{id:"service_comment",label:"Служебный комментарий",isActive:()=>ws(["/contact_view/:id/service_comment"])},{id:"history",label:"История",isActive:()=>ws(["/contact_view/:id/history"])}],Sh=(e,t)=>{if(t)return;const i=vs("id","create");"objects"===e&&bs.routerService.replace("/contact_view/".concat(i,"/objects")),"bids"===e&&bs.routerService.replace("/contact_view/".concat(i,"/bids")),"contact"===e&&bs.routerService.replace("/contact_view/".concat(i,"/contact")),"tasks"===e&&bs.routerService.replace("/contact_view/".concat(i,"/tasks")),"service_comment"===e&&bs.routerService.replace("/contact_view/".concat(i,"/service_comment")),"history"===e&&bs.routerService.replace("/contact_view/".concat(i,"/history"))},zh=({children:e,payload:t,mode:i=j.Paper})=>{const a=ue.useMemo((()=>"tabs"===i?j.Tabs:j.Paper),[i]);return he(fe,{withFixedPos:!0,payload:t,fixedPosHeaderAdjust:i===j.Paper?85:64,mode:a,options:wh,onActiveOptionChange:Sh,children:e})},Vh=[{type:He.Link,isVisible:()=>!!bs.routerService.previousPath,action:"list-action",label:he(De,{sx:{display:"block"}})},{type:He.Link,action:"list-action",label:"Контакты"},{type:He.Link,action:"user-list-action",label:"Данные контакта"},{type:He.Button,isDisabled:({payload:{permissions:e}})=>!e.hasContactUpdatePermission,action:"edit-action",label:"Редактировать"}],xh=[{action:"superadmin-remove-action",isVisible:({payload:e})=>e.permissions.hasSuperAdminFlagPermission,label:"Удалить навсегда"}],Ah=[{type:o.Fragment,isVisible:({activeStep:e})=>0===e,fields:[{type:o.Component,element:()=>he(Ne,{variant:"h6",fontWeight:"bold",mb:2,children:"Данные контакта"})},{type:o.Text,outlined:!0,title:"Ф.И.О",isInvalid:({fio:e})=>e?null:"Обязательно к заполнению",description:"Фамилия Имя Отчество контакта",name:"fio"},{type:o.Text,outlined:!0,title:"Телефон",isInvalid:({telefon:e})=>e?null:"Обязательно к заполнению",description:"Телефон контакта",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon"},{type:o.Combo,outlined:!0,name:"tip_klienta",title:"Тип клиента",itemList:["Собственник","Доверенное лицо","Риелтор","Информатор","Застройщик"]}]},{type:o.Fragment,isVisible:({activeStep:e})=>2===e,fields:[{type:o.Component,element:()=>he(Ne,{variant:"h6",fontWeight:"bold",mb:1,children:"Предпросмотр"})},{type:o.Component,isVisible:({contact_id:e})=>!e,element:()=>he(Ri,{variant:"outlined",color:"warning",sx:{mb:2},children:"Создавая новый контакт, убедитесь, что нет дубликата"})},{type:o.Component,isVisible:({contact_id:e})=>!!e,element:()=>he(Ri,{variant:"outlined",color:"info",sx:{mb:2},children:"Убедитесь, что это контактные данные клиента"})},{type:o.Text,isVisible:({contact_id:e})=>!!e,compute:async({contact_id:e})=>{const{fio:t=""}=await bs.contactViewService.tryRead(e)||{};return t},disabled:!0,outlined:!0,title:"Ф.И.О"},{type:o.Text,isVisible:({contact_id:e})=>!!e,compute:async({contact_id:e})=>{const{telefon:t=""}=await bs.contactViewService.tryRead(e)||{};return t},disabled:!0,outlined:!0,title:"Телефон",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000"},{type:o.Text,isVisible:({contact_id:e})=>!!e,fieldBottomMargin:"0",compute:async({contact_id:e})=>{const{tip_klienta:t=null}=await bs.contactViewService.tryRead(e)||{};return ae(t)||"Не указано"},disabled:!0,outlined:!0,name:"tip_klienta",title:"Тип клиента"},{type:o.Text,isVisible:({contact_id:e})=>!e,outlined:!0,title:"Ф.И.О",isInvalid:({fio:e})=>e?null:"Обязательно к заполнению",description:"Фамилия Имя Отчество контакта",name:"fio"},{type:o.Text,isVisible:({contact_id:e})=>!e,outlined:!0,title:"Телефон",isInvalid:({telefon:e})=>e?null:"Обязательно к заполнению",description:"Телефон контакта",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon"},{type:o.Combo,isVisible:({contact_id:e})=>!e,outlined:!0,name:"tip_klienta",title:"Тип клиента",itemList:["Собственник","Доверенное лицо","Риелтор","Информатор","Застройщик"]}]}],Th=[{type:He.Link,action:"list-action",label:"Список контактов"},{type:He.Link,action:"list-action",label:"Создание контакта"}],Ch=Fs()((e=>({root:{position:"relative",overflow:"hidden"},header:{position:"absolute",top:0,left:0,height:65,paddingLeft:e.spacing(2),paddingRight:e.spacing(2),background:"whitesmoke",width:"100%"},content:{minHeight:300},adjust:{paddingBottom:65},listItemBackground:{background:ze(e.palette.primary.main,.05)}}))),Fh=Se.createLoader(12),Lh="real-estate__headerRoot",Ih=[{type:He.Link,isVisible:()=>!!bs.routerService.previousPath,action:"list-action",label:he(De,{sx:{display:"block"}})},{type:He.Link,action:"list-action",label:"Контакты"},{type:He.Link,action:"list-action",label:"История контакта"}],Mh=[{type:tt.Compute,sortable:!1,field:"index",headerName:"Номер",element:({index:e})=>he(gt,{content:e}),width:()=>100},{type:tt.Compute,field:"fio",compute:e=>e.fio||"",headerName:"Ф.И.О.",width:()=>125},{type:tt.Compute,isVisible:({payload:{permissions:e}})=>e.hasPreviewModeDisabled,field:"phone",serialize:async e=>await bs.permissionRequestService.getOwnerContactPermissionByContactId(e.id)?e.telefon||"":"Скрыто",element:e=>he(rt,{payload:e.id,condition:e=>bs.permissionRequestService.getOwnerContactPermissionByContactId(e),Loading:"Загрузка",Else:"Скрыто",children:e.telefon||""}),headerName:"Телефон",width:()=>125},{type:tt.Compute,field:"tip_klienta",compute:e=>e.tip_klienta||"",headerName:"Тип клиента",width:()=>160},{type:tt.Compute,field:"status_klienta",compute:e=>e.status_klienta||"",headerName:"Статус клиента",width:()=>180},{type:tt.Compute,sortable:!1,field:"status",headerName:"Статус сделки",compute:async({id:e})=>await bs.dealViewService.readStatusByContactId(e),width:()=>150},{type:tt.Action,headerName:"Действие",sortable:!1,width:()=>100}],jh=[{type:It.Add,isDisabled:(e,{permissions:t})=>!t.hasContactCreatePermission,label:"Создать"},{type:It.Menu,options:[{action:"add-action",isDisabled:(e,{permissions:t})=>!t.hasContactCreatePermission},{action:"update-now"},{action:"resort-action"},{action:"drop-filters"},{action:"excel-action",isVisible:(e,{permissions:t})=>t.hasOfficeManagerFlagPermission,label:"Скачать лист Excel",icon:jt}]}],Bh=[{label:"Создать копию",action:"copy-action",icon:Ot},{label:"Удалить",action:"remove-action",icon:Lt}],Rh=()=>window.innerHeight-100,Dh=[{type:He.Link,isVisible:()=>!!bs.routerService.previousPath,action:"list-action",label:he(De,{sx:{display:"block"}})},{type:He.Link,action:"list-action",label:"Контакты"},{type:He.Link,action:"list-action",label:"Задачи контакта"}],qh=e=>()=>he(Se,{handler:async()=>{bs.appwriteService.isAuthorized?await e():bs.routerService.push("/login_page")},height:"calc(100vh - 80px)"}),Ph=[{type:He.Link,isVisible:()=>!!bs.routerService.previousPath,action:"list-action",label:he(sa,{sx:{display:"block"}})},{type:He.Link,action:"list-action",label:"Контакты"},{type:He.Link,action:"list-action",label:"Объекты контакта"}],Eh=()=>window.innerHeight-220,Nh=[{type:He.Link,isVisible:()=>!!bs.routerService.previousPath,action:"list-action",label:he(sa,{sx:{display:"block"}})},{type:He.Link,action:"list-action",label:"Контакты"},{type:He.Link,action:"list-action",label:"Заявки контакта"}],Oh=()=>window.innerHeight-220,Uh="real-estate__headerRoot",Hh=[{type:He.Link,isVisible:()=>!!bs.routerService.previousPath,action:"list-action",label:he(De,{sx:{display:"block"}})},{type:He.Link,action:"list-action",label:"Контакты"},{type:He.Link,action:"list-action",label:"Просмотр служебных комментариев"}],Wh=[{id:"list",element:({payload:e})=>{const t=ip({payload:e}),i=Ve(bs.contactViewService.reloadSubject),{listProps:a}=Xi(bs.routerService.locationState,{fallback:bs.errorService.handleGlobalError}),o=Oc();return he(_e,{children:he(yi,{withSearch:!0,withSingleSort:!0,noInitialFilters:!0,fetchDebounce:el,reloadSubject:i,title:"Контакты",filterLabel:"Фильтры",heightRequest:Rh,AfterOperationList:Hc,rowActions:Bh,actions:jh,columns:Mh,handler:o,filters:Nc,onRowAction:async(e,t)=>{bs.layoutService.setAppbarLoader(!0);try{if("remove-action"===e&&(await bs.contactViewService.remove(t.id),i.next()),"copy-action"===e){const e=await bs.contactViewService.read(t.id);await bs.contactViewService.create(e),i.next()}}finally{bs.layoutService.setAppbarLoader(!1)}},onRowClick:async e=>{(await bs.permissionService.getPermissions()).hasContactViewPermission&&(async e=>{await bs.featureService.hasFeature("officemanager")?t(e):bs.routerService.push("/contact_view/".concat(e))})(e.id)},onAction:async t=>{"add-action"===t&&bs.routerService.push("/contact/create"),"excel-action"===t&&await uc({query:a,handler:o,payload:e,columns:Mh})},selectionMode:lt.Multiple,payload:e,...a})})},isActive:e=>ws(["/contact"],e),isAvailable:()=>!1},{id:"create",element:({payload:e})=>{const t=ip({payload:e}),{elementRef:i,size:a}=Di(),[o,l]=ue.useState((()=>({activeStep:0,contact_id:null,fio:"",telefon:"",tip_klienta:null}))),[n,r]=ue.useState([]),[s,d]=ue.useState(!1),[c,m]=ue.useState(!1),p=ue.useMemo((()=>new Date(Date.now()+1e4)),[o.activeStep]);ue.useEffect((()=>{m(!1)}),[o.activeStep]);const u=e=>l((t=>({...t,activeStep:e}))),{activeStep:h}=o,{classes:y}=Ch(),{handleLoadStart:b,handleLoadEnd:_,loading:v,unblock:f}=$e({history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)});Dt(o);const{execute:g}=be((async()=>{try{let{contact_id:e,fio:t,telefon:i,tip_klienta:a}=o;if(!e){e=(await bs.contactViewService.create({fio:t,telefon:i,tip_klienta:a,"data-sozdaniya_klienta":qi.currentDate()})).$id}f(),bs.routerService.push("/contact_view/".concat(e))}catch(e){bs.alertService.notify(jr(e))}}),{onLoadStart:b,onLoadEnd:_}),k=async()=>{if(d(!0),o.fio||o.telefon){if(0===h){const{rows:e,total:t}=await bs.contactRequestService.findDuplicates(o.telefon);r(e),u(0===t?2:1)}1===h&&u(2),2===h&&await g()}},w=()=>{let e=!1;return 1===h&&(e=e||!c),e=e||v,e=e||3===h,e};return he(Oi,{children:[he(Xe,{items:Th}),he(ai,{className:y.root,children:[he(Pi,{className:y.header,activeStep:h,children:[he(Ei,{completed:h>0,children:he(Ni,{children:"Первичные данные"})},0),he(Ei,{completed:h>1,children:he(Ni,{children:"Поиск дубликатов"})},1),he(Ei,{completed:h>2,children:he(Ni,{children:"Создание контакта"})},2)]}),he("div",{className:y.adjust}),he(Te,{ref:i,className:y.content,children:0===h?he(Je,{sx:{pl:1,pr:1,pt:2,pb:3},handler:o,onChange:l,dirty:s,fields:Ah}):1===h?he(Wi,{sx:{height:a.height},component:Ct,minRowHeight:54,children:n.map((({fio:e,telefon:i,$id:a,tip_klienta:n,index:r,system_created_by:s},d)=>he(Me,{disableRipple:!0,className:Ce({[y.listItemBackground]:d%2==1}),onClick:()=>{l((e=>({...e,contact_id:a,activeStep:2})))},dense:!0,children:[he(Ui,{children:he(Hi,{edge:"start",checked:o.contact_id===a,sx:{marginLeft:"0 !important"},disableRipple:!0})}),he(ft,{primary:e,secondary:he(Le,{Loader:Fh,children:async()=>{const e=await bs.userViewService.tryRead(s),t=e?"Создал "+[e.last_name,e.first_name,e.middle_name].filter((e=>e)).join(" "):"";return["№".concat(r),t,n].filter((e=>e)).join(", ")}})}),he(Ht,{variant:"outlined",onClick:e=>{e.preventDefault(),e.stopPropagation(),t(a)},sx:{ml:3},children:"Показать контакт"})]},d)))}):2===h?he(Je,{sx:{pl:1,pr:1,pt:2,pb:3},handler:o,dirty:s,fields:Ah}):null}),he(Pe,{sx:{pl:1,pr:1,pb:1},justifyContent:"space-between",flexDirection:"row",children:[he(pt,{disabled:v||0===h,fallback:bs.errorService.handleGlobalError,onClick:()=>{l((e=>({...e,contact_id:null}))),0===n.length?u(0):u(h-1)},sx:{mt:1},variant:"contained",onLoadStart:b,onLoadEnd:_,children:"Назад"}),he(pt,1===h?{disabled:w(),fallback:bs.errorService.handleGlobalError,onClick:k,sx:{mt:1},variant:"contained",onLoadStart:b,onLoadEnd:_,children:he($i,{expireAt:p,onExpire:()=>m(!0),children:"Не вижу дубликат"})}:2===h?{disabled:w(),fallback:bs.errorService.handleGlobalError,onClick:k,sx:{mt:1},variant:"contained",onLoadStart:b,onLoadEnd:_,children:"Перейти"}:{disabled:w(),fallback:bs.errorService.handleGlobalError,onClick:k,sx:{mt:1},variant:"contained",onLoadStart:b,onLoadEnd:_,children:"Далее"})]})]})]})},isActive:e=>ws(["/contact/create"],e),isAvailable:()=>!1},{id:"contact",element:({params:e,payload:t,formState:i,beginSave:a,onChange:o,data:l})=>{const n=Ke(l);return he(_e,{children:[he(Xe,{items:kh,onAction:e=>{"list-action"===e&&bs.routerService.back("/contact"),"save-action"===e&&a()},payload:i}),he(gs,{}),he(gh,{mode:t.menuMode,payload:t,children:[he(Je,{changeSubject:n,features:()=>({...t.permissions,withBottomSaveButton:!0}),handler:()=>l,payload:()=>({...t,beginSave:a}),context:i,fields:Kp,onChange:o}),he(Qe,{})]})]})},isActive:e=>ws(["/contact_edit/:id"],e)},{id:"contact",element:({formState:e,payload:t,params:{id:i}})=>{const a=Ym({payload:t}),{columns:o}=ti({columns:Nd,storageKey:"apartment_columns"}),l=ue.useMemo((()=>o.filter((({type:e})=>e!==tt.Action))),[o]);return he(_e,{children:[he(Xe,{items:Ph,onAction:e=>{"list-action"===e&&bs.routerService.back("/apartment")},payload:e}),he(gs,{}),he(zh,{mode:t.menuMode,payload:t,children:he(yi,{columns:l,handler:async(e,...t)=>await bs.apartmentViewService.paginate({...e,contact_id:i},...t),onRowClick:e=>a(e.id),onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),heightRequest:Eh,payload:t})})]})},isActive:e=>ws(["/contact_view/:id/objects"],e)},{id:"contact",element:({formState:e,payload:t,params:{id:i}})=>{const a=_m({payload:t}),{columns:o}=ti({columns:yc,storageKey:"bid_columns"}),l=ue.useMemo((()=>o.filter((({type:e})=>e!==tt.Action))),[o]);return he(_e,{children:[he(Xe,{items:Nh,onAction:e=>{"list-action"===e&&bs.routerService.back("/bid")},payload:e}),he(gs,{}),he(zh,{mode:t.menuMode,payload:t,children:he(yi,{columns:l,handler:async(e,...t)=>await bs.bidViewService.paginate({...e,contact_id:i},...t),onRowClick:e=>a(e.id),onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),heightRequest:Oh,payload:t})})]})},isActive:e=>ws(["/contact_view/:id/bids"],e)},{id:"contact",element:qh((()=>{const e=vs("id");bs.routerService.push("/contact_view/".concat(e,"/contact"))})),isActive:e=>ws(["/contact_view/:id"],e)},{id:"contact",element:({params:{id:e="create"},formState:t,payload:i,data:a})=>{const o=Ke(a),l=(({contactId:e})=>{const{handleLoadStart:t,handleLoadEnd:i}=$e({history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)}),{execute:a}=be((async()=>{await bs.featureService.hasFeature("superadmin")&&(await bs.cleanupService.removeContact(e),bs.routerService.push("/contact"))}),{onLoadStart:t,onLoadEnd:i,fallback:bs.errorService.handleGlobalError}),o=zt({title:"Вы уверены?",msg:"Удаление контакта сотрет соответствующие записи в задачах, объектах недвижимости, заявках, сделках. Продолжить?"});return()=>o().then((e=>{e&&a()}))})({contactId:e}),{pickData:n,render:r}=Ge({AfterTitle:({onClose:e})=>he(Be,{size:"small",onClick:e,children:he(Ye,{})}),fields:Kp,payload:i,features:i.permissions,outlinePaper:!0,handler:async()=>await bs.contactViewService.tryRead(e),fullScreen:!0,title:"Редактировать",onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),onSubmit:async t=>{let a=!0;try{t&&await bs.contactViewService.update(e,await bs.polishService.polishContact(t,i))}catch(o){a=!1;const e=jr(o);return bs.alertService.notify(e),!1}finally{return a}},submitLabel:"Сохранить"});return he(_e,{children:[he(Xe,{items:Vh,onAction:e=>{"list-action"===e&&bs.routerService.back("/contact"),"edit-action"===e&&n(),"superadmin-remove-action"===e&&l()},actions:xh,payload:t}),he(gs,{}),he(zh,{mode:i.menuMode,payload:i,children:[he(Je,{readonly:!0,dirty:"create"===e,handler:()=>a,fields:Sd,features:i.permissions,changeSubject:o,payload:i}),he(Qe,{}),r()]})]})},isActive:e=>ws(["/contact_view/:id/contact"],e)},{id:"service_comment",element:({payload:e,formState:t})=>{const[i,a]=ue.useState([]),{size:o}=Di({target:document.body,selector:"main",compute:t=>{var i;let{height:a,width:o}=t;if(e.menuMode===j.Tabs){const e=document.querySelector(".".concat(Yi));a-=(null==e?void 0:e.offsetHeight)||0}return a-=(null==(i=document.querySelector(".".concat(Uh)))?void 0:i.offsetHeight)||0,a-=50,a=Math.min(window.innerHeight-50,a),{width:o,height:a}}}),{execute:l}=be((async()=>{const e=vs("id"),t=await bs.serviceCommentViewService.findAllByContactId(e);a(await Promise.all(t.map((async({$id:e,user_id:t,file_id:i,comment:a,$createdAt:o})=>{const l=await bs.userViewService.tryRead(t);if(!l)return null;const n=l.avatar?await bs.appwriteService.getImageURL(l.avatar):"",s=i?await bs.appwriteService.tryReadFileName(i):"";return{id:e,message:a,fileId:i,userId:t,displayName:[l.last_name,l.first_name,l.middle_name,r(o).format("DD.MM.YYYY / HH:mm")].join(" "),fileName:s,avatar:n}})).filter((e=>!!e)).reverse()))}),{fallback:bs.errorService.handleGlobalError,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)});ue.useEffect((()=>{l()}),[]),ue.useEffect((()=>bs.serviceCommentViewService.createSubject.subscribe((e=>{const t=vs("id");e.contact_id===t&&l()}))),[]);return he(_e,{children:[he("div",{className:Uh,children:[he(Xe,{payload:t,items:Hh,onAction:e=>{"list-action"===e&&bs.routerService.back("/contact")}}),he(gs,{})]}),he(zh,{payload:e,mode:e.menuMode,children:he(md,{payload:e,style:{height:o.height},messages:i,onText:async e=>{const t=vs("id"),i=bs.appwriteService.currentUser.$id;await bs.serviceCommentViewService.create({user_id:i,comment:e,apartment_id:null,bid_id:null,contact_id:t,file_id:null}),await l()},onFile:async(e,t)=>{const i=vs("id"),a=bs.appwriteService.currentUser.$id;await bs.serviceCommentViewService.create({user_id:a,comment:e,apartment_id:null,bid_id:null,contact_id:i,file_id:t}),await l()}})})]})},isActive:e=>ws(["/contact_view/:id/service_comment"],e)},{id:"tasks",element:({formState:e,payload:t,params:{id:i}})=>he(_e,{children:[he("div",{className:"real-estate__headerRoot",children:[he(Xe,{payload:e,items:Dh,onAction:e=>{"list-action"===e&&bs.routerService.back("/apartment")}}),he(gs,{})]}),he(zh,{payload:t,mode:t.menuMode,children:he(wu,{withTransparentHeader:!0,contactId:i,payload:t})})]}),isActive:e=>ws(["/contact_view/:id/tasks"],e)},{id:"history",element:({formState:e,payload:t})=>{const[i,a]=ue.useState([]),{size:o}=Di({target:document.body,selector:"main",compute:e=>{var i;let{height:a,width:o}=e;if(t.menuMode===j.Tabs){const e=document.querySelector(".".concat(Yi));a-=(null==e?void 0:e.offsetHeight)||0}return a-=(null==(i=document.querySelector(".".concat(Lh)))?void 0:i.offsetHeight)||0,a-=50,a=Math.min(window.innerHeight-50,a),{width:o,height:a}}}),{loading:l,execute:n}=be((async e=>{if(e){const e=vs("id"),t=await bs.dealHistoryViewService.findAllByContactId(e);a(t)}}),{fallback:bs.errorService.handleGlobalError,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)});return he(_e,{children:[he("div",{className:Lh,children:[he(Xe,{payload:e,items:Ih,onAction:e=>{"list-action"===e&&bs.routerService.back("/apartment")}}),he(gs,{})]}),he(zh,{payload:t,mode:t.menuMode,children:he(Wi,{sx:{height:o.height},minHeight:72,loading:l,onDataRequest:e=>{n(e)},children:he(Pe,{spacing:1,children:i.map((e=>he(up,{loading:l,status:"info",item:e},e.$id)))})})})]})},isActive:e=>ws(["/contact_view/:id/history"],e)}],$h=async e=>"create"===e?{"data-sozdaniya_klienta":qi.currentDate()}:await bs.contactViewService.tryRead(e),Gh=({id:e="create"})=>{const t=async(t,i,{afterSave:a})=>{let o=!0;try{const o=await bs.polishService.polishContact(h.get(t,"contact")||{},i);if("create"===e){const{id:e}=await bs.contactViewService.create(o);await a(),bs.routerService.push("/contact_edit/".concat(e))}else await bs.contactViewService.update(e,o);bs.routerService.hasViewRedirectFlag()&&(await a(),bs.routerService.push("/contact_view/".concat(e))),bs.alertService.notify("Изменения сохранены")}catch(l){o=!1;const e=jr(l);bs.alertService.notify(e)}finally{return o}},i=Ve();return ue.useEffect((()=>bs.contactViewService.updateSubject.subscribe((([e,t])=>{const a=vs("id");a&&a===e&&i.next(["contact",t])}))),[]),he(ra,{state:async()=>[await $h(e),await bs.settingsViewService.getMasterDetailMode(),await bs.permissionService.getPermissions(),await bs.featureService.getAccessLevel()],reloadSubject:bs.layoutService.reloadOutletSubject,fallback:bs.errorService.handleGlobalError,children:async([a,o,l,n])=>he(Ji,{changeSubject:i,history:bs.routerService,waitForChangesDelay:tl,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),routes:Wh,params:{id:e},initialData:{contact:a},payload:()=>({menuMode:o,permissions:l,accessLevel:n}),onChange:console.log,onSubmit:t})})},Yh=Fs()((e=>({container:{padding:"16px",height:"100%"},icoContainer:{display:"flex",alignContent:"center",justifyContent:"center",width:"100%",marginBottom:"12px"},ico:{color:e.palette.text.primary,width:"48px",height:"48px"},btn:{borderRadius:"100px",marginLeft:"10%",marginRight:"10%",maxWidth:"225px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:"#000000DE",background:"#E0E0E0",fontWeight:"500",width:"100%","&:hover":{color:"white"}},content:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",height:"100%"}}))),Kh=({text:e,iconNumber:t,onClick:i})=>{const{classes:a}=Yh(),o=[he(da,{className:a.ico}),he(ca,{className:a.ico}),he(ma,{className:a.ico})];return he("div",{className:a.container,children:he(Te,{className:a.content,children:[he("div",{className:a.icoContainer,children:he(st,{onClick:()=>{i&&i()},disableRipple:!0,children:t?o[t-1]:he(pa,{})})}),he(pt,{onClick:i,endIcon:he(ua,{}),className:a.btn,variant:"contained",children:e})]})})},Xh=()=>{const e=r.localeData(),t=e.weekdays(),i=e.weekdaysShort(),{weekStart:a=0}=r.Ls[r.locale()],o=i||t;return[...o.slice(a,7),...o.slice(0,a)].map((e=>"".concat(e.slice(0,1).toUpperCase()).concat(e.slice(1,3))))},[Jh,Zh]=ha("dashboard_target"),Qh=Fs()((e=>({switchHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",margin:"5px 0 10px"},daysHeader:{display:"flex",justifyContent:"stretch",alignItems:"stretch",height:"35px"},monthName:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"14px",button:{padding:"5px",color:e.palette.text.primary}},dayLabel:{flex:1,textAlign:"center",opacity:.5},dayLabelStart:{textAlign:"center"},dayLabelEnd:{textAlign:"center"},noBorder:{border:"0"}}))),ey=({currentMonth:e,onMonthChange:t,onHeaderMonthClick:i,onHeaderYearClick:a})=>{const[o,l]=Zh(),{classes:n}=Qh();return he("div",{children:[he("div",{className:n.switchHeader,children:[he(Be,{onClick:()=>t(e.clone().subtract(1,"months")),children:he(sa,{})}),he(Ne,{className:n.monthName,children:[he(wt,{title:"all"===o?"Показаны задачи всех риелторов":"Показаны только мои задачи",children:he(Ht,{sx:{fontWeight:"bold"},onClick:()=>{l("all"===o?"mine":"all")},className:Ce(n.noBorder),children:"all"===o?"Все":"Мои"})}),he(Ht,{onClick:i,className:Ce(n.noBorder),children:e.format("MMMM")}),he(Ht,{onClick:a,className:Ce(n.noBorder),children:e.format("YYYY")})]}),he(Be,{className:n.noBorder,onClick:()=>t(e.clone().add(1,"months")),children:he(ya,{})})]}),he("div",{className:n.daysHeader,children:Xh().map(((e,t)=>he(Ne,{className:Ce(n.dayLabel,{[n.dayLabelStart]:0===t,[n.dayLabelEnd]:6===t}),children:e},t)))})]})},[ty,iy]=ge(),ay=Fs()((e=>({listItemAccient:{background:ze(e.palette.getContrastText(e.palette.background.paper),.018)}}))),oy=({onChange:e,day:t})=>{const{classes:i}=ay(),[a]=iy(),[o,l]=ue.useState([]),[n,s]=ue.useState(null),d=o.length,{execute:c}=be((async()=>{if(l([]),!a)return;const e=un(t),i=(await a.promise).filter((({moment_stamp:t})=>t===e)).filter((({is_complete:e})=>!e));l(i)}),{onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),fallback:bs.errorService.handleGlobalError});ue.useEffect((()=>{c()}),[a]);return he(_e,{children:[he(Ht,{onClick:({currentTarget:e})=>s(e),sx:{...t.isToday()&&{background:"#132e5511","&:hover":{background:"#132e5533"}}},children:he(ut,{sx:{flexDirection:"column",gap:"5px"},children:[t.format("DD"),!!d&&he(ba,{sx:{mt:"-2.5px"},side:5,color:t.isBefore(r().add(-1,"days"))?"red":d>3?"orange":"green"})]})}),he(_a,{open:!!n,anchorEl:n,onClose:()=>s(null),anchorOrigin:{vertical:"bottom",horizontal:"left"},children:0===o.length?he(Ne,{sx:{p:2},children:"На этот день задач не назначено"}):he(Te,{sx:{height:356,width:356},children:he(Ct,{disablePadding:!0,subheader:he(va,{component:Ne,sx:{fontWeight:"bold"},children:["Задачи на ",t.format("DD/MM/YYYY")]}),children:he(Wi,{sx:{height:308,width:356},children:o.map((({id:e,title:t,contact_fio:a,to_user_fio:o,type:l,is_call:n,is_meet:r},s)=>he(Me,{className:Ce({[i.listItemAccient]:s%2==0}),onClick:()=>bs.routerService.push("/task"),children:he(ft,{primary:"Внутренняя"===l?"Задача: ".concat(t):"Контакт: ".concat(a," ").concat([n&&"Звонок",r&&"Встреча"].filter((e=>e)).join(", ")),secondary:"Ответственный: ".concat(o)})},e)))})})})})]})},ly=Fs()((e=>({container:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},calendar:{flex:1,display:"grid",background:e.palette.background.paper,gridTemplateColumns:"repeat(7, 2fr)",gridRowGap:"2px"},inactiveDay:{opacity:.5,pointerEvents:"none"},day:{"& button":{border:"0",color:e.palette.text.primary}},cell:{display:"flex",alignItems:"center",justifyContent:"center","&:nth-of-type(7n)":{justifyContent:'"flex-end"'},"&:nth-of-type(7n + 1)":{justifyContent:'"flex-start"'}}}))),ny=({onChange:e,onHeaderMonthClick:t,onHeaderYearClick:i,minDate:a,maxDate:o,date:l})=>{const[n]=Zh(),[r,s]=ue.useState(l.clone().startOf("month")),[,d]=iy();ue.useEffect((()=>{const e=un(r.clone().startOf("week")),t=un(r.clone().endOf("month").endOf("week"));d({fromStamp:e,toStamp:t,target:n,promise:(async()=>"all"===n?await bs.dashboardRequestService.getTasksByStamp(e,t):await bs.dashboardRequestService.getMyTasksByStamp(e,t))()})}),[r,n]);const c=ue.useCallback((t=>{const i=t.clone().endOf("week"),n=r.get("month");return((e,t)=>{const i=t.diff(e,"days")+1,a=[];for(let o=0;o!==i;o++)a.push(e.clone().add(o,"days"));return a})(t,i).map((t=>{const i=l.isSame(t,"date"),r=t.get("month")!==n||o.isBefore(t)||a.isAfter(t);return he("div",{className:Ce(p.day,p.cell,{[p.inactiveDay]:r}),children:he(oy,{day:t,isActive:i,onChange:e})},t.toString())}))}),[r,l,o,a,e]),m=ue.useCallback((()=>((e,t)=>{const i=t.diff(e,"weeks")+1,a=[];for(let o=0;o!==i;o++)a.push(e.clone().add(o,"weeks"));return a})(r.clone().startOf("week"),r.clone().endOf("month").endOf("week")).map((e=>he(ue.Fragment,{children:c(e)},"week-".concat(e.toString()))))),[r,c]),{classes:p}=ly();return he("div",{className:p.container,children:[he(ey,{currentMonth:r,onMonthChange:e=>s(e),onHeaderMonthClick:t,onHeaderYearClick:i}),he("div",{className:p.calendar,children:m()})]})},ry=Fs()((e=>({container:{height:"100%",width:"100%",display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column"},stretch:{flex:1},disabled:{pointerEvents:"none",opacity:.5},monthLabel:{textAlign:"center"},noBorder:{border:"0"},arrows:{padding:"5px",color:e.palette.text.secondary},header:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"5px"},content:{flex:1,display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gridGap:"15px",button:{color:e.palette.text.primary}}}))),sy=({date:e,minDate:t,maxDate:i,onChange:a})=>{e.get("month");const[o,l]=ue.useState(e.get("year")),n=(()=>{const e=[],t=r().startOf("year");for(let i=0;12!==i;i++)e.push(t.clone().add(i,"months"));return e})().map((e=>e.get("month"))),s=(()=>{const e=r.localeData(),t=e.months();return(e.monthsShort()||t).map((e=>"".concat(e.slice(0,1).toUpperCase()).concat(e.slice(1,3))))})(),{classes:d}=ry(),c=ue.useCallback((l=>{let n=e.clone().set("month",l);n=n.set("year",o),e&&i.isBefore(e)?a(i.clone()):e&&t.isAfter(e)?a(t.clone()):a(n)}),[o,e,i,t,a]);return he("div",{className:d.container,children:[he("div",{className:d.header,children:[he(Be,{className:d.noBorder,onClick:()=>{const e=o-1;e>=t.get("year")&&l(e)},children:he(fa,{className:d.arrows})}),he(Ne,{className:Ce(d.monthLabel,d.stretch),children:o}),he(Be,{className:d.noBorder,onClick:()=>{const e=o+1;e<=i.get("year")&&l(e)},children:he(ga,{className:d.arrows})})]}),he("div",{className:d.content,children:n.map((e=>{const a=i.get("month")<e&&i.get("year")===o||t.get("month")>e&&t.get("year")===o;return he(Ht,{className:Ce({[d.disabled]:a}),onClick:()=>c(e),children:s[e]},e)}))})]})},dy=Fs()((e=>({container:{height:"100%",width:"100%",display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column"},stretch:{flex:1},yearLabel:{textAlign:"center"},noBorder:{border:"0"},arrows:{padding:"5px",border:"0",color:e.palette.text.disabled},header:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"5px"},content:{flex:1,display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gridGap:"15px",button:{color:e.palette.text.primary}}}))),cy=({date:e,minDate:t,maxDate:i,onChange:a})=>{const o=e.get("year"),l=ue.useMemo((()=>((e,t)=>{const i=t.diff(e,"years")+1,a=[];for(let o=0;o!==i;o++)a.push(e.clone().add(o,"years"));return a})(t,i).map((e=>e.get("year"))).reduce(((e,t)=>{const[i]=e.slice().reverse();return i.push(t),12===i.length?[...e,[]]:e}),[[]])),[t,i]),[n,r]=ue.useState(l.findIndex((e=>e.includes(o)))),s=ue.useCallback((o=>{const l=e.clone().set("year",o);e&&i.isBefore(e)?a(i.clone()):e&&t.isAfter(e)?a(t.clone()):a(l)}),[e,i,t,a]),d=l[n]||[],{classes:c}=dy();return he("div",{className:c.container,children:[he("div",{className:c.header,children:[he(Ht,{className:c.noBorder,variant:"text",onClick:()=>{r(Math.max(n-1,0))},children:he(fa,{className:c.arrows})}),he(Ne,{className:Ce(c.yearLabel,c.stretch),children:e.format("YYYY")}),he(Ht,{className:c.noBorder,variant:"text",onClick:()=>{const e=n+1;e<l.length&&r(e)},children:he(ga,{className:c.arrows})})]}),he("div",{className:c.content,children:d.map((e=>he(Ht,{color:e===o?"primary":"secondary",onClick:()=>s(e),children:e},e)))})]})},my=Fs()((e=>({container:{width:"100%",height:"100%",padding:e.spacing(1)}}))),py=({date:e=r(),minDate:t=r("1900-01-01"),maxDate:i=r("2100-01-01"),onChange:a})=>{const[o,l]=ue.useState((()=>e.isBefore(t)?t:e)),[n,s]=ue.useState(!1),[d,c]=ue.useState(!1),m=()=>s(!0),p=()=>c(!0),u=o.startOf("day"),h=e=>{s(!1),l(e.clone().set("year",e.get("year")))},y=e=>{c(!1),l(e.clone().set("month",e.get("month")))},{classes:b}=my();return he(ai,{className:b.container,children:n?he(cy,{date:u,onChange:h,minDate:t,maxDate:i}):d?he(sy,{date:u,onChange:y,minDate:t,maxDate:i}):he(ty,{initialState:null,children:he(ny,{date:u,onChange:a,minDate:t,maxDate:i,onHeaderMonthClick:p,onHeaderYearClick:m})})})},uy=Fs()({root:{position:"relative",height:"100%",width:"100%",overflow:"hidden"},container:{position:"absolute",top:0,left:0,height:"100%",width:"100%"}}),hy=({children:e=null,className:t,style:i})=>{const{classes:a}=uy();return he(ai,{className:Ce(a.root,t),style:i,children:he(Te,{className:a.container,children:e})})},[yy,by]=ha("dashboard_period"),_y=Fs()((e=>({container:{padding:"24px",position:"relative"},text:{fontSize:"16px",p:{fontSize:"12px",margin:"0"}},heading:{display:"flex",gap:"12px",alignItems:"center",padding:"0 0 12px 0 ",marginBottom:"12px",borderBottom:"1px solid #0000001F",button:{color:e.palette.text.primary}},amount:{fontSize:"24px",textAlign:"right"},options:{position:"absolute",top:"4px",right:"4px"}}))),vy=[he(ka,{}),he(wa,{}),he(Sa,{}),he(za,{}),he(Va,{})],fy=[{label:"Все",action:"all-action",isVisible:({target:e})=>"all"===e,icon:Et},{label:"Все",action:"all-action",isVisible:({target:e})=>"all"!==e,icon:Pt},{label:"Мои",action:"mine-action",isVisible:({target:e})=>"mine"===e,icon:Et},{label:"Мои",action:"mine-action",isVisible:({target:e})=>"mine"!==e,icon:Pt},{divider:!0},{icon:xa,action:"last-day",label:"За последний день",isVisible:({period:e})=>"last-day"===e},{icon:Aa,action:"last-day",label:"За последний день",isVisible:({period:e})=>"last-day"!==e},{icon:xa,action:"last-week",label:"За последнюю неделю",isVisible:({period:e})=>"last-week"===e},{icon:Aa,action:"last-week",label:"За последнюю неделю",isVisible:({period:e})=>"last-week"!==e},{icon:xa,action:"last-month",label:"За последний месяц",isVisible:({period:e})=>"last-month"===e},{icon:Aa,action:"last-month",label:"За последний месяц",isVisible:({period:e})=>"last-month"!==e},{icon:xa,action:"last-three-months",label:"За последние три месяца",isVisible:({period:e})=>"last-three-months"===e},{icon:Aa,action:"last-three-months",label:"За последние три месяца",isVisible:({period:e})=>"last-three-months"!==e},{icon:xa,action:"last-year",label:"За последний год",isVisible:({period:e})=>"last-year"===e},{icon:Aa,action:"last-year",label:"За последний год",isVisible:({period:e})=>"last-year"!==e}],gy=({text:e,amount:t,iconNumber:i})=>{const{classes:a}=_y(),[o,l]=by(),[n,r]=Zh();return he("div",{className:a.container,children:[he(xt,{className:a.options,payload:{period:o,target:n},transparent:!0,options:fy,onAction:e=>{"all-action"!==e?"mine-action"!==e?l(e):r("mine"):r("all")}}),he("div",{className:a.heading,children:[he(Be,{children:i?vy[i-1]:he(pa,{})}),he("div",{className:a.text,children:e})]}),he("p",{className:a.amount,children:t})]})},ky=()=>he(Se,{size:24,sx:{justifyContent:"flex-end",width:"100%"}}),wy=()=>he(Se,{size:24,sx:{justifyContent:"flex-end",width:"100%"}}),Sy=Fs()((e=>({funnelContainer:{padding:"10px 24px",position:"relative",height:"100%"},funnelTitle:{fontSize:"16px"},center:{height:"calc(100% - 100px)",marginTop:"65px"},funnel:{maxWidth:"452px",margin:"0 auto",width:"100%",paddingTop:"10px",display:"flex",flexDirection:"column",alignItems:"center",marginTop:"-10%",gap:"10px"},row:{background:"#D9D9D9",clipPath:"polygon(0 0, 100% 0, 97% 100%, 3% 100%)",textAlign:"center",fontSize:"14px",height:"20px"},options:{position:"absolute",top:"4px",right:"4px"},listItemAccient:{background:ze(e.palette.getContrastText(e.palette.background.paper),.018)}}))),zy=[{label:"Все сделки",action:"all-action",isVisible:({target:e})=>"all"===e,icon:Et},{label:"Все сделки",action:"all-action",isVisible:({target:e})=>"all"!==e,icon:Pt},{label:"Мои сделки",action:"mine-action",isVisible:({target:e})=>"mine"===e,icon:Et},{label:"Мои сделки",action:"mine-action",isVisible:({target:e})=>"mine"!==e,icon:Pt},{divider:!0},{icon:xa,action:"last-day",label:"За последний день",isVisible:({period:e})=>"last-day"===e},{icon:Aa,action:"last-day",label:"За последний день",isVisible:({period:e})=>"last-day"!==e},{icon:xa,action:"last-week",label:"За последнюю неделю",isVisible:({period:e})=>"last-week"===e},{icon:Aa,action:"last-week",label:"За последнюю неделю",isVisible:({period:e})=>"last-week"!==e},{icon:xa,action:"last-month",label:"За последний месяц",isVisible:({period:e})=>"last-month"===e},{icon:Aa,action:"last-month",label:"За последний месяц",isVisible:({period:e})=>"last-month"!==e},{icon:xa,action:"last-three-months",label:"За последние три месяца",isVisible:({period:e})=>"last-three-months"===e},{icon:Aa,action:"last-three-months",label:"За последние три месяца",isVisible:({period:e})=>"last-three-months"!==e},{icon:xa,action:"last-year",label:"За последний год",isVisible:({period:e})=>"last-year"===e},{icon:Aa,action:"last-year",label:"За последний год",isVisible:({period:e})=>"last-year"!==e}],Vy=({valueMap:e})=>{const{classes:t}=Sy(),[i,a]=by(),[o,l]=Zh(),[n,r]=ue.useState(null),[s,d]=ue.useState(null);return he(Te,{className:t.funnelContainer,children:[he(xt,{className:t.options,payload:{period:i,target:o},transparent:!0,options:zy,onAction:e=>{"all-action"!==e?"mine-action"!==e?a(e):l("mine"):l("all")}}),he(Te,{className:t.funnelTitle,children:"Воронка Продаж"}),he(ut,{className:t.center,children:he(Te,{className:t.funnel,children:Sn.map(((i,a)=>he(_e,{children:[he(Ta,{onClick:({currentTarget:e})=>{r(e),d(i)},sx:{width:100-5*a+"%"},className:t.row,children:[i," ",e[i]]},i),he(_a,{open:s===i,anchorEl:n,onClose:()=>{r(null),d(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},children:he(Ne,{sx:{p:2},children:[i," ",e[i]]})})]})))})})]})},xy=()=>he(Se,{sx:{height:"100%",width:"100%",marginTop:"-2.5%"}}),Ay=e=>e.map((e=>({value:e,sort:Math.random()}))).sort(((e,t)=>e.sort-t.sort)).map((({value:e})=>e)),Ty=Object.values({pink:{400:"#ec407a",a100:"#ff80ab"},purple:{a100:"#ea80fc",a400:"#d500f9"},indigo:{a100:"#8c9eff",a400:"#3d5afe"},teal:{400:"#26a69a",a200:"#64ffda"},amber:{600:"#ffb300",a200:"#ffd740"},brown:{400:"#8d6e63",600:"#6d4c41"}}).flatMap((e=>Object.values(e))),Cy=Ay(Ty.slice(5).reduce(((e,t,i)=>i%2==0?[...e,t]:[t,...e]),Ay(Ty.slice(0,5)))),Fy=e=>Cy[e%Cy.length],Ly=()=>he(Se,{sx:{height:"100%",width:"100%"}}),Iy=Fs()({title:{fontSize:"16px",marginBottom:"18px"},container:{padding:"10px 24px",position:"relative",height:"100%"},options:{position:"absolute",top:"4px",right:"4px"},list:{display:"flex",flexDirection:"column",gap:"13px",margin:"0",padding:"0"},statRow:{display:"flex",width:"100%",alignItems:"center",gap:"7px",color:"00000099",fontSize:"14px",letterSpacing:"0.17px"},stats:{height:"4px",width:"200px"},managersList:{listStyle:"none",display:"flex",flexDirection:"column",fontSize:"12px",gap:"5px",padding:"0 !important"},managerRow:{display:"flex",alignItems:"center",gap:"8px"},managerDot:{width:"12px",height:"12px",background:"#000000DE",borderRadius:"100%"}}),My=[{label:"Все сделки",action:"all-action",isVisible:({target:e})=>"all"===e,icon:Et},{label:"Все сделки",action:"all-action",isVisible:({target:e})=>"all"!==e,icon:Pt},{label:"Мои сделки",action:"mine-action",isVisible:({target:e})=>"mine"===e,icon:Et},{label:"Мои сделки",action:"mine-action",isVisible:({target:e})=>"mine"!==e,icon:Pt},{divider:!0},{icon:xa,action:"last-day",label:"За последний день",isVisible:({period:e})=>"last-day"===e},{icon:Aa,action:"last-day",label:"За последний день",isVisible:({period:e})=>"last-day"!==e},{icon:xa,action:"last-week",label:"За последнюю неделю",isVisible:({period:e})=>"last-week"===e},{icon:Aa,action:"last-week",label:"За последнюю неделю",isVisible:({period:e})=>"last-week"!==e},{icon:xa,action:"last-month",label:"За последний месяц",isVisible:({period:e})=>"last-month"===e},{icon:Aa,action:"last-month",label:"За последний месяц",isVisible:({period:e})=>"last-month"!==e},{icon:xa,action:"last-three-months",label:"За последние три месяца",isVisible:({period:e})=>"last-three-months"===e},{icon:Aa,action:"last-three-months",label:"За последние три месяца",isVisible:({period:e})=>"last-three-months"!==e},{icon:xa,action:"last-year",label:"За последний год",isVisible:({period:e})=>"last-year"===e},{icon:Aa,action:"last-year",label:"За последний год",isVisible:({period:e})=>"last-year"!==e}],jy=()=>{const{classes:e}=Iy(),[t,i]=by(),[a,o]=Zh();return he("div",{className:e.container,children:[he(xt,{className:e.options,payload:{period:t,target:a},transparent:!0,options:My,onAction:e=>{"all-action"!==e?"mine-action"!==e?i(e):o("mine"):o("all")}}),he("div",{className:e.title,children:"Всего сделок"}),he(Le,{payload:t,deps:[a],Loader:Ly,children:async t=>{const i=await bs.userViewService.findAll(),o=await Promise.all(i.filter((({$id:e})=>"mine"!==a||e===bs.appwriteService.currentUser.$id)).map((async({id:e})=>await bs.dashboardRequestService.getDoneDealsByUserCount(t,e)))),l=o.map(((e,t)=>{var a,o,l,n;const r=[null==(a=i[t])?void 0:a.last_name,null==(o=i[t])?void 0:o.first_name,null==(l=i[t])?void 0:l.middle_name].filter((e=>e)).join(" ");return{id:(null==(n=i[t])?void 0:n.id)||"unknown",label:r,color:Fy(t),value:e}})).sort((({value:e},{value:t})=>t-e)),n=o.reduce(((e,t)=>Math.max(e,t)));return he(Ca,{sx:{maxHeight:"calc(100% - 60px)",paddingLeft:"8px",overflowY:"auto"},children:[he("div",{className:e.list,children:l.map((({id:t,value:i,color:a})=>{const o=Math.round(100/n*i);return he("div",{className:e.statRow,children:[he(Fa,{className:e.stats,sx:{backgroundColor:"#ccc","& .MuiLinearProgress-bar":{backgroundColor:a}},variant:"determinate",value:Math.max(o,3)}),i," Продаж"]},t)}))}),he("ul",{className:e.managersList,children:l.map((({id:t,label:i,color:a})=>he("li",{className:e.managerRow,children:[he(ba,{color:a,side:12})," ",i]},t)))})]})}})]})},By=()=>he(Se,{size:24,sx:{justifyContent:"flex-end",width:"100%"}}),Ry="7px",Dy=[{type:o.Group,columns:"14",tabletColumns:"12",phoneColumns:"12",fieldRightMargin:Ry,fieldBottomMargin:Ry,fields:[{type:o.Hero,height:"max(calc(100vh * 0.2), 150px)",columns:"3",tabletColumns:"6",phoneColumns:"12",bottom:Ry,right:Ry,child:{type:o.Component,element:()=>{const[e]=by(),[t]=Zh();return he(hy,{style:{background:"#fff",boxShadow:"0px 10px 10px -4px #00000033"},children:he(gy,{amount:he(Le,{payload:e,deps:[t],Loader:By,children:async()=>"mine"===t?await bs.dashboardRequestService.getNewBidsCountByUserId(e,bs.appwriteService.currentUser.$id):await bs.dashboardRequestService.getNewBidsCount(e)}),text:"Заявки",iconNumber:1})})}}},{type:o.Hero,columns:"3",tabletColumns:"6",phoneColumns:"12",right:Ry,bottom:Ry,height:"max(calc(100vh * 0.2), 150px)",child:{type:o.Component,element:()=>{const[e]=by(),[t]=Zh();return he(hy,{style:{background:"#fff",boxShadow:"0px 10px 10px -4px #00000033"},children:he(gy,{amount:he(Le,{payload:e,deps:[t],Loader:ky,children:async e=>"mine"===t?await bs.dashboardRequestService.getNewBidsCountByUserId(e,bs.appwriteService.currentUser.$id):await bs.dashboardRequestService.getNewApartmentCount(e)}),text:"Объекты",iconNumber:2})})}}},{type:o.Hero,columns:"3",tabletColumns:"6",phoneColumns:"12",height:"max(calc(100vh * 0.2), 150px)",bottom:Ry,right:Ry,child:{type:o.Component,element:()=>{const[e]=by(),[t]=Zh();return he(hy,{style:{background:"#fff",boxShadow:"0px 10px 10px -4px #00000033"},children:he(gy,{amount:he(Le,{payload:e,deps:[t],Loader:wy,children:async e=>"mine"===t?await bs.dashboardRequestService.getDealsInProgressCountUserId(e,bs.appwriteService.currentUser.$id):await bs.dashboardRequestService.getDealsInProgressCount(e)}),text:"В сделке",iconNumber:3})})}}},{type:o.Hero,columns:"3",tabletColumns:"6",phoneColumns:"12",bottom:Ry,right:Ry,height:"max(calc(100vh * 0.2), 150px)",child:{type:o.Component,element:()=>(by(),he(hy,{style:{background:"#fff",boxShadow:"0px 10px 10px -4px #00000033",opacity:"0.5"},children:he(gy,{amount:null,text:he(_e,{children:["Прибыль ",he("p",{children:"За месяц"})]}),iconNumber:4})}))}}]},{type:o.Group,columns:"12",tabletColumns:"12",phoneColumns:"12",fields:[{type:o.Hero,height:"min(calc(100vh * 0.5), 700px)",right:Ry,bottom:Ry,columns:"6",phoneColumns:"12",child:{type:o.Component,element:()=>he(hy,{style:{boxShadow:"0px 10px 10px -4px #00000033"},children:he(py,{onChange:console.log})})}},{type:o.Hero,columns:"6",phoneColumns:"12",right:Ry,bottom:Ry,height:"min(calc(100vh * 0.5), 700px)",child:{type:o.Component,element:()=>{const[e]=by(),[t]=Zh();return he(hy,{style:{background:"#fff",boxShadow:"0px 10px 10px -4px #00000033"},children:he(Le,{payload:e,deps:[t],Loader:xy,children:async e=>{const i=await Promise.all(Sn.map((async i=>"all"===t?await bs.dashboardRequestService.getDealsByStatusCount(e,i):await bs.dashboardRequestService.getDealsByStatusByUserCount(e,i,bs.appwriteService.currentUser.$id)))),a=Sn.reduce(((e,t,a)=>({...e,[t]:i[a]})),{});return he(Vy,{valueMap:a})}})})}}}]},{type:o.Group,columns:"12",tabletColumns:"12",phoneColumns:"12",fields:[{type:o.Hero,minHeight:"min(calc(100vh * 0.5), 700px)",columns:"6",phoneColumns:"12",right:Ry,bottom:Ry,child:{type:o.Component,element:()=>he(hy,{style:{background:"#fff",boxShadow:"0px 10px 10px -4px #00000033"},children:he(jy,{})})}},{type:o.Group,columns:"6",phoneColumns:"12",fields:[{type:o.Hero,desktopColumns:"6",tabletColumns:"6",phoneColumns:"12",right:Ry,bottom:Ry,minHeight:"min(calc(100vh * 0.25), 350px)",child:{type:o.Component,element:()=>he(hy,{style:{background:"#fff",boxShadow:"0px 10px 10px -4px #00000033"},children:he(Kh,{onClick:()=>bs.routerService.push("/apartment/create"),text:"Добавить Обьект",iconNumber:1})})}},{type:o.Hero,desktopColumns:"6",tabletColumns:"6",phoneColumns:"12",right:Ry,bottom:Ry,minHeight:"min(calc(100vh * 0.25), 350px)",child:{type:o.Component,element:()=>he(hy,{style:{background:"#fff",boxShadow:"0px 10px 10px -4px #00000033"},children:he(Kh,{onClick:()=>bs.routerService.push("/bid/create"),text:"Создать Заявку",iconNumber:2})})}},{type:o.Hero,desktopColumns:"6",tabletColumns:"6",phoneColumns:"12",right:Ry,bottom:Ry,minHeight:"min(calc(100vh * 0.25), 350px)",child:{type:o.Component,element:({payload:e})=>{const{execute:t,render:i}=yu({payload:e});return he(hy,{style:{background:"#fff",boxShadow:"0px 10px 10px -4px #00000033"},children:[he(Kh,{onClick:t,text:"Добавить Задачу",iconNumber:3}),i()]})}}}]}]}],qy=[{id:"common",element:({payload:e})=>he(Je,{fields:Dy,payload:e,features:e.permissions}),isActive:e=>ws(["/dashboard"],e),isAvailable:()=>!1}],Py=Fs()((e=>({root:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",minHeight:150},container:{position:"relative",display:"flex",alignItems:"stretch",justifyContent:"stretch",flex:1},content:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",paddingTop:6,paddingBottom:6,gap:6,flex:1},header:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",paddingLeft:e.spacing(.5),paddingRight:e.spacing(.5)},row:{display:"flex",alignItems:"center",justifyContent:"space-between"},noBorder:{border:"none !important"},bold:{fontWeight:"bold !important"},adjust:{maxHeight:10,minHeight:10,flex:1},button:{backgroundColor:"#3F51B5",color:"#ffffff",fontSize:12,marginLeft:"auto",marginRight:"auto","&:hover":{color:"#3F51B5"}},fieldContainer:{display:"flex",justifyContent:"space-between"},fieldDesc:{fontSize:10,opacity:.6,marginLeft:4},dateFieldDesc:{fontSize:8,opacity:.6,marginLeft:8},field:{fontSize:12,marginRight:4,fontWeight:500},dateField:{fontSize:8}}))),Ey=ue.forwardRef((({className:e,style:t,contactDisplayName:i,contactType:a,contactNumber:o,responsible:l,requestType:n,dealIndex:s,dealType:d,dealStatus:c,price:m,currency:p,createdAt:u,updatedAt:h,apartmentId:y,targetApartmentId:b,targetBidId:_,bidId:v,id:f,onChangeStatus:g,onDrag:k},w)=>{const{classes:S}=Py(),z=(({dealId:e})=>{const{handleLoadStart:t,handleLoadEnd:i}=$e({history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)}),{execute:a}=be((async()=>{await bs.featureService.hasFeature("superadmin")&&(await bs.cleanupService.removeDeal(e),bs.routerService.push("/deal"))}),{onLoadStart:t,onLoadEnd:i,fallback:bs.errorService.handleGlobalError}),o=zt({title:"Вы уверены?",msg:"Удаление сделки сотрет соответствующие записи в истории сделок. Продолжить?"});return()=>o().then((e=>{e&&a()}))})({dealId:f}),[V,x]=ue.useState(null),[A,T]=ue.useState(null),{execute:C,loading:F}=be((async e=>{await g(e)}),{onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),fallback:bs.errorService.handleGlobalError}),L=ue.useMemo((()=>{const e=Sn.findIndex((e=>e===c));return Sn.filter(((t,i)=>i<e)).reverse()}),[c]),I=ue.useMemo((()=>{const e=Sn.findIndex((e=>e===c));return Sn.filter(((t,i)=>i>e))}),[c]),M=ue.useMemo((()=>r(u).format("DD.MM.YYYY / HH:mm")),[u]),j=ue.useMemo((()=>r(h).format("DD.MM.YYYY / HH:mm")),[h]),B=ue.useMemo((()=>"Сделка сорвана"===c||"Закрытая сделка"===c),[c]),R=ue.useCallback((()=>{y?bs.routerService.push("/apartment_view/".concat(y,"/history")):v&&bs.routerService.push("/bid_view/".concat(v,"/history"))}),[]);return he("div",{"data-dealid":f,className:Ce(S.root,e),onDrag:()=>k(f),style:t,ref:w,draggable:!B,children:[he(ai,{className:S.container,children:he(Te,{className:S.content,children:[he(Te,{className:S.row,children:[he(Be,{onClick:({currentTarget:e})=>{x(e),T(null)},disabled:!L.length||F||B,size:"small",children:he(sa,{})}),he(ta,{anchorEl:V,open:!!V,onClose:()=>x(null),children:L.map(((e,t)=>he(ia,{onClick:()=>{C(e),x(null)},children:e},"".concat(e,"-").concat(t))))}),he(Gt,{label:l,variant:"filled",color:"#2196F3",sx:{fontWeight:500,fontSize:10,maxWidth:175}}),he(Be,{onClick:({currentTarget:e})=>{x(null),T(e)},disabled:!I.length||F||B,size:"small",children:he(ya,{})}),he(ta,{anchorEl:A,open:!!A,onClose:()=>T(null),children:I.map(((e,t)=>he(ia,{onClick:()=>{C(e),T(null)},children:e},"".concat(e,"-").concat(t))))})]}),he(ut,{sx:{minHeight:50},children:he(Ne,{fontSize:12,textAlign:"center",maxWidth:"80%",paddingBottom:"6px",children:i})}),o&&he(Te,{className:S.content,children:[he(Te,{className:S.fieldContainer,sx:{borderBottom:1,borderColor:"#E0E0E0"},children:[he(Ne,{className:S.fieldDesc,children:"Тип контакта"}),he(Ne,{className:S.field,children:a})]}),he(Te,{className:S.fieldContainer,sx:{borderBottom:1,borderColor:"#E0E0E0"},children:[he(Ne,{className:S.fieldDesc,children:"Номер телефона"}),he(Ne,{className:S.field,children:o})]}),b&&he(Le,{payload:b,children:async e=>{const{zagolovok:t}=await bs.apartmentViewService.read(e);return he(Te,{className:S.fieldContainer,sx:{borderBottom:1,borderColor:"#E0E0E0"},children:[he(Ne,{className:S.fieldDesc,children:"Объект недвижимости"}),he(Ne,{className:S.field,children:he(gi,{href:"#",onClick:()=>Z("/apartment_view/".concat(e)),children:t})})]})}}),_&&he(Le,{payload:_,children:async e=>{const{zagolovok:t}=await bs.bidViewService.read(e);return he(Te,{className:S.fieldContainer,sx:{borderBottom:1,borderColor:"#E0E0E0"},children:[he(Ne,{className:S.fieldDesc,children:"Заявка"}),he(Ne,{className:S.field,children:he(gi,{href:"#",onClick:()=>Z("/bid_view/".concat(e)),children:t})})]})}})]}),he(ut,{children:he(Te,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center",maxWidth:"90%",gap:1},children:[he(Gt,{label:"№ ".concat(s),variant:"filled",color:"#E0E0E0"}),he(Gt,"Аренда"==d?{label:"Аренда",variant:"filled",color:"#AF4C5E",sx:{color:"white"}}:{label:"Покупка",variant:"filled",color:"#4CAFAF",sx:{color:"white"}}),he(Gt,"Заявка"===n?{label:"Заявка",variant:"filled",color:"#AFAB4C",sx:{color:"white"}}:{label:"Объект",variant:"filled",color:"#4CAF50",sx:{color:"white"}})]})}),m&&he(Te,{className:S.content,children:he(Te,{className:S.fieldContainer,children:[he(Ne,{className:S.fieldDesc,children:["Цена ","(".concat("uzs"===p?"SUM":"$",")")]}),he(Ne,{className:S.field,children:m})]})}),he(Te,{className:S.container,sx:{borderTop:1,pl:1,borderColor:"#E0E0E0"},children:[he(ut,{className:S.content,children:[he(Ne,{className:S.dateFieldDesc,children:"Дата создания:"}),he(Ne,{className:S.dateField,children:M})]}),he(ut,{className:S.content,children:[he(Ne,{className:S.dateFieldDesc,children:"Дата обновления:"}),he(Ne,{className:S.dateField,children:j})]})]}),he(Ht,{onClick:R,variant:"outlined",sx:{ml:1,mr:1},children:"Посмотреть историю"}),he(Le,{payload:f,children:async()=>await bs.featureService.hasFeature("superadmin")?he(pt,{onClick:z,variant:"outlined",color:"error",sx:{ml:1,mr:1},children:"Удалить навсегда"}):null})]})}),he("div",{className:S.adjust})]})})),Ny=[{type:o.Box,sx:{display:"grid",gridTemplateColumns:"auto auto 1fr auto","& > .MuiGrid-root":{minWidth:"275px"},mt:-1},fields:[{type:o.Choose,fieldBottomMargin:"0",fieldRightMargin:"2",choose:async(e,t)=>{t.pickData(e.user_id?[e.user_id]:[]);const i=await t.resultSubject.toPromise();if(i&&i.length){const[e]=i;return e}return null},tr:async e=>{const t=await bs.userViewService.tryRead(e);return[null==t?void 0:t.last_name,null==t?void 0:t.first_name,null==t?void 0:t.middle_name].filter((e=>e)).join(" ")||(null==t?void 0:t.$id)||""},name:"user_id",placeholder:"Ответственный",title:""},{type:o.Combo,fieldBottomMargin:"0",name:"tip_klienta",title:"",placeholder:"Тип клиента",itemList:["Собственник","Доверенное лицо","Риелтор","Информатор","Застройщик"]},{type:o.Div},{type:o.Text,fieldBottomMargin:"0",name:"search",title:"",placeholder:"Поиск",leadingIcon:aa,trailingIcon:()=>he(bi,{sx:{opacity:.5}}),trailingIconClick(e,t,i){e&&i("")}}]}],Oy=({onChange:e,className:t,style:i,data:a,payload:o})=>{const{pickData:l,render:n,resultSubject:r}=id({payload:o});return he(ai,{className:t,style:i,sx:{mb:1,minHeight:48},children:[he(_i,{sx:{height:"100%"},hideOverflowY:!0,children:he(Te,{sx:{p:1,display:"flex",alignItems:"center",justifyContent:"stretch"},children:he(Je,{fields:Ny,handler:()=>a,onChange:(t,i)=>{i||e(t)},payload:()=>({...o,pickData:l,resultSubject:r}),fieldDebounce:el})})}),n()]})},Uy=async e=>{let t,i;await(async()=>{e.apartment_id?t="Объект":e.bid_id&&(t="Заявка")})();const{first_name:a,last_name:o,middle_name:l}=await bs.userViewService.read(e.user_id),n=[o,a,l].filter((e=>e)).join(" ");return e.price&&1===e.price.length&&(i=e.price[0]),e.price&&2===e.price.length&&(i="От ".concat(e.price[0]," До ").concat(e.price[1])),{id:e.id,contactType:e.tip_klienta,contactNumber:e.telefon,contactDisplayName:e.fio,createdAt:e.$createdAt,updatedAt:e.$updatedAt,dealIndex:e.index,requestType:t,currency:e.price_unit,metadata_created_at:r(e.$createdAt).format("DD/MM/YYYY"),metadata_updated_at:r(e.$updatedAt).format("DD/MM/YYYY"),price:i,apartmentId:e.apartment_id,bidId:e.bid_id,targetApartmentId:e.target_apartment_id,targetBidId:e.target_bid_id,userId:e.user_id,responsible:n,dealStatus:e.status,dealType:e.type}},Hy=Sn.indexOf("Задаток/Залог"),Wy=[{type:o.Choose,fieldBottomMargin:"1",isVisible:e=>uu(e,"bid_id","occupation"),isInvalid:e=>e.occupation&&e.bid_id?e.target_apartment_id?null:"Укажите объект недвижимости":null,choose:async(e,t)=>{t.pickApartment(e.target_apartment_id?[e.target_apartment_id]:[]);const i=await t.apartmentResultSubject.toPromise();if(i&&i.length){const[e]=i;return e}return null},tr:async e=>{const t=await bs.apartmentViewService.tryRead(e);return(null==t?void 0:t.zagolovok)||(null==t?void 0:t.$id)||""},name:"target_apartment_id",title:"Выберите объект",placeholder:"Не выбрано"},{type:o.Choose,fieldBottomMargin:"1",isVisible:e=>uu(e,"apartment_id","occupation"),isInvalid:e=>e.occupation&&e.apartment_id?e.target_bid_id?null:"Укажите заявку":null,choose:async(e,t)=>{t.pickBid(e.target_bid_id?[e.target_bid_id]:[]);const i=await t.bidResultSubject.toPromise();if(i&&i.length){const[e]=i;return e}return null},tr:async e=>{const t=await bs.bidViewService.tryRead(e);return(null==t?void 0:t.zagolovok)||(null==t?void 0:t.$id)||""},name:"target_bid_id",title:"Выберите заявку",placeholder:"Не выбрано"},{type:o.Text,sx:{minWidth:470},title:"",placeholder:"Комментарий",name:"comment",inputRows:3}],$y=Fs()((e=>({root:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",height:"calc(100vh - 85px)",width:"100%",["& .".concat("react-declarative__scrollViewTarget")]:{transform:"rotateX(180deg)","& > div > div":{marginBottom:"25px",transform:"rotateX(180deg)"}}},container:{position:"relative",flex:1,display:"flex",alignItems:"stretch",justifyContent:"stretch"},content:{flex:1,display:"flex"},group:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",maxWidth:"276px",minWidth:"276px",gap:10,padding:10,marginRight:10},inactiveGroup:{background:"#E1E2E6"},activeGroup:{background:ze(e.palette.primary.main,.5)},list:{flex:1,minWidth:"256px",height:"100%"},loading:{pointerEvents:"none"}}))),Gy=["contactDisplayName","contactType","contactNumber","responsible","requestType","dealType","metadata_created_at","metadata_updated_at"],Yy={user_id:"",tip_klienta:null,search:""},Ky=[{id:"list",element:({params:{dealCardMap:e},payload:t})=>{const{classes:i}=$y(),[a,o]=oa(Yy),[l,n]=la((()=>({user_id:a.user_id,tip_klienta:JSON.parse(a.tip_klienta),search:a.search})));At((()=>{o(l.current)}),[l.current]);const[s,d]=ue.useState((()=>new Map(e))),c=ue.useMemo((()=>[...s.values()].flatMap((e=>e))),[s]),m=Dt(s),p=ue.useRef(null),[u,h]=ue.useState(null),{handleMoveDeal:y,render:b}=(({payload:e,features:t})=>{const{pickData:i,render:a,resultSubject:o}=Kc({payload:e,features:t}),{pickData:l,render:n,resultSubject:r}=Am({payload:e,features:t}),{handleLoadStart:s,handleLoadEnd:d}=$e({history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)}),c=We({large:!0,title:"Изменение статуса",fields:Wy,payload:()=>({...e,apartmentResultSubject:o,pickApartment:i,bidResultSubject:r,pickBid:l})}),{execute:m}=be((async({id:e,fromStatus:t,toStatus:i,apartment_id:a,bid_id:o,target_apartment_id:l,target_bid_id:n})=>{if(t===i)return;const r=Sn.indexOf(i)>=Hy,s=await c({handler:()=>({fromStatus:t,toStatus:i,occupation:r,apartment_id:a,bid_id:o,target_apartment_id:r?l:null,target_bid_id:r?n:null})}).toPromise();if(s){if(s.target_bid_id){const t=await bs.dealViewService.findOccupiedByBidId(s.target_bid_id),i=await bs.dealViewService.findOccupiedByTagetBidId(s.target_bid_id);if(t&&t.id!==e)return void bs.alertService.notify("На данную заявку создана другая сделка");if(i&&i.id!==e)return void bs.alertService.notify("Данная заявка используется в другой сделке")}if(s.target_apartment_id){const t=await bs.dealViewService.findOccupiedByApartmentId(s.target_apartment_id),i=await bs.dealViewService.findOccupiedByTargetApartmentId(s.target_apartment_id);if(t&&t.id!==e)return void bs.alertService.notify("На данный объект создана другая сделка");if(i&&i.id!==e)return void bs.alertService.notify("Данный лбъект используется в другой сделке")}await bs.dealRequestService.commitDealStatusChange(e,a,o,s.target_apartment_id,s.target_bid_id,t,i,s.comment)}}),{onLoadStart:s,onLoadEnd:d,fallback:bs.errorService.handleGlobalError});return{handleMoveDeal:m,render:()=>he(_e,{children:[a(),n()]})}})({payload:t,features:t.permissions}),_=async(e,t)=>{const i=c.find((t=>t.id===e));if(!i)throw new Error("DealPages BoardView handleChangeStatus dealCard not found");const{dealStatus:a,apartmentId:o,bidId:l}=i;await y({id:e,apartment_id:o||null,bid_id:l||null,fromStatus:a,toStatus:t,target_apartment_id:i.targetApartmentId,target_bid_id:i.targetBidId})},{loading:v,execute:f}=be((async([e])=>{h(null),await _(p.current,e)}),{onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),fallback:bs.errorService.handleGlobalError});ue.useEffect((()=>bs.dealViewService.updateSubject.subscribe(I((async([e,t])=>{const i=new Map(m.current);for(const a of Sn){const t=i.get(a)||[];i.set(a,t.filter((t=>t.id!==e)))}for(const a of Sn)if(a===t.status){const e=i.get(a)||[];e.unshift(await Uy(t)),i.set(a,e)}d(i)})))),[]),ue.useEffect((()=>bs.dealViewService.removeSubject.subscribe(I((async e=>{const t=new Map(m.current);for(const i of Sn){const a=t.get(i)||[];t.set(i,a.filter((t=>t.id!==e)))}d(t)})))),[]),ue.useEffect((()=>bs.dealViewService.createSubject.subscribe(I((async e=>{const t=new Map(m.current);for(const i of Sn)if(i===e.status){let a=t.get(i)||[];a=a.filter((t=>t.id!==e.$id)),a.unshift(await Uy(e)),t.set(i,a)}d(t)})))),[]);const g=v;return he(Te,{className:Ce(i.root,{[i.loading]:g}),children:[he(Oy,{data:l.current,payload:t,onChange:n}),he(Te,{className:i.container,children:he(_i,{withScrollbar:!0,hideOverflowY:!0,className:i.content,children:Sn.map((e=>{const t=m.current.get(e)||[];return he(Te,{onDrop:({currentTarget:t})=>f([e,t]),onDragEnd:()=>{h(null)},onDragOver:t=>{h(e),t.preventDefault()},className:Ce(i.group,{[i.activeGroup]:u===e,[i.inactiveGroup]:u!==e}),children:[he(Ne,{variant:"h6",fontWeight:"bold",children:e}),he(Wi,{className:i.list,minRowHeight:150,children:t.sort((({updatedAt:e},{updatedAt:t})=>r(e).isBefore(t)?1:-1)).filter((e=>{const{user_id:t}=l.current;return!t||e.userId===t})).filter((e=>{const{tip_klienta:t}=l.current;return!(null==t?void 0:t.length)||e.contactType===t[0]})).filter((e=>{const{search:t}=l.current;return!t||na(e,t,...Gy)})).map((e=>he(Ey,{onChangeStatus:async t=>{await _(e.id,t)},onDrag:()=>{p.current=e.id},...e},e.id)))})]})}))})}),b()]})},isActive:e=>ws(["/deal"],e),isAvailable:()=>!1}],Xy=async()=>{const e=new Map;return await Promise.all(Sn.map((async t=>{const i=await bs.dealViewService.findByDealStatus(t),a=await Promise.all(i.map((async e=>await Uy(e))));e.set(t,a)}))),e},Jy=()=>he(Ne,{variant:"h2",color:"primary",width:"100%",textAlign:"center",fontWeight:"bold",sx:{textStroke:"2px #fff",WebkitTextStroke:"2px #fff"},children:Qo}),Zy=Fs()((e=>({root:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,background:e.palette.background.default,height:"100%",width:"100%",display:"flex",alignItems:"center",flexDirection:"column",gap:20,padding:15},container:{position:"relative",overflow:"hidden",minWidth:375,maxWidth:375,padding:15},reveal:{width:"unset"}}))),Qy=Fs()((e=>({root:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,background:e.palette.background.default,height:"100%",width:"100%",display:"flex",alignItems:"center",flexDirection:"column",gap:20,padding:15},container:{position:"relative",overflow:"hidden",minWidth:375,maxWidth:375,padding:15},reveal:{width:"unset"}}))),eb=["Control","S"],tb={overrideSystem:!0,ignoreInputFields:!0,repeatOnHold:!1},ib=e=>{const t=ii(e);return Ma(eb,t,tb)},ab=(e,t)=>({type:o.Box,sx:{display:"grid",gridTemplateColumns:"1fr auto",alignItems:"flex-end",mb:1},fields:[{type:o.Text,fieldBottomMargin:"0",isDisabled:i=>!i["".concat(e,"_link_enabled_").concat(t)],name:"".concat(e,"_link_").concat(t),title:"Ссылка на ".concat(e)},{type:o.Checkbox,fieldBottomMargin:"0",name:"".concat(e,"_link_enabled_").concat(t),title:"Включено"}]}),ob=[{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Курс валюты"})},{type:o.Group,fieldRightMargin:"0",fieldBottomMargin:"0",fields:[{type:o.Text,desktopColumns:"3",tabletColumns:"6",phoneColumns:"12",outlined:!1,name:"usd_eur",title:"Пара USD-EUR",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000"}]},{type:o.Group,fieldRightMargin:"0",fieldBottomMargin:"0",fields:[{type:o.Text,desktopColumns:"3",tabletColumns:"6",phoneColumns:"12",outlined:!1,name:"usd_uzs",title:"Пара USD-UZS",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000"}]}]},{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Отображение карточек"})},{type:o.Combo,desktopColumns:"3",tabletColumns:"6",phoneColumns:"12",outlined:!1,name:"masterdetail_mode",title:"Режим отображения",itemList:async()=>{const e=await bs.dictService.getMasterDetailMode();return Object.keys(e)},tr:async e=>{const t=await bs.dictService.getMasterDetailMode();return h.get(t,e)}}]},{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Водяной знак"})},{type:o.Choose,name:"watermark_file_id",title:"Файл водяного знака",choose:async()=>{const e=await ja("*.png");return e?await bs.appwriteService.uploadFile(e):null},tr:async e=>{try{return await bs.appwriteService.readFileName(e)}catch(t){return"Не указано"}},desktopColumns:"3",tabletColumns:"6",phoneColumns:"12",outlined:!1}]},{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Логотип"})},{type:o.Choose,name:"logo_file_id",title:"Файл логотипа",choose:async()=>{const e=await ja("*.png");return e?await bs.appwriteService.uploadFile(e):null},tr:async e=>{try{return await bs.appwriteService.readFileName(e)}catch(t){return"Не указано"}},desktopColumns:"3",tabletColumns:"6",phoneColumns:"12",outlined:!1}]},{type:o.Paper,fieldRightMargin:"0",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>he(Ne,{variant:"h6",fontWeight:"bold",children:"Ссылки на социальные сети"})},ab(Ll,1),ab(Il,1),ab(Cl,1),ab(Fl,1)]}];window.setting_common_fields=ob;const lb=[{type:He.Link,action:"breadcrumbs-action",label:"RealEstate"},{type:He.Link,action:"breadcrumbs-action",label:"Системные настройки"},{type:He.Button,isDisabled:({hasChanged:e})=>!e,action:"save-action",label:"Сохранить"}],nb=[{type:He.Link,action:"breadcrumbs-action",label:"RealEstate"},{type:He.Link,action:"breadcrumbs-action",label:"Видимость полей"},{type:He.Button,isDisabled:({hasChanged:e})=>!e,action:"save-action",label:"Сохранить"}],rb=[{type:o.Expansion,fieldBottomMargin:"1",hidden:!1,title:"Каналы в Telegram",fields:[{type:o.Typography,sx:{"& *":{fontWeight:"bold !important"}},placeholder:"Список каналов",typoVariant:"subtitle2"},...[...new Array(10)].map(((e,t)=>{return i=t+1,{type:o.Box,sx:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr auto",alignItems:"flex-end",mb:1},fields:[{type:o.Text,isDisabled:e=>!e["telegram_channel_enabled_".concat(i)],fieldBottomMargin:"0",name:"telegram_name_".concat(i),title:"Имя канала"},{type:o.Text,isDisabled:e=>!e["telegram_channel_enabled_".concat(i)],fieldBottomMargin:"0",name:"telegram_token_".concat(i),title:"Токен бота"},{type:o.Text,fieldBottomMargin:"0",isDisabled:e=>!e["telegram_channel_enabled_".concat(i)],name:"telegram_channel_".concat(i),title:"Никнейм канала"},{type:o.Checkbox,fieldBottomMargin:"0",name:"telegram_channel_enabled_".concat(i),title:"Включено"}]};var i}))]},{type:o.Expansion,title:"Контакты в Telegram",fields:[{type:o.Outline,fieldRightMargin:"1",columns:"6",hidden:!1,fields:[{type:o.Typography,sx:{"& *":{fontWeight:"bold !important"}},placeholder:"Список номеров агенства",typoVariant:"subtitle2"},...[...new Array(5)].map(((e,t)=>{return i=t+1,{type:o.Box,sx:{display:"grid",gridTemplateColumns:"1fr 1fr auto",alignItems:"flex-end",mb:1},fields:[{type:o.Text,fieldBottomMargin:"0",isDisabled:e=>!e["telegram_agency_enabled_".concat(i)],name:"telegram_agency_".concat(i),title:"Номер агенства"},{type:o.Text,isDisabled:e=>!e["telegram_agency_enabled_".concat(i)],fieldBottomMargin:"0",name:"telegram_agency_nickname_".concat(i),title:"Никнейм в Telegram"},{type:o.Checkbox,fieldBottomMargin:"0",name:"telegram_agency_enabled_".concat(i),title:"Включено"}]};var i}))]},{type:o.Outline,columns:"6",hidden:!1,fields:[{type:o.Typography,sx:{"& *":{fontWeight:"bold !important"}},placeholder:"Список номеров агента",typoVariant:"subtitle2"},...[...new Array(5)].map(((e,t)=>{return i=t+1,{type:o.Box,sx:{display:"grid",gridTemplateColumns:"1fr 1fr auto",alignItems:"flex-end",mb:1},fields:[{type:o.Text,fieldBottomMargin:"0",isDisabled:e=>!e["telegram_agent_enabled_".concat(i)],name:"telegram_agent_".concat(i),title:"Номер агента"},{type:o.Text,isDisabled:e=>!e["telegram_agent_enabled_".concat(i)],fieldBottomMargin:"0",name:"telegram_agent_nickname_".concat(i),title:"Никнейм в Telegram"},{type:o.Checkbox,fieldBottomMargin:"0",name:"telegram_agent_enabled_".concat(i),title:"Включено"}]};var i}))]}]}];window.setting_integration_fields=rb;const sb=[{type:He.Link,action:"breadcrumbs-action",label:"RealEstate"},{type:He.Link,action:"breadcrumbs-action",label:"Telegram"},{type:He.Button,isDisabled:({hasChanged:e})=>!e,action:"save-action",label:"Сохранить"}],db=[{type:o.Text,outlined:!0,name:"title",title:"Наименование",isInvalid:({title:e})=>e?null:"Поле не должно быть пустым"},{type:o.Text,outlined:!0,title:"Комментарий",name:"comment",inputRows:3}],cb=[{title:"База объектов",children:[{name:"sozdanie_obekta",label:"Создание объекта",description:"Возможность создать объект"},{name:"redaktirovanie_obekta",label:"Редактирование объекта",description:"Возможность отредактировать объект"},{name:"prosmotr_obekta",label:"Просмотр объекта",description:"Возможность просмотреть объект"}]},{title:"Заявки",children:[{name:"sozdanie_zayavki",label:"Создание заявки",description:"Возможность создать заявку"},{name:"redaktirovanie_zayavki",label:"Редактирование заявки",description:"Возможность отредактировать заявку"},{name:"prosmotr_zayavki",label:"Просмотр заявки",description:"Возможность просмотреть заявку"}]},{title:"Контакты",children:[{name:"sozdanie_kontakta",label:"Создание контакта",description:"Возможность создать контакт"},{name:"redaktirovanie_kontakta",label:"Редактирование контакта",description:"Возможность отредактировать данные контакта"},{name:"prosmotr_kontakta",label:"Просмотр контакта",description:"Возможность просмотреть данные контакта"}]},{title:"Реклама",children:[{name:"publikacziya_reklamy",label:"Публикация рекламы в канал",description:"Возможность опубликовать рекламу в канал"},{name:"dobavlenie_kategorii_i_podkategorii",label:"Добавление категории и подкатегории в канал",description:"Возможность добавления категории и подкатегории в канал"}]},{title:"Служебный комментарий",children:[{name:"upominanie_polzovatelya",label:"Упоминание сотрудника",description:"Возможность упомянуть сотрудника в чате"},{name:"dobavlenie_fajla",label:"Добавление файла",description:"Возможность добавить файл в чат"}]},{title:"Сотрудники",children:[{name:"redaktirovanie_sotrudnika",label:"Редактирование сотрудника",description:"Возможность отредактировать данные сотрудника"},{name:"prosmotr_nomera_telefona_i_email",label:"Просмотр номера телефона и email",description:"Возможность просмотреть номер телефона и email сотрудника"},{name:"nastrojka_urovnej_dostupa",label:"Настройка уровней доступа",description:"Возможность настраивать уровни доступа"},{name:"anonimnoe_redaktirovanie",label:"Анонимное редактирование",description:"Красная плашка просмотра объекта или заявки не показывается"},{name:"polnoe_udalenie",label:"Полное удаление",description:"Возможность удалить объект или заявку"}]},(({title:e,levels:t})=>({title:e,children:t.map((({label:e,description:i},a)=>{const o="level-".concat(a+1);return{name:o,label:e,description:i,map:e=>{if(!e[o])return e;for(let i=0;i!==t.length;i++){const t="level-".concat(i+1);t!==o&&(e[t]=!1)}return e}}}))}))({title:"Уровень доступа",levels:[{label:"Стажер",description:"Видит только свои записи"},{label:"Сотрудник",description:"Видит свои записи и записи стажера"},{label:"Менеджер",description:"Видит свои записи и записи стажера, сотрудника"},{label:"Администратор",description:"Видит свои записи и записи стажера, сотрудника, менеджера"},{label:"Суперадмин",description:"Видет все данные из базы данных без ограничений"}]}),{title:"Доступ",children:[{name:"ne_vizhu_nomera_telefonov_chuzhih_kontaktov",label:"Не вижу номера телефонов чужих контактов (Стажер)",description:"Возможность скрыть номера телефонов контактов по всей базе кроме созданных самим пользователем"},{name:"vse_obekty_eksklyuzivny",label:"Все объекты эксклюзивны по умолчанию (Менеджер)",description:"Созданные пользователем контакты видны только ему"},{name:"vizhu_vse_urovni",label:"Вижу все уровни",description:"Видит номер контакта у вышестоящих уровней доступа"},{name:"vizhu_kontakty_pod_bronyu",label:"Вижу контакты под бронью (Директор)",description:"Вижу контакты, даже если получен задаток"},{name:"zaderzhka_perenaznacheniya_otvetstvennogo",label:"Задержка переназначения ответственного",description:"Могу забрать объект только через три дня простоя"},{name:"superadmin",label:"Суперадмин",description:"Действия, доступные только администратору базы данных"},{name:"officemanager",label:"Офис-менеджер",description:"Действия, доступные только офис-менеджеру"}]},{title:"Настройки",children:[{name:"dostup_k_nastrojkam",label:"Доступ к настройкам",description:"Возможность разрешить менять настройки"},{name:"sozdanie_roli",label:"Создание роли",description:"Возможность создать роль"},{name:"redaktirovanie_roli",label:"Редактирование роли",description:"Возможность отредактировать роль"},{name:"dostup_k_nastrojke_polej",label:"Доступ к настройке полей",description:"Возможность включать и выключать поля"}]}],mb=Fs()((e=>({root:{position:"absolute",padding:20,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"stretch",transform:"translate(-50%, -50%)",outline:"none",backgroundColor:e.palette.background.paper,borderRadius:5,gap:5},content:{overflow:"hidden",overflowY:"auto",flex:1},small:{top:"40%",left:"50%",maxHeight:"80%",width:500},large:{top:"50%",left:"50%",width:"calc(100vw - 60px)",height:"calc(100vh - 60px)"},container:{flex:1,overflow:"hidden"},title:{display:"flex",justifyContent:"space-between",alignItems:"center",height:65,color:e.palette.text.primary},submit:{marginTop:15},disabled:{opacity:.5,pointerEvents:"none"},indicatorTransparent:{height:6,background:e.palette.primary.main},tabRootTransparent:{minHeight:54,height:54},tabsRoot:{minHeight:54,height:54,marginLeft:"0 !important",marginRight:"0 !important"}}))),pb=[{type:tt.Compute,compute:({title:e})=>e||"Не указано",field:"title",headerName:"Наименование",width:()=>200},{type:tt.Compute,compute:({comment:e})=>e||"Не указано",field:"comment",headerName:"Комментарий",width:e=>Math.max(e-300,200)},{type:tt.Action,headerName:"Действие",sortable:!1,width:()=>100}],ub=[{type:It.Add,isDisabled:(e,{permissions:t})=>!t.hasSettingsCreateRolePermission},{type:It.Menu,options:[{action:"add-action",isDisabled:(e,{permissions:t})=>!t.hasSettingsCreateRolePermission},{action:"update-now"},{action:"resort-action"},{action:"drop-filters"}]}],hb=[{label:"Удалить",action:"remove-action",icon:Lt}],yb=()=>window.innerHeight-160,bb=[{id:"common",element:({payload:e})=>{const t=t=>{const{data:i,oneProps:a,beginSave:o,waitForChanges:l}=Ba({waitForChangesDelay:tl,history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),updateSubject:bs.settingsViewService.updateSubject,onSave:async e=>{let t=!0;try{await bs.settingsViewService.setValue(e),bs.alertService.notify("Изменения сохранены")}catch(i){t=!1;const e=jr(i);bs.alertService.notify(e)}return t},fallback:bs.errorService.handleGlobalError});ib((async()=>{await l(),o()}));return he(Oi,{children:[he(Xe,{items:lb,onAction:e=>{"save-action"===e&&o()},payload:{hasChanged:!!i,payload:e}}),he(Je,{dirty:!0,handler:()=>t.data,payload:e,fields:ob,...a}),he(Qe,{})]})};return he(ra,{state:async()=>[await bs.settingsViewService.getValue()],fallback:bs.errorService.handleGlobalError,children:([e])=>he(t,{data:e})})},isActive:e=>ws(["/settings","/settings/common"],e),isAvailable:()=>!1},{id:"roles",element:({payload:e})=>{const{handleLoadStart:t,handleLoadEnd:i}=$e({history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)}),{pickRole:a,render:o}=(({fullScreen:e,onChange:t,onSubmit:i,fallback:a,onLoadStart:o,onLoadEnd:l})=>{const[n,r]=ue.useState("common"),[s,d]=ue.useState({}),[c,m]=ue.useState(!1),[p,u]=ue.useState(!1),[h,y]=ue.useState(!1),[b,_]=ue.useState(0),{classes:v,cx:f}=mb();At((()=>{t&&t(s)}),[s]);const g=(e,t)=>{t||(d(e),y(!0),m(!1))},k=()=>{d({}),u(!1),y(!1)},w=async()=>{i&&await i(s),u(!1),y(!1)},S=()=>{_((e=>e+1)),o&&o()},z=e=>{_((e=>e-1)),l&&l(e)};return{render:()=>he(qe,{open:p,onClose:k,children:he(Te,{className:f(v.root,{[v.small]:!e,[v.large]:e}),children:[he(Te,{className:v.content,children:[he(Te,{className:v.title,sx:{position:"sticky",top:0,zIndex:1,background:"white"},children:he(Ne,{variant:"h6",component:"h2",children:s.id?"Редактирование роли":"Создание роли"})}),he(Ai,{value:n,children:[he(Te,{className:v.container,sx:{borderBottom:1,borderColor:"divider",pointerEvents:"all",position:"sticky",top:"65px",zIndex:1,background:"white"},children:he(Ti,{variant:"fullWidth",classes:{root:v.tabsRoot,indicator:v.indicatorTransparent},onChange:(e,t)=>{r(t),m(!1)},children:[he(Ci,{classes:{root:v.tabRootTransparent},label:"Общая информация",value:"common"}),he(Ci,{classes:{root:v.tabRootTransparent},label:"Бизнес функции",value:"features"})]})}),he(Li,{className:v.content,value:"common",children:he(Je,{sx:{pt:2},handler:s,fields:db,change:g,invalidity:()=>m(!0)})}),he(Li,{className:v.content,value:"features",children:he(Ra,{sx:{pt:2},readonly:c,features:cb,outlinePaper:!0,handler:()=>s.role_features?s.role_features.reduce(((e,t)=>({...e,[t]:!0})),{}):{},change:(e,t)=>{if(e&&!t){const t=Object.entries(e).filter((([e,t])=>!!t)).map((([e])=>e));d((e=>({...e,role_features:t}))),y(!0)}}})})]})]}),he(pt,{className:v.submit,disabled:!!b||!h||c,fallback:a,onLoadStart:S,onLoadEnd:z,size:"large",variant:"contained",color:"info",fullWidth:!0,onClick:w,children:s.id?"Сохранить":"Создать"})]})}),pickRole:e=>{d(e),u(!0)}}})({onLoadStart:t,onLoadEnd:i,onSubmit:async e=>{if(e.id)return await bs.roleViewService.update(e.id,e),bs.alertService.notify("Изменения сохранены"),void l.next();await bs.roleViewService.create(e),bs.alertService.notify("Роль создана"),l.next()},fullScreen:!0}),l=Ve(bs.roleViewService.reloadSubject),{listProps:n}=Xi(bs.routerService.locationState,{fallback:bs.errorService.handleGlobalError}),r=et(bs.roleViewService.findAll,{onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),fallback:bs.errorService.handleGlobalError,searchEntries:["title","comment"]});return he(_e,{children:[he(yi,{withSingleSort:!0,withSearch:!0,fetchDebounce:el,reloadSubject:l,title:"Роли",heightRequest:yb,rowActions:hb,actions:ub,columns:pb,handler:r,payload:e,onRowClick:async e=>{(await bs.permissionService.getPermissions()).hasSettingsEditRolePermission&&a(e)},onAction:async e=>{"add-action"===e&&a({})},onRowAction:async(e,t)=>{"remove-action"===e&&await bs.roleViewService.remove(t.id)},selectionMode:lt.Multiple,...n}),o()]})},isActive:e=>ws(["/settings/roles"],e),isAvailable:()=>!1},{id:"integration",element:({payload:e})=>{const t=t=>{const{data:i,oneProps:a,beginSave:o,waitForChanges:l}=Ba({waitForChangesDelay:tl,history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),updateSubject:bs.settingsViewService.updateSubject,onSave:async e=>{let t=!0;try{await bs.settingsViewService.setValue(e),bs.alertService.notify("Изменения сохранены")}catch(i){t=!1;const e=jr(i);bs.alertService.notify(e)}return t},fallback:bs.errorService.handleGlobalError});ib((async()=>{await l(),o()}));return he(Oi,{children:[he(Xe,{items:sb,onAction:e=>{"save-action"===e&&o()},payload:{hasChanged:!!i,payload:e}}),he(Je,{dirty:!0,handler:()=>t.data,payload:e,fields:rb,...a}),he(Qe,{})]})};return he(ra,{state:async()=>[await bs.settingsViewService.getValue()],fallback:bs.errorService.handleGlobalError,children:([e])=>he(t,{data:e})})},isActive:e=>ws(["/settings/integration"],e),isAvailable:()=>!1},{id:"field_visibility",element:({payload:e})=>{const t=t=>{const{data:i,oneProps:a,beginSave:l,waitForChanges:n}=Ba({waitForChangesDelay:tl,history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),updateSubject:bs.settingsViewService.updateSubject,onSave:async e=>{let i=!0;try{const i=Object.entries(e).filter((([,e])=>e)).map((([e])=>e));await bs.settingsViewService.setValue({...t.settings,field_visibility:i}),bs.alertService.notify("Изменения сохранены")}catch(a){i=!1;const e=jr(a);bs.alertService.notify(e)}return i},fallback:bs.errorService.handleGlobalError}),r=ue.useMemo((()=>{const e=t.visibilityVariant;return[{type:o.Expansion,title:"Видимость полей",fields:e.map((({label:e,value:t})=>({type:o.Checkbox,name:t,title:"".concat(e," (").concat(t,")")})))}]}),[]);ib((async()=>{await n(),l()}));return he(Oi,{children:[he(Xe,{items:nb,onAction:e=>{"save-action"===e&&l()},payload:{hasChanged:!!i,payload:e}}),he(Je,{dirty:!0,handler:()=>t.visibilityVariant.reduce(((e,{value:i})=>({...e,[i]:t.visibilitySet.has(i)})),{}),payload:e,fields:r,...a}),he(Qe,{})]})};return he(ra,{state:async()=>[await bs.settingsViewService.getValue(),await bs.visibilityService.getFieldVisibilitySet(),await bs.visibilityService.getFieldVisibilityVariant()],fallback:bs.errorService.handleGlobalError,children:([e,i,a])=>he(t,{settings:e,visibilitySet:i,visibilityVariant:a})})},isActive:e=>ws(["/settings/field_visibility"],e),isAvailable:()=>!1}],_b=()=>he(ra,{state:async()=>[await bs.settingsViewService.getMasterDetailMode(),await bs.permissionService.getPermissions(),await bs.featureService.getAccessLevel()],reloadSubject:bs.layoutService.reloadOutletSubject,fallback:bs.errorService.handleGlobalError,children:async([e,t,i])=>he(Ji,{history:bs.routerService,routes:bb,payload:()=>({menuMode:e,permissions:t,accessLevel:i})})}),vb=[{id:"list",element:wu,isActive:e=>ws(["/task","/task_mine"],e),isAvailable:()=>!1}],fb=({id:e})=>he(ra,{state:async()=>[await bs.settingsViewService.getMasterDetailMode(),await bs.permissionService.getPermissions(),await bs.featureService.getAccessLevel()],fallback:bs.errorService.handleGlobalError,children:async([e,t,i])=>he(Ji,{history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),routes:vb,payload:()=>({menuMode:e,permissions:t,accessLevel:i})})}),gb=[{id:"user",label:"Общая информация",isActive:()=>ws(["/user_edit/:id","/user_edit/:id/user"])},{id:"additional_info",label:"Дополнительная информация",isActive:()=>ws(["/user_edit/:id","/user_edit/:id/additional_info"])},{id:"features",label:"Бизнес-функции",isActive:()=>ws(["/user_edit/:id/features"])},{id:"files",label:"Файлы",isActive:()=>ws(["/user_edit/:id/files"])}],kb=(e,t)=>{if(t)return;const i=vs("id");"user"===e&&bs.routerService.replace("/user_edit/".concat(i,"/user")),"additional_info"===e&&bs.routerService.replace("/user_edit/".concat(i,"/additional_info")),"files"===e&&bs.routerService.replace("/user_edit/".concat(i,"/files")),"features"===e&&bs.routerService.replace("/user_edit/".concat(i,"/features"))},wb=({children:e,payload:t,mode:i=j.Paper})=>{const a=ue.useMemo((()=>"tabs"===i?j.Tabs:j.Paper),[i]);return he(fe,{withFixedPos:!0,payload:t,fixedPosHeaderAdjust:i===j.Paper?85:64,mode:a,options:gb,onActiveOptionChange:kb,children:e})},Sb=[{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Typography,typoVariant:"h6",placeholder:"Паспортные данные"},{type:o.Text,columns:"6",outlined:!1,name:"seriya-i-nomer_pasporta",title:"Серия и номер паспорта"},{type:o.Date,columns:"6",outlined:!1,name:"data-vydachi_pasporta",title:"Дата выдачи паспорта"},{type:o.Text,columns:"6",outlined:!1,name:"kem_vydan",title:"Кем выдан"},{type:o.Text,columns:"6",outlined:!1,name:"adres_propiski",title:"Адрес прописки"},{type:o.Text,columns:"6",outlined:!1,name:"adres_prozhivaniya",title:"Адрес проживания"}]},{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Typography,typoVariant:"h6",placeholder:"Дополнительно"},{type:o.Text,columns:"6",outlined:!1,inputRows:3,name:"o_sebe",title:"О себе"},{type:o.Text,columns:"6",outlined:!1,inputRows:3,name:"hobbi",title:"Хобби"}]},{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Typography,typoVariant:"h6",placeholder:"Социальные сети"},{type:o.Text,columns:"6",outlined:!1,name:"telegram",title:"Telegram"},{type:o.Text,columns:"6",outlined:!1,name:"fejsbuk",title:"Facebook"},{type:o.Text,columns:"6",outlined:!1,name:"instagram",title:"Instagram"},{type:o.Text,columns:"6",outlined:!1,name:"vatsap",title:"WhatsApp"},{type:o.Text,columns:"6",outlined:!1,name:"v_kontakte",title:"VK"},{type:o.Text,columns:"6",outlined:!1,name:"zum",title:"ZOOM"}]},{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Typography,typoVariant:"h6",placeholder:"Дополнительные сведения"},{type:o.Group,fields:[{type:o.Group,columns:"6",fields:[{type:o.Component,element:()=>he(Ne,{children:"Дети"})},{type:o.Group,child:{type:o.Box,sx:{display:"grid",gridTemplateColumns:"auto auto 1fr"},fields:[{type:o.Radio,name:"deti",radioValue:"д",title:"Да"},{type:o.Radio,name:"deti",radioValue:"н",title:"Нет"}]}},{type:o.Group,columns:"12",fields:[{type:o.Combo,fieldRightMargin:"4",columns:"6",outlined:!1,name:"semejnoe_polozhenie",title:"Семейное положение",itemList:["Не выбрано","Холост/не замужем","Женат/замужем","Гражданский брак","Разведен(а)"]},{type:o.Date,fieldRightMargin:"4",columns:"6",outlined:!1,name:"data_priema_rezyume",title:"Дата приема резюме"},{type:o.Date,fieldRightMargin:"4",columns:"6",outlined:!1,name:"sertifikat",title:"Сертификат"},{type:o.Date,fieldRightMargin:"4",columns:"6",outlined:!1,name:"nachalo_opyta_raboty",title:"Начало опыта работы"},{type:o.Date,fieldRightMargin:"4",columns:"6",outlined:!1,name:"data_uvolneniya",title:"Дата увольнения"},{type:o.Text,outlined:!1,inputRows:3,name:"prichina_uvolneniya",title:"Причина увольнения"}]}]}]}]}];window.user_additional_info_fields=Sb;const zb=[{type:He.Link,isVisible:()=>!!bs.routerService.previousPath,action:"list-action",label:he(De,{sx:{display:"block"}})},{type:He.Link,action:"user-list-action",label:"Сотрудники"},{type:He.Link,action:"user-list-action",label:"Редактирование дополнительной информации сотрудника"},{type:He.Button,isDisabled:({hasChanged:e})=>!e,action:"user-save-action",label:"Сохранить"}],Vb=[{id:"user",label:"Общая информация",isActive:()=>ws(["/user_view/:id","/user_view/:id/user"])},{id:"additional_info",label:"Дополнительная информация",isActive:()=>ws(["/user_view/:id","/user_view/:id/additional_info"])},{id:"features",isDisabled:({permissions:e})=>!e.hasUsersAccessLevelsPermission,label:"Бизнес-функции",isActive:()=>ws(["/user_view/:id/features"])},{id:"files",label:"Файлы",isActive:()=>ws(["/user_view/:id/files"])}],xb=(e,t)=>{if(t)return;const i=vs("id");"user"===e&&bs.routerService.replace("/user_view/".concat(i,"/user")),"additional_info"===e&&bs.routerService.replace("/user_view/".concat(i,"/additional_info")),"features"===e&&bs.routerService.replace("/user_view/".concat(i,"/features")),"files"===e&&bs.routerService.replace("/user_view/".concat(i,"/files"))},Ab=({children:e,payload:t,mode:i=j.Paper})=>{const a=ue.useMemo((()=>"tabs"===i?j.Tabs:j.Paper),[i]);return he(fe,{withFixedPos:!0,payload:t,fixedPosHeaderAdjust:i===j.Paper?85:64,mode:a,options:Vb,onActiveOptionChange:xb,children:e})},Tb=[{type:o.Paper,isVisible:e=>Ds(e,"seriya-i-nomer_pasporta","data-vydachi_pasporta","kem_vydan","adres_propiski","adres_prozhivaniya"),fieldBottomMargin:"1",fields:[{type:o.Typography,typoVariant:"h6",placeholder:"Паспортные данные"},{type:o.Text,isVisible:e=>Ds(e,"seriya-i-nomer_pasporta"),columns:"6",outlined:!1,name:"seriya-i-nomer_pasporta",title:"Серия и номер паспорта"},{type:o.Text,isVisible:e=>Ds(e,"data-vydachi_pasporta"),columns:"6",outlined:!1,name:"data-vydachi_pasporta",title:"Дата выдачи паспорта"},{type:o.Text,isVisible:e=>Ds(e,"kem_vydan"),columns:"6",outlined:!1,name:"kem_vydan",title:"Кем выдан"},{type:o.Text,isVisible:e=>Ds(e,"adres_propiski"),columns:"6",outlined:!1,name:"adres_propiski",title:"Адрес прописки"},{type:o.Text,isVisible:e=>Ds(e,"adres_prozhivaniya"),columns:"6",outlined:!1,name:"adres_prozhivaniya",title:"Адрес проживания"}]},{type:o.Paper,isVisible:e=>Ds(e,"o_sebe","hobbi"),fieldBottomMargin:"1",fields:[{type:o.Typography,typoVariant:"h6",placeholder:"Дополнительно"},{type:o.Text,isVisible:e=>Ds(e,"o_sebe"),columns:"6",outlined:!1,inputRows:3,name:"o_sebe",title:"О себе"},{type:o.Text,isVisible:e=>Ds(e,"hobbi"),columns:"6",outlined:!1,inputRows:3,name:"hobbi",title:"Хобби"}]},{type:o.Paper,isVisible:e=>Ds(e,"telegram","fejsbuk","instagram","vatsap","v_kontakte","zum"),fieldBottomMargin:"1",fields:[{type:o.Typography,typoVariant:"h6",placeholder:"Социальные сети"},{type:o.Text,isVisible:e=>Ds(e,"telegram"),columns:"6",outlined:!1,name:"telegram",title:"Telegram"},{type:o.Text,isVisible:e=>Ds(e,"fejsbuk"),columns:"6",outlined:!1,name:"fejsbuk",title:"Facebook"},{type:o.Text,isVisible:e=>Ds(e,"instagram"),columns:"6",outlined:!1,name:"instagram",title:"Instagram"},{type:o.Text,isVisible:e=>Ds(e,"vatsap"),columns:"6",outlined:!1,name:"vatsap",title:"WhatsApp"},{type:o.Text,isVisible:e=>Ds(e,"v_kontakte"),columns:"6",outlined:!1,name:"v_kontakte",title:"VK"},{type:o.Text,isVisible:e=>Ds(e,"zum"),columns:"6",outlined:!1,name:"zum",title:"ZOOM"}]},{type:o.Paper,isVisible:e=>Ds(e,"deti","semejnoe_polozhenie","data_priema_rezyume","sertifikat","nachalo_opyta_raboty","data_uvolneniya","prichina_uvolneniya"),fieldBottomMargin:"1",fields:[{type:o.Typography,typoVariant:"h6",placeholder:"Дополнительные сведения"},{type:o.Group,fields:[{type:o.Group,isVisible:e=>Ds(e,"deti"),columns:"6",fields:[{type:o.Component,element:()=>he(Ne,{children:"Дети"})},{type:o.Group,child:{type:o.Box,sx:{display:"grid",gridTemplateColumns:"auto auto 1fr"},fields:[{type:o.Radio,isVisible:e=>Ds(e,"deti"),name:"deti",radioValue:"д",title:"Да"},{type:o.Radio,isVisible:e=>Ds(e,"deti"),name:"deti",radioValue:"н",title:"Нет"}]}},{type:o.Group,columns:"12",fields:[{type:o.Text,isVisible:e=>Ds(e,"semejnoe_polozhenie"),fieldRightMargin:"4",columns:"6",outlined:!1,name:"semejnoe_polozhenie",title:"Семейное положение"},{type:o.Text,isVisible:e=>Ds(e,"data_priema_rezyume"),fieldRightMargin:"4",columns:"6",outlined:!1,name:"data_priema_rezyume",title:"Дата приема резюме"},{type:o.Text,isVisible:e=>Ds(e,"sertifikat"),fieldRightMargin:"4",columns:"6",outlined:!1,name:"sertifikat",title:"Сертификат"},{type:o.Text,isVisible:e=>Ds(e,"nachalo_opyta_raboty"),fieldRightMargin:"4",columns:"6",outlined:!1,name:"nachalo_opyta_raboty",title:"Начало опыта работы"},{type:o.Text,isVisible:e=>Ds(e,"data_uvolneniya"),fieldRightMargin:"4",columns:"6",outlined:!1,name:"data_uvolneniya",title:"Дата увольнения"},{type:o.Text,isVisible:e=>Ds(e,"prichina_uvolneniya"),outlined:!1,inputRows:3,name:"prichina_uvolneniya",title:"Причина увольнения"}]}]}]}]}],Cb=[{type:He.Link,action:"list-action",label:"Сотрудники"},{type:He.Link,action:"list-action",label:"Дополнительная информация сотрудника"},{type:He.Button,isDisabled:({payload:{permissions:e}})=>!e.hasUsersUpdatePermission,action:"edit-action",label:"Редактировать"}],Fb=[{type:He.Link,isVisible:()=>!!bs.routerService.previousPath,action:"list-action",label:he(De,{sx:{display:"block"}})},{type:He.Link,action:"user-list-action",label:"Сотрудники"},{type:He.Link,action:"user-list-action",label:"Редактирование бизнес-функций сотрудника"},{type:He.Button,isDisabled:({hasChanged:e})=>!e,action:"user-save-action",label:"Сохранить"}],Lb=[{type:He.Link,action:"list-action",label:"Сотрудники"},{type:He.Link,action:"list-action",label:"Бизнес-Функции сотрудника"},{type:He.Button,action:"edit-action",label:"Редактировать"}],Ib=[{type:He.Link,isVisible:()=>!!bs.routerService.previousPath,action:"list-action",label:he(De,{sx:{display:"block"}})},{type:He.Link,action:"list-action",label:"Сотрудники"},{type:He.Link,action:"list-action",label:"Редактирование файлов сотрудника"},{type:He.Button,isDisabled:({hasChanged:e})=>!e,action:"save-action",label:"Сохранить"}],Mb=[{type:He.Link,action:"list-action",label:"Сотрудники"},{type:He.Link,action:"list-action",label:"Файлы сотрудника"},{type:He.Button,isDisabled:({payload:{permissions:e}})=>!e.hasUsersUpdatePermission,action:"edit-action",label:"Редактировать"}],jb=Se.createLoader(28),Bb=[{type:o.Text,outlined:!0,name:"email",title:"Email"},{type:o.Text,outlined:!0,name:"phone",title:"Телефон"}],Rb=[{type:tt.Component,headerName:"Аватар",sortable:!1,width:()=>65,element:({avatar:e,email:t})=>he(Le,{Loader:jb,children:async()=>{const i=e?await bs.appwriteService.getImageURL(e):"";return he(Te,{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:he(it,{src:i||void 0,alt:t})})}})},{type:tt.Compute,sortable:!1,field:"index",headerName:"Номер",element:({index:e})=>he(gt,{content:e}),width:()=>100},{type:tt.Compute,sortable:!1,headerName:"Имя",compute:({last_name:e="",first_name:t="",middle_name:i=""})=>[e,t,i].filter((e=>e.length)).join(" ")||"",width:e=>Math.max((e-265)/3,200)},{type:tt.Compute,isVisible:({payload:{permissions:e}})=>W(e.hasContactNumberPermission,e.hasUsersViewPhoneAndEmailPermission),sortable:!1,compute:({rabochij_telefon:e})=>e||"",field:"rabochij_telefon",headerName:"Рабочий телефон",width:e=>Math.max((e-265)/3,200)},{type:tt.Compute,sortable:!1,compute:({email:e})=>e||"",isVisible:({payload:{permissions:e}})=>W(e.hasContactEmailPermission,e.hasUsersViewPhoneAndEmailPermission),field:"email",headerName:"Email",width:e=>Math.max((e-265)/3,200)},{type:tt.Action,headerName:"Действие",sortable:!1,width:()=>100}],Db=[{type:It.Menu,options:[{action:"update-now"},{action:"resort-action"},{action:"drop-filters"}]}],qb=[{label:"Редактировать",isDisabled:(e,{permissions:t})=>!t.hasUsersUpdatePermission,action:"edit-action"},{label:"В архиве",action:"toggle-archive",icon:Pt,isVisible:({system_is_remove:e})=>W(!e)},{label:"В архиве",action:"toggle-archive",icon:Et,isVisible:({system_is_remove:e})=>W(!!e)}],Pb=()=>window.innerHeight-100,Eb=Se.createLoader(28),Nb=[{type:o.Text,outlined:!0,name:"email",title:"Email"},{type:o.Text,outlined:!0,name:"phone",title:"Телефон"}],Ob=[{type:tt.Component,headerName:"Аватар",sortable:!1,width:()=>65,element:({avatar:e,email:t})=>he(Le,{Loader:Eb,children:async()=>{const i=e?await bs.appwriteService.getImageURL(e):"";return he(Te,{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:he(it,{src:i||void 0,alt:t})})}})},{type:tt.Compute,sortable:!1,field:"index",headerName:"Номер",element:({index:e})=>he(gt,{content:e}),width:()=>100},{type:tt.Compute,sortable:!1,headerName:"Имя",compute:({last_name:e="",first_name:t="",middle_name:i=""})=>[e,t,i].filter((e=>e.length)).join(" ")||"",width:()=>125},{type:tt.Compute,isVisible:({payload:{permissions:e}})=>W(e.hasContactNumberPermission,e.hasUsersViewPhoneAndEmailPermission),sortable:!1,compute:({rabochij_telefon:e})=>e||"",field:"rabochij_telefon",headerName:"Рабочий телефон",width:()=>180},{type:tt.Compute,sortable:!1,compute:({email:e})=>e||"",isVisible:({payload:{permissions:e}})=>W(e.hasContactEmailPermission,e.hasUsersViewPhoneAndEmailPermission),field:"email",headerName:"Email",width:()=>180},{type:tt.Action,headerName:"Действие",sortable:!1,width:()=>100}],Ub=[{type:It.Menu,options:[{action:"update-now"},{action:"resort-action"},{action:"drop-filters"}]}],Hb=[{label:"Редактировать",isDisabled:(e,{permissions:t})=>!t.hasUsersUpdatePermission,action:"edit-action"},{label:"В архиве",action:"toggle-archive",icon:Pt,isVisible:({system_is_remove:e})=>W(!e)},{label:"В архиве",action:"toggle-archive",icon:Et,isVisible:({system_is_remove:e})=>W(!!e)}],Wb=()=>window.innerHeight-100,$b=({payload:e})=>{const t=Ve(bs.userViewService.reloadSubject),{listProps:i}=Xi(bs.routerService.locationState,{fallback:bs.errorService.handleGlobalError}),a=Zs();return he(_e,{children:he(yi,{withSearch:!0,withSingleSort:!0,noInitialFilters:!0,fetchDebounce:el,title:"Сотрудники",filterLabel:"Фильтры",reloadSubject:t,heightRequest:Wb,rowActions:Hb,actions:Ub,filters:Nb,columns:Ob,handler:a,onRowAction:async(e,i)=>{"edit-action"===e&&bs.routerService.push("/user_edit/".concat(i.id)),"remove-action"===e&&(await bs.userViewService.remove(i.id),t.next()),"toggle-archive"===e&&await bs.userViewService.toggleArchive(i.id)},onRowClick:e=>{bs.routerService.push("/user_view/".concat(e.id))},selectionMode:lt.Multiple,slots:{FilterListSlot:ot},payload:e,...i})})},Gb=[{id:"common",element:$b,isActive:e=>ws(["/user"],e),isAvailable:()=>!1},{id:"common",element:$b,isActive:e=>ws(["/user_common"],e),isAvailable:()=>!1},{id:"archive",element:({payload:e})=>{const t=Ve(bs.userViewService.reloadSubject),{listProps:i}=Xi(bs.routerService.locationState,{fallback:bs.errorService.handleGlobalError}),a=Zs();return he(_e,{children:he(yi,{withSearch:!0,withSingleSort:!0,noInitialFilters:!0,fetchDebounce:el,title:"Сотрудники",filterLabel:"Фильтры",reloadSubject:t,heightRequest:Pb,rowActions:qb,actions:Db,filters:Bb,columns:Rb,handler:a,onRowAction:async(e,i)=>{"edit-action"===e&&bs.routerService.push("/user_edit/".concat(i.id)),"remove-action"===e&&(await bs.userViewService.remove(i.id),t.next()),"toggle-archive"===e&&await bs.userViewService.toggleArchive(i.id)},onRowClick:e=>{bs.routerService.push("/user_view/".concat(e.id))},selectionMode:lt.Multiple,slots:{FilterListSlot:ot},payload:()=>({...e,_archive:!0}),...i})})},isActive:e=>ws(["/user_archive"],e),isAvailable:()=>!1}],Yb=Fs()((e=>({root:{alignItems:"center",display:"flex"},avatar:{height:64,marginRight:e.spacing(2),width:64},avatarWrapper:{height:"100%",minWidth:60},content:{width:"100%"}}))),Kb=Se.createLoader(24),Xb=({readonly:e,avatar:t,email:i,onChange:a})=>{const{classes:o}=Yb();return he(Te,{className:o.root,children:[he(Te,{className:o.avatarWrapper,children:he(Le,{payload:t,Loader:Kb,children:async e=>{const t=e?await bs.appwriteService.getImageURL(e):void 0;return he(it,{alt:i,src:t,className:o.avatar})}})}),he("div",{className:o.content,children:[he(qa,{container:!0,spacing:1,children:[he(qa,{item:!0,children:he(pt,{disabled:e,color:"primary",onClick:async()=>{const e=await ja("image/jpeg, image/png");if(e){const t=await bs.appwriteService.uploadFile(e);a(t)}},size:"small",type:"button",variant:"outlined",children:"Выбрать фото"})}),he(qa,{item:!0,children:he(Ht,{disabled:!t||e,onClick:()=>a(null),color:"primary",size:"small",type:"button",variant:"text",children:"Удалить"})}),he(qa,{item:!0,xs:!0})]}),he(Ne,{color:"textSecondary",variant:"caption",children:"Размер: 200x200, максимальный размер файла: 5Мб"})]})]})},Jb=[{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Box,sx:{display:"grid",gridTemplateColumns:"1fr auto"},fields:[{type:o.Component,element:({readonly:e,avatar:t,email:i,onChange:a})=>he(Xb,{avatar:t,email:i,readonly:e,onChange:e=>a({avatar:e})})},{type:o.Switch,fieldBottomMargin:"0",name:"active",title:"Активация"}]}]},{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Typography,typoVariant:"h6",placeholder:"Основные данные"},{type:o.Text,name:"last_name",title:"Фамилия",outlined:!1,isInvalid:({last_name:e})=>e?null:"Необходимо заполнить поле"},{type:o.Text,name:"first_name",title:"Имя",outlined:!1,isInvalid:({first_name:e})=>e?null:"Необходимо заполнить поле"},{type:o.Text,name:"middle_name",title:"Отчество",outlined:!1},{type:o.Group,fields:[{type:o.Group,columns:"6",fields:[{type:o.Component,element:()=>he(Ne,{children:"Пол"})},{type:o.Group,child:{type:o.Box,sx:{display:"grid",gridTemplateColumns:"auto auto 1fr"},fields:[{type:o.Radio,name:"pol",radioValue:"м",title:"Мужской"},{type:o.Radio,name:"pol",radioValue:"ж",title:"Женский"}]}},{type:o.Group,columns:"12",fields:[{type:o.Date,fieldRightMargin:"4",columns:"6",outlined:!1,name:"data_rozhdeniya",title:"Дата рождения"},{type:o.Date,fieldRightMargin:"4",columns:"6",outlined:!1,name:"data_trudoustrojstva",title:"Дата трудоустройства"},{type:o.Text,fieldRightMargin:"4",columns:"6",outlined:!1,readonly:!0,name:"email",title:"Email",placeholder:"Добавить рабочий email"},{type:o.Text,fieldRightMargin:"4",columns:"6",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"rabochij_telefon",title:"Рабочий телефон",placeholder:"Добавить номер"}]}]}]}]},{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Typography,typoVariant:"h6",placeholder:"Дополнительный телефон"},{type:o.Text,columns:"6",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"lichnyj_nomer",title:"Личный номер"}]},{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Typography,typoVariant:"h6",placeholder:"Статус"},{type:o.Combo,columns:"6",outlined:!1,name:"ofis",title:"Офис",itemList:[]},{type:o.Combo,isDisabled:(e,{permissions:t})=>!t.hasUsersAccessLevelsPermission,columns:"6",outlined:!1,isInvalid:({user_role:e})=>e?null:"Необходимо заполнить поле",itemList:async()=>{const e=await bs.dictService.getUserRoles();return Object.keys(e)},tr:async e=>{const t=await bs.dictService.getUserRoles();return h.get(t,e)||e},name:"user_role",title:"Роль"},{type:o.Combo,columns:"6",outlined:!1,name:"filial",title:"Филиал",itemList:[]},{type:o.Text,columns:"6",outlined:!1,name:"dolzhnost",title:"Должность"},{type:o.Combo,columns:"6",outlined:!1,name:"otdel",title:"Отдел",itemList:[]},{type:o.Combo,columns:"6",outlined:!1,name:"status_sotrudnika",title:"Статус сотрудника",itemList:["Новый","В штате","Вне штата","Не работает","Уволен"]},{type:o.Group,columns:"6",fieldRightMargin:"0",fieldBottomMargin:"0",child:{type:o.Div,style:{display:"grid",gridTemplateColumns:"auto auto 1fr"},fields:[{type:o.Checkbox,name:"nachalnik_otdela",title:"Начальник отдела"}]}}]}];window.user_fields=Jb;const Zb=[{type:He.Link,isVisible:()=>!!bs.routerService.previousPath,action:"list-action",label:he(De,{sx:{display:"block"}})},{type:He.Link,action:"list-action",label:"Сотрудники"},{type:He.Link,action:"list-action",label:"Редактирование общей информации сотрудника"},{type:He.Button,isDisabled:({hasChanged:e})=>!e,action:"save-action",label:"Сохранить"}],Qb=Fs()((e=>({root:{alignItems:"center",display:"flex"},avatar:{height:64,marginRight:e.spacing(2),width:64},avatarWrapper:{height:"100%",minWidth:60},content:{width:"100%"}}))),e_=Se.createLoader(24),t_=({readonly:e,avatar:t,email:i,onChange:a})=>{const{classes:o}=Qb();return he(Te,{className:o.root,children:[he(Te,{className:o.avatarWrapper,children:he(Le,{payload:t,Loader:e_,children:async e=>{const t=e?await bs.appwriteService.getImageURL(e):void 0;return he(it,{alt:i,src:t,className:o.avatar})}})}),he("div",{className:o.content,children:[he(qa,{container:!0,spacing:1,children:[he(qa,{item:!0,children:he(pt,{disabled:e,color:"primary",onClick:async()=>{const e=await ja("image/jpeg, image/png");if(e){const t=await bs.appwriteService.uploadFile(e);a(t)}},size:"small",type:"button",variant:"outlined",children:"Выбрать фото"})}),he(qa,{item:!0,children:he(Ht,{disabled:!t||e,onClick:()=>a(null),color:"primary",size:"small",type:"button",variant:"text",children:"Удалить"})}),he(qa,{item:!0,xs:!0})]}),he(Ne,{color:"textSecondary",variant:"caption",children:"Размер: 200x200, максимальный размер файла: 5Мб"})]})]})},i_=[{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Box,sx:{display:"grid",gridTemplateColumns:"1fr auto"},fields:[{type:o.Component,element:({readonly:e,avatar:t,email:i,onChange:a})=>he(t_,{avatar:t,email:i,readonly:e,onChange:e=>a({avatar:e})})},{type:o.Switch,fieldBottomMargin:"0",name:"active",title:"Активация"}]}]},{type:o.Paper,isVisible:e=>Ds(e,"first_name","last_name","middle_name"),fieldBottomMargin:"1",fields:[{type:o.Typography,typoVariant:"h6",placeholder:"Личная информация"},{type:o.Text,isVisible:e=>Ds(e,"last_name"),name:"last_name",title:"Фамилия",outlined:!1,isInvalid:({last_name:e})=>e?null:"Необходимо заполнить поле"},{type:o.Text,isVisible:e=>Ds(e,"first_name"),name:"first_name",title:"Имя",outlined:!1,isInvalid:({first_name:e})=>e?null:"Необходимо заполнить поле"},{type:o.Text,isVisible:e=>Ds(e,"middle_name"),name:"middle_name",title:"Отчество",outlined:!1},{type:o.Group,isVisible:e=>Ds(e,"pol","data_rozhdeniya","data_trudoustrojstva","email","rabochij_telefon"),fields:[{type:o.Group,isVisible:e=>Ds(e,"pol"),columns:"6",fields:[{type:o.Component,element:()=>he(Ne,{children:"Пол"})},{type:o.Group,child:{type:o.Box,sx:{display:"grid",gridTemplateColumns:"auto auto 1fr"},fields:[{type:o.Radio,isVisible:e=>Ds(e,"pol"),name:"pol",radioValue:"м",title:"Мужской"},{type:o.Radio,isVisible:e=>Ds(e,"pol"),name:"pol",radioValue:"ж",title:"Женский"}]}},{type:o.Group,columns:"12",fields:[{type:o.Text,isVisible:e=>Ds(e,"data_rozhdeniya"),fieldRightMargin:"4",columns:"6",outlined:!1,name:"data_rozhdeniya",title:"Дата рождения"},{type:o.Text,isVisible:e=>Ds(e,"data_trudoustrojstva"),fieldRightMargin:"4",columns:"6",outlined:!1,name:"data_trudoustrojstva",title:"Дата трудоустройства"},{type:o.Text,features:["hasUsersViewPhoneAndEmailPermission"],isVisible:e=>Ds(e,"email"),fieldRightMargin:"4",columns:"6",outlined:!1,name:"email",title:"Email",placeholder:"Добавить рабочий email"},{type:o.Text,features:["hasUsersViewPhoneAndEmailPermission"],isVisible:e=>Ds(e,"rabochij_telefon"),fieldRightMargin:"4",columns:"6",outlined:!1,name:"rabochij_telefon",title:"Рабочий телефон",placeholder:"Добавить номер"}]}]}]}]},{type:o.Paper,features:["hasUsersViewPhoneAndEmailPermission"],isVisible:e=>Ds(e,"lichnyj_nomer"),fieldBottomMargin:"1",fields:[{type:o.Typography,typoVariant:"h6",placeholder:"Дополнительный телефон"},{type:o.Text,isVisible:e=>Ds(e,"lichnyj_nomer"),columns:"6",outlined:!1,name:"lichnyj_nomer",title:"Личный номер"}]},{type:o.Paper,isVisible:e=>Ds(e,"ofis","user_role","filial","dolzhnost","otdel","status_sotrudnika","nachalnik_otdela"),fieldBottomMargin:"1",fields:[{type:o.Typography,typoVariant:"h6",placeholder:"Статус"},{type:o.Text,isVisible:e=>Ds(e,"ofis"),columns:"6",outlined:!1,name:"ofis",title:"Офис"},{type:o.Combo,isVisible:e=>Ds(e,"user_role"),columns:"6",outlined:!1,isInvalid:({user_role:e})=>e?null:"Необходимо заполнить поле",itemList:async()=>{const e=await bs.dictService.getUserRoles();return Object.keys(e)},tr:async e=>{const t=await bs.dictService.getUserRoles();return h.get(t,e)||e},name:"user_role",title:"Роль"},{type:o.Text,isVisible:e=>Ds(e,"filial"),columns:"6",outlined:!1,name:"filial",title:"Филиал"},{type:o.Text,isVisible:e=>Ds(e,"dolzhnost"),columns:"6",outlined:!1,name:"dolzhnost",title:"Должность"},{type:o.Text,isVisible:e=>Ds(e,"otdel"),columns:"6",outlined:!1,name:"otdel",title:"Отдел"},{type:o.Text,isVisible:e=>Ds(e,"status_sotrudnika"),columns:"6",outlined:!1,name:"status_sotrudnika",title:"Статус сотрудника"},{type:o.Component,element:({nachalnik_otdela:e})=>he("div",{children:he(Te,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",gap:1},children:e&&he(Ut,{label:"Начальник отдела"})})})}]}],a_=[{type:He.Link,action:"list-action",label:"Сотрудники"},{type:He.Link,action:"list-action",label:"Общая информация сотрудника"},{type:He.Button,isDisabled:({payload:{permissions:e}})=>!e.hasUsersUpdatePermission,action:"edit-action",label:"Редактировать"}],o_=[{id:"list",element:({payload:e})=>he(Ji,{history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),routes:Gb,payload:e}),isActive:e=>ws(["/user","/user_common","/user_archive"],e),isAvailable:()=>!1},{id:"user",element:qh((()=>{const e=vs("id");bs.routerService.push("/user_edit/".concat(e,"/user"))})),isActive:e=>ws(["/user_edit/:id"],e)},{id:"user",element:({payload:e,onChange:t,formState:i,data:a,beginSave:o})=>he(_e,{children:[he(Xe,{onAction:e=>{"list-action"===e&&bs.routerService.back("/user"),"save-action"===e&&o()},items:Zb,payload:i}),he(gs,{}),he(wb,{payload:e,mode:e.menuMode,children:he(Je,{dirty:!0,handler:()=>a,fields:Jb,payload:e,features:e.permissions,onChange:t})}),he(Qe,{})]}),isActive:e=>ws(["/user_edit/:id/user"],e)},{id:"files",element:({formState:e,onChange:t,beginSave:i,data:a,payload:o})=>{const{handleLoadStart:l,handleLoadEnd:n}=$e({history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)});return he(_e,{children:[he(Xe,{items:Ib,onAction:e=>{"list-action"===e&&bs.routerService.back("/user"),"save-action"===e&&i()},payload:e}),he(gs,{}),he(wb,{payload:o,mode:o.menuMode,children:[he(ai,{sx:{p:1},children:he(Ii,{accept:"*",multiple:!0,items:a,tr:async e=>await bs.appwriteService.tryReadFileName(e)||e,fallback:bs.errorService.handleGlobalError,onClick:async e=>{const t=await bs.appwriteService.getFileURL(e),i=await bs.appwriteService.readFileName(e);yt(t,i)},onUpload:e=>bs.appwriteService.uploadFile(e),onChange:async e=>{t(e)},onLoadStart:l,onLoadEnd:n})}),he(Qe,{})]})]})},isActive:e=>ws(["/user_edit/:id/files"],e)},{id:"additional_info",element:({payload:e,onChange:t,formState:i,data:a,beginSave:o})=>he(_e,{children:[he(Xe,{onAction:e=>{"user-list-action"===e&&bs.routerService.back("/user"),"user-save-action"===e&&o()},items:zb,payload:i}),he(gs,{}),he(wb,{payload:e,mode:e.menuMode,children:he(Je,{dirty:!0,handler:()=>a,fields:Sb,features:e.permissions,onChange:t})}),he(Qe,{})]}),isActive:e=>ws(["/user_edit/:id/additional_info"],e)},{id:"features",element:({beginSave:e,data:t,formState:i,payload:a,onChange:o})=>he(_e,{children:[he(Xe,{items:Fb,onAction:t=>{"user-list-action"===t&&bs.routerService.back("/user"),"user-save-action"===t&&e()},payload:i}),he(gs,{}),he(wb,{payload:a,mode:a.menuMode,children:[he(Ra,{expandAll:!0,handler:()=>t.reduce(((e,t)=>({...e,[t]:!0})),{}),features:cb,change:(e,t)=>{if(e&&!t){const t=Object.entries(e).filter((([e,t])=>!!t)).map((([e])=>e));o(t)}}}),he(Qe,{})]})]}),isActive:e=>ws(["/user_edit/:id/features"],e)},{id:"user",element:qh((()=>{const e=vs("id");bs.routerService.push("/user_view/".concat(e,"/user"))})),isActive:e=>ws(["/user_view/:id"],e)},{id:"user",element:({params:{id:e},payload:t,onChange:i,formState:a,data:o})=>{const l=Ke(o),{pickData:n,render:r}=Ge({AfterTitle:({onClose:e})=>he(Be,{size:"small",onClick:e,children:he(Ye,{})}),fields:Jb,payload:t,features:t.permissions,outlinePaper:!0,handler:async()=>await bs.userViewService.tryRead(e),fullScreen:!0,title:"Редактировать",onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),onSubmit:async t=>{let i=!0;try{t&&await bs.userViewService.update(e,t)}catch(a){i=!1;const e=jr(a);return bs.alertService.notify(e),!1}finally{return i}},submitLabel:"Сохранить"});return he(_e,{children:[he(Xe,{onAction:e=>{"list-action"===e&&bs.routerService.push("/user"),"edit-action"===e&&n()},items:a_,payload:a}),he(gs,{}),he(Ab,{payload:t,mode:t.menuMode,children:he(Je,{dirty:!0,readonly:!0,handler:()=>o,fields:i_,features:t.permissions,onChange:i,payload:t,changeSubject:l})}),he(Qe,{}),r()]})},isActive:e=>ws(["/user_view/:id/user"],e)},{id:"additional_info",element:({params:{id:e},payload:t,onChange:i,formState:a,data:o})=>{const l=Ke(o),{pickData:n,render:r}=Ge({AfterTitle:({onClose:e})=>he(Be,{size:"small",onClick:e,children:he(Ye,{})}),fields:Sb,payload:t,features:t.permissions,outlinePaper:!0,handler:async()=>await bs.userViewService.tryRead(e),fullScreen:!0,title:"Редактировать",onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),onSubmit:async t=>{let i=!0;try{if(t){if(t.user_role){const e=new Set(t.user_features||[]);await Promise.all(t.user_role.map((async t=>{const i=await bs.roleViewService.tryRead(t);if(!i)return;const{role_features:a}=i;a&&a.forEach((t=>e.add(t)))}))),t.user_features=[...e]}await bs.userViewService.update(e,t)}}catch(a){i=!1;const e=jr(a);return bs.alertService.notify(e),!1}finally{return i}},submitLabel:"Сохранить"});return he(_e,{children:[he(Xe,{onAction:e=>{"list-action"===e&&bs.routerService.push("/back"),"edit-action"===e&&n()},items:Cb,payload:a}),he(gs,{}),he(Ab,{payload:t,mode:t.menuMode,children:he(Je,{dirty:!0,readonly:!0,handler:()=>o,fields:Tb,features:t.permissions,onChange:i,payload:t,changeSubject:l})}),he(Qe,{}),r()]})},isActive:e=>W(ws(["/user_view/:id/additional_info"],e))},{id:"files",element:({params:{id:e},formState:t,onChange:i,data:a,payload:o})=>{const{render:l,pickFiles:n}=mp({data:a,onSubmit:async t=>{await bs.userViewService.update(e,{user_files:t})}});return he(_e,{children:[he(Xe,{items:Mb,onAction:e=>{"list-action"===e&&bs.routerService.push("/user"),"edit-action"===e&&n()},payload:t}),he(gs,{}),he(Ab,{payload:o,mode:o.menuMode,children:[he(ai,{sx:{p:1},children:he(Ii,{accept:"*",multiple:!0,disabled:!0,items:a,tr:async e=>await bs.appwriteService.tryReadFileName(e)||e,fallback:bs.errorService.handleGlobalError,onClick:async e=>{const t=await bs.appwriteService.getFileURL(e),i=await bs.appwriteService.readFileName(e);yt(t,i)},onUpload:e=>bs.appwriteService.uploadFile(e),onChange:async e=>{i(e)}})}),he(Qe,{})]}),l()]})},isActive:e=>ws(["/user_view/:id/files"],e)},{id:"features",element:({params:{id:e},data:t,formState:i,payload:a})=>{const o=Ke(t),l=Ve();ue.useEffect((()=>o.subscribe((e=>{var t;const i=e.reduce(((e,t)=>({...e,[t]:!0})),{});cb.forEach((({children:e})=>e.forEach((({name:e})=>{i[e]||(i[e]=!1)})))),null==(t=a.features)||t.forEach((e=>{i[e]=!0})),l.next(i)}))),[]);const{render:n,pickData:r}=((e,{data:t,onSubmit:i,onChange:a,fullScreen:o,expandAll:l})=>{const{handleLoadStart:n,handleLoadEnd:r}=$e({history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1)});return Da({expandAll:l,features:e,handler:()=>t.reduce(((e,t)=>({...e,[t]:!0})),{}),fullScreen:o,fallback:bs.errorService.handleGlobalError,onLoadStart:n,onLoadEnd:r,onSubmit:async e=>{if(e){const t=Object.entries(e).filter((([e,t])=>!!t)).map((([e])=>e));await(i&&i(t))}return!0},onChange:(e,t)=>{if(e&&!t){const t=Object.entries(e).filter((([e,t])=>!!t)).map((([e])=>e));a&&a(t)}},submitLabel:"Сохранить"})})(cb,{expandAll:!0,data:t,fullScreen:!0,onSubmit:async t=>{await bs.userViewService.update(e,{user_features:t})}});return he(_e,{children:[he(Xe,{items:Lb,onAction:e=>{"list-action"===e&&bs.routerService.push("/user"),"edit-action"===e&&r()},payload:i}),he(gs,{}),he(Ab,{payload:a,mode:a.menuMode,children:[he(Le,{payload:e,children:async e=>{const{user_role:t}=await bs.userViewService.read(e);if(!(null==t?void 0:t.length))return null;const i=await bs.roleViewService.tryRead(t[0]);if(!i)return;const{title:a}=i;return he(ai,{sx:{width:"100%",p:1,pt:2,pb:2,mb:1},children:he(Ne,{variant:"subtitle2",children:["Список бизнес-функций расширен ролью сотрудника"," ",he(gi,{href:"#",onClick:()=>Z("/settings/roles"),children:a})]})})}}),he(Ra,{readonly:!0,expandAll:!0,handler:()=>a.features.reduce(((e,t)=>({...e,[t]:!0})),{}),changeSubject:l,features:cb}),he(Qe,{})]}),n()]})},isActive:e=>ws(["/user_view/:id/features"],e)}],l_=({id:e=""})=>{const t=async t=>{let i=!0;try{const i=h.get(t,"user")||{},a=h.get(t,"features")||[],o=h.get(t,"files")||[];h.set(i,"user_files",o),h.set(i,"user_features",a),await bs.userViewService.update(e,i),bs.alertService.notify("Изменения сохранены")}catch(a){i=!1;const e=jr(a);bs.alertService.notify(e)}finally{return i}},i=Ve();return ue.useEffect((()=>bs.userViewService.updateSubject.subscribe((([e,t])=>{const a=vs("id");a&&a===e&&(i.next(["user",t]),i.next(["files",(null==t?void 0:t.user_files)||[]]),i.next(["features",(null==t?void 0:t.user_features)||[]]),i.next(["additional_info",t]))}))),[]),he(ra,{state:async()=>[await bs.userViewService.tryRead(e),await bs.settingsViewService.getMasterDetailMode(),await bs.permissionService.getPermissions(),await bs.featureService.getFeaturesByUserId(e),await bs.featureService.getAccessLevel()],reloadSubject:bs.layoutService.reloadOutletSubject,fallback:bs.errorService.handleGlobalError,children:async([a,o,l,n,r])=>he(Ji,{changeSubject:i,history:bs.routerService,waitForChangesDelay:tl,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),routes:o_,params:{id:e},initialData:{user:a,files:(null==a?void 0:a.user_files)||[],features:(null==a?void 0:a.user_features)||[],additional_info:a},payload:()=>({menuMode:o,permissions:l,features:n,accessLevel:r}),onChange:(e,t,a,o)=>{var l,n;t||"user"===o&&(i.next(["files",(null==(l=e.user)?void 0:l.user_files)||[]]),i.next(["features",(null==(n=e.user)?void 0:n.user_features)||[]]))},onSubmit:t})})},n_=[{path:"/error_page",element:()=>{const{classes:e}=Zy();return he(Ia,{children:he(Te,{className:e.root,children:he(La,{className:e.reveal,children:he(ai,{className:e.container,children:he(Pe,{direction:"column",gap:"15px",children:[he(Jy,{}),he("span",{children:navigator.onLine?"Во время работы приложения произошла ошибка. Информация об ошибке передана в отдел разработки":"Нет подключения к интернету. Пожалуйста, попробуйте позже"}),he(Ht,{variant:"contained",onClick:L,children:"Перезагрузить страницу"})]})})})})})}},{path:"/login_page",element:()=>he(Te,{sx:{position:"fixed",top:0,left:0,height:"100vh",width:"100vw",background:"whitesmoke",display:"flex",alignItems:"center",justifyContent:"center",zIndex:99999},children:he(ai,{component:"form",sx:{p:2,marginTop:"-5vh",maxWidth:"325px",minWidth:"325px"},onSubmit:e=>(e.preventDefault(),!1),children:[he(Ne,{variant:"h3",sx:{color:e=>e.palette.primary.main,mb:3,textAlign:"center",fontWeight:"bold"},children:"RealEstate"}),he(Te,{sx:{display:"flex",flexDirection:"column",gap:"15px"},children:[he(Wt,{required:!0,name:"email",fullWidth:!0,label:"Email",placeholder:"Email",helperText:"Email",type:"email"}),he(Wt,{required:!0,fullWidth:!0,name:"password",label:"Пароль",placeholder:"Пароль",helperText:"Пароль",type:"password"})]}),he(Te,{sx:{display:"flex",flexDirection:"row-reverse",mb:2},children:he(gi,{href:"#",onClick:()=>bs.routerService.push("/register_page"),children:"Регистрация"})}),he(pt,{onClick:async({currentTarget:e})=>{await(async e=>{const t=new FormData(e),i=t.get("email"),a=t.get("password");if(!i)return void bs.alertService.notify("Введите email");if(!a)return void bs.alertService.notify("Введите пароль");await bs.authService.login({email:i.toString(),password:a.toString()})&&bs.routerService.push("/profile")})(e.closest("form"))},variant:"contained",type:"submit",fullWidth:!0,children:"Войти"})]})})},{path:"/register_page",element:()=>he(Te,{sx:{position:"fixed",top:0,left:0,height:"100vh",width:"100vw",background:"whitesmoke",display:"flex",alignItems:"center",justifyContent:"center",zIndex:99999},children:he(ai,{component:"form",sx:{p:2,marginTop:"-5vh",maxWidth:"325px",minWidth:"325px"},onSubmit:e=>(e.preventDefault(),!1),children:[he(Ne,{variant:"h3",sx:{color:e=>e.palette.primary.main,mb:3,textAlign:"center",fontWeight:"bold"},children:"RealEstate"}),he(Te,{sx:{display:"flex",flexDirection:"column",gap:"15px"},children:[he(Wt,{required:!0,name:"email",fullWidth:!0,label:"Email",placeholder:"Email",helperText:"Email",type:"email"}),he(Wt,{required:!0,fullWidth:!0,name:"password",label:"Пароль",placeholder:"Пароль",helperText:"Пароль",type:"password"}),he(Wt,{required:!0,fullWidth:!0,name:"confirm",label:"Повторите пароль",placeholder:"Повторите пароль",helperText:"Повторите пароль",type:"password"})]}),he(Te,{sx:{display:"flex",flexDirection:"row-reverse",mb:2},children:he(gi,{href:"#",onClick:()=>bs.routerService.push("/login_page"),children:"Вход"})}),he(pt,{onClick:async({currentTarget:e})=>{await(async e=>{const t=new FormData(e),i=t.get("email"),a=t.get("password"),o=t.get("confirm");if(!i)return void bs.alertService.notify("Введите email");if(!a)return void bs.alertService.notify("Введите пароль");if(a!==o)return void bs.alertService.notify("Пароли не совпадают");await bs.authService.register({email:i.toString(),password:a.toString()})&&bs.routerService.push("/profile")})(e.closest("form"))},variant:"contained",type:"submit",fullWidth:!0,children:"Регистрация"})]})})},{path:"/inactive_page",element:()=>{const{classes:e}=Qy();return he(Ia,{children:he(Te,{className:e.root,children:he(La,{className:e.reveal,children:he(ai,{className:e.container,children:he(Pe,{direction:"column",gap:"15px",children:[he(Jy,{}),he("span",{children:"Ожидание активации профиля. Попросите Администратора активировать ваш аккаунт"}),he(Ht,{variant:"contained",onClick:L,children:"Перезагрузить страницу"})]})})})})})}}],r_=[{path:"/dashboard",sideMenu:"root.global.dashboard",element:()=>he(Jh,{initialState:"all",children:he(yy,{initialState:"last-month",children:he(ra,{state:async()=>[await bs.settingsViewService.getMasterDetailMode(),await bs.permissionService.getPermissions(),await bs.featureService.getAccessLevel()],reloadSubject:bs.layoutService.reloadOutletSubject,fallback:bs.errorService.handleGlobalError,children:async([e,t,i])=>he(Ji,{history:bs.routerService,routes:qy,payload:()=>({menuMode:e,permissions:t,accessLevel:i})})})})})},{path:"/apartment",sideMenu:"root.global.apartment",element:xu},{path:"/apartment_rent",sideMenu:"root.global.apartment.rent",element:xu},{path:"/apartment_sell",sideMenu:"root.global.apartment.sell",element:xu},{path:"/apartment_archive",sideMenu:"root.global.apartment.archive.archive",element:xu},{path:"/apartment_remove",sideMenu:"root.global.apartment.archive.remove",element:xu},{path:"/apartment",sideMenu:"root.global.apartment",element:xu},{path:"/apartment/create",sideMenu:"root.global.apartment",element:xu},{path:"/apartment_edit/:id",sideMenu:"root.global.apartment",element:xu},{path:"/apartment_edit/:id/object",sideMenu:"root.global.apartment",element:xu},{path:"/apartment_edit/:id/owner_contact",sideMenu:"root.global.apartment",element:xu},{path:"/apartment_edit/:id/documents",sideMenu:"root.global.apartment",element:xu},{path:"/apartment_view/:id",sideMenu:"root.global.apartment",element:xu},{path:"/apartment_view/:id/object",sideMenu:"root.global.apartment",element:xu},{path:"/apartment_view/:id/owner_contact",sideMenu:"root.global.apartment",element:xu},{path:"/apartment_view/:id/documents",sideMenu:"root.global.apartment",element:xu},{path:"/apartment_view/:id/history",sideMenu:"root.global.apartment",element:xu},{path:"/apartment_view/:id/tasks",sideMenu:"root.global.apartment",element:xu},{path:"/apartment_view/:id/advertising",sideMenu:"root.global.apartment",element:xu},{path:"/apartment_view/:id/service_comment",sideMenu:"root.global.apartment",element:xu},{path:"/bid",sideMenu:"root.global.bid",element:_h},{path:"/bid_rent",sideMenu:"root.global.bid.rent",element:_h},{path:"/bid_sell",sideMenu:"root.global.bid.sell",element:_h},{path:"/bid_archive",sideMenu:"root.global.bid.archive",element:_h},{path:"/bid/create",sideMenu:"root.global.bid",element:_h},{path:"/bid_edit/create",sideMenu:"root.global.bid",element:_h},{path:"/bid_edit/create/parameter",sideMenu:"root.global.bid",element:_h},{path:"/bid_edit/create/documents",sideMenu:"root.global.bid",element:_h},{path:"/bid_edit/create/contact",sideMenu:"root.global.bid",element:_h},{path:"/bid_edit/:id",sideMenu:"root.global.bid",element:_h},{path:"/bid_edit/:id/parameter",sideMenu:"root.global.bid",element:_h},{path:"/bid_edit/:id/documents",sideMenu:"root.global.bid",element:_h},{path:"/bid_edit/:id/contact",sideMenu:"root.global.bid",element:_h},{path:"/bid_view/:id",sideMenu:"root.global.bid",element:_h},{path:"/bid_view/:id/parameter",sideMenu:"root.global.bid",element:_h},{path:"/bid_view/:id/history",sideMenu:"root.global.bid",element:_h},{path:"/bid_view/:id/documents",sideMenu:"root.global.bid",element:_h},{path:"/bid_view/:id/contact",sideMenu:"root.global.bid",element:_h},{path:"/bid_view/:id/tasks",sideMenu:"root.global.bid",element:_h},{path:"/bid_view/:id/service_comment",sideMenu:"root.global.bid",element:_h},{path:"/deal",sideMenu:"root.global.deal",element:()=>he(ra,{state:async()=>[await Xy(),await bs.settingsViewService.getMasterDetailMode(),await bs.permissionService.getPermissions(),await bs.featureService.getAccessLevel()],fallback:bs.errorService.handleGlobalError,children:async([e,t,i,a])=>he(Ji,{history:bs.routerService,onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),routes:Ky,params:{dealCardMap:e},payload:()=>({menuMode:t,permissions:i,accessLevel:a})})})},{path:"/task",sideMenu:"root.global.task",element:fb},{path:"/task_mine",sideMenu:"root.global.task",element:fb},{path:"/contact",sideMenu:"root.global.contact",element:Gh},{path:"/contact/create",sideMenu:"root.global.contact",element:Gh},{path:"/contact_edit/create",sideMenu:"root.global.contact",element:Gh},{path:"/contact_edit/:id",sideMenu:"root.global.contact",element:Gh},{path:"/contact_view/:id",sideMenu:"root.global.contact",element:Gh},{path:"/contact_view/:id/contact",sideMenu:"root.global.contact",element:Gh},{path:"/contact_view/:id/objects",sideMenu:"root.global.contact",element:Gh},{path:"/contact_view/:id/bids",sideMenu:"root.global.contact",element:Gh},{path:"/contact_view/:id/tasks",sideMenu:"root.global.contact",element:Gh},{path:"/contact_view/:id/service_comment",sideMenu:"root.global.contact",element:Gh},{path:"/contact_view/:id/history",sideMenu:"root.global.contact",element:Gh},{path:"/user",sideMenu:"root.global.user",element:l_},{path:"/user_common",sideMenu:"root.global.user.common",element:l_},{path:"/user_archive",sideMenu:"root.global.user.archive",element:l_},{path:"/user_view/:id",sideMenu:"root.global.user",element:l_},{path:"/user_view/:id/user",sideMenu:"root.global.user",element:l_},{path:"/user_view/:id/files",sideMenu:"root.global.user",element:l_},{path:"/user_view/:id/features",sideMenu:"root.global.user",element:l_},{path:"/user_view/:id/additional_info",sideMenu:"root.global.user",element:l_},{path:"/user_edit/:id",sideMenu:"root.global.user",element:l_},{path:"/user_edit/:id/user",sideMenu:"root.global.user",element:l_},{path:"/user_edit/:id/files",sideMenu:"root.global.user",element:l_},{path:"/user_edit/:id/features",sideMenu:"root.global.user",element:l_},{path:"/user_edit/:id/additional_info",sideMenu:"root.global.user",element:l_},{path:"/settings",sideMenu:"root.global.settings",element:_b},{path:"/settings/common",sideMenu:"root.global.settings",element:_b},{path:"/settings/roles",sideMenu:"root.global.settings",element:_b},{path:"/settings/integration",sideMenu:"root.global.settings",element:_b},{path:"/settings/field_visibility",sideMenu:"root.global.settings",element:_b}],s_=[{path:"/",sideMenu:"root.global.user",element:qh((()=>{bs.routerService.push("/dashboard")}))},...r_,...n_],d_=e=>{fs(),console.log({path:e}),"root.global.settings.common"===e&&bs.routerService.push("/settings/common"),"root.global.settings.roles"===e&&bs.routerService.push("/settings/roles"),"root.global.settings.integration"===e&&bs.routerService.push("/settings/integration"),"root.global.settings.field_visibility"===e&&bs.routerService.push("/settings/field_visibility")},c_=e=>{"root.global.dashboard"===e&&bs.routerService.push("/dashboard"),"root.global.user"===e&&bs.routerService.push("/user"),"root.global.user.common"===e&&bs.routerService.push("/user_common"),"root.global.user.archive"===e&&bs.routerService.push("/user_archive"),"root.global.apartment"===e&&bs.routerService.push("/apartment"),"root.global.apartment.rent"===e&&bs.routerService.push("/apartment_rent"),"root.global.apartment.sell"===e&&bs.routerService.push("/apartment_sell"),"root.global.apartment.archive"===e&&bs.routerService.push("/apartment_archive"),"root.global.apartment.archive.archive"===e&&bs.routerService.push("/apartment_archive"),"root.global.apartment.archive.remove"===e&&bs.routerService.push("/apartment_remove"),"root.global.bid"===e&&bs.routerService.push("/bid"),"root.global.bid.rent"===e&&bs.routerService.push("/bid_rent"),"root.global.bid.sell"===e&&bs.routerService.push("/bid_sell"),"root.global.bid.archive"===e&&bs.routerService.push("/bid_archive"),"root.global.deal"===e&&bs.routerService.push("/deal"),"root.global.deal.all"===e&&bs.routerService.push("/deal_all"),"root.global.deal.mine"===e&&bs.routerService.push("/deal_mine"),"root.global.task"===e&&bs.routerService.push("/task"),"root.global.task.all"===e&&bs.routerService.push("/task_all"),"root.global.task.mine"===e&&bs.routerService.push("/task_mine"),"root.global.contact"===e&&bs.routerService.push("/contact"),"root.global.settings"===e&&bs.routerService.push("/settings")},m_=(()=>{let e=null,t=null;return()=>{const{pathname:i}=bs.routerService.location;return e!==i&&(t=ve(s_,bs.routerService.location.pathname),e=i),t}})(),p_={"Refresh manually":"Обновить","Create new row":"Создать новую строку","Change sort order":"Изменить порядок сортировки","Drop filters":"Сбросить фильтры",Filters:"Фильтры",Search:"Поиск","Loading data":"Загрузка данных","Nothing found":"","Not found":"Нет данных","No options":"Нет данных","Drag and drop a file here or click":"Выберите файл",Choose:"Выбрать",Deselect:"Убрать",Green:"Зеленый",Skyblue:"Синий",Yellow:"Желтый",Red:"Красный",Submit:"Применить",Date:"Дата",Time:"Время",Loading:"Загрузка",Required:"Заполнить","The form contains unsaved changes. Continue?":"Форма содержит несохраненные изменения. Продолжить?","The form contains invalid data. Continue?":"Форма содержит неправильно указанные данные. Продолжить?","Are you sure you want to delete this file?":"Вы уверены, что хотите удалить файл?",Confirmation:"Подтверждение",Forbidden:"Нет доступа",Ok:"Ок",Cancel:"Отмена",Remove:"Удалить",Actions:"Действие",Save:"Сохранить","Not chosen":"Не указано","Continue?":"Продолжить",Unset:"Нет данных","Select all":"Выбрать","No tips":"Нет данных","Column configuration":"Отображение колонок","Loading...":"Загрузка","Pick item":"Выберите"};const u_={"/login_page":{"Sign in":"Войти"},"/register_page":{"Sign in":"Регистрация"}},h_=(()=>{let e=null,t={};return()=>{const{pathname:i}=bs.routerService.location;if(e!==i){const a=m_();t=u_[(null==a?void 0:a.path)||"unknown"]||{},e=i}return t}})();function y_(e){return h_()[e]||function(e){return p_[e]||e}(e)}const b_=[()=>{document.querySelectorAll("input").forEach((e=>{e.placeholder&&(e.placeholder=y_(e.placeholder))}))},()=>{document.querySelectorAll("textarea").forEach((e=>{e.placeholder&&(e.placeholder=y_(e.placeholder))}))}];document.addEventListener("DOMContentLoaded",(()=>{const e=h.throttle(Pa(b_.map((e=>()=>{e()}))),1,{trailing:!0});new MutationObserver(e).observe(document.body,{childList:!0,subtree:!0})})),Ea.install(p_,y_),bs.routerService.listen((({action:e})=>{"PUSH"===e&&window.Translate.clear()})),window.self!==window.top&&yt.override(((e,t)=>{var i;null==(i=window.top)||i.postMessage({type:"download-action",url:e,filename:t},"*")})),window.self!==window.top?Z.override((e=>{e.startsWith("/")?bs.routerService.push(e):window.open(e)})):Z.override((e=>{e.startsWith("/")?bs.routerService.push(e):window.location.href=e})),window.self!==window.top&&ui.override((e=>{var t;null==(t=window.top)||t.postMessage({type:"copy-action",text:e},"*")})),window.self!==window.top&&L.override((()=>{var e;null==(e=window.top)||e.postMessage({type:"reload-action"},"*")})),window.self!==window.top&&(null==(e=window.top)||e.postMessage({type:"init-action"},"*")),window.getOlxToken=()=>{var e;return null==(e=window.top)||e.postMessage({type:"get-olx-token"},"*"),Y.create((e=>(window.addEventListener("message",e),()=>window.removeEventListener("message",e)))).filter((({data:e})=>"type"in e)).filter((({data:e})=>"get-olx-token"===e.type)).map((({data:e})=>e.result)).toPromise()};const __=1e3;window.migration={updateSystemArea:async()=>{for await(const e of kn(sl)){const t=await bs.metadataService.getAreaMetadataByApartment(e.$id);console.log("PATCHING APARTMENT ".concat(e.$id),{metadata:t}),await bs.appwriteService.databases.updateDocument(al.databaseId,sl,e.$id,t),await M(__)}for await(const e of kn(pl)){const t=await bs.metadataService.getAreaMetadataByBid(e.$id);console.log("PATCHING BID ".concat(e.$id),{metadata:t}),await bs.appwriteService.databases.updateDocument(al.databaseId,pl,e.$id,t),await M(__)}console.log("DONE")},updateSystemPrice:async()=>{for await(const e of kn(sl)){const t=Bl(e),i=await bs.exchangeService.getApartmentPriceMetadata(t);console.log("PATCHING APARTMENT ".concat(t.$id),{metadata:i}),await bs.appwriteService.databases.updateDocument(al.databaseId,sl,t.$id,i),await M(__)}for await(const e of kn(pl)){const t=Zl(e),i=await bs.exchangeService.getBidPriceMetadata(t);console.log("PATCHING BID ".concat(t.$id),{metadata:i}),await bs.appwriteService.databases.updateDocument(al.databaseId,pl,t.$id,i),await M(__)}console.log("DONE")},updateSystemCreatedBy:async(e=!1)=>{for await(const t of kn(sl)){if(t.system_created_by&&!e)continue;const i={system_created_by:bs.appwriteService.currentUser.$id};console.log("PATCHING APARTMENT ".concat(t.$id),{metadata:i}),await bs.appwriteService.databases.updateDocument(al.databaseId,sl,t.$id,i),await M(__)}for await(const t of kn(pl)){if(t.system_created_by&&!e)continue;const i={system_created_by:bs.appwriteService.currentUser.$id};console.log("PATCHING BID ".concat(t.$id),{metadata:i}),await bs.appwriteService.databases.updateDocument(al.databaseId,pl,t.$id,i),await M(__)}for await(const t of kn(dl)){if(t.system_created_by&&!e)continue;const i={system_created_by:bs.appwriteService.currentUser.$id};console.log("PATCHING CONTACT ".concat(t.$id),{metadata:i}),await bs.appwriteService.databases.updateDocument(al.databaseId,dl,t.$id,i),await M(__)}console.log("DONE")},updateUserArchive:async()=>{for await(const e of kn(ll))"boolean"!=typeof e.system_is_remove&&(console.log("PATCHING USER ".concat(e.$id)),await bs.appwriteService.databases.updateDocument(al.databaseId,ll,e.$id,{active:!0,system_is_remove:!1}),await M(__));console.log("DONE")},readOrientirList:async()=>{const e=new Set;for await(const t of kn(sl))e.add(t.orientir);console.log([...e].filter((e=>e)))}},Na.register({family:"Roboto",src:"https://cdnjs.cloudflare.com/ajax/libs/ink/3.1.10/fonts/Roboto/roboto-regular-webfont.ttf",fontWeight:"normal"}),Na.register({family:"Roboto",src:"https://cdnjs.cloudflare.com/ajax/libs/ink/3.1.10/fonts/Roboto/roboto-bold-webfont.ttf",fontWeight:"bold"});{let e=0;const t=URL.createObjectURL,i=URL.revokeObjectURL;window.createObjectURL=(...i)=>(e++,t(...i)),window.revokeObjectURL=(...t)=>(e--,i(...t)),window.countObjectURL=()=>{console.log("URL.createObjectURL refcount=".concat(e))}}const v_=Oa((({children:e})=>{const{current:t}=bs.alertService;return he(_e,{children:[!!t&&he(Ua,{open:!0,anchorOrigin:{vertical:"bottom",horizontal:"center"},autoHideDuration:5e3,onClose:bs.alertService.hideCurrent,sx:{zIndex:9999999},message:t.message},t.key),e]})})),f_=()=>{const[e,t]=ue.useState(bs.appwriteService.isAuthorized);ue.useEffect((()=>me((()=>bs.appwriteService.isAuthorized),(()=>t(bs.appwriteService.isAuthorized)))),[]);const i=()=>he(Pe,{direction:"row",alignItems:"center",children:[he(Ha,{sx:{fontSize:18,color:bs.previewModeService.previewMode?"#c2c2c2":"#757575"}}),he(Wa,{checked:bs.previewModeService.previewMode,onClick:bs.previewModeService.togglePreviewMode,size:"small"}),he($a,{sx:{fontSize:18,color:bs.previewModeService.previewMode?"#757575":"#c2c2c2"}})]});return he(Pe,{width:"100%",minHeight:"48px",direction:"row",alignItems:"center",justifyContent:"space-between",children:he(Le,{deps:[e],children:async()=>{if(!bs.appwriteService.isAuthorized)return;const{logo_file_id:e}=await bs.settingsViewService.getValue();if(e){const t=await bs.appwriteService.getImageURL(e);return he(Pe,{direction:"column",alignItems:"center",width:"100%",spacing:2,marginY:2,children:[he(Te,{component:"img",sx:{height:128,width:128,objectFit:"contain",pointerEvents:"none"},src:t}),i()]})}return he(_e,{children:[he(Ne,{sx:{height:42,display:"flex",alignItems:"center",color:"#666",fontWeight:"bold",fontSize:14},variant:"caption",children:"Real Estate APP"}),i()]})}})})},g_=({loading:e})=>{const[t,i]=ue.useState(0),{execute:a}=be((async()=>{const e=bs.appwriteService.currentUser.$id,{length:t}=await bs.notifyViewService.findAllUnreadByUserId(e);i(t)}),{onLoadStart:()=>bs.layoutService.setAppbarLoader(!0),onLoadEnd:()=>bs.layoutService.setAppbarLoader(!1),fallback:bs.errorService.handleGlobalError});return ue.useEffect((()=>me((()=>bs.appwriteService.isAuthorized),(()=>{bs.appwriteService.isAuthorized&&a()}))),[]),ue.useEffect((()=>bs.notifyViewService.reloadSubject.debounce(1e3).connect((()=>{bs.appwriteService.isAuthorized&&a()}))),[]),he(Ya,{badgeContent:t,color:"info",children:he(Ga,{sx:{color:"white !important",opacity:e?.8:1}})})},k_=()=>he(Se,{sx:{width:384,height:"calc(100% - 96px)"}}),w_=Fs()((e=>({list:{pt:1,pb:1,"& > *":{paddingTop:0,paddingBottom:0,"& > *":{paddingTop:0,paddingBottom:0}}},listItemAccient:{background:ze(e.palette.getContrastText(e.palette.background.paper),.018)}}))),S_=()=>{const[e,t]=ue.useState(),{classes:i}=w_(),[a,o]=ue.useState(0);return he(_e,{children:[he(st,{onClick:async({currentTarget:e})=>{bs.appwriteService.isAuthorized&&(await bs.notifyViewService.toggleReadAllByUserId(bs.appwriteService.currentUser.$id),t(e))},onLoadStart:()=>o((e=>e+1)),onLoadEnd:()=>o((e=>e-1)),color:"inherit",sx:{ml:2},children:he(g_,{loading:!!a})}),he(_a,{open:!!e,anchorEl:e,onClose:()=>t(null),anchorOrigin:{vertical:"bottom",horizontal:"right"},children:he(Ct,{sx:{width:384,height:448},subheader:he(va,{component:Ne,sx:{fontWeight:"bold"},children:"Уведомления"}),children:he(Le,{Loader:k_,children:async()=>{const e=bs.appwriteService.currentUser.$id,t=await bs.notifyViewService.findAllByUserId(e);return he(Wi,{className:i.list,sx:{width:384,height:"calc(100% - 48px)"},children:t.sort((({$createdAt:e},{$createdAt:t})=>r(e).isBefore(t)?1:-1)).map(((e,t)=>he(bt,{className:Ce({[i.listItemAccient]:t%2==0}),disableGutters:!0,children:he(Me,{onClick:()=>e.url&&Z(e.url),children:[he(_t,{children:he(it,{children:he(Ka,{sx:{color:"white",mt:"-2px"}})})}),he(ft,{primary:he(kt,{config:rd,handler:()=>e.title}),secondary:r(e.$createdAt).format("HH:mm DD/MM/YYYY")}),he(Be,{disableRipple:!0,children:he(Xa,{})})]})},e.$id)))})}})})})]})},z_=[{action:"logout-action",icon:Ja,label:"Выйти"}],V_=[{id:"global",noHeader:!0,children:[{id:"dashboard",label:"Главная",icon:Za},{id:"apartment",label:"База объектов",icon:Qa,options:[{id:"rent",icon:eo,label:"Аренда"},{id:"sell",icon:to,label:"Продажа"},{id:"archive",icon:io,label:"Архив",options:[{id:"archive",icon:ao,label:"Неактивно"},{id:"remove",icon:oo,label:"Удалено"}]}]},{id:"bid",label:"Заявки",icon:lo,options:[{id:"rent",icon:no,label:"Аренда"},{id:"sell",icon:ro,label:"Продажа"},{id:"archive",icon:so,label:"Архив"}]},{id:"deal",label:"Сделки",icon:co},{id:"task",label:"Задачи",icon:mo},{id:"contact",label:"Контакты",icon:po},{id:"user",label:"Сотрудники",icon:uo,options:[{id:"common",icon:ho,label:"Все сотрудники"},{id:"archive",icon:oo,label:"Архив"}]},{id:"settings",isVisible:async()=>!!(await bs.permissionService.getPermissions()).hasSettingsEditPermission,label:"Настройки",icon:yo,tabs:[{id:"common",isActive:()=>ws(["/settings","/settings/common"]),label:"Общая информация"},{id:"roles",isActive:()=>ws(["/settings/roles"]),isDisabled:async()=>!(await bs.permissionService.getPermissions()).hasUsersAccessLevelsPermission,label:"Роли сотрудников"},{id:"integration",isActive:()=>ws(["/settings/integration"]),label:"Интеграция в Telegram"},{id:"field_visibility",isDisabled:async()=>!(await bs.permissionService.getPermissions()).hasSettingsViewFieldsPermission,isActive:()=>ws(["/settings/field_visibility"]),label:"Поля"}]}]}],x_="40vmin",A_=["/images/cubes.png","/images/snow.png","/images/square.png","/images/triangle.png","/images/cells.png"],T_=()=>{const e=Math.floor(Date.now()/1e3/60);return A_[e%A_.length]},C_=()=>{const[e,t]=ue.useState((()=>T_()));return ue.useEffect((()=>Y.create((e=>bs.routerService.listen(e))).connect((()=>t(T_())))),[]),he(bo,{children:"\n            body {\n                background-position: top calc(100vh - ".concat(x_," - 24px) right 24px;\n                background-size: ").concat(x_,', auto, contain;\n                background-repeat: no-repeat;\n                background-image: url("').concat(e,'");\n            }\n        ')})},F_=()=>he(_e,{children:he(Ne,{variant:"caption",sx:{opacity:.5,pointerEvents:"none",p:1},children:["v","1.0.0"]})}),L_=()=>he(Te,{sx:{position:"fixed",top:0,left:0,right:0,bottom:0,height:"100vh",width:"100vw",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,background:e=>e.palette.background.paper},children:he(go,{})}),I_=()=>he(_e,{}),M_=k((async()=>{await ko.prefetch(!0)})),j_=()=>{bs.layoutService.setAppbarLoader(!0)},B_=()=>{bs.layoutService.setAppbarLoader(!1)},R_=async e=>{"logout-action"===e&&await bs.authService.logout()},D_=Oa((()=>he(bt,{children:he(ft,{primary:bs.appwriteService.currentUser.email,secondary:bs.appwriteService.currentUser.$id})}))),q_=Oa((()=>he(Te,{sx:{display:{xs:"none",md:"flex"}},children:[he(rt,{condition:async()=>(await bs.permissionService.getPermissions()).hasBidCreatePermission,payload:bs.appwriteService.isAuthorized,children:he(Ht,{sx:{mr:1},variant:"contained",size:"small",color:"info",onClick:()=>bs.routerService.push("/bid/create"),children:"Добавить заявку"})}),he(rt,{condition:async()=>(await bs.permissionService.getPermissions()).hasApartmentCreatePermission,payload:bs.appwriteService.isAuthorized,children:he(Ht,{variant:"contained",size:"small",color:"info",onClick:()=>bs.routerService.push("/apartment/create"),children:"Добавить объект"})}),he(S_,{})]}))),P_=()=>{const[e,t]=ue.useState(m_()),[i,a]=ue.useState(bs.routerService.location.pathname),[o,l]=ue.useState(bs.layoutService.hasAppbarLoader),[n,r]=ue.useState(bs.layoutService.hasModalLoader),s=ue.useMemo((()=>ws(n_.map((({path:e})=>e)))),[i]);return ue.useEffect((()=>me((()=>bs.routerService.location.pathname),(()=>{t(m_())}))),[]),ue.useEffect((()=>_o((()=>{a(bs.routerService.location.pathname)}),{delay:10})),[]),ue.useEffect((()=>_o((()=>{l(bs.layoutService.hasAppbarLoader)}),{delay:10})),[]),ue.useEffect((()=>_o((()=>{r(bs.layoutService.hasModalLoader)}))),[]),he(_e,{children:[he(vo,{fixedHeader:!0,noOptionHover:!0,noAppName:!0,noSearch:!0,noContent:s,appName:Qo,deps:[i],activeOptionPath:(null==e?void 0:e.sideMenu)||"",loading:o,options:V_,actions:z_,onOptionClick:c_,onOptionGroupClick:c_,onTabChange:d_,onLoadStart:j_,onLoadEnd:B_,onAction:R_,BeforeSearch:f_,onInit:M_,BeforeMenuContent:D_,BeforeActionMenu:q_,AfterContent:F_,children:[he(fo,{Loader:I_,history:bs.routerService,items:s_,fallback:bs.errorService.handleGlobalError,onLoadStart:j_,onLoadEnd:B_,onInit:M_}),he(C_,{})]}),n&&he(L_,{})]})},E_=he(Aa,{fontSize:"small"}),N_=he(xa,{fontSize:"small"}),O_=[],U_="#3F51B5",H_=Co({palette:{mode:"light",primary:{main:U_},secondary:{main:"#2196F3"},warning:{main:"#d9822b"},info:{main:"#1070CA"},success:{main:"#27AB6E"},error:{main:"#ec4c47"},text:{primary:"#000000DE",secondary:"#00000099",disabled:"#cccccc"},background:{default:"#E8E9ED !important",paper:"#fff"}},components:{MuiAppBar:{styleOverrides:{root:{background:"#6974B0"}}},MuiTab:{styleOverrides:{fullWidth:{background:"#6974b066",color:"white !important",fontWeight:"bold"}}},MuiIconButton:{styleOverrides:{root:{borderRadius:6,padding:8},sizeSmall:{padding:4}}},MuiButton:{styleOverrides:{contained:{background:U_,"&:hover":{background:"#4E65C9"}}}},MuiBadge:{styleOverrides:{badge:{background:U_}}},MuiSnackbar:{styleOverrides:{root:{border:"1px solid black",borderRadius:"4px",boxShadow:"0 0 5px 2px grey","& > *":{color:"black !important"}}}}}}),W_=document.getElementById("root"),$_=Fo({key:"mui",prepend:!0}),G_=Fo({key:"tss"});Lo("bgcolor-red","background: rgb(255, 229, 229); color: rgb(255, 0, 0);"),Lo("bgcolor-green","background: rgb(240, 246, 236); color: rgb(112, 173, 71);"),Lo("text-spacer","display: inline-block; padding: 10px; visibility: hidden;"),Lo("text-underline","display: inline-block; text-decoration: underline;"),Lo("blank-link","display: inline-block; text-decoration: underline;",{onClick:e=>{const t=e.currentTarget.getAttribute("href");t&&Z(t)}});const Y_=he(No,{history:bs.routerService,onError:bs.errorService.handleGlobalError,children:he(Io,{value:$_,children:he(Mo,{value:G_,children:he(jo,{theme:H_,children:he(Bo,{dateAdapter:Ro,children:he(ks,{children:he(Do,{Combo:({value:e,disabled:t,readonly:i,description:a="",placeholder:o="",outlined:l=!0,itemList:n=[],virtualListBox:r,watchItemList:s,labelShrink:d,noDeselect:c,freeSolo:m,title:p="",dirty:u,invalid:h,tr:y=(e=>e.toString()),onChange:b})=>{const{object:_}=wo(),v=So(),[f,g]=ue.useState((()=>({options:[],labels:{}}))),k=ue.useRef(!1),w=zo([f],10),S=Dt(f.labels),z=ue.useMemo((()=>{if("string"==typeof e)return e;const[t=null]=Object.values(e||{});return t}),[e]),{fallback:V}=Vo(),{loading:x,execute:A}=be((async e=>{const t={};n=n||[];const i=[...new Set(Object.values("function"==typeof n?await Promise.resolve(n(e,v)):n))];await Promise.all(i.map((async i=>t[i]=await Promise.resolve(y(i,e,v))))),m&&z&&!i.includes(z)&&i.push(z),g({labels:t,options:i}),k.current=!0,await w()}),{fallback:V}),T=(e=>Object.values(e||{}).sort(((e,t)=>t.localeCompare(e))).join("-"))(z),C=ue.useRef(null),F=ue.useRef(!0);ue.useEffect((()=>{if(!F.current){if(C.current===_)return;if(!s)return}C.current=_,F.current=!1,A(_)}),[T,t,u,h,_,i]);const L=(e,t)=>i=>he(Wt,{...i,sx:{...!l&&{position:"relative",mt:1,"& .MuiFormHelperText-root":{position:"absolute",top:"100%"}}},variant:l?"outlined":"standard",placeholder:e?void 0:o,label:p,helperText:u&&h||a,error:u&&null!==h,InputProps:{...i.InputProps,readOnly:t,endAdornment:he(_e,{children:[e?he(To,{color:"inherit",size:20}):null,i.InputProps.endAdornment]})},InputLabelProps:{...i.InputLabelProps,...d&&{shrink:!0}}}),I=(e,t,i)=>{const{current:a}=S;return he("li",{...e,children:[he(Hi,{icon:E_,checkedIcon:N_,style:{marginRight:8},checked:i.selected}),m?t:a[t]||"".concat(t," (unknown)")]})},M=e=>{const{current:t}=S;return m?e:t[e]||"".concat(e," (unknown)")};return x||!k.current?he(Ao,{disableClearable:c,disabled:!0,loading:!0,value:null,options:O_,onChange:()=>null,freeSolo:m,ListboxComponent:r?xo:void 0,getOptionLabel:M,renderInput:L(!0,!0),renderOption:I}):he(Ao,{disableClearable:c,loading:x,value:z||null,onChange:({},e)=>{var t;b((t=e)?[t]:null)},getOptionLabel:M,freeSolo:m,options:f.options,disabled:t,readOnly:i,ListboxComponent:r?xo:void 0,renderInput:L(!1,i),renderOption:I})},children:he(qo,{FilterListSlot:vi,children:he(Po,{children:he(Eo,{children:he(v_,{children:he(P_,{})})})})})})})})})})})}),K_=Oo(W_);Uo.setValue({WITH_DIRTY_CLICK_LISTENER:!0,WITH_MOBILE_READONLY_FALLBACK:!0,WITH_WAIT_FOR_MOVE_LISTENER:!0,WITH_WAIT_FOR_TOUCH_LISTENER:!0,WITH_DISMOUNT_LISTENER:!0,WITH_SYNC_COMPUTE:!0,CUSTOM_FIELD_DEBOUNCE:800,FIELD_BLUR_DEBOUNCE:50}),Qe.setAdjustHeight(25);(async()=>{for(;!window.Translate;)await M(500);K_.render(Y_)})();export{ah as B,a as __vite_legacy_guard,Ps as a,sh as b,Zu as c,Qu as d,Mp as e,Kp as f};
