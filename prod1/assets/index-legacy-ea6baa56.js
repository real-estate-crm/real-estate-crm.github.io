!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t=function(){return n};var n={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(F){c=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,o=Object.create(i.prototype),s=new A(r||[]);return a(o,"_invoke",{value:w(e,n,s)}),o}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(F){return{type:"throw",arg:F}}}n.wrap=d;var m={};function f(){}function h(){}function y(){}var v={};c(v,s,(function(){return this}));var b=Object.getPrototypeOf,_=b&&b(b(T([])));_&&_!==r&&i.call(_,s)&&(v=_);var k=y.prototype=f.prototype=Object.create(v);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(t,n){function r(a,o,s,u){var l=p(t[a],t,o);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==e(d)&&i.call(d,"__await")?n.resolve(d.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):n.resolve(d).then((function(e){c.value=e,s(c)}),(function(e){return r("throw",e,s,u)}))}u(l.arg)}var o;a(this,"_invoke",{value:function(e,t){function i(){return new n((function(n,i){r(e,t,n,i)}))}return o=o?o.then(i,i):i()}})}function w(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=S(o,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=p(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=p(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,m;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function z(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function V(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(z,this),this.reset(!0)}function T(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:C}}function C(){return{value:void 0,done:!0}}return h.prototype=y,a(k,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:h,configurable:!0}),h.displayName=c(y,l,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(k),e},n.awrap=function(e){return{__await:e}},g(x.prototype),c(x.prototype,u,(function(){return this})),n.AsyncIterator=x,n.async=function(e,t,r,i,a){void 0===a&&(a=Promise);var o=new x(d(e,t,r,i),a);return n.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(k),c(k,l,"Generator"),c(k,s,(function(){return this})),c(k,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=T,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(V),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),V(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;V(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),m}},n}function n(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,i)}function r(e){return function(){var t=this,r=arguments;return new Promise((function(i,a){var o=e.apply(t,r);function s(e){n(o,i,a,s,u,"next",e)}function u(e){n(o,i,a,s,u,"throw",e)}s(void 0)}))}}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t,n){return(t=d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"===e(n)?n:String(n)}function p(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=f(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function f(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new v(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function v(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return v=function(e){this.s=e,this.n=e.next},v.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new v(e)}function b(e){var t,n;function r(t,n){try{var a=e[t](n),o=a.value,s=o instanceof _;Promise.resolve(s?o.v:o).then((function(n){if(s){var u="return"===t?"return":"next";if(!o.k||n.done)return r(u,n);n=e[u](n).value}i(a.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(u){i("throw",u)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new Promise((function(a,o){var s={key:e,arg:i,resolve:a,reject:o,next:null};n?n=n.next=s:(t=n=s,r(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}function _(e,t){this.v=e,this.k=t}b.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},b.prototype.next=function(e){return this._invoke("next",e)},b.prototype.throw=function(e){return this._invoke("throw",e)},b.prototype.return=function(e){return this._invoke("return",e)},System.register(["./vendor-legacy-6fddd1b0.js"],(function(e,n){"use strict";var a,u,d,f,h,v,k,g,x,w,S,z,V,A,T,C,F,L,I,M,j,B,D,R,q,P,E,N,O,U,H,W,$,G,Y,K,X,J,Z,Q,ee,te,ne,re,ie,ae,oe,se,ue,le,ce,de,pe,me,fe,he,ye,ve,be,_e,ke,ge,xe,we,Se,ze,Ve,Ae,Te,Ce,Fe,Le,Ie,Me,je,Be,De,Re,qe,Pe,Ee,Ne,Oe,Ue,He,We,$e,Ge,Ye,Ke,Xe,Je,Ze,Qe,et,tt,nt,rt,it,at,ot,st,ut,lt,ct,dt,pt,mt,ft,ht,yt,vt,bt,_t,kt,gt,xt,wt,St,zt,Vt,At,Tt,Ct,Ft,Lt,It,Mt,jt,Bt,Dt,Rt,qt,Pt,Et,Nt,Ot,Ut,Ht,Wt,$t,Gt,Yt,Kt,Xt,Jt,Zt,Qt,en,tn,nn,rn,an,on,sn,un,ln,cn,dn,pn,mn,fn,hn,yn,vn,bn,_n,kn,gn,xn,wn,Sn,zn,Vn,An,Tn,Cn,Fn,Ln,In,Mn,jn,Bn,Dn,Rn,qn,Pn,En,Nn,On,Un,Hn,Wn,$n,Gn,Yn,Kn,Xn,Jn,Zn,Qn,er,tr,nr,rr,ir,ar,or,sr,ur,lr,cr,dr,pr,mr,fr,hr,yr,vr,br,_r,kr,gr,xr,wr,Sr,zr,Vr,Ar,Tr,Cr,Fr,Lr,Ir,Mr,jr,Br,Dr,Rr,qr,Pr,Er,Nr,Or,Ur,Hr,Wr,$r,Gr,Yr,Kr,Xr,Jr,Zr,Qr,ei,ti,ni,ri,ii,ai,oi,si,ui,li,ci,di,pi,mi,fi,hi,yi,vi,bi,_i,ki,gi,xi,wi,Si,zi,Vi,Ai,Ti,Ci,Fi,Li,Ii,Mi,ji,Bi,Di,Ri,qi,Pi,Ei,Ni,Oi,Ui,Hi,Wi,$i,Gi,Yi,Ki,Xi,Ji,Zi,Qi;return{setters:[function(e){a=e.b,u=e.i,d=e.s,f=e.d,h=e.l,v=e.u,k=e.a,g=e.r,x=e.m,w=e.v,S=e.c,z=e.e,V=e.A,A=e.t,T=e.f,C=e.Q,F=e.h,L=e.g,I=e.I,M=e.o,j=e.j,B=e.k,D=e.D,R=e.F,q=e.S,P=e.n,E=e.C,N=e.p,O=e.q,U=e.Z,H=e.w,W=e.T,$=e.x,G=e.y,Y=e.z,K=e.B,X=e.E,J=e.G,Z=e.H,Q=e.J,ee=e.K,te=e.L,ne=e.M,re=e.N,ie=e.O,ae=e.P,oe=e.Y,se=e._,ue=e.U,le=e.R,ce=e.V,de=e.W,pe=e.X,me=e.$,fe=e.a0,he=e.a1,ye=e.a2,ve=e.a3,be=e.a4,_e=e.a5,ke=e.a6,ge=e.a7,xe=e.a8,we=e.a9,Se=e.aa,ze=e.ab,Ve=e.ac,Ae=e.ad,Te=e.ae,Ce=e.af,Fe=e.ag,Le=e.ah,Ie=e.ai,Me=e.aj,je=e.ak,Be=e.al,De=e.am,Re=e.an,qe=e.ao,Pe=e.ap,Ee=e.aq,Ne=e.ar,Oe=e.as,Ue=e.at,He=e.au,We=e.av,$e=e.aw,Ge=e.ax,Ye=e.ay,Ke=e.az,Xe=e.aA,Je=e.aB,Ze=e.aC,Qe=e.aD,et=e.aE,tt=e.aF,nt=e.aG,rt=e.aH,it=e.aI,at=e.aJ,ot=e.aK,st=e.aL,ut=e.aM,lt=e.aN,ct=e.aO,dt=e.aP,pt=e.aQ,mt=e.aR,ft=e.aS,ht=e.aT,yt=e.aU,vt=e.aV,bt=e.aW,_t=e.aX,kt=e.aY,gt=e.aZ,xt=e.a_,wt=e.a$,St=e.b0,zt=e.b1,Vt=e.b2,At=e.b3,Tt=e.b4,Ct=e.b5,Ft=e.b6,Lt=e.b7,It=e.b8,Mt=e.b9,jt=e.ba,Bt=e.bb,Dt=e.bc,Rt=e.bd,qt=e.be,Pt=e.bf,Et=e.bg,Nt=e.bh,Ot=e.bi,Ut=e.bj,Ht=e.bk,Wt=e.bl,$t=e.bm,Gt=e.bn,Yt=e.bo,Kt=e.bp,Xt=e.bq,Jt=e.br,Zt=e.bs,Qt=e.bt,en=e.bu,tn=e.bv,nn=e.bw,rn=e.bx,an=e.by,on=e.bz,sn=e.bA,un=e.bB,ln=e.bC,cn=e.bD,dn=e.bE,pn=e.bF,mn=e.bG,fn=e.bH,hn=e.bI,yn=e.bJ,vn=e.bK,bn=e.bL,_n=e.bM,kn=e.bN,gn=e.bO,xn=e.bP,wn=e.bQ,Sn=e.bR,zn=e.bS,Vn=e.bT,An=e.bU,Tn=e.bV,Cn=e.bW,Fn=e.bX,Ln=e.bY,In=e.bZ,Mn=e.b_,jn=e.b$,Bn=e.c0,Dn=e.c1,Rn=e.c2,qn=e.c3,Pn=e.c4,En=e.c5,Nn=e.c6,On=e.c7,Un=e.c8,Hn=e.c9,Wn=e.ca,$n=e.cb,Gn=e.cc,Yn=e.cd,Kn=e.ce,Xn=e.cf,Jn=e.cg,Zn=e.ch,Qn=e.ci,er=e.cj,tr=e.ck,nr=e.cl,rr=e.cm,ir=e.cn,ar=e.co,or=e.cp,sr=e.cq,ur=e.cr,lr=e.cs,cr=e.ct,dr=e.cu,pr=e.cv,mr=e.cw,fr=e.cx,hr=e.cy,yr=e.cz,vr=e.cA,br=e.cB,_r=e.cC,kr=e.cD,gr=e.cE,xr=e.cF,wr=e.cG,Sr=e.cH,zr=e.cI,Vr=e.cJ,Ar=e.cK,Tr=e.cL,Cr=e.cM,Fr=e.cN,Lr=e.cO,Ir=e.cP,Mr=e.cQ,jr=e.cR,Br=e.cS,Dr=e.cT,Rr=e.cU,qr=e.cV,Pr=e.cW,Er=e.cX,Nr=e.cY,Or=e.cZ,Ur=e.c_,Hr=e.c$,Wr=e.d0,$r=e.d1,Gr=e.d2,Yr=e.d3,Kr=e.d4,Xr=e.d5,Jr=e.d6,Zr=e.d7,Qr=e.d8,ei=e.d9,ti=e.da,ni=e.db,ri=e.dc,ii=e.dd,ai=e.de,oi=e.df,si=e.dg,ui=e.dh,li=e.di,ci=e.dj,di=e.dk,pi=e.dl,mi=e.dm,fi=e.dn,hi=e.dp,yi=e.dq,vi=e.dr,bi=e.ds,_i=e.dt,ki=e.du,gi=e.dv,xi=e.dw,wi=e.dx,Si=e.dy,zi=e.dz,Vi=e.dA,Ai=e.dB,Ti=e.dC,Ci=e.dD,Fi=e.dE,Li=e.dF,Ii=e.dG,Mi=e.dH,ji=e.dI,Bi=e.dJ,Di=e.dK,Ri=e.dL,qi=e.dM,Pi=e.dN,Ei=e.dO,Ni=e.dP,Oi=e.dQ,Ui=e.dR,Hi=e.dS,Wi=e.dT,$i=e.dU,Gi=e.dV,Yi=e.dW,Ki=e.dX,Xi=e.dY,Ji=e.dZ,Zi=e.d_,Qi=e.d$}],execute:function(){var ea,ta=function(){var e=[];return function t(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(n){var r=n.fields||[],i=n.child?[n.child]:[];t([].concat(p(r),i)),e.push(n)}))}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),e},na=function(e){return ta(e).filter((function(e){return e.name})).map((function(e){return{name:e.name,type:e.type}})).reduce((function(e,t){var n=t.name,r=t.type;return e.some((function(e){var t=e.name===n;return t&&e.type!=r&&console.warn("CONFLICT name=".concat(n," type1=").concat(e.type.toString()," type2=").concat(r.toString())),t}))?e:[].concat(p(e),[{name:n,type:r}])}),[])};window.mapSchema=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.textFieldSize,r=void 0===n?96:n,i=t.itemFieldSize,o=void 0===i?48:i,s=t.comboFieldSize,u=void 0===s?48:s,l=t.dateFieldSize,c=void 0===l?12:l,d=t.timeFieldSize,p=void 0===d?12:d;return na(e).map((function(e){var t=e.type,n=e.name;return t===a.Items?{key:n,type:"string",status:"available",required:!1,array:!0,size:o,default:null}:t===a.Combo?{key:n,type:"string",status:"available",required:!1,array:!0,size:u,default:null}:t===a.Time?{key:n,type:"string",status:"available",required:!1,array:!1,size:p,default:null}:t===a.Radio?{key:n,type:"string",status:"available",required:!1,array:!1,size:radioFieldSize,default:null}:t===a.Date?{key:n,type:"string",status:"available",required:!1,array:!1,size:c,default:null}:t===a.Checkbox||t===a.Switch?{key:n,type:"boolean",status:"available",required:!1,array:!1,default:null}:(t===a.Component&&console.warn("Field name=".concat(n," is a component field. By default we are using nvarchar[").concat(r,"]. Double check manually for an array field")),{key:n,type:"string",status:"available",required:!1,array:!1,size:r,default:null})})).map((function(e){return JSON.stringify(e,null,2)})).join(",\n")},window.mapFields=na,window.mapTypes=function(e){return na(e).map((function(e){var t=e.name,n=e.type;return'"'.concat(t,'": ').concat(n===a.Combo?"string[] | null":n===a.Text?"string":n===a.Items?"string[] | null":n===a.Date||n===a.Radio||n===a.Complete||n===a.Time?"string":n===a.Checkbox||n===a.Switch?"boolean":(console.warn("UNKNOWN TYPE name=".concat(t," type=").concat(n.toString())),"string"),";")})).join("\n")},window.deepFlat=ta,"ResizeObserver"in window||(window.ResizeObserver=u),d.polyfill(),f.extend(h),f.extend(v),f.extend(k),f.locale(g);var ra=function(){function e(){var t=this;s(this,e),c(this,"_alerts",[]),c(this,"hideCurrent",(function(){t._alerts.length>0&&t._alerts.shift()})),c(this,"notify",(function(e){t.hideCurrent(),t._alerts.push({key:w(),message:e})})),x(this)}return l(e,[{key:"current",get:function(){return this._alerts.length?this._alerts[0]:null}}]),e}(),ia={projectId:"64b53d0c41fcf5093b12",projectName:"RealEstate",databases:[{$id:"64c4de8e7b30179809ef",name:"DATABASE",$createdAt:"2023-09-14T10:10:35.686+00:00",$updatedAt:"2023-09-14T11:59:42.307+00:00",enabled:!0}],collections:[{$id:"64c4fb401e0a490e44bf",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"USER",enabled:!0,documentSecurity:!1,attributes:[{key:"user_role",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"email",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"middle_name",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"user_features",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"user_files",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"phone",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"active",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"first_name",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"last_name",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"avatar",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"index",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:-1},{key:"system_metadata",type:"string",status:"available",error:"",required:!1,array:!1,size:1024,default:null},{key:"filial",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"otdel",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"status_sotrudnika",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"telegram",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"fejsbuk",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"instagram",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"vatsap",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"v_kontakte",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"zum",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"semejnoe_polozhenie",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rabochij_telefon",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"lichnyj_nomer",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"ofis",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"data_priema_rezyume",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"sertifikat",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"nachalo_opyta_raboty",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"data_uvolneniya",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"prichina_uvolneniya",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"pol",type:"string",status:"available",error:"",required:!1,array:!1,size:18,default:null},{key:"data_rozhdeniya",type:"string",status:"available",error:"",required:!1,array:!1,size:20,default:null},{key:"seriya-i-nomer_pasporta",type:"string",status:"available",error:"",required:!1,array:!1,size:30,default:null},{key:"data-vydachi_pasporta",type:"string",status:"available",error:"",required:!1,array:!1,size:20,default:null},{key:"kem_vydan",type:"string",status:"available",error:"",required:!1,array:!1,size:25,default:null},{key:"data_trudoustrojstva",type:"string",status:"available",error:"",required:!1,array:!1,size:10,default:null},{key:"dolzhnost",type:"string",status:"available",error:"",required:!1,array:!1,size:20,default:null},{key:"nachalnik_otdela",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"deti",type:"string",status:"available",error:"",required:!1,array:!1,size:10,default:null},{key:"adres_propiski",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"adres_prozhivaniya",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"o_sebe",type:"string",status:"available",error:"",required:!1,array:!1,size:256,default:null},{key:"hobbi",type:"string",status:"available",error:"",required:!1,array:!1,size:256,default:null},{key:"system_is_remove",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null}],indexes:[{key:"system_metadata",type:"fulltext",status:"available",error:"",attributes:["system_metadata"],orders:["ASC"]},{key:"email1",type:"fulltext",status:"available",error:"",attributes:["email"],orders:["ASC"]},{key:"email1-phone1",type:"fulltext",status:"available",error:"",attributes:["email","phone"],orders:["ASC","ASC"]},{key:"phone1",type:"fulltext",status:"available",error:"",attributes:["phone"],orders:["ASC"]}]},{$id:"64c4fb9158c913d9036e",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"SETTINGS",enabled:!0,documentSecurity:!1,attributes:[{key:"telegram_channel_enabled_4",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_agency_nickname_2",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_token_3",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agency_3",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agency_enabled_2",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_channel_4",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agency_1",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_channel_enabled_1",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_agency_enabled_3",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_agency_4",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_channel_enabled_2",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_token_5",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_channel_3",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agency_nickname_3",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_token_1",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agency_nickname_4",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_channel_1",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_token_4",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agency_2",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agency_5",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_token_2",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agency_nickname_1",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_channel_5",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"usd_uzs",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agent_3",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agent_nickname_2",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agency_enabled_5",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_agent_2",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agency_enabled_1",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_agency_nickname_5",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"watermark_file_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agency_enabled_4",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_channel_enabled_3",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_agent_nickname_1",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_channel_2",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agent_enabled_1",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_agent_4",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agent_nickname_4",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_channel_enabled_5",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_agent_enabled_4",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"masterdetail_mode",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"telegram_agent_enabled_3",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_agent_5",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agent_nickname_3",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agent_1",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"usd_eur",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agent_enabled_2",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_agent_nickname_5",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agent_enabled_5",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"instagram_link_1",type:"string",status:"available",error:"",required:!1,array:!1,size:128,default:null},{key:"facebook_link_1",type:"string",status:"available",error:"",required:!1,array:!1,size:128,default:null},{key:"telegram_link_1",type:"string",status:"available",error:"",required:!1,array:!1,size:128,default:null},{key:"youtube_link_1",type:"string",status:"available",error:"",required:!1,array:!1,size:128,default:null},{key:"instagram_link_enabled_1",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"facebook_link_enabled_1",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_link_enabled_1",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"youtube_link_enabled_1",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"logo_file_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_token_6",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_token_7",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_token_8",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_token_9",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_token_10",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_channel_6",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_channel_7",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_channel_8",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_channel_9",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_channel_10",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_channel_enabled_6",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_channel_enabled_7",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_channel_enabled_8",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_channel_enabled_9",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_channel_enabled_10",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_name_1",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_name_2",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_name_3",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_name_4",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_name_5",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_name_6",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_name_7",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_name_8",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_name_9",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_name_10",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"field_visibility",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null}],indexes:[]},{$id:"64d5f3fb13b5a40c0d1d",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"FILES",enabled:!0,documentSecurity:!1,attributes:[{key:"name",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null}],indexes:[]},{$id:"64d4a34e613b8f723d6f",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"CONTACT",enabled:!0,documentSecurity:!1,attributes:[{key:"telefon",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"status_klienta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"tip_klienta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"loyalnost_klienta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"osnovanie-deyatelnosti-dannogo_licza",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"naimenovanie_organizaczii",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kadastrovyj-nomer_zemli",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"data-vydachi_pasporta",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kontakt",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"seriya-i-nomer_pasporta",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"fio",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kem_vydan",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"adres_registraczii",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sertifikat_kompanii",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"dolzhnost_rukovoditelya",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"contact_files",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"kadastrovyj-nomer_obekta",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"istochnik",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rekvizity",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_metadata",type:"string",status:"available",error:"",required:!1,array:!1,size:1024,default:null},{key:"pinfl",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"fakticheskij_adres",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"data_rozhdeniya",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"inn",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"pol",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"email",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"data-sozdaniya_klienta",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"yuridicheskij_adres",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"index",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:-1},{key:"contact_phones",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"contact_names",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"system_access_level",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"system_created_by",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_only_for_owner",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_allowance",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null}],indexes:[{key:"fio",type:"fulltext",status:"available",error:"",attributes:["fio"],orders:["ASC"]},{key:"system_metadata",type:"fulltext",status:"available",error:"",attributes:["system_metadata"],orders:["ASC"]},{key:"fio-telefon",type:"fulltext",status:"available",error:"",attributes:["fio","telefon"],orders:["ASC","ASC"]},{key:"telefon",type:"fulltext",status:"available",error:"",attributes:["telefon"],orders:["ASC"]}]},{$id:"64db49022640a0d53252",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"DEAL",enabled:!0,documentSecurity:!1,attributes:[{key:"user_id",type:"string",status:"available",error:"",required:!0,array:!1,size:96,default:null},{key:"apartment_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"bid_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"status",type:"string",status:"available",error:"",required:!0,array:!1,size:48,default:null},{key:"type",type:"string",status:"available",error:"",required:!0,array:!1,size:48,default:null},{key:"price",type:"string",status:"available",error:"",required:!1,array:!0,size:128,default:null},{key:"price_unit",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"index",type:"integer",status:"available",error:"",required:!0,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"fio",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telefon",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"tip_klienta",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"contact_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"target_apartment_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"target_bid_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null}],indexes:[{key:"contact",type:"key",status:"available",error:"",attributes:["contact_id"],orders:["ASC"]},{key:"apartment",type:"key",status:"available",error:"",attributes:["apartment_id"],orders:["ASC"]},{key:"bid",type:"key",status:"available",error:"",attributes:["bid_id"],orders:["ASC"]},{key:"target_apartment_status",type:"key",status:"available",error:"",attributes:["target_apartment_id","status"],orders:["ASC","ASC"]},{key:"target_bid_status",type:"key",status:"available",error:"",attributes:["target_bid_id","status"],orders:["ASC","ASC"]}]},{$id:"64c75cc607be95d26b8d",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"EDITTARGET",enabled:!0,documentSecurity:!1,attributes:[{key:"entity_id",type:"string",status:"available",error:"",required:!1,array:!1,size:64,default:null},{key:"path",type:"string",status:"available",error:"",required:!1,array:!1,size:64,default:null}],indexes:[]},{$id:"64ff0d1a1eec52961ec4",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"DEAL_HISTORY",enabled:!0,documentSecurity:!1,attributes:[{key:"bid_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"user_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"type",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"apartment_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"payload",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"comment",type:"string",status:"available",error:"",required:!1,array:!1,size:512,default:null},{key:"deal_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"contact_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null}],indexes:[{key:"bid_type",type:"key",status:"available",error:"",attributes:["bid_id","type"],orders:["ASC","ASC"]},{key:"apartment_type",type:"key",status:"available",error:"",attributes:["apartment_id","type"],orders:["ASC","ASC"]},{key:"apartment",type:"key",status:"available",error:"",attributes:["apartment_id"],orders:["ASC"]},{key:"bid",type:"key",status:"available",error:"",attributes:["bid_id"],orders:["ASC"]},{key:"contact",type:"key",status:"available",error:"",attributes:["contact_id"],orders:["ASC"]}]},{$id:"6509b9124a8ff89af189",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"SERVICE_COMMENT",enabled:!0,documentSecurity:!1,attributes:[{key:"apartment_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"bid_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"contact_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"comment",type:"string",status:"available",error:"",required:!1,array:!1,size:2048,default:null},{key:"file_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"user_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null}],indexes:[{key:"apartment",type:"key",status:"available",error:"",attributes:["apartment_id"],orders:["ASC"]},{key:"contact",type:"key",status:"available",error:"",attributes:["contact_id"],orders:["ASC"]},{key:"bid",type:"key",status:"available",error:"",attributes:["bid_id"],orders:["ASC"]}]},{$id:"650af9b005b11d0b21a4",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"ROLES",enabled:!0,documentSecurity:!1,attributes:[{key:"title",type:"string",status:"available",error:"",required:!1,array:!1,size:128,default:null},{key:"comment",type:"string",status:"available",error:"",required:!1,array:!1,size:2048,default:null},{key:"role_features",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null}],indexes:[]},{$id:"651a9e22bab7ca1094fa",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"NOTIFY",enabled:!0,documentSecurity:!1,attributes:[{key:"user_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"title",type:"string",status:"available",error:"",required:!1,array:!1,size:512,default:null},{key:"url",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"is_read",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null}],indexes:[{key:"user",type:"key",status:"available",error:"",attributes:["user_id"],orders:["ASC"]},{key:"user_read",type:"key",status:"available",error:"",attributes:["user_id","is_read"],orders:["ASC","ASC"]}]},{$id:"651bcf6238a18a8fd2f2",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"TASK",enabled:!0,documentSecurity:!1,attributes:[{key:"from_user_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"to_user_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"contact_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"type",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"title",type:"string",status:"available",error:"",required:!1,array:!1,size:512,default:null},{key:"index",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"moment_stamp",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"is_complete",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"is_meet",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"is_call",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"from_user_fio",type:"string",status:"available",error:"",required:!1,array:!1,size:128,default:null},{key:"to_user_fio",type:"string",status:"available",error:"",required:!1,array:!1,size:128,default:null},{key:"contact_fio",type:"string",status:"available",error:"",required:!1,array:!1,size:128,default:null},{key:"time_stamp",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null}],indexes:[{key:"to_user",type:"key",status:"available",error:"",attributes:["to_user_id"],orders:["ASC"]},{key:"contact",type:"key",status:"available",error:"",attributes:["contact_id"],orders:["ASC"]},{key:"type",type:"key",status:"available",error:"",attributes:["type"],orders:["ASC"]},{key:"moment_stamp",type:"key",status:"available",error:"",attributes:["moment_stamp"],orders:["ASC"]},{key:"complete",type:"key",status:"available",error:"",attributes:["is_complete"],orders:["ASC"]}]},{$id:"651be76b0bfd3092408e",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"TASK_HISTORY",enabled:!0,documentSecurity:!1,attributes:[{key:"user_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"contact_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"task_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"comment",type:"string",status:"available",error:"",required:!1,array:!1,size:1024,default:null}],indexes:[{key:"user",type:"key",status:"available",error:"",attributes:["user_id"],orders:["ASC"]},{key:"contact",type:"key",status:"available",error:"",attributes:["contact_id"],orders:["ASC"]},{key:"task",type:"key",status:"available",error:"",attributes:["task_id"],orders:["ASC"]}]},{$id:"65367cf06601589d6b21",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"ADVERTISING",enabled:!0,documentSecurity:!1,attributes:[{key:"podkategoriya_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"zagolovok_dlya_reklamy",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sostoyanie_remonta-kvartiry",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"obshhaya_ploshhad",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"nazvanie_zhk",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kategoriya_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"orientir",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"metro",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rajon",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"primechanie",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"etazhnost",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"etazh",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ulicza",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kolichestvo_komnat",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"mestopolozhenie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kolichestvo_spalen",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sostoyanie-obekta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"bassejn",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kolichestvo_sotok",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"raspolozhenie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sostoyanie_remonta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_doma",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"vid_liczenzii",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"naznachenie-obekta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"system_created_by",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"index",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"apartment_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"apartment_images",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"advertising_images",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"apartment_index",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"naznachenie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"naznachenie-obekta-zemlya_uchastok",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"nomer_agenta",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"nomer_agenstva",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"tip_nedvizhimosti",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null}],indexes:[]},{$id:"64d7502a5ce9f881b680",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"BIDS",enabled:!0,documentSecurity:!1,attributes:[{key:"parkovka",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"naznachenie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"spalnya_sanuzel_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kanalizacziya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kolichestvo_spalen_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"etazh_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"vid_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mebel_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"balkon",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mebel",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"vdol_dorogi",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"ploshhad_sanuzla_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"tip_stroeniya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"poleznaya_ploshhad_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sostoyanie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"etazhnost_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rasstoyanie_do_metro_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"tip-stroeniya_kvartiry",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"czokol",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"god_postrojki_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"konserzh",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"sistema-otopleniya_kvartiry",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"nomer_kvartiry",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_kuhni_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"zhilaya_ploshhad_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"etazh_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_balkona_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"balkon_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"god_postrojki_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"prodazha",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"zagolovok",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"voda",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"metro",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"lift_kommercziya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"gaz",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"poleznaya_ploshhad_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kolichestvo_sotok_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"spalnya_sanuzel_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"vid_iz_okna",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kolichestvo_spalen_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"lift_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sostoyanie_remonta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"bassejn",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mashina_mesto_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sanuzel",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"obshhaya_ploshhad_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"obshhaya_ploshhad_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sistema_kondiczionirovaniya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kolichestvo_sotok_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"vysota_potolkov_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"raspolozhenie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"naznachenie-obekta-zemlya_uchastok",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"raspolozhenie_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"nazvanie_zhk",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"vysota_potolkov_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sanuzel_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"voda_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kolichestvo_komnat_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"zhd_vetka",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"podkategoriya_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kolichestvo_komnat_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"zhilaya_ploshhad_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"elektrichestvo",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_holla_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"torecz",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"kategoriya_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"istochnik",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mebel_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"tip_zemli_uchastka",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"prod_torg",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"voda_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mahallya",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rajon",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"tip-stroeniya_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"bid_files",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"ploshhad_dopolnitelnoj_pristrojki_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sostoyanie-remonta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sistema-otopleniya_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sistema-otopleniya_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sostoyanie-obekta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sobstvennoe_obsluzhivayushhee_tszh",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"kanalizacziya_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"gaz_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"strana",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"gorod",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"bid_images",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"oblast",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rent_kom_torg",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"ploshhad_sanuzla_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_komnaty_ohrany_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"orientir",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"vid_iz_okna_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_gostevogo_doma_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"mestopolozhenie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sanuzel_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"parkovka_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"prod_kom_torg",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"garazh",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mestopolozhenie-obekta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rasstoyanie_do_goroda_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_dopolnitelnoj_pristrojki_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"elektrichestvo_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_komnaty_ohrany_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_kuhni_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sistema_otopleniya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"elektrichestvo_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ulicza",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rent_torg",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"vid_liczenzii",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rasstoyanie_do_goroda_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rasstoyanie_do_metro_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sistema-kondiczionirovaniya_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_gostinnoj_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"balkon_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kanalizacziya_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_holla_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_balkona_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sostoyanie_remonta-kvartiry",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"tip_planirovki",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_spalni_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"podval",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"nomer_doma",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"podezdnye_puti",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"etazhnost_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_doma_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"lift_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mestopolozhenie-obekta_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"gaz_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_spalni_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"contact_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sostoyanie_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"opisanie",type:"string",status:"available",error:"",required:!1,array:!1,size:1024,default:null},{key:"ploshhad_gostinnoj_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"parkovka_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"uglovoj",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"naznachenie-obekta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"arenda",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_terrasy_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sistema-kondiczionirovaniya_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"creator_user_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_terrasy_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"index",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"mashina_mesto_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_gostevogo_doma_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_doma_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"metro_list",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rajon_list",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mahallya_list",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"vnutri_est",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ryadom_est",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"komnata_ohrany",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"saraj",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"ogorod",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"reshetki_na_oknah",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"pozharnaya_signalizacziya",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"videonablyudenie",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"signalizacziya",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"razgruzochnyj_pandus",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"gostevoj_domik",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"barbekyu_zona",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"dva_doma_vo_dvore",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"polisadnik",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"dopolnitelnaya_pristrojka",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"ohrana",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_access_level",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"system_is_rent",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_is_sell",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_is_archive",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_created_by",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_only_for_owner",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_allowance",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"system_metro",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"system_rajon",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"system_mahallya",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"system_rent_price_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_rent_price_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_prod_price_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_prod_price_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"tip_nedvizhimosti",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"system_rent_kom_price_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_rent_kom_price_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_prod_kom_price_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_prod_kom_price_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_prod_price_entries",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"system_rent_price_entries",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"terrasa",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"czokol_podval",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"garderobnaya",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"umnyj_dom",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null}],indexes:[]},{$id:"64d4a5782854ff66e9a1",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"APARTMENT",enabled:!0,documentSecurity:!1,attributes:[{key:"sanuzel_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"balkon_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"raspolozhenie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"orientir",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sistema_kondiczionirovaniya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"etazhnost",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"etazh",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_gostevogo_doma",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kanalizacziya_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_sanuzla",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"mestopolozhenie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_balkona",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"uglovoj",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"voda_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rajon",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"strana",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sistema-kondiczionirovaniya_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kolichestvo_komnat",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kolichestvo_spalen",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_doma",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"bassejn",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"tip_stroeniya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"raspolozhenie_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kanalizacziya_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sistema-otopleniya_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"nazvanie_zhk",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"podezd_nomer",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sostoyanie_remonta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mashina_mesto",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"naznachenie-obekta-zemlya_uchastok",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"elektrichestvo",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"tip_zemli_uchastka",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sostoyanie-obekta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sostoyanie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"czokol",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"vysota_potolkov",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"mebel",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"parkovka_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sistema-otopleniya_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"god_postrojki",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"naznachenie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"zhd_vetka",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"contact_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_kuhni",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"voda_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"zagolovok",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sistema-kondiczionirovaniya_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"metro",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sanuzel_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"vid_iz_okna",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_holla",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sostoyanie-remonta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"gaz_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rasstoyanie_do_goroda",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"lift_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"elektrichestvo_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"balkon",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sanuzel",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"arenda",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mebel_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"lift_kommercziya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sostoyanie_remonta-kvartiry",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sostoyanie_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"podkategoriya_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"energonositel_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sistema-otopleniya_kvartiry",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kanalizacziya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mebel_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rasstoyanie_do_metro",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"parkovka",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"lift_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"gorod",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"oblast",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"podezdnye_puti",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"torecz",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"nomer_kvartiry",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"gaz_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"istochnik",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sobstvennoe_obsluzhivayushhee_tszh",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"sistema_otopleniya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"balkon_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"garazh",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"poleznaya_ploshhad",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"elektrichestvo_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kod_domofona",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"vid_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"tip_planirovki",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"parkovka_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"tip-stroeniya_kvartiry",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"nomer_doma",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"apartment_images",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"mahallya",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"voda",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"apartment_files",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"ploshhad_spalni",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"addon_square_names",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_gostinnoj",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_terrasy",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"gaz",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"zhilaya_ploshhad",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kategoriya_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"index",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"konserzh",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"vid_iz_okna_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_dopolnitelnoj_pristrojki",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ulicza",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"naznachenie-obekta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"obshhaya_ploshhad",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"creator_user_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"addon_square_values",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_komnaty_ohrany",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"spalnya_sanuzel",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"vid_liczenzii",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mestopolozhenie-obekta_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kolichestvo_sotok",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"tip-stroeniya_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mestopolozhenie-obekta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"prodazha",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"opisanie",type:"string",status:"available",error:"",required:!1,array:!1,size:1024,default:null},{key:"vnutri_est",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ryadom_est",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"komnata_ohrany",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"vdol_dorogi",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"podval",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"saraj",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"ogorod",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"reshetki_na_oknah",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"pozharnaya_signalizacziya",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"videonablyudenie",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"signalizacziya",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"razgruzochnyj_pandus",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"gostevoj_domik",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"barbekyu_zona",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"dva_doma_vo_dvore",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"polisadnik",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"dopolnitelnaya_pristrojka",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"ohrana",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"holodilnik",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_access_level",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"system_is_rent",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_is_sell",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_is_archive",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_created_by",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_only_for_owner",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_allowance",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"prod_torg",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"rent_kom_torg",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"prod_kom_torg",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"rent_torg",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_is_remove",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_metro",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"system_rajon",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"system_mahallya",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"system_rent_price",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_prod_price",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"tip_nedvizhimosti",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"system_prod_price_entries",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"system_rent_price_entries",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"system_prod_kom_price",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_rent_kom_price",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"terrasa",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"czokol_podval",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"umnyj_dom",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"garderobnaya",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null}],indexes:[]},{$id:"655b2af75083f6488eff",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"IMAGE_PREVIEW",enabled:!0,documentSecurity:!1,attributes:[{key:"preview_file_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null}],indexes:[]}],buckets:[{$id:"64c4f91c7f9a4458c4bb",$createdAt:"2023-07-29T11:33:48.524+00:00",$updatedAt:"2023-07-29T14:57:21.610+00:00",$permissions:['create("any")','read("any")','update("any")','delete("any")'],fileSecurity:!1,name:"ROOT",enabled:!0,maximumFileSize:3e9,allowedFileExtensions:[],compression:"none",encryption:!0,antivirus:!0}],functions:[{$id:"6513df8529ea78bf2325",name:"BUN_APARTMENT_PAGINATOR",runtime:"node-16.0",execute:["any"],events:[],schedule:"",timeout:30,entrypoint:"src/index.js",ignore:["node_modules",".npm"],path:"functions/bun-apartment-paginator"},{$id:"6513fbd219052f40b1a8",name:"BUN_BID_PAGINATOR",runtime:"node-16.0",execute:["any"],events:[],schedule:"",timeout:30,entrypoint:"src/index.js",ignore:["node_modules",".npm"],path:"functions/bun-bid-paginator"},{$id:"65141fcd03cbb257e5fc",name:"BUN_CONTACT_PAGINATOR",runtime:"node-16.0",events:[],schedule:"",timeout:30,entrypoint:"src/index.js",ignore:["node_modules",".npm"],path:"functions/bun-contact-paginator"},{$id:"6537a4f838968b0c93a9",name:"BUN_TELEGRAPH_INFORMER",runtime:"bun-1.0",execute:[],events:[],schedule:"",timeout:15,enabled:!0,logging:!0,entrypoint:"src/index.js",commands:"bun install",ignore:["node_modules",".npm"],path:"functions/bun-telegraph-informer"},{$id:"6537a4f838968b0c93e9",name:"BUN_TELEGRAM_INFORMER",runtime:"bun-1.0",execute:[],events:[],schedule:"",timeout:15,enabled:!0,logging:!0,entrypoint:"src/index.js",commands:"bun install",ignore:["node_modules",".npm"],path:"functions/bun-telegram-informer"}]},aa={}.CC_FORCE_USE_MICROSERVICES||!1,oa={}.CC_ENABLE_SENTRY||!1,sa={}.CC_HIDE_WATERMARK||!1,ua=function(e){var t=ia.collections.find((function(t){return t.name===e}));if(!t)throw new Error("params.ts collection not found: ".concat(e));return null==t?void 0:t.$id},la=function(e){var t=ia.functions.find((function(t){return t.name===e}));if(!t)throw new Error("params.ts function not found: ".concat(e));return null==t?void 0:t.$id},ca="RealEstate",da=1700,pa=500,ma="/assets",fa={endpoint:{}.CC_APPWRITE_CONFIG_ENDPOINT||"https://cloud.appwrite.io/v1",databaseId:ia.databases[0].$id,projectId:ia.projectId},ha=ia.buckets[0].$id,ya=ua("USER"),va=ua("SETTINGS"),ba=ua("EDITTARGET"),_a=ua("APARTMENT"),ka=ua("CONTACT"),ga=ua("FILES"),xa=ua("IMAGE_PREVIEW"),wa=ua("BIDS"),Sa=ua("DEAL"),za=ua("TASK"),Va=ua("DEAL_HISTORY"),Aa=ua("SERVICE_COMMENT"),Ta=ua("ROLES"),Ca=ua("NOTIFY"),Fa=ua("TASK_HISTORY"),La=ua("ADVERTISING"),Ia=la("BUN_APARTMENT_PAGINATOR"),Ma=la("BUN_CONTACT_PAGINATOR"),ja=la("BUN_BID_PAGINATOR"),Ba=la("BUN_TELEGRAM_INFORMER"),Da=la("BUN_TELEGRAPH_INFORMER"),Ra="databases.*.collections.*.documents.*.update",qa="databases.*.collections.*.documents.*.create",Pa="databases.*.collections.*.documents.*.delete",Ea="telegram",Na="youtube",Oa="instagram",Ua="facebook",Ha=[].concat(["prod_startovaya_czena","prod_czena_sobstvennika","prod_komissiya_agenstva","prod_komissiya_menedzhera","prod_startovaya_czena_valyuta","prod_komissiya_agenstva_unit","prod_komissiya_menedzhera_unit"],["prod_kom_startovaya_czena","prod_kom_czena_sobstvennika","prod_kom_komissiya_agenstva","prod_kom_komissiya_menedzhera","prod_kom_startovaya_czena_valyuta","prod_kom_komissiya_agenstva_unit","prod_kom_komissiya_menedzhera_unit"]),Wa=[].concat(["rent_startovaya_czena","rent_czena_sobstvennika","rent_komissiya_agenstva","rent_komissiya_menedzhera","rent_startovaya_czena_valyuta","rent_komissiya_agenstva_unit","rent_komissiya_menedzhera_unit"],["rent_kom_startovaya_czena","rent_kom_czena_sobstvennika","rent_kom_komissiya_agenstva","rent_kom_komissiya_menedzhera","rent_kom_startovaya_czena_valyuta","rent_kom_komissiya_agenstva_unit","rent_kom_komissiya_menedzhera_unit"]),$a=function(e){var t=o({},e),n=e.system_prod_price_entries||[];Ha.forEach((function(e,r){S.set(t,e,n[r]||"")})),t.system_prod_price_entries=void 0;var r=e.system_rent_price_entries||[];return Wa.forEach((function(e,n){S.set(t,e,r[n]||"")})),t.system_rent_price_entries=void 0,t},Ga=function(e){var t=o({},e);return Ha.forEach((function(e){S.set(t,e,void 0)})),Wa.forEach((function(e){S.set(t,e,void 0)})),t},Ya=function(e){var t=[],n=[];return Ha.forEach((function(n){t.push(S.get(e,n)||"")})),Wa.forEach((function(t){n.push(S.get(e,t)||"")})),{system_prod_price_entries:t,system_rent_price_entries:n}},Ka=function(e){var t=e.$id;return Object.entries(e).map((function(e){var t=i(e,2),n=t[0],r=t[1];return Array.isArray(r)?[n,r.length?r:null]:[n,r]})).reduce((function(e,t){var n=i(t,2),r=n[0],a=n[1];return o(o({},e),{},c({},r,a))}),{id:t})},Xa=function(e){return e.map(Ka)},Ja=function(e){return Object.entries(e).filter((function(e){return"id"!==i(e,1)[0]})).filter((function(e){return!i(e,1)[0].startsWith("$")})).filter((function(e){return!i(e,1)[0].startsWith("system_")})).filter((function(e){return"is_archive"!==i(e,1)[0]})).map((function(e){var t=i(e,2),n=t[0],r=t[1];return Array.isArray(r)?[n,r.length?r:null]:[n,r]})).reduce((function(e,t){var n=i(t,2),r=n[0],a=n[1];return o(o({},e),{},c({},r,a))}),{})};window.toRussian=function(e){return z(e,{engToRus:!0,slug:!0})},window.fromRussian=function(e){return z(e,{slug:!0})};var Za={appwriteService:Symbol.for("appwriteService"),alertService:Symbol.for("alertService"),layoutService:Symbol.for("layoutService"),routerService:Symbol.for("routerService"),errorService:Symbol.for("errorService"),authService:Symbol.for("authService"),dictService:Symbol.for("dictService"),cacheService:Symbol.for("cacheService"),ymapsService:Symbol.for("ymapsService"),loggerService:Symbol.for("loggerService"),realtimeService:Symbol.for("realtimeService"),executionService:Symbol.for("executionService"),previewService:Symbol.for("previewService")},Qa={editTargetService:Symbol.for("editTargetService"),permissionService:Symbol.for("permissionService"),featureService:Symbol.for("featureService"),previewModeService:Symbol.for("previewModeService"),metadataService:Symbol.for("metadataService"),publishService:Symbol.for("publishService"),exchangeService:Symbol.for("exchangeService"),cleanupService:Symbol.for("cleanupService"),dailyNotifyService:Symbol.for("dailyNotifyService"),polishService:Symbol.for("polishService"),visibilityService:Symbol.for("visibilityService")},eo={contactRequestService:Symbol.for("contactRequestService"),dealHistoryRequestService:Symbol.for("dealHistoryRequestService"),dealRequestService:Symbol.for("dealRequestService"),taskRequestService:Symbol.for("taskRequestService"),taskHistoryRequestService:Symbol.for("taskHistoryRequestService"),dashboardRequestService:Symbol.for("dashboardRequestService"),permissionRequestService:Symbol.for("permissionRequestService"),apartmentRequestService:Symbol.for("apartmentRequestService"),bidRequestService:Symbol.for("bidRequestService"),advertisingRequestService:Symbol.for("advertisingRequestService")},to={settingsDbService:Symbol.for("settingsDbService"),userDbService:Symbol.for("userDbService"),apartmentDbService:Symbol.for("apartmentDbService"),bidDbService:Symbol.for("bidDbService"),dealDbService:Symbol.for("dealDbService"),contactDbService:Symbol.for("contactDbService"),dealHistoryDbService:Symbol.for("dealHistoryDbService"),serviceCommentDbService:Symbol.for("serviceCommentDbService"),roleDbService:Symbol.for("roleDbService"),notifyDbService:Symbol.for("notifyDbService"),taskDbService:Symbol.for("taskDbService"),taskHistoryDbService:Symbol.for("taskHistoryDbService"),advertisingDbService:Symbol.for("advertisingDbService")},no={settingsViewService:Symbol.for("settingsViewService"),userViewService:Symbol.for("userViewService"),apartmentViewService:Symbol.for("apartmentViewService"),bidViewService:Symbol.for("bidViewService"),dealViewService:Symbol.for("dealViewService"),contactViewService:Symbol.for("contactViewService"),dealHistoryViewService:Symbol.for("dealHistoryViewService"),serviceCommentViewService:Symbol.for("serviceCommentViewService"),roleViewService:Symbol.for("roleViewService"),notifyViewService:Symbol.for("notifyViewService"),taskViewService:Symbol.for("taskViewService"),taskHistoryViewService:Symbol.for("taskHistoryViewService"),advertisingViewService:Symbol.for("advertisingViewService")},ro=o(o(o(o(o({},Za),eo),to),no),Qa),io="databases.".concat(fa.databaseId,".collections.").concat(_a,".documents"),ao=l((function e(){var n=this;s(this,e),c(this,"reloadSubject",new V),c(this,"updateSubject",new V),c(this,"featureService",A(ro.featureService)),c(this,"metadataService",A(ro.metadataService)),c(this,"exchangeService",A(ro.exchangeService)),c(this,"permissionService",A(ro.permissionService)),c(this,"appwriteService",A(ro.appwriteService)),c(this,"executionService",A(ro.executionService)),c(this,"realtimeService",A(ro.realtimeService)),c(this,"createIndex",r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,_a,[C.limit(1),C.select(["index"])]);case 2:return r=e.sent,i=r.total,e.abrupt("return",i+1);case 5:case"end":return e.stop()}}),e)})))),c(this,"findById",function(){var e=r(t().mark((function e(r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.getDocument(fa.databaseId,_a,r);case 2:return i=e.sent,i=$a(i),e.abrupt("return",Ka(i));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"paginate",function(){var e=r(t().mark((function e(r,i,a,s,u,l){var c;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.executionService.execute(Ia,{filterData:o({_accessLevel:n.featureService.readAccessLevel,_search:u},r),pagination:i,sortModel:a,chips:s,search:u,payload:l});case 2:if((c=e.sent)!==F){e.next=5;break}return e.abrupt("return",{rows:[],total:null});case 5:return e.abrupt("return",{rows:Xa(c.rows).map($a),total:c.total});case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a,o){return e.apply(this,arguments)}}()),c(this,"create",function(){var e=r(t().mark((function e(r){var i,a,s,u,l,c;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.permissionService.getPermissions();case 2:return s=e.sent,e.next=5,n.exchangeService.getApartmentPriceMetadata(r);case 5:return u=e.sent,e.next=8,n.metadataService.getAreaMetadataByApartment(r);case 8:return l=e.sent,e.t0=n.appwriteService.databases,e.t1=fa.databaseId,e.t2=_a,e.t3=n.appwriteService.createId(),e.t4=o,e.t5=o,e.t6=o,e.t7=o(o({},Ja(Ga(r))),Ya(r)),e.t8={},e.next=20,n.featureService.getAccessLevel();case 20:return e.t9=e.sent,e.t10=!(null===(i=r.arenda)||void 0===i||!i.length),e.t11=!(null===(a=r.prodazha)||void 0===a||!a.length),e.t12=n.appwriteService.currentUser.$id,e.t13=s.hasManagerAllObjectsExclusivePermission,e.t14={system_access_level:e.t9,system_is_rent:e.t10,system_is_sell:e.t11,system_created_by:e.t12,system_only_for_owner:e.t13,system_is_archive:!1,system_is_remove:!1},e.t15=u,e.t16=(0,e.t6)(e.t7,e.t8,e.t14,e.t15),e.t17=l,e.t18=(0,e.t5)(e.t16,e.t17),e.t19={},e.next=33,n.createIndex();case 33:return e.t20=e.sent,e.t21={index:e.t20},e.t22=(0,e.t4)(e.t18,e.t19,e.t21),e.next=38,e.t0.createDocument.call(e.t0,e.t1,e.t2,e.t3,e.t22);case 38:return c=e.sent,c=$a(c),e.abrupt("return",Ka(c));case 41:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"update",function(){var e=r(t().mark((function e(r,i){var a,s,u,l,c,d;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.exchangeService.getApartmentPriceMetadata(i);case 2:return u=e.sent,e.next=5,n.metadataService.getAreaMetadataByApartment(i);case 5:return l=e.sent,e.next=8,n.appwriteService.databases.updateDocument(fa.databaseId,_a,r,o(o(o(o({},Ja(Ga(i))),Ya(i)),{},{system_is_rent:!(null===(a=i.arenda)||void 0===a||!a.length),system_is_sell:!(null===(s=i.prodazha)||void 0===s||!s.length)},u),l));case 8:return c=e.sent,d=Ka(c),d=$a(d),n.updateSubject.next([r,d]),e.abrupt("return",d);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"toggleArchive",function(){var e=r(t().mark((function e(r){var i,a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.findById(r);case 2:return i=e.sent,a=i.system_is_archive,e.next=6,n.appwriteService.databases.updateDocument(fa.databaseId,_a,r,{system_is_archive:!a});case 6:o=e.sent,s=Ka(o),s=$a(s),n.updateSubject.next([r,s]),n.reloadSubject.next();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"toggleRemove",function(){var e=r(t().mark((function e(r){var i,a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.findById(r);case 2:return i=e.sent,a=i.system_is_remove,e.next=6,n.appwriteService.databases.updateDocument(fa.databaseId,_a,r,{system_is_remove:!a});case 6:o=e.sent,s=Ka(o),s=$a(s),n.updateSubject.next([r,s]),n.reloadSubject.next();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"toggleOnlyForOwner",function(){var e=r(t().mark((function e(r){var i,a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.findById(r);case 2:return i=e.sent,a=i.system_only_for_owner,e.next=6,n.appwriteService.databases.updateDocument(fa.databaseId,_a,r,{system_only_for_owner:!a});case 6:o=e.sent,s=Ka(o),s=$a(s),n.updateSubject.next([r,s]),n.reloadSubject.next();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"moveToArchive",function(){var e=r(t().mark((function e(r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.updateDocument(fa.databaseId,_a,r,{system_is_archive:!0});case 2:i=e.sent,a=Ka(i),a=$a(a),n.updateSubject.next([r,a]),n.reloadSubject.next();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"updateAllowance",function(){var e=r(t().mark((function e(r,i){var a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.updateDocument(fa.databaseId,_a,r,{system_allowance:i});case 2:a=e.sent,o=Ka(a),o=$a(o),n.updateSubject.next([r,o]),n.reloadSubject.next();case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"remove",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.deleteDocument(fa.databaseId,_a,r);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"prefetch",L(r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.realtimeService.subscribe(io,(function(e){var t=e.events,r=e.payload;if(t.includes(qa)&&n.reloadSubject.next(),t.includes(Pa)&&n.reloadSubject.next(),t.includes(Ra)){var i=Ka(r);i=$a(i),n.updateSubject.next([r.$id,i])}}));case 1:case"end":return e.stop()}}),e)}))))),T(this,{})})),oo=l((function e(){var n=this;s(this,e),c(this,"apartmentDbService",A(ro.apartmentDbService)),c(this,"loggerService",A(ro.loggerService)),c(this,"reloadSubject",this.apartmentDbService.reloadSubject),c(this,"updateSubject",this.apartmentDbService.updateSubject),c(this,"create",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("apartmentViewService create",r),e.next=3,n.apartmentDbService.create(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"update",function(){var e=r(t().mark((function e(r,i){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("apartmentViewService update",i),e.next=3,n.apartmentDbService.update(r,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"toggleArchive",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("apartmentViewService toggleArchive"),e.next=3,n.apartmentDbService.toggleArchive(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"toggleRemove",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("apartmentViewService toggleRemove"),e.next=3,n.apartmentDbService.toggleRemove(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"toggleOnlyForOwner",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("apartmentViewService toggleOnlyForOwner"),e.next=3,n.apartmentDbService.toggleOnlyForOwner(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"moveToArchive",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("apartmentViewService moveToArchive"),e.next=3,n.apartmentDbService.moveToArchive(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"updateAllowance",function(){var e=r(t().mark((function e(r,i){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("apartmentViewService updateAllowance"),e.next=3,n.apartmentDbService.updateAllowance(r,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"remove",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("apartmentViewService remove",{id:r}),e.next=3,n.apartmentDbService.remove(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"read",function(){var e=r(t().mark((function e(r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("apartmentViewService read",{id:r}),e.next=3,n.apartmentDbService.findById(r);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"tryRead",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.loggerService.log("apartmentViewService tryRead",{id:r}),e.prev=1,"create"!==r){e.next=4;break}return e.abrupt("return",null);case 4:if("unknown"!==r){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,n.read(r);case 8:return e.abrupt("return",e.sent);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()),c(this,"paginate",function(){var e=r(t().mark((function e(r,i,a,o,s,u){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("apartmentViewService paginate"),e.next=3,n.apartmentDbService.paginate(r,i,a,o,s,u);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a,o){return e.apply(this,arguments)}}()),T(this,{})})),so=function(){function e(){var n=this;s(this,e),c(this,"cacheService",A(ro.cacheService)),c(this,"_client",null),c(this,"_functions",null),c(this,"_account",null),c(this,"_storage",null),c(this,"_databases",null),c(this,"_session",null),c(this,"_currentUser",null),c(this,"createId",(function(){return I.unique()})),c(this,"getCurrentSession",function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getSession("current");case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()),c(this,"init",L(r(t().mark((function e(){var r,i,a,o,s,u,l,c,d;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fa.endpoint,i=fa.projectId,(a=new E).setEndpoint(r).setProject(i).setLocale("ru-RU"),o=new B(a),s=new D(a),u=new R(a),l=new q(a),e.next=9,n.getCurrentSession(o);case 9:if(!(c=e.sent)){e.next=16;break}return e.next=13,o.get();case 13:e.t0=e.sent,e.next=17;break;case 16:e.t0=null;case 17:d=e.t0,P((function(){n._client=a,n._account=o,n._session=c,n._databases=s,n._functions=u,n._storage=l,n._currentUser=d}));case 19:case"end":return e.stop()}}),e)}))))),c(this,"readFileName",function(){var e=r(t().mark((function e(r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.databases.getDocument(fa.databaseId,ga,r);case 2:return i=e.sent,a=i.name,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"tryReadFileName",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.readFileName(r);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()),c(this,"uploadFile",function(){var e=r(t().mark((function e(r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=w(),e.next=3,n.storage.createFile(ha,i,r);case 3:return e.next=5,n.databases.createDocument(fa.databaseId,ga,i,{name:r.name});case 5:return e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"uploadBlob",function(){var e=r(t().mark((function e(r,i){var a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new File([r],i),e.next=3,n.uploadFile(a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"removeFile",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.storage.deleteFile(ha,r);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"getFileURL",function(){var e=r(t().mark((function e(r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.storage.getFileView(ha,r);case 2:return i=e.sent,e.abrupt("return",i.toString());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"getImageURL",function(){var e=r(t().mark((function e(r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="",e.next=3,n.cacheService.hasImage(r);case 3:if(e.sent){e.next=7;break}return e.next=6,n.getFileURL(r);case 6:i=e.sent;case 7:return e.next=9,n.cacheService.getImage(i,r);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"prefetch",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.init();case 2:case"end":return e.stop()}}),e)})))),T(this,{_client:M,_account:M,_session:M,_databases:M,_functions:M,_storage:M,_currentUser:M,client:j,storage:j,account:j,session:j,databases:j,functions:j,isAuthorized:j,currentUser:j}),this.init()}return l(e,[{key:"client",get:function(){return this._client}},{key:"storage",get:function(){return this._storage}},{key:"account",get:function(){return this._account}},{key:"session",get:function(){return this._session}},{key:"databases",get:function(){return this._databases}},{key:"functions",get:function(){return this._functions}},{key:"isAuthorized",get:function(){return!!this._session}},{key:"currentUser",get:function(){return this._currentUser||{}}}]),e}(),uo={user_role:[],user_features:[],system_is_remove:!1,active:!1,middle_name:"",phone:"",email:"",user_files:[],first_name:"",avatar:"",last_name:"",system_metadata:""},lo=l((function e(){var n=this;s(this,e),c(this,"appwriteService",A(ro.appwriteService)),c(this,"alertService",A(ro.alertService)),c(this,"routerService",A(ro.routerService)),c(this,"tryReadUserData",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.appwriteService.databases.getDocument(fa.databaseId,ya,r);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()),c(this,"initUser",L(function(){var e=r(t().mark((function e(r){var i,a,s,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.tryReadUserData(r.userId);case 2:if(i=e.sent){e.next=12;break}return e.next=6,n.appwriteService.databases.listDocuments(fa.databaseId,ya,[C.limit(1),C.select(["index"])]);case 6:return a=e.sent,s=a.total,e.next=10,n.appwriteService.databases.createDocument(fa.databaseId,ya,r.userId,o(o({},uo),{},{index:s+1}));case 10:return n.routerService.push("/inactive_page"),e.abrupt("return",!1);case 12:if(!(u=n.appwriteService.currentUser.email)||i.email){e.next=16;break}return e.next=16,n.appwriteService.databases.updateDocument(fa.databaseId,ya,r.userId,o(o(o({},uo),Ja(i)),{},{system_metadata:i.system_metadata||"",email:u}));case 16:if(i.active){e.next=19;break}return n.routerService.push("/inactive_page"),e.abrupt("return",!1);case 19:if(!i.system_is_remove){e.next=22;break}return n.routerService.push("/inactive_page"),e.abrupt("return",!1);case 22:return e.abrupt("return",!0);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),c(this,"login",function(){var e=r(t().mark((function e(r){var i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.email,a=r.password,e.prev=1,e.next=4,n.appwriteService.account.createEmailSession(i,a);case 4:return o=e.sent,e.next=7,n.initUser(o);case 7:N(),e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),n.alertService.notify(e.t0.message||"Unknown error"),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()),c(this,"logout",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.appwriteService.account.deleteSession("current");case 3:N(),e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),n.alertService.notify(e.t0.message||"Unknown error"),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))),c(this,"register",function(){var e=r(t().mark((function e(r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.email,a=r.password,e.prev=1,e.next=4,n.appwriteService.account.create(n.appwriteService.createId(),i,a);case 4:N(),e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),n.alertService.notify(e.t0.message||"Unknown error"),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()),c(this,"prefetch",L(r(t().mark((function e(){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.appwriteService.isAuthorized||n.routerService.push("/login_page"),r=n.appwriteService.session,!n.appwriteService.isAuthorized){e.next=5;break}return e.next=5,n.initUser(r);case 5:case"end":return e.stop()}}),e)}))))),T(this,{})})),co=[].concat(["prod_startovaya_czena_ot","prod_startovaya_czena_do","prod_czena_sobstvennika_ot","prod_czena_sobstvennika_do","prod_komissiya_agenstva","prod_komissiya_menedzhera","prod_startovaya_czena_valyuta","prod_komissiya_agenstva_unit","prod_komissiya_menedzhera_unit"],["prod_kom_startovaya_czena_ot","prod_kom_startovaya_czena_do","prod_kom_czena_sobstvennika_ot","prod_kom_czena_sobstvennika_do","prod_kom_komissiya_agenstva","prod_kom_komissiya_menedzhera","prod_kom_startovaya_czena_valyuta","prod_kom_komissiya_agenstva_unit","prod_kom_komissiya_menedzhera_unit"]),po=[].concat(["rent_startovaya_czena_ot","rent_startovaya_czena_do","rent_czena_sobstvennika_ot","rent_czena_sobstvennika_do","rent_komissiya_agenstva","rent_komissiya_menedzhera","rent_startovaya_czena_valyuta","rent_komissiya_agenstva_unit","rent_komissiya_menedzhera_unit"],["rent_kom_startovaya_czena_ot","rent_kom_startovaya_czena_do","rent_kom_czena_sobstvennika_ot","rent_kom_czena_sobstvennika_do","rent_kom_komissiya_agenstva","rent_kom_komissiya_menedzhera","rent_kom_startovaya_czena_valyuta","rent_kom_komissiya_agenstva_unit","rent_kom_komissiya_menedzhera_unit"]),mo=function(e){var t=o({},e),n=e.system_prod_price_entries||[];co.forEach((function(e,r){S.set(t,e,n[r]||"")})),t.system_prod_price_entries=void 0;var r=e.system_rent_price_entries||[];return po.forEach((function(e,n){S.set(t,e,r[n]||"")})),t.system_prod_price_entries=void 0,t},fo=function(e){var t=o({},e);return co.forEach((function(e){S.set(t,e,void 0)})),po.forEach((function(e){S.set(t,e,void 0)})),t},ho=function(e){var t=[],n=[];return co.forEach((function(n){n.endsWith("startovaya_czena_ot")||n.endsWith("startovaya_czena_do")?t.push(""):t.push(S.get(e,n)||"")})),po.forEach((function(t){t.endsWith("startovaya_czena_ot")||t.endsWith("startovaya_czena_do")?n.push(""):n.push(S.get(e,t)||"")})),{system_prod_price_entries:t,system_rent_price_entries:n}},yo="databases.".concat(fa.databaseId,".collections.").concat(wa,".documents"),vo=l((function e(){var n=this;s(this,e),c(this,"reloadSubject",new V),c(this,"updateSubject",new V),c(this,"featureService",A(ro.featureService)),c(this,"metadataService",A(ro.metadataService)),c(this,"exchangeService",A(ro.exchangeService)),c(this,"appwriteService",A(ro.appwriteService)),c(this,"executionService",A(ro.executionService)),c(this,"permissionService",A(ro.permissionService)),c(this,"realtimeService",A(ro.realtimeService)),c(this,"createIndex",r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,wa,[C.limit(1),C.select(["index"])]);case 2:return r=e.sent,i=r.total,e.abrupt("return",i+1);case 5:case"end":return e.stop()}}),e)})))),c(this,"findById",function(){var e=r(t().mark((function e(r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.getDocument(fa.databaseId,wa,r);case 2:return i=e.sent,i=mo(i),e.abrupt("return",Ka(i));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"paginate",function(){var e=r(t().mark((function e(r,i,a,s,u,l){var c;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.executionService.execute(ja,{filterData:o({_accessLevel:n.featureService.readAccessLevel,_search:u},r),pagination:i,sortModel:a,chips:s,search:u,payload:l});case 2:if((c=e.sent)!==F){e.next=5;break}return e.abrupt("return",{rows:[],total:null});case 5:return e.abrupt("return",{rows:Xa(c.rows).map(mo),total:c.total});case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a,o){return e.apply(this,arguments)}}()),c(this,"create",function(){var e=r(t().mark((function e(r){var i,a,s,u,l,c;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.permissionService.getPermissions();case 2:return s=e.sent,e.next=5,n.exchangeService.getBidPriceMetadata(r);case 5:return u=e.sent,e.next=8,n.metadataService.getAreaMetadataByBid(r);case 8:return l=e.sent,e.t0=n.appwriteService.databases,e.t1=fa.databaseId,e.t2=wa,e.t3=n.appwriteService.createId(),e.t4=o,e.t5=o,e.t6=o,e.t7=o(o({},Ja(fo(r))),ho(r)),e.t8={},e.next=20,n.featureService.getAccessLevel();case 20:return e.t9=e.sent,e.t10=!(null===(i=r.arenda)||void 0===i||!i.length),e.t11=!(null===(a=r.prodazha)||void 0===a||!a.length),e.t12=n.appwriteService.currentUser.$id,e.t13=s.hasManagerAllObjectsExclusivePermission,e.t14={system_access_level:e.t9,system_is_rent:e.t10,system_is_sell:e.t11,system_created_by:e.t12,system_only_for_owner:e.t13,system_is_archive:!1},e.t15=u,e.t16=(0,e.t6)(e.t7,e.t8,e.t14,e.t15),e.t17=l,e.t18=(0,e.t5)(e.t16,e.t17),e.t19={},e.next=33,n.createIndex();case 33:return e.t20=e.sent,e.t21={index:e.t20},e.t22=(0,e.t4)(e.t18,e.t19,e.t21),e.next=38,e.t0.createDocument.call(e.t0,e.t1,e.t2,e.t3,e.t22);case 38:return c=e.sent,c=mo(c),e.abrupt("return",Ka(c));case 41:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"update",function(){var e=r(t().mark((function e(r,i){var a,s,u,l,c,d;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.exchangeService.getBidPriceMetadata(i);case 2:return u=e.sent,e.next=5,n.metadataService.getAreaMetadataByBid(i);case 5:return l=e.sent,e.next=8,n.appwriteService.databases.updateDocument(fa.databaseId,wa,r,o(o(o(o({},Ja(fo(i))),ho(i)),{},{system_is_rent:!(null===(a=i.arenda)||void 0===a||!a.length),system_is_sell:!(null===(s=i.prodazha)||void 0===s||!s.length)},u),l));case 8:return c=e.sent,d=Ka(c),d=mo(d),n.updateSubject.next([r,d]),e.abrupt("return",d);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"toggleArchive",function(){var e=r(t().mark((function e(r){var i,a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.findById(r);case 2:return i=e.sent,a=i.system_is_archive,e.next=6,n.appwriteService.databases.updateDocument(fa.databaseId,wa,r,{system_is_archive:!a});case 6:o=e.sent,s=Ka(o),s=mo(s),n.updateSubject.next([r,s]),n.reloadSubject.next();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"toggleOnlyForOwner",function(){var e=r(t().mark((function e(r){var i,a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.findById(r);case 2:return i=e.sent,a=i.system_only_for_owner,e.next=6,n.appwriteService.databases.updateDocument(fa.databaseId,wa,r,{system_only_for_owner:!a});case 6:o=e.sent,s=Ka(o),s=mo(s),n.updateSubject.next([r,s]),n.reloadSubject.next();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"moveToArchive",function(){var e=r(t().mark((function e(r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.updateDocument(fa.databaseId,wa,r,{system_is_archive:!0});case 2:i=e.sent,a=Ka(i),a=mo(a),n.updateSubject.next([r,a]),n.reloadSubject.next();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"updateAllowance",function(){var e=r(t().mark((function e(r,i){var a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.updateDocument(fa.databaseId,wa,r,{system_allowance:i});case 2:a=e.sent,o=Ka(a),o=mo(o),n.updateSubject.next([r,o]),n.reloadSubject.next();case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"remove",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.deleteDocument(fa.databaseId,wa,r);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"prefetch",L(r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.realtimeService.subscribe(yo,(function(e){var t=e.events,r=e.payload;if(t.includes(qa)&&n.reloadSubject.next(),t.includes(Pa)&&n.reloadSubject.next(),t.includes(Ra)){var i=Ka(r);i=mo(i),n.updateSubject.next([r.$id,i])}}));case 1:case"end":return e.stop()}}),e)}))))),T(this,{})})),bo=l((function e(){var n=this;s(this,e),c(this,"bidDbService",A(ro.bidDbService)),c(this,"loggerService",A(ro.loggerService)),c(this,"reloadSubject",this.bidDbService.reloadSubject),c(this,"updateSubject",this.bidDbService.updateSubject),c(this,"create",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("bidViewService create",r),e.next=3,n.bidDbService.create(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"update",function(){var e=r(t().mark((function e(r,i){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("bidViewService update",i),e.next=3,n.bidDbService.update(r,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"updateAllowance",function(){var e=r(t().mark((function e(r,i){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("bidViewService updateAllowance"),e.next=3,n.bidDbService.updateAllowance(r,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"remove",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("bidViewService remove",{id:r}),e.next=3,n.bidDbService.remove(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"toggleArchive",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("bidViewService toggleArchive"),e.next=3,n.bidDbService.toggleArchive(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"toggleOnlyForOwner",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("bidViewService toggleOnlyForOwner"),e.next=3,n.bidDbService.toggleOnlyForOwner(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"moveToArchive",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("bidViewService moveToArchive"),e.next=3,n.bidDbService.moveToArchive(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"read",function(){var e=r(t().mark((function e(r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("bidViewService read",{id:r}),e.next=3,n.bidDbService.findById(r);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"tryRead",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.loggerService.log("bidViewService tryRead",{id:r}),e.prev=1,"create"!==r){e.next=4;break}return e.abrupt("return",null);case 4:if("unknown"!==r){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,n.read(r);case 8:return e.abrupt("return",e.sent);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()),c(this,"paginate",function(){var e=r(t().mark((function e(r,i,a,o,s,u){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("bidViewService paginate"),e.next=3,n.bidDbService.paginate(r,i,a,o,s,u);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a,o){return e.apply(this,arguments)}}()),T(this,{})})),_o="cache",ko="realestate",go=function(e){return new Promise((function(t){var n=document.createElement("img");n.style.position="fixed",n.style.pointerEvents="none",n.style.visibility="hidden",document.body.appendChild(n),n.onload=function(){var e=document.createElement("canvas");e.height=n.height,e.width=n.width;var r=e.getContext("2d");if(!r)return document.body.removeChild(n),void t(null);r.drawImage(n,0,0),e.toBlob((function(e){if(!e)return document.body.removeChild(n),void t(null);document.body.removeChild(n),t(e)}))},n.onerror=function(e){console.error(e),document.body.removeChild(n),t(null)},n.crossOrigin="anonymous",n.src=e}))},xo=l((function e(){var n=this;s(this,e),c(this,"routerService",A(ro.routerService)),c(this,"db",null),c(this,"resourceMap",new Map),c(this,"init",(function(){return new Promise((function(e,t){var r=indexedDB.open(ko,1);r.onupgradeneeded=function(){r.result.createObjectStore(_o)},r.onsuccess=function(){n.db=r.result,n.db.onerror=function(){console.error("Error creating/accessing db")},e()},r.onerror=function(){t()}}))})),c(this,"writeImage",function(){var e=r(t().mark((function e(r,i){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var a=n.db.transaction([_o],"readwrite").objectStore(_o).put(r,i);a.addEventListener("success",(function(){return e()})),a.addEventListener("error",(function(){return t()}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"readImage",(function(e){return new Promise((function(t,r){var i=n.db.transaction([_o],"readonly").objectStore(_o).openCursor(e);i.addEventListener("success",(function(){var e;return t((null===(e=i.result)||void 0===e?void 0:e.value)||null)})),i.addEventListener("error",(function(){return r()}))}))})),c(this,"hasImage",function(){var e=r(t().mark((function e(r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.resourceMap.has(r)){e.next=2;break}return e.abrupt("return",!0);case 2:return e.next=4,n.readImage(r);case 4:if(!(i=e.sent)){e.next=9;break}return a=URL.createObjectURL(i),n.resourceMap.set(r,a),e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"getImage",function(){var e=r(t().mark((function e(r,i){var a,o,s,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=n.resourceMap.get(i))){e.next=3;break}return e.abrupt("return",a);case 3:return e.next=5,n.readImage(i);case 5:if(!(o=e.sent)){e.next=10;break}return s=URL.createObjectURL(o),n.resourceMap.set(i,s),e.abrupt("return",s);case 10:return e.next=12,go(r);case 12:if(!(u=e.sent)){e.next=19;break}return e.next=16,n.writeImage(u,i);case 16:return e.next=18,n.getImage(r,i);case 18:return e.abrupt("return",e.sent);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"collectGarbage",(function(){n.resourceMap.forEach((function(e){var t=i(e,2),r=t[0],a=t[1];URL.revokeObjectURL(a),n.resourceMap.delete(r)}))})),c(this,"cleanup",(function(){return new Promise(function(){var e=r(t().mark((function e(n,r){var i,a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!navigator.storage||!navigator.storage.estimate){e.next=16;break}return e.next=4,navigator.storage.estimate();case 4:if(i=e.sent,a=i.quota,o=i.usage,!a||!o){e.next=16;break}if(!(o/a*100>60)){e.next=14;break}return(s=indexedDB.deleteDatabase(ko)).addEventListener("success",(function(){return n()})),s.addEventListener("error",(function(){return r()})),e.abrupt("return");case 14:return n(),e.abrupt("return");case 16:n(),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(0),console.log("cacheService failed to clear cache"),n();case 23:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t,n){return e.apply(this,arguments)}}())})),c(this,"prefetch",L(r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.cleanup();case 2:return e.next=4,n.init();case 4:case"end":return e.stop()}}),e)}))))),T(this,{})})),wo="databases.".concat(fa.databaseId,".collections.").concat(ka,".documents"),So=l((function e(){var n=this;s(this,e),c(this,"reloadSubject",new V),c(this,"updateSubject",new V),c(this,"featureService",A(ro.featureService)),c(this,"appwriteService",A(ro.appwriteService)),c(this,"executionService",A(ro.executionService)),c(this,"permissionService",A(ro.permissionService)),c(this,"realtimeService",A(ro.realtimeService)),c(this,"getMetadata",function(){var e=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=[]).push(n.fio),r.push(n.telefon),r.push(n.inn),r.push(n.pinfl),e.abrupt("return",r.join(" ").slice(0,1024));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"createIndex",r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,ka,[C.limit(1),C.select(["index"])]);case 2:return r=e.sent,i=r.total,e.abrupt("return",i+1);case 5:case"end":return e.stop()}}),e)})))),c(this,"findById",function(){var e=r(t().mark((function e(r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.getDocument(fa.databaseId,ka,r);case 2:return i=e.sent,e.abrupt("return",Ka(i));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"paginate",function(){var e=r(t().mark((function e(r,i,a,s,u,l){var c;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.executionService.execute(Ma,{filterData:o({_accessLevel:n.featureService.readAccessLevel,_search:u},r),pagination:i,sortModel:a,chips:s,search:u,payload:l});case 2:if((c=e.sent)!==F){e.next=5;break}return e.abrupt("return",{rows:[],total:null});case 5:return e.abrupt("return",{rows:Xa(c.rows),total:c.total});case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a,o){return e.apply(this,arguments)}}()),c(this,"create",function(){var e=r(t().mark((function e(r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.permissionService.getPermissions();case 2:return i=e.sent,e.t0=n.appwriteService.databases,e.t1=fa.databaseId,e.t2=ka,e.t3=n.appwriteService.createId(),e.t4=o,e.t5=o({},Ja(r)),e.t6={},e.next=12,n.getMetadata(r);case 12:return e.t7=e.sent,e.next=15,n.featureService.getAccessLevel();case 15:return e.t8=e.sent,e.t9=n.appwriteService.currentUser.$id,e.t10=i.hasManagerAllObjectsExclusivePermission,e.next=20,n.createIndex();case 20:return e.t11=e.sent,e.t12={system_metadata:e.t7,system_access_level:e.t8,system_created_by:e.t9,system_only_for_owner:e.t10,index:e.t11},e.t13=(0,e.t4)(e.t5,e.t6,e.t12),e.next=25,e.t0.createDocument.call(e.t0,e.t1,e.t2,e.t3,e.t13);case 25:return a=e.sent,e.abrupt("return",Ka(a));case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"update",function(){var e=r(t().mark((function e(r,i){var a,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n.appwriteService.databases,e.t1=fa.databaseId,e.t2=ka,e.t3=r,e.t4=o,e.t5=o({},Ja(i)),e.t6={},e.next=9,n.getMetadata(i);case 9:return e.t7=e.sent,e.t8={system_metadata:e.t7},e.t9=(0,e.t4)(e.t5,e.t6,e.t8),e.next=14,e.t0.updateDocument.call(e.t0,e.t1,e.t2,e.t3,e.t9);case 14:return a=e.sent,s=Ka(a),n.updateSubject.next([r,s]),e.abrupt("return",s);case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"remove",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.deleteDocument(fa.databaseId,ka,r);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"prefetch",L(r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.realtimeService.subscribe(wo,(function(e){var t=e.events,r=e.payload;if(t.includes(qa)&&n.reloadSubject.next(),t.includes(Pa)&&n.reloadSubject.next(),t.includes(Ra)){var i=Ka(r);n.updateSubject.next([r.$id,i])}}));case 1:case"end":return e.stop()}}),e)}))))),T(this,{})})),zo=l((function e(){var n=this;s(this,e),c(this,"appwriteService",A(ro.appwriteService)),c(this,"loggerService",A(ro.loggerService)),c(this,"findDuplicates",function(){var e=r(t().mark((function e(r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("contactRequestService findDuplicates",{telefon:r}),e.next=3,n.appwriteService.databases.listDocuments(fa.databaseId,ka,[C.search("telefon",r)]);case 3:return i=e.sent,e.abrupt("return",{rows:Xa(i.documents),total:i.total});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),x(this)})),Vo=l((function e(){var n=this;s(this,e),c(this,"contactDbService",A(ro.contactDbService)),c(this,"loggerService",A(ro.loggerService)),c(this,"reloadSubject",this.contactDbService.reloadSubject),c(this,"updateSubject",this.contactDbService.updateSubject),c(this,"create",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("contactViewService create",r),e.next=3,n.contactDbService.create(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"update",function(){var e=r(t().mark((function e(r,i){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("contactViewService update",i),e.next=3,n.contactDbService.update(r,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"remove",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("contactViewService remove",{id:r}),e.next=3,n.contactDbService.remove(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"read",function(){var e=r(t().mark((function e(r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("contactViewService read",{id:r}),e.next=3,n.contactDbService.findById(r);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"tryRead",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.loggerService.log("contactViewService tryRead",{id:r}),e.prev=1,"create"!==r){e.next=4;break}return e.abrupt("return",null);case 4:if("unknown"!==r){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,n.read(r);case 8:return e.abrupt("return",e.sent);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()),c(this,"paginate",function(){var e=r(t().mark((function e(r,i,a,o,s,u){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("contactViewService paginate"),e.next=3,n.contactDbService.paginate(r,i,a,o,s,u);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a,o){return e.apply(this,arguments)}}()),T(this,{})})),Ao="1970-01-01",To=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f(),t=f(Ao);return e.diff(t,"day")},Co=function(e){var t=To();return Fo(t+e).utc().format()},Fo=function(e){return f(Ao).add(e,"day")},Lo=function(e){return f().set("hour",0).set("minute",0).add(e,"minute")};window.getMomentStamp=To,window.fromMomentStamp=Fo,window.getUtcOffset=Co;var Io={"last-month":Co(-31),"last-three-months":Co(-93),"last-year":Co(-365),"last-day":Co(-1),"last-week":Co(-7)},Mo=l((function e(){var n=this;s(this,e),c(this,"appwriteService",A(ro.appwriteService)),c(this,"getNewBidsCountByUserId",function(){var e=r(t().mark((function e(r,i){var a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,wa,[C.limit(1),C.select(["index"]),C.greaterThanEqual("$createdAt",Io[r]),C.equal("system_created_by",i)]);case 2:return a=e.sent,o=a.total,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"getNewBidsCount",function(){var e=r(t().mark((function e(r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,wa,[C.limit(1),C.select(["index"]),C.greaterThanEqual("$createdAt",Io[r])]);case 2:return i=e.sent,a=i.total,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"getNewApartmentCount",function(){var e=r(t().mark((function e(r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,_a,[C.limit(1),C.select(["index"]),C.greaterThanEqual("$createdAt",Io[r])]);case 2:return i=e.sent,a=i.total,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"getNewApartmentCountByUserId",function(){var e=r(t().mark((function e(r,i){var a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,_a,[C.limit(1),C.select(["index"]),C.greaterThanEqual("$createdAt",Io[r]),C.equal("system_created_by",i)]);case 2:return a=e.sent,o=a.total,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"getDealsInProgressCount",function(){var e=r(t().mark((function e(r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,Sa,[C.limit(1),C.select(["index"]),C.greaterThanEqual("$createdAt",Io[r]),C.notEqual("status","Закрытая сделка"),C.notEqual("status","Сделка сорвана")]);case 2:return i=e.sent,a=i.total,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"getDealsInProgressCountUserId",function(){var e=r(t().mark((function e(r,i){var a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,Sa,[C.limit(1),C.select(["index"]),C.greaterThanEqual("$createdAt",Io[r]),C.notEqual("status","Закрытая сделка"),C.notEqual("status","Сделка сорвана"),C.equal("user_id",i)]);case 2:return a=e.sent,o=a.total,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"getDealsByStatusCount",function(){var e=r(t().mark((function e(r,i){var a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,Sa,[C.limit(1),C.select(["index"]),C.greaterThanEqual("$createdAt",Io[r]),C.equal("status",i)]);case 2:return a=e.sent,o=a.total,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"getDealsByStatusByUserCount",function(){var e=r(t().mark((function e(r,i,a){var o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,Sa,[C.limit(1),C.select(["index"]),C.greaterThanEqual("$createdAt",Io[r]),C.equal("status",i),C.equal("user_id",a)]);case 2:return o=e.sent,s=o.total,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),c(this,"getDoneDealsByUserCount",function(){var e=r(t().mark((function e(r,i){var a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,Sa,[C.limit(1),C.select(["index"]),C.greaterThanEqual("$createdAt",Io[r]),C.equal("user_id",i),C.equal("status","Закрытая сделка")]);case 2:return a=e.sent,o=a.total,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"getTasksByStamp",function(){var e=r(t().mark((function e(r,i){var a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,za,[C.greaterThanEqual("moment_stamp",r),C.lessThanEqual("moment_stamp",i)]);case 2:return a=e.sent,o=a.documents,e.abrupt("return",Xa(o));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"getMyTasksByStamp",function(){var e=r(t().mark((function e(r,i){var a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.appwriteService.currentUser.$id,e.next=3,n.appwriteService.databases.listDocuments(fa.databaseId,za,[C.greaterThanEqual("moment_stamp",r),C.lessThanEqual("moment_stamp",i),C.equal("to_user_id",a)]);case 3:return o=e.sent,s=o.documents,e.abrupt("return",Xa(s));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),T(this,{})})),jo=5e3,Bo=O(function(){var e=r(t().mark((function e(n,r,a,o){var s,u,l;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Fl.appwriteService.databases.listDocuments(fa.databaseId,n,[C.orderDesc("$updatedAt")].concat(p(o?[C.cursorAfter(o)]:[]),[C.limit(r)],p(a))),U(100)]);case 2:return s=e.sent,u=i(s,1),l=u[0],e.abrupt("return",l);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()),Do=function(){var e,n=(e=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t().mark((function r(){var i,a,o,s,u,l,c,d,p,f;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=0,a=null,o=Bo(e,jo,n,null);case 3:if(!(i<1e4)){t.next=49;break}return console.log("Fetching collection ".concat(e," from ").concat(e," starting from ").concat(a||0)),t.next=7,new _(o,0);case 7:s=t.sent,u=m(s.documents),t.prev=9,u.s();case 11:if((l=u.n()).done){t.next=17;break}return c=l.value,t.next=15,c;case 15:t.next=11;break;case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(9),u.e(t.t0);case 22:return t.prev=22,u.f(),t.finish(22);case 25:if(!(s.documents.length<jo)){t.next=27;break}return t.abrupt("break",49);case 27:a=s.documents[s.documents.length-1].$id,o=Bo(e,jo,n,a),d=m(s.documents),t.prev=30,d.s();case 32:if((p=d.n()).done){t.next=38;break}return f=p.value,t.next=36,f;case 36:t.next=32;break;case 38:t.next=43;break;case 40:t.prev=40,t.t1=t.catch(30),d.e(t.t1);case 43:return t.prev=43,d.f(),t.finish(43);case 46:i+=s.documents.length,t.next=3;break;case 49:case"end":return t.stop()}}),r,null,[[9,19,22,25],[30,40,43,46]])}))()},function(){return new b(e.apply(this,arguments))});return function(e){return n.apply(this,arguments)}}();window.listDocuments=Do;var Ro,qo,Po=function(){var e=r(t().mark((function e(n){var r,i,a,o,s,u,l;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],i=!1,a=!1,e.prev=3,s=y(n);case 5:return e.next=7,s.next();case 7:if(!(i=!(u=e.sent).done)){e.next=13;break}l=u.value,r.push(l);case 10:i=!1,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),a=!0,o=e.t0;case 19:if(e.prev=19,e.prev=20,!i||null==s.return){e.next=24;break}return e.next=24,s.return();case 24:if(e.prev=24,!a){e.next=27;break}throw o;case 27:return e.finish(24);case 28:return e.finish(19);case 29:return e.abrupt("return",r);case 30:case"end":return e.stop()}}),e,null,[[3,15,19,29],[20,,24,28]])})));return function(t){return e.apply(this,arguments)}}(),Eo=["Новая сделка","В работе","Показы","Переговоры","Задаток/Залог","Оформление","Оплата","Закрытая сделка","Сделка сорвана"],No=["Аренда","Продажа"],Oo="databases.".concat(fa.databaseId,".collections.").concat(Sa,".documents"),Uo=l((function e(){var n=this;s(this,e),c(this,"reloadSubject",new V),c(this,"createSubject",new V),c(this,"removeSubject",new V),c(this,"updateSubject",new V),c(this,"appwriteService",A(ro.appwriteService)),c(this,"realtimeService",A(ro.realtimeService)),c(this,"createIndex",r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,Sa,[C.limit(1),C.select(["index"])]);case 2:return r=e.sent,i=r.total,e.abrupt("return",i+1);case 5:case"end":return e.stop()}}),e)})))),c(this,"findByContactId",function(){var e=r(t().mark((function e(r){var a,o,s,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,Sa,[C.limit(1),C.equal("contact_id",r),C.notEqual("status","Сделка сорвана"),C.notEqual("status","Закрытая сделка"),C.orderDesc("$createdAt")]);case 2:if(a=e.sent,o=i(a.documents,1),s=o[0],u=void 0===s?null:s){e.next=8;break}throw new Error("dealDbService findByContactId document not found");case 8:return e.abrupt("return",Ka(u));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findOccupiedByTargetApartmentId",function(){var e=r(t().mark((function e(r){var a,o,s,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,Sa,[C.limit(1),C.equal("target_apartment_id",r),C.notEqual("status","Сделка сорвана"),C.notEqual("status","Закрытая сделка"),C.orderDesc("$createdAt")]);case 2:return a=e.sent,o=i(a.documents,1),s=o[0],u=void 0===s?null:s,e.abrupt("return",u?Ka(u):null);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findOccupiedByApartmentId",function(){var e=r(t().mark((function e(r){var a,o,s,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,Sa,[C.limit(1),C.equal("apartment_id",r),C.notEqual("status","Сделка сорвана"),C.notEqual("status","Закрытая сделка"),C.orderDesc("$createdAt")]);case 2:return a=e.sent,o=i(a.documents,1),s=o[0],u=void 0===s?null:s,e.abrupt("return",u?Ka(u):null);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findOccupiedByTagetBidId",function(){var e=r(t().mark((function e(r){var a,o,s,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,Sa,[C.limit(1),C.equal("target_bid_id",r),C.notEqual("status","Сделка сорвана"),C.notEqual("status","Закрытая сделка"),C.orderDesc("$createdAt")]);case 2:return a=e.sent,o=i(a.documents,1),s=o[0],u=void 0===s?null:s,e.abrupt("return",u?Ka(u):null);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findOccupiedByBidId",function(){var e=r(t().mark((function e(r){var a,o,s,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,Sa,[C.limit(1),C.equal("bid_id",r),C.notEqual("status","Сделка сорвана"),C.notEqual("status","Закрытая сделка"),C.orderDesc("$createdAt")]);case 2:return a=e.sent,o=i(a.documents,1),s=o[0],u=void 0===s?null:s,e.abrupt("return",u?Ka(u):null);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findByApartmentId",function(){var e=r(t().mark((function e(r){var a,o,s,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,Sa,[C.limit(1),C.equal("apartment_id",r),C.notEqual("status","Сделка сорвана"),C.notEqual("status","Закрытая сделка"),C.orderDesc("$createdAt")]);case 2:if(a=e.sent,o=i(a.documents,1),s=o[0],u=void 0===s?null:s){e.next=8;break}throw new Error("dealDbService findByApartmentId document not found");case 8:return e.abrupt("return",Ka(u));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findByBidId",function(){var e=r(t().mark((function e(r){var a,o,s,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,Sa,[C.limit(1),C.equal("bid_id",r),C.notEqual("status","Сделка сорвана"),C.notEqual("status","Закрытая сделка"),C.orderDesc("$createdAt")]);case 2:if(a=e.sent,o=i(a.documents,1),s=o[0],u=void 0===s?null:s){e.next=8;break}throw new Error("dealDbService findByBidId document not found");case 8:return e.abrupt("return",Ka(u));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findById",function(){var e=r(t().mark((function e(r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.getDocument(fa.databaseId,Sa,r);case 2:return i=e.sent,e.abrupt("return",Ka(i));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findByDealStatus",function(){var e=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Po(Do(Sa,[C.equal("status",n)]));case 2:return r=e.sent,e.abrupt("return",Xa(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"create",function(){var e=r(t().mark((function e(r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n.appwriteService.databases,e.t1=fa.databaseId,e.t2=Sa,e.t3=n.appwriteService.createId(),e.t4=o,e.t5=o({},Ja(r)),e.t6={},e.next=9,n.createIndex();case 9:return e.t7=e.sent,e.t8={index:e.t7},e.t9=(0,e.t4)(e.t5,e.t6,e.t8),e.next=14,e.t0.createDocument.call(e.t0,e.t1,e.t2,e.t3,e.t9);case 14:return i=e.sent,a=Ka(i),n.createSubject.next(a),e.abrupt("return",a);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"update",function(){var e=r(t().mark((function e(r,i){var a,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.updateDocument(fa.databaseId,Sa,r,o({},Ja(i)));case 2:return a=e.sent,s=Ka(a),n.updateSubject.next([r,s]),e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"remove",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.deleteDocument(fa.databaseId,Sa,r);case 2:n.removeSubject.next(r);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"prefetch",L((function(){var e=function(){var e=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.realtimeService.subscribe(Oo,(function(e){var t=e.events,r=e.payload;if(t.includes(qa)){var i=Ka(r);n.reloadSubject.next(),n.createSubject.next(i)}if(t.includes(Pa)&&(n.reloadSubject.next(),n.removeSubject.next(r.$id)),t.includes(Ra)){var a=Ka(r);n.updateSubject.next([r.$id,a])}}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}))),T(this,{})})),Ho="databases.".concat(fa.databaseId,".collections.").concat(Va,".documents"),Wo=l((function e(){var n=this;s(this,e),c(this,"createSubject",new V),c(this,"reloadSubject",new V),c(this,"updateSubject",new V),c(this,"appwriteService",A(ro.appwriteService)),c(this,"realtimeService",A(ro.realtimeService)),c(this,"findById",function(){var e=r(t().mark((function e(r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.getDocument(fa.databaseId,Va,r);case 2:return i=e.sent,e.abrupt("return",Ka(i));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findByContactId",function(){var e=r(t().mark((function e(r){var a,o,s,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,Va,[C.limit(1),C.equal("contact_id",r),C.orderDesc("$createdAt")]);case 2:if(a=e.sent,o=i(a.documents,1),s=o[0],u=void 0===s?null:s){e.next=8;break}throw new Error("dealHistoryDbService findByContactId document not found");case 8:return e.abrupt("return",Ka(u));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findByApartmentId",function(){var e=r(t().mark((function e(r){var a,o,s,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,Va,[C.limit(1),C.equal("apartment_id",r),C.orderDesc("$createdAt")]);case 2:if(a=e.sent,o=i(a.documents,1),s=o[0],u=void 0===s?null:s){e.next=8;break}throw new Error("dealHistoryDbService findByApartmentId document not found");case 8:return e.abrupt("return",Ka(u));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findByBidId",function(){var e=r(t().mark((function e(r){var a,o,s,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,Va,[C.limit(1),C.equal("bid_id",r),C.orderDesc("$createdAt")]);case 2:if(a=e.sent,o=i(a.documents,1),s=o[0],u=void 0===s?null:s){e.next=8;break}throw new Error("dealHistoryDbService findByBidId document not found");case 8:return e.abrupt("return",Ka(u));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"create",function(){var e=r(t().mark((function e(r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.createDocument(fa.databaseId,Va,n.appwriteService.createId(),Ja(r));case 2:return i=e.sent,e.abrupt("return",Ka(i));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"update",function(){var e=r(t().mark((function e(r,i){var a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.updateDocument(fa.databaseId,Va,r,Ja(i));case 2:return a=e.sent,e.abrupt("return",Ka(a));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"remove",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.deleteDocument(fa.databaseId,Va,r);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findAllByApartmentId",function(){var e=r(t().mark((function e(r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,Va,[C.orderDesc("$createdAt"),C.equal("apartment_id",r)]);case 2:return i=e.sent,a=i.documents,e.abrupt("return",Xa(a));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findAllByContactId",function(){var e=r(t().mark((function e(r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,Va,[C.orderDesc("$createdAt"),C.equal("contact_id",r)]);case 2:return i=e.sent,a=i.documents,e.abrupt("return",Xa(a));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findAllByBidId",function(){var e=r(t().mark((function e(r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,Va,[C.orderDesc("$createdAt"),C.equal("bid_id",r)]);case 2:return i=e.sent,a=i.documents,e.abrupt("return",Xa(a));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"prefetch",L(r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.realtimeService.subscribe(Ho,(function(e){var t=e.events,r=e.payload;if(t.includes(qa)&&(n.reloadSubject.next(),n.createSubject.next(r)),t.includes(Pa)&&n.reloadSubject.next(),t.includes(Ra)){var i=Ka(r);n.updateSubject.next([r.$id,i])}}));case 1:case"end":return e.stop()}}),e)}))))),T(this,{})})),$o="deal-begin",Go="deal-end",Yo="deal-reassign",Ko="deal-status",Xo=l((function e(){var n=this;s(this,e),c(this,"dealHistoryViewService",A(ro.dealHistoryViewService)),c(this,"dealViewService",A(ro.dealViewService)),c(this,"contactViewService",A(ro.contactViewService)),c(this,"apartmentViewService",A(ro.apartmentViewService)),c(this,"bidViewService",A(ro.bidViewService)),c(this,"appwriteService",A(ro.appwriteService)),c(this,"loggerService",A(ro.loggerService)),c(this,"layoutService",A(ro.layoutService)),c(this,"readDealStateByApartment",function(){var e=r(t().mark((function e(r,a){var o,s,u,l,c,d,p,h,y,v,b,_,k,g,x,w,S,z,V;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("dealHistoryRequestService readDealStateByApartment",{apartmentId:r,userId:a}),e.next=3,n.appwriteService.databases.listDocuments(fa.databaseId,Va,[C.limit(1),C.equal("apartment_id",r),C.equal("type",Go),C.orderDesc("$createdAt")]);case 3:return o=e.sent,s=o.documents,e.next=7,n.appwriteService.databases.listDocuments(fa.databaseId,Va,[C.limit(1),C.equal("apartment_id",r),C.equal("type",$o),C.orderDesc("$createdAt")]);case 7:if(u=e.sent,l=u.documents,c=i(s,1),d=c[0],p=void 0===d?null:d,h=i(l,1),y=h[0],v=void 0===y?null:y,b=function(){if(!v)return Go;if(!p)return $o;var e=f(v.$createdAt),t=f(p.$createdAt);return e.isAfter(t)?$o:Go}(),_=[],!v||b!==$o){e.next=21;break}return e.next=17,n.appwriteService.databases.listDocuments(fa.databaseId,Va,[C.equal("apartment_id",r),C.cursorBefore(v.$id),C.orderDesc("$createdAt")]);case 17:k=e.sent,g=k.documents,x=m(g);try{for(x.s();!(w=x.n()).done;)(S=w.value).type===Yo&&_.push(S)}catch(t){x.e(t)}finally{x.f()}case 21:if(z=_[0],!(V=void 0===z?null:z)||!v){e.next=25;break}return _.unshift(v),e.abrupt("return",{status:Yo,activeItem:V,reassign:_});case 25:return e.abrupt("return",{status:b,activeItem:b===$o?v:null,reassign:_});case 26:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"commitApartmentDealBegin",function(){var e=r(t().mark((function e(r,i,a,o,s,u){var l,c,d,p,m,f,h,y,v;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("dealHistoryRequestService commitApartmentDealBegin",{apartmentId:r,userId:i}),e.next=3,n.readDealStateByApartment(r,i);case 3:if(e.sent.status===Go){e.next=6;break}throw new Error("commitApartmentDealBegin invalid state");case 6:return l=["<pre>","Создана сделка <text-underline>".concat(a,"</text-underline>"),u?"Комментарий: ".concat(u):"","</pre>"].join("\n"),e.next=9,n.apartmentViewService.read(r);case 9:return c=e.sent,d=c.contact_id,e.next=13,n.contactViewService.read(d);case 13:return p=e.sent,m=p.fio,f=p.telefon,h=p.tip_klienta,e.next=19,n.dealViewService.create({status:"Новая сделка",apartment_id:r,contact_id:d,bid_id:null,type:a,user_id:i,price:o,price_unit:s,target_apartment_id:null,target_bid_id:null,fio:m,telefon:f,tip_klienta:h?h[0]:""});case 19:return y=e.sent,v=y.id,e.next=23,n.dealHistoryViewService.create({deal_id:v,apartment_id:r,contact_id:d,user_id:i,type:$o,comment:l,bid_id:null,payload:null});case 23:n.layoutService.reloadOutlet();case 24:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a,o){return e.apply(this,arguments)}}()),c(this,"commitApartmentDealEnd",function(){var e=r(t().mark((function e(r,i,a,o){var s,u,l;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("dealHistoryRequestService commitApartmentDealEnd",{apartmentId:r,userId:i}),e.next=3,n.readDealStateByApartment(r,i);case 3:if((s=e.sent).status===$o||s.status===Yo){e.next=6;break}throw new Error("commitApartmentDealEnd invalid state");case 6:if(s.activeItem){e.next=8;break}throw new Error("commitApartmentDealBegin activeItem is null");case 8:return e.next=10,n.dealHistoryViewService.create({contact_id:s.activeItem.contact_id,apartment_id:r,user_id:i,deal_id:s.activeItem.deal_id,type:Go,comment:a,bid_id:null,payload:null});case 10:if(!o){e.next=20;break}return e.next=13,n.dealViewService.read(s.activeItem.deal_id);case 13:return u=e.sent,l=u.target_bid_id,e.next=17,n.apartmentViewService.moveToArchive(r);case 17:if(!l){e.next=20;break}return e.next=20,n.bidViewService.moveToArchive(l);case 20:n.layoutService.reloadOutlet();case 21:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()),c(this,"commitApartmentDealReassign",function(){var e=r(t().mark((function e(r,i){var a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("dealHistoryRequestService commitApartmentDealReassign",{apartmentId:r,userId:i}),e.next=3,n.readDealStateByApartment(r,i);case 3:if((a=e.sent).status===$o||a.status===Yo){e.next=6;break}throw new Error("commitApartmentDealBegin invalid state");case 6:if(a.activeItem){e.next=8;break}throw new Error("commitApartmentDealBegin activeItem is null");case 8:return e.next=10,Promise.all([n.dealHistoryViewService.create({contact_id:a.activeItem.contact_id,apartment_id:r,user_id:i,deal_id:a.activeItem.deal_id,type:Yo,comment:"",bid_id:null,payload:null}),n.dealViewService.update(a.activeItem.deal_id,{user_id:i})]);case 10:n.layoutService.reloadOutlet();case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"readDealStateByBid",function(){var e=r(t().mark((function e(r,a){var o,s,u,l,c,d,p,h,y,v,b,_,k,g,x,w,S,z,V;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("dealHistoryRequestService readDealStateByBid",{bidId:r,userId:a}),e.next=3,n.appwriteService.databases.listDocuments(fa.databaseId,Va,[C.limit(1),C.equal("bid_id",r),C.equal("type",Go),C.orderDesc("$createdAt")]);case 3:return o=e.sent,s=o.documents,e.next=7,n.appwriteService.databases.listDocuments(fa.databaseId,Va,[C.limit(1),C.equal("bid_id",r),C.equal("type",$o),C.orderDesc("$createdAt")]);case 7:if(u=e.sent,l=u.documents,c=i(s,1),d=c[0],p=void 0===d?null:d,h=i(l,1),y=h[0],v=void 0===y?null:y,b=function(){if(!v)return Go;if(!p)return $o;var e=f(v.$createdAt),t=f(p.$createdAt);return e.isAfter(t)?$o:Go}(),_=[],!v||b!==$o){e.next=21;break}return e.next=17,n.appwriteService.databases.listDocuments(fa.databaseId,Va,[C.equal("bid_id",r),C.cursorBefore(v.$id),C.orderDesc("$createdAt")]);case 17:k=e.sent,g=k.documents,x=m(g);try{for(x.s();!(w=x.n()).done;)(S=w.value).type===Yo&&_.push(S)}catch(t){x.e(t)}finally{x.f()}case 21:if(z=_[0],!(V=void 0===z?null:z)||!v){e.next=25;break}return _.unshift(v),e.abrupt("return",{status:Yo,activeItem:V,reassign:_});case 25:return e.abrupt("return",{status:b,activeItem:b===$o?v:null,reassign:_});case 26:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"commitBidDealBegin",function(){var e=r(t().mark((function e(r,i,a,o,s,u){var l,c,d,p,m,f,h,y,v;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("dealHistoryRequestService commitBidDealBegin",{bidId:r,userId:i}),e.next=3,n.readDealStateByBid(r,i);case 3:if(e.sent.status===Go){e.next=6;break}throw new Error("commitApartmentDealBegin invalid state");case 6:return e.next=8,n.bidViewService.read(r);case 8:return l=e.sent,c=l.contact_id,e.next=12,n.contactViewService.read(c);case 12:return d=e.sent,p=d.fio,m=d.telefon,f=d.tip_klienta,e.next=18,n.dealViewService.create({status:"Новая сделка",bid_id:r,apartment_id:null,contact_id:c,target_apartment_id:null,target_bid_id:null,type:a,user_id:i,price:o,price_unit:s,fio:p,telefon:m,tip_klienta:f?f[0]:""});case 18:return h=e.sent,y=h.id,v=["<pre>","Создана сделка <text-underline>".concat(a,"</text-underline>"),u?"Комментарий: ".concat(u):"","</pre>"].join("\n"),e.next=23,n.dealHistoryViewService.create({bid_id:r,user_id:i,deal_id:y,type:$o,comment:v,contact_id:c,apartment_id:null,payload:null});case 23:n.layoutService.reloadOutlet();case 24:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a,o){return e.apply(this,arguments)}}()),c(this,"commitBidDealEnd",function(){var e=r(t().mark((function e(r,i,a,o){var s,u,l;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("dealHistoryRequestService commitBidDealEnd",{bidId:r,userId:i}),e.next=3,n.readDealStateByBid(r,i);case 3:if((s=e.sent).status===$o||s.status===Yo){e.next=6;break}throw new Error("commitBidDealEnd invalid state");case 6:if(s.activeItem){e.next=8;break}throw new Error("commitBidDealEnd activeItem is null");case 8:return e.next=10,n.dealHistoryViewService.create({bid_id:r,user_id:i,type:Go,deal_id:s.activeItem.deal_id,comment:a,contact_id:s.activeItem.contact_id,apartment_id:null,payload:null});case 10:if(!o){e.next=20;break}return e.next=13,n.dealViewService.read(s.activeItem.deal_id);case 13:return u=e.sent,l=u.target_apartment_id,e.next=17,n.bidViewService.moveToArchive(r);case 17:if(!l){e.next=20;break}return e.next=20,n.apartmentViewService.moveToArchive(l);case 20:n.layoutService.reloadOutlet();case 21:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()),c(this,"commitBidDealReassign",function(){var e=r(t().mark((function e(r,i){var a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("dealHistoryRequestService commitBidDealReassign",{bidId:r,userId:i}),e.next=3,n.readDealStateByBid(r,i);case 3:if((a=e.sent).status===$o||a.status===Yo){e.next=6;break}throw new Error("commitApartmentDealBegin invalid state");case 6:if(a.activeItem){e.next=8;break}throw new Error("commitApartmentDealBegin activeItem is null");case 8:return e.next=10,Promise.all([n.dealHistoryViewService.create({bid_id:r,user_id:i,type:Yo,deal_id:a.activeItem.deal_id,contact_id:a.activeItem.contact_id,comment:"",apartment_id:null,payload:null}),n.dealViewService.update(a.activeItem.deal_id,{user_id:i})]);case 10:n.layoutService.reloadOutlet();case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"commitDealStatusByApartment",function(){var e=r(t().mark((function e(r,i,a,o){var s,u,l,c,d;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("dealHistoryRequestService commitDealStatusByApartment",{apartmentId:r}),e.next=3,n.dealHistoryViewService.findByApartmentId(r);case 3:if(s=e.sent,u=s.deal_id,l=s.contact_id,c=n.appwriteService.currentUser.$id,d=["<pre>","Статус изменен из <text-underline>".concat(i,"</text-underline> в <text-underline>").concat(a,"</text-underline>"),o?"Комментарий: ".concat(o):"","</pre>"].join("\n"),"Закрытая сделка"!==a&&"Сделка сорвана"!==a){e.next=12;break}return e.next=11,n.commitApartmentDealEnd(r,c,d,"Закрытая сделка"===a);case 11:return e.abrupt("return");case 12:return e.next=14,n.dealHistoryViewService.create({contact_id:l,bid_id:null,user_id:c,type:Ko,deal_id:u,comment:d,apartment_id:r,payload:null});case 14:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()),c(this,"commitDealStatusByBid",function(){var e=r(t().mark((function e(r,i,a,o){var s,u,l,c,d;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("dealHistoryRequestService commitDealStatusByBid",{bidId:r}),e.next=3,n.dealHistoryViewService.findByBidId(r);case 3:if(s=e.sent,u=s.deal_id,l=s.contact_id,c=n.appwriteService.currentUser.$id,d=["<pre>","Статус изменен из <text-underline>".concat(i,"</text-underline> в <text-underline>").concat(a,"</text-underline>"),o?"Комментарий: ".concat(o):"","</pre>"].join("\n"),"Закрытая сделка"!==a&&"Сделка сорвана"!==a){e.next=12;break}return e.next=11,n.commitBidDealEnd(r,c,d,"Закрытая сделка"===a);case 11:return e.abrupt("return");case 12:return e.next=14,n.dealHistoryViewService.create({bid_id:r,user_id:c,type:Ko,deal_id:u,comment:d,contact_id:l,apartment_id:null,payload:null});case 14:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()),T(this,{})})),Jo=l((function e(){var n=this;s(this,e),c(this,"dealHistoryDbService",A(ro.dealHistoryDbService)),c(this,"loggerService",A(ro.loggerService)),c(this,"createSubject",this.dealHistoryDbService.createSubject),c(this,"reloadSubject",this.dealHistoryDbService.reloadSubject),c(this,"updateSubject",this.dealHistoryDbService.updateSubject),c(this,"create",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("dealHistoryViewService create",r),e.next=3,n.dealHistoryDbService.create(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"update",function(){var e=r(t().mark((function e(r,i){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("dealHistoryViewService update",i),e.next=3,n.dealHistoryDbService.update(r,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"remove",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("dealHistoryViewService remove",{id:r}),e.next=3,n.dealHistoryDbService.remove(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"read",function(){var e=r(t().mark((function e(r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("dealHistoryViewService read",{id:r}),e.next=3,n.dealHistoryDbService.findById(r);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findByApartmentId",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("dealHistoryViewService findByApartmentId"),e.next=3,n.dealHistoryDbService.findByApartmentId(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findByBidId",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("dealHistoryViewService findByBidId"),e.next=3,n.dealHistoryDbService.findByBidId(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findByContactId",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("dealHistoryViewService findByContactId"),e.next=3,n.dealHistoryDbService.findByContactId(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findAllByApartmentId",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.loggerService.log("dealHistoryViewService findAllByApartmentId"),r){e.next=3;break}throw new Error("dealHistoryViewService findAllByApartmentId id is null");case 3:return e.next=5,n.dealHistoryDbService.findAllByApartmentId(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findAllByBidId",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.loggerService.log("dealHistoryViewService findAllByBidId"),r){e.next=3;break}throw new Error("dealHistoryViewService findAllByBidId id is null");case 3:return e.next=5,n.dealHistoryDbService.findAllByBidId(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findAllByContactId",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.loggerService.log("dealHistoryViewService findAllByContactId"),r){e.next=3;break}throw new Error("dealHistoryViewService findAllByContactId id is null");case 3:return e.next=5,n.dealHistoryDbService.findAllByContactId(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"tryRead",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.loggerService.log("dealHistoryViewService tryRead",{id:r}),e.prev=1,"create"!==r){e.next=4;break}return e.abrupt("return",null);case 4:if("unknown"!==r){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,n.read(r);case 8:return e.abrupt("return",e.sent);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()),T(this,{})})),Zo=l((function e(){var n=this;s(this,e),c(this,"dealHistoryRequestService",A(ro.dealHistoryRequestService)),c(this,"dealViewService",A(ro.dealViewService)),c(this,"commidDealHistoryInternal",function(){var e=r(t().mark((function e(r,i,a,o,s){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!r){e.next=5;break}return e.next=4,n.dealHistoryRequestService.commitDealStatusByApartment(r,a,o,s);case 4:return e.abrupt("return");case 5:if(!i){e.next=9;break}return e.next=8,n.dealHistoryRequestService.commitDealStatusByBid(i,a,o,s);case 8:return e.abrupt("return");case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n,r,i,a){return e.apply(this,arguments)}}()),c(this,"commitDealStatusChange",function(){var e=r(t().mark((function e(r,i,a,o,s,u,l,c){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.commidDealHistoryInternal(i,a,u,l,c),n.dealViewService.update(r,{status:l,target_apartment_id:o,target_bid_id:s})]);case 2:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a,o,s,u){return e.apply(this,arguments)}}()),c(this,"commitBidDealEnd",function(){var e=r(t().mark((function e(r,i,a,o){var s,u,l;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.dealViewService.findByBidId(r);case 2:return s=e.sent,u=s.$id,l=s.status,e.next=7,n.commitDealStatusChange(u,null,r,i,null,l,a,o);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()),c(this,"commitApartmentDealEnd",function(){var e=r(t().mark((function e(r,i,a,o){var s,u,l;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.dealViewService.findByApartmentId(r);case 2:return s=e.sent,u=s.$id,l=s.status,e.next=7,n.commitDealStatusChange(u,r,null,null,i,l,a,o);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()),T(this,{})})),Qo=l((function e(){var n=this;s(this,e),c(this,"dealDbService",A(ro.dealDbService)),c(this,"loggerService",A(ro.loggerService)),c(this,"reloadSubject",this.dealDbService.reloadSubject),c(this,"createSubject",this.dealDbService.createSubject),c(this,"removeSubject",this.dealDbService.removeSubject),c(this,"updateSubject",this.dealDbService.updateSubject),c(this,"create",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("dealViewService create",r),e.next=3,n.dealDbService.create(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"update",function(){var e=r(t().mark((function e(r,i){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("dealViewService update",i),e.next=3,n.dealDbService.update(r,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"remove",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("dealViewService remove",{id:r}),e.next=3,n.dealDbService.remove(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"read",function(){var e=r(t().mark((function e(r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("dealViewService read",{id:r}),e.next=3,n.dealDbService.findById(r);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"tryRead",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.loggerService.log("dealViewService tryRead",{id:r}),e.prev=1,"create"!==r){e.next=4;break}return e.abrupt("return",null);case 4:if("unknown"!==r){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,n.read(r);case 8:return e.abrupt("return",e.sent);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()),c(this,"readStatusByApartmentId",function(){var e=r(t().mark((function e(r){var i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("dealViewService readStatusByApartmentId"),i="",e.prev=2,e.next=5,n.dealDbService.findByApartmentId(r);case 5:a=e.sent,o=a.status,i=o,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),i="Свободно";case 13:return e.prev=13,e.abrupt("return",i);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(t){return e.apply(this,arguments)}}()),c(this,"readStatusByBidId",function(){var e=r(t().mark((function e(r){var i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("dealViewService readStatusByBidId"),i="",e.prev=2,e.next=5,n.dealDbService.findByBidId(r);case 5:a=e.sent,o=a.status,i=o,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),i="Свободно";case 13:return e.prev=13,e.abrupt("return",i);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(t){return e.apply(this,arguments)}}()),c(this,"readStatusByContactId",function(){var e=r(t().mark((function e(r){var i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("dealViewService readStatusByContactId"),i="",e.prev=2,e.next=5,n.dealDbService.findByContactId(r);case 5:a=e.sent,o=a.status,i=o,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),i="";case 13:return e.prev=13,e.abrupt("return",i);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(t){return e.apply(this,arguments)}}()),c(this,"findByDealStatus",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("dealViewService findByDealStatus"),e.next=3,n.dealDbService.findByDealStatus(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findByApartmentId",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("dealViewService findByApartmentId"),e.next=3,n.dealDbService.findByApartmentId(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findByBidId",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("dealViewService findByBidId"),e.next=3,n.dealDbService.findByBidId(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findByContactId",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("dealViewService findByContactId"),e.next=3,n.dealDbService.findByContactId(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findOccupiedByTargetApartmentId",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("dealViewService findOccupiedByTargetApartmentId"),e.next=3,n.dealDbService.findOccupiedByTargetApartmentId(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findOccupiedByTagetBidId",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("dealViewService findOccupiedByTagetBidId"),e.next=3,n.dealDbService.findOccupiedByTagetBidId(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findOccupiedByApartmentId",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("dealViewService findOccupiedByApartmentId"),e.next=3,n.dealDbService.findOccupiedByApartmentId(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findOccupiedByBidId",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("dealViewService findOccupiedByBidId"),e.next=3,n.dealDbService.findOccupiedByBidId(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T(this,{})})),es=l((function e(){var n=this;s(this,e),c(this,"roleViewService",A(ro.roleViewService)),c(this,"settingsViewService",A(ro.settingsViewService)),c(this,"getCurrencyType",L(r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{eur:"EUR",usd:"USD",uzs:"UZS"});case 1:case"end":return e.stop()}}),e)}))))),c(this,"getUserRoles",r(t().mark((function e(){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.roleViewService.findAll();case 2:return r=e.sent,e.abrupt("return",r.reduce((function(e,t){var n=t.id,r=t.title;return o(o({},e),{},c({},n,r))}),{}));case 4:case"end":return e.stop()}}),e)})))),c(this,"getMasterDetailMode",r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(c(n={},H.Tabs,"Вкладки"),c(n,H.Paper,"Скроллер"),n));case 1:case"end":return e.stop()}}),e)})))),c(this,"getCountries",L(r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W("".concat(ma,"/country-list.json"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))))),c(this,"getMahallya",L(r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W("".concat(ma,"/mahallya.json"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))))),c(this,"getUlicza",L(r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W("".concat(ma,"/ulicza.json"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))))),c(this,"getOrientir",L(r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W("".concat(ma,"/orientir.json"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))))),c(this,"getSocialMediaLinksRaw",L(r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.settingsViewService.getValue();case 2:return r=e.sent,i=[Oa,Ea,Na,Ua],e.abrupt("return",p(new Array(1)).flatMap((function(e,t){return i.map((function(e){return{type:e,id:t+1,label:e,link:S.get(r,"".concat(e,"_link_").concat(t+1)),enabled:S.get(r,"".concat(e,"_link_enabled_").concat(t+1))}}))})).filter((function(e){return e.enabled})).reduce((function(e,t){var n=t.id,r=t.type,i=t.label,a=t.link,s=t.enabled;return o(o({},e),{},c({},"".concat(r,"-").concat(n),{label:i,link:a,enabled:s}))}),{}));case 5:case"end":return e.stop()}}),e)}))))),c(this,"getInstagramPrimaryLink",r(t().mark((function e(){var r,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getSocialMediaLinksRaw();case 2:return r=e.sent,a=Object.entries(r).filter((function(e){return i(e,1)[0].includes(Oa)})),e.abrupt("return",a.length?a[0][1].link:null);case 5:case"end":return e.stop()}}),e)})))),c(this,"getTelegramPrimaryLink",r(t().mark((function e(){var r,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getSocialMediaLinksRaw();case 2:return r=e.sent,a=Object.entries(r).filter((function(e){return i(e,1)[0].includes(Ea)})),e.abrupt("return",a.length?a[0][1].link:null);case 5:case"end":return e.stop()}}),e)})))),c(this,"getFacebookPrimaryLink",r(t().mark((function e(){var r,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getSocialMediaLinksRaw();case 2:return r=e.sent,a=Object.entries(r).filter((function(e){return i(e,1)[0].includes(Ua)})),e.abrupt("return",a.length?a[0][1].link:null);case 5:case"end":return e.stop()}}),e)})))),c(this,"getYoutubePrimaryLink",r(t().mark((function e(){var r,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getSocialMediaLinksRaw();case 2:return r=e.sent,a=Object.entries(r).filter((function(e){return i(e,1)[0].includes(Na)})),e.abrupt("return",a.length?a[0][1].link:null);case 5:case"end":return e.stop()}}),e)})))),c(this,"getTelegramMapRaw",L(r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.settingsViewService.getValue();case 2:return r=e.sent,i=p(new Array(10)).map((function(e,t){return{id:t+1,label:S.get(r,"telegram_name_".concat(t+1))||S.get(r,"telegram_channel_".concat(t+1)),token:S.get(r,"telegram_token_".concat(t+1)),channel:S.get(r,"telegram_channel_".concat(t+1)),enabled:S.get(r,"telegram_channel_enabled_".concat(t+1))}})).filter((function(e){return e.enabled})),e.abrupt("return",i.reduce((function(e,t){return o(o({},e),{},c({},t.id,t))}),{}));case 5:case"end":return e.stop()}}),e)}))))),c(this,"getTelegramMap",r(t().mark((function e(){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getTelegramMapRaw();case 2:return r=e.sent,e.abrupt("return",Object.entries(r).reduce((function(e,t){var n=i(t,2),r=n[0],a=n[1].label;return o(o({},e),{},c({},r,a))}),{}));case 4:case"end":return e.stop()}}),e)})))),c(this,"getAgencyMapRaw",L(r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.settingsViewService.getValue();case 2:return r=e.sent,i=p(new Array(5)).map((function(e,t){return{id:t+1,phone:S.get(r,"telegram_agency_".concat(t+1)),telegram:S.get(r,"telegram_agency_nickname_".concat(t+1)),enabled:S.get(r,"telegram_agency_enabled_".concat(t+1))}})).filter((function(e){return e.enabled})),e.abrupt("return",i.reduce((function(e,t){return o(o({},e),{},c({},t.id,t))}),{}));case 5:case"end":return e.stop()}}),e)}))))),c(this,"getAgencyMap",r(t().mark((function e(){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getAgencyMapRaw();case 2:return r=e.sent,e.abrupt("return",Object.entries(r).reduce((function(e,t){var n=i(t,2),r=n[0],a=n[1],s=a.phone,u=a.telegram;return o(o({},e),{},c({},r,"".concat(s," - ").concat(u)))}),{}));case 4:case"end":return e.stop()}}),e)})))),c(this,"getAgentMapRaw",L(r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.settingsViewService.getValue();case 2:return r=e.sent,i=p(new Array(5)).map((function(e,t){return{id:t+1,phone:S.get(r,"telegram_agent_".concat(t+1)),telegram:S.get(r,"telegram_agent_nickname_".concat(t+1)),enabled:S.get(r,"telegram_agent_enabled_".concat(t+1))}})).filter((function(e){return e.enabled})),e.abrupt("return",i.reduce((function(e,t){return o(o({},e),{},c({},t.id,t))}),{}));case 5:case"end":return e.stop()}}),e)}))))),c(this,"getAgentMap",r(t().mark((function e(){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getAgentMapRaw();case 2:return r=e.sent,e.abrupt("return",Object.entries(r).reduce((function(e,t){var n=i(t,2),r=n[0],a=n[1],s=a.phone,u=a.telegram;return o(o({},e),{},c({},r,"".concat(s," - ").concat(u)))}),{}));case 4:case"end":return e.stop()}}),e)})))),c(this,"prefetch",L((function(){return Promise.all([n.getCountries(),n.getMahallya(),n.getUlicza(),n.getOrientir(),n.getAgencyMapRaw(),n.getAgentMapRaw(),n.getTelegramMapRaw(),n.getSocialMediaLinksRaw()])}))),T(this,{})})),ts=function(){function e(){var n=this;s(this,e),c(this,"appwriteService",A(ro.appwriteService)),c(this,"userViewService",A(ro.userViewService)),c(this,"_alerts",[]),c(this,"getDocument",function(){var e=r(t().mark((function e(r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,ba,[C.equal("$id",r),C.limit(1)]);case 2:if(i=e.sent,(a=i.documents).length){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",a[0]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findAll",r(t().mark((function e(){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,ba,[C.orderDesc("$createdAt")]);case 2:return r=e.sent,e.abrupt("return",Xa(r.documents));case 4:case"end":return e.stop()}}),e)})))),c(this,"handleBuildAlerts",function(){var e=r(t().mark((function e(i){var a,o,s,u,l,c,d,p;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=zk()||{},o=a.sideMenu,s=void 0===o?null:o,u=Ml(),l=u.id,c=void 0===l?null:l,e.next=4,Promise.all(i.filter((function(e){return null!==e.path})).filter((function(e){return null!==e.entity_id})).filter((function(e){return e.path===s})).filter((function(e){return e.entity_id===c})).filter((function(e){return e.id!==n.appwriteService.currentUser.$id})).filter((function(e){return"create"!==e.id})).filter((function(e){var t=e.$updatedAt,n=f(t);return f().diff(n,"minute")<15})).map(function(){var e=r(t().mark((function e(r){var i,a,o,s,u,l,c,d,p;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.id,a=r.$updatedAt,e.next=3,n.userViewService.tryRead(i);case 3:if(o=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:return s=[o.first_name,o.last_name,o.middle_name].join(" "),u=f(a),l=u.get("hour").toString(),c=u.get("minute").toString(),d=u.get("second").toString(),l=1===l.length?"0"+l:l,c=1===c.length?"0"+c:c,d=1===d.length?"0"+d:d,p="Сотрудник ".concat(s," смотрит форму (Время ").concat(l,":").concat(c,":").concat(d,")"),e.abrupt("return",{color:"error",content:p});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:return d=e.sent,p=d.filter((function(e){return!!e})),e.abrupt("return",p);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"handleFetch",O(r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.findAll();case 2:return r=e.sent,e.next=5,n.handleBuildAlerts(r);case 5:i=e.sent,P((function(){n._alerts=i}));case 7:case"end":return e.stop()}}),e)}))))),c(this,"create",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.createDocument(fa.databaseId,ba,n.appwriteService.currentUser.$id,Ja(r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"update",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.updateDocument(fa.databaseId,ba,n.appwriteService.currentUser.$id,Ja(r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"prefetch",L(r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.appwriteService.isAuthorized){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.handleFetch();case 4:n.appwriteService.client.subscribe("databases.".concat(fa.databaseId,".collections.").concat(ba,".documents"),r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.handleFetch();case 2:case"end":return e.stop()}}),e)}))));case 5:case"end":return e.stop()}}),e)}))))),T(this,{_alerts:M,alerts:j})}return l(e,[{key:"alerts",get:function(){return $(this._alerts)}}]),e}(),ns=l((function e(){var t=this;s(this,e),c(this,"routerService",A(ro.routerService)),c(this,"loggerService",A(ro.loggerService)),c(this,"errorSubject",new V),c(this,"handleGlobalError",(function(e){console.error(e),t.loggerService.error(e),t.routerService.push("/error_page"),t.errorSubject.next()})),x(this)})),rs=function(){function e(){var n=this;s(this,e),c(this,"appwriteService",A(ro.appwriteService)),c(this,"userViewService",A(ro.userViewService)),c(this,"roleViewService",A(ro.roleViewService)),c(this,"_features",[]),c(this,"getFeaturesByUserId",function(){var e=r(t().mark((function e(r){var i,a,o,s,u,l,c,d;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.userViewService.tryRead(r);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:return i=e.t0,a=i.user_role,o=void 0===a?null:a,s=i.user_features,u=void 0===s?[]:s,e.next=12,n.roleViewService.tryRead(o?o[0]:"unknown");case 12:return l=e.sent,c=(null==l?void 0:l.role_features)||[],d=[].concat(p(u||[]),p(c)),e.abrupt("return",p(new Set(d)));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"init",L(r(t().mark((function e(){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.isAuthorized){e.next=3;break}return n.init.clear(),e.abrupt("return");case 3:return e.next=5,n.getFeaturesByUserId(n.appwriteService.currentUser.$id);case 5:r=e.sent,P((function(){n._features=r}));case 7:case"end":return e.stop()}}),e)}))))),c(this,"getFeatures",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.init();case 2:return e.abrupt("return",n.features);case 3:case"end":return e.stop()}}),e)})))),c(this,"getAccessLevel",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.init();case 2:return e.abrupt("return",n.accessLevel);case 3:case"end":return e.stop()}}),e)})))),c(this,"hasFeature",r(t().mark((function e(){var r,i,a,o,s=arguments;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getFeatures();case 2:for(r=e.sent,i=s.length,a=new Array(i),o=0;o<i;o++)a[o]=s[o];return e.abrupt("return",a.some((function(e){return r.includes(e)})));case 5:case"end":return e.stop()}}),e)})))),T(this,{_features:M,features:j,accessLevel:j})}return l(e,[{key:"isAuthorized",get:function(){return this.appwriteService.isAuthorized}},{key:"features",get:function(){return $(this._features)}},{key:"readAccessLevel",get:function(){var e=new Set(this.features).has("vizhu_vse_urovni")?5:0;return Math.max(this.accessLevel,e)}},{key:"accessLevel",get:function(){var e=new Set(this.features),t=p(new Array(5)).map((function(e,t){return t+1})).reverse();if(e.has("vizhu_vse_urovni"))return 5;var n,r=m(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(e.has("level-".concat(i)))return i}}catch(a){r.e(a)}finally{r.f()}return console.warn("FeatureService accessLevel unset level"),0}}]),e}(),is=function(){function e(){var t=this;s(this,e),c(this,"appbarSubject",new V),c(this,"modalSubject",new V),c(this,"reloadOutletSubject",new V),c(this,"_modalLoading",0),c(this,"_appbarLoading",0),c(this,"setModalLoader",(function(e){t._modalLoading=Math.max(t._modalLoading+(e?1:-1),0),t.modalSubject.next(e)})),c(this,"setAppbarLoader",(function(e){t._appbarLoading=Math.max(t._appbarLoading+(e?1:-1),0),t.appbarSubject.next(e)})),c(this,"dropModalLoader",(function(){t._modalLoading=0,t.modalSubject.next(!1)})),c(this,"dropAppbarLoader",(function(){t._appbarLoading=0,t.appbarSubject.next(!1)})),c(this,"reloadOutlet",(function(){t.reloadOutletSubject.next()})),x(this)}return l(e,[{key:"hasModalLoader",get:function(){return!!this._modalLoading}},{key:"hasAppbarLoader",get:function(){return!!this._appbarLoading}}]),e}(),as=l((function e(){var n=this;s(this,e),c(this,"appwriteService",A(ro.appwriteService)),c(this,"error",(function(e){console.error(e),oa&&G((function(t){t.setExtra("user_id",n.appwriteService.currentUser.$id),t.setExtra("email",n.appwriteService.currentUser.email),Y(e)}))})),c(this,"log",(function(e,t){console.log(e,t),oa&&G((function(r){r.setExtra("user_id",n.appwriteService.currentUser.$id),r.setExtra("email",n.appwriteService.currentUser.email),r.setExtra("msg",e),t&&r.setExtra("data",t),K("Log for ".concat(n.appwriteService.currentUser.email))}))})),c(this,"prefetch",L(r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:oa&&X({dsn:"https://8cba9840891744e8835be09bf6f2c5e6@o4505477865996288.ingest.sentry.io/4505477935726592",environment:"frontend"});case 1:case"end":return e.stop()}}),e)}))))),T(this,{})})),os=(Ro=null,qo=null,function(){var e,t,n,r,i=Fl.routerService.location.pathname;return Ro!==i&&(e=Il("id"),t=!1,n=!1,r=!1,e&&Fl.routerService.location.pathname.startsWith("/bid")&&(r=!0),e&&Fl.routerService.location.pathname.startsWith("/apartment")&&(n=!0),e&&Fl.routerService.location.pathname.startsWith("/contact")&&(t=!0),qo={id:e||"unknown",isContact:t,isApartment:n,isBid:r},Ro=i),qo}),ss=["system_created_by","system_only_for_owner","system_allowance"],us={system_created_by:null,system_only_for_owner:!1,system_allowance:[]},ls=function(){var e=r(t().mark((function e(n,r){var a,o,s,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.appwriteService.databases.listDocuments(fa.databaseId,n,[C.select([].concat(ss)),C.equal("$id",r),C.limit(1),C.orderDesc("$createdAt")]);case 2:if(a=e.sent,o=i(a.documents,1),s=o[0],u=void 0===s?null:s){e.next=8;break}return e.abrupt("return",us);case 8:return e.abrupt("return",u);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();window.readOwnerMetadata=ls;var cs=l((function e(){s(this,e),c(this,"getOwnerMetadata",r(t().mark((function e(){var n,r,i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=os(),r=n.id,i=n.isApartment,a=n.isBid,o=n.isContact,!a){e.next=5;break}return e.next=4,ls(wa,r);case 4:case 8:case 12:return e.abrupt("return",e.sent);case 5:if(!i){e.next=9;break}return e.next=8,ls(_a,r);case 9:if(!o){e.next=13;break}return e.next=12,ls(ka,r);case 13:case"end":return e.stop()}}),e)})))),c(this,"getAreaMetadataByBid",function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{system_metro:J(n.metro,n.metro_list).filter((function(e){return e})),system_rajon:J(n.rajon,n.rajon_list).filter((function(e){return e})),system_mahallya:J(n.mahallya,n.mahallya_list).filter((function(e){return e}))});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"getAreaMetadataByApartment",function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{system_metro:J(n.metro).filter((function(e){return e})),system_rajon:J(n.rajon).filter((function(e){return e})),system_mahallya:J(n.mahallya).filter((function(e){return e}))});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T(this,{})})),ds="databases.".concat(fa.databaseId,".collections.").concat(Ca,".documents"),ps=l((function e(){var n=this;s(this,e),c(this,"createSubject",new V),c(this,"reloadSubject",new V),c(this,"updateSubject",new V),c(this,"appwriteService",A(ro.appwriteService)),c(this,"realtimeService",A(ro.realtimeService)),c(this,"findAllByUserId",L(function(){var e=r(t().mark((function e(r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,Ca,[C.equal("user_id",r),C.orderDesc("$createdAt")]);case 2:return i=e.sent,a=i.documents,e.abrupt("return",Xa(a));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),c(this,"findAllUnreadByUserId",L(function(){var e=r(t().mark((function e(r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,Ca,[C.equal("user_id",r),C.equal("is_read",[!1]),C.orderDesc("$createdAt")]);case 2:return i=e.sent,a=i.documents,e.abrupt("return",Xa(a));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),c(this,"findById",function(){var e=r(t().mark((function e(r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.getDocument(fa.databaseId,Ca,r);case 2:return i=e.sent,e.abrupt("return",Ka(i));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"create",function(){var e=r(t().mark((function e(r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.createDocument(fa.databaseId,Ca,n.appwriteService.createId(),o({is_read:!1},Ja(r)));case 2:return i=e.sent,n.findAllByUserId.clear(),n.findAllUnreadByUserId.clear(),a=Ka(i),n.createSubject.next(a),n.reloadSubject.next(),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"update",function(){var e=r(t().mark((function e(r,i){var a,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.updateDocument(fa.databaseId,Ca,r,o({is_read:!1},Ja(i)));case 2:return a=e.sent,n.findAllByUserId.clear(),n.findAllUnreadByUserId.clear(),s=Ka(a),n.updateSubject.next([r,s]),n.reloadSubject.next(),e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"remove",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.deleteDocument(fa.databaseId,Ca,r);case 2:n.findAllByUserId.clear(),n.findAllUnreadByUserId.clear(),n.reloadSubject.next();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"prefetch",L(r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.realtimeService.subscribe(ds,(function(e){var t=e.events,r=e.payload;if(t.includes(qa)&&(n.findAllByUserId.clear(),n.findAllUnreadByUserId.clear(),n.reloadSubject.next(),n.createSubject.next(r)),t.includes(Pa)&&(n.findAllByUserId.clear(),n.findAllUnreadByUserId.clear(),n.reloadSubject.next()),t.includes(Ra)){n.findAllByUserId.clear(),n.findAllUnreadByUserId.clear();var i=Ka(r);n.updateSubject.next([r.$id,i])}}));case 1:case"end":return e.stop()}}),e)}))))),T(this,{})})),ms=l((function e(){var n=this;s(this,e),c(this,"notifyDbService",A(ro.notifyDbService)),c(this,"loggerService",A(ro.loggerService)),c(this,"createSubject",this.notifyDbService.createSubject),c(this,"reloadSubject",this.notifyDbService.reloadSubject),c(this,"updateSubject",this.notifyDbService.updateSubject),c(this,"create",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("roleViewService create",r),e.next=3,n.notifyDbService.create(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findAllByUserId",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("roleViewService findAllByUserId"),e.next=3,n.notifyDbService.findAllByUserId(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findAllUnreadByUserId",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("roleViewService findAllUnreadByUserId"),e.next=3,n.notifyDbService.findAllUnreadByUserId(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"toggleReadAllByUserId",function(){var e=r(t().mark((function e(i){var a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("roleViewService toggleReadAllByUserId"),e.next=3,n.notifyDbService.findAllUnreadByUserId(i);case 3:return a=e.sent,e.next=6,Promise.all(a.map(function(){var e=r(t().mark((function e(r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=r.$id,n.notifyDbService.update(i,{is_read:!0});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"update",function(){var e=r(t().mark((function e(r,i){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("roleViewService update",i),e.next=3,n.notifyDbService.update(r,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"remove",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("roleViewService remove",{id:r}),e.next=3,n.notifyDbService.remove(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"read",function(){var e=r(t().mark((function e(r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("roleViewService read",{id:r}),e.next=3,n.notifyDbService.findById(r);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"tryRead",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.loggerService.log("roleViewService tryRead",{id:r}),e.prev=1,"create"!==r){e.next=4;break}return e.abrupt("return",null);case 4:if("unknown"!==r){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,n.read(r);case 8:return e.abrupt("return",e.sent);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()),T(this,{})})),fs=Z(function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ls(wa,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),hs=Z(function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ls(ka,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ys=Z(function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ls(_a,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),vs=l((function e(){var n=this;s(this,e),c(this,"appwriteService",A(ro.appwriteService)),c(this,"featureService",A(ro.featureService)),c(this,"routerService",A(ro.routerService)),c(this,"dealViewService",A(ro.dealViewService)),c(this,"hasReassignDelayFlagByApartmentId",function(){var e=r(t().mark((function e(a){var o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){var e=r(t().mark((function e(){var r,o,s,u,l;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,Va,[C.limit(1),C.select(["$id"]),C.equal("apartment_id",a),C.notEqual("type","deal-status"),C.orderDesc("$createdAt")]);case 2:if(r=e.sent,o=i(r.documents,1),s=o[0],u=void 0===s?null:s){e.next=8;break}return e.abrupt("return",!0);case 8:if("deal-end"!==u.type){e.next=10;break}return e.abrupt("return",!0);case 10:return l=To(),e.abrupt("return",l-To(f(u.$createdAt))>3);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=3,Q(ee(n.featureService.hasFeature("zaderzhka_perenaznacheniya_otvetstvennogo")),o());case 3:return s=e.sent,e.abrupt("return",ee(s));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"hasReassignDelayFlagByBidId",function(){var e=r(t().mark((function e(a){var o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){var e=r(t().mark((function e(){var r,o,s,u,l;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,Va,[C.limit(1),C.select(["$id"]),C.equal("bid_id",a),C.notEqual("type","deal-status"),C.orderDesc("$createdAt")]);case 2:if(r=e.sent,o=i(r.documents,1),s=o[0],u=void 0===s?null:s){e.next=8;break}return e.abrupt("return",!0);case 8:if("deal-end"!==u.type){e.next=10;break}return e.abrupt("return",!0);case 10:return l=To(),e.abrupt("return",l-To(f(u.$createdAt))>3);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=3,Q(ee(n.featureService.hasFeature("zaderzhka_perenaznacheniya_otvetstvennogo")),o());case 3:return s=e.sent,e.abrupt("return",ee(s));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"getOwnerContactPermissionByApartmentId",(function(e){var i,a=n.appwriteService.currentUser.$id,o=Z(r(t().mark((function n(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ls(_a,e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),n)})))),s=function(){var e=r(t().mark((function e(){var n,r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:return n=e.sent,r=n.system_created_by,i=n.system_only_for_owner,e.abrupt("return",!i||r===a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var i=r(t().mark((function r(){var i;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.dealViewService.findOccupiedByApartmentId(e);case 2:return i=t.sent,t.abrupt("return",!i||i.user_id===a);case 4:case"end":return t.stop()}}),r)})));return function(){return i.apply(this,arguments)}}(),l=function(){var i=r(t().mark((function r(){var i;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.dealViewService.findOccupiedByTargetApartmentId(e);case 2:return i=t.sent,t.abrupt("return",!i||i.user_id===a);case 4:case"end":return t.stop()}}),r)})));return function(){return i.apply(this,arguments)}}();return Q(n.featureService.hasFeature("vizhu_kontakty_pod_bronyu"),te((i=function(){var e=r(t().mark((function e(){var n,r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:return n=e.sent,r=n.system_created_by,e.abrupt("return",r===a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q(ee(n.featureService.hasFeature("ne_vizhu_nomera_telefonov_chuzhih_kontaktov")),i())),s(),u(),l()))})),c(this,"getOwnerContactPermissionByBidId",(function(e){var i,a=n.appwriteService.currentUser.$id,o=Z(r(t().mark((function n(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ls(wa,e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),n)})))),s=function(){var e=r(t().mark((function e(){var n,r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:return n=e.sent,r=n.system_created_by,i=n.system_only_for_owner,e.abrupt("return",!i||r===a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var i=r(t().mark((function r(){var i;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.dealViewService.findOccupiedByBidId(e);case 2:return i=t.sent,t.abrupt("return",!i||i.user_id===a);case 4:case"end":return t.stop()}}),r)})));return function(){return i.apply(this,arguments)}}(),l=function(){var i=r(t().mark((function r(){var i;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.dealViewService.findOccupiedByTagetBidId(e);case 2:return i=t.sent,t.abrupt("return",!i||i.user_id===a);case 4:case"end":return t.stop()}}),r)})));return function(){return i.apply(this,arguments)}}();return Q(n.featureService.hasFeature("vizhu_kontakty_pod_bronyu"),te((i=function(){var e=r(t().mark((function e(){var n,r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:return n=e.sent,r=n.system_created_by,e.abrupt("return",r===a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q(ee(n.featureService.hasFeature("ne_vizhu_nomera_telefonov_chuzhih_kontaktov")),i())),s(),u(),l()))})),c(this,"getOwnerContactPermissionByContactId",(function(e){var i,a=n.appwriteService.currentUser.$id,o=Z(r(t().mark((function n(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ls(ka,e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),n)})))),s=function(){var e=r(t().mark((function e(){var n,r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:return n=e.sent,r=n.system_created_by,i=n.system_only_for_owner,e.abrupt("return",!i||r===a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return te((i=function(){var e=r(t().mark((function e(){var n,r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:return n=e.sent,r=n.system_created_by,e.abrupt("return",r===a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q(ee(n.featureService.hasFeature("ne_vizhu_nomera_telefonov_chuzhih_kontaktov")),i())),s())})),c(this,"hasInternOwnerContactPermission",Z(r(t().mark((function e(){var r,i,a,o,s,u,l,c,d,p,m,f,h,y,v;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=os(),i=r.id,a=r.isApartment,o=r.isBid,s=r.isContact,e.next=3,n.featureService.hasFeature("ne_vizhu_nomera_telefonov_chuzhih_kontaktov");case 3:if(u=e.sent,l=!1,c=!1,d=!1,!u){e.next=26;break}if(!o){e.next=14;break}return e.next=11,fs(i);case 11:p=e.sent,m=p.system_created_by,d=n.appwriteService.currentUser.$id===m;case 14:if(!a){e.next=20;break}return e.next=17,ys(i);case 17:f=e.sent,h=f.system_created_by,c=n.appwriteService.currentUser.$id===h;case 20:if(!s){e.next=26;break}return e.next=23,hs(i);case 23:y=e.sent,v=y.system_created_by,l=n.appwriteService.currentUser.$id===v;case 26:return e.abrupt("return",Q(!u,l,c,d));case 27:case"end":return e.stop()}}),e)}))))),c(this,"hasExclusiveOwnerContactPermission",Z(r(t().mark((function e(){var r,i,a,o,s,u,l,c,d,p,m,f,h,y,v,b,_,k,g,x,w,S,z;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=os(),i=r.id,a=r.isApartment,o=r.isBid,s=r.isContact,u=!0,l=!0,c=!0,!a){e.next=12;break}return e.next=7,ys(i);case 7:d=e.sent,p=d.system_created_by,m=d.system_only_for_owner,f=d.system_allowance,m&&(h=n.appwriteService.currentUser.$id,u=Q(p===h,!(null==f||!f.includes(h))));case 12:if(!s){e.next=20;break}return e.next=15,hs(i);case 15:y=e.sent,v=y.system_created_by,b=y.system_only_for_owner,_=y.system_allowance,b&&(k=n.appwriteService.currentUser.$id,l=Q(v===k,!(null==_||!_.includes(k))));case 20:if(!o){e.next=28;break}return e.next=23,fs(i);case 23:g=e.sent,x=g.system_created_by,w=g.system_only_for_owner,S=g.system_allowance,w&&(z=n.appwriteService.currentUser.$id,c=Q(x===z,!(null==S||!S.includes(z))));case 28:return e.abrupt("return",te(u,l,c));case 29:case"end":return e.stop()}}),e)}))))),c(this,"hasOccupationOwnerContactPermission",Z(r(t().mark((function e(){var r,i,a,o,s,u,l,c;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=os(),i=r.id,a=r.isApartment,o=r.isBid,s=!0,u=!0,!a){e.next=8;break}return e.next=6,n.dealViewService.findOccupiedByApartmentId(i);case 6:(l=e.sent)&&(s=l.user_id===n.appwriteService.currentUser.$id);case 8:if(!o){e.next=13;break}return e.next=11,n.dealViewService.findOccupiedByBidId(i);case 11:(c=e.sent)&&(s=c.user_id===n.appwriteService.currentUser.$id);case 13:return e.abrupt("return",te(s,u));case 14:case"end":return e.stop()}}),e)}))))),c(this,"hasTargetOccupationOwnerContactPermission",Z(r(t().mark((function e(){var r,i,a,o,s,u,l,c;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=os(),i=r.id,a=r.isApartment,o=r.isBid,s=!0,u=!0,!a){e.next=8;break}return e.next=6,n.dealViewService.findOccupiedByTargetApartmentId(i);case 6:(l=e.sent)&&(s=l.user_id===n.appwriteService.currentUser.$id);case 8:if(!o){e.next=13;break}return e.next=11,n.dealViewService.findOccupiedByTagetBidId(i);case 11:(c=e.sent)&&(s=c.user_id===n.appwriteService.currentUser.$id);case 13:return e.abrupt("return",te(s,u));case 14:case"end":return e.stop()}}),e)}))))),c(this,"hasAllOwnerContactPermission",Z((function(){return Q(n.featureService.hasFeature("vizhu_kontakty_pod_bronyu"),te(n.hasInternOwnerContactPermission(),n.hasExclusiveOwnerContactPermission(),n.hasOccupationOwnerContactPermission(),n.hasTargetOccupationOwnerContactPermission()))}))),T(this,{})})),bs=l((function e(){var n=this;s(this,e),c(this,"featureService",A(ro.featureService)),c(this,"routerService",A(ro.routerService)),c(this,"permissionRequestService",A(ro.permissionRequestService)),c(this,"previewModeService",A(ro.previewModeService)),c(this,"hasContactNumberPermission",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(n.previewModeService.hasPreviewModeDisabled(),n.permissionRequestService.hasAllOwnerContactPermission());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),c(this,"hasContactEmailPermission",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(n.previewModeService.hasPreviewModeDisabled(),n.permissionRequestService.hasAllOwnerContactPermission());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),c(this,"hasApartmentHouseNumberPermission",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(n.previewModeService.hasPreviewModeDisabled());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),c(this,"hasBidHouseNumberPermission",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(n.previewModeService.hasPreviewModeDisabled());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),c(this,"hasResponsiblePermission",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(n.previewModeService.hasPreviewModeDisabled());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),c(this,"hasOwnerPricePermission",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(n.previewModeService.hasPreviewModeDisabled());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),c(this,"hasCommissionPermission",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(n.previewModeService.hasPreviewModeDisabled());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),c(this,"hasMasterDetailPermission",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(n.previewModeService.hasPreviewModeDisabled());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),c(this,"hasDescriptionPermission",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(n.previewModeService.hasPreviewModeDisabled());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),c(this,"hasFioPermission",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(n.previewModeService.hasPreviewModeDisabled());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),c(this,"hasApartmentViewPermission",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Q,e.next=3,n.featureService.hasFeature("prosmotr_obekta");case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))),c(this,"hasBidViewPermission",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Q,e.next=3,n.featureService.hasFeature("prosmotr_zayavki");case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))),c(this,"hasContactViewPermission",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Q,e.next=3,n.featureService.hasFeature("prosmotr_kontakta");case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))),c(this,"hasApartmentCreatePermission",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Q,e.next=3,n.featureService.hasFeature("sozdanie_obekta");case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))),c(this,"hasBidCreatePermission",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Q,e.next=3,n.featureService.hasFeature("sozdanie_zayavki");case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))),c(this,"hasContactCreatePermission",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Q,e.next=3,n.featureService.hasFeature("sozdanie_kontakta");case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))),c(this,"hasApartmentUpdatePermission",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Q,e.next=3,n.featureService.hasFeature("redaktirovanie_obekta");case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))),c(this,"hasBidUpdatePermission",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Q,e.next=3,n.featureService.hasFeature("redaktirovanie_zayavki");case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))),c(this,"hasContactUpdatePermission",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Q,e.next=3,n.featureService.hasFeature("redaktirovanie_kontakta");case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))),c(this,"hasUsersUpdatePermission",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Q,e.next=3,n.featureService.hasFeature("redaktirovanie_sotrudnika");case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))),c(this,"hasSettingsCreateRolePermission",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Q,e.next=3,n.featureService.hasFeature("sozdanie_roli");case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))),c(this,"hasSettingsEditRolePermission",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Q,e.next=3,n.featureService.hasFeature("redaktirovanie_roli");case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))),c(this,"hasUsersViewPhoneAndEmailPermission",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Q,e.next=3,n.featureService.hasFeature("prosmotr_nomera_telefona_i_email");case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))),c(this,"hasUserServiceCommentMentionPermission",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Q,e.next=3,n.featureService.hasFeature("upominanie_polzovatelya");case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))),c(this,"hasUserServiceCommentAddingFilePermission",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Q,e.next=3,n.featureService.hasFeature("dobavlenie_fajla");case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))),c(this,"hasUsersAccessLevelsPermission",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Q,e.next=3,n.featureService.hasFeature("nastrojka_urovnej_dostupa");case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))),c(this,"hasSettingsEditPermission",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Q,e.next=3,n.featureService.hasFeature("dostup_k_nastrojkam");case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))),c(this,"hasManagerAllObjectsExclusivePermission",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Q,e.next=3,n.featureService.hasFeature("vse_obekty_eksklyuzivny");case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))),c(this,"hasAdvertisingPublicationPermission",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Q,e.next=3,n.featureService.hasFeature("publikacziya_reklamy");case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))),c(this,"hasAdvertisingKategoryAddPermission",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Q,e.next=3,n.featureService.hasFeature("dobavlenie_kategorii_i_podkategorii");case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))),c(this,"hasAnonymousEditingPermission",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Q,e.next=3,n.featureService.hasFeature("anonimnoe_redaktirovanie");case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))),c(this,"hasSuperAdminFlagPermission",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Q,e.next=3,n.featureService.hasFeature("superadmin");case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))),c(this,"hasSettingsViewFieldsPermission",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Q,e.next=3,n.featureService.hasFeature("dostup_k_nastrojke_polej");case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))),c(this,"hasListColumnsDeletePermission",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Q,e.next=3,n.featureService.hasFeature("polnoe_udalenie");case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))),c(this,"getPermissions",r(t().mark((function e(){var r,i,a,o,s,u,l,c,d,p,m,f,h,y,v,b,_,k,g,x,w,S,z,V,A,T,C,F,L,I,M,j,B,D,R,q;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!1,i=!1,a=!1,o=!1,s=!1,u=!1,l=!1,c=!1,d=!1,p=!1,m=!1,f=!1,h=!1,y=!1,v=!1,b=!1,_=!1,k=!1,g=!1,x=!1,w=!1,S=!1,z=!1,V=!1,A=!1,T=!1,C=!1,F=!1,L=!1,I=!1,M=!1,j=!1,B=!1,D=!1,R=!1,q=!1,e.next=38,Promise.all([n.previewModeService.hasPreviewModeDisabled().then((function(e){return r=e})),n.hasContactNumberPermission().then((function(e){return i=e})),n.hasContactEmailPermission().then((function(e){return a=e})),n.hasApartmentHouseNumberPermission().then((function(e){return o=e})),n.hasBidHouseNumberPermission().then((function(e){return s=e})),n.hasResponsiblePermission().then((function(e){return u=e})),n.hasOwnerPricePermission().then((function(e){return l=e})),n.hasCommissionPermission().then((function(e){return c=e})),n.hasMasterDetailPermission().then((function(e){return d=e})),n.hasDescriptionPermission().then((function(e){return p=e})),n.hasFioPermission().then((function(e){return m=e})),n.hasApartmentViewPermission().then((function(e){return f=e})),n.hasBidViewPermission().then((function(e){return h=e})),n.hasContactViewPermission().then((function(e){return y=e})),n.hasApartmentCreatePermission().then((function(e){return v=e})),n.hasBidCreatePermission().then((function(e){return b=e})),n.hasContactCreatePermission().then((function(e){return _=e})),n.hasApartmentUpdatePermission().then((function(e){return k=e})),n.hasBidUpdatePermission().then((function(e){return g=e})),n.hasContactUpdatePermission().then((function(e){return x=e})),n.hasUsersUpdatePermission().then((function(e){return w=e})),n.hasSettingsCreateRolePermission().then((function(e){return S=e})),n.hasSettingsEditRolePermission().then((function(e){return z=e})),n.hasUsersViewPhoneAndEmailPermission().then((function(e){return V=e})),n.hasUserServiceCommentMentionPermission().then((function(e){return A=e})),n.hasUserServiceCommentAddingFilePermission().then((function(e){return T=e})),n.hasUsersAccessLevelsPermission().then((function(e){return C=e})),n.hasSettingsEditPermission().then((function(e){return F=e})),n.hasManagerAllObjectsExclusivePermission().then((function(e){return L=e})),n.hasAdvertisingPublicationPermission().then((function(e){return I=e})),n.hasAdvertisingKategoryAddPermission().then((function(e){return M=e})),n.hasAnonymousEditingPermission().then((function(e){return j=e})),n.hasSuperAdminFlagPermission().then((function(e){return B=e})),n.hasSuperAdminFlagPermission().then((function(e){return D=e})),n.hasSettingsViewFieldsPermission().then((function(e){return R=e})),n.hasListColumnsDeletePermission().then((function(e){return q=e}))]);case 38:return e.abrupt("return",{hasPreviewModeDisabled:r,hasContactNumberPermission:i,hasContactEmailPermission:a,hasApartmentHouseNumberPermission:o,hasBidHouseNumberPermission:s,hasResponsiblePermission:u,hasOwnerPricePermission:l,hasCommissionPermission:c,hasMasterDetailPermission:d,hasDescriptionPermission:p,hasFioPermission:m,hasApartmentViewPermission:f,hasBidViewPermission:h,hasContactViewPermission:y,hasApartmentCreatePermission:v,hasBidCreatePermission:b,hasContactCreatePermission:_,hasApartmentUpdatePermission:k,hasBidUpdatePermission:g,hasContactUpdatePermission:x,hasUsersUpdatePermission:w,hasSettingsCreateRolePermission:S,hasSettingsEditRolePermission:z,hasUsersViewPhoneAndEmailPermission:V,hasUserServiceCommentMentionPermission:A,hasUserServiceCommentAddingFilePermission:T,hasUsersAccessLevelsPermission:C,hasSettingsEditPermission:F,hasManagerAllObjectsExclusivePermission:L,hasAdvertisingPublicationPermission:I,hasAdvertisingKategoryAddPermission:M,hasAnonymousEditingPermission:j,hasSuperAdminFlagPermission:B,hasOfficeManagerFlagPermission:D,hasSettingsViewFieldsPermission:R,hasListColumnsDeletePermission:q});case 39:case"end":return e.stop()}}),e)})))),c(this,"prefetch",L(r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getPermissions();case 2:case"end":return e.stop()}}),e)})))))})),_s=ne("REAL_ESTATE_PREVIEW_MODE"),ks=function(){function e(){var n=this;s(this,e),c(this,"togglePreviewMode",(function(){_s.setValue(!n.previewMode),N()})),c(this,"hasPreviewModeDisabled",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(!n.previewMode);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),T(this,{})}return l(e,[{key:"previewMode",get:function(){return _s.getValue()||!1}}]),e}(),gs=l((function e(){var t=this;s(this,e),c(this,"appwriteService",A(ro.appwriteService)),c(this,"errorService",A(ro.errorService)),c(this,"loggerService",A(ro.loggerService)),c(this,"subscribeAppwrite",(function(e,n){return t.loggerService.log("realtimeService appwrite event bus fallback"),t.appwriteService.client.subscribe(e,n)})),c(this,"subscribe",(function(e,n){return t.subscribeAppwrite(e,n)})),T(this,{})})),xs="databases.".concat(fa.databaseId,".collections.").concat(Ta,".documents"),ws=l((function e(){var n=this;s(this,e),c(this,"createSubject",new V),c(this,"reloadSubject",new V),c(this,"updateSubject",new V),c(this,"appwriteService",A(ro.appwriteService)),c(this,"realtimeService",A(ro.realtimeService)),c(this,"findById",function(){var e=r(t().mark((function e(r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.findAll();case 2:if(i=e.sent,a=i.find((function(e){return e.id===r}))){e.next=6;break}throw new Error("roleDbService findById user not found");case 6:return e.abrupt("return",Ka(a));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findAll",L(r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,Ta,[C.orderDesc("$createdAt")]);case 2:return r=e.sent,i=r.documents,e.abrupt("return",Xa(i));case 5:case"end":return e.stop()}}),e)}))))),c(this,"create",function(){var e=r(t().mark((function e(r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.createDocument(fa.databaseId,Ta,n.appwriteService.createId(),Ja(r));case 2:return i=e.sent,n.findAll.clear(),a=Ka(i),n.createSubject.next(a),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"update",function(){var e=r(t().mark((function e(r,i){var a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.updateDocument(fa.databaseId,Ta,r,Ja(i));case 2:return a=e.sent,n.findAll.clear(),o=Ka(a),n.updateSubject.next([r,o]),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"remove",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.deleteDocument(fa.databaseId,Ta,r);case 2:n.findAll.clear(),n.reloadSubject.next();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"prefetch",L(r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.realtimeService.subscribe(xs,(function(e){var t=e.events,r=e.payload;if(t.includes(qa)&&(n.findAll.clear(),n.reloadSubject.next(),n.createSubject.next(r)),t.includes(Pa)&&(n.findAll.clear(),n.reloadSubject.next()),t.includes(Ra)){n.findAll.clear();var i=Ka(r);n.updateSubject.next([r.$id,i])}}));case 1:case"end":return e.stop()}}),e)}))))),T(this,{})})),Ss=l((function e(){var n=this;s(this,e),c(this,"roleDbService",A(ro.roleDbService)),c(this,"loggerService",A(ro.loggerService)),c(this,"createSubject",this.roleDbService.createSubject),c(this,"reloadSubject",this.roleDbService.reloadSubject),c(this,"updateSubject",this.roleDbService.updateSubject),c(this,"create",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("roleViewService create",r),e.next=3,n.roleDbService.create(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findAll",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("roleViewService findAll"),e.next=3,n.roleDbService.findAll();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))),c(this,"update",function(){var e=r(t().mark((function e(r,i){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("roleViewService update",i),e.next=3,n.roleDbService.update(r,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"remove",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("roleViewService remove",{id:r}),e.next=3,n.roleDbService.remove(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"read",function(){var e=r(t().mark((function e(r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("roleViewService read",{id:r}),e.next=3,n.roleDbService.findById(r);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"tryRead",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.loggerService.log("roleViewService tryRead",{id:r}),e.prev=1,"create"!==r){e.next=4;break}return e.abrupt("return",null);case 4:if("unknown"!==r){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,n.read(r);case 8:return e.abrupt("return",e.sent);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()),T(this,{})})),zs=re(),Vs=new(function(){return l((function e(){var t=this;s(this,e),c(this,"_stack",[]),c(this,"push",(function(e){t._stack.unshift(e),t._stack=t._stack.slice(0,200)})),c(this,"getBasePath",(function(e){var n,r=i(t._stack,1),a=i(r[0].split("/").slice(1),1)[0],o=void 0===a?"/":a,s=o.includes("_")?o.slice(0,o.lastIndexOf("_")):o,u=e,l=m(t._stack);try{for(l.s();!(n=l.n()).done;){var c=n.value;if(!c.startsWith("/".concat(s)))break;u=c}}catch(d){l.e(d)}finally{l.f()}return u}))}))}()),As=function(){function e(){var t=this;s(this,e),c(this,"previousPath","/"),c(this,"location",zs.location),c(this,"action",zs.action),c(this,"subscribeLeave",(function(e){return ie.create((function(e){return t.listen((function(t){"PUSH"===t.action&&e()}))})).once(e)})),c(this,"getBasePath",(function(e){return Vs.getBasePath(e)})),c(this,"hasViewRedirectFlag",(function(){return!!t.locationState.viewRedirectFlag})),c(this,"updateState",(function(){t.location=zs.location,t.action=zs.action,Vs.push(t.path),t.previousPath=t.path})),c(this,"createHref",(function(e){var n=zs.createHref(e);return t.updateState(),n})),c(this,"push",(function(e,n){var r=zs.push(e,n);return t.updateState(),r})),c(this,"replace",(function(e,n){var r=zs.replace(e,n);return t.updateState(),r})),c(this,"go",(function(e){var n=zs.go(e);return t.updateState(),n})),c(this,"back",(function(e){if(e){var n=Vs.getBasePath(e);return console.log(Vs,n),n!==t.path?void t.push(n):void t.push(e)}var r=zs.back();return t.updateState(),r})),c(this,"forward",(function(){var e=zs.forward();return t.updateState(),e})),c(this,"listen",(function(e){var n=zs.listen(e);return t.updateState(),n})),c(this,"block",(function(e){var n=zs.block(e);return t.updateState(),n})),x(this)}return l(e,[{key:"locationState",get:function(){return this.location.state?$(this.location.state):{}}},{key:"path",get:function(){var e;return(null===(e=this.location)||void 0===e?void 0:e.pathname)||"/"}}]),e}(),Ts="databases.".concat(fa.databaseId,".collections.").concat(Aa,".documents"),Cs=l((function e(){var n=this;s(this,e),c(this,"createSubject",new V),c(this,"reloadSubject",new V),c(this,"updateSubject",new V),c(this,"appwriteService",A(ro.appwriteService)),c(this,"realtimeService",A(ro.realtimeService)),c(this,"findById",function(){var e=r(t().mark((function e(r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.getDocument(fa.databaseId,Aa,r);case 2:return i=e.sent,e.abrupt("return",Ka(i));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"create",function(){var e=r(t().mark((function e(r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.createDocument(fa.databaseId,Aa,n.appwriteService.createId(),Ja(r));case 2:return i=e.sent,a=Ka(i),n.createSubject.next(a),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"update",function(){var e=r(t().mark((function e(r,i){var a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.updateDocument(fa.databaseId,Aa,r,Ja(i));case 2:return a=e.sent,e.abrupt("return",Ka(a));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"remove",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.deleteDocument(fa.databaseId,Aa,r);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findAllByApartmentId",function(){var e=r(t().mark((function e(r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,Aa,[C.orderDesc("$createdAt"),C.equal("apartment_id",r)]);case 2:return i=e.sent,a=i.documents,e.abrupt("return",Xa(a));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findAllByContactId",function(){var e=r(t().mark((function e(r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,Aa,[C.orderDesc("$createdAt"),C.equal("contact_id",r)]);case 2:return i=e.sent,a=i.documents,e.abrupt("return",Xa(a));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findByBidId",function(){var e=r(t().mark((function e(r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,Aa,[C.orderDesc("$createdAt"),C.equal("bid_id",r)]);case 2:return i=e.sent,a=i.documents,e.abrupt("return",Xa(a));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"prefetch",L(r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.realtimeService.subscribe(Ts,(function(e){var t=e.events,r=e.payload;if(t.includes(qa)&&(n.reloadSubject.next(),n.createSubject.next(r)),t.includes(Pa)&&n.reloadSubject.next(),t.includes(Ra)){var i=Ka(r);n.updateSubject.next([r.$id,i])}}));case 1:case"end":return e.stop()}}),e)}))))),T(this,{})})),Fs=l((function e(){var n=this;s(this,e),c(this,"serviceCommentDbService",A(ro.serviceCommentDbService)),c(this,"loggerService",A(ro.loggerService)),c(this,"createSubject",this.serviceCommentDbService.createSubject),c(this,"reloadSubject",this.serviceCommentDbService.reloadSubject),c(this,"updateSubject",this.serviceCommentDbService.updateSubject),c(this,"create",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("serviceCommentViewService create",r),e.next=3,n.serviceCommentDbService.create(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"update",function(){var e=r(t().mark((function e(r,i){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("serviceCommentViewService update",i),e.next=3,n.serviceCommentDbService.update(r,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"remove",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("serviceCommentViewService remove",{id:r}),e.next=3,n.serviceCommentDbService.remove(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"read",function(){var e=r(t().mark((function e(r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("serviceCommentViewService read",{id:r}),e.next=3,n.serviceCommentDbService.findById(r);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findAllByApartmentId",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.loggerService.log("serviceCommentViewService findAllByApartmentId"),r){e.next=3;break}throw new Error("serviceCommentViewService findAllByApartmentId id is null");case 3:return e.next=5,n.serviceCommentDbService.findAllByApartmentId(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findAllByContactId",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.loggerService.log("serviceCommentViewService findAllByContactId"),r){e.next=3;break}throw new Error("serviceCommentViewService findAllByContactId id is null");case 3:return e.next=5,n.serviceCommentDbService.findAllByContactId(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findByBidId",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.loggerService.log("serviceCommentViewService findByBidId"),r){e.next=3;break}throw new Error("serviceCommentViewService findByBidId id is null");case 3:return e.next=5,n.serviceCommentDbService.findByBidId(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"tryRead",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.loggerService.log("serviceCommentViewService tryRead",{id:r}),e.prev=1,"create"!==r){e.next=4;break}return e.abrupt("return",null);case 4:if("unknown"!==r){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,n.read(r);case 8:return e.abrupt("return",e.sent);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()),T(this,{})})),Ls={usd_eur:"0.9",usd_uzs:"1000",watermark_file_id:null,field_visibility:null,masterdetail_mode:[H.Paper]},Is="settings",Ms="databases.".concat(fa.databaseId,".collections.").concat(va,".documents"),js=l((function e(){var n=this;s(this,e),c(this,"appwriteService",A(ro.appwriteService)),c(this,"updateSubject",new V),c(this,"realtimeService",A(ro.realtimeService)),c(this,"create",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.createDocument(fa.databaseId,va,Is,Ls);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),c(this,"read",L(r(t().mark((function e(){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.getDocument(fa.databaseId,va,Is);case 2:return r=e.sent,e.abrupt("return",o(o({},Ls),Ka(r)));case 4:case"end":return e.stop()}}),e)}))))),c(this,"update",O(function(){var e=r(t().mark((function e(r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(1e3);case 2:return e.next=4,n.appwriteService.databases.updateDocument(fa.databaseId,va,Is,o(o({},Ls),Ja(r)));case 4:return i=e.sent,a=Ka(i),n.updateSubject.next([null,a]),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),c(this,"remove",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.deleteDocument(fa.databaseId,Is,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"prefetch",L(r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.realtimeService.subscribe(Ms,(function(e){var t=e.payload;n.read.clear();var r=Ka(t);n.updateSubject.next([null,r])}));case 1:case"end":return e.stop()}}),e)}))))),T(this,{})})),Bs=l((function e(){var n=this;s(this,e),c(this,"settingsDbService",A(ro.settingsDbService)),c(this,"loggerService",A(ro.loggerService)),c(this,"appwriteService",A(ro.appwriteService)),c(this,"updateSubject",this.settingsDbService.updateSubject),c(this,"getExchangeRate",function(){var e=r(t().mark((function e(r){var i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getValue();case 2:if(i=e.sent,a=i.usd_eur,o=i.usd_uzs,"usd_eur"!==r||isNaN(a)){e.next=7;break}return e.abrupt("return",parseFloat(a));case 7:if("usd_uzs"!==r||isNaN(o)){e.next=9;break}return e.abrupt("return",parseFloat(o));case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"getMasterDetailMode",r(t().mark((function e(){var r,i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getValue();case 2:if(r=e.sent,i=r.masterdetail_mode,(a=null!=i&&i.length?i[0]:null)!==H.Tabs){e.next=7;break}return e.abrupt("return",H.Tabs);case 7:if(a!==H.Paper){e.next=9;break}return e.abrupt("return",H.Paper);case 9:return e.abrupt("return",H.Paper);case 10:case"end":return e.stop()}}),e)})))),c(this,"getValue",Z(r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.loggerService.log("settingsViewService getValue"),e.prev=1,n.appwriteService.isAuthorized){e.next=4;break}return e.abrupt("return",Ls);case 4:return e.next=6,n.settingsDbService.read();case 6:case 13:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(1),e.next=13,n.settingsDbService.create();case 14:case"end":return e.stop()}}),e,null,[[1,9]])}))))),c(this,"setValue",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("settingsViewService setValue",r),e.next=3,n.settingsDbService.update(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T(this,{})})),Ds=["Просрочено","Новые задачи","На сегодня","На завтра","На следующую неделю","Выполненные задачи"],Rs={"На завтра":To()+1,"На сегодня":To(),"На следующую неделю":To()+7,"Просрочено":To()-1},qs=function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==n){e.next=2;break}return e.abrupt("return","Новые задачи");case 2:if(!(n<=Rs["Просрочено"])){e.next=4;break}return e.abrupt("return","Просрочено");case 4:if(n!==Rs["На сегодня"]){e.next=6;break}return e.abrupt("return","На сегодня");case 6:if(n!==Rs["На завтра"]){e.next=8;break}return e.abrupt("return","На завтра");case 8:if(!(n>Rs["На завтра"]&&n<=Rs["На следующую неделю"])){e.next=10;break}return e.abrupt("return","На следующую неделю");case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ps=function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.is_complete){e.next=2;break}return e.abrupt("return","Выполненные задачи");case 2:return e.next=4,qs(n.moment_stamp);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Es="databases.".concat(fa.databaseId,".collections.").concat(za,".documents"),Ns=l((function e(){var n=this;s(this,e),c(this,"reloadSubject",new V),c(this,"createSubject",new V),c(this,"removeSubject",new V),c(this,"updateSubject",new V),c(this,"appwriteService",A(ro.appwriteService)),c(this,"realtimeService",A(ro.realtimeService)),c(this,"createIndex",r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,za,[C.limit(1),C.select(["index"])]);case 2:return r=e.sent,i=r.total,e.abrupt("return",i+1);case 5:case"end":return e.stop()}}),e)})))),c(this,"findById",function(){var e=r(t().mark((function e(r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.getDocument(fa.databaseId,za,r);case 2:return i=e.sent,e.abrupt("return",Ka(i));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findDailyTaskByUserId",function(){var e=r(t().mark((function e(r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,za,[C.equal("moment_stamp",Rs["На сегодня"]),C.equal("to_user_id",r)]);case 2:return i=e.sent,a=i.documents,e.abrupt("return",Xa(a));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findByTaskStatus",function(){var e=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],"Просрочено"!==n){e.next=5;break}return e.next=4,Po(Do(za,[C.lessThanEqual("moment_stamp",Rs.Просрочено)]));case 4:r=e.sent;case 5:if("На сегодня"!==n){e.next=9;break}return e.next=8,Po(Do(za,[C.equal("moment_stamp",Rs["На сегодня"])]));case 8:r=e.sent;case 9:if("На завтра"!==n){e.next=13;break}return e.next=12,Po(Do(za,[C.equal("moment_stamp",Rs["На завтра"])]));case 12:r=e.sent;case 13:if("На следующую неделю"!==n){e.next=17;break}return e.next=16,Po(Do(za,[C.greaterThan("moment_stamp",Rs["На завтра"]),C.lessThanEqual("moment_stamp",Rs["На следующую неделю"])]));case 16:r=e.sent;case 17:if("Новые задачи"!==n){e.next=21;break}return e.next=20,Po(Do(za,[C.isNull("moment_stamp"),C.equal("is_complete",!1)]));case 20:r=e.sent;case 21:if("Выполненные задачи"!==n){e.next=25;break}return e.next=24,Po(Do(za,[C.equal("is_complete",!0)]));case 24:r=e.sent;case 25:return e.abrupt("return",Xa(r));case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findByTaskStatusAndContactId",function(){var e=r(t().mark((function e(n,r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=[],"Просрочено"!==n){e.next=5;break}return e.next=4,Po(Do(za,[C.lessThanEqual("moment_stamp",Rs.Просрочено),C.equal("contact_id",r)]));case 4:i=e.sent;case 5:if("На сегодня"!==n){e.next=9;break}return e.next=8,Po(Do(za,[C.equal("moment_stamp",Rs["На сегодня"]),C.equal("contact_id",r)]));case 8:i=e.sent;case 9:if("На завтра"!==n){e.next=13;break}return e.next=12,Po(Do(za,[C.equal("moment_stamp",Rs["На завтра"]),C.equal("contact_id",r)]));case 12:i=e.sent;case 13:if("На следующую неделю"!==n){e.next=17;break}return e.next=16,Po(Do(za,[C.greaterThan("moment_stamp",Rs["На завтра"]),C.lessThanEqual("moment_stamp",Rs["На следующую неделю"]),C.equal("contact_id",r)]));case 16:i=e.sent;case 17:if("Новые задачи"!==n){e.next=21;break}return e.next=20,Po(Do(za,[C.isNull("moment_stamp"),C.equal("is_complete",!1),C.equal("contact_id",r)]));case 20:i=e.sent;case 21:if("Выполненные задачи"!==n){e.next=25;break}return e.next=24,Po(Do(za,[C.equal("is_complete",!0),C.equal("contact_id",r)]));case 24:i=e.sent;case 25:return e.abrupt("return",Xa(i));case 26:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"create",function(){var e=r(t().mark((function e(r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n.appwriteService.databases,e.t1=fa.databaseId,e.t2=za,e.t3=n.appwriteService.createId(),e.t4=o,e.t5=o({is_complete:!1},Ja(r)),e.t6={},e.next=9,n.createIndex();case 9:return e.t7=e.sent,e.t8={index:e.t7},e.t9=(0,e.t4)(e.t5,e.t6,e.t8),e.next=14,e.t0.createDocument.call(e.t0,e.t1,e.t2,e.t3,e.t9);case 14:return i=e.sent,a=Ka(i),n.createSubject.next(a),e.abrupt("return",a);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"update",function(){var e=r(t().mark((function e(r,i){var a,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.updateDocument(fa.databaseId,za,r,o({},Ja(i)));case 2:return a=e.sent,s=Ka(a),n.updateSubject.next([r,s]),e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"remove",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.deleteDocument(fa.databaseId,za,r);case 2:n.removeSubject.next(r);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"prefetch",L((function(){var e=function(){var e=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.realtimeService.subscribe(Es,(function(e){var t=e.events,r=e.payload;if(t.includes(qa)){var i=Ka(r);n.reloadSubject.next(),n.createSubject.next(i)}if(t.includes(Pa)&&(n.reloadSubject.next(),n.removeSubject.next(r.$id)),t.includes(Ra)){var a=Ka(r);n.updateSubject.next([r.$id,a])}}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}))),T(this,{})})),Os="databases.".concat(fa.databaseId,".collections.").concat(Fa,".documents"),Us=l((function e(){var n=this;s(this,e),c(this,"createSubject",new V),c(this,"reloadSubject",new V),c(this,"updateSubject",new V),c(this,"appwriteService",A(ro.appwriteService)),c(this,"realtimeService",A(ro.realtimeService)),c(this,"findById",function(){var e=r(t().mark((function e(r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.getDocument(fa.databaseId,Fa,r);case 2:return i=e.sent,e.abrupt("return",Ka(i));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"create",function(){var e=r(t().mark((function e(r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.createDocument(fa.databaseId,Fa,n.appwriteService.createId(),Ja(r));case 2:return i=e.sent,e.abrupt("return",Ka(i));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"update",function(){var e=r(t().mark((function e(r,i){var a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.updateDocument(fa.databaseId,Fa,r,Ja(i));case 2:return a=e.sent,e.abrupt("return",Ka(a));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"remove",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.deleteDocument(fa.databaseId,Fa,r);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findAllByContactId",function(){var e=r(t().mark((function e(r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,Fa,[C.orderDesc("$createdAt"),C.equal("contact_id",r)]);case 2:return i=e.sent,a=i.documents,e.abrupt("return",Xa(a));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findAllByTaskId",function(){var e=r(t().mark((function e(r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,Fa,[C.orderDesc("$createdAt"),C.equal("task_id",r)]);case 2:return i=e.sent,a=i.documents,e.abrupt("return",Xa(a));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findAllByUserId",function(){var e=r(t().mark((function e(r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,Fa,[C.orderDesc("$createdAt"),C.equal("user_id",r)]);case 2:return i=e.sent,a=i.documents,e.abrupt("return",Xa(a));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"prefetch",L(r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.realtimeService.subscribe(Os,(function(e){var t=e.events,r=e.payload;if(t.includes(qa)&&(n.reloadSubject.next(),n.createSubject.next(r)),t.includes(Pa)&&n.reloadSubject.next(),t.includes(Ra)){var i=Ka(r);n.updateSubject.next([r.$id,i])}}));case 1:case"end":return e.stop()}}),e)}))))),T(this,{})})),Hs=l((function e(){var n=this;s(this,e),c(this,"taskHistoryViewService",A(ro.taskHistoryViewService)),c(this,"appwriteService",A(ro.appwriteService)),c(this,"contactViewService",A(ro.contactViewService)),c(this,"userViewService",A(ro.userViewService)),c(this,"taskReassignCommit",function(){var e=r(t().mark((function e(r,i,a,o){var s,u,l,c,d,p,m,f;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.appwriteService.currentUser.$id,e.next=3,Fl.userViewService.read(i);case 3:return u=e.sent,l=u.first_name,c=u.last_name,d=u.middle_name,p=[c,l,d].filter((function(e){return e})).join(" "),m="передал задачу (новый ответственный ".concat(p,")"),f=["Сотрудник ".concat(m),o?"Задача: ".concat(o):null,"Комментарий: ".concat(a)].filter((function(e){return e})).join("\n"),e.next=12,n.taskHistoryViewService.create({user_id:s,task_id:r,contact_id:null,comment:f});case 12:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()),c(this,"todoTaskCommit",function(){var e=r(t().mark((function e(r,i,a,o,s,u){var l,c,d,p,m,f,h,y;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=n.appwriteService.currentUser.$id,e.next=3,Fl.userViewService.read(i);case 3:return c=e.sent,d=c.first_name,p=c.last_name,m=c.middle_name,f=[p,d,m].filter((function(e){return e})).join(" "),h=null===a?"создал задачу (ответственный ".concat(f,")"):"перенес задачу (<text-underline>".concat(a,"</text-underline> -> <text-underline>").concat(o,"</text-underline>)"),y=["Сотрудник ".concat(h),u?"Задача: ".concat(u):null,"Комментарий: ".concat(s)].filter((function(e){return e})).join("\n"),e.next=12,n.taskHistoryViewService.create({user_id:l,task_id:r,contact_id:null,comment:y});case 12:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a,o){return e.apply(this,arguments)}}()),c(this,"clientTaskCommit",function(){var e=r(t().mark((function e(r,i,a,o,s,u,l){var c,d,p,m,f,h,y,v,b,_;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.appwriteService.currentUser.$id,e.next=3,Fl.userViewService.read(i);case 3:return d=e.sent,p=d.first_name,m=d.last_name,f=d.middle_name,h=[m,p,f].filter((function(e){return e})).join(" "),e.next=10,n.contactViewService.read(a);case 10:return y=e.sent,v=y.fio,b=null===o?"создал задачу (ответственный ".concat(h,")"):"перенес задачу (<text-underline>".concat(o,"</text-underline> -> <text-underline>").concat(s,"</text-underline>)"),_=["Сотрудник ".concat(b),"Контакт: ".concat(v),l?"Задача: ".concat(l):null,"Комментарий: ".concat(u)].filter((function(e){return e})).join("\n"),e.next=16,n.taskHistoryViewService.create({user_id:c,task_id:r,contact_id:a,comment:_});case 16:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a,o,s){return e.apply(this,arguments)}}()),T(this,{})})),Ws=l((function e(){var n=this;s(this,e),c(this,"taskHistoryDbService",A(ro.taskHistoryDbService)),c(this,"loggerService",A(ro.loggerService)),c(this,"createSubject",this.taskHistoryDbService.createSubject),c(this,"reloadSubject",this.taskHistoryDbService.reloadSubject),c(this,"updateSubject",this.taskHistoryDbService.updateSubject),c(this,"create",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("taskHistoryViewService create",r),e.next=3,n.taskHistoryDbService.create(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"update",function(){var e=r(t().mark((function e(r,i){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("taskHistoryViewService update",i),e.next=3,n.taskHistoryDbService.update(r,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"remove",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("taskHistoryViewService remove",{id:r}),e.next=3,n.taskHistoryDbService.remove(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"read",function(){var e=r(t().mark((function e(r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("taskHistoryViewService read",{id:r}),e.next=3,n.taskHistoryDbService.findById(r);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findAllByContactId",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("taskHistoryViewService findAllByContactId"),e.next=3,n.taskHistoryDbService.findAllByContactId(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findAllByTaskId",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("taskHistoryViewService findAllByTaskId"),e.next=3,n.taskHistoryDbService.findAllByTaskId(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findAllByUserId",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("taskHistoryViewService findAllByTaskId"),e.next=3,n.taskHistoryDbService.findAllByUserId(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"tryRead",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.loggerService.log("taskHistoryViewService tryRead",{id:r}),e.prev=1,"create"!==r){e.next=4;break}return e.abrupt("return",null);case 4:if("unknown"!==r){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,n.read(r);case 8:return e.abrupt("return",e.sent);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()),T(this,{})})),$s="Wrong or invalid email!",Gs="Your password is incorrect !",Ys="The user was not found !",Ks="Unexpected error, please try again later.",Xs=function(e){return"auth/user-not-found"===e.code?Ys:"auth/wrong-password"===e.code?Gs:"auth/invalid-email"===e.code?$s:ae(e)||Ks},Js=l((function e(){var n=this;s(this,e),c(this,"taskHistoryRequestService",A(ro.taskHistoryRequestService)),c(this,"taskViewService",A(ro.taskViewService)),c(this,"userViewService",A(ro.userViewService)),c(this,"contactViewService",A(ro.contactViewService)),c(this,"appwriteService",A(ro.appwriteService)),c(this,"notifyViewService",A(ro.notifyViewService)),c(this,"tryCommitReassignTask",function(){var e=r(t().mark((function e(r,i,a,o){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.taskHistoryRequestService.taskReassignCommit(r,i,a,o);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(Xs(e.t0));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()),c(this,"tryCommitTodoTask",function(){var e=r(t().mark((function e(r,i,a,o,s,u){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.taskHistoryRequestService.todoTaskCommit(r,i,a,o,s,u);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(Xs(e.t0));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n,r,i,a,o){return e.apply(this,arguments)}}()),c(this,"tryCommitClientTask",function(){var e=r(t().mark((function e(r,i,a,o,s,u){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.taskHistoryRequestService.clientTaskCommit(r,i,a,o,s,u);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(Xs(e.t0));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n,r,i,a,o){return e.apply(this,arguments)}}()),c(this,"createTodoTask",function(){var e=r(t().mark((function e(r,i,a,o,s){var u,l,c,d,p,m,f,h,y,v,b,_,k,g;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=n.appwriteService.currentUser.$id,e.next=3,n.userViewService.read(u);case 3:return d=e.sent,p=d.first_name,m=d.last_name,f=d.middle_name,l=[m,p,f].filter((function(e){return e})).join(" "),e.next=10,n.userViewService.read(r);case 10:return h=e.sent,y=h.first_name,v=h.last_name,b=h.middle_name,c=[v,y,b].filter((function(e){return e})).join(" "),e.next=17,n.taskViewService.create({from_user_id:u,to_user_id:r,contact_id:null,moment_stamp:i,time_stamp:a,type:"Внутренняя",is_call:!1,is_meet:!1,from_user_fio:l,to_user_fio:c,contact_fio:"",title:o});case 17:return _=e.sent,k=_.id,e.next=21,qs(i);case 21:return g=e.sent,e.next=24,Promise.all([n.tryCommitTodoTask(k,r,null,g||"Новые задачи",s,o),n.notifyViewService.create({title:"На вас назначена внутренняя задача",url:"/task_mine",user_id:r})]);case 24:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a){return e.apply(this,arguments)}}()),c(this,"createClientTask",function(){var e=r(t().mark((function e(r,i,a,o,s,u,l,c){var d,p,m,f,h,y,v,b,_,k,g,x,w,S,z,V,A;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=n.appwriteService.currentUser.$id,e.next=3,n.userViewService.read(d);case 3:return h=e.sent,y=h.first_name,v=h.last_name,b=h.middle_name,p=[v,y,b].filter((function(e){return e})).join(" "),e.next=10,n.userViewService.read(r);case 10:return _=e.sent,k=_.first_name,g=_.last_name,x=_.middle_name,m=[g,k,x].filter((function(e){return e})).join(" "),e.next=17,n.contactViewService.read(i);case 17:return w=e.sent,S=w.fio,f=S,e.next=22,n.taskViewService.create({from_user_id:d,to_user_id:r,contact_id:i,moment_stamp:a,time_stamp:o,is_call:u,is_meet:l,type:"Клиент",from_user_fio:p,to_user_fio:m,contact_fio:f,title:s});case 22:return z=e.sent,V=z.id,e.next=26,qs(a);case 26:return A=e.sent,e.next=29,Promise.all([n.tryCommitClientTask(V,r,i,null,A||"Новые задачи",c),n.notifyViewService.create({title:"На вас назначена задача по клиенту",url:"/task_mine",user_id:r})]);case 29:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a,o,s,u){return e.apply(this,arguments)}}()),c(this,"updateTodoTask",function(){var e=r(t().mark((function e(r,i,a,o,s,u,l,c){var d,p,m,f;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=n.appwriteService.currentUser.$id,e.next=3,n.taskViewService.update(r,{from_user_id:d,to_user_id:i,contact_id:null,moment_stamp:o,time_stamp:s,is_complete:u,is_call:!1,is_meet:!1,type:"Внутренняя",title:l});case 3:return p=e.sent,m=p.id,e.next=7,qs(o);case 7:return f=e.sent,e.next=10,n.tryCommitTodoTask(m,i,a,f||(u?"Выполненные задачи":"Новые задачи"),c,l);case 10:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a,o,s,u){return e.apply(this,arguments)}}()),c(this,"updateClientTask",function(){var e=r(t().mark((function e(r,i,a,o,s,u,l,c,d,p,m){var f,h,y,v;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f=n.appwriteService.currentUser.$id,e.next=3,n.taskViewService.update(r,{from_user_id:f,to_user_id:i,contact_id:o,moment_stamp:s,time_stamp:u,is_complete:l,is_meet:d,is_call:c,type:"Клиент",title:p});case 3:return h=e.sent,y=h.id,e.next=7,qs(s);case 7:return v=e.sent,e.next=10,n.tryCommitClientTask(y,i,o,a,v||(l?"Выполненные задачи":"Новые задачи"),m);case 10:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a,o,s,u,l,c,d){return e.apply(this,arguments)}}()),c(this,"reassignClientTask",function(){var e=r(t().mark((function e(r,i,a,o){var s,u,l,c,d;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.userViewService.read(i);case 2:return s=e.sent,u=s.last_name,l=s.first_name,c=s.middle_name,d=[u,l,c].filter((function(e){return e})).join(" "),e.next=9,n.taskViewService.update(r,{to_user_id:i,to_user_fio:d});case 9:return e.next=11,Promise.all([n.tryCommitReassignTask(r,i,a,o),n.notifyViewService.create({title:"На вас переназначена задача",url:"/task_mine",user_id:i})]);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()),T(this,{})})),Zs=l((function e(){var n=this;s(this,e),c(this,"taskDbService",A(ro.taskDbService)),c(this,"loggerService",A(ro.loggerService)),c(this,"reloadSubject",this.taskDbService.reloadSubject),c(this,"createSubject",this.taskDbService.createSubject),c(this,"removeSubject",this.taskDbService.removeSubject),c(this,"updateSubject",this.taskDbService.updateSubject),c(this,"create",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("taskViewService create",r),e.next=3,n.taskDbService.create(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"update",function(){var e=r(t().mark((function e(r,i){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("taskViewService update",i),e.next=3,n.taskDbService.update(r,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"remove",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("taskViewService remove",{id:r}),e.next=3,n.taskDbService.remove(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"read",function(){var e=r(t().mark((function e(r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("taskViewService read",{id:r}),e.next=3,n.taskDbService.findById(r);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"tryRead",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.loggerService.log("taskViewService tryRead",{id:r}),e.prev=1,"create"!==r){e.next=4;break}return e.abrupt("return",null);case 4:if("unknown"!==r){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,n.read(r);case 8:return e.abrupt("return",e.sent);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()),c(this,"findByTaskStatus",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("taskViewService findByTaskStatus"),e.next=3,n.taskDbService.findByTaskStatus(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findByTaskStatusAndContactId",function(){var e=r(t().mark((function e(r,i){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("taskViewService findByTaskStatusAndContactId"),e.next=3,n.taskDbService.findByTaskStatusAndContactId(r,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"findDailyTaskByUserId",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("taskViewService findDailyTaskByUserId"),e.next=3,n.taskDbService.findDailyTaskByUserId(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T(this,{})})),Qs="databases.".concat(fa.databaseId,".collections.").concat(ya,".documents"),eu=l((function e(){var n=this;s(this,e),c(this,"reloadSubject",new V),c(this,"updateSubject",new V),c(this,"appwriteService",A(ro.appwriteService)),c(this,"realtimeService",A(ro.realtimeService)),c(this,"getMetadata",(function(e){var t=[];return t.push(e.middle_name),t.push(e.last_name),t.push(e.first_name),t.push(e.email),t.push(e.phone),t.join(" ").slice(0,1024)})),c(this,"createIndex",r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,ka,[C.limit(1),C.select(["index"])]);case 2:return r=e.sent,i=r.total,e.abrupt("return",i+1);case 5:case"end":return e.stop()}}),e)})))),c(this,"findById",function(){var e=r(t().mark((function e(r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.findAll();case 2:if(i=e.sent,a=i.find((function(e){return e.id===r}))){e.next=6;break}throw new Error("userDbService findById user not found");case 6:return e.abrupt("return",Ka(a));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"paginate",r(t().mark((function e(){var n,r,i,a,o,s=arguments;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=s.length,r=new Array(n),i=0;i<n;i++)r[i]=s[i];return a=oe(r),e.next=4,Po(Do(ya,[C.equal("system_is_remove",!!a._archive)]));case 4:return o=e.sent,e.abrupt("return",Xa(o));case 6:case"end":return e.stop()}}),e)})))),c(this,"findAll",L(r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Po(Do(ya));case 2:return n=e.sent,e.abrupt("return",Xa(n));case 4:case"end":return e.stop()}}),e)}))))),c(this,"toggleArchive",function(){var e=r(t().mark((function e(r){var i,a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.findById(r);case 2:return i=e.sent,a=i.system_is_remove,e.next=6,n.appwriteService.databases.updateDocument(fa.databaseId,ya,r,{system_is_remove:!a});case 6:o=e.sent,s=Ka(o),n.updateSubject.next([r,s]),n.reloadSubject.next();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"update",function(){var e=r(t().mark((function e(r,i){var a,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n.appwriteService.databases,e.t1=fa.databaseId,e.t2=ya,e.t3=r,e.t4=o,e.t5=o({},Ja(i)),e.t6={},e.next=9,n.getMetadata(i);case 9:return e.t7=e.sent,e.t8={system_metadata:e.t7},e.t9=(0,e.t4)(e.t5,e.t6,e.t8),e.next=14,e.t0.updateDocument.call(e.t0,e.t1,e.t2,e.t3,e.t9);case 14:return a=e.sent,n.findAll.clear(),s=Ka(a),n.updateSubject.next([r,s]),e.abrupt("return",s);case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"remove",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.findAll.clear(),e.next=3,n.appwriteService.databases.deleteDocument(fa.databaseId,ya,r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"prefetch",L(r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.realtimeService.subscribe(Qs,(function(e){var t=e.events,r=e.payload;if(t.includes(qa)&&(n.findAll.clear(),n.reloadSubject.next()),t.includes(Pa)&&(n.findAll.clear(),n.reloadSubject.next()),t.includes(Ra)){n.findAll.clear();var i=Ka(r);n.updateSubject.next([r.$id,i])}}));case 1:case"end":return e.stop()}}),e)}))))),T(this,{})})),tu=l((function e(){var n=this;s(this,e),c(this,"userDbService",A(ro.userDbService)),c(this,"loggerService",A(ro.loggerService)),c(this,"reloadSubject",this.userDbService.reloadSubject),c(this,"updateSubject",this.userDbService.updateSubject),c(this,"update",function(){var e=r(t().mark((function e(r,i){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("userViewService update",i),e.next=3,n.userDbService.update(r,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"remove",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("userViewService remove",{id:r}),e.next=3,n.userDbService.remove(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"read",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("userViewService read",{id:r}),e.next=3,n.userDbService.findById(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"toggleArchive",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("userViewService toggleArchive",{id:r}),e.next=3,n.userDbService.toggleArchive(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"tryRead",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.loggerService.log("userViewService tryRead",{id:r}),e.prev=1,"create"!==r){e.next=4;break}return e.abrupt("return",null);case 4:if("unknown"!==r){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,n.read(r);case 8:return e.abrupt("return",e.sent);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()),c(this,"paginate",r(t().mark((function e(){var r,i=arguments;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("userViewService paginate"),e.next=3,(r=n.userDbService).paginate.apply(r,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))),c(this,"findAll",r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("userViewService findAll"),e.next=3,n.userDbService.findAll();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))),T(this,{})})),nu=l((function e(){var n=this;s(this,e),c(this,"readyStateSubject",new se(!1)),c(this,"suggest",function(){var e=r(t().mark((function e(r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.init();case 2:return e.next=4,ymaps.suggest(r);case 4:return i=e.sent,e.abrupt("return",i.map((function(e){return e.value})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"geocode",function(){var e=r(t().mark((function e(r){var a,o,s,u,l,c;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.init();case 2:return e.next=4,ymaps.geocode(r);case 4:if(a=e.sent,!(o=a.geoObjects.get(0))){e.next=9;break}return s=o.geometry.getCoordinates(),u=i(s,2),l=u[0],c=u[1],e.abrupt("return",{lat:l,lon:c});case 9:return e.abrupt("return",{lat:null,lon:null});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"openAddress",function(){var e=r(t().mark((function e(r){var i,a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.init();case 2:return e.next=4,n.geocode(r);case 4:i=e.sent,a=i.lat,o=i.lon,a&&o&&((s=new URL("https://maps.yandex.com")).searchParams.set("ll","".concat(o,", ").concat(a)),s.searchParams.set("text",r),s.searchParams.set("z","16"),ue(s.toString()));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"getAddressString",function(){var e=r(t().mark((function e(r){var i,a,o,s,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.lat,a=r.lon,e.next=3,n.init();case 3:return o=[i,a],e.next=6,ymaps.geocode(o);case 6:return s=e.sent,u=s.geoObjects.get(0),e.abrupt("return",u.getAddressLine());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"getAddress",function(){var e=r(t().mark((function e(r){var i,a,o,s,u,l,c,d,p,m,f;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.lat,a=r.lon,e.next=3,n.init();case 3:return o=[i,a],e.next=6,ymaps.geocode(o);case 6:return s=e.sent,u=s.geoObjects.get(0),l=u.getAdministrativeAreas()||"",c=u.getPremise()||"",d=u.getLocalities()||"",p=u.getThoroughfare()||"",m=u.getCountry()||"",f=u.getPremiseNumber()||"",Array.isArray(d)&&(d=d[1]||""),Array.isArray(p)&&(p=p[0]||""),Array.isArray(c)&&(c=c[0]||""),Array.isArray(l)&&(l=l[0]||""),Array.isArray(m)&&(m=m[0]||""),Array.isArray(f)&&(f=f[0]||""),e.abrupt("return",{strana:m.toString(),gorod:l.toString(),nomer_doma:f.toString(),rajon:d.toString(),ulicza:p.toString(),metro:null,mahallya:c.toString()});case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"drawMap",(function(e,i){var a=i.address,o=i.change,s=null,u=null;console.log({address:a});var l=function(){var i=r(t().mark((function i(){var l,c,d,p;return t().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,n.init();case 2:if(!a){i.next=8;break}return i.next=5,n.geocode(a);case 5:i.t0=i.sent,i.next=9;break;case 8:i.t0={lat:null,lon:null};case 9:if(l=i.t0,!(l.lat&&l.lon)){i.next=17;break}s=new ymaps.Map(e,{center:[l.lat,l.lon],zoom:9}),u=new ymaps.Placemark([l.lat,l.lon],{iconCaption:a},{preset:"islands#violetDotIconWithCaption",draggable:!0}),s.geoObjects.add(u),i.next=23;break;case 17:return i.next=19,n.geocode("Ташкент, Узбекистан");case 19:c=i.sent,d=c.lat,p=c.lon,s=new ymaps.Map(e,{center:[d,p],zoom:10});case 23:s.events.add("click",function(){var e=r(t().mark((function e(r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.get("coords"),u||(u=new ymaps.Placemark(i,{iconCaption:"поиск..."},{preset:"islands#violetDotIconWithCaption",draggable:!0}),s&&s.geoObjects.add(u)),u.geometry.setCoordinates(i),u.properties.set({iconCaption:"поиск..."}),e.t0=u.properties,e.next=7,n.getAddressString({lat:i[0],lon:i[1]});case 7:e.t1=e.sent,e.t2={iconCaption:e.t1},e.t0.set.call(e.t0,e.t2),o({lat:i[0],lon:i[1]});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 24:case"end":return i.stop()}}),i)})));return function(){return i.apply(this,arguments)}}();return l(),function(){var e;null===(e=s)||void 0===e||e.destroy(),s=null}})),c(this,"init",L(r(t().mark((function e(){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new URL("2.1","https://api-maps.yandex.ru")).searchParams.set("apikey","03219f2d-b9b3-4850-98ea-9db0670d8a6b"),r.searchParams.set("lang","ru"),r.searchParams.set("load","SuggestView,suggest,geocode,Map,Placemark"),e.next=6,le(r.toString());case 6:return e.next=8,ymaps.ready();case 8:n.readyStateSubject.next(!0);case 9:case"end":return e.stop()}}),e)}))))),T(this,{})})),ru=l((function e(){var n=this;s(this,e),c(this,"appwriteService",A(ro.appwriteService)),c(this,"getAllApartmentCount",ce(r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,_a,[C.select(["$id"]),C.limit(1)]);case 2:return r=e.sent,i=r.total,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)}))))),c(this,"getRentApartmentCount",ce(r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,_a,[C.select(["$id"]),C.equal("system_is_rent",!0),C.equal("system_is_archive",!1),C.limit(1)]);case 2:return r=e.sent,i=r.total,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)}))))),c(this,"getSellApartmentCount",ce(r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,_a,[C.select(["$id"]),C.equal("system_is_sell",!0),C.equal("system_is_archive",!1),C.limit(1)]);case 2:return r=e.sent,i=r.total,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)}))))),c(this,"getArchiveApartmentCount",ce(r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,_a,[C.select(["$id"]),C.equal("system_is_archive",!0),C.limit(1)]);case 2:return r=e.sent,i=r.total,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)}))))),c(this,"getNewApartmentCount",ce(r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,_a,[C.select(["$id"]),C.equal("system_is_rent",!1),C.equal("system_is_sell",!1),C.equal("system_is_archive",!1),C.limit(1)]);case 2:return r=e.sent,i=r.total,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)}))))),c(this,"getTotalDealCount",ce(r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,Sa,[C.select(["$id"]),C.limit(1)]);case 2:return r=e.sent,i=r.total,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)}))))),c(this,"getMyDealCount",ce(r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,Sa,[C.select(["$id"]),C.equal("user_id",n.appwriteService.currentUser.$id),C.limit(1)]);case 2:return r=e.sent,i=r.total,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)}))))),c(this,"getNewDealCount",ce(r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,Sa,[C.select(["$id"]),C.equal("status","Новая сделка"),C.limit(1)]);case 2:return r=e.sent,i=r.total,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)}))))),c(this,"getArchiveDealCount",ce(r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,Sa,[C.select(["$id"]),C.equal("status",["Закрытая сделка","Сделка сорвана"]),C.limit(1)]);case 2:return r=e.sent,i=r.total,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)}))))),T(this,{})})),iu="databases.".concat(fa.databaseId,".collections.").concat(La,".documents"),au=l((function e(){var n=this;s(this,e),c(this,"reloadSubject",new V),c(this,"updateSubject",new V),c(this,"createSubject",new V),c(this,"appwriteService",A(ro.appwriteService)),c(this,"realtimeService",A(ro.realtimeService)),c(this,"createIndex",r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,La,[C.limit(1),C.select(["index"])]);case 2:return r=e.sent,i=r.total,e.abrupt("return",i+1);case 5:case"end":return e.stop()}}),e)})))),c(this,"getIdByApartment",function(){var e=r(t().mark((function e(r){var a,o,s,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,La,[C.equal("apartment_id",r),C.select(["$id"]),C.limit(1)]);case 2:if(a=e.sent,o=i(a.documents,1),s=o[0],u=void 0===s?null:s){e.next=8;break}throw new Error("advertisingDbService getIdByApartment document not found");case 8:return e.abrupt("return",u.$id);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findById",function(){var e=r(t().mark((function e(r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.getDocument(fa.databaseId,La,r);case 2:return i=e.sent,e.abrupt("return",Ka(i));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findByApartmentId",function(){var e=r(t().mark((function e(r){var a,o,s,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,La,[C.equal("apartment_id",r),C.limit(1)]);case 2:if(a=e.sent,o=i(a.documents,1),s=o[0],u=void 0===s?null:s){e.next=8;break}throw new Error("advertisingDbService findByApartmentId document not found");case 8:return e.abrupt("return",Ka(u));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"create",function(){var e=r(t().mark((function e(r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n.appwriteService.databases,e.t1=fa.databaseId,e.t2=La,e.t3=n.appwriteService.createId(),e.t4=o,e.t5=o({},Ja(r)),e.t6={},e.t7=n.appwriteService.currentUser.$id,e.next=10,n.createIndex();case 10:return e.t8=e.sent,e.t9={system_created_by:e.t7,index:e.t8},e.t10=(0,e.t4)(e.t5,e.t6,e.t9),e.next=15,e.t0.createDocument.call(e.t0,e.t1,e.t2,e.t3,e.t10);case 15:return i=e.sent,a=Ka(i),n.createSubject.next(a),e.abrupt("return",a);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"update",function(){var e=r(t().mark((function e(r,i){var a,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.updateDocument(fa.databaseId,La,r,o({},Ja(i)));case 2:return a=e.sent,s=Ka(a),n.updateSubject.next([r,s]),e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"remove",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.deleteDocument(fa.databaseId,La,r);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"prefetch",L(r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.realtimeService.subscribe(iu,(function(e){var t=e.events,r=e.payload;if(t.includes(qa)){var i=Ka(r);n.reloadSubject.next(),n.createSubject.next(i)}if(t.includes(Pa)&&n.reloadSubject.next(),t.includes(Ra)){var a=Ka(r);n.updateSubject.next([r.$id,a])}}));case 1:case"end":return e.stop()}}),e)}))))),T(this,{})})),ou=l((function e(){var n=this;s(this,e),c(this,"advertisingDbService",A(ro.advertisingDbService)),c(this,"loggerService",A(ro.loggerService)),c(this,"reloadSubject",this.advertisingDbService.reloadSubject),c(this,"updateSubject",this.advertisingDbService.updateSubject),c(this,"createSubject",this.advertisingDbService.createSubject),c(this,"findByApartmentId",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("advertisingViewService findByApartmentId"),e.next=3,n.advertisingDbService.findByApartmentId(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"create",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("advertisingViewService create",r),e.next=3,n.advertisingDbService.create(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"update",function(){var e=r(t().mark((function e(r,i){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("advertisingViewService update",i),e.next=3,n.advertisingDbService.update(r,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"remove",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("advertisingViewService remove",{id:r}),e.next=3,n.advertisingDbService.remove(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"read",function(){var e=r(t().mark((function e(r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("advertisingViewService read",{id:r}),e.next=3,n.advertisingDbService.findById(r);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"getIdByApartment",function(){var e=r(t().mark((function e(r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("advertisingViewService getIdByApartment",{apartmentId:r}),e.next=3,n.advertisingDbService.getIdByApartment(r);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"tryRead",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.loggerService.log("advertisingViewService tryRead",{id:r}),e.prev=1,"create"!==r){e.next=4;break}return e.abrupt("return",null);case 4:if("unknown"!==r){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,n.read(r);case 8:return e.abrupt("return",e.sent);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()),c(this,"tryReadByApartmentId",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.loggerService.log("tryReadByApartmentId tryRead",{apartmentId:r}),e.prev=1,"create"!==r){e.next=4;break}return e.abrupt("return",null);case 4:if("unknown"!==r){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,n.advertisingDbService.findByApartmentId(r);case 8:return e.abrupt("return",e.sent);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()),T(this,{})})),su=l((function e(){var n=this;s(this,e),c(this,"appwriteService",A(ro.appwriteService)),c(this,"getAllBidCount",ce(r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,wa,[C.select(["$id"]),C.limit(1)]);case 2:return r=e.sent,i=r.total,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)}))))),c(this,"getRentBidCount",ce(r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,wa,[C.select(["$id"]),C.equal("system_is_rent",!0),C.equal("system_is_archive",!1),C.limit(1)]);case 2:return r=e.sent,i=r.total,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)}))))),c(this,"getSellBidCount",ce(r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,wa,[C.select(["$id"]),C.equal("system_is_sell",!0),C.equal("system_is_archive",!1),C.limit(1)]);case 2:return r=e.sent,i=r.total,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)}))))),c(this,"getArchiveBidCount",ce(r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,wa,[C.select(["$id"]),C.equal("system_is_archive",!0),C.limit(1)]);case 2:return r=e.sent,i=r.total,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)}))))),c(this,"getNewBidCount",ce(r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.listDocuments(fa.databaseId,wa,[C.select(["$id"]),C.equal("system_is_rent",!1),C.equal("system_is_sell",!1),C.equal("system_is_archive",!1),C.limit(1)]);case 2:return r=e.sent,i=r.total,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)}))))),T(this,{})})),uu=function(e,t,n){return e()},lu=L(r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uu((function(){return n.import("./index-legacy-3b4d1f27.js")}));case 2:return r=e.sent,i=r.default,e.abrupt("return",{advertising_fields:i});case 5:case"end":return e.stop()}}),e)})))),cu=l((function e(){var n=this;s(this,e),c(this,"advertisingViewService",A(ro.advertisingViewService)),c(this,"apartmentViewService",A(ro.apartmentViewService)),c(this,"layoutService",A(ro.layoutService)),c(this,"buildAdvertisingByApartment",function(){var e=r(t().mark((function e(n){var r,i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lu();case 2:return i=e.sent,a=i.advertising_fields,o={},de(a).forEach((function(e){var t=e.name;if(t){var r=S.get(n,t);S.set(o,t,r)}})),S.set(o,"apartment_id",n.id),S.set(o,"apartment_index",S.get(n,"index")),S.set(o,"apartment_images",n.apartment_images),S.set(o,"advertising_images",(null===(r=n.apartment_images)||void 0===r?void 0:r.slice(0,10))||[]),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"createAdvertisingByApartment",function(){var e=r(t().mark((function e(r,i){var a,o,s,u,l;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lu();case 2:return o=e.sent,s=o.advertising_fields,u={},de(s).forEach((function(e){var t=e.name;if(t){var n=S.get(i,t);S.set(u,t,n)}})),S.set(u,"apartment_id",r),S.set(u,"apartment_index",S.get(i,"index")),S.set(u,"apartment_images",i.apartment_images),S.set(u,"advertising_images",(null===(a=i.apartment_images)||void 0===a?void 0:a.slice(0,10))||[]),e.next=12,n.advertisingViewService.create(u);case 12:return l=e.sent,n.layoutService.reloadOutlet(),e.abrupt("return",Ka(l));case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"updateAdvertisingByApartment",function(){var e=r(t().mark((function e(r,i){var a,o,s,u,l,c;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lu();case 2:return o=e.sent,s=o.advertising_fields,e.next=6,n.advertisingViewService.findByApartmentId(r);case 6:return u=e.sent,e.next=9,n.advertisingViewService.findByApartmentId(r);case 9:return l=e.sent,de(s).forEach((function(e){var t=e.name;if(t){var n=S.get(i,t)||S.get(u,t);S.set(l,t,n)}})),S.set(l,"apartment_id",r),S.set(l,"apartment_index",S.get(i,"index")),S.set(l,"apartment_images",i.apartment_images),S.set(l,"advertising_images",(null===(a=i.apartment_images)||void 0===a?void 0:a.slice(0,10))||[]),e.next=17,n.advertisingViewService.update(u.id,l);case 17:return c=e.sent,n.layoutService.reloadOutlet(),e.abrupt("return",Ka(c));case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),T(this,{})})),du=function(){var e=r(t().mark((function e(n,r){var i,a,o,s,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=document.createElement("img"),a=document.createElement("img"),e.next=4,Fl.settingsViewService.getValue();case 4:if(o=e.sent,!(s=o.watermark_file_id)){e.next=12;break}return e.next=9,Fl.appwriteService.getImageURL(s);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=new URL("/watermark.png",window.origin);case 13:return u=e.t0,a.src=u.toString(),a.crossOrigin="anonymous",i.src=n,i.crossOrigin="anonymous",e.abrupt("return",Promise.resolve().then((function(){return Promise.all([new Promise((function(e,t){a.addEventListener("load",(function(){return e()})),a.addEventListener("error",(function(){return t()}))})),new Promise((function(e,t){i.addEventListener("load",(function(){return e()})),i.addEventListener("error",(function(){return t()}))}))])})).then((function(){return new Promise((function(e,t){var n=document.createElement("canvas");n.width=i.width,n.height=i.height;var o=n.getContext("2d");if(o){if(o.translate(n.width/2,n.height/2),o.drawImage(i,-i.width/2,-i.height/2),r){var s=.07*Math.min(i.height,i.width);o.lineWidth=.05*s,o.font="bold ".concat(s,"px Segoe UI, Arial, sans-serif"),o.fillStyle="white",o.strokeStyle="black",o.fillText(String(r||""),-1*i.width/2+10,i.height/2-10),o.strokeText(String(r||""),-1*i.width/2+10,i.height/2-10)}o.globalAlpha=1;var u=.3*Math.min(n.width/a.naturalWidth,n.height/a.naturalHeight),l=a.naturalWidth*u,c=a.naturalHeight*u;o.drawImage(a,-l/2,-c/2,l,c),n.toBlob((function(n){n?e(n):t("there's an error")}))}else t("there's an error")}))})));case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),pu=function(){var e=r(t().mark((function e(n,r,i){var a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a="".concat(r,"-watermark"),e.next=4,Fl.cacheService.readImage(a);case 4:if(o=e.sent){e.next=13;break}return e.next=8,du(n,i);case 8:if(o=e.sent,e.t0=o,!e.t0){e.next=13;break}return e.next=13,Fl.cacheService.writeImage(o,a);case 13:return e.abrupt("return",o?URL.createObjectURL(o):null);case 16:return e.prev=16,e.t1=e.catch(0),e.abrupt("return",null);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n,r){return e.apply(this,arguments)}}(),mu=l((function e(){var n=this;s(this,e),c(this,"appwriteService",A(ro.appwriteService)),c(this,"routerService",A(ro.routerService)),c(this,"dictService",A(ro.dictService)),c(this,"executionService",A(ro.executionService)),c(this,"publishTelegram",pe(function(){var e=r(t().mark((function e(i,a,o){var s,u,l,c=arguments;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=c.length>3&&void 0!==c[3]?c[3]:"",e.next=3,n.dictService.getTelegramMapRaw();case 3:if(u=e.sent,l=S.get(u,i)){e.next=7;break}throw new Error("publishService unknown telegram id");case 7:if(!o){e.next=11;break}return e.next=10,Promise.all(o.map(function(){var e=r(t().mark((function e(r){var i,a,o,u,l;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.getImageURL(r);case 2:return i=e.sent,e.next=5,pu(i,r,s);case 5:if(!(a=e.sent)){e.next=18;break}return e.next=9,fetch(a).then((function(e){return e.blob()}));case 9:return o=e.sent,URL.revokeObjectURL(a),e.next=13,n.appwriteService.uploadBlob(o,"__DANGEROUS_WILL_BE_REMOVED_TELEGRAM__.png");case 13:return u=e.sent,e.next=16,n.appwriteService.getFileURL(u);case 16:return l=e.sent,e.abrupt("return",l);case 18:return e.abrupt("return",n.appwriteService.getFileURL(r));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 10:o=e.sent;case 11:return e.next=13,n.executionService.executeRaw(Ba,{msg:a,channel:l.channel,token:l.token,userId:n.appwriteService.currentUser.$id,url:n.routerService.location.pathname,images:o});case 13:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}())),c(this,"publishTelegraph",pe(function(){var e=r(t().mark((function e(r,i){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.executionService.executeRaw(Da,{appName:ca,appLink:"https://github.com/tripolskypetr",title:r,content:i});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())),T(this,{})})),fu=l((function e(){var n=this;s(this,e),c(this,"settingsViewService",A(ro.settingsViewService)),c(this,"loggerService",A(ro.loggerService)),c(this,"convertToUsd",function(){var e=r(t().mark((function e(r,i){var a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r||"eur"!==i){e.next=7;break}return e.next=3,n.settingsViewService.getExchangeRate("usd_eur");case 3:if(!(a=e.sent)){e.next=7;break}return a=1/a,e.abrupt("return",Number(parseFloat(r)*a).toFixed());case 7:if(!r||"uzs"!==i){e.next=14;break}return e.next=10,n.settingsViewService.getExchangeRate("usd_uzs");case 10:if(!(o=e.sent)){e.next=14;break}return o=1/o,e.abrupt("return",Number(parseFloat(r)*o).toFixed());case 14:return e.abrupt("return",r||"");case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"getApartmentPriceRecord",(function(e,t){var r={czena_sobstvennika:S.get(e,t+"czena_sobstvennika"),startovaya_czena:S.get(e,t+"startovaya_czena"),startovaya_czena_valyuta:S.get(e,t+"startovaya_czena_valyuta")};return n.convertToUsd(r.startovaya_czena||r.czena_sobstvennika,r.startovaya_czena_valyuta)})),c(this,"getBidPriceRecord",function(){var e=r(t().mark((function e(r,i){var a,o,s,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={czena_sobstvennika_ot:S.get(r,i+"czena_sobstvennika_ot"),czena_sobstvennika_do:S.get(r,i+"czena_sobstvennika_do"),startovaya_czena_ot:S.get(r,i+"startovaya_czena_ot"),startovaya_czena_do:S.get(r,i+"startovaya_czena_do"),startovaya_czena_valyuta:S.get(r,i+"startovaya_czena_valyuta")},o=n.convertToUsd(a.startovaya_czena_ot||a.czena_sobstvennika_ot,a.startovaya_czena_valyuta),s=n.convertToUsd(a.startovaya_czena_do||a.czena_sobstvennika_do,a.startovaya_czena_valyuta),e.next=5,Promise.all([o,s]);case 5:return u=e.sent,me(u)&&oe(u)&&u.sort((function(e,t){return parseFloat(e)-parseFloat(t)})),e.abrupt("return",u);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"getBidProdPriceLabel",function(){var e=r(t().mark((function e(r){var i,a,o,s,u,l,c,d,p,m=arguments;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=m.length>1&&void 0!==m[1]&&m[1],e.next=3,n.getBidPriceMetadata(r);case 3:return a=e.sent,o=a.system_prod_kom_price_do,s=a.system_prod_kom_price_ot,u=a.system_prod_price_do,l=a.system_prod_price_ot,d=u||o,p=[],(c=l||s)&&p.push("От ".concat(fe(c),"$")),d&&p.push("До ".concat(fe(d),"$")),e.abrupt("return",i?p.join("\n"):p.join(" "));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"getBidRentPriceLabel",function(){var e=r(t().mark((function e(r){var i,a,o,s,u,l,c,d,p,m=arguments;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=m.length>1&&void 0!==m[1]&&m[1],e.next=3,n.getBidPriceMetadata(r);case 3:return a=e.sent,o=a.system_rent_kom_price_do,s=a.system_rent_kom_price_ot,u=a.system_rent_price_do,l=a.system_rent_price_ot,d=u||o,p=[],(c=l||s)&&p.push("От ".concat(fe(c),"$")),d&&p.push("До ".concat(fe(d),"$")),e.abrupt("return",i?p.join("\n"):p.join(" "));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"getApartmentRentPriceLabel",function(){var e=r(t().mark((function e(r){var i,a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getApartmentPriceMetadata(r);case 2:return i=e.sent,a=i.system_rent_price,o=i.system_rent_kom_price,s=a||o,e.abrupt("return",s?"".concat(fe(s),"$"):"");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"getApartmentProdPriceLabel",function(){var e=r(t().mark((function e(r){var i,a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getApartmentPriceMetadata(r);case 2:return i=e.sent,a=i.system_prod_price,o=i.system_prod_kom_price,s=a||o,e.abrupt("return",s?"".concat(fe(s),"$"):"");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"getApartmentPriceMetadata",function(){var e=r(t().mark((function e(r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getApartmentPriceRecord(r,"prod_kom_");case 2:return e.t0=e.sent,e.next=5,n.getApartmentPriceRecord(r,"prod_");case 5:return e.t1=e.sent,e.next=8,n.getApartmentPriceRecord(r,"rent_kom_");case 8:return e.t2=e.sent,e.next=11,n.getApartmentPriceRecord(r,"rent_");case 11:return e.t3=e.sent,i={system_prod_kom_price:e.t0,system_prod_price:e.t1,system_rent_kom_price:e.t2,system_rent_price:e.t3},n.loggerService.log("exchangeService getApartmentPriceMetadata",{metadata:i}),e.abrupt("return",i);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"getBidPriceMetadata",function(){var e=r(t().mark((function e(r){var a,o,s,u,l,c,d,p,m,f,h,y,v,b,_,k,g;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getBidPriceRecord(r,"prod_kom_");case 2:return a=e.sent,o=i(a,2),s=o[0],u=o[1],e.next=8,n.getBidPriceRecord(r,"prod_");case 8:return l=e.sent,c=i(l,2),d=c[0],p=c[1],e.next=14,n.getBidPriceRecord(r,"rent_kom_");case 14:return m=e.sent,f=i(m,2),h=f[0],y=f[1],e.next=20,n.getBidPriceRecord(r,"rent_");case 20:return v=e.sent,b=i(v,2),_=b[0],k=b[1],g={system_prod_kom_price_do:u,system_prod_kom_price_ot:s,system_prod_price_do:p,system_prod_price_ot:d,system_rent_kom_price_do:y,system_rent_kom_price_ot:h,system_rent_price_do:k,system_rent_price_ot:_},n.loggerService.log("exchangeService getBidPriceMetadata",{metadata:g}),e.abrupt("return",g);case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T(this,{})})),hu=l((function e(){var n=this;s(this,e),c(this,"bidViewService",A(ro.bidViewService)),c(this,"apartmentViewService",A(ro.apartmentViewService)),c(this,"dealViewService",A(ro.dealViewService)),c(this,"dealHistoryViewService",A(ro.dealHistoryViewService)),c(this,"taskViewService",A(ro.taskViewService)),c(this,"taskHistoryViewService",A(ro.taskHistoryViewService)),c(this,"loggerService",A(ro.loggerService)),c(this,"findAllDealByBidId",function(){var e=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Po(Do(Sa,[C.equal("bid_id",n)])),Po(Do(Sa,[C.equal("target_bid_id",n)]))]);case 2:return r=e.sent,e.abrupt("return",J(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findAllDealHistoryBidId",function(){var e=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Po(Do(Va,[C.equal("bid_id",n)]))]);case 2:return r=e.sent,e.abrupt("return",J(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findAllDealByApartmentId",function(){var e=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Po(Do(Sa,[C.equal("apartment_id",n)])),Po(Do(Sa,[C.equal("target_apartment_id",n)]))]);case 2:return r=e.sent,e.abrupt("return",J(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findAllDealHistoryApartmentId",function(){var e=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Po(Do(Va,[C.equal("apartment_id",n)]))]);case 2:return r=e.sent,e.abrupt("return",J(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findAllDealHistoryByDealId",function(){var e=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Po(Do(Va,[C.equal("deal_id",n)]))]);case 2:return r=e.sent,e.abrupt("return",J(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findAllTaskByContactId",function(){var e=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Po(Do(za,[C.equal("contact_id",n)]))]);case 2:return r=e.sent,e.abrupt("return",J(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findAllTaskHistoryByContactId",function(){var e=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Po(Do(Fa,[C.equal("contact_id",n)]))]);case 2:return r=e.sent,e.abrupt("return",J(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findAllTaskHistoryByTaskId",function(){var e=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Po(Do(Fa,[C.equal("task_id",n)]))]);case 2:return r=e.sent,e.abrupt("return",J(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findAllApartmentByContactId",function(){var e=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Po(Do(_a,[C.equal("contact_id",n)]))]);case 2:return r=e.sent,e.abrupt("return",J(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"findAllBidByContactId",function(){var e=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Po(Do(wa,[C.equal("contact_id",n)]))]);case 2:return r=e.sent,e.abrupt("return",J(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"removeBid",pe(function(){var e=r(t().mark((function e(r){var i,a,o,s,u,l;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("cleanupService removeBid",{bidId:r}),e.t0=m,e.next=4,n.findAllDealByBidId(r);case 4:e.t1=e.sent,i=(0,e.t0)(e.t1),e.prev=6,i.s();case 8:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=12,n.dealViewService.remove(o.$id);case 12:e.next=8;break;case 14:e.next=19;break;case 16:e.prev=16,e.t2=e.catch(6),i.e(e.t2);case 19:return e.prev=19,i.f(),e.finish(19);case 22:return e.t3=m,e.next=25,n.findAllDealHistoryBidId(r);case 25:e.t4=e.sent,s=(0,e.t3)(e.t4),e.prev=27,s.s();case 29:if((u=s.n()).done){e.next=35;break}return l=u.value,e.next=33,n.dealHistoryViewService.remove(l.$id);case 33:e.next=29;break;case 35:e.next=40;break;case 37:e.prev=37,e.t5=e.catch(27),s.e(e.t5);case 40:return e.prev=40,s.f(),e.finish(40);case 43:return e.next=45,n.bidViewService.remove(r);case 45:case"end":return e.stop()}}),e,null,[[6,16,19,22],[27,37,40,43]])})));return function(t){return e.apply(this,arguments)}}())),c(this,"removeApartment",pe(function(){var e=r(t().mark((function e(r){var i,a,o,s,u,l;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("cleanupService removeApartment",{apartmentId:r}),e.t0=m,e.next=4,n.findAllDealByApartmentId(r);case 4:e.t1=e.sent,i=(0,e.t0)(e.t1),e.prev=6,i.s();case 8:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=12,n.dealViewService.remove(o.$id);case 12:e.next=8;break;case 14:e.next=19;break;case 16:e.prev=16,e.t2=e.catch(6),i.e(e.t2);case 19:return e.prev=19,i.f(),e.finish(19);case 22:return e.t3=m,e.next=25,n.findAllDealHistoryApartmentId(r);case 25:e.t4=e.sent,s=(0,e.t3)(e.t4),e.prev=27,s.s();case 29:if((u=s.n()).done){e.next=35;break}return l=u.value,e.next=33,n.dealHistoryViewService.remove(l.$id);case 33:e.next=29;break;case 35:e.next=40;break;case 37:e.prev=37,e.t5=e.catch(27),s.e(e.t5);case 40:return e.prev=40,s.f(),e.finish(40);case 43:return e.next=45,n.apartmentViewService.remove(r);case 45:case"end":return e.stop()}}),e,null,[[6,16,19,22],[27,37,40,43]])})));return function(t){return e.apply(this,arguments)}}())),c(this,"removeContact",pe(function(){var e=r(t().mark((function e(r){var i,a,o,s,u,l,c,d,p,f,h,y;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("cleanupService removeContact",{contactId:r}),e.t0=m,e.next=4,n.findAllTaskByContactId(r);case 4:e.t1=e.sent,i=(0,e.t0)(e.t1),e.prev=6,i.s();case 8:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=12,n.taskViewService.remove(o.$id);case 12:e.next=8;break;case 14:e.next=19;break;case 16:e.prev=16,e.t2=e.catch(6),i.e(e.t2);case 19:return e.prev=19,i.f(),e.finish(19);case 22:return e.t3=m,e.next=25,n.findAllTaskHistoryByContactId(r);case 25:e.t4=e.sent,s=(0,e.t3)(e.t4),e.prev=27,s.s();case 29:if((u=s.n()).done){e.next=35;break}return l=u.value,e.next=33,n.taskHistoryViewService.remove(l.$id);case 33:e.next=29;break;case 35:e.next=40;break;case 37:e.prev=37,e.t5=e.catch(27),s.e(e.t5);case 40:return e.prev=40,s.f(),e.finish(40);case 43:return e.t6=m,e.next=46,n.findAllBidByContactId(r);case 46:e.t7=e.sent,c=(0,e.t6)(e.t7),e.prev=48,c.s();case 50:if((d=c.n()).done){e.next=56;break}return p=d.value,e.next=54,n.removeBid(p.$id);case 54:e.next=50;break;case 56:e.next=61;break;case 58:e.prev=58,e.t8=e.catch(48),c.e(e.t8);case 61:return e.prev=61,c.f(),e.finish(61);case 64:return e.t9=m,e.next=67,n.findAllApartmentByContactId(r);case 67:e.t10=e.sent,f=(0,e.t9)(e.t10),e.prev=69,f.s();case 71:if((h=f.n()).done){e.next=77;break}return y=h.value,e.next=75,n.removeApartment(y.$id);case 75:e.next=71;break;case 77:e.next=82;break;case 79:e.prev=79,e.t11=e.catch(69),f.e(e.t11);case 82:return e.prev=82,f.f(),e.finish(82);case 85:case"end":return e.stop()}}),e,null,[[6,16,19,22],[27,37,40,43],[48,58,61,64],[69,79,82,85]])})));return function(t){return e.apply(this,arguments)}}())),c(this,"removeTask",pe(function(){var e=r(t().mark((function e(r){var i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("cleanupService removeTask",{taskId:r}),e.t0=m,e.next=4,n.findAllTaskHistoryByTaskId(r);case 4:e.t1=e.sent,i=(0,e.t0)(e.t1),e.prev=6,i.s();case 8:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=12,n.taskHistoryViewService.remove(o.$id);case 12:e.next=8;break;case 14:e.next=19;break;case 16:e.prev=16,e.t2=e.catch(6),i.e(e.t2);case 19:return e.prev=19,i.f(),e.finish(19);case 22:return e.next=24,n.taskViewService.remove(r);case 24:case"end":return e.stop()}}),e,null,[[6,16,19,22]])})));return function(t){return e.apply(this,arguments)}}())),c(this,"removeDeal",pe(function(){var e=r(t().mark((function e(r){var i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loggerService.log("cleanupService removeDeal",{dealId:r}),e.t0=m,e.next=4,n.findAllDealHistoryByDealId(r);case 4:e.t1=e.sent,i=(0,e.t0)(e.t1),e.prev=6,i.s();case 8:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=12,n.dealHistoryViewService.remove(o.$id);case 12:e.next=8;break;case 14:e.next=19;break;case 16:e.prev=16,e.t2=e.catch(6),i.e(e.t2);case 19:return e.prev=19,i.f(),e.finish(19);case 22:return e.next=24,n.dealViewService.remove(r);case 24:case"end":return e.stop()}}),e,null,[[6,16,19,22]])})));return function(t){return e.apply(this,arguments)}}())),T(this,{})})),yu=L((function(){return U(1e3).then((function(){yu.clear()}))})),vu=function(e){var t=window.location,n=t.href,r=t.origin,i="file:"===t.protocol?new URL(fa.endpoint):new URL(n,r);return i.pathname="/",i.search="",i.hash="",i.port=String(e),i.toString()},bu=(c(ea={},Ia,8081),c(ea,ja,8082),c(ea,Ma,8083),c(ea,Ba,8084),c(ea,Da,8085),ea),_u=l((function e(){var n=this;s(this,e),c(this,"appwriteService",A(ro.appwriteService)),c(this,"run",function(){var e=r(t().mark((function e(r,i){var a,o,s,u,l;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=JSON.stringify(i),!(o=S.get(bu,r))||!aa){e.next=6;break}return e.next=5,W(vu(o),{method:"POST",body:a});case 5:return e.abrupt("return",e.sent);case 6:return e.next=8,n.appwriteService.functions.createExecution(r,a,!1);case 8:if(s=e.sent,u=s.responseBody,"failed"!==s.status){e.next=13;break}throw new Error("Function failed ".concat(u));case 13:if(!(l=JSON.parse(u||"{}")).error){e.next=16;break}throw new Error("Function error ".concat(l.error));case 16:return e.abrupt("return",l);case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"executeRaw",function(){var e=r(t().mark((function e(r,a){var o,s,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r in bu)){e.next=4;break}return e.next=3,n.run(r,a);case 3:return e.abrupt("return",e.sent);case 4:return e.next=6,Promise.all([n.run(r,a),yu()]);case 6:return o=e.sent,s=i(o,1),u=s[0],e.abrupt("return",u);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c(this,"execute",he(function(){var e=r(t().mark((function e(r,i){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.executeRaw(r,i);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.next=10,U(15e3);case 10:throw e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),3)),T(this,{})})),ku=ye("LAST_NOTIFY_DATE"),gu=l((function e(){var n=this;s(this,e),c(this,"notifyViewService",A(ro.notifyViewService)),c(this,"taskViewService",A(ro.taskViewService)),c(this,"appwriteService",A(ro.appwriteService)),c(this,"doNotify",r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.appwriteService.currentUser.$id,e.next=3,n.taskViewService.findDailyTaskByUserId(r);case 3:if(!(i=e.sent).length){e.next=7;break}return e.next=7,n.notifyViewService.create({title:"На сегодня задач: ".concat(i.length),url:"/task_mine",user_id:r});case 7:case"end":return e.stop()}}),e)})))),c(this,"checkNotify",r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ku.getValue(),i=To(),r===i){e.next=5;break}return e.next=5,n.doNotify();case 5:ku.setValue(i);case 6:case"end":return e.stop()}}),e)})))),T(this,{})})),xu=L(r(t().mark((function e(){var r,i,a,o,s,u,l,c,d,p;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uu((function(){return n.import("./index-legacy-9b3f5488.js")}));case 2:return r=e.sent,i=r.default,e.next=6,uu((function(){return n.import("./index-legacy-7538f49e.js")}));case 6:return a=e.sent,o=a.address_fields,e.next=10,uu((function(){return n.import("./index-legacy-7538f49e.js")}));case 10:return s=e.sent,u=s.area_fields,e.next=14,uu((function(){return n.import("./index-legacy-7526edbd.js")}));case 14:return l=e.sent,c=l.default,e.next=18,uu((function(){return n.import("./index-legacy-06e83568.js")}));case 18:return d=e.sent,p=d.default,e.abrupt("return",{bid_fields:i,apartment_fields:c,contact_fields:p,bid_address_fields:o,bid_area_fields:u});case 21:case"end":return e.stop()}}),e)})))),wu=l((function e(){var n=this;s(this,e),c(this,"featureService",A(ro.featureService)),c(this,"checkReferenceField",(function(e){return!!e.endsWith("_id")||(!!e.endsWith("_files")||(!!e.endsWith("_images")||(!!Ha.includes(e)||(!!Wa.includes(e)||(!!co.includes(e)||!!po.includes(e))))))})),c(this,"polishApartment",function(){var e=r(t().mark((function e(r){var a,o,s,u,l,c,d,p,m=arguments;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=m.length>1&&void 0!==m[1]?m[1]:{},e.next=3,xu();case 3:return o=e.sent,s=o.apartment_fields,e.next=7,n.featureService.getFeatures();case 7:return u=e.sent,l={},Object.entries(r).forEach((function(e){var t=i(e,2),r=t[0],a=t[1];n.checkReferenceField(r)&&S.set(l,r,a)})),e.next=12,ve(s,r,a,u);case 12:return c=e.sent,d=c.visible,p=c.hidden,d.forEach((function(e){var t=e.name;if(t){var n=S.get(r,t);S.set(l,t,n)}})),p.forEach((function(e){var t=e.name;if(t){if(n.checkReferenceField(t))return;S.set(l,t,null)}})),e.abrupt("return",l);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"polishBid",function(){var e=r(t().mark((function e(r){var a,o,s,u,l,c,d,p,m,f,h=arguments;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,xu();case 3:return o=e.sent,s=o.bid_fields,u=o.bid_address_fields,l=o.bid_area_fields,e.next=9,n.featureService.getFeatures();case 9:return c=e.sent,d={},Object.entries(r).forEach((function(e){var t=i(e,2),r=t[0],a=t[1];n.checkReferenceField(r)&&S.set(d,r,a)})),e.next=14,ve(s,r,a,c);case 14:return p=e.sent,m=p.visible,f=p.hidden,m.forEach((function(e){var t=e.name;if(t){var n=S.get(r,t);S.set(d,t,n)}})),f.forEach((function(e){var t=e.name;if(t){if(n.checkReferenceField(t))return;S.set(d,t,null)}})),de(u).forEach((function(e){var t=e.name;if(t){var n=S.get(r,t);S.set(d,t,n)}})),de(l).forEach((function(e){var t=e.name;if(t){var n=S.get(r,t);S.set(d,t,n)}})),e.abrupt("return",d);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"polishContact",function(){var e=r(t().mark((function e(r){var a,o,s,u,l,c,d,p,m=arguments;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=m.length>1&&void 0!==m[1]?m[1]:{},e.next=3,xu();case 3:return o=e.sent,s=o.contact_fields,e.next=7,n.featureService.getFeatures();case 7:return u=e.sent,l={},Object.entries(r).forEach((function(e){var t=i(e,2),r=t[0],a=t[1];n.checkReferenceField(r)&&S.set(l,r,a)})),e.next=12,ve(s,r,a,u);case 12:return c=e.sent,d=c.visible,p=c.hidden,d.forEach((function(e){var t=e.name;if(t){var n=S.get(r,t);S.set(l,t,n)}})),p.forEach((function(e){var t=e.name;if(t){if(n.checkReferenceField(t))return;S.set(l,t,null)}})),e.abrupt("return",l);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T(this,{})})),Su=function(e){return new Promise((function(t,n){var r=new Image,a=URL.createObjectURL(e);r.src=a,r.onerror=function(){URL.revokeObjectURL(a),n(new Error("previewService image load error"))},r.onload=function(){URL.revokeObjectURL(a);var e=function(e,t,n){var r=e.width,i=e.height;return r>i?r>t&&(i=Math.round(i*t/r),r=t):i>n&&(r=Math.round(r*n/i),i=n),[r,i]}(r,275,275),o=i(e,2),s=o[0],u=o[1],l=document.createElement("canvas");l.width=s,l.height=u;var c=l.getContext("2d");if(!c)throw new Error("previewService null canvas ctx");c.drawImage(r,0,0,s,u),l.toBlob((function(e){e?t(e):n(new Error("previewService null blob"))}),"image/jpeg",.6)}}))},zu=l((function e(){var n=this;s(this,e),c(this,"appwriteService",A(ro.appwriteService)),c(this,"createPreview",O(function(){var e=r(t().mark((function e(r,i){var a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=w(),e.next=3,n.appwriteService.storage.createFile(ha,a,i);case 3:return o=e.sent,s=o.$id,e.next=7,n.appwriteService.databases.createDocument(fa.databaseId,xa,r,{preview_file_id:s});case 7:return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())),c(this,"readPreview",function(){var e=r(t().mark((function e(r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.databases.getDocument(fa.databaseId,xa,r);case 2:return i=e.sent,a=i.preview_file_id,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"tryReadPreview",function(){var e=r(t().mark((function e(r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.readPreview(r);case 3:return i=e.sent,e.next=6,n.appwriteService.getImageURL(i);case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),c(this,"compressImage",function(){var e=r(t().mark((function e(r){var i,a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.appwriteService.getImageURL(r);case 2:return i=e.sent,e.next=5,fetch(i);case 5:return a=e.sent,e.next=8,a.blob();case 8:return o=e.sent,e.next=11,Su(o);case 11:return s=e.sent,e.abrupt("return",new File([s],"__DANGEROUS_WILL_BE_REMOVED_PREVIEW__.png"));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(this,"getImageURL",O(function(){var e=r(t().mark((function e(r){var i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.tryReadPreview(r);case 3:if(i=e.sent){e.next=14;break}return e.next=7,n.compressImage(r);case 7:return a=e.sent,e.next=10,n.createPreview(r,a);case 10:return o=e.sent,e.next=13,n.appwriteService.getImageURL(o);case 13:i=e.sent;case 14:return e.abrupt("return",i);case 17:return e.prev=17,e.t0=e.catch(0),e.next=21,n.appwriteService.getImageURL(r);case 21:return e.abrupt("return",e.sent);case 22:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}())),T(this,{})})),Vu=L(r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uu((function(){return n.import("./index-legacy-7526edbd.js")}));case 2:return r=e.sent,i=r.default,e.abrupt("return",{apartment_fields:i});case 5:case"end":return e.stop()}}),e)})))),Au=new Set([a.Text,a.Time,a.Date,a.Items,a.Combo,a.Checkbox,a.Choose,a.Complete,a.Radio,a.YesNo,a.Switch,a.Component]),Tu=l((function e(){var n=this;s(this,e),c(this,"settingsViewService",A(ro.settingsViewService)),c(this,"getFieldVisibilityVariant",L(r(t().mark((function e(){var n,r,i,a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vu();case 2:n=e.sent,r=n.apartment_fields,i=[],a=m(de(r)),e.prev=6,s=t().mark((function e(){var n,r,a,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.value,r=n.name,a=n.type,s=n.title,r){e.next=3;break}return e.abrupt("return",0);case 3:if(!i.some((function(e){return e.value===r}))){e.next=5;break}return e.abrupt("return",0);case 5:Au.has(a)&&i.push({label:s||r,value:r});case 6:case"end":return e.stop()}}),e)})),a.s();case 9:if((o=a.n()).done){e.next=16;break}return e.delegateYield(s(),"t0",11);case 11:if(0!==e.t0){e.next=14;break}return e.abrupt("continue",14);case 14:e.next=9;break;case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(6),a.e(e.t1);case 21:return e.prev=21,a.f(),e.finish(21);case 24:return e.abrupt("return",i);case 25:case"end":return e.stop()}}),e,null,[[6,18,21,24]])}))))),c(this,"getFieldVisibility",L(r(t().mark((function e(){var r,i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.settingsViewService.getValue();case 2:return r=e.sent,i=r.field_visibility,e.next=6,n.getFieldVisibilityVariant();case 6:return a=e.sent,e.abrupt("return",i||a.map((function(e){return e.value})));case 8:case"end":return e.stop()}}),e)}))))),c(this,"getFieldVisibilitySet",L(r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Set,e.next=3,n.getFieldVisibility();case 3:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 5:case"end":return e.stop()}}),e)}))))),c(this,"setFieldVisibility",function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n.settingsViewService,e.t1=o,e.t2=o,e.t3={},e.next=6,n.settingsViewService.getValue();case 6:e.t4=e.sent,e.t5=(0,e.t2)(e.t3,e.t4),e.t6={},e.t7={field_visibility:r},e.t8=(0,e.t1)(e.t5,e.t6,e.t7),e.t0.setValue.call(e.t0,e.t8);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T(this,{})}));be(ro.appwriteService,(function(){return new so})),be(ro.authService,(function(){return new lo})),be(ro.alertService,(function(){return new ra})),be(ro.layoutService,(function(){return new is})),be(ro.routerService,(function(){return new As})),be(ro.errorService,(function(){return new ns})),be(ro.dictService,(function(){return new es})),be(ro.cacheService,(function(){return new xo})),be(ro.ymapsService,(function(){return new nu})),be(ro.loggerService,(function(){return new as})),be(ro.realtimeService,(function(){return new gs})),be(ro.executionService,(function(){return new _u})),be(ro.previewService,(function(){return new zu})),be(ro.editTargetService,(function(){return new ts})),be(ro.permissionService,(function(){return new bs})),be(ro.featureService,(function(){return new rs})),be(ro.previewModeService,(function(){return new ks})),be(ro.metadataService,(function(){return new cs})),be(ro.publishService,(function(){return new mu})),be(ro.exchangeService,(function(){return new fu})),be(ro.cleanupService,(function(){return new hu})),be(ro.dailyNotifyService,(function(){return new gu})),be(ro.polishService,(function(){return new wu})),be(ro.visibilityService,(function(){return new Tu})),be(ro.userDbService,(function(){return new eu})),be(ro.settingsDbService,(function(){return new js})),be(ro.apartmentDbService,(function(){return new ao})),be(ro.bidDbService,(function(){return new vo})),be(ro.dealDbService,(function(){return new Uo})),be(ro.contactDbService,(function(){return new So})),be(ro.dealHistoryDbService,(function(){return new Wo})),be(ro.serviceCommentDbService,(function(){return new Cs})),be(ro.roleDbService,(function(){return new ws})),be(ro.notifyDbService,(function(){return new ps})),be(ro.taskDbService,(function(){return new Ns})),be(ro.taskHistoryDbService,(function(){return new Us})),be(ro.advertisingDbService,(function(){return new au})),be(ro.contactRequestService,(function(){return new zo})),be(ro.dealHistoryRequestService,(function(){return new Xo})),be(ro.dealRequestService,(function(){return new Zo})),be(ro.taskRequestService,(function(){return new Js})),be(ro.taskHistoryRequestService,(function(){return new Hs})),be(ro.dashboardRequestService,(function(){return new Mo})),be(ro.permissionRequestService,(function(){return new vs})),be(ro.apartmentRequestService,(function(){return new ru})),be(ro.bidRequestService,(function(){return new su})),be(ro.advertisingRequestService,(function(){return new cu})),be(ro.userViewService,(function(){return new tu})),be(ro.settingsViewService,(function(){return new Bs})),be(ro.apartmentViewService,(function(){return new oo})),be(ro.bidViewService,(function(){return new bo})),be(ro.dealViewService,(function(){return new Qo})),be(ro.contactViewService,(function(){return new Vo})),be(ro.dealHistoryViewService,(function(){return new Jo})),be(ro.serviceCommentViewService,(function(){return new Fs})),be(ro.roleViewService,(function(){return new Ss})),be(ro.notifyViewService,(function(){return new ms})),be(ro.taskViewService,(function(){return new Zs})),be(ro.taskHistoryViewService,(function(){return new Ws})),be(ro.advertisingViewService,(function(){return new ou}));var Cu={appwriteService:A(ro.appwriteService),authService:A(ro.authService),alertService:A(ro.alertService),routerService:A(ro.routerService),layoutService:A(ro.layoutService),errorService:A(ro.errorService),dictService:A(ro.dictService),cacheService:A(ro.cacheService),ymapsService:A(ro.ymapsService),loggerService:A(ro.loggerService),realtimeService:A(ro.realtimeService),executionService:A(ro.executionService),previewService:A(ro.previewService)},Fu={editTargetService:A(ro.editTargetService),permissionService:A(ro.permissionService),featureService:A(ro.featureService),previewModeService:A(ro.previewModeService),metadataService:A(ro.metadataService),publishService:A(ro.publishService),exchangeService:A(ro.exchangeService),cleanupService:A(ro.cleanupService),dailyNotifyService:A(ro.dailyNotifyService),polishService:A(ro.polishService),visibilityService:A(ro.visibilityService)},Lu={contactRequestService:A(ro.contactRequestService),dealHistoryRequestService:A(ro.dealHistoryRequestService),dealRequestService:A(ro.dealRequestService),taskRequestService:A(ro.taskRequestService),taskHistoryRequestService:A(ro.taskHistoryRequestService),dashboardRequestService:A(ro.dashboardRequestService),permissionRequestService:A(ro.permissionRequestService),apartmentRequestService:A(ro.apartmentRequestService),bidRequestService:A(ro.bidRequestService),advertisingRequestService:A(ro.advertisingRequestService)},Iu={settingsDbService:A(ro.settingsDbService),apartmentDbService:A(ro.apartmentDbService),bidDbService:A(ro.bidDbService),dealDbService:A(ro.dealDbService),userDbService:A(ro.userDbService),contactDbService:A(ro.contactDbService),dealHistoryDbService:A(ro.dealHistoryDbService),serviceCommentDbService:A(ro.serviceCommentDbService),roleDbService:A(ro.roleDbService),notifyDbService:A(ro.notifyDbService),taskDbService:A(ro.taskDbService),taskHistoryDbService:A(ro.taskHistoryDbService),advertisingDbService:A(ro.advertisingDbService)},Mu={userViewService:A(ro.userViewService),apartmentViewService:A(ro.apartmentViewService),bidViewService:A(ro.bidViewService),dealViewService:A(ro.dealViewService),settingsViewService:A(ro.settingsViewService),contactViewService:A(ro.contactViewService),dealHistoryViewService:A(ro.dealHistoryViewService),serviceCommentViewService:A(ro.serviceCommentViewService),roleViewService:A(ro.roleViewService),notifyViewService:A(ro.notifyViewService),taskViewService:A(ro.taskViewService),taskHistoryViewService:A(ro.taskHistoryViewService),advertisingViewService:A(ro.advertisingViewService)},ju=o(o(o(o(o({},Cu),Iu),Mu),Fu),Lu);window.addEventListener("unhandledrejection",(function(e){ju.errorService.handleGlobalError(new Error(e.reason))})),window.addEventListener("offline",(function(){N()})),window.addEventListener("error",(function(e){e instanceof _e&&ju.errorService.handleGlobalError(e)})),ju.layoutService.setModalLoader(!0),ju.layoutService.appbarSubject.filter((function(e){return!e})).filter((function(){return!ju.layoutService.hasAppbarLoader})).operator(ke.take(1)).debounce(1e3).once((function(){ju.layoutService.setModalLoader(!1)})),ie.join([ju.layoutService.appbarSubject.toObserver(),ie.fromInterval(1e4)],{race:!0}).reduce((function(e,t){return i(t,1)[0]?e+1:0}),0).filter((function(e){return 6===e})).connect((function(){ju.layoutService.hasModalLoader||ju.layoutService.dropAppbarLoader()})),ju.routerService.listen((function(e){"PUSH"===e.action&&ju.cacheService.collectGarbage()})),ge((function(){return ju.appwriteService.isAuthorized}),(function(){ju.appwriteService.isAuthorized&&ju.dailyNotifyService.checkNotify()})),ju.routerService.listen((function(){ju.executionService.execute.cancel()})),ju.userViewService.updateSubject.subscribe((function(e){var t=i(e,1)[0];ju.appwriteService.currentUser.$id===t&&N()})),ju.settingsViewService.updateSubject.subscribe((function(){N()})),ju.roleViewService.updateSubject.subscribe(function(){var e=r(t().mark((function e(n){var r,a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i(n,1),a=r[0],o=ju.appwriteService.currentUser.$id,e.next=4,ju.userViewService.read(o);case 4:s=e.sent,me(s.user_role)===a&&N();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),window.ioc=ju;var Bu,Du,Ru,qu,Pu,Eu,Nu,Ou,Uu,Hu,Wu,$u,Gu,Yu,Ku,Xu,Ju,Zu,Qu,el,tl,nl,rl,il,al,ol,sl,ul,ll,cl,dl,pl,ml,fl,hl,yl,vl,bl,_l,kl,gl,xl,wl,Sl,zl,Vl,Al,Tl,Cl,Fl=ju,Ll=function(){var e=null,t={};return function(){var n=Fl.routerService.location.pathname;return e!==n&&(t=xe(gk,Fl.routerService.location.pathname)||{},e=n),t}}(),Il=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Ll();return S.get(n,e)||t},Ml=Ll,jl=we.forwardRef((function(e,t){var n=e.sx,r=e.variant,a=void 0===r?"filled":r,s=i(we.useState([]),2),u=s[0],l=s[1];return we.useEffect((function(){return ge((function(){return Fl.editTargetService.alerts}),(function(){l(Fl.editTargetService.alerts)}))}),[]),we.useEffect((function(){l(Fl.editTargetService.alerts)}),[]),Se(ze,{ref:t,sx:o(o({},n),{},{mb:2}),variant:a,items:u})})),Bl=function(e){var n=e.children,i=Ve(r(t().mark((function e(){var n,r,i,a,o,s,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=zk()||{},r=n.sideMenu,i=void 0===r?null:r,a=Ml(),o=a.id,s=void 0===o?null:o,Fl.appwriteService.isAuthorized){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Fl.featureService.hasFeature("anonimnoe_redaktirovanie");case 6:if(!e.sent){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,Fl.editTargetService.getDocument(Fl.appwriteService.currentUser.$id);case 10:if(u=e.sent){e.next=15;break}return e.next=14,Fl.editTargetService.create({entity_id:s,path:i});case 14:return e.abrupt("return");case 15:if(!(!1||u.entity_id!==s||u.path!==i)){e.next=21;break}return e.next=21,Fl.editTargetService.update({entity_id:s,path:i});case 21:case"end":return e.stop()}}),e)}))),{onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},fallback:Fl.errorService.handleGlobalError}).execute;return we.useEffect((function(){return ge((function(){return Fl.routerService.location.pathname}),(function(){Fl.appwriteService.isAuthorized&&i()}))}),[]),Se(Ae,{children:n})},Dl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fl.routerService.location.pathname;return!!Te(gk.filter((function(t){var n=t.path;return e.includes(n)})),t)},Rl=[{id:"owner_contact",isVisible:function(e){return e.permissions.hasMasterDetailPermission},label:"Контакт",isActive:function(){return Dl(["/apartment_view/:id/owner_contact"])}},{id:"object",label:"Объект",isActive:function(){return Dl(["/apartment_view/:id","/apartment_view/:id/object"])}},{id:"tasks",isVisible:function(e){return e.permissions.hasMasterDetailPermission},label:"Задачи",isActive:function(){return Dl(["/apartment_view/:id/tasks"])}},{id:"advertising",label:"Реклама",isActive:function(){return Dl(["/apartment_view/:id/advertising"])}},{id:"service_comment",isVisible:function(e){return e.permissions.hasMasterDetailPermission},label:"Служебный комментарий",isActive:function(){return Dl(["/apartment_view/:id/service_comment"])}},{id:"history",isVisible:function(e){return e.permissions.hasMasterDetailPermission},label:"История",isActive:function(){return Dl(["/apartment_view/:id/history"])}},{id:"documents",isVisible:function(e){return e.permissions.hasMasterDetailPermission},label:"Документы",isActive:function(){return Dl(["/apartment_view/:id/documents"])}},{id:"commission_and_status",isVisible:function(e){return e.permissions.hasMasterDetailPermission},label:"Комиссия и статус",isDisabled:function(){return!0},isActive:function(){return Dl(["/apartment_view/:id/commission_and_status"])}}],ql=function(e,t){if(!t){var n=Il("id","create");"owner_contact"===e&&Fl.routerService.replace("/apartment_view/".concat(n,"/owner_contact")),"object"===e&&Fl.routerService.replace("/apartment_view/".concat(n,"/object")),"tasks"===e&&Fl.routerService.replace("/apartment_view/".concat(n,"/tasks")),"advertising"===e&&Fl.routerService.replace("/apartment_view/".concat(n,"/advertising")),"service_comment"===e&&Fl.routerService.replace("/apartment_view/".concat(n,"/service_comment")),"history"===e&&Fl.routerService.replace("/apartment_view/".concat(n,"/history")),"documents"===e&&Fl.routerService.replace("/apartment_view/".concat(n,"/documents")),"commission_and_status"===e&&Fl.routerService.replace("/apartment_view/".concat(n,"/commission_and_status"))}},Pl=function(e){var t=e.children,n=e.payload,r=e.mode,i=void 0===r?H.Paper:r,a=we.useMemo((function(){return"tabs"===i?H.Tabs:H.Paper}),[i]);return Se(Ce,{withFixedPos:!0,payload:n,fixedPosHeaderAdjust:i===H.Paper?85:64,mode:a,options:Rl,onActiveOptionChange:ql,children:t})},El=i(Fe(),2),Nl=El[0],Ol=El[1],Ul=i(Fe(),2),Hl=Ul[0],Wl=Ul[1],$l=Le({useTheme:Ie}).makeStyles,Gl=Me.createLoader(96),Yl=$l()((function(e){return{square:{position:"relative"},dragHoverActive:{background:je(e.palette.primary.main,.5)},dragHoverInactive:{background:"#ccc"},prev:{position:"absolute",margin:"auto",left:"0",top:"0",bottom:0,zIndex:"2 !important",color:e.palette.background.paper,width:"30%"},next:{position:"absolute",margin:"auto",right:"10px",top:"10px",bottom:"5px",zIndex:"2 !important",color:e.palette.background.paper,width:"30%"},action:{zIndex:"5 !important"},defaultIcon:{position:"absolute",right:10,bottom:10,height:35,width:35,fill:"orange",background:"white",borderRadius:"50%",padding:"1.5px",zIndex:"1"},"tss-nuqny4-root":{zIndex:"5 !important"}}})),Kl=function(e){var n,a=e.dropSubject,o=e.modal,s=e.className,u=e.readonly,l=e.image,d=e.apartment_images,m=e.advertising_images,f=e.text,h=e.sx,y=e.onClick,v=e.onChange,b=e.drag,_=Yl().classes,k=i(we.useState(!1),2),g=k[0],x=k[1],w=Be(a),S=Be(),z=d||[],V=m||[];we.useEffect((function(){return function(){S.next()}}),[]),we.useEffect((function(){return w.subscribe((function(){x(!1)}))}),[]);var A,T=i(Ol(),2)[1],C=i(Wl(),2)[1],F=we.useMemo((function(){return p(V).sort((function(e,t){return Math.max(z.indexOf(t),0)-Math.max(z.indexOf(e),0)})).reverse()[0]||"unknown"}),[z,V]),L=we.useMemo((function(){return V.includes(l)}),[l,V]);return Se(qe,{className:s,sx:h,onClick:function(){return y&&y(l)},children:Se(De,{draggable:b,onDragStart:function(){return T(l)},onDragOver:function(e){e.preventDefault(),C(l)},onDragLeave:function(){return x(!1)},onDragEnter:function(){return x(!0)},className:_.square,children:[l===F&&Se(Re,{className:_.defaultIcon}),Se(qe,{className:Pe((n={},c(n,_.dragHoverActive,g),c(n,_.dragHoverInactive,!g),n)),component:"div",sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:[Se(qe,{sx:{position:"absolute",top:10,left:10,transition:"opacity 150ms",background:"white",borderRadius:"50%",zIndex:"5 !important"},children:Se(Ee,{size:"small",disabled:u,checked:L,onClick:function(e){var t;e.preventDefault(),e.stopPropagation(),(t=new Set(V)).has(l)?t.delete(l):t.add(l),v({advertising_images:p(t),apartment_images:z})}})}),Se(Ne,{Loader:Gl,payload:l,children:(A=r(t().mark((function e(n){var i,a,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",Se(Oe,{sx:{fontSize:96,fill:"white"}}));case 2:if(i=function(){var e=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=4;break}return e.next=3,Fl.appwriteService.getImageURL(n);case 3:case 6:return e.abrupt("return",e.sent);case 4:return e.next=6,Fl.previewService.getImageURL(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),sa){e.next=11;break}return e.next=6,i();case 6:return a=e.sent,e.next=9,pu(a,"".concat(n,"-").concat(o?"modal":""),f);case 9:s=e.sent,S.once((function(){s&&URL.revokeObjectURL(s)}));case 11:if(a){e.next=15;break}return e.next=14,i();case 14:a=e.sent;case 15:return e.abrupt("return",Se("img",{crossOrigin:"anonymous",loading:"lazy",alt:n,src:sa?a:s||a,style:{objectFit:"contain",height:"100%",width:"100%",pointerEvents:"none"}}));case 16:case"end":return e.stop()}}),e)}))),function(e){return A.apply(this,arguments)})})]})]})})},Xl=$l()((function(e){return{root:{position:"fixed",padding:20,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"stretch",transform:"translate(-50%, -50%)",backgroundColor:e.palette.background.paper,borderRadius:5,gap:5,top:"50%",left:"50%",width:"calc(100vmin - 60px)",height:"calc(100vmin - 60px)",outline:"none"},content:{overflow:"hidden",padding:e.spacing(1),flex:1},container:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flex:1,overflow:"hidden",paddingTop:e.spacing(1)},title:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:15,color:e.palette.text.primary},submit:{marginTop:15},disabled:{opacity:.5,pointerEvents:"none"},indicatorTransparent:{height:6,background:e.palette.primary.main},tabRootTransparent:{minHeight:54,height:54},tabsRoot:{minHeight:54,height:54,marginLeft:"0 !important",marginRight:"0 !important"},prev:{position:"absolute",margin:"auto",left:"10px",top:"10px",bottom:"5px",zIndex:"2 !important",color:e.palette.background.paper,width:"30%"},next:{position:"absolute",margin:"auto",right:"10px",top:"10px",bottom:"5px",zIndex:"2 !important",color:e.palette.background.paper,width:"30%"},icon_border:{border:"1px solid black"}}})),Jl=function(e){var t=e.apartment_images,n=e.advertising_images,r=e._fieldData,a=e.payload,o=e.readonly,s=e.onChange,u=i(Ol(),1)[0],l=i(Wl(),1)[0],c=n||[],d=t||[],m=function(e){var t=e._fieldData,n=e.advertising_images,r=e.apartment_images,a=e.readonly,o=e.payload,s=e.onChange,u=i(we.useState(""),2),l=u[0],c=u[1],d=i(we.useState(!1),2),p=d[0],m=d[1],f=(null==r?void 0:r.length)||0,h=i(we.useState(0),2),y=h[0],v=h[1],b=i(we.useState(!1),2),_=b[0],k=b[1],g=i(we.useState(0),2),x=g[0],w=g[1],S=i(we.useState(!1),2),z=S[0],V=S[1];we.useEffect((function(){v(Array.isArray(r)?r.indexOf(l):0)}),[l]);var A=Xl(),T=A.classes,C=(A.cx,function(){x||(c(""),v(0),k(!1))}),F=function(){w((function(e){return e+1}))},L=function(){w((function(e){return e-1}))},I=function(e){e.preventDefault(),e.stopPropagation(),c(r?r[y+1]:"")},M=function(e){e.preventDefault(),e.stopPropagation(),c(r?r[y-1]:"")};return{render:function(){return Se(Ye,{open:_,onClose:C,sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center","& .MuiBackdrop-root":{background:je("#000",.5)}},children:Se("div",{className:T.root,onMouseEnter:function(){m(!0)},onMouseLeave:function(){m(!1)},onClick:function(){return k(!1)},children:Se("div",{className:T.container,children:[Se(Ue,{className:T.prev,onClick:M,disabled:0===y,onMouseOver:function(){return V(!0)},onMouseLeave:function(){return V(!1)}}),Se(Ue,{className:T.next,onClick:I,disabled:y===f-1,onMouseOver:function(){return V(!0)},onMouseLeave:function(){return V(!1)}}),Se(Kl,{modal:!0,onLoadEnd:L,onLoadStart:F,className:T.content,advertising_images:n,apartment_images:r,text:"№".concat(t.apartment_index),payload:o,onChange:s,image:l,readonly:a,drag:!1,onMouseOver:z}),f>1&&Se(qe,{sx:{position:"absolute",left:0,bottom:0,width:"100%",height:75,display:"flex",alignItems:"space-beetween",justifyContent:"center",transition:"opacity 150ms",opacity:p?1:0},children:Se(He,{onClick:function(e){e.preventDefault(),e.stopPropagation()},steps:f,position:"static",activeStep:y,nextButton:Se(We,{size:"small",sx:{ml:1},onClick:I,disabled:y===f-1,children:Se($e,{})}),backButton:Se(We,{size:"small",sx:{mr:1},onClick:M,disabled:0===y,children:Se(Ge,{})}),sx:{height:"45px",backdropFilter:"blur(20px)",backgroundColor:"#00000012",borderRadius:"25px",zIndex:"1000"}})})]})})})},handleNext:I,handleBack:M,pickImage:function(e){c(e),k(!0)}}}({_fieldData:r,payload:a,apartment_images:d,advertising_images:c,onChange:function(e){var t=e.apartment_images,n=e.advertising_images;s({apartment_images:t,advertising_images:n})},readonly:o}),f=m.pickImage,h=m.render,y=Be(),v=function(e){o?f(e):function(e){var t=new Set(c);t.has(e)?t.delete(e):t.add(e),s({advertising_images:p(t),apartment_images:d})}(e)};return Se(Ae,{children:[Se(Ke,{gap:1,sx:{pointerEvents:"all",minHeight:"calc(100vh - 270px)"},flexWrap:"wrap",direction:"row",onDrop:function(){!function(){if(u!=l){var e=d.indexOf(u),t=d.indexOf(l),n=d[e];d[e]=d[t],d[t]=n,s({apartment_images:d,advertising_images:c})}}(),y.next()},children:d.filter((function(e){return!o||c.includes(e)})).map((function(e,t){return Se(Kl,{sx:{width:275},image:e,apartment_images:d,advertising_images:c,onChange:function(e){var t=e.apartment_images,n=e.advertising_images;s({apartment_images:t,advertising_images:n})},text:"№".concat(r.apartment_index),dropSubject:y,drag:!o,payload:a,readonly:o,onClick:v},t)}))}),h()]})},Zl=function(e){return Se(Nl,{initialState:"",children:Se(Hl,{initialState:"",children:Se(Jl,o({},e))})})},Ql=function(e){for(var t=!1,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(e instanceof Set){var a,o=m(r);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(e.has(s)){t=!0;break}}}catch(d){o.e(d)}finally{o.f()}}else{var u,l=m(r);try{for(l.s();!(u=l.n()).done;){var c=u.value;if(String("boolean"==typeof e[c]?e[c]:e[c]||"").length){t=!0;break}}}catch(d){l.e(d)}finally{l.f()}}return t},ec=[{type:a.Fragment,isVisible:function(e){var t=!0;return t=(t=(t=t&&Xe(e.podkategoriya_obekta,"Квартиры"))&&Xe(e.kategoriya_obekta,"Жилая"))&&!Xe(e.kategoriya_obekta,"Коммерческая")},fields:[{type:a.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилая квартира)"})}},{type:a.Text,isVisible:function(e){return Ql(e,"zagolovok_dlya_reklamy")},outlined:!1,compute:function(e){return e.zagolovok_dlya_reklamy||""},title:"Заголовок для рекламы"},{type:a.Text,outlined:!1,compute:(tl=r(t().mark((function e(n){var r,i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.apartment_id,e.next=3,Fl.apartmentViewService.tryRead(r);case 3:if(i=e.sent){e.next=6;break}return e.abrupt("return","");case 6:if(a=i.arenda,!(o=i.prodazha)||!a){e.next=11;break}return e.abrupt("return","Продажа, Аренда");case 11:if(!o){e.next=15;break}return e.abrupt("return","Продажа");case 15:if(!a){e.next=19;break}return e.abrupt("return","Аренда");case 19:return e.abrupt("return","");case 20:case"end":return e.stop()}}),e)}))),function(e){return tl.apply(this,arguments)}),title:"Тип сделки"},{type:a.Text,isVisible:function(e){return Ql(e,"rajon")},outlined:!1,compute:function(e){return e.rajon||""},title:"Район"},{type:a.Text,isVisible:function(e){return Ql(e,"ulicza")},outlined:!1,compute:function(e){return e.ulicza||""},title:"Адрес"},{type:a.Text,isVisible:function(e){return Ql(e,"orientir")},outlined:!1,compute:function(e){return e.orientir||""},title:"Ориентир"},{type:a.Text,isVisible:function(e){return Ql(e,"metro")},outlined:!1,compute:function(e){return e.metro||""},title:"Метро"},{type:a.Text,isVisible:function(e){return Ql(e,"kolichestvo_komnat")},outlined:!1,compute:function(e){return e.kolichestvo_komnat||""},title:"Количество комнат"},{type:a.Text,isVisible:function(e){return Ql(e,"etazh")},outlined:!1,compute:function(e){return e.etazh||""},title:"Этаж"},{type:a.Text,isVisible:function(e){return Ql(e,"etazhnost")},outlined:!1,compute:function(e){return e.etazhnost||""},title:"Этажность"},{type:a.Text,isVisible:function(e){return Ql(e,"obshhaya_ploshhad")},outlined:!1,compute:function(e){return e.obshhaya_ploshhad||""},title:"Общая площадь М²"},{type:a.Text,outlined:!1,compute:function(e){return[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).join(", ")||""},isVisible:function(e){return Ql(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya")},title:"Состояние ремонта"},{type:a.Text,isVisible:function(e,t){var n=t.permissions;return te(Ql(e,"kategoriya_obekta"),n.hasAdvertisingKategoryAddPermission)},outlined:!1,compute:function(e){return[e.kategoriya_obekta].filter((function(e){return e})).flatMap((function(e){return e})).join(", ")||""},title:"Категория объекта"},{type:a.Text,isVisible:function(e,t){var n=t.permissions;return te(Ql(e,"podkategoriya_obekta"),n.hasAdvertisingKategoryAddPermission)},outlined:!1,compute:function(e){return e.podkategoriya_obekta||""},title:"Подкатегория объекта"},{type:a.Text,isVisible:function(e){return Ql(e,"tip_nedvizhimosti")},outlined:!1,compute:function(e){return e.tip_nedvizhimosti||""},title:"Тип недвижимости"},{type:a.Text,isVisible:function(e){return Ql(e,"nazvanie_zhk")},outlined:!1,compute:function(e){return e.nazvanie_zhk||""},title:"Название ЖК"},{type:a.Text,isVisible:function(e){return Ql(e,"primechanie")},outlined:!1,inputRows:4,compute:function(e){return e.primechanie||""},title:"Примечание"},{type:a.Text,outlined:!1,compute:(el=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.nomer_agenstva,e.next=3,Fl.dictService.getAgencyMap();case 3:return i=e.sent,e.abrupt("return",S.get(i,r)||r);case 5:case"end":return e.stop()}}),e)}))),function(e){return el.apply(this,arguments)}),title:"Номер агенства"},{type:a.Text,outlined:!1,compute:(Qu=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.nomer_agenta,e.next=3,Fl.dictService.getAgentMap();case 3:return i=e.sent,e.abrupt("return",S.get(i,r)||r);case 5:case"end":return e.stop()}}),e)}))),function(e){return Qu.apply(this,arguments)}),title:"Номер агента"}]},{type:a.Group,columns:"6",fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:function(e){return e.apartment_images&&e.apartment_images.length},fields:[{type:a.Component,sx:{mb:2},element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})}},{type:a.Component,element:Zl}]}]}]},{type:a.Fragment,isVisible:function(e){var t=!0;return t=(t=(t=t&&Xe(e.podkategoriya_obekta,"Дома"))&&Xe(e.kategoriya_obekta,"Жилая"))&&!Xe(e.kategoriya_obekta,"Коммерческая")},fields:[{type:a.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилой дом)"})}},{type:a.Text,isVisible:function(e){return Ql(e,"zagolovok_dlya_reklamy")},outlined:!1,compute:function(e){return e.zagolovok_dlya_reklamy||""},title:"Заголовок для рекламы"},{type:a.Text,outlined:!1,compute:(Zu=r(t().mark((function e(n){var r,i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.apartment_id,e.next=3,Fl.apartmentViewService.tryRead(r);case 3:if(i=e.sent){e.next=6;break}return e.abrupt("return","");case 6:if(a=i.arenda,!(o=i.prodazha)||!a){e.next=11;break}return e.abrupt("return","Продажа, Аренда");case 11:if(!o){e.next=15;break}return e.abrupt("return","Продажа");case 15:if(!a){e.next=19;break}return e.abrupt("return","Аренда");case 19:return e.abrupt("return","");case 20:case"end":return e.stop()}}),e)}))),function(e){return Zu.apply(this,arguments)}),title:"Тип сделки"},{type:a.Text,isVisible:function(e){return Ql(e,"rajon")},outlined:!1,compute:function(e){return e.rajon||""},title:"Район"},{type:a.Text,isVisible:function(e){return Ql(e,"ulicza")},outlined:!1,compute:function(e){return e.ulicza||""},title:"Адрес"},{type:a.Text,isVisible:function(e){return Ql(e,"orientir")},outlined:!1,compute:function(e){return e.orientir||""},title:"Ориентир"},{type:a.Text,isVisible:function(e){return Ql(e,"metro")},outlined:!1,compute:function(e){return e.metro||""},title:"Метро"},{type:a.Text,isVisible:function(e){return Ql(e,"kolichestvo_komnat")},outlined:!1,compute:function(e){return e.kolichestvo_komnat||""},title:"Количество комнат"},{type:a.Text,isVisible:function(e){return Ql(e,"etazhnost")},outlined:!1,compute:function(e){return e.etazhnost||""},title:"Этажность"},{type:a.Text,isVisible:function(e){return Ql(e,"kolichestvo_sotok")},outlined:!1,compute:function(e){return e.kolichestvo_sotok||""},title:"Количество соток"},{type:a.Text,outlined:!1,compute:function(e){return[e.bassejn||""].filter((function(e){return e})).flatMap((function(e){return e})).join(", ")||""},isVisible:function(e){return Ql(e,"bassejn")},title:"Бассейн"},{type:a.Text,isVisible:function(e){return Ql(e,"ploshhad_doma")},outlined:!1,compute:function(e){return e.ploshhad_doma||""},title:"Площадь дома М²"},{type:a.Text,outlined:!1,compute:function(e){return[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).join(", ")||""},isVisible:function(e){return Ql(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya")},title:"Состояние ремонта"},{type:a.Text,isVisible:function(e,t){var n=t.permissions;return te(Ql(e,"kategoriya_obekta"),n.hasAdvertisingKategoryAddPermission)},outlined:!1,compute:function(e){return[e.kategoriya_obekta].filter((function(e){return e})).flatMap((function(e){return e})).join(", ")||""},title:"Категория объекта"},{type:a.Text,isVisible:function(e,t){var n=t.permissions;return te(Ql(e,"podkategoriya_obekta"),n.hasAdvertisingKategoryAddPermission)},outlined:!1,compute:function(e){return e.podkategoriya_obekta||""},title:"Подкатегория объекта"},{type:a.Text,isVisible:function(e){return Ql(e,"primechanie")},outlined:!1,inputRows:4,compute:function(e){return e.primechanie||""},title:"Примечание"},{type:a.Text,outlined:!1,compute:(Ju=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.nomer_agenstva,e.next=3,Fl.dictService.getAgencyMap();case 3:return i=e.sent,e.abrupt("return",S.get(i,r)||r);case 5:case"end":return e.stop()}}),e)}))),function(e){return Ju.apply(this,arguments)}),title:"Номер агенства"},{type:a.Text,outlined:!1,compute:(Xu=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.nomer_agenta,e.next=3,Fl.dictService.getAgentMap();case 3:return i=e.sent,e.abrupt("return",S.get(i,r)||r);case 5:case"end":return e.stop()}}),e)}))),function(e){return Xu.apply(this,arguments)}),title:"Номер агента"}]},{type:a.Group,columns:"6",fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:function(e){return e.apartment_images&&e.apartment_images.length},fields:[{type:a.Component,sx:{mb:2},element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})}},{type:a.Component,element:Zl}]}]}]},{type:a.Fragment,isVisible:function(e){var t=!0;return t=(t=(t=t&&Xe(e.podkategoriya_obekta,"Земля/Участок"))&&Xe(e.kategoriya_obekta,"Жилая"))&&!Xe(e.kategoriya_obekta,"Коммерческая")},fields:[{type:a.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилая земля/участок)"})}},{type:a.Text,isVisible:function(e){return Ql(e,"zagolovok_dlya_reklamy")},outlined:!1,compute:function(e){return e.zagolovok_dlya_reklamy||""},title:"Заголовок для рекламы"},{type:a.Text,outlined:!1,compute:(Ku=r(t().mark((function e(n){var r,i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.apartment_id,e.next=3,Fl.apartmentViewService.tryRead(r);case 3:if(i=e.sent){e.next=6;break}return e.abrupt("return","");case 6:if(a=i.arenda,!(o=i.prodazha)||!a){e.next=11;break}return e.abrupt("return","Продажа, Аренда");case 11:if(!o){e.next=15;break}return e.abrupt("return","Продажа");case 15:if(!a){e.next=19;break}return e.abrupt("return","Аренда");case 19:return e.abrupt("return","");case 20:case"end":return e.stop()}}),e)}))),function(e){return Ku.apply(this,arguments)}),title:"Тип сделки"},{type:a.Text,outlined:!1,compute:function(e){return[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).join(", ")||""},isVisible:function(e){return Ql(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya")},title:"Назначение объекта"},{type:a.Text,outlined:!1,compute:function(e){return[e.sostoyanie_obekta,e["sostoyanie-obekta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).join(", ")||""},isVisible:function(e){return Ql(e,"sostoyanie_obekta","sostoyanie-obekta_zemlya")},title:"Состояние объекта"},{type:a.Text,isVisible:function(e){return Ql(e,"rajon")},outlined:!1,compute:function(e){return e.rajon||""},title:"Район"},{type:a.Text,isVisible:function(e){return Ql(e,"ulicza")},outlined:!1,compute:function(e){return e.ulicza||""},title:"Адрес"},{type:a.Text,isVisible:function(e){return Ql(e,"orientir")},outlined:!1,compute:function(e){return e.orientir||""},title:"Ориентир"},{type:a.Text,isVisible:function(e){return Ql(e,"metro")},outlined:!1,compute:function(e){return e.metro||""},title:"Метро"},{type:a.Text,isVisible:function(e){return Ql(e,"kolichestvo_sotok")},outlined:!1,compute:function(e){return e.kolichestvo_sotok||""},title:"Количество соток"},{type:a.Text,outlined:!1,compute:function(e){return[e.vid_liczenzii].filter((function(e){return e})).flatMap((function(e){return e})).join(", ")||""},isVisible:function(e){return Ql(e,"vid_liczenzii")},title:"Вид лицензии"},{type:a.Text,isVisible:function(e,t){var n=t.permissions;return te(Ql(e,"kategoriya_obekta"),n.hasAdvertisingKategoryAddPermission)},outlined:!1,compute:function(e){return[e.kategoriya_obekta].filter((function(e){return e})).flatMap((function(e){return e})).join(", ")||""},title:"Категория объекта"},{type:a.Text,isVisible:function(e,t){var n=t.permissions;return te(Ql(e,"podkategoriya_obekta"),n.hasAdvertisingKategoryAddPermission)},outlined:!1,compute:function(e){return e.podkategoriya_obekta||""},title:"Подкатегория объекта"},{type:a.Text,isVisible:function(e){return Ql(e,"primechanie")},outlined:!1,inputRows:4,compute:function(e){return e.primechanie||""},title:"Примечание"},{type:a.Text,outlined:!1,compute:(Yu=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.nomer_agenstva,e.next=3,Fl.dictService.getAgencyMap();case 3:return i=e.sent,e.abrupt("return",S.get(i,r)||r);case 5:case"end":return e.stop()}}),e)}))),function(e){return Yu.apply(this,arguments)}),title:"Номер агенства"},{type:a.Text,outlined:!1,compute:(Gu=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.nomer_agenta,e.next=3,Fl.dictService.getAgentMap();case 3:return i=e.sent,e.abrupt("return",S.get(i,r)||r);case 5:case"end":return e.stop()}}),e)}))),function(e){return Gu.apply(this,arguments)}),title:"Номер агента"}]},{type:a.Group,columns:"6",fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:function(e){return e.apartment_images&&e.apartment_images.length},fields:[{type:a.Component,sx:{mb:2},element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})}},{type:a.Component,element:Zl}]}]}]},{type:a.Fragment,isVisible:function(e){return(!Xe(e.podkategoriya_obekta,"Квартиры")||!Xe(e.kategoriya_obekta,"Коммерческая"))&&((!Xe(e.podkategoriya_obekta,"Дома")||!Xe(e.kategoriya_obekta,"Коммерческая"))&&((!Xe(e.podkategoriya_obekta,"Земля/Участок")||!Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.kategoriya_obekta,"Коммерческая")))},fields:[{type:a.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая недвижимость)"})}},{type:a.Text,isVisible:function(e){return Ql(e,"zagolovok_dlya_reklamy")},outlined:!1,compute:function(e){return e.zagolovok_dlya_reklamy||""},title:"Заголовок для рекламы"},{type:a.Text,outlined:!1,compute:($u=r(t().mark((function e(n){var r,i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.apartment_id,e.next=3,Fl.apartmentViewService.tryRead(r);case 3:if(i=e.sent){e.next=6;break}return e.abrupt("return","");case 6:if(a=i.arenda,!(o=i.prodazha)||!a){e.next=11;break}return e.abrupt("return","Продажа, Аренда");case 11:if(!o){e.next=15;break}return e.abrupt("return","Продажа");case 15:if(!a){e.next=19;break}return e.abrupt("return","Аренда");case 19:return e.abrupt("return","");case 20:case"end":return e.stop()}}),e)}))),function(e){return $u.apply(this,arguments)}),title:"Тип сделки"},{type:a.Text,outlined:!1,compute:function(e){return[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).join(", ")||""},isVisible:function(e){return Ql(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya")},title:"Назначение объекта"},{type:a.Text,outlined:!1,compute:function(e){return[e.raspolozhenie_obekta].filter((function(e){return e})).flatMap((function(e){return e})).join(", ")||""},isVisible:function(e){return Ql(e,"raspolozhenie_obekta")},title:"Расположение объекта"},{type:a.Text,isVisible:function(e){return Ql(e,"rajon")},outlined:!1,compute:function(e){return e.rajon||""},title:"Район"},{type:a.Text,isVisible:function(e){return Ql(e,"ulicza")},outlined:!1,compute:function(e){return e.ulicza||""},title:"Адрес"},{type:a.Text,isVisible:function(e){return Ql(e,"orientir")},outlined:!1,compute:function(e){return e.orientir||""},title:"Ориентир"},{type:a.Text,isVisible:function(e){return Ql(e,"metro")},outlined:!1,compute:function(e){return e.metro||""},title:"Метро"},{type:a.Text,isVisible:function(e){return Ql(e,"obshhaya_ploshhad")},outlined:!1,compute:function(e){return e.obshhaya_ploshhad||""},title:"Общая площадь М²"},{type:a.Text,isVisible:function(e){return Ql(e,"kolichestvo_komnat")},outlined:!1,compute:function(e){return e.kolichestvo_komnat||""},title:"Количество комнат"},{type:a.Text,isVisible:function(e){return Ql(e,"etazh")},outlined:!1,compute:function(e){return e.etazh||""},title:"Этаж"},{type:a.Text,isVisible:function(e){return Ql(e,"etazhnost")},outlined:!1,compute:function(e){return e.etazhnost||""},title:"Этажность"},{type:a.Text,outlined:!1,compute:function(e){return[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).join(", ")||""},isVisible:function(e){return Ql(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya")},title:"Состояние ремонта"},{type:a.Text,isVisible:function(e){return Ql(e,"primechanie")},outlined:!1,inputRows:4,compute:function(e){return e.primechanie||""},title:"Примечание"},{type:a.Text,isVisible:function(e,t){var n=t.permissions;return te(Ql(e,"kategoriya_obekta"),n.hasAdvertisingKategoryAddPermission)},outlined:!1,compute:function(e){return[e.kategoriya_obekta].filter((function(e){return e})).flatMap((function(e){return e})).join(", ")||""},title:"Категория объекта"},{type:a.Text,isVisible:function(e,t){var n=t.permissions;return te(Ql(e,"podkategoriya_obekta"),n.hasAdvertisingKategoryAddPermission)},outlined:!1,compute:function(e){return e.podkategoriya_obekta||""},title:"Подкатегория объекта"},{type:a.Text,outlined:!1,compute:(Wu=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.nomer_agenstva,e.next=3,Fl.dictService.getAgencyMap();case 3:return i=e.sent,e.abrupt("return",S.get(i,r)||r);case 5:case"end":return e.stop()}}),e)}))),function(e){return Wu.apply(this,arguments)}),title:"Номер агенства"},{type:a.Text,outlined:!1,compute:(Hu=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.nomer_agenta,e.next=3,Fl.dictService.getAgentMap();case 3:return i=e.sent,e.abrupt("return",S.get(i,r)||r);case 5:case"end":return e.stop()}}),e)}))),function(e){return Hu.apply(this,arguments)}),title:"Номер агента"}]},{type:a.Group,columns:"6",fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:function(e){return e.apartment_images&&e.apartment_images.length},fields:[{type:a.Component,sx:{mb:2},element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})}},{type:a.Component,element:Zl}]}]}]},{type:a.Fragment,isVisible:function(e){return!(!Xe(e.kategoriya_obekta,"Коммерческая")||!Xe(e.podkategoriya_obekta,"Квартиры"))},fields:[{type:a.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая + Жилая квартира)"})}},{type:a.Text,isVisible:function(e){return Ql(e,"zagolovok_dlya_reklamy")},outlined:!1,compute:function(e){return e.zagolovok_dlya_reklamy||""},title:"Заголовок для рекламы"},{type:a.Text,outlined:!1,compute:(Uu=r(t().mark((function e(n){var r,i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.apartment_id,e.next=3,Fl.apartmentViewService.tryRead(r);case 3:if(i=e.sent){e.next=6;break}return e.abrupt("return","");case 6:if(a=i.arenda,!(o=i.prodazha)||!a){e.next=11;break}return e.abrupt("return","Продажа, Аренда");case 11:if(!o){e.next=15;break}return e.abrupt("return","Продажа");case 15:if(!a){e.next=19;break}return e.abrupt("return","Аренда");case 19:return e.abrupt("return","");case 20:case"end":return e.stop()}}),e)}))),function(e){return Uu.apply(this,arguments)}),title:"Тип сделки"},{type:a.Text,isVisible:function(e){return Ql(e,"tip_nedvizhimosti")},outlined:!1,compute:function(e){return e.tip_nedvizhimosti||""},title:"Тип недвижимости"},{type:a.Text,isVisible:function(e){return Ql(e,"nazvanie_zhk")},outlined:!1,compute:function(e){return e.nazvanie_zhk||""},title:"Название ЖК"},{type:a.Text,outlined:!1,compute:function(e){return[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).join(", ")||""},isVisible:function(e){return Ql(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya")},title:"Назначение объекта"},{type:a.Text,outlined:!1,compute:function(e){return[e.raspolozhenie_obekta].filter((function(e){return e})).flatMap((function(e){return e})).join(", ")||""},isVisible:function(e){return Ql(e,"raspolozhenie_obekta")},title:"Расположение объекта"},{type:a.Text,isVisible:function(e){return Ql(e,"rajon")},outlined:!1,compute:function(e){return e.rajon||""},title:"Район"},{type:a.Text,isVisible:function(e){return Ql(e,"ulicza")},outlined:!1,compute:function(e){return e.ulicza||""},title:"Адрес"},{type:a.Text,isVisible:function(e){return Ql(e,"orientir")},outlined:!1,compute:function(e){return e.orientir||""},title:"Ориентир"},{type:a.Text,isVisible:function(e){return Ql(e,"metro")},outlined:!1,compute:function(e){return e.metro||""},title:"Метро"},{type:a.Text,isVisible:function(e){return Ql(e,"obshhaya_ploshhad")},outlined:!1,compute:function(e){return e.obshhaya_ploshhad||""},title:"Общая площадь М²"},{type:a.Text,isVisible:function(e){return Ql(e,"kolichestvo_komnat")},outlined:!1,compute:function(e){return e.kolichestvo_komnat||""},title:"Количество комнат"},{type:a.Text,outlined:!1,compute:function(e){return[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).join(", ")||""},isVisible:function(e){return Ql(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya")},title:"Состояние ремонта"},{type:a.Text,isVisible:function(e){return Ql(e,"primechanie")},outlined:!1,inputRows:4,compute:function(e){return e.primechanie||""},title:"Примечание"},{type:a.Text,isVisible:function(e,t){var n=t.permissions;return te(Ql(e,"kategoriya_obekta"),n.hasAdvertisingKategoryAddPermission)},outlined:!1,compute:function(e){return[e.kategoriya_obekta].filter((function(e){return e})).flatMap((function(e){return e})).join(", ")||""},title:"Категория объекта"},{type:a.Text,isVisible:function(e,t){var n=t.permissions;return te(Ql(e,"podkategoriya_obekta"),n.hasAdvertisingKategoryAddPermission)},outlined:!1,compute:function(e){return e.podkategoriya_obekta||""},title:"Подкатегория объекта"},{type:a.Text,outlined:!1,compute:(Ou=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.nomer_agenstva,e.next=3,Fl.dictService.getAgencyMap();case 3:return i=e.sent,e.abrupt("return",S.get(i,r)||r);case 5:case"end":return e.stop()}}),e)}))),function(e){return Ou.apply(this,arguments)}),title:"Номер агенства"},{type:a.Text,outlined:!1,compute:(Nu=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.nomer_agenta,e.next=3,Fl.dictService.getAgentMap();case 3:return i=e.sent,e.abrupt("return",S.get(i,r)||r);case 5:case"end":return e.stop()}}),e)}))),function(e){return Nu.apply(this,arguments)}),title:"Номер агента"}]},{type:a.Group,columns:"6",fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:function(e){return e.apartment_images&&e.apartment_images.length},fields:[{type:a.Component,sx:{mb:2},element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})}},{type:a.Component,element:Zl}]}]}]},{type:a.Fragment,isVisible:function(e){return!(!Xe(e.kategoriya_obekta,"Коммерческая")||!Xe(e.podkategoriya_obekta,"Дома"))},fields:[{type:a.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческий + Жилой дом)"})}},{type:a.Text,isVisible:function(e){return Ql(e,"zagolovok_dlya_reklamy")},outlined:!1,compute:function(e){return e.zagolovok_dlya_reklamy||""},title:"Заголовок для рекламы"},{type:a.Text,outlined:!1,compute:(Eu=r(t().mark((function e(n){var r,i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.apartment_id,e.next=3,Fl.apartmentViewService.tryRead(r);case 3:if(i=e.sent){e.next=6;break}return e.abrupt("return","");case 6:if(a=i.arenda,!(o=i.prodazha)||!a){e.next=11;break}return e.abrupt("return","Продажа, Аренда");case 11:if(!o){e.next=15;break}return e.abrupt("return","Продажа");case 15:if(!a){e.next=19;break}return e.abrupt("return","Аренда");case 19:return e.abrupt("return","");case 20:case"end":return e.stop()}}),e)}))),function(e){return Eu.apply(this,arguments)}),title:"Тип сделки"},{type:a.Text,outlined:!1,compute:function(e){return[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).join(", ")||""},isVisible:function(e){return Ql(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya")},title:"Назначение объекта"},{type:a.Text,outlined:!1,compute:function(e){return[e.raspolozhenie_obekta].filter((function(e){return e})).flatMap((function(e){return e})).join(", ")||""},isVisible:function(e){return Ql(e,"raspolozhenie_obekta")},title:"Расположение объекта"},{type:a.Text,isVisible:function(e){return Ql(e,"rajon")},outlined:!1,compute:function(e){return e.rajon||""},title:"Район"},{type:a.Text,isVisible:function(e){return Ql(e,"ulicza")},outlined:!1,compute:function(e){return e.ulicza||""},title:"Адрес"},{type:a.Text,isVisible:function(e){return Ql(e,"orientir")},outlined:!1,compute:function(e){return e.orientir||""},title:"Ориентир"},{type:a.Text,isVisible:function(e){return Ql(e,"metro")},outlined:!1,compute:function(e){return e.metro||""},title:"Метро"},{type:a.Text,isVisible:function(e){return Ql(e,"ploshhad_doma")},outlined:!1,compute:function(e){return e.ploshhad_doma||""},title:"Площадь дома М²"},{type:a.Text,isVisible:function(e){return Ql(e,"kolichestvo_komnat")},outlined:!1,compute:function(e){return e.kolichestvo_komnat||""},title:"Количество комнат"},{type:a.Text,outlined:!1,compute:function(e){return[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).join(", ")||""},isVisible:function(e){return Ql(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya")},title:"Состояние ремонта"},{type:a.Text,isVisible:function(e){return Ql(e,"kolichestvo_sotok")},outlined:!1,compute:function(e){return e.kolichestvo_sotok||""},title:"Количество соток"},{type:a.Text,isVisible:function(e){return Ql(e,"etazhnost")},outlined:!1,compute:function(e){return e.etazhnost||""},title:"Этажность"},{type:a.Text,isVisible:function(e){return Ql(e,"primechanie")},outlined:!1,inputRows:4,compute:function(e){return e.primechanie||""},title:"Примечание"},{type:a.Text,isVisible:function(e,t){var n=t.permissions;return te(Ql(e,"kategoriya_obekta"),n.hasAdvertisingKategoryAddPermission)},outlined:!1,compute:function(e){return[e.kategoriya_obekta].filter((function(e){return e})).flatMap((function(e){return e})).join(", ")||""},title:"Категория объекта"},{type:a.Text,isVisible:function(e,t){var n=t.permissions;return te(Ql(e,"podkategoriya_obekta"),n.hasAdvertisingKategoryAddPermission)},outlined:!1,compute:function(e){return e.podkategoriya_obekta||""},title:"Подкатегория объекта"},{type:a.Text,outlined:!1,compute:(Pu=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.nomer_agenstva,e.next=3,Fl.dictService.getAgencyMap();case 3:return i=e.sent,e.abrupt("return",S.get(i,r)||r);case 5:case"end":return e.stop()}}),e)}))),function(e){return Pu.apply(this,arguments)}),title:"Номер агенства"},{type:a.Text,outlined:!1,compute:(qu=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.nomer_agenta,e.next=3,Fl.dictService.getAgentMap();case 3:return i=e.sent,e.abrupt("return",S.get(i,r)||r);case 5:case"end":return e.stop()}}),e)}))),function(e){return qu.apply(this,arguments)}),title:"Номер агента"}]},{type:a.Group,columns:"6",fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:function(e){return e.apartment_images&&e.apartment_images.length},fields:[{type:a.Component,sx:{mb:2},element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})}},{type:a.Component,element:Zl}]}]}]},{type:a.Fragment,isVisible:function(e){return!(!Xe(e.kategoriya_obekta,"Коммерческая")||!Xe(e.podkategoriya_obekta,"Земля/Участок"))},fields:[{type:a.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая + Жилая земля/участок)"})}},{type:a.Text,isVisible:function(e){return Ql(e,"zagolovok_dlya_reklamy")},outlined:!1,compute:function(e){return e.zagolovok_dlya_reklamy||""},title:"Заголовок для рекламы"},{type:a.Text,outlined:!1,compute:(Ru=r(t().mark((function e(n){var r,i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.apartment_id,e.next=3,Fl.apartmentViewService.tryRead(r);case 3:if(i=e.sent){e.next=6;break}return e.abrupt("return","");case 6:if(a=i.arenda,!(o=i.prodazha)||!a){e.next=11;break}return e.abrupt("return","Продажа, Аренда");case 11:if(!o){e.next=15;break}return e.abrupt("return","Продажа");case 15:if(!a){e.next=19;break}return e.abrupt("return","Аренда");case 19:return e.abrupt("return","");case 20:case"end":return e.stop()}}),e)}))),function(e){return Ru.apply(this,arguments)}),title:"Тип сделки"},{type:a.Text,outlined:!1,compute:function(e){return[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).join(", ")||""},isVisible:function(e){return Ql(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya")},title:"Назначение объекта"},{type:a.Text,outlined:!1,compute:function(e){return[e.sostoyanie_obekta,e["sostoyanie-obekta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).join(", ")||""},isVisible:function(e){return Ql(e,"sostoyanie_obekta","sostoyanie-obekta_zemlya")},title:"Состояние объекта"},{type:a.Text,isVisible:function(e){return Ql(e,"rajon")},outlined:!1,compute:function(e){return e.rajon||""},title:"Район"},{type:a.Text,isVisible:function(e){return Ql(e,"ulicza")},outlined:!1,compute:function(e){return e.ulicza||""},title:"Адрес"},{type:a.Text,isVisible:function(e){return Ql(e,"orientir")},outlined:!1,compute:function(e){return e.orientir||""},title:"Ориентир"},{type:a.Text,isVisible:function(e){return Ql(e,"metro")},outlined:!1,compute:function(e){return e.metro||""},title:"Метро"},{type:a.Text,isVisible:function(e){return Ql(e,"kolichestvo_sotok")},outlined:!1,compute:function(e){return e.kolichestvo_sotok||""},title:"Количество соток"},{type:a.Text,outlined:!1,compute:function(e){return[e.vid_liczenzii].filter((function(e){return e})).flatMap((function(e){return e})).join(", ")||""},isVisible:function(e){return Ql(e,"vid_liczenzii")},title:"Вид лицензии"},{type:a.Text,isVisible:function(e){return Ql(e,"primechanie")},outlined:!1,inputRows:4,compute:function(e){return e.primechanie||""},title:"Примечание"},{type:a.Text,isVisible:function(e,t){var n=t.permissions;return te(Ql(e,"kategoriya_obekta"),n.hasAdvertisingKategoryAddPermission)},outlined:!1,compute:function(e){return[e.kategoriya_obekta].filter((function(e){return e})).flatMap((function(e){return e})).join(", ")||""},title:"Категория объекта"},{type:a.Text,isVisible:function(e,t){var n=t.permissions;return te(Ql(e,"podkategoriya_obekta"),n.hasAdvertisingKategoryAddPermission)},outlined:!1,compute:function(e){return e.podkategoriya_obekta||""},title:"Подкатегория объекта"},{type:a.Text,outlined:!1,compute:(Du=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.nomer_agenstva,e.next=3,Fl.dictService.getAgencyMap();case 3:return i=e.sent,e.abrupt("return",S.get(i,r)||r);case 5:case"end":return e.stop()}}),e)}))),function(e){return Du.apply(this,arguments)}),title:"Номер агенства"},{type:a.Text,outlined:!1,compute:(Bu=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.nomer_agenta,e.next=3,Fl.dictService.getAgentMap();case 3:return i=e.sent,e.abrupt("return",S.get(i,r)||r);case 5:case"end":return e.stop()}}),e)}))),function(e){return Bu.apply(this,arguments)}),title:"Номер агента"}]},{type:a.Group,columns:"6",fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:function(e){return e.apartment_images&&e.apartment_images.length},fields:[{type:a.Component,sx:{mb:2},element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})}},{type:a.Component,element:Zl}]}]}]}],tc=e("a",[{type:a.Fragment,isVisible:function(e){return null===e.kategoriya_obekta||!(!Xe(e.kategoriya_obekta,"Жилая")||!Xe(e.podkategoriya_obekta,"Квартиры"))},fields:[{type:a.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилая квартира)"})}},{type:a.Text,outlined:!1,name:"zagolovok_dlya_reklamy",title:"Заголовок для рекламы"},{type:a.Text,outlined:!1,name:"rajon",title:"Район"},{type:a.Text,outlined:!1,name:"ulicza",title:"Адрес"},{type:a.Complete,tip:Fl.dictService.getOrientir,outlined:!1,name:"orientir",title:"Ориентир"},{type:a.Combo,freeSolo:!0,outlined:!1,name:"metro",title:"Метро",itemList:["А. Ходжаев","Абдулла Кодирий","Алишер Навоий","Амир Темур хиёбони","Беруний","Бобур","Бодомзор","Буюк Ипак йули","Гофур Гулом","Дружба народов","Дустлик","Жанубий","Космонавтлар","Машинасозлар","Миллий бог","Мингурик","Минор","Мирзо Улугбек","Мустакиллик майдони","Новза","Ойбек","Олмазор","Отчопар","Пахтакор","Пушкинская","Сергели","Тинчлик","Тошкент","Тукимачи","Туркистон","Турсунзода","Узбекистон","Усмон Носыр","Файзулла Ходжаев","Хамид Олимжон","Чилонзор","Чорсу","Чош-тепа","Шахристан","Эхтиром","Юнус Ражабий","Юнусабад"]},{type:a.Text,outlined:!1,name:"kolichestvo_komnat",title:"Количество комнат"},{type:a.Text,outlined:!1,name:"etazh",title:"Этаж"},{type:a.Text,outlined:!1,name:"etazhnost",title:"Этажность"},{type:a.Text,outlined:!1,name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:a.Combo,freeSolo:!0,outlined:!1,name:"sostoyanie_remonta-kvartiry",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:a.Combo,outlined:!1,name:"kategoriya_obekta",title:"Категория объекта",itemList:["Жилая","Коммерческая","От застройщика"]},{type:a.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:function(e){return Xe(e.kategoriya_obekta,"Коммерческая")},itemList:function(){return["Квартиры","Дома","Земля/Участок","Здания","Базы"]}},{type:a.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:function(e){return!Xe(e.kategoriya_obekta,"Коммерческая")},itemList:function(){return["Квартиры","Дома","Земля/Участок"]}},{type:a.Combo,outlined:!1,name:"tip_nedvizhimosti",title:"Тип недвижимости",itemList:["Вторичное жилье","Новостройка"]},{type:a.Text,outlined:!1,name:"nazvanie_zhk",title:"Название ЖК"},{type:a.Text,outlined:!1,inputRows:4,name:"primechanie",title:"Примечание"},{type:a.Combo,outlined:!1,name:"nomer_agenstva",itemList:(Cl=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getAgencyMap();case 2:return n=e.sent,e.abrupt("return",Object.keys(n));case 4:case"end":return e.stop()}}),e)}))),function(){return Cl.apply(this,arguments)}),tr:(Tl=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getAgencyMap();case 2:return r=e.sent,e.abrupt("return",S.get(r,n)||"");case 4:case"end":return e.stop()}}),e)}))),function(e){return Tl.apply(this,arguments)}),title:"Номер агенства"},{type:a.Combo,outlined:!1,name:"nomer_agenta",itemList:(Al=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getAgentMap();case 2:return n=e.sent,e.abrupt("return",Object.keys(n));case 4:case"end":return e.stop()}}),e)}))),function(){return Al.apply(this,arguments)}),tr:(Vl=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getAgentMap();case 2:return r=e.sent,e.abrupt("return",S.get(r,n)||"");case 4:case"end":return e.stop()}}),e)}))),function(e){return Vl.apply(this,arguments)}),title:"Номер агента"}]},{type:a.Group,columns:"6",fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:function(e){return e.apartment_images&&e.apartment_images.length},fields:[{type:a.Component,sx:{mb:2},element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})}},{type:a.Component,element:Zl}]}]}]},{type:a.Fragment,isVisible:function(e){return!(!Xe(e.kategoriya_obekta,"Жилая")||!Xe(e.podkategoriya_obekta,"Дома"))},fields:[{type:a.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилой дом)"})}},{type:a.Text,outlined:!1,name:"zagolovok_dlya_reklamy",title:"Заголовок для рекламы"},{type:a.Text,outlined:!1,name:"rajon",title:"Район"},{type:a.Text,outlined:!1,name:"ulicza",title:"Адрес"},{type:a.Complete,tip:Fl.dictService.getOrientir,outlined:!1,name:"orientir",title:"Ориентир"},{type:a.Combo,freeSolo:!0,outlined:!1,name:"metro",title:"Метро",itemList:["А. Ходжаев","Абдулла Кодирий","Алишер Навоий","Амир Темур хиёбони","Беруний","Бобур","Бодомзор","Буюк Ипак йули","Гофур Гулом","Дружба народов","Дустлик","Жанубий","Космонавтлар","Машинасозлар","Миллий бог","Мингурик","Минор","Мирзо Улугбек","Мустакиллик майдони","Новза","Ойбек","Олмазор","Отчопар","Пахтакор","Пушкинская","Сергели","Тинчлик","Тошкент","Тукимачи","Туркистон","Турсунзода","Узбекистон","Усмон Носыр","Файзулла Ходжаев","Хамид Олимжон","Чилонзор","Чорсу","Чош-тепа","Шахристан","Эхтиром","Юнус Ражабий","Юнусабад"]},{type:a.Text,outlined:!1,name:"kolichestvo_komnat",title:"Количество комнат"},{type:a.Text,outlined:!1,name:"etazhnost",title:"Этажность"},{type:a.Text,outlined:!1,name:"kolichestvo_sotok",title:"Количество соток"},{type:a.Items,freeSolo:!1,outlined:!1,name:"bassejn",title:"Бассейн",itemList:["Летний","Зимний","Сауна","Нет"]},{type:a.Text,outlined:!1,name:"ploshhad_doma",title:"Площадь дома М²"},{type:a.Combo,freeSolo:!0,outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:a.Combo,outlined:!1,name:"kategoriya_obekta",title:"Категория объекта",itemList:["Жилая","Коммерческая","От застройщика"]},{type:a.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:function(e){return Xe(e.kategoriya_obekta,"Коммерческая")},itemList:function(){return["Квартиры","Дома","Земля/Участок","Здания","Базы"]}},{type:a.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:function(e){return!Xe(e.kategoriya_obekta,"Коммерческая")},itemList:function(){return["Квартиры","Дома","Земля/Участок"]}},{type:a.Text,outlined:!1,inputRows:4,name:"primechanie",title:"Примечание"},{type:a.Combo,outlined:!1,name:"nomer_agenstva",itemList:(zl=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getAgencyMap();case 2:return n=e.sent,e.abrupt("return",Object.keys(n));case 4:case"end":return e.stop()}}),e)}))),function(){return zl.apply(this,arguments)}),tr:(Sl=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getAgencyMap();case 2:return r=e.sent,e.abrupt("return",S.get(r,n)||"");case 4:case"end":return e.stop()}}),e)}))),function(e){return Sl.apply(this,arguments)}),title:"Номер агенства"},{type:a.Combo,outlined:!1,name:"nomer_agenta",itemList:(wl=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getAgentMap();case 2:return n=e.sent,e.abrupt("return",Object.keys(n));case 4:case"end":return e.stop()}}),e)}))),function(){return wl.apply(this,arguments)}),tr:(xl=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getAgentMap();case 2:return r=e.sent,e.abrupt("return",S.get(r,n)||"");case 4:case"end":return e.stop()}}),e)}))),function(e){return xl.apply(this,arguments)}),title:"Номер агента"}]},{type:a.Group,columns:"6",fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:function(e){return e.apartment_images&&e.apartment_images.length},fields:[{type:a.Component,sx:{mb:2},element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})}},{type:a.Component,element:Zl}]}]}]},{type:a.Fragment,isVisible:function(e){return null===e.kategoriya_obekta||!(!Xe(e.kategoriya_obekta,"Жилая")||!Xe(e.podkategoriya_obekta,"Земля/Участок"))},fields:[{type:a.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилая земля/участок)"})}},{type:a.Text,outlined:!1,name:"zagolovok_dlya_reklamy",title:"Заголовок для рекламы"},{type:a.Component,sx:{pr:1,mb:2},name:"naznachenie-obekta_zemlya",element:function(e){return Se(Ze,{variant:"standard",label:"Назначение объекта",items:[{label:"Сельхоз использование",value:"Сельхоз использование"},{label:"ИЖС",value:"ИЖС"},{label:"Высотная застройка",value:"Высотная застройка"},{label:"Промышленное назначение",value:"Промышленное назначение"},{label:"ТЦ",value:"ТЦ"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Склады",value:"Склады"},{label:"Инвестпроект",value:"Инвестпроект"},{label:"Строительство образовательных учреждений",value:"Строительство образовательных учреждений"},{label:"АЗС",value:"АЗС"},{label:"Мойка",value:"Мойка"}],value:e["naznachenie-obekta_zemlya"],onChange:function(t){return e.onChange(c({},"naznachenie-obekta_zemlya",t))}})}},{type:a.Combo,freeSolo:!0,outlined:!1,name:"sostoyanie-obekta_zemlya",title:"Состояние объекта",itemList:["Пустая земля/участок","Недостроенная","Под снос"]},{type:a.Text,outlined:!1,name:"rajon",title:"Район"},{type:a.Text,outlined:!1,name:"ulicza",title:"Адрес"},{type:a.Complete,tip:Fl.dictService.getOrientir,outlined:!1,name:"orientir",title:"Ориентир"},{type:a.Combo,freeSolo:!0,outlined:!1,name:"metro",title:"Метро",itemList:["А. Ходжаев","Абдулла Кодирий","Алишер Навоий","Амир Темур хиёбони","Беруний","Бобур","Бодомзор","Буюк Ипак йули","Гофур Гулом","Дружба народов","Дустлик","Жанубий","Космонавтлар","Машинасозлар","Миллий бог","Мингурик","Минор","Мирзо Улугбек","Мустакиллик майдони","Новза","Ойбек","Олмазор","Отчопар","Пахтакор","Пушкинская","Сергели","Тинчлик","Тошкент","Тукимачи","Туркистон","Турсунзода","Узбекистон","Усмон Носыр","Файзулла Ходжаев","Хамид Олимжон","Чилонзор","Чорсу","Чош-тепа","Шахристан","Эхтиром","Юнус Ражабий","Юнусабад"]},{type:a.Text,outlined:!1,name:"kolichestvo_sotok",title:"Количество соток"},{type:a.Items,freeSolo:!1,outlined:!1,name:"vid_liczenzii",title:"Вид лицензии",itemList:["Коммерческая","Жилая"]},{type:a.Text,outlined:!1,inputRows:4,name:"primechanie",title:"Примечание"},{type:a.Combo,outlined:!1,name:"kategoriya_obekta",title:"Категория объекта",itemList:["Жилая","Коммерческая","От застройщика"]},{type:a.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:function(e){return Xe(e.kategoriya_obekta,"Коммерческая")},itemList:function(){return["Квартиры","Дома","Земля/Участок","Здания","Базы"]}},{type:a.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:function(e){return!Xe(e.kategoriya_obekta,"Коммерческая")},itemList:function(){return["Квартиры","Дома","Земля/Участок"]}},{type:a.Combo,outlined:!1,name:"nomer_agenstva",itemList:(gl=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getAgencyMap();case 2:return n=e.sent,e.abrupt("return",Object.keys(n));case 4:case"end":return e.stop()}}),e)}))),function(){return gl.apply(this,arguments)}),tr:(kl=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getAgencyMap();case 2:return r=e.sent,e.abrupt("return",S.get(r,n)||"");case 4:case"end":return e.stop()}}),e)}))),function(e){return kl.apply(this,arguments)}),title:"Номер агенства"},{type:a.Combo,outlined:!1,name:"nomer_agenta",itemList:(_l=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getAgentMap();case 2:return n=e.sent,e.abrupt("return",Object.keys(n));case 4:case"end":return e.stop()}}),e)}))),function(){return _l.apply(this,arguments)}),tr:(bl=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getAgentMap();case 2:return r=e.sent,e.abrupt("return",S.get(r,n)||"");case 4:case"end":return e.stop()}}),e)}))),function(e){return bl.apply(this,arguments)}),title:"Номер агента"}]},{type:a.Group,columns:"6",fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:function(e){return e.apartment_images&&e.apartment_images.length},fields:[{type:a.Component,sx:{mb:2},element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})}},{type:a.Component,element:Zl}]}]}]},{type:a.Fragment,isVisible:function(e){return(!Xe(e.podkategoriya_obekta,"Квартиры")||!Xe(e.kategoriya_obekta,"Коммерческая"))&&((!Xe(e.podkategoriya_obekta,"Дома")||!Xe(e.kategoriya_obekta,"Коммерческая"))&&((!Xe(e.podkategoriya_obekta,"Земля/Участок")||!Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.kategoriya_obekta,"Коммерческая")))},fields:[{type:a.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая недвижимость)"})}},{type:a.Text,outlined:!1,name:"zagolovok_dlya_reklamy",title:"Заголовок для рекламы"},{type:a.Component,sx:{pr:1,mb:2},name:"naznachenie_obekta",element:function(e){return Se(Ze,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:function(t){return e.onChange(c({},"naznachenie_obekta",t))}})}},{type:a.Items,freeSolo:!1,outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:a.Text,outlined:!1,name:"rajon",title:"Район"},{type:a.Text,outlined:!1,name:"ulicza",title:"Адрес"},{type:a.Complete,tip:Fl.dictService.getOrientir,outlined:!1,name:"orientir",title:"Ориентир"},{type:a.Combo,freeSolo:!0,outlined:!1,name:"metro",title:"Метро",itemList:["А. Ходжаев","Абдулла Кодирий","Алишер Навоий","Амир Темур хиёбони","Беруний","Бобур","Бодомзор","Буюк Ипак йули","Гофур Гулом","Дружба народов","Дустлик","Жанубий","Космонавтлар","Машинасозлар","Миллий бог","Мингурик","Минор","Мирзо Улугбек","Мустакиллик майдони","Новза","Ойбек","Олмазор","Отчопар","Пахтакор","Пушкинская","Сергели","Тинчлик","Тошкент","Тукимачи","Туркистон","Турсунзода","Узбекистон","Усмон Носыр","Файзулла Ходжаев","Хамид Олимжон","Чилонзор","Чорсу","Чош-тепа","Шахристан","Эхтиром","Юнус Ражабий","Юнусабад"]},{type:a.Text,outlined:!1,name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:a.Text,outlined:!1,name:"kolichestvo_komnat",title:"Количество комнат"},{type:a.Text,outlined:!1,name:"etazh",title:"Этаж"},{type:a.Text,outlined:!1,name:"etazhnost",title:"Этажность"},{type:a.Combo,freeSolo:!0,outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:a.Text,outlined:!1,inputRows:4,name:"primechanie",title:"Примечание"},{type:a.Combo,outlined:!1,name:"kategoriya_obekta",title:"Категория объекта",itemList:["Жилая","Коммерческая","От застройщика"]},{type:a.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:function(e){return Xe(e.kategoriya_obekta,"Коммерческая")},itemList:function(){return["Квартиры","Дома","Земля/Участок","Здания","Базы"]}},{type:a.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:function(e){return!Xe(e.kategoriya_obekta,"Коммерческая")},itemList:function(){return["Квартиры","Дома","Земля/Участок"]}},{type:a.Combo,outlined:!1,name:"nomer_agenstva",itemList:(vl=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getAgencyMap();case 2:return n=e.sent,e.abrupt("return",Object.keys(n));case 4:case"end":return e.stop()}}),e)}))),function(){return vl.apply(this,arguments)}),tr:(yl=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getAgencyMap();case 2:return r=e.sent,e.abrupt("return",S.get(r,n)||"");case 4:case"end":return e.stop()}}),e)}))),function(e){return yl.apply(this,arguments)}),title:"Номер агенства"},{type:a.Combo,outlined:!1,name:"nomer_agenta",itemList:(hl=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getAgentMap();case 2:return n=e.sent,e.abrupt("return",Object.keys(n));case 4:case"end":return e.stop()}}),e)}))),function(){return hl.apply(this,arguments)}),tr:(fl=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getAgentMap();case 2:return r=e.sent,e.abrupt("return",S.get(r,n)||"");case 4:case"end":return e.stop()}}),e)}))),function(e){return fl.apply(this,arguments)}),title:"Номер агента"}]},{type:a.Group,columns:"6",fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:function(e){return e.apartment_images&&e.apartment_images.length},fields:[{type:a.Component,sx:{mb:2},element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})}},{type:a.Component,element:Zl}]}]}]},{type:a.Fragment,isVisible:function(e){return null===e.kategoriya_obekta||!(!Xe(e.kategoriya_obekta,"Коммерческая")||!Xe(e.podkategoriya_obekta,"Квартиры"))},fields:[{type:a.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая + Жилая квартира)"})}},{type:a.Text,outlined:!1,name:"zagolovok_dlya_reklamy",title:"Заголовок для рекламы"},{type:a.Combo,outlined:!1,name:"tip_nedvizhimosti",title:"Тип недвижимости",itemList:["Вторичное жилье","Новостройка"]},{type:a.Text,outlined:!1,name:"nazvanie_zhk",title:"Название ЖК"},{type:a.Component,sx:{pr:1,mb:2},name:"naznachenie_obekta",element:function(e){return Se(Ze,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:function(t){return e.onChange(c({},"naznachenie_obekta",t))}})}},{type:a.Items,freeSolo:!1,outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:a.Text,outlined:!1,name:"rajon",title:"Район"},{type:a.Text,outlined:!1,name:"ulicza",title:"Адрес"},{type:a.Complete,tip:Fl.dictService.getOrientir,outlined:!1,name:"orientir",title:"Ориентир"},{type:a.Combo,freeSolo:!0,outlined:!1,name:"metro",title:"Метро",itemList:["А. Ходжаев","Абдулла Кодирий","Алишер Навоий","Амир Темур хиёбони","Беруний","Бобур","Бодомзор","Буюк Ипак йули","Гофур Гулом","Дружба народов","Дустлик","Жанубий","Космонавтлар","Машинасозлар","Миллий бог","Мингурик","Минор","Мирзо Улугбек","Мустакиллик майдони","Новза","Ойбек","Олмазор","Отчопар","Пахтакор","Пушкинская","Сергели","Тинчлик","Тошкент","Тукимачи","Туркистон","Турсунзода","Узбекистон","Усмон Носыр","Файзулла Ходжаев","Хамид Олимжон","Чилонзор","Чорсу","Чош-тепа","Шахристан","Эхтиром","Юнус Ражабий","Юнусабад"]},{type:a.Text,outlined:!1,name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:a.Text,outlined:!1,name:"kolichestvo_komnat",title:"Количество комнат"},{type:a.Combo,freeSolo:!0,outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:a.Text,outlined:!1,inputRows:4,name:"primechanie",title:"Примечание"},{type:a.Combo,outlined:!1,name:"kategoriya_obekta",title:"Категория объекта",itemList:["Жилая","Коммерческая","От застройщика"]},{type:a.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:function(e){return Xe(e.kategoriya_obekta,"Коммерческая")},itemList:function(){return["Квартиры","Дома","Земля/Участок","Здания","Базы"]}},{type:a.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:function(e){return!Xe(e.kategoriya_obekta,"Коммерческая")},itemList:function(){return["Квартиры","Дома","Земля/Участок"]}},{type:a.Combo,outlined:!1,name:"nomer_agenstva",itemList:(ml=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getAgencyMap();case 2:return n=e.sent,e.abrupt("return",Object.keys(n));case 4:case"end":return e.stop()}}),e)}))),function(){return ml.apply(this,arguments)}),tr:(pl=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getAgencyMap();case 2:return r=e.sent,e.abrupt("return",S.get(r,n)||"");case 4:case"end":return e.stop()}}),e)}))),function(e){return pl.apply(this,arguments)}),title:"Номер агенства"},{type:a.Combo,outlined:!1,name:"nomer_agenta",itemList:(dl=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getAgentMap();case 2:return n=e.sent,e.abrupt("return",Object.keys(n));case 4:case"end":return e.stop()}}),e)}))),function(){return dl.apply(this,arguments)}),tr:(cl=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getAgentMap();case 2:return r=e.sent,e.abrupt("return",S.get(r,n)||"");case 4:case"end":return e.stop()}}),e)}))),function(e){return cl.apply(this,arguments)}),title:"Номер агента"}]},{type:a.Group,columns:"6",fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:function(e){return e.apartment_images&&e.apartment_images.length},fields:[{type:a.Component,sx:{mb:2},element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})}},{type:a.Component,element:Zl}]}]}]},{type:a.Fragment,isVisible:function(e){return null===e.kategoriya_obekta||!(!Xe(e.kategoriya_obekta,"Коммерческая")||!Xe(e.podkategoriya_obekta,"Дома"))},fields:[{type:a.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческий + Жилой дом)"})}},{type:a.Text,outlined:!1,name:"zagolovok_dlya_reklamy",title:"Заголовок для рекламы"},{type:a.Component,sx:{pr:1,mb:2},name:"naznachenie_obekta",element:function(e){return Se(Ze,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:function(t){return e.onChange(c({},"naznachenie_obekta",t))}})}},{type:a.Items,freeSolo:!1,outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:a.Text,outlined:!1,name:"rajon",title:"Район"},{type:a.Text,outlined:!1,name:"ulicza",title:"Адрес"},{type:a.Complete,tip:Fl.dictService.getOrientir,outlined:!1,name:"orientir",title:"Ориентир"},{type:a.Combo,freeSolo:!0,outlined:!1,name:"metro",title:"Метро",itemList:["А. Ходжаев","Абдулла Кодирий","Алишер Навоий","Амир Темур хиёбони","Беруний","Бобур","Бодомзор","Буюк Ипак йули","Гофур Гулом","Дружба народов","Дустлик","Жанубий","Космонавтлар","Машинасозлар","Миллий бог","Мингурик","Минор","Мирзо Улугбек","Мустакиллик майдони","Новза","Ойбек","Олмазор","Отчопар","Пахтакор","Пушкинская","Сергели","Тинчлик","Тошкент","Тукимачи","Туркистон","Турсунзода","Узбекистон","Усмон Носыр","Файзулла Ходжаев","Хамид Олимжон","Чилонзор","Чорсу","Чош-тепа","Шахристан","Эхтиром","Юнус Ражабий","Юнусабад"]},{type:a.Text,outlined:!1,name:"ploshhad_doma",title:"Площадь дома М²"},{type:a.Text,outlined:!1,name:"kolichestvo_komnat",title:"Количество комнат"},{type:a.Combo,freeSolo:!0,outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:a.Text,outlined:!1,name:"kolichestvo_sotok",title:"Количество соток"},{type:a.Text,outlined:!1,name:"etazhnost",title:"Этажность"},{type:a.Text,outlined:!1,inputRows:4,name:"primechanie",title:"Примечание"},{type:a.Combo,outlined:!1,name:"kategoriya_obekta",title:"Категория объекта",itemList:["Жилая","Коммерческая","От застройщика"]},{type:a.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:function(e){return Xe(e.kategoriya_obekta,"Коммерческая")},itemList:function(){return["Квартиры","Дома","Земля/Участок","Здания","Базы"]}},{type:a.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:function(e){return!Xe(e.kategoriya_obekta,"Коммерческая")},itemList:function(){return["Квартиры","Дома","Земля/Участок"]}},{type:a.Combo,outlined:!1,name:"nomer_agenstva",itemList:(ll=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getAgencyMap();case 2:return n=e.sent,e.abrupt("return",Object.keys(n));case 4:case"end":return e.stop()}}),e)}))),function(){return ll.apply(this,arguments)}),tr:(ul=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getAgencyMap();case 2:return r=e.sent,e.abrupt("return",S.get(r,n)||"");case 4:case"end":return e.stop()}}),e)}))),function(e){return ul.apply(this,arguments)}),title:"Номер агенства"},{type:a.Combo,outlined:!1,name:"nomer_agenta",itemList:(sl=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getAgentMap();case 2:return n=e.sent,e.abrupt("return",Object.keys(n));case 4:case"end":return e.stop()}}),e)}))),function(){return sl.apply(this,arguments)}),tr:(ol=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getAgentMap();case 2:return r=e.sent,e.abrupt("return",S.get(r,n)||"");case 4:case"end":return e.stop()}}),e)}))),function(e){return ol.apply(this,arguments)}),title:"Номер агента"}]},{type:a.Group,columns:"6",fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:function(e){return e.apartment_images&&e.apartment_images.length},fields:[{type:a.Component,sx:{mb:2},element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})}},{type:a.Component,element:Zl}]}]}]},{type:a.Fragment,isVisible:function(e){return null===e.kategoriya_obekta||!(!Xe(e.kategoriya_obekta,"Коммерческая")||!Xe(e.podkategoriya_obekta,"Земля/Участок"))},fields:[{type:a.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая + Жилая земля/участок)"})}},{type:a.Text,outlined:!1,name:"zagolovok_dlya_reklamy",title:"Заголовок для рекламы"},{type:a.Component,sx:{pr:1,mb:2},name:"naznachenie-obekta-zemlya_uchastok",element:function(e){return Se(Ze,{variant:"standard",label:"Назначение объекта",items:[{label:"Сельхоз использование",value:"Сельхоз использование"},{label:"ИЖС",value:"ИЖС"},{label:"Высотная застройка",value:"Высотная застройка"},{label:"Промышленное назначение",value:"Промышленное назначение"},{label:"ТЦ",value:"ТЦ"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Склады",value:"Склады"},{label:"Инвестпроект",value:"Инвестпроект"},{label:"Строительство образовательных учреждений",value:"Строительство образовательных учреждений"},{label:"АЗС",value:"АЗС"},{label:"Мойка",value:"Мойка"}],value:e["naznachenie-obekta_zemlya"],onChange:function(t){return e.onChange(c({},"naznachenie-obekta_zemlya",t))}})}},{type:a.Combo,freeSolo:!0,outlined:!1,name:"sostoyanie-obekta_zemlya",title:"Состояние объекта",itemList:["Пустая земля/участок","Недостроенная","Под снос"]},{type:a.Text,outlined:!1,name:"rajon",title:"Район"},{type:a.Text,outlined:!1,name:"ulicza",title:"Адрес"},{type:a.Complete,tip:Fl.dictService.getOrientir,outlined:!1,name:"orientir",title:"Ориентир"},{type:a.Combo,freeSolo:!0,outlined:!1,name:"metro",title:"Метро",itemList:["А. Ходжаев","Абдулла Кодирий","Алишер Навоий","Амир Темур хиёбони","Беруний","Бобур","Бодомзор","Буюк Ипак йули","Гофур Гулом","Дружба народов","Дустлик","Жанубий","Космонавтлар","Машинасозлар","Миллий бог","Мингурик","Минор","Мирзо Улугбек","Мустакиллик майдони","Новза","Ойбек","Олмазор","Отчопар","Пахтакор","Пушкинская","Сергели","Тинчлик","Тошкент","Тукимачи","Туркистон","Турсунзода","Узбекистон","Усмон Носыр","Файзулла Ходжаев","Хамид Олимжон","Чилонзор","Чорсу","Чош-тепа","Шахристан","Эхтиром","Юнус Ражабий","Юнусабад"]},{type:a.Text,outlined:!1,name:"kolichestvo_sotok",title:"Количество соток"},{type:a.Items,freeSolo:!1,outlined:!1,name:"vid_liczenzii",title:"Вид лицензии",itemList:["Коммерческая","Жилая"]},{type:a.Text,outlined:!1,inputRows:4,name:"primechanie",title:"Примечание"},{type:a.Combo,outlined:!1,name:"kategoriya_obekta",title:"Категория объекта",itemList:["Жилая","Коммерческая","От застройщика"]},{type:a.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:function(e){return Xe(e.kategoriya_obekta,"Коммерческая")},itemList:function(){return["Квартиры","Дома","Земля/Участок","Здания","Базы"]}},{type:a.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:function(e){return!Xe(e.kategoriya_obekta,"Коммерческая")},itemList:function(){return["Квартиры","Дома","Земля/Участок"]}},{type:a.Combo,outlined:!1,name:"nomer_agenstva",itemList:(al=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getAgencyMap();case 2:return n=e.sent,e.abrupt("return",Object.keys(n));case 4:case"end":return e.stop()}}),e)}))),function(){return al.apply(this,arguments)}),tr:(il=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getAgencyMap();case 2:return r=e.sent,e.abrupt("return",S.get(r,n)||"");case 4:case"end":return e.stop()}}),e)}))),function(e){return il.apply(this,arguments)}),title:"Номер агенства"},{type:a.Combo,outlined:!1,name:"nomer_agenta",itemList:(rl=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getAgentMap();case 2:return n=e.sent,e.abrupt("return",Object.keys(n));case 4:case"end":return e.stop()}}),e)}))),function(){return rl.apply(this,arguments)}),tr:(nl=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getAgentMap();case 2:return r=e.sent,e.abrupt("return",S.get(r,n)||"");case 4:case"end":return e.stop()}}),e)}))),function(e){return nl.apply(this,arguments)}),title:"Номер агента"}]},{type:a.Group,columns:"6",fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:function(e){return e.apartment_images&&e.apartment_images.length},fields:[{type:a.Component,sx:{mb:2},element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})}},{type:a.Component,element:Zl}]}]}]}]);window.advertising_fields=tc;var nc,rc,ic,ac,oc=[".","-",'"',"'",",","(",")"],sc=function(e){var t=function(e){return"#"+Qe.apply(void 0,[e.split(" ").join("_").split("/").join("_")].concat(oc))};return e.includes(", ")?e.split(", ").map(t).join(", "):t(e)},uc={"Категория объекта":"📌","Подкатегория объекта":"📌","Название ЖК":"👷","Тип недвижимости":"🏗️","Район":"📍","Адрес":"🛣️","Ориентир":"🚏","Метро":"🚊","Количество комнат":"🚪","Количество спален":"🛏️","Количество соток":"🏡","Этаж":"🪜","Этажность":"🏢","Бассейн":"🏊","Общая площадь М²":"📐","Площадь дома М²":"📐","Состояние ремонта":"⚒️","Назначение объекта":"✅","Расположение объекта":"🏫","Состояние объекта":"📊","Примечание":"💡","Тип сделки":"🔹"},lc={etazh:{1:sc("Первый этаж"),2:sc("Второй этаж"),3:sc("Третий этаж"),4:sc("Четвертый этаж"),5:sc("Пятый этаж"),6:sc("Шестой этаж"),7:sc("Седьмой этаж"),8:sc("Восьмой этаж"),9:sc("Девятый этаж"),10:sc("Десятый этаж"),11:sc("Одиннадцатый этаж"),12:sc("Двенадцатый этаж"),13:sc("Тринадцатый этаж"),14:sc("Четырнадцатый этаж"),15:sc("Пятнадцатый этаж"),16:sc("Шестнадцатый этаж"),17:sc("Семнадцатый этаж"),18:sc("Восемнадцатый этаж"),19:sc("Девятнадцатый этаж"),20:sc("Двадцатый этаж"),21:sc("Двадцать первый этаж"),22:sc("Двадцать второй этаж"),23:sc("Двадцать третий этаж"),24:sc("Двадцать четвертый этаж"),25:sc("Двадцать пятый этаж"),26:sc("Двадцать шестой этаж"),27:sc("Двадцать седьмой этаж"),28:sc("Двадцать восьмой этаж"),29:sc("Двадцать девятый этаж"),30:sc("Тридцатый этаж")},etazhnost:{1:sc("Одноэтажный"),2:sc("Двухэтажный"),3:sc("Трехэтажный"),4:sc("Четырехэтажный"),5:sc("Пятиэтажный"),6:sc("Шестиэтажный"),7:sc("Семиэтажный"),8:sc("Восьмиэтажный"),9:sc("Девятиэтажный"),10:sc("Десятиэтажный"),11:sc("Одиннадцатиэтажный"),12:sc("Двенадцатиэтажный"),13:sc("Тринадцатиэтажный"),14:sc("Четырнадцатиэтажный"),15:sc("Пятнадцатиэтажный"),16:sc("Шестнадцатиэтажный"),17:sc("Семнадцатиэтажный"),18:sc("Восемнадцатиэтажный"),19:sc("Девятнадцатиэтажный"),20:sc("Двадцатиэтажный")},kolichestvo_komnat:{1:sc("Одна комната"),2:sc("Две комнаты"),3:sc("Три комнаты"),4:sc("Четыре комнаты"),5:sc("Пять комнат"),6:sc("Шесть комнат"),7:sc("Семь комнат"),8:sc("Восемь комнат"),9:sc("Девять комнат"),10:sc("Десять комнат"),11:sc("Одиннадцать комнат"),12:sc("Двенадцать комнат"),13:sc("Тринадцать комнат"),14:sc("Четырнадцать комнат"),15:sc("Пятнадцать комнат"),16:sc("Шестнадцать комнат"),17:sc("Семнадцать комнат"),18:sc("Восемнадцать комнат"),19:sc("Девятнадцать комнат"),20:sc("Двадцать комнат"),21:sc("Двадцать одна комната"),22:sc("Двадцать две комнаты"),23:sc("Двадцать три комнаты"),24:sc("Двадцать четыре комнаты"),25:sc("Двадцать пять комнат")}},cc=function(e){return function(t){return t=String(t),"Метро"===e&&(t=sc(t)),"Район"===e&&(t=sc(t)),"Адрес"===e&&(t=sc(t)),"Состояние ремонта"===e&&(t=sc(t)),"Тип недвижимости"===e&&(t=sc(t)),"Название ЖК"===e&&(t=sc(t)),"Категория объекта"===e&&(t=sc(t)),"Подкатегория объекта"===e&&(t=sc(t)),"Состояние объекта"===e&&(t=sc(t)),"Назначение объекта"===e&&(t=sc(t)),"Расположение объекта"===e&&(t=sc(t)),"Местоположение объекта"===e&&(t=sc(t)),"Бассейн"===e&&(t=sc(t)),"Тип сделки"===e&&(t=sc(t)),t}},dc=function e(t,n,r){var i=t.isVisible;if(!(void 0===i?function(){return!0}:i)(n,r)){if(t.fields){var a,o=m(t.fields);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.isVisible=function(){return!1},e(s,n,r)}}catch(u){o.e(u)}finally{o.f()}}t.child&&(t.child.isVisible=function(){return!1},e(t.child,n,r))}},pc=function(){var e=r(t().mark((function e(n,r){var i,a,o,s,u,l,c,d,p;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i="",a=S.cloneDeep(ec),(a=de(a)).forEach((function(e){return dc(e,n,r)})),o=m(a),e.prev=5,o.s();case 7:if((s=o.n()).done){e.next=31;break}if(u=s.value,l=u.title,c=u.isVisible,d=void 0===c?function(){return!0}:c,p=u.compute,d(n,r)){e.next=11;break}return e.abrupt("continue",29);case 11:if(p&&l){e.next=13;break}return e.abrupt("continue",29);case 13:if("Заголовок для рекламы"!==l){e.next=15;break}return e.abrupt("continue",29);case 15:if("Номер агента"!==l){e.next=17;break}return e.abrupt("continue",29);case 17:if("Номер агенства"!==l){e.next=19;break}return e.abrupt("continue",29);case 19:return e.t0=i,e.t1="".concat(uc[l]||"➡️"," <b>").concat(l,":</b> "),e.t2=cc(l),e.next=24,p(n,{});case 24:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),i=e.t0+=e.t1.concat.call(e.t1,e.t4,"\n"),"Метро"===l&&(i+="\n"),"Состояние ремонта"===l&&(i+="\n");case 29:e.next=7;break;case 31:e.next=36;break;case 33:e.prev=33,e.t5=e.catch(5),o.e(e.t5);case 36:return e.prev=36,o.f(),e.finish(36);case 39:return e.abrupt("return",i);case 40:case"end":return e.stop()}}),e,null,[[5,33,36,39]])})));return function(t,n){return e.apply(this,arguments)}}(),mc=function(){var e=r(t().mark((function e(n){var r,i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.apartmentViewService.read(n);case 2:return r=e.sent,i="",a=function(e){return"uzs"===e?"сум":"у.е."},o=!1,Xe(r.kategoriya_obekta,"Коммерческая")?(r.prodazha&&r.prod_kom_startovaya_czena&&(i+="💵 <b>Продажа:</b> ".concat(r.prod_kom_startovaya_czena," ").concat(a(r.prod_kom_startovaya_czena_valyuta),"\n"),o=!0),r.arenda&&r.rent_kom_startovaya_czena&&(i+="🔑 <b>В аренду:</b> ".concat(r.rent_kom_startovaya_czena," ").concat(a(r.rent_kom_startovaya_czena_valyuta)),r.rent_kom_komissiya_agenstva&&(i+=" (Есть комиссия)"),i+="\n",o=!0)):Xe(r.kategoriya_obekta,"Жилая","От застройщика")&&(r.prodazha&&r.prod_startovaya_czena&&(i+="💵 <b>Продажа:</b> ".concat(r.prod_startovaya_czena," ").concat(a(r.prod_startovaya_czena_valyuta),"\n"),o=!0),r.arenda&&r.rent_startovaya_czena&&(i+="🔑 <b>В аренду:</b> ".concat(r.rent_startovaya_czena," ").concat(a(r.rent_startovaya_czena_valyuta)),r.rent_komissiya_agenstva&&(i+=" (Есть комиссия)"),i+="\n",o=!0)),o&&(i+="\n\n"),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fc=function(){var e=r(t().mark((function e(n,r,a){var o,s,u,l,c,d,p,m,f,h,y;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="",n.zagolovok_dlya_reklamy&&(o+="🏛️ <b>".concat(n.zagolovok_dlya_reklamy,"</b>\n\n")),e.t0=o,e.next=5,pc(n,a);case 5:return o=e.t0+=e.sent,e.next=8,Fl.dictService.getAgentMapRaw();case 8:return s=e.sent,e.next=11,Fl.dictService.getAgencyMapRaw();case 11:if(u=e.sent,n.nomer_agenstva&&(l=S.get(u,n.nomer_agenstva),c=l.phone,d=l.telegram,o+="\n<b>Агенство:</b>\n",o+="📲 <a href='tel:".concat(c,"'>").concat(c,"</a>\n"),o+="📩 <a href='https://t.me/".concat(d,"'>").concat(d,"</a>\n")),n.nomer_agenta&&(p=S.get(s,n.nomer_agenta),m=p.phone,f=p.telegram,o+="\n<b>Агент:</b>\n",o+="📲 <a href='tel:".concat(m,"'>").concat(m,"</a>\n"),o+="📩 <a href='https://t.me/".concat(f,"'>").concat(f,"</a>\n")),o+="\n",h=[],Object.entries(n).forEach((function(e){var t=i(e,2),n=t[0],r=t[1],a=S.get(lc,n);a&&h.push(S.get(a,r))})),!n.apartment_id){e.next=22;break}return e.t1=o,e.next=21,mc(n.apartment_id);case 21:o=e.t1+=e.sent;case 22:return e.next=24,Fl.dictService.getYoutubePrimaryLink();case 24:return e.t2=e.sent,e.next=27,Fl.dictService.getInstagramPrimaryLink();case 27:return e.t3=e.sent,e.next=30,Fl.dictService.getFacebookPrimaryLink();case 30:return e.t4=e.sent,e.next=33,Fl.dictService.getTelegramPrimaryLink();case 33:return e.t5=e.sent,y={YouTube:e.t2,Instagram:e.t3,Facebook:e.t4,Telegram:e.t5},o+=Object.entries(y).filter((function(e){return i(e,2)[1]})).map((function(e){var t=i(e,2),n=t[0],r=t[1];return"<a href='".concat(r,"'>").concat(n,"</a>")})).join(" | "),o+="\n\n",o+=h.filter((function(e){return e})).join(" "),e.abrupt("return",o);case 39:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),hc=[{type:a.Combo,outlined:!1,name:"telegram_channel",itemList:(rc=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getTelegramMap();case 2:return n=e.sent,e.abrupt("return",Object.keys(n));case 4:case"end":return e.stop()}}),e)}))),function(){return rc.apply(this,arguments)}),tr:(nc=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getTelegramMap();case 2:return r=e.sent,e.abrupt("return",S.get(r,n)||"");case 4:case"end":return e.stop()}}),e)}))),function(e){return nc.apply(this,arguments)}),title:"Канал Telegram"}],yc=[{type:et.Link,isVisible:function(){return!!Fl.routerService.previousPath},action:"list-action",label:Se(Ge,{sx:{display:"block"}})},{type:et.Link,action:"list-action",label:"База объектов"},{type:et.Link,action:"list-action",label:"Просмотр рекламы"},{type:et.Button,isDisabled:function(e){return!e.payload.permissions.hasAdvertisingPublicationPermission},action:"publish-action",label:"Опубликовать в канал"},{type:et.Button,action:"edit-action",label:"Редактировать"}],vc=[{id:"apartments",label:"Объекты"},{id:"bids",label:"Заявки"},{id:"contact",label:"Контакт"},{id:"service_comment",label:"Служебный комментарий"}],bc=$l()((function(e){return{root:c({},"& .".concat("react-declatative__master-detail-header"),{position:"sticky",top:0,background:"white",marginBottom:e.spacing(1)})}})),_c=function(e){var t=e.children,n=e.payload,r=e.history,a=bc().classes,o=i(we.useState((function(){return hf(r)})),2),s=o[0],u=o[1];return Se(Ce,{className:a.root,activeOption:s,withTransparentTabs:!0,withMenuCollapse:!0,payload:n,mode:H.Tabs,options:vc,onActiveOptionChange:function(e,t){t||("apartments"===e&&r.replace("/contact/apartments"),"bids"===e&&r.replace("/contact/bids"),"contact"===e&&r.replace("/contact/contact"),"parameter"===e&&r.replace("/contact/parameter"),"service_comment"===e&&r.replace("/contact/service_comment"),"documents"===e&&r.replace("/contact/documents"),u(e))},children:t})},kc=function(){return ct(Fl.userViewService.paginate,{onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},fallback:Fl.errorService.handleGlobalError})},gc=Me.createLoader(28),xc=[{type:a.Text,outlined:!0,name:"email",title:"Email"},{type:a.Text,outlined:!0,name:"phone",title:"Телефон"}],wc=[{type:dt.Component,sortable:!1,headerName:"Аватар",width:function(){return 65},element:function(e){var n,i=e.avatar,a=e.email;return Se(Ne,{Loader:gc,children:(n=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=6;break}return e.next=3,Fl.appwriteService.getImageURL(i);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0="";case 7:return n=e.t0,e.abrupt("return",Se(qe,{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:Se(pt,{src:n||void 0,alt:a})}));case 9:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})})}},{type:dt.Compute,sortable:!1,headerName:"Имя",compute:function(e){var t=e.first_name,n=void 0===t?"":t,r=e.last_name,i=void 0===r?"":r,a=e.middle_name;return[n,i,void 0===a?"":a].filter((function(e){return e.length})).join(" ")||"Unset"},width:function(e){return Math.max(e/3-65,200)}},{type:dt.Compute,sortable:!1,compute:function(e){return e.phone||"Unset"},field:"phone",headerName:"Телефон",width:function(e){return Math.max(e/3-65,200)}},{type:dt.Compute,sortable:!1,compute:function(e){return e.email||"Unset"},field:"email",headerName:"Email",width:function(e){return Math.max(e/3-65,200)}}],Sc=function(e){var t=e.payload,n=kc(),r=Be(),i=mt({title:"Выбрать сотрудника",withSearch:!0,withLoader:!0,slots:{FilterListSlot:ft},AfterTitle:function(e){var t=e.onClose;return Se(We,{size:"small",onClick:t,children:Se(it,{})})},noInitialFilters:!0,fetchDebounce:da,reloadSubject:Fl.userViewService.reloadSubject,selectionMode:ht.Single,onSubmit:function(e){return r.next(e),!0},filterLabel:"Выбрать сотрудника",filters:xc,columns:wc,handler:n,payload:t}),a=i.pickData,o=i.render,s=i.open;return{pickData:a,render:o,resultSubject:r,open:s}},zc=$l()({container:{alignItems:"center",backgroundColor:"#F7F7F7",border:"1px solid #ECECEC",boxShadow:"0 4px 16px 0px rgba(0,0,0,0.2)",display:"flex",gap:8,justifyContent:"stretch",minHeight:"72px",padding:"10px 24px",borderRadius:"0 0 8px 8px"},textInput:{flex:1,"& textarea::-webkit-scrollbar":{display:"none"}},contained:{color:"#FFFFFF",backgroundColor:"#3578E5","&:hover":{backgroundColor:"#3578E5"}}}),Vc=[{type:a.Choose,fieldBottomMargin:"3",fieldRightMargin:"0",choose:(ac=r(t().mark((function e(n,r){var a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.pickData(n.user_id?[n.user_id]:[]),e.next=3,r.resultSubject.toPromise();case 3:if(!(a=e.sent)||!a.length){e.next=7;break}return o=i(a,1),s=o[0],e.abrupt("return",s);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)}))),function(e,t){return ac.apply(this,arguments)}),tr:(ic=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.userViewService.tryRead(n);case 2:return r=e.sent,e.abrupt("return",[null==r?void 0:r.last_name,null==r?void 0:r.first_name,null==r?void 0:r.middle_name].filter((function(e){return e})).join(" ")||(null==r?void 0:r.$id)||"");case 4:case"end":return e.stop()}}),e)}))),function(e){return ic.apply(this,arguments)}),name:"user_id",title:"",placeholder:"Кому"},{type:a.Text,fieldBottomMargin:"0",fieldRightMargin:"0",placeholder:"Введите сообщение",inputRows:3,labelShrink:!0,name:"comment",title:""}],Ac=function(){var e=zk(),t=Il("id");if(e&&t){if(e.path.includes("apartment"))return"/apartment_view/".concat(t,"/service_comment");if(e.path.includes("bid"))return"/bid_view/".concat(t,"/service_comment")}return""},Tc=function(e){var n,a,o,s,u,l=e.addMessage,c=void 0===l?function(){return null}:l,d=e.addFile,p=void 0===d?function(){return null}:d,f=e.payload,h=zc().classes,y=i(we.useState(""),2),v=y[0],b=y[1],_=Sc({payload:f}),k=_.pickData,g=_.render,x=_.resultSubject,w=nt({history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),S=w.handleLoadStart,z=w.handleLoadEnd,V=w.loading,A=tt({large:!0,title:"Уведомить сотрудника",fields:Vc,payload:{pickData:k,resultSubject:x}});return Se("div",{className:h.container,children:[Se(yt,{className:h.textInput,readOnly:V,value:v,onChange:function(e){var t=e.target;return b(t.value)},placeholder:"Введите комментарий",multiline:!0,maxRows:5}),Se(vt,{condition:(u=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.permissionService.getPermissions();case 2:return n=e.sent,e.abrupt("return",n.hasUserServiceCommentMentionPermission);case 4:case"end":return e.stop()}}),e)}))),function(){return u.apply(this,arguments)}),children:Se(bt,{disabled:V,onClick:(s=r(t().mark((function e(){var n,r,i,a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A().toPromise();case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:if(n.user_id&&n.comment){e.next=8;break}return Fl.alertService.notify("Укажите получателя и сообщение"),e.abrupt("return");case 8:return r=n.user_id,i=n.comment,e.next=11,Fl.userViewService.read(r);case 11:return a=e.sent,o=a.first_name,s=['<blank-link href="/user_view/'.concat(r,'">@').concat(o,"</blank-link>"),i].join("\n"),e.next=16,Fl.notifyViewService.create({title:"Вас упомянули в служебном комментарии",user_id:r,url:Ac()});case 16:return e.next=18,c(s);case 18:b("");case 19:case"end":return e.stop()}}),e)}))),function(){return s.apply(this,arguments)}),onLoadStart:S,onLoadEnd:z,children:Se(_t,{})})}),Se(vt,{condition:(o=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.permissionService.getPermissions();case 2:return n=e.sent,e.abrupt("return",n.hasUserServiceCommentAddingFilePermission);case 4:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)}),children:Se(bt,{disabled:V,onClick:(a=r(t().mark((function e(){var n,r,i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kt();case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:r=m(n),e.prev=6,r.s();case 8:if((i=r.n()).done){e.next=17;break}return a=i.value,e.next=12,Fl.appwriteService.uploadFile(a);case 12:return o=e.sent,e.next=15,p(v,o);case 15:e.next=8;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(6),r.e(e.t0);case 22:return e.prev=22,r.f(),e.finish(22);case 25:if(!v){e.next=28;break}return e.next=28,c(v);case 28:b("");case 29:case"end":return e.stop()}}),e,null,[[6,19,22,25]])}))),function(){return a.apply(this,arguments)}),onLoadStart:S,onLoadEnd:z,children:Se(gt,{})})}),Se(xt,{disabled:V,className:h.contained,onClick:(n=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,c(v);case 4:b("");case 5:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)}),onLoadStart:S,onLoadEnd:z,variant:"contained",size:"large",children:Se(wt,{children:Se(St,{})})}),g()]})},Cc={allowCustomElements:!0,allowElements:["text-underline","blank-link"],allowAttributes:{href:["blank-link"]}},Fc=$l()((function(e,t,n){return{newMessage:{backgroundColor:"#3578E5",borderRadius:"8px",color:"#FFFFFF",display:"flex",fontFamily:"Roboto, sans-serif",padding:12,paddingRight:0,width:"65%","& pre":{margin:0}},newFile:{backgroundColor:"#3578E5",overflow:"hidden",borderRadius:"8px",color:"#FFFFFF",display:"flex",fontFamily:"Roboto, sans-serif",width:"65%"},newMessageContainer:{display:"flex",flex:"0 0 auto",justifyContent:"flex-end",width:"100%",paddingBottom:"12px"},receivedMessage:{backgroundColor:"#FFFFFF",borderRadius:"8px",display:"flex",padding:12,paddingRight:0,fontFamily:"Roboto, sans-serif",width:"65%"},recievedFile:{backgroundColor:"#FFFFFF",overflow:"hidden",borderRadius:"8px",display:"flex",fontFamily:"Roboto, sans-serif",width:"65%"},receivedMessageContainer:{display:"flex",flex:"0 0 auto",justifyContent:"flex-start",flexDirection:"row-reverse",width:"100%",paddingBottom:"12px","& pre":{margin:0}},receivedMessageSender:{paddingRight:10,paddingTop:5},stretch:{flex:1},copy:{width:"100%",alignItems:"flex-start !important"}}})),Lc=function(e){var n=e.sessionData,i=Fc().classes,a=nt({history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),o=a.handleLoadStart,s=a.handleLoadEnd,u=Ve(r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.fileId){e.next=8;break}return e.next=3,Fl.appwriteService.getFileURL(n.fileId);case 3:return r=e.sent,e.next=6,Fl.appwriteService.readFileName(n.fileId);case 6:i=e.sent,zt(r,i);case 8:case"end":return e.stop()}}),e)}))),{onLoadStart:o,onLoadEnd:s}).execute;return Se("div",{children:n.userId===Fl.appwriteService.currentUser.$id?Se("div",{className:i.newMessageContainer,children:n.fileId?Se(Vt,{disablePadding:!0,className:i.newFile,onClick:function(){return u()},children:Se(Ue,{children:[Se(At,{children:Se(pt,{children:Se(Tt,{})})}),Se(Ct,{primary:n.fileName||"Файл"})]})}):Se("div",{className:i.newMessage,children:Se(Ft,{onCopyClick:function(){return Fl.alertService.notify("Сообщение скопировано в буфер обмена")},className:i.copy,sx:{"& svg":{color:"white"}},content:Lt.sanitize(n.message),children:Se("pre",{children:Se(Lt,{config:Cc,handler:function(){return n.message}})})})})}):Se("div",{className:i.receivedMessageContainer,children:[Se("div",{className:i.stretch}),n.fileId?Se(Vt,{disablePadding:!0,className:i.recievedFile,onClick:function(){return u()},children:Se(Ue,{children:[Se(At,{children:Se(pt,{children:Se(Tt,{})})}),Se(Ct,{primary:n.fileName||"Файл"})]})}):Se("div",{className:i.receivedMessage,children:Se(Ft,{onCopyClick:function(){return Fl.alertService.notify("Сообщение скопировано в буфер обмена")},className:i.copy,content:Lt.sanitize(n.message),children:Se("pre",{children:Se(Lt,{config:Cc,handler:function(){return n.message}})})})}),Se("div",{className:i.receivedMessageSender,children:Se(It,{title:n.displayName,children:Se(pt,{src:n.avatar,style:{height:28,width:28}})})})]})})},Ic=$l()({container:{backgroundColor:"#F0F0F0",borderRadius:"8px",overflow:"hidden",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"stretch",height:"100%",width:"100%"},content:{padding:"8px",flex:1}}),Mc=function(e){var t=e.className,n=e.style,r=e.messages,i=e.payload,a=e.onText,o=e.onFile,s=Ic(),u=s.classes,l=s.cx,c=we.useMemo((function(){return null!=r&&r.length?r[(null==r?void 0:r.length)-1]:null}),[r]),d=we.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Fl.appwriteService.currentUser.$id;return!(!e&&(null==c?void 0:c.userId)!==t)&&"auto"}),[c]),p=we.useCallback((function(e,t){return Se(Lc,{sessionData:t},"".concat(t.id,"-").concat(e))}),[]);return Se("div",{className:l(u.container,t),style:n,children:[Se("div",{className:u.content,children:Se(Mt,{data:r,followOutput:d,initialTopMostItemIndex:null==r?void 0:r.length,itemContent:p,computeItemKey:function(e){var t=r[e];return(null==t?void 0:t.id)||w()}})}),Se(Tc,{payload:i,addMessage:a,addFile:o})]})},jc=[{action:"edit-action",label:"Редактировать"},{action:"remove-action",label:"Удалить"}],Bc=function(e){var n=e.id,i=e.name,o=e.phone,s=e.sx,u=e.onChange,l=e.onRemove,c=jt({title:"Удалить",msg:"Вы уверены что хотите удалить?"}),d=tt({title:"Редактировать номер",fields:[{type:a.Text,name:"name",title:"Имя",isInvalid:function(e){return e.name?null:"Укажите имя"}},{type:a.Text,name:"phone",title:"Телефон",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",isInvalid:function(e){return e.phone?null:"Укажите телефон"}}]}),p=function(){return d({handler:{id:n,name:i,phone:o}}).then((function(e){e&&u({id:n,name:e.name,phone:e.phone})}))},m=function(){var e=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().toPromise();case 2:e.sent&&l({id:n,name:i,phone:o});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Se(Vt,{sx:s,disablePadding:!0,dense:!0,children:Se(Ue,{disableRipple:!0,onClick:p,children:[Se(At,{children:Se(pt,{sx:{"& svg":{color:"#aaa !important"},background:"transparent"},children:Se(Bt,{})})}),Se(Ct,{primary:"Имя: ".concat(i),secondary:"Телефон: ".concat(o)}),Se(Dt,{sx:{mr:1},transparent:!0,options:jc,onAction:function(e){"edit-action"===e&&p(),"remove-action"===e&&m()}})]})})},Dc=function(e){var t=e.contact_phones,n=e.contact_names;t=t||[],n=n||[];for(var r=[],i=0;i!==n.length;i++)r.push({id:w(),name:n[i],phone:t[i]});return r},Rc=function(e){var t=e.contact_phones,n=e.contact_names,r=e.onChange,s=i(we.useState((function(){return Dc({contact_phones:t,contact_names:n})})),2),u=s[0],l=s[1],c=Rt((function(){var e;r({contact_names:(e=u)?e.map((function(e){return e.name})):null,contact_phones:e?e.map((function(e){return e.phone})):null})}),[u]).resetWatcher;we.useEffect((function(){var e=Dc({contact_names:n,contact_phones:t});c(),l(e)}),[n,t]);var d=tt({title:"Создание номера",fields:[{type:a.Text,sx:{mt:-2},name:"name",title:"Имя",isInvalid:function(e){return e.name?null:"Укажите имя"}},{type:a.Text,name:"phone",title:"Телефон",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",isInvalid:function(e){return e.phone?null:"Укажите телефон"}}]});return Se(qe,{style:{display:"flex",flexDirection:"column",overflowY:"auto",marginRight:"1px",minHeight:275},children:[Se(Ke,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:1},children:[Se(Je,{sx:{ml:2,mt:1},variant:"h6",fontWeight:"bold",children:"Список номеров телефонов"}),Se(We,{sx:{mr:3,mt:1},onClick:function(){return d().then((function(e){e&&l((function(t){return[].concat(p(t),[o(o({},e),{},{id:w()})])}))}))},children:Se(qt,{})})]}),Se(Pt,{dense:!0,disablePadding:!0,children:u.map((function(e,t){return Se(Bc,{sx:o({},t%2==0&&{background:"#ccc2"}),id:e.id,name:e.name,phone:e.phone,onChange:function(e){return l((function(t){return t.map((function(t){return t.id===e.id?e:t}))}))},onRemove:function(e){var t=e.id;return l((function(e){return e.filter((function(e){return e.id!==t}))}))}})}))}),Se(qe,{sx:{flex:1}})]})},qc="Вы уверены, что хотите удалить файл?",Pc="Подтверждение",Ec=Me.createLoader(24),Nc=function(e){return e&&"Физическое лицо"!==e?{type:a.Paper,fieldBottomMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Основная информация"})}},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"kontakt")},name:"kontakt",title:"Контакт"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"naimenovanie_organizaczii")},name:"naimenovanie_organizaczii",title:"Наименование организации"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"fio")},name:"fio",title:"Ф.И.О."},{type:a.Text,description:"Основной",features:["hasContactNumberPermission"],outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",isVisible:function(e){return Ql(e,"telefon")},name:"telefon",title:"Телефон"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"tip_klienta")},name:"tip_klienta",title:"Тип клиента"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"status_klienta")},name:"status_klienta",title:"Статус клиента"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"loyalnost_klienta")},name:"loyalnost_klienta",title:"Лояльность клиента"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"data-sozdaniya_klienta")},name:"data-sozdaniya_klienta",title:"Дата создания клиента"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"fakticheskij_adres")},name:"fakticheskij_adres",title:"Фактический адрес"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"email")},name:"email",title:"Email"},{type:a.Fragment,isVisible:function(){var e=!0;return e=(e=e&&!Fl.routerService.location.pathname.includes("bid_view"))&&!Fl.routerService.location.pathname.includes("bid_edit")},fields:[{type:a.Component,fieldBottomMargin:"1",isVisible:function(e){return Ql(e,"kadastrovyj-nomer_obekta","kadastrovyj-nomer_zemli")},element:function(){return Se(Je,{variant:"subtitle2",fontWeight:"bold",sx:{textDecoration:"underline",mt:2,mb:1},children:"Кадастр"})}},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"kadastrovyj-nomer_obekta")},name:"kadastrovyj-nomer_obekta",title:"Кадастровый номер объекта"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"kadastrovyj-nomer_zemli")},name:"kadastrovyj-nomer_zemli",title:"Кадастровый номер земли"}]}]}:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"0",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Основная информация"})}},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"kontakt")},name:"kontakt",title:"Контакт"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"fio")},name:"fio",title:"Ф.И.О."},{type:a.Text,description:"Основной",features:["hasContactNumberPermission"],outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",isVisible:function(e){return Ql(e,"telefon")},name:"telefon",title:"Телефон"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"tip_klienta")},name:"tip_klienta",title:"Тип клиента"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"status_klienta")},name:"status_klienta",title:"Статус клиента"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"loyalnost_klienta")},name:"loyalnost_klienta",title:"Лояльность клиента"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"data-sozdaniya_klienta")},name:"data-sozdaniya_klienta",title:"Дата создания клиента"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"fakticheskij_adres")},name:"fakticheskij_adres",title:"Фактический адрес"},{type:a.Text,isVisible:function(e){return Ql(e,"email")},outlined:!1,name:"email",title:"Email"},{type:a.Fragment,isVisible:function(){var e=!0;return e=(e=e&&!Fl.routerService.location.pathname.includes("bid_view"))&&!Fl.routerService.location.pathname.includes("bid_edit")},fields:[{type:a.Component,fieldBottomMargin:"1",isVisible:function(e){return Ql(e,"kadastrovyj-nomer_obekta","kadastrovyj-nomer_zemli")},element:function(){return Se(Je,{variant:"subtitle2",fontWeight:"bold",sx:{textDecoration:"underline",mt:2,mb:1},children:"Кадастр"})}},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"kadastrovyj-nomer_obekta")},name:"kadastrovyj-nomer_obekta",title:"Кадастровый номер объекта"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"kadastrovyj-nomer_zemli")},name:"kadastrovyj-nomer_zemli",title:"Кадастровый номер земли"}]}]}},Oc=function(e){return e&&"Физическое лицо"!==e?{type:a.Paper,isVisible:function(e){return Ql(e,"seriya-i-nomer_pasporta","data_rozhdeniya","pol","data-vydachi_pasporta","kem_vydan","adres_registraczii","pinfl","inn","dolzhnost_rukovoditelya","osnovanie-deyatelnosti-dannogo_licza","yuridicheskij_adres","sertifikat_kompanii","rekvizity")},fieldBottomMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Паспортные данные"})}},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"seriya-i-nomer_pasporta")},name:"seriya-i-nomer_pasporta",title:"Серия и номер паспорта"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"data_rozhdeniya")},name:"data_rozhdeniya",title:"Дата рождения"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"pol")},name:"pol",title:"Пол"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"data-vydachi_pasporta")},name:"data-vydachi_pasporta",title:"Дата выдачи паспорта"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"kem_vydan")},name:"kem_vydan",title:"Кем выдан"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"adres_registraczii")},name:"adres_registraczii",title:"Адрес регистрации"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"pinfl")},name:"pinfl",title:"ПИНФЛ"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"inn")},name:"inn",title:"ИНН"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"dolzhnost_rukovoditelya")},name:"dolzhnost_rukovoditelya",title:"Должность руководителя"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"osnovanie-deyatelnosti-dannogo_licza")},name:"osnovanie-deyatelnosti-dannogo_licza",title:"Основание деятельности данного лица"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"yuridicheskij_adres")},name:"yuridicheskij_adres",title:"Юридический адрес"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"sertifikat_kompanii")},name:"sertifikat_kompanii",title:"Сертификат компании (Гувохнома)"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"rekvizity")},name:"rekvizity",title:"Реквизиты"}]}:{type:a.Paper,isVisible:function(e){return Ql(e,"seriya-i-nomer_pasporta","data_rozhdeniya","pol","data-vydachi_pasporta","kem_vydan","adres_registraczii","pinfl","inn","rekvizity")},fieldBottomMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Паспортные данные"})}},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"seriya-i-nomer_pasporta")},name:"seriya-i-nomer_pasporta",title:"Серия и номер паспорта"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"data_rozhdeniya")},name:"data_rozhdeniya",title:"Дата рождения"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"pol")},name:"pol",title:"Пол"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"data-vydachi_pasporta")},name:"data-vydachi_pasporta",title:"Дата выдачи паспорта"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"kem_vydan")},name:"kem_vydan",title:"Кем выдан"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"adres_registraczii")},name:"adres_registraczii",title:"Адрес регистрации"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"pinfl")},name:"pinfl",title:"ПИНФЛ"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"inn")},name:"inn",title:"ИНН"},{type:a.Text,outlined:!1,isVisible:function(e){return Ql(e,"rekvizity")},name:"rekvizity",title:"Реквизиты"}]}},Uc=function(e){return"desktop"===e?{type:a.Paper,features:["hasContactNumberPermission"],fieldRightMargin:"0",innerPadding:"0",tabletHidden:!0,phoneHidden:!0,isVisible:function(e){return Ql(e,"contact_phones","contact_names")},child:{type:a.Component,element:Rc}}:{type:a.Paper,features:["hasContactNumberPermission"],fieldBottomMargin:"1",innerPadding:"0",desktopHidden:!0,isVisible:function(e){return Ql(e,"contact_phones","contact_names")},child:{type:a.Component,element:Rc}}},Hc=function(e){return e&&"Физическое лицо"!==e?[{type:a.Paper,fieldBottomMargin:"1",sx:{padding:"0 !important"},isVisible:function(e){return e.contact_files&&e.contact_files.length},child:{type:a.Component,element:function(e){var n=e.contact_files,i=e.onChange,a=e.readonly,o=jt({title:Pc,msg:qc});return Se(Pt,{sx:{pointerEvents:"all"},children:null==n?void 0:n.map((function(e,s){return Se(Vt,{disableGutters:!0,secondaryAction:Se(bt,{disabled:a,onClick:function(){var t=Et(n)||[];o().then((function(n){n&&i({contact_files:t.filter((function(t){return t!==e}))})}))},children:Se(Nt,{})}),children:Se(Ue,{onClick:(l=r(t().mark((function n(){var r,i;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Fl.appwriteService.getFileURL(e);case 2:return r=t.sent,t.next=5,Fl.appwriteService.readFileName(e);case 5:i=t.sent,zt(r,i);case 7:case"end":return t.stop()}}),n)}))),function(){return l.apply(this,arguments)}),children:Se(Ne,{payload:e,Loader:Ec,children:(u=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.appwriteService.readFileName(n);case 2:return r=e.sent,e.abrupt("return",Se(Ct,{primary:r}));case 4:case"end":return e.stop()}}),e)}))),function(e){return u.apply(this,arguments)})})})},"".concat(e,"-").concat(s));var u,l}))})}}}]:[{type:a.Paper,fieldBottomMargin:"1",sx:{padding:"0 !important"},isVisible:function(e){return e.contact_files&&e.contact_files.length},child:{type:a.Component,element:function(e){var n=e.contact_files,i=e.onChange,a=e.readonly,o=jt({title:Pc,msg:qc});return Se(Pt,{sx:{pointerEvents:"all"},children:null==n?void 0:n.map((function(e,s){return Se(Vt,{disableGutters:!0,secondaryAction:Se(bt,{disabled:a,onClick:function(){var t=Et(n)||[];o().then((function(n){n&&i({contact_files:t.filter((function(t){return t!==e}))})}))},children:Se(Nt,{})}),children:Se(Ue,{onClick:(l=r(t().mark((function n(){var r,i;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Fl.appwriteService.getFileURL(e);case 2:return r=t.sent,t.next=5,Fl.appwriteService.readFileName(e);case 5:i=t.sent,zt(r,i);case 7:case"end":return t.stop()}}),n)}))),function(){return l.apply(this,arguments)}),children:Se(Ne,{payload:e,Loader:Ec,children:(u=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.appwriteService.readFileName(n);case 2:return r=e.sent,e.abrupt("return",Se(Ct,{primary:r}));case 4:case"end":return e.stop()}}),e)}))),function(e){return u.apply(this,arguments)})})})},"".concat(e,"-").concat(s));var u,l}))})}}}]},Wc=[{type:a.Init,name:"contact_phones",defaultValue:null},{type:a.Init,name:"contact_names",defaultValue:null},{type:a.Fragment,isVisible:function(e){return!e.kontakt||!!Xe(e.kontakt,"Физическое лицо")},fields:[{type:a.Group,fieldBottomMargin:"0",fieldRightMargin:"1",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",phoneHidden:!0,tabletHidden:!0,fields:[Nc("Физическое лицо"),Uc("desktop")]},{type:a.Group,fieldBottomMargin:"0",fieldRightMargin:"0",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",desktopHidden:!0,fields:[Nc("Физическое лицо"),Uc("desktop")]},{type:a.Group,fieldBottomMargin:"0",fieldRightMargin:"0",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",fields:[Oc("Физическое лицо"),Uc("mobile")].concat(p(Hc("Физическое лицо")))}]},{type:a.Fragment,isVisible:function(e){return!!Xe(e.kontakt,"Юридическое лицо")},fields:[{type:a.Group,fieldBottomMargin:"0",fieldRightMargin:"1",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",phoneHidden:!0,tabletHidden:!0,fields:[Nc("Юридическое лицо"),Uc("desktop")]},{type:a.Group,fieldBottomMargin:"0",fieldRightMargin:"0",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",desktopHidden:!0,fields:[Nc("Юридическое лицо"),Uc("desktop")]},{type:a.Group,fieldBottomMargin:"0",fieldRightMargin:"0",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",fields:[Oc("Юридическое лицо"),Uc("mobile")].concat(p(Hc("Юридическое лицо")))}]}];window.contact_fields=Wc;var $c=[{type:Ot.Add,isDisabled:function(e,t){return!t.permissions.hasApartmentCreatePermission},label:"Создать"},{type:Ot.Fab,action:"column-setup-action",icon:Ut,label:"Колонки"},{type:Ot.Menu,options:[{action:"add-action",isDisabled:function(e,t){return!t.permissions.hasApartmentCreatePermission}},{action:"update-now"},{action:"resort-action"},{action:"drop-filters"},{action:"excel-action",isVisible:function(e,t){return t.permissions.hasOfficeManagerFlagPermission},label:"Скачать лист Excel",icon:Ht}]}],Gc=i(Fe(),2),Yc=Gc[0],Kc=Gc[1],Xc=i(Fe(),2),Jc=Xc[0],Zc=Xc[1],Qc=function(e,t){return new Promise((function(n,r){e.onload=function(){var i=document.createElement("canvas");i.width=e.height,i.height=e.width;var a=i.getContext("2d");a?(a.translate(i.width/2,i.height/2),a.rotate(t*Math.PI/180),a.drawImage(e,-e.width/2,-e.height/2),i.toBlob((function(e){e?n(e):r("there's an error")}))):r("there's an error")},e.onerror=function(e){r("there's an error"),console.error(e)}}))};function ed(e,t){return td.apply(this,arguments)}function td(){return(td=r(t().mark((function e(n,r){var i,a,o,s,u,l;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.appwriteService.getImageURL(n);case 2:return i=e.sent,(a=document.createElement("img")).src=i,a.crossOrigin="anonymous",e.next=8,Qc(a,90);case 8:if(o=e.sent){e.next=11;break}return e.abrupt("return",r);case 11:return s=r.indexOf(n),e.next=14,Fl.appwriteService.tryReadFileName(n);case 14:return u=e.sent,e.next=17,Fl.appwriteService.uploadBlob(o,u||o.type||"unknown.png");case 17:return l=e.sent,r[s]=l,e.abrupt("return",p(r));case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nd(e,t){return rd.apply(this,arguments)}function rd(){return(rd=r(t().mark((function e(n,r){var i,a,o,s,u,l;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.appwriteService.getImageURL(n);case 2:return i=e.sent,(a=document.createElement("img")).src=i,a.crossOrigin="anonymous",console.log(a.height),console.log(a.width),e.next=10,Qc(a,-90);case 10:if(o=e.sent){e.next=13;break}return e.abrupt("return",r);case 13:return s=r.indexOf(n),e.next=16,Fl.appwriteService.tryReadFileName(n);case 16:return u=e.sent,e.next=19,Fl.appwriteService.uploadBlob(o,u||o.type||"unknown.png");case 19:return l=e.sent,r[s]=l,e.abrupt("return",p(r));case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var id,ad,od,sd,ud,ld,cd,dd,pd,md=Me.createLoader(96),fd=[{action:"download-action",label:"Скачать изображение"},{action:"open-action",label:"Открыть оригинальное изображение",isVisible:function(e){return e.permissions.hasSuperAdminFlagPermission}},{action:"rotate-left-action",icon:Wt,label:"Поворот влево",isVisible:function(e){return!e.readonly}},{action:"rotate-right-action",icon:$t,label:"Поворот вправо",isVisible:function(e){return!e.readonly}},{action:"remove-action",isVisible:function(e){return!e.readonly},label:"Удалить"}],hd=$l()((function(e){return{square:{position:"relative"},dragHoverActive:{background:je(e.palette.primary.main,.5)},dragHoverInactive:{background:"#ccc"},prev:{position:"absolute",margin:"auto",left:"0",top:"0",bottom:0,zIndex:"2 !important",color:e.palette.background.paper,width:"30%"},next:{position:"absolute",margin:"auto",right:"10px",top:"10px",bottom:"5px",zIndex:"2 !important",color:e.palette.background.paper,width:"30%"},action:{zIndex:"5 !important"},defaultIcon:{position:"absolute",right:10,bottom:10,height:35,width:35,fill:"orange",background:"white",borderRadius:"50%",padding:"1.5px",zIndex:"1"},"tss-nuqny4-root":{zIndex:"5 !important"}}})),yd=function(e){var n,a=e.dropSubject,s=e.modal,u=e.className,l=e.readonly,d=e.image,p=e.images,m=e.payload,f=e.text,h=e.sx,y=e.onChange,v=e.onClick,b=e.onLoadStart,_=e.onLoadEnd,k=e.onMouseOver,g=e.drag,x=hd().classes,w=jt({title:"Продолжить?",msg:"Вы собираетесь удалить файл"}),S=i(we.useState(!1),2),z=S[0],V=S[1],A=i(we.useState(!1),2),T=A[0],C=A[1],F=i(we.useState(!1),2),L=F[0],I=F[1],M=Be(a),j=Be();we.useEffect((function(){return function(){j.next()}}),[]),we.useEffect((function(){return M.subscribe((function(){I(!1)}))}),[]);var B,D=i(Kc(),2)[1],R=i(Zc(),2)[1],q=nt({history:Fl.routerService,onLoadStart:function(){b&&b(),Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){_&&_(),Fl.layoutService.setAppbarLoader(!1)}}),P=q.handleLoadStart,E=q.handleLoadEnd,N=q.loading,O=function(){var e=r(t().mark((function e(){var n,r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!0,P(),e.prev=2,e.next=5,Fl.appwriteService.getImageURL(d);case 5:r=e.sent,ue(r),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),n=!1,Fl.alertService.notify(Xs(e.t0));case 13:return e.prev=13,E(n),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,9,13,16]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=r(t().mark((function e(){var n,r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!0,P(),e.prev=2,e.next=5,ed(d,p);case 5:r=e.sent,y(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),n=!1;case 12:return e.prev=12,E(n),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=r(t().mark((function e(){var n,r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!0,P(),e.prev=2,e.next=5,nd(d,p);case 5:r=e.sent,y(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),n=!1;case 12:return e.prev=12,E(n),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=r(t().mark((function e(){var n,r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.appwriteService.getImageURL(d);case 2:return n=e.sent,e.next=5,pu(n,d,f);case 5:r=e.sent,j.once((function(){r&&URL.revokeObjectURL(r)})),zt(r||n,"".concat(f,".png"));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("download-action"===n&&W(),"open-action"===n&&O(),"remove-action"!==n){e.next=9;break}return e.next=5,w().toPromise();case 5:if(!e.sent){e.next=9;break}return e.next=9,t=void 0,t=(Et(p)||[]).filter((function(e){return e!==d})),void y(t.length?t:null);case 9:if("rotate-left-action"!==n){e.next=12;break}return e.next=12,H();case 12:if("rotate-right-action"!==n){e.next=15;break}return e.next=15,U();case 15:case"end":return e.stop()}var t}),e)})));return function(t){return e.apply(this,arguments)}}();return Se(qe,{className:u,sx:h,onClick:function(){return v&&v(d)},children:Se(De,{draggable:g,onDragStart:function(){return D(d)},onDragOver:function(e){e.preventDefault(),R(d)},onDragLeave:function(){return I(!1)},onDragEnter:function(){return I(!0)},className:x.square,children:[!!Array.isArray(p)&&0===p.indexOf(d)&&Se(Re,{className:x.defaultIcon}),Se(qe,{className:Pe((n={},c(n,x.dragHoverActive,L),c(n,x.dragHoverInactive,!L),n)),component:"div",sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:function(){T||V(!0)},onMouseLeave:function(){T||V(!1)},children:[Se(Dt,{disabled:N,className:x.action,sx:{position:"absolute",top:10,left:10,transition:"opacity 150ms",opacity:z||k||T?1:0},payload:o(o({},m),{},{readonly:l}),options:fd,onAction:$,onToggle:function(e){e&&V(!1),C(e)}}),Se(Ne,{Loader:md,payload:d,children:(B=r(t().mark((function e(n){var i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",Se(Oe,{sx:{fontSize:96,fill:"white"}}));case 2:if(i=function(){var e=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=4;break}return e.next=3,Fl.appwriteService.getImageURL(n);case 3:case 7:return e.abrupt("return",e.sent);case 4:return console.log(s),e.next=7,Fl.previewService.getImageURL(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),sa){e.next=11;break}return e.next=6,i();case 6:return a=e.sent,e.next=9,pu(a,"".concat(n,"-").concat(s?"modal":""),f);case 9:o=e.sent,j.once((function(){o&&URL.revokeObjectURL(o)}));case 11:if(a){e.next=15;break}return e.next=14,i();case 14:a=e.sent;case 15:return e.abrupt("return",Se("img",{crossOrigin:"anonymous",loading:"lazy",alt:n,src:sa?a:o||a,style:{objectFit:"contain",height:"100%",width:"100%",pointerEvents:"none"}}));case 16:case"end":return e.stop()}}),e)}))),function(e){return B.apply(this,arguments)})})]})]})})},vd=$l()((function(e){return{root:{position:"fixed",padding:20,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"stretch",transform:"translate(-50%, -50%)",backgroundColor:e.palette.background.paper,borderRadius:5,gap:5,top:"50%",left:"50%",width:"calc(100vmin - 60px)",height:"calc(100vmin - 60px)",outline:"none"},content:{overflow:"hidden",padding:e.spacing(1),flex:1},container:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flex:1,overflow:"hidden",paddingTop:e.spacing(1)},title:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:15,color:e.palette.text.primary},submit:{marginTop:15},disabled:{opacity:.5,pointerEvents:"none"},indicatorTransparent:{height:6,background:e.palette.primary.main},tabRootTransparent:{minHeight:54,height:54},tabsRoot:{minHeight:54,height:54,marginLeft:"0 !important",marginRight:"0 !important"},prev:{position:"absolute",margin:"auto",left:"10px",top:"10px",bottom:"5px",zIndex:"2 !important",color:e.palette.background.paper,width:"30%"},next:{position:"absolute",margin:"auto",right:"10px",top:"10px",bottom:"5px",zIndex:"2 !important",color:e.palette.background.paper,width:"30%"},icon_border:{border:"1px solid black"}}})),bd=function(e){var t,n=e._fieldData,r=e.payload,a=e.onChange,o=i(we.useState(""),2),s=o[0],u=o[1],l=i(we.useState(!1),2),c=l[0],d=l[1],p=(null===(t=n.apartment_images)||void 0===t?void 0:t.length)||0,m=i(we.useState(0),2),f=m[0],h=m[1],y=i(we.useState(!1),2),v=y[0],b=y[1],_=i(we.useState(0),2),k=_[0],g=_[1],x=i(we.useState(!1),2),w=x[0],S=x[1];we.useEffect((function(){var e=n.apartment_images;h(Array.isArray(e)?e.indexOf(s):0)}),[s]);var z=vd().classes,V=function(){k||(u(""),h(0),b(!1))},A=function(){g((function(e){return e+1}))},T=function(){g((function(e){return e-1}))},C=function(e){e.preventDefault(),e.stopPropagation(),u(n.apartment_images[f+1])},F=function(e){e.preventDefault(),e.stopPropagation(),u(n.apartment_images[f-1])};return{render:function(){return Se(Ye,{open:v,onClose:V,sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center","& .MuiBackdrop-root":{background:je("#000",.5)}},children:Se("div",{className:z.root,onMouseEnter:function(){d(!0)},onMouseLeave:function(){d(!1)},onClick:function(){return b(!1)},children:Se("div",{className:z.container,children:[Se(Ue,{className:z.prev,onClick:F,disabled:0===f,onMouseOver:function(){return S(!0)},onMouseLeave:function(){return S(!1)}}),Se(Ue,{className:z.next,onClick:C,disabled:f===p-1,onMouseOver:function(){return S(!0)},onMouseLeave:function(){return S(!1)}}),Se(yd,{modal:!0,onLoadEnd:T,onLoadStart:A,className:z.content,images:n.apartment_images,text:"№".concat(n.index),payload:r,onChange:a,image:s,readonly:!0,drag:!1,onMouseOver:w}),p>1&&Se(qe,{sx:{position:"absolute",left:0,bottom:0,width:"100%",height:75,display:"flex",alignItems:"space-beetween",justifyContent:"center",transition:"opacity 150ms",opacity:c?1:0},children:Se(He,{onClick:function(e){e.preventDefault(),e.stopPropagation()},steps:p,position:"static",activeStep:f,nextButton:Se(We,{size:"small",sx:{ml:1},onClick:C,disabled:f===p-1,children:Se($e,{})}),backButton:Se(We,{size:"small",sx:{mr:1},onClick:F,disabled:0===f,children:Se(Ge,{})}),sx:{height:"45px",backdropFilter:"blur(20px)",backgroundColor:"#00000012",borderRadius:"25px",zIndex:"1000"}})})]})})})},handleNext:C,handleBack:F,pickImage:function(e){u(e),b(!0)}}},_d=function(e){var t=e.apartment_images,n=e._fieldData,r=e.payload,a=e.readonly,o=e.onChange,s=i(Kc(),1)[0],u=i(Zc(),1)[0],l=Gt(t),c=Gt(s),d=Gt(u),p=bd({_fieldData:n,payload:r,apartment_images:t,onChange:function(e){o({apartment_images:e})},readonly:a}),m=p.pickImage,f=p.render,h=Be();return Se(Ae,{children:[Se(Ke,{gap:1,sx:{pointerEvents:"all"},flexWrap:"wrap",direction:"row",onDrop:function(){!function(){var e=l.current,t=c.current,n=d.current;if(e&&t!=n){var r=e.indexOf(t),i=e.indexOf(n),a=e[r];e[r]=e[i],e[i]=a,o({apartment_images:e})}}(),h.next()},children:null==t?void 0:t.map((function(e,t){return Se(yd,{sx:{width:175},image:e,images:n.apartment_images,onChange:function(e){o({apartment_images:e})},text:"№".concat(n.index),dropSubject:h,drag:!a,payload:r,readonly:a,onClick:m},t)}))}),f()]})},kd=function(e){return Se(Yc,{initialState:"",children:Se(Jc,{initialState:"",children:Se(_d,o({},e))})})},gd=Me.createLoader(28),xd=function(e){var n,i=bd({_fieldData:e,payload:e._payload,apartment_images:e.apartment_images||[],onChange:function(){},readonly:!0}),a=i.pickImage,o=i.render;return Se(qe,{style:{height:84,width:170,display:"flex",alignItems:"center",background:"#ccc",justifyContent:"center"},onClick:function(e){e.preventDefault(),e.stopPropagation()},children:[Se(Ne,{Loader:gd,children:(n=r(t().mark((function n(){var r,i;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=e.apartment_images?e.apartment_images[0]:null)){t.next=7;break}return t.next=4,Fl.previewService.getImageURL(r);case 4:t.t0=t.sent,t.next=8;break;case 7:t.t0="";case 8:return i=t.t0,t.abrupt("return",Se(Ae,{children:i?Se("img",{crossOrigin:"anonymous",onClick:function(){e.apartment_images&&e.apartment_images[0]&&a(e.apartment_images[0])},loading:"lazy",alt:"apartment",src:i,style:{objectFit:"cover",height:"100%",width:"100%"}}):Se(Oe,{sx:{color:"white",fontSize:28}})}));case 10:case"end":return t.stop()}}),n)}))),function(){return n.apply(this,arguments)})}),o()]})},wd=function(e){return Se(Yc,{initialState:"",children:Se(Jc,{initialState:"",children:Se(xd,o({},e))})})},Sd=[{type:dt.Compute,sortable:!1,field:"index",description:"Номер объекта",headerName:"Номер",element:function(e){var t=e.index;return Se(Ft,{content:t})},width:function(){return 100}},{type:dt.Compute,sortable:!1,field:"photo",description:"Фотография объекта",headerName:"Фото",serialize:(cd=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.apartment_images,!(i=me(r)||"")){e.next=6;break}return e.next=5,Fl.appwriteService.getFileURL(i);case 5:return e.abrupt("return",e.sent);case 6:return e.abrupt("return","");case 7:case"end":return e.stop()}}),e)}))),function(e){return cd.apply(this,arguments)}),width:function(){return 170},element:wd},{type:dt.Compute,field:"zagolovok",description:"Заголовок объекта",headerName:"Заголовок",element:function(e){var t=e.zagolovok;return Se(It,{title:t,sx:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},children:Se(Je,{variant:"body1",children:t})})},width:function(){return 200}},{type:dt.Text,field:"kolichestvo_komnat",description:"Количество комнат у объекта",fullName:"Количество комнат",headerName:"Комнат",width:function(){return 60}},{type:dt.Text,field:"etazh",description:"Количество этажей объекта",headerName:"Этаж",width:function(){return 60}},{type:dt.Text,field:"etazhnost",description:"Этажность объекта",headerName:"Этажность",width:function(){return 80}},{type:dt.Compute,serialize:function(e){return e.ploshhad_doma?e.ploshhad_doma:e.obshhaya_ploshhad},field:"ploshhad",description:"Площадь объекта",compute:function(e){return[e.obshhaya_ploshhad,e.ploshhad_doma].filter((function(e){return!!e})).join(", ")},headerName:"М²",width:function(){return 60}},{type:dt.Compute,serialize:function(e){return[e.strana,e.gorod,e.oblast,e.rajon,e.mahallya,e.ulicza,e.orientir].filter((function(e){return!!e})).join(", ")},description:"Адрес",field:"adres",compute:function(e){return[e.strana,e.gorod,e.oblast,e.rajon,e.mahallya,e.ulicza,e.orientir].filter((function(e){return!!e})).join(", ")},headerName:"Адрес",width:function(){return 125}},{type:dt.Compute,field:"kategoriya_obekta",description:"Категория объекта",serialize:function(e){var t;return(null===(t=e.kategoriya_obekta)||void 0===t?void 0:t.join(", "))||""},compute:function(e){var t;return(null===(t=e.kategoriya_obekta)||void 0===t?void 0:t.join(", "))||""},headerName:"Категория",width:function(){return 100}},{type:dt.Compute,description:"Продажа",field:"czena_prodazha",isVisible:function(e){return e.payload.permissions.hasOwnerPricePermission},compute:(ld=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.exchangeService.getApartmentProdPriceLabel(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e){return ld.apply(this,arguments)}),headerName:"Продажа",width:function(){return 100}},{type:dt.Compute,description:"Аренда",field:"czena_arenda",isVisible:function(e){return e.payload.permissions.hasOwnerPricePermission},compute:(ud=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.exchangeService.getApartmentRentPriceLabel(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e){return ud.apply(this,arguments)}),headerName:"Аренда",width:function(){return 100}},{type:dt.Compute,description:"Источник",field:"istochnik",compute:function(e){return e.istochnik||""},headerName:"Источник",width:function(){return 100}},{type:dt.Compute,description:"Статус объекта",sortable:!1,field:"status",headerName:"Статус",compute:(sd=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,e.next=3,Fl.dealViewService.readStatusByApartmentId(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),function(e){return sd.apply(this,arguments)}),width:function(){return 100}},{type:dt.Compute,isVisible:function(e){return e.payload.permissions.hasFioPermission},description:"Фамилия, имя, отчество контакта",sortable:!1,field:"fio",compute:(od=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.contact_id,e.next=3,Fl.contactViewService.tryRead(r);case 3:return i=e.sent,e.abrupt("return",i?i.fio:"");case 5:case"end":return e.stop()}}),e)}))),function(e){return od.apply(this,arguments)}),headerName:"Ф.И.О.",width:function(){return 125}},{type:dt.Compute,isVisible:function(e){return e.payload.permissions.hasPreviewModeDisabled},sortable:!1,field:"telefon",description:"Номер телефона контакта",serialize:(ad=r(t().mark((function e(n,r){var i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.id,a=n.contact_id,e.next=3,Fl.permissionRequestService.getOwnerContactPermissionByApartmentId(i);case 3:if(!e.sent){e.next=8;break}return e.next=6,Fl.contactViewService.tryRead(a);case 6:return o=e.sent,e.abrupt("return",o?o.telefon:"");case 8:return e.abrupt("return","Скрыто");case 9:case"end":return e.stop()}}),e)}))),function(e,t){return ad.apply(this,arguments)}),element:function(e){var n,i=e.id,a=e.contact_id;return Se(vt,{payload:i,condition:function(e){return Fl.permissionRequestService.getOwnerContactPermissionByApartmentId(e)},Loading:"Загрузка",Else:"Скрыто",children:Se(Ne,{payload:a,children:(n=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.contactViewService.tryRead(n);case 2:return r=e.sent,e.abrupt("return",r?r.telefon:"");case 4:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})})})},headerName:"Телефон",width:function(){return 125}},{type:dt.Compute,field:"$createdAt",description:"Дата создания объекта",headerName:"Создано",compute:function(e){var t=e.$createdAt;return f(t).format("DD/MM/YYYY")},width:function(){return 145}},{type:dt.Compute,field:"$updatedAt",description:"Дата обновления объекта",headerName:"Обновлено",compute:function(e){var t=e.$updatedAt;return f(t).format("DD/MM/YYYY")},width:function(){return 145}},{type:dt.Compute,headerName:"Создал",description:"Сотрудник, добавивший объект в базу",field:"system_created_by",serialize:(id=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.system_created_by){e.next=3;break}return e.abrupt("return","Не указано");case 3:return e.next=5,Fl.userViewService.read(r);case 5:return i=e.sent,e.abrupt("return",[i.last_name,i.first_name,i.middle_name].filter((function(e){return e})).join(" "));case 7:case"end":return e.stop()}}),e)}))),function(e){return id.apply(this,arguments)}),element:function(e){return Se(Ne,{payload:e,children:(n=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.system_created_by){e.next=2;break}return e.abrupt("return","Не указано");case 2:return e.next=4,Fl.userViewService.read(n.system_created_by);case 4:return r=e.sent,e.abrupt("return",[r.last_name,r.first_name,r.middle_name].filter((function(e){return e})).join(" "));case 6:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})});var n},width:function(){return 100}},{type:dt.Action,headerName:"Действие",sortable:!1,width:function(){return 100}}],zd=[{label:"Жилая",name:"zhilaya"},{label:"Коммерческая",name:"kommercheskaya"},{label:"От застройщика",name:"novostrojka"}],Vd=[{label:"Редактировать",isDisabled:function(e,t){return!t.permissions.hasApartmentUpdatePermission},action:"edit-action",icon:Yt},{label:"В архиве",action:"toggle-archive",icon:Kt,isVisible:function(e){var t=e.system_is_archive,n=e.system_is_remove;return te(!t,!n)}},{label:"В архиве",action:"toggle-archive",icon:Xt,isVisible:function(e){var t=e.system_is_archive,n=e.system_is_remove;return te(!!t,!n)}},{label:"Удалить",action:"toggle-remove",icon:Nt,isVisible:function(e){var t=e.system_is_archive,n=e.system_is_remove;return te(!n,!t)}},{label:"Восстановить",action:"toggle-remove",icon:Jt,isVisible:function(e){var t=e.system_is_archive,n=e.system_is_remove;return te(!!n,!t)}},{label:"Создать копию",isVisible:function(e,t){return t.permissions.hasSuperAdminFlagPermission},action:"copy-action",icon:Zt}],Ad=[{id:"owner_contact",label:"Контакт"},{id:"object",label:"Объект"},{id:"service_comment",label:"Служебный комментарий"},{id:"documents",label:"Документы"}],Td=$l()((function(e){return{root:c({},"& .".concat("react-declatative__master-detail-header"),{position:"sticky",top:0,background:"white",marginBottom:e.spacing(1)})}})),Cd=function(e){var t=e.children,n=e.payload,r=e.history,a=Td().classes,o=i(we.useState((function(){return of(r)})),2),s=o[0],u=o[1];return Se(Ce,{className:a.root,activeOption:s,withTransparentTabs:!0,withMenuCollapse:!0,payload:n,mode:H.Tabs,options:Ad,onActiveOptionChange:function(e,t){t||("owner_contact"===e&&r.replace("/apartment/owner_contact"),"object"===e&&r.replace("/apartment/object"),"service_comment"===e&&r.replace("/apartment/service_comment"),"documents"===e&&r.replace("/apartment/documents"),u(e))},children:t})},Fd=$l()((function(e){return{listItemAccient:{background:je(e.palette.getContrastText(e.palette.background.paper),.018)}}})),Ld=function(e){var t=e.addon_square_names,n=e.addon_square_values;t=t||[],n=n||[];for(var r=[],i=0;i!==t.length;i++)r.push({id:w(),title:t[i],number:n[i]});return r},Id=function(e){var t=e.addon_square_names,n=e.addon_square_values,r=e.readonly,o=e.onChange,s=i(we.useState((function(){return Ld({addon_square_names:t,addon_square_values:n})})),2),u=s[0],l=s[1],c=tt({fields:[{type:a.Text,sx:{mt:-2},name:"title",title:"Название",isInvalid:function(e){return e.title?null:"Укажите название"}},{type:a.Text,name:"number",title:"Значение",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isInvalid:function(e){return e.number?null:"Укажите значение"}}]}),d=jt({title:"Вы уверены?",msg:"Вы уверены, что хотите удалить площадь?"}),m=Rt((function(){var e;o({addon_square_names:(e=u).length?e.map((function(e){return e.title})):null,addon_square_values:e.length?e.map((function(e){return e.number})):null})}),[u]).resetWatcher;we.useEffect((function(){var e=Ld({addon_square_names:t,addon_square_values:n});m(),l(e)}),[t,n]);return Se(Ke,{direction:"column",children:[Se(Ke,{direction:"row",alignItems:"center",justifyContent:"space-between",marginBottom:"20px",children:[Se(Je,{variant:"h6",fontWeight:"bold",children:"Доп. площадь"}),Se(en,{disabled:r,onClick:function(){c({title:"Создание площади",handler:{id:w(),title:"",number:""}}).then((function(e){e&&l((function(t){return[].concat(p(t),[e])}))}))},variant:"contained",children:"Добавить"})]}),Se(qe,{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"10px"},children:u.map((function(e){return Se(tn,{id:"standard-read-only-input",label:e.title,value:e.number,onClick:function(){var t;t={id:e.id,title:e.title,number:e.number},c({title:"Редактирование площади",handler:{id:t.id,title:t.title,number:t.number}}).then((function(e){e&&(l((function(t){var n=t.findIndex((function(t){return t.id===e.id}));return t[n]=e,p(t)})),console.log(u))}))},InputProps:{readOnly:!0,endAdornment:Se(nn,{position:"end",children:Se(We,{disabled:r,edge:"end",onClick:function(t){var n;t.preventDefault(),t.stopPropagation(),n=e.id,d().then((function(e){e&&l((function(e){return e.filter((function(e){return e.id!==n}))}))}))},children:Se(Nt,{fill:"white",style:{cursor:"pointer",color:"grey"}})})})},variant:"standard"})}))})]})},Md=[{type:dt.Compute,sortable:!1,field:"index",headerName:"Номер",element:function(e){var t=e.index;return Se(Ft,{content:t})},width:function(){return 100}},{type:dt.Compute,field:"zagolovok",headerName:"Заголовок",element:function(e){var t=e.zagolovok;return Se(It,{title:t,children:Se(Je,{variant:"body1",sx:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},children:t})})},width:function(){return 200}},{type:dt.Compute,isVisible:function(e){return e.payload.permissions.hasFioPermission},sortable:!1,field:"fio",compute:(pd=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.contact_id,e.next=3,Fl.contactViewService.tryRead(r);case 3:return i=e.sent,e.abrupt("return",i?i.fio:"");case 5:case"end":return e.stop()}}),e)}))),function(e){return pd.apply(this,arguments)}),headerName:"Ф.И.О.",width:function(){return 125}},{type:dt.Compute,isVisible:function(e){return e.payload.permissions.hasPreviewModeDisabled},sortable:!1,field:"telefon",element:function(e){var n,i=e.id,a=e.contact_id;return Se(vt,{payload:i,condition:function(e){return Fl.permissionRequestService.getOwnerContactPermissionByBidId(e)},Loading:"Загрузка",Else:"Скрыто",children:Se(Ne,{payload:a,children:(n=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.contactViewService.tryRead(n);case 2:return r=e.sent,e.abrupt("return",r?r.telefon:"");case 4:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})})})},headerName:"Телефон",width:function(){return 125}},{type:dt.Compute,field:"kategoriya_obekta",compute:function(e){return e.kategoriya_obekta||""},headerName:"Категория",width:function(){return 100}},{type:dt.Compute,field:"podkategoriya_obekta",compute:function(e){return e.podkategoriya_obekta||""},headerName:"Подкатегория",width:function(){return 100}},{type:dt.Compute,field:"czena_prodazha",description:"Покупка",isVisible:function(e){return e.payload.permissions.hasOwnerPricePermission},element:function(e){return Se(Ne,{payload:e,children:(n=r(t().mark((function n(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Se,t.next=3,Fl.exchangeService.getBidProdPriceLabel(e,!0);case 3:return t.t1=t.sent,t.t2={children:t.t1},t.abrupt("return",(0,t.t0)("pre",t.t2));case 6:case"end":return t.stop()}}),n)}))),function(){return n.apply(this,arguments)})});var n},headerName:"Покупка",width:function(){return 100}},{type:dt.Compute,field:"czena_arenda",description:"Аренда",isVisible:function(e){return e.payload.permissions.hasOwnerPricePermission},element:function(e){return Se(Ne,{payload:e,children:(n=r(t().mark((function n(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Se,t.next=3,Fl.exchangeService.getBidRentPriceLabel(e,!0);case 3:return t.t1=t.sent,t.t2={children:t.t1},t.abrupt("return",(0,t.t0)("pre",t.t2));case 6:case"end":return t.stop()}}),n)}))),function(){return n.apply(this,arguments)})});var n},headerName:"Аренда",width:function(){return 100}},{type:dt.Compute,field:"prodazha_arenda",headerName:"Варианты сделки",element:function(e){var t=e.prodazha,n=e.arenda,r=[].concat(p(t||[]),p(n||[]));return Se(qe,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",gap:1},children:[!r.length&&"",r.map((function(e){return Se(rn,{label:e})}))]})},width:function(){return 170}},{type:dt.Compute,sortable:!1,description:"Статус заявки",field:"status",headerName:"Статус",compute:(dd=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,e.next=3,Fl.dealViewService.readStatusByBidId(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),function(e){return dd.apply(this,arguments)}),width:function(){return 100}},{type:dt.Compute,headerName:"Создано",compute:function(e){var t=e.$createdAt;return f(t).format("DD/MM/YYYY")},field:"$createdAt",width:function(){return 145}},{type:dt.Compute,headerName:"Обновлено",compute:function(e){var t=e.$updatedAt;return f(t).format("DD/MM/YYYY")},field:"$updatedAt",width:function(){return 145}},{type:dt.Compute,headerName:"Создал",description:"Сотрудник, добавивший заявку в базу",field:"system_created_by",element:function(e){return Se(Ne,{payload:e,children:(n=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.system_created_by){e.next=2;break}return e.abrupt("return","Не указано");case 2:return e.next=4,Fl.userViewService.read(n.system_created_by);case 4:return r=e.sent,e.abrupt("return",[r.last_name,r.first_name,r.middle_name].filter((function(e){return e})).join(" "));case 6:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})});var n},width:function(){return 100}}],jd=function(e){for(var t={},n=0,r=Object.keys(e||{});n<r.length;n++){var i,a=r[n];Ha.includes(a)||(Wa.includes(a)||co.includes(a)||po.includes(a)||"id"!==a&&(a.startsWith("$")||a.startsWith("system_")||a.endsWith("_images")||a.endsWith("_files")||(!Array.isArray(e[a])||null!==(i=e[a])&&void 0!==i&&i.length)&&null!==e[a]&&""!==e[a]&&!1!==e[a]&&(t[a]=e[a])))}return t},Bd=new Set([a.Text,a.Date,a.Time,a.Combo,a.Items,a.Checkbox,a.Radio,a.YesNo,a.Component]),Dd=function(e){var t,n=[],r=m(e);try{var i=function(){var e=t.value,r=e.name,i=e.type,a=e.title;return r?n.some((function(e){return e.value===r}))?0:void(Bd.has(i)&&n.push({label:a||r,value:r})):0};for(r.s();!(t=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}return n},Rd=function(e,t){return e.some((function(e){return e.includes(t)}))},qd=[{id:"fields",element:function(e){var t=e.data,n=e.params.apartment_fields,r=e.payload,s=e.onChange,u=we.useMemo((function(){return Dd(n).map((function(e){var n=e.label,r=e.value;return{type:a.Checkbox,name:r,title:"".concat(n),defaultValue:0===t.length}}))}),[n]);return Se(st,{fields:u,change:function(e,t){s(Object.entries(e).filter((function(e){return i(e,2)[1]})).map((function(e){return i(e,1)[0]})),t)},handler:function(){return t.reduce((function(e,t){return o(o({},e),{},c({},t,!0))}),{})},payload:r})},isActive:function(e){return Rd(["/apartment_columns"],e)}},{id:"fields",element:function(e){var t=e.data,n=e.payload,r=e.params.bid_fields,s=e.onChange,u=we.useMemo((function(){return Dd(r).map((function(e){var n=e.label,r=e.value;return{type:a.Checkbox,name:r,title:"".concat(n),defaultValue:0===t.length}}))}),[r]);return Se(st,{fields:u,change:function(e,t){s(Object.entries(e).filter((function(e){return i(e,2)[1]})).map((function(e){return i(e,1)[0]})),t)},handler:function(){return t.reduce((function(e,t){return o(o({},e),{},c({},t,!0))}),{})},payload:n})},isActive:function(e){return Rd(["/bid_columns"],e)}}],Pd=function(e){var t=e.name,n=e.columns,r=e.title,i=e.hidden,o=e.isVisible,s=e.inputFormatterAllowed,u=e.inputFormatterTemplate;return{type:a.Group,isVisible:o,hidden:i,columns:n,fields:[{type:a.Component,fieldRightMargin:"0",fieldBottomMargin:"0",element:function(){return Se(Je,{variant:"caption",sx:{opacity:.8},children:r})}},{type:a.Text,sx:{"& .MuiIconButton-root":{pointerEvents:"none"}},isInvalid:function(e){return e["".concat(t,"_ot")]&&e["".concat(t,"_do")]&&parseInt(e["".concat(t,"_ot")])>parseInt(e["".concat(t,"_do")])?"От должно быть меньше До":null},title:"",columns:"6",outlined:!1,inputFormatterAllowed:s,inputFormatterTemplate:u,name:"".concat(t,"_ot"),leadingIcon:function(){return Se(qe,{sx:{height:20,width:20,display:"flex",alignItems:"center",justifyContent:"center"},children:Se(Je,{textTransform:"lowercase",variant:"caption",children:"От"})})}},{type:a.Text,sx:{"& .MuiIconButton-root":{pointerEvents:"none"}},isInvalid:function(e){return e["".concat(t,"_ot")]&&e["".concat(t,"_do")]&&parseInt(e["".concat(t,"_ot")])>parseInt(e["".concat(t,"_do")])?"От должно быть меньше До":null},title:"",columns:"6",outlined:!1,inputFormatterAllowed:s,inputFormatterTemplate:u,name:"".concat(t,"_do"),leadingIcon:function(){return Se(qe,{sx:{height:20,width:20,display:"flex",alignItems:"center",justifyContent:"center"},children:Se(Je,{textTransform:"lowercase",variant:"caption",children:"До"})})}}]}},Ed=[{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany")},isVisible:function(e){var t=!0;return t=(t=(t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая"))&&!Xe(e.podkategoriya_obekta,"Квартиры"))&&!Xe(e.podkategoriya_obekta,"Дома"))&&!Xe(e.podkategoriya_obekta,"Земля/Участок")},fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая недвижимость)"})}},Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostinnoj")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_spalni")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_holla")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_kuhni")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_sanuzla")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_balkona")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_terrasy")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_komnaty_ohrany")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"})]}]},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany")},isVisible:function(e){return!Xe(e.kategoriya_obekta,"Коммерческая")&&Xe(e.podkategoriya_obekta,"Земля/Участок")},fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Земля/Участок)"})}},Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostinnoj")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_spalni")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_holla")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_kuhni")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_sanuzla")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_balkona")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_terrasy")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_komnaty_ohrany")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"})]}]},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona")},isVisible:function(e){var t=!0;return t=(t=t&&!Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Квартиры")},fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Квартиры)"})}},Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostinnoj")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_spalni")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_holla")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_kuhni")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_sanuzla")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_balkona")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"})]}]},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany","ploshhad_gostevogo_doma","ploshhad_dopolnitelnoj_pristrojki")},isVisible:function(e){var t=!0;return t=(t=t&&!Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Дома")},fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Дома)"})}},Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostinnoj")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_spalni")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_holla")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_kuhni")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_sanuzla")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_balkona")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_terrasy")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_komnaty_ohrany")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostevogo_doma")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostevogo_doma",title:"Площадь гостевого дома М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_dopolnitelnoj_pristrojki")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_dopolnitelnoj_pristrojki",title:"Площадь дополнительной пристройки М²"})]}]},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona")},isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Квартиры")},fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая + Жилая квартира)"})}},Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostinnoj")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_spalni")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_holla")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_kuhni")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_sanuzla")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_balkona")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"})]}]},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany","ploshhad_gostevogo_doma","ploshhad_dopolnitelnoj_pristrojki")},isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Дома")},fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческий + Жилой дом)"})}},Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostinnoj")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_spalni")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_holla")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_kuhni")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_sanuzla")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_balkona")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_terrasy")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_komnaty_ohrany")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostevogo_doma")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostevogo_doma",title:"Площадь гостевого дома М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_dopolnitelnoj_pristrojki")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_dopolnitelnoj_pristrojki",title:"Площадь дополнительной пристройки М²"})]}]},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany")},isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Земля/Участок")},fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая + Жилая земля/участок)"})}},Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostinnoj")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_spalni")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_holla")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_kuhni")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_sanuzla")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_balkona")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_terrasy")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_komnaty_ohrany")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"})]}]}],Nd=[{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"vnutri_est","ryadom_est")},isVisible:function(e){var t=!0;return t=(t=(t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая"))&&!Xe(e.podkategoriya_obekta,"Квартиры"))&&!Xe(e.podkategoriya_obekta,"Дома"))&&!Xe(e.podkategoriya_obekta,"Земля/Участок")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Group,fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая недвижимость)"})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vnutri_est")},columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Телевизор","Кондиционер","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("ryadom_est")},columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Охрана","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"vnutri_est","ryadom_est")},isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Квартиры")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Group,fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая + Жилая квартира)"})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vnutri_est")},columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Холодильник","Телевизор","Кондиционер","Стиральная машина","Мусоропровод","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг","Пожарная сигнализация","Видеонаблюдение","Сигнализация"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("ryadom_est")},columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Охрана","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"vnutri_est","ryadom_est")},isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Дома")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Group,fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческий + Жилой дом)"})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vnutri_est")},columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Телевизор","Кондиционер","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг","Полисадник"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("ryadom_est")},columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Охрана","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"vnutri_est","ryadom_est")},isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Земля/Участок")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Group,fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая + Жилая земля/участок)"})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vnutri_est")},columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Забор","Катлаван","Пожарная сигнализация","Видеонаблюдение","Сигнализация"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("ryadom_est")},columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Охрана","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}}],Od=[{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"kolichestvo_komnat","sostoyanie_obekta","sostoyanie_remonta","poleznaya_ploshhad","etazh","tip_stroeniya","mashina_mesto","kolichestvo_sotok","etazhnost","balkon","parkovka","vysota_potolkov","obshhaya_ploshhad","sanuzel","mebel","voda","gaz","lift_kommercziya","sistema_otopleniya","elektrichestvo","kanalizacziya","rasstoyanie_do_metro","mestopolozhenie_obekta","god_postrojki","sistema_kondiczionirovaniya","vid_liczenzii","naznachenie_obekta")},isVisible:function(e){return(!Xe(e.podkategoriya_obekta,"Земля/Участок")||!Xe(e.kategoriya_obekta,"Коммерческая"))&&((!Xe(e.podkategoriya_obekta,"Дома")||!Xe(e.kategoriya_obekta,"Коммерческая"))&&((!Xe(e.podkategoriya_obekta,"Квартиры")||!Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.kategoriya_obekta,"Коммерческая")))},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая недвижимость)"})}},Pd({hidden:function(e){return!e.fieldVisibility.has("kolichestvo_komnat")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sostoyanie_obekta")},sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_obekta",title:"Состояние объекта",itemList:["Новой постройки","Недостроенный","Под снос","Коробка","Пустая земля/участок"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sostoyanie_remonta")},sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},Pd({hidden:function(e){return!e.fieldVisibility.has("poleznaya_ploshhad")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("etazh")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("tip_stroeniya")},sx:{mt:2},columns:"3",outlined:!1,name:"tip_stroeniya",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},Pd({hidden:function(e){return!e.fieldVisibility.has("mashina_mesto")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),Pd({hidden:function(e){return!e.fieldVisibility.has("kolichestvo_sotok")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"}),Pd({hidden:function(e){return!e.fieldVisibility.has("etazhnost")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("balkon")},sx:{mt:2},columns:"3",outlined:!1,name:"balkon",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("parkovka")},sx:{mt:2},columns:"3",outlined:!1,name:"parkovka",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},Pd({hidden:function(e){return!e.fieldVisibility.has("vysota_potolkov")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"}),Pd({hidden:function(e){return!e.fieldVisibility.has("obshhaya_ploshhad")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sanuzel")},sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("mebel")},sx:{mt:2},columns:"3",outlined:!1,name:"mebel",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("voda")},columns:"3",outlined:!1,name:"voda",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("gaz")},columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("lift_kommercziya")},columns:"3",outlined:!1,name:"lift_kommercziya",title:"Лифт",itemList:["Есть","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema_otopleniya")},columns:"3",outlined:!1,name:"sistema_otopleniya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("elektrichestvo")},columns:"3",outlined:!1,name:"elektrichestvo",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("kanalizacziya")},columns:"3",outlined:!1,name:"kanalizacziya",title:"Канализация",itemList:["Да","Нет"]},Pd({hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_metro")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("mestopolozhenie_obekta")},sx:{mt:2},columns:"3",outlined:!1,name:"mestopolozhenie_obekta",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},Pd({hidden:function(e){return!e.fieldVisibility.has("god_postrojki")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema_kondiczionirovaniya")},columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vid_liczenzii")},columns:"3",outlined:!1,name:"vid_liczenzii",title:"Вид лицензии",itemList:["Коммерческая","Жилая"]},{type:a.Component,hidden:function(e){return!e.fieldVisibility.has("naznachenie_obekta")},sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:function(e){return Se(Ze,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:function(t){return e.onChange(c({},"naznachenie_obekta",t))}})}}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"kolichestvo_komnat","sostoyanie_remonta-kvartiry","nazvanie_zhk","tip-stroeniya_kvartiry","etazh","balkon_kvartira","tip_planirovki","lift_kvartira","etazhnost","sanuzel_kvartira","zhilaya_ploshhad","mebel_kvartira","obshhaya_ploshhad","vysota_potolkov","kolichestvo_spalen","sistema-otopleniya_kvartiry","spalnya_sanuzel","gaz","rasstoyanie_do_metro","vid_iz_okna","parkovka_kvartira","god_postrojki")},isVisible:function(e){if(Xe(e.podkategoriya_obekta,"Квартиры")&&Xe(e.kategoriya_obekta,"Коммерческая"))return!1;var t=!1;return t=t||Xe(e.podkategoriya_obekta,"Квартиры")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Квартиры)"})}},Pd({hidden:function(e){return!e.fieldVisibility.has("kolichestvo_komnat")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sostoyanie_remonta-kvartiry")},sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_remonta-kvartiry",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:a.Complete,hidden:function(e){return!e.fieldVisibility.has("nazvanie_zhk")},columns:"3",outlined:!1,name:"nazvanie_zhk",title:"Название ЖК",tip:['ЖК "Greenwich"','ЖК "OzMahal"','ЖК "Elysium"','ЖК "Binkat"','ЖК "Brooklyn"','ЖК "Assalom Havo"','ЖК "Istanbul City"']},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("tip-stroeniya_kvartiry")},sx:{mt:2},columns:"3",outlined:!1,name:"tip-stroeniya_kvartiry",title:"Тип строения",itemList:["Кирпичный","Монолитный","Блочный","Панельный","Деревянный","Газоблочный","Бетонно-керамзитный"]},Pd({hidden:function(e){return!e.fieldVisibility.has("etazh")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("balkon_kvartira")},sx:{mt:2},columns:"3",outlined:!1,name:"balkon_kvartira",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("tip_planirovki")},sx:{mt:2},columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Малосемейная","Общежитие","Пентхаус","Дуплекс","Комната"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("lift_kvartira")},sx:{mt:2},columns:"3",outlined:!1,name:"lift_kvartira",title:"Лифт",itemList:["Пассажирский","Грузовой","Нет"]},Pd({hidden:function(e){return!e.fieldVisibility.has("etazhnost")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sanuzel_kvartira")},sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel_kvartira",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более"]},Pd({hidden:function(e){return!e.fieldVisibility.has("zhilaya_ploshhad")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"zhilaya_ploshhad",title:"Жилая площадь М²"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("mebel_kvartira")},sx:{mt:2},columns:"3",outlined:!1,name:"mebel_kvartira",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},Pd({hidden:function(e){return!e.fieldVisibility.has("obshhaya_ploshhad")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("vysota_potolkov")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"}),Pd({hidden:function(e){return!e.fieldVisibility.has("kolichestvo_spalen")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema-otopleniya_kvartiry")},sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_kvartiry",title:"Система отопления",itemList:["Центральное","2х контурный котел","Теплый пол"]},Pd({hidden:function(e){return!e.fieldVisibility.has("spalnya_sanuzel")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("gaz")},sx:{mt:2},columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},Pd({hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_metro")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vid_iz_okna")},sx:{mt:2},columns:"3",outlined:!1,name:"vid_iz_okna",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("parkovka_kvartira")},sx:{mt:2},columns:"3",outlined:!1,name:"parkovka_kvartira",title:"Парковка",itemList:["Наземная","Собственная","Подземная","В аренду","Нет"]},Pd({hidden:function(e){return!e.fieldVisibility.has("god_postrojki")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"})]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"kolichestvo_komnat","sostoyanie_doma","god_postrojki","tip-stroeniya_doma","etazhnost","balkon_doma","tip_planirovki","bassejn","ploshhad_doma","sanuzel_doma","mashina_mesto","kolichestvo_spalen","kolichestvo_sotok","voda_dom","lift_dom","spalnya_sanuzel","sistema-otopleniya_dom","mebel_dom","rasstoyanie_do_metro","gaz_dom","sistema-kondiczionirovaniya_dom","vysota_potolkov","elektrichestvo_dom","vid_iz_okna_dom","garazh","kanalizacziya_dom","raspolozhenie_doma","mestopolozhenie-obekta_dom")},isVisible:function(e){if(Xe(e.podkategoriya_obekta,"Дома")&&Xe(e.kategoriya_obekta,"Коммерческая"))return!1;var t=!1;return t=t||Xe(e.podkategoriya_obekta,"Дома")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Дома)"})}},Pd({hidden:function(e){return!e.fieldVisibility.has("kolichestvo_komnat")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sostoyanie_doma")},sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_doma",title:"Состояние дома",itemList:["Новой постройки","Недостроенный","Под снос","Коробка"]},Pd({hidden:function(e){return!e.fieldVisibility.has("god_postrojki")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("tip-stroeniya_doma")},sx:{mt:2},columns:"3",outlined:!1,name:"tip-stroeniya_doma",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},Pd({hidden:function(e){return!e.fieldVisibility.has("etazhnost")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("balkon_doma")},sx:{mt:2},columns:"3",outlined:!1,name:"balkon_doma",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("tip_planirovki")},sx:{mt:2},columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Смешанный"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("bassejn")},sx:{mt:2},columns:"3",outlined:!1,name:"bassejn",title:"Бассейн",itemList:["Летний","Зимний","Сауна","Нет"]},Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_doma")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_doma",title:"Площадь дома М²"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sanuzel_doma")},sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel_doma",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},Pd({hidden:function(e){return!e.fieldVisibility.has("mashina_mesto")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),Pd({hidden:function(e){return!e.fieldVisibility.has("kolichestvo_spalen")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"}),Pd({hidden:function(e){return!e.fieldVisibility.has("kolichestvo_sotok")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("voda_dom")},sx:{mt:2},columns:"3",outlined:!1,name:"voda_dom",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("lift_dom")},sx:{mt:2},columns:"3",outlined:!1,name:"lift_dom",title:"Лифт",itemList:["Есть","Нет"]},Pd({hidden:function(e){return!e.fieldVisibility.has("spalnya_sanuzel")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema-otopleniya_dom")},sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_dom",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("mebel_dom")},sx:{mt:2},columns:"3",outlined:!1,name:"mebel_dom",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},Pd({hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_metro")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("gaz_dom")},sx:{mt:2},columns:"3",outlined:!1,name:"gaz_dom",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema-kondiczionirovaniya_dom")},sx:{mt:2},columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_dom",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},Pd({hidden:function(e){return!e.fieldVisibility.has("vysota_potolkov")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"}),{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("elektrichestvo_dom")},sx:{mt:2},columns:"3",outlined:!1,name:"elektrichestvo_dom",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vid_iz_okna_dom")},sx:{mt:2},columns:"3",outlined:!1,name:"vid_iz_okna_dom",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("garazh")},columns:"3",outlined:!1,name:"garazh",title:"Гараж",itemList:["Подземный","Закрытый","Под навесом","Уличный"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("kanalizacziya_dom")},columns:"3",outlined:!1,name:"kanalizacziya_dom",title:"Канализация",itemList:["Да","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("raspolozhenie_doma")},columns:"3",outlined:!1,name:"raspolozhenie_doma",title:"Расположение дома",itemList:["По середине","В начале двора","В конце двора"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("mestopolozhenie-obekta_dom")},columns:"3",outlined:!1,name:"mestopolozhenie-obekta_dom",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"kolichestvo_komnat","naznachenie-obekta-zemlya_uchastok","tip_zemli_uchastka","poleznaya_ploshhad","etazh","sostoyanie-obekta_zemlya","mashina_mesto","kolichestvo_sotok","etazhnost","sostoyanie-remonta_zemlya","parkovka_zemlya","rasstoyanie_do_metro","obshhaya_ploshhad","voda_zemlya","mestopolozhenie-obekta_zemlya","rasstoyanie_do_goroda","sistema-otopleniya_zemlya","podezdnye_puti","sistema-kondiczionirovaniya_zemlya","god_postrojki","elektrichestvo_zemlya","gaz_zemlya","kanalizacziya_zemlya")},isVisible:function(e){return!Xe(e.kategoriya_obekta,"Коммерческая")&&Xe(e.podkategoriya_obekta,"Земля/Участок")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Земля/Участок)"})}},Pd({hidden:function(e){return!e.fieldVisibility.has("kolichestvo_komnat")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:a.Component,hidden:function(e){return!e.fieldVisibility.has("naznachenie-obekta-zemlya_uchastok")},sx:{mb:2,pr:1},columns:"3",name:"naznachenie-obekta-zemlya_uchastok",element:function(e){return Se(Ze,{variant:"standard",label:"Назначение объекта",items:[{label:"Сельхоз использование",value:"Сельхоз использование"},{label:"ИЖС",value:"ИЖС"},{label:"Высотная застройка",value:"Высотная застройка"},{label:"Промышленное назначение",value:"Промышленное назначение"},{label:"ТЦ",value:"ТЦ"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Склады",value:"Склады"},{label:"Инвестпроект",value:"Инвестпроект"},{label:"Строительство образовательных учреждений",value:"Строительство образовательных учреждений"},{label:"АЗС",value:"АЗС"},{label:"Мойка",value:"Мойка"}],value:e["naznachenie-obekta_zemlya"],onChange:function(t){return e.onChange(c({},"naznachenie-obekta_zemlya",t))}})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("tip_zemli_uchastka")},sx:{mt:2},columns:"3",outlined:!1,name:"tip_zemli_uchastka",title:"Тип земли/участка",itemList:["Делимый","Неделимый"]},Pd({hidden:function(e){return!e.fieldVisibility.has("poleznaya_ploshhad")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("etazh")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sostoyanie-obekta_zemlya")},sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie-obekta_zemlya",title:"Состояние объекта",itemList:["Пустая земля/участок","Недостроенная","Под снос"]},Pd({hidden:function(e){return!e.fieldVisibility.has("mashina_mesto")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),Pd({hidden:function(e){return!e.fieldVisibility.has("kolichestvo_sotok")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"}),Pd({hidden:function(e){return!e.fieldVisibility.has("etazhnost")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sostoyanie-remonta_zemlya")},sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie-remonta_zemlya",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("parkovka_zemlya")},sx:{mt:2},columns:"3",outlined:!1,name:"parkovka_zemlya",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},Pd({hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_metro")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),Pd({hidden:function(e){return!e.fieldVisibility.has("obshhaya_ploshhad")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("voda_zemlya")},sx:{mt:2},columns:"3",outlined:!1,name:"voda_zemlya",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("mestopolozhenie-obekta_zemlya")},sx:{mt:2},columns:"3",outlined:!1,name:"mestopolozhenie-obekta_zemlya",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},Pd({hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_goroda")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_goroda",title:"Расстояние до города (м)"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema-otopleniya_zemlya")},sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_zemlya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("podezdnye_puti")},columns:"3",outlined:!1,name:"podezdnye_puti",title:"Подъездные пути",itemList:["Асфальтированная дорога","Грунтовая дорога","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema-kondiczionirovaniya_zemlya")},columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_zemlya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},Pd({hidden:function(e){return!e.fieldVisibility.has("god_postrojki")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("elektrichestvo_zemlya")},sx:{mt:2},columns:"3",outlined:!1,name:"elektrichestvo_zemlya",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("gaz_zemlya")},columns:"3",outlined:!1,name:"gaz_zemlya",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("kanalizacziya_zemlya")},columns:"3",outlined:!1,name:"kanalizacziya_zemlya",title:"Канализация",itemList:["Да","Нет"]}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"kolichestvo_komnat","sostoyanie_remonta-kvartiry","naznachenie_obekta","raspolozhenie_obekta","etazh","balkon_kvartira","tip_planirovki","lift_kvartira","etazhnost","god_postrojki","nazvanie_zhk","mashina_mesto","obshhaya_ploshhad","sanuzel_kvartira","parkovka_kvartira","zhilaya_ploshhad","mebel_kvartira","vysota_potolkov","kolichestvo_spalen","sistema-otopleniya_kvartiry","vid_iz_okna","spalnya_sanuzel","gaz","rasstoyanie_do_metro","sistema_kondiczionirovaniya","tip-stroeniya_kvartiry")},isVisible:function(e){return!(!Xe(e.kategoriya_obekta,"Коммерческая")||!Xe(e.podkategoriya_obekta,"Квартиры"))},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая + Жилая квартира)"})}},Pd({hidden:function(e){return!e.fieldVisibility.has("kolichestvo_komnat")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sostoyanie_remonta-kvartiry")},sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_remonta-kvartiry",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:a.Component,hidden:function(e){return!e.fieldVisibility.has("naznachenie_obekta")},sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:function(e){return Se(Ze,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:function(t){return e.onChange(c({},"naznachenie_obekta",t))}})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("raspolozhenie_obekta")},columns:"3",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},Pd({hidden:function(e){return!e.fieldVisibility.has("etazh")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("balkon_kvartira")},sx:{mt:2},columns:"3",outlined:!1,name:"balkon_kvartira",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("tip_planirovki")},sx:{mt:2},columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Малосемейная","Общежитие","Пентхаус","Дуплекс","Комната"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("lift_kvartira")},sx:{mt:2},columns:"3",outlined:!1,name:"lift_kvartira",title:"Лифт",itemList:["Пассажирский","Грузовой","Нет"]},Pd({hidden:function(e){return!e.fieldVisibility.has("etazhnost")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),Pd({hidden:function(e){return!e.fieldVisibility.has("god_postrojki")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),{type:a.Complete,hidden:function(e){return!e.fieldVisibility.has("nazvanie_zhk")},columns:"3",outlined:!1,name:"nazvanie_zhk",title:"Название ЖК",tip:['ЖК "Greenwich"','ЖК "OzMahal"','ЖК "Elysium"','ЖК "Binkat"','ЖК "Brooklyn"','ЖК "Assalom Havo"','ЖК "Istanbul City"']},Pd({hidden:function(e){return!e.fieldVisibility.has("mashina_mesto")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),Pd({hidden:function(e){return!e.fieldVisibility.has("obshhaya_ploshhad")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sanuzel_kvartira")},sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel_kvartira",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("parkovka_kvartira")},sx:{mt:2},columns:"3",outlined:!1,name:"parkovka_kvartira",title:"Парковка",itemList:["Наземная","Собственная","Подземная","В аренду","Нет"]},Pd({hidden:function(e){return!e.fieldVisibility.has("zhilaya_ploshhad")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"zhilaya_ploshhad",title:"Жилая площадь М²"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("mebel_kvartira")},sx:{mt:2},columns:"3",outlined:!1,name:"mebel_kvartira",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},Pd({hidden:function(e){return!e.fieldVisibility.has("vysota_potolkov")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"}),Pd({hidden:function(e){return!e.fieldVisibility.has("kolichestvo_spalen")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema-otopleniya_kvartiry")},sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_kvartiry",title:"Система отопления",itemList:["Центральное","2х контурный котел","Теплый пол"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vid_iz_okna")},sx:{mt:2},columns:"3",outlined:!1,name:"vid_iz_okna",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},Pd({hidden:function(e){return!e.fieldVisibility.has("spalnya_sanuzel")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("gaz")},sx:{mt:2},columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},Pd({hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_metro")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema_kondiczionirovaniya")},columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("tip-stroeniya_kvartiry")},sx:{mt:2},columns:"3",outlined:!1,name:"tip-stroeniya_kvartiry",title:"Тип строения",itemList:["Кирпичный","Монолитный","Блочный","Панельный","Деревянный","Газоблочный","Бетонно-керамзитный"]}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"kolichestvo_komnat","sostoyanie_doma","mestopolozhenie-obekta_dom","naznachenie_obekta","etazhnost","sostoyanie_remonta","raspolozhenie_obekta","tip-stroeniya_doma","ploshhad_doma","raspolozhenie_doma","tip_planirovki","bassejn","kolichestvo_sotok","sanuzel_doma","mashina_mesto","kolichestvo_spalen","voda_dom","lift_dom","spalnya_sanuzel","sistema-otopleniya_dom","mebel_dom","rasstoyanie_do_metro","gaz_dom","god_postrojki","vysota_potolkov","elektrichestvo_dom","vid_iz_okna_dom","garazh","kanalizacziya_dom","balkon_doma","sistema-kondiczionirovaniya_dom")},isVisible:function(e){return!(!Xe(e.kategoriya_obekta,"Коммерческая")||!Xe(e.podkategoriya_obekta,"Дома"))},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческий + Жилой дом)"})}},Pd({hidden:function(e){return!e.fieldVisibility.has("kolichestvo_komnat")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sostoyanie_doma")},sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_doma",title:"Состояние дома",itemList:["Новой постройки","Недостроенный","Под снос","Коробка"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("mestopolozhenie-obekta_dom")},sx:{mt:2},columns:"3",outlined:!1,name:"mestopolozhenie-obekta_dom",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:a.Component,hidden:function(e){return!e.fieldVisibility.has("naznachenie_obekta")},sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:function(e){return Se(Ze,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:function(t){return e.onChange(c({},"naznachenie_obekta",t))}})}},Pd({hidden:function(e){return!e.fieldVisibility.has("etazhnost")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sostoyanie_remonta")},sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("raspolozhenie_obekta")},columns:"3",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("tip-stroeniya_doma")},sx:{mt:2},columns:"3",outlined:!1,name:"tip-stroeniya_doma",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_doma")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_doma",title:"Площадь дома М²"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("raspolozhenie_doma")},sx:{mt:2},columns:"3",outlined:!1,name:"raspolozhenie_doma",title:"Расположение дома",itemList:["По середине","В начале двора","В конце двора"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("tip_planirovki")},sx:{mt:2},columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Смешанный"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("bassejn")},sx:{mt:2},columns:"3",outlined:!1,name:"bassejn",title:"Бассейн",itemList:["Летний","Зимний","Сауна","Нет"]},Pd({hidden:function(e){return!e.fieldVisibility.has("kolichestvo_sotok")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sanuzel_doma")},sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel_doma",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},Pd({hidden:function(e){return!e.fieldVisibility.has("mashina_mesto")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),Pd({hidden:function(e){return!e.fieldVisibility.has("kolichestvo_spalen")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("voda_dom")},sx:{mt:2},columns:"3",outlined:!1,name:"voda_dom",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("lift_dom")},sx:{mt:2},columns:"3",outlined:!1,name:"lift_dom",title:"Лифт",itemList:["Есть","Нет"]},Pd({hidden:function(e){return!e.fieldVisibility.has("spalnya_sanuzel")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema-otopleniya_dom")},sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_dom",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("mebel_dom")},sx:{mt:2},columns:"3",outlined:!1,name:"mebel_dom",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},Pd({hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_metro")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("gaz_dom")},sx:{mt:2},columns:"3",outlined:!1,name:"gaz_dom",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},Pd({hidden:function(e){return!e.fieldVisibility.has("god_postrojki")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),Pd({hidden:function(e){return!e.fieldVisibility.has("vysota_potolkov")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"}),{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("elektrichestvo_dom")},sx:{mt:2},columns:"3",outlined:!1,name:"elektrichestvo_dom",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vid_iz_okna_dom")},sx:{mt:2},columns:"3",outlined:!1,name:"vid_iz_okna_dom",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("garazh")},columns:"3",outlined:!1,name:"garazh",title:"Гараж",itemList:["Подземный","Закрытый","Под навесом","Уличный"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("kanalizacziya_dom")},columns:"3",outlined:!1,name:"kanalizacziya_dom",title:"Канализация",itemList:["Да","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("balkon_doma")},sx:{mt:2},columns:"3",outlined:!1,name:"balkon_doma",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema-kondiczionirovaniya_dom")},columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_dom",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"kolichestvo_komnat","naznachenie-obekta-zemlya_uchastok","tip_zemli_uchastka","poleznaya_ploshhad","etazh","sostoyanie-obekta_zemlya","mashina_mesto","kolichestvo_sotok","etazhnost","sostoyanie-remonta_zemlya","parkovka_zemlya","rasstoyanie_do_metro","obshhaya_ploshhad","voda_zemlya","mestopolozhenie-obekta_zemlya","rasstoyanie_do_goroda","sistema-otopleniya_zemlya","god_postrojki","elektrichestvo_zemlya","podezdnye_puti","sistema-kondiczionirovaniya_zemlya","gaz_zemlya","kanalizacziya_zemlya")},isVisible:function(e){return!(!Xe(e.kategoriya_obekta,"Коммерческая")||!Xe(e.podkategoriya_obekta,"Земля/Участок"))},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая + Жилая земля/участок)"})}},Pd({hidden:function(e){return!e.fieldVisibility.has("kolichestvo_komnat")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:a.Component,hidden:function(e){return!e.fieldVisibility.has("naznachenie-obekta-zemlya_uchastok")},sx:{mt:2,mb:2,pr:1},columns:"3",name:"naznachenie-obekta-zemlya_uchastok",element:function(e){return Se(Ze,{variant:"standard",label:"Назначение объекта",items:[{label:"Сельхоз использование",value:"Сельхоз использование"},{label:"ИЖС",value:"ИЖС"},{label:"Высотная застройка",value:"Высотная застройка"},{label:"Промышленное назначение",value:"Промышленное назначение"},{label:"ТЦ",value:"ТЦ"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Склады",value:"Склады"},{label:"Инвестпроект",value:"Инвестпроект"},{label:"Строительство образовательных учреждений",value:"Строительство образовательных учреждений"},{label:"АЗС",value:"АЗС"},{label:"Мойка",value:"Мойка"}],value:e["naznachenie-obekta_zemlya"],onChange:function(t){return e.onChange(c({},"naznachenie-obekta_zemlya",t))}})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("tip_zemli_uchastka")},sx:{mt:2},columns:"3",outlined:!1,name:"tip_zemli_uchastka",title:"Тип земли/участка",itemList:["Делимый","Неделимый"]},Pd({hidden:function(e){return!e.fieldVisibility.has("poleznaya_ploshhad")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("etazh")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sostoyanie-obekta_zemlya")},sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie-obekta_zemlya",title:"Состояние объекта",itemList:["Пустая земля/участок","Недостроенная","Под снос"]},Pd({hidden:function(e){return!e.fieldVisibility.has("mashina_mesto")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),Pd({hidden:function(e){return!e.fieldVisibility.has("kolichestvo_sotok")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"}),Pd({hidden:function(e){return!e.fieldVisibility.has("etazhnost")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sostoyanie-remonta_zemlya")},sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie-remonta_zemlya",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("parkovka_zemlya")},sx:{mt:2},columns:"3",outlined:!1,name:"parkovka_zemlya",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},Pd({hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_metro")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),Pd({hidden:function(e){return!e.fieldVisibility.has("obshhaya_ploshhad")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("voda_zemlya")},sx:{mt:2},columns:"3",outlined:!1,name:"voda_zemlya",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("mestopolozhenie-obekta_zemlya")},sx:{mt:2},columns:"3",outlined:!1,name:"mestopolozhenie-obekta_zemlya",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},Pd({hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_goroda")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_goroda",title:"Расстояние до города (м)"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema-otopleniya_zemlya")},sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_zemlya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},Pd({hidden:function(e){return!e.fieldVisibility.has("god_postrojki")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("elektrichestvo_zemlya")},sx:{mt:2},columns:"3",outlined:!1,name:"elektrichestvo_zemlya",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("podezdnye_puti")},columns:"3",outlined:!1,name:"podezdnye_puti",title:"Подъездные пути",itemList:["Асфальтированная дорога","Грунтовая дорога","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema-kondiczionirovaniya_zemlya")},columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_zemlya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("gaz_zemlya")},columns:"3",outlined:!1,name:"gaz_zemlya",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("kanalizacziya_zemlya")},columns:"3",outlined:!1,name:"kanalizacziya_zemlya",title:"Канализация",itemList:["Да","Нет"]}]}}],Ud=[{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"vnutri_est","ryadom_est")},isVisible:function(e){var t=!0;return t=(t=t&&!Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Квартиры")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Group,fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Квартиры)"})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vnutri_est")},columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Холодильник","Телевизор","Кондиционер","Стиральная машина","Мусоропровод","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("ryadom_est")},columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"vnutri_est","ryadom_est")},isVisible:function(e){var t=!0;return t=(t=t&&!Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Дома")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Group,fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Дома)"})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vnutri_est")},columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Холодильник","Телевизор","Кондиционер","Стиральная машина","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг","Полисадник"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("ryadom_est")},columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Охрана","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"vnutri_est","ryadom_est")},isVisible:function(e){var t=!1;return t=(t=t||Xe(e.podkategoriya_obekta,"Земля/Участок"))&&!Xe(e.kategoriya_obekta,"Коммерческая")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Group,fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Земля/Участок)"})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vnutri_est")},columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Забор","Катлаван","Пожарная сигнализация","Видеонаблюдение","Сигнализация","Разгрузочный пандус"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("ryadom_est")},columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Охрана","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}}],Hd=[{type:a.Paper,hidden:function(e){return!Ql(e.fieldVisibility,"zagolovok","kategoriya_obekta","prodazha","arenda","podkategoriya_obekta","raspolozhenie_obekta","istochnik","tip_nedvizhimosti","vid_obekta","vid_liczenzii")},fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Основная информация"})}},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("zagolovok")},outlined:!1,name:"zagolovok",title:"Заголовок",placeholder:"Введите текст"},{type:a.Fragment,isVisible:function(e){return Xe(e.kategoriya_obekta,"Коммерческая")},fields:[{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("kategoriya_obekta")},outlined:!1,columns:"4",name:"kategoriya_obekta",title:"Категория объекта",itemList:["Жилая","Коммерческая","От застройщика"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("prodazha")},outlined:!1,columns:"4",name:"prodazha",title:"Продажа",itemList:["Прямая продажа","Рассрочка","Через банк","Обмен"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("arenda")},outlined:!1,columns:"4",name:"arenda",title:"Аренда",itemList:["Долгосрочная","Ежемесячная","Посуточная"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("podkategoriya_obekta")},outlined:!1,columns:"4",name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:function(e){return Xe(e.kategoriya_obekta,"Коммерческая")},itemList:function(){return["Квартиры","Дома","Земля/Участок","Здания","Базы"]}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("raspolozhenie_obekta")},isVisible:function(e){if(Xe(e.kategoriya_obekta,"Коммерческая")){if(Xe(e.podkategoriya_obekta,"Дома","Квартиры"))return!1;if(Xe(e.podkategoriya_obekta,"Земля/Участок"))return!1}return!0},columns:"4",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("istochnik")},isVisible:function(e){return!(!Xe(e.kategoriya_obekta,"Коммерческая")||!Xe(e.podkategoriya_obekta,"Дома"))||!Xe(e.podkategoriya_obekta,"Дома")},columns:"4",outlined:!1,name:"istochnik",title:"Источник",itemList:["По звонку","Личные связи","Самостоятельный поиск","Риелтор","С сайта","Прибытие в офис","OLX","Facebook","Instagram","Telegram","Эксклюзив","Другое"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("tip_nedvizhimosti")},isVisible:function(e){return!(!Xe(e.podkategoriya_obekta,"Квартиры")||!Xe(e.kategoriya_obekta,"Коммерческая","Жилая"))},columns:"4",outlined:!1,name:"tip_nedvizhimosti",title:"Тип недвижимости",itemList:["Вторичное жилье","Новостройка"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("vid_obekta")},isVisible:function(e){var t=!1;return t=t||Xe(e.podkategoriya_obekta,"Дома")},columns:"4",outlined:!1,name:"vid_obekta",title:"Вид объекта",itemList:["Дом","Коттедж","Таунхаус","ЖАКТ","Часть дома","Дача"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vid_liczenzii")},isVisible:function(e){return!(!Xe(e.kategoriya_obekta,"Коммерческая")||!Xe(e.podkategoriya_obekta,"Земля/Участок"))},columns:"4",outlined:!1,name:"vid_liczenzii",title:"Вид лицензии",itemList:["Коммерческая","Жилая"]}]},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"kategoriya_obekta","prodazha","arenda","podkategoriya_obekta","istochnik","tip_nedvizhimosti","vid_obekta","raspolozhenie_obekta","vid_liczenzii")},isVisible:function(e){return!Xe(e.kategoriya_obekta,"Коммерческая")},fields:[{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("kategoriya_obekta")},outlined:!1,columns:"4",name:"kategoriya_obekta",title:"Категория объекта",itemList:["Жилая","Коммерческая","От застройщика"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("prodazha")},outlined:!1,columns:"4",name:"prodazha",title:"Продажа",itemList:["Прямая продажа","Рассрочка","Через банк","Обмен"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("arenda")},outlined:!1,columns:"4",name:"arenda",title:"Аренда",itemList:["Долгосрочная","Ежемесячная","Посуточная"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("podkategoriya_obekta")},outlined:!1,columns:"4",name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:function(e){return!Xe(e.kategoriya_obekta,"Коммерческая")},itemList:function(){return["Квартиры","Дома","Земля/Участок"]}},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("istochnik")},columns:"4",outlined:!1,name:"istochnik",title:"Источник",itemList:["По звонку","Личные связи","Самостоятельный поиск","Риелтор","С сайта","Прибытие в офис","OLX","Facebook","Instagram","Telegram","Эксклюзив","Другое"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("tip_nedvizhimosti")},isVisible:function(e){return!!Xe(e.podkategoriya_obekta,"Квартиры")&&!Xe(e.kategoriya_obekta,"Коммерческая")},columns:"4",outlined:!1,name:"tip_nedvizhimosti",title:"Тип недвижимости",itemList:["Вторичное жилье","Новостройка"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("vid_obekta")},isVisible:function(e){var t=!1;return t=t||Xe(e.podkategoriya_obekta,"Дома")},columns:"4",outlined:!1,name:"vid_obekta",title:"Вид объекта",itemList:["Дом","Коттедж","Таунхаус","ЖАКТ","Часть дома","Дача"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("raspolozhenie_obekta")},isVisible:function(e){var t=!1;return t=(t=(t=t||Xe(e.kategoriya_obekta,"Коммерческая"))&&!Xe(e.podkategoriya_obekta,"Дома"))&&!Xe(e.podkategoriya_obekta,"Земля/Участок")},columns:"4",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vid_liczenzii")},isVisible:function(e){var t=!1;return t=t||Xe(e.podkategoriya_obekta,"Земля/Участок")},columns:"4",outlined:!1,name:"vid_liczenzii",title:"Вид лицензии",itemList:["Коммерческая","Жилая"]}]}]}].concat(Od,Ud,Nd,Ed);window.apartment_filters=Hd;var Wd=new(function(){return l((function e(){var t=this;s(this,e),c(this,"reloadSubject",new V),c(this,"columnMap",new Map),c(this,"getFields",(function(e){return t.columnMap.get(e)||[]})),c(this,"setFields",(function(e,n){t.columnMap.set(e,n),t.reloadSubject.next()})),c(this,"clear",(function(e){e?t.columnMap.delete(e):t.columnMap.clear()})),T(this,{columnMap:M,clear:an})}))}());Fl.apartmentViewService.updateSubject.subscribe((function(e){var t=i(e,1)[0];Wd.clear(t)})),Fl.routerService.listen((function(e){"PUSH"===e.action&&Wd.clear()}));var $d=new(function(){return l((function e(){var t=this;s(this,e),c(this,"reloadSubject",new V),c(this,"columnMap",new Map),c(this,"getFields",(function(e){return t.columnMap.get(e)||[]})),c(this,"setFields",(function(e,n){t.columnMap.set(e,n),t.reloadSubject.next()})),c(this,"clear",(function(e){e?t.columnMap.delete(e):t.columnMap.clear()})),T(this,{columnMap:M,clear:an})}))}());Fl.bidViewService.updateSubject.subscribe((function(e){var t=i(e,1)[0];$d.clear(t)})),Fl.routerService.listen((function(e){"PUSH"===e.action&&$d.clear()}));var Gd,Yd,Kd,Xd,Jd,Zd,Qd=re(),ep=function(e,t){return"apartment"===t?Wd.getFields(e):"bid"===t?$d.getFields(e):[]},tp=function(e){var n,a,o=e.payload,s=e.mode,u=on(),l=u.push,c=u.pop,d=sn({animation:"none",title:"Критерии автоподбора",history:Qd,routes:qd,AfterTitle:function(e){var t=e.onClose;return Se(We,{size:"small",onClick:t,children:Se(it,{})})},fetchState:(a=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("apartment"!==s){e.next=4;break}return e.next=3,Fl.apartmentViewService.read(n);case 3:case 7:return e.abrupt("return",e.sent);case 4:if("bid"!==s){e.next=8;break}return e.next=7,Fl.bidViewService.read(n);case 8:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),mapInitialData:function(e){return{fields:ep(e,s)}},mapParams:(n=r(t().mark((function e(n,r){var a,u,l;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i(r,1),u=a[0],e.next=3,Fl.featureService.getFeatures();case 3:return l=e.sent,e.abrupt("return",{apartment_fields:"apartment"===s?ve(Hd,u,o,l).visible:[],bid_fields:"bid"===s?ve(Hd,u,o,l).visible:[]});case 5:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)}),mapPayload:function(){return o},onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},onSubmit:function(e,t){return t&&function(e,t,n){"apartment"===n?Wd.setFields(e,t):"bid"===n&&$d.setFields(e,t)}(e,t.fields,s),!0},onClose:function(){c()},submitLabel:"Применить"}),p=d.pickData,m=d.render;return function(e){l({id:"apartment_autofind_columns",render:m,onInit:function(){"apartment"===s&&Qd.push("/apartment_columns"),"bid"===s&&Qd.push("/bid_columns")},onMount:function(){p(e)}})}},np=function(){var e=r(t().mark((function e(n){var r,i,a,o,s,u,l,c,d,p,h,y,v,b,_,k,g,x,w,S,z,V,A,T,C,F,L,I,M,j,B,D,R,q,P,E,N,O,U;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.name,i=void 0===r?f().format("DD.MM.YYYY-HH:mm"):r,a=n.columns,o=n.handler,s=n.payload,u=n.selectedRows,l=n.query,d=(c=void 0===l?{}:l).filterData,p=void 0===d?{}:d,h=c.limit,y=void 0===h?25:h,v=c.page,b=void 0===v?0:v,_=c.chipData,k=void 0===_?{}:_,g=c.search,x=void 0===g?"":g,w=c.sortModel,S=void 0===w?[]:w,z=[],V=a.filter((function(e){return e.type!==dt.Action})).filter((function(e){return e.headerName})).filter((function(e){return e.field})),z.push(V.map((function(e){return e.headerName||""}))),"function"!=typeof o){e.next=10;break}return e.next=7,o(p,{limit:y,offset:y*b},S,k,x,s);case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=o;case 11:"rows"in(A=e.t0)&&(A=A.rows),u&&(A=A.filter((function(e){return u.includes(e.id)}))),T=m(A),e.prev=15,T.s();case 17:if((C=T.n()).done){e.next=53;break}F=C.value,L=[],I=m(V),e.prev=21,I.s();case 23:if((M=I.n()).done){e.next=42;break}if(j=M.value,B=j.field,D=j.compute,R=j.serialize,q=void 0,!R){e.next=32;break}return e.next=29,R(F,s);case 29:q=e.sent,e.next=39;break;case 32:if(!D){e.next=38;break}return e.next=35,D(F,s);case 35:q=e.sent,e.next=39;break;case 38:B&&(q=F[B]);case 39:"string"==typeof q?L.push(q):"number"==typeof q||"boolean"==typeof q?L.push(String(q)):L.push("");case 40:e.next=23;break;case 42:e.next=47;break;case 44:e.prev=44,e.t1=e.catch(21),I.e(e.t1);case 47:return e.prev=47,I.f(),e.finish(47);case 50:z.push(L);case 51:e.next=17;break;case 53:e.next=58;break;case 55:e.prev=55,e.t2=e.catch(15),T.e(e.t2);case 58:return e.prev=58,T.f(),e.finish(58);case 61:P=un.aoa_to_sheet(z),E=un.book_new(),un.book_append_sheet(E,P,i),N=ln(E,{type:"array",bookType:"xlsx"}),O=new Blob([N],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),U=URL.createObjectURL(O),zt(U,"".concat(i,".xlsx")),Fl.routerService.subscribeLeave((function(){URL.revokeObjectURL(U)}));case 69:case"end":return e.stop()}}),e,null,[[15,55,58,61],[21,44,47,50]])})));return function(t){return e.apply(this,arguments)}}(),rp=[{type:Ot.Add,isDisabled:function(e,t){return!t.permissions.hasBidCreatePermission},label:"Создать"},{type:Ot.Fab,action:"column-setup-action",icon:Ut,label:"Колонки"},{type:Ot.Menu,options:[{action:"add-action",isDisabled:function(e,t){return!t.permissions.hasBidCreatePermission}},{action:"update-now"},{action:"resort-action"},{action:"drop-filters"},{action:"excel-action",isVisible:function(e,t){return t.permissions.hasOfficeManagerFlagPermission},label:"Скачать лист Excel",icon:Ht}]}],ip=[{type:dt.Compute,sortable:!1,field:"index",description:"Номер заявки",headerName:"Номер",element:function(e){var t=e.index;return Se(Ft,{content:t})},width:function(){return 100}},{type:dt.Text,field:"zagolovok",description:"Заголовок заявки",headerName:"Заголовок",element:function(e){var t=e.zagolovok;return Se(It,{title:t,children:Se(Je,{variant:"body1",sx:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},children:t})})},width:function(){return 200}},{type:dt.Compute,isVisible:function(e){return e.payload.permissions.hasFioPermission},sortable:!1,field:"fio",description:"Фамилия, имя, отчество контакта",compute:(Zd=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.contact_id,e.next=3,Fl.contactViewService.tryRead(r);case 3:return i=e.sent,e.abrupt("return",i?i.fio:"");case 5:case"end":return e.stop()}}),e)}))),function(e){return Zd.apply(this,arguments)}),headerName:"Ф.И.О.",width:function(){return 125}},{type:dt.Compute,isVisible:function(e){return e.payload.permissions.hasPreviewModeDisabled},sortable:!1,field:"telefon",description:"Номер телефона контакта",serialize:(Jd=r(t().mark((function e(n){var r,i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,i=n.contact_id,e.next=3,Fl.permissionRequestService.getOwnerContactPermissionByBidId(r);case 3:if(!e.sent){e.next=8;break}return e.next=6,Fl.contactViewService.tryRead(i);case 6:return a=e.sent,e.abrupt("return",a?a.telefon:"");case 8:return e.abrupt("return","Скрыто");case 9:case"end":return e.stop()}}),e)}))),function(e){return Jd.apply(this,arguments)}),element:function(e){var n,i=e.id,a=e.contact_id;return Se(vt,{payload:i,condition:function(e){return Fl.permissionRequestService.getOwnerContactPermissionByBidId(e)},Loading:"Загрузка",Else:"Скрыто",children:Se(Ne,{payload:a,children:(n=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.contactViewService.tryRead(n);case 2:return r=e.sent,e.abrupt("return",r?r.telefon:"");case 4:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})})})},headerName:"Телефон",width:function(){return 125}},{type:dt.Compute,field:"kategoriya_obekta",description:"Категория объекта",compute:function(e){return e.kategoriya_obekta||""},headerName:"Категория",width:function(){return 100}},{type:dt.Compute,field:"podkategoriya_obekta",description:"Подкатегория объекта",compute:function(e){return e.podkategoriya_obekta||""},headerName:"Подкатегория",width:function(){return 100}},{type:dt.Compute,field:"prodazha_arenda",description:"Покупка/Аренда",headerName:"Тип сделки",serialize:function(e){var t=e.prodazha,n=e.arenda;return[].concat(p(t||[]),p(n||[])).join(", ")},element:function(e){var t=e.prodazha,n=e.arenda,r=[].concat(p(t||[]),p(n||[]));return Se(qe,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",gap:1},children:[!r.length&&"",r.map((function(e){return Se(Qt,{label:e})}))]})},width:function(){return 170}},{type:dt.Compute,field:"czena_prodazha",description:"Покупка",isVisible:function(e){return e.payload.permissions.hasOwnerPricePermission},serialize:(Xd=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.exchangeService.getBidProdPriceLabel(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e){return Xd.apply(this,arguments)}),element:function(e){return Se(Ne,{payload:e,children:(n=r(t().mark((function n(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Se,t.next=3,Fl.exchangeService.getBidProdPriceLabel(e,!0);case 3:return t.t1=t.sent,t.t2={children:t.t1},t.abrupt("return",(0,t.t0)("pre",t.t2));case 6:case"end":return t.stop()}}),n)}))),function(){return n.apply(this,arguments)})});var n},headerName:"Покупка",width:function(){return 100}},{type:dt.Compute,field:"czena_arenda",description:"Аренда",isVisible:function(e){return e.payload.permissions.hasOwnerPricePermission},serialize:(Kd=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.exchangeService.getBidRentPriceLabel(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e){return Kd.apply(this,arguments)}),element:function(e){return Se(Ne,{payload:e,children:(n=r(t().mark((function n(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Se,t.next=3,Fl.exchangeService.getBidRentPriceLabel(e,!0);case 3:return t.t1=t.sent,t.t2={children:t.t1},t.abrupt("return",(0,t.t0)("pre",t.t2));case 6:case"end":return t.stop()}}),n)}))),function(){return n.apply(this,arguments)})});var n},headerName:"Аренда",width:function(){return 100}},{type:dt.Compute,sortable:!1,description:"Статус заявки",field:"status",headerName:"Статус",compute:(Yd=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,e.next=3,Fl.dealViewService.readStatusByBidId(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),function(e){return Yd.apply(this,arguments)}),width:function(){return 100}},{type:dt.Compute,headerName:"Создано",description:"Дата создания заявки",compute:function(e){var t=e.$createdAt;return f(t).format("DD/MM/YYYY")},field:"$createdAt",width:function(){return 145}},{type:dt.Compute,headerName:"Обновлено",description:"Дата обновления заявки",compute:function(e){var t=e.$updatedAt;return f(t).format("DD/MM/YYYY")},field:"$updatedAt",width:function(){return 145}},{type:dt.Compute,headerName:"Создал",description:"Сотрудник, добавивший заявку в базу",field:"system_created_by",serialize:(Gd=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.system_created_by){e.next=3;break}return e.abrupt("return","Не указано");case 3:return e.next=5,Fl.userViewService.read(r);case 5:return i=e.sent,e.abrupt("return",[i.last_name,i.first_name,i.middle_name].filter((function(e){return e})).join(" "));case 7:case"end":return e.stop()}}),e)}))),function(e){return Gd.apply(this,arguments)}),element:function(e){return Se(Ne,{payload:e,children:(n=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.system_created_by){e.next=2;break}return e.abrupt("return","Не указано");case 2:return e.next=4,Fl.userViewService.read(n.system_created_by);case 4:return r=e.sent,e.abrupt("return",[r.last_name,r.first_name,r.middle_name].filter((function(e){return e})).join(" "));case 6:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})});var n},width:function(){return 100}},{type:dt.Action,headerName:"Действие",sortable:!1,width:function(){return 100}}],ap=[{label:"Редактировать",isDisabled:function(e,t){return!t.permissions.hasBidUpdatePermission},action:"edit-action",icon:Yt},{label:"В архиве",action:"toggle-archive",icon:Kt,isVisible:function(e){return!e.system_is_archive}},{label:"В архиве",action:"toggle-archive",icon:Xt,isVisible:function(e){return!!e.system_is_archive}},{label:"Создать копию",isVisible:function(e,t){return t.permissions.hasSuperAdminFlagPermission},action:"copy-action",icon:Zt}],op=[{label:"Жилая",name:"zhilaya"},{label:"Коммерческая",name:"kommercheskaya"},{label:"От застройщика",name:"novostrojka"}],sp=$l()((function(e){return{root:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:e.spacing(1),marginBottom:e.spacing(1),gap:e.spacing(1)},stretch:{flex:2}}})),up=[{action:"excel-action",isDisabled:function(e){return!e.length},label:"Скачать Excel"}],lp=function(e){var n=e.payload,i=sp().classes,a=cn().selectedRows,o=tp({payload:n,mode:"apartment"}),s=dn().loading,u=pn({columns:ip,storageKey:"bid_columns"}).columns,l=we.useMemo((function(){return u.filter((function(e){return e.type!==dt.Action}))}),[u]),c=Gt(a),d=mn(function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,np({handler:function(){return r},columns:l,payload:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),p=function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("excel-action"!==n){e.next=3;break}return e.next=3,d(c.current);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Se(fn,{className:i.root,children:[Se(Je,{className:i.stretch,fontWeight:"bold",children:"Подходящие заявки"}),Se(xt,{variant:"outlined",onClick:function(){return o(n.id)},children:"Указать критерии"}),Se(Dt,{disabled:s,payload:a,options:up,onAction:p})]})},cp=new Set(["system_metro","system_rajon","system_mahallya","system_rent_price","system_rent_price_ot","system_rent_price_do","system_rent_kom_price","system_rent_kom_price_ot","system_rent_kom_price_do","system_prod_price","system_prod_price_ot","system_prod_price_do","system_prod_kom_price","system_prod_kom_price_ot","system_prod_kom_price_do"]),dp=function(e){for(var t={},n=0,r=Object.keys(e||{});n<r.length;n++){var i,a=r[n];(!Array.isArray(e[a])||null!==(i=e[a])&&void 0!==i&&i.length)&&(null!==e[a]&&""!==e[a]&&!1!==e[a]&&cp.has(a)&&(t[a]=e[a]))}return t},pp=[{id:"contact",label:"Контакт"},{id:"parameter",label:"Заявка"},{id:"service_comment",label:"Служебный комментарий"},{id:"documents",label:"Документы"}],mp=$l()((function(e){return{root:c({},"& .".concat("react-declatative__master-detail-header"),{position:"sticky",top:0,background:"white",marginBottom:e.spacing(1)})}})),fp=function(e){var t=e.children,n=e.payload,r=e.history,a=mp().classes,o=i(we.useState((function(){return vm(r)})),2),s=o[0],u=o[1];return Se(Ce,{className:a.root,activeOption:s,withTransparentTabs:!0,withMenuCollapse:!0,payload:n,mode:H.Tabs,options:pp,onActiveOptionChange:function(e,t){t||("contact"===e&&r.replace("/bid/contact"),"parameter"===e&&r.replace("/bid/parameter"),"service_comment"===e&&r.replace("/bid/service_comment"),"documents"===e&&r.replace("/bid/documents"),u(e))},children:t})},hp=$l()((function(e){return{listItemAccient:{background:je(e.palette.getContrastText(e.palette.background.paper),.018)}}}));Me.createLoader(28);var yp,vp,bp,_p,kp=[{type:dt.Compute,sortable:!1,field:"index",headerName:"Номер",element:function(e){var t=e.index;return Se(Ft,{content:String(t)})},width:function(){return 100}},{type:dt.Compute,sortable:!1,field:"photo",headerName:"Фото",width:function(){return 170},element:wd},{type:dt.Compute,field:"zagolovok",headerName:"Заголовок",element:function(e){var t=e.zagolovok;return Se(It,{title:t,children:Se(Je,{variant:"body1",sx:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},children:t})})},width:function(){return 200}},{type:dt.Text,field:"kolichestvo_komnat",headerName:"Комнат",width:function(){return 60}},{type:dt.Text,field:"etazh",headerName:"Этаж",width:function(){return 60}},{type:dt.Text,field:"etazhnost",headerName:"Этажность",width:function(){return 80}},{type:dt.Compute,field:"ploshhad",compute:function(e){return[e.obshhaya_ploshhad,e.ploshhad_doma].filter((function(e){return!!e})).join(", ")},headerName:"М²",width:function(){return 60}},{type:dt.Compute,field:"adres",compute:function(e){return[e.strana,e.gorod,e.oblast,e.rajon,e.mahallya,e.ulicza,e.orientir].filter((function(e){return!!e})).join(", ")},headerName:"Адрес",width:function(){return 125}},{type:dt.Compute,field:"kategoriya_obekta",compute:function(e){var t;return(null===(t=e.kategoriya_obekta)||void 0===t?void 0:t.join(", "))||""},headerName:"Категория",width:function(){return 100}},{type:dt.Compute,isVisible:function(e){return e.payload.permissions.hasOwnerPricePermission},field:"czena_prodazha",compute:(_p=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.exchangeService.getApartmentProdPriceLabel(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e){return _p.apply(this,arguments)}),headerName:"Продажа",width:function(){return 100}},{type:dt.Compute,field:"czena_arenda",isVisible:function(e){return e.payload.permissions.hasOwnerPricePermission},compute:(bp=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.exchangeService.getApartmentRentPriceLabel(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e){return bp.apply(this,arguments)}),headerName:"Аренда",width:function(){return 100}},{type:dt.Compute,field:"istochnik",compute:function(e){return e.istochnik||""},headerName:"Источник",width:function(){return 100}},{type:dt.Compute,sortable:!1,field:"status",headerName:"Статус",compute:(vp=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,e.next=3,Fl.dealViewService.readStatusByApartmentId(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),function(e){return vp.apply(this,arguments)}),width:function(){return 100}},{type:dt.Compute,isVisible:function(e){return e.payload.permissions.hasFioPermission},sortable:!1,field:"fio",compute:(yp=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.contact_id,e.next=3,Fl.contactViewService.tryRead(r);case 3:return i=e.sent,e.abrupt("return",i?i.fio:"");case 5:case"end":return e.stop()}}),e)}))),function(e){return yp.apply(this,arguments)}),headerName:"Ф.И.О.",width:function(){return 125}},{type:dt.Compute,isVisible:function(e){return e.payload.permissions.hasPreviewModeDisabled},sortable:!1,field:"telefon",element:function(e){var n,i=e.id,a=e.contact_id;return Se(vt,{payload:i,condition:function(e){return Fl.permissionRequestService.getOwnerContactPermissionByApartmentId(e)},Loading:"Загрузка",Else:"Скрыто",children:Se(Ne,{payload:a,children:(n=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.contactViewService.tryRead(n);case 2:return r=e.sent,e.abrupt("return",r?r.telefon:"");case 4:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})})})},headerName:"Телефон",width:function(){return 125}},{type:dt.Compute,field:"$createdAt",headerName:"Создано",compute:function(e){var t=e.$createdAt;return f(t).format("DD/MM/YYYY")},width:function(){return 145}},{type:dt.Compute,field:"$updatedAt",headerName:"Обновлено",compute:function(e){var t=e.$updatedAt;return f(t).format("DD/MM/YYYY")},width:function(){return 145}},{type:dt.Compute,headerName:"Создал",description:"Сотрудник, добавивший объект в базу",field:"system_created_by",element:function(e){return Se(Ne,{payload:e,children:(n=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.system_created_by){e.next=2;break}return e.abrupt("return","Не указано");case 2:return e.next=4,Fl.userViewService.read(n.system_created_by);case 4:return r=e.sent,e.abrupt("return",[r.last_name,r.first_name,r.middle_name].filter((function(e){return e})).join(" "));case 6:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})});var n},width:function(){return 100}}],gp={"Категория объекта":"📌","Подкатегория объекта":"📌","Название ЖК":"👷","Тип недвижимости":"🏗️","Район":"📍","Адрес":"🛣️","Ориентир":"🚏","Метро":"🚊","Количество комнат":"🚪","Количество спален":"🛏️","Количество соток":"🏡","Этаж":"🪜","Этажность":"🏢","Бассейн":"🏊","Общая площадь М²":"📐","Площадь дома М²":"📐","Состояние ремонта":"⚒️","Назначение объекта":"✅","Расположение объекта":"🏫","Состояние объекта":"📊","Примечание":"💡","Тип сделки":"🔹"},xp=function e(t,n,r){var i=t.isVisible;if(!(void 0===i?function(){return!0}:i)(n,r)){if(t.fields){var a,o=m(t.fields);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.isVisible=function(){return!1},e(s,n,r)}}catch(u){o.e(u)}finally{o.f()}}t.child&&(t.child.isVisible=function(){return!1},e(t.child,n,r))}},wp=function(){var e=r(t().mark((function e(n,r){var a,o,s,u,l,c,d,p,f,h,y,v,b,_,k,g,x,w;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="",o=S.cloneDeep(Zm),(o=de(o)).forEach((function(e){return xp(e,n,r)})),s=[],u=m(o),e.prev=6,u.s();case 8:if((l=u.n()).done){e.next=56;break}if(c=l.value,d=c.title,p=c.isVisible,f=void 0===p?function(){return!0}:p,h=c.compute,f(n,r)){e.next=13;break}return e.abrupt("continue",54);case 13:if(h&&d){e.next=15;break}return e.abrupt("continue",54);case 15:if("Источник"!==d){e.next=17;break}return e.abrupt("continue",54);case 17:if("Категория объекта"!==d){e.next=19;break}return e.abrupt("continue",54);case 19:if("Подкатегория объекта"!==d){e.next=21;break}return e.abrupt("continue",54);case 21:if("Тип клиента"!==d){e.next=23;break}return e.abrupt("continue",54);case 23:if("Статус клиента"!==d){e.next=25;break}return e.abrupt("continue",54);case 25:if("Лояльность клиента"!==d){e.next=27;break}return e.abrupt("continue",54);case 27:if("Фактический адрес"!==d){e.next=29;break}return e.abrupt("continue",54);case 29:if("Серия и номер паспорта"!==d){e.next=31;break}return e.abrupt("continue",54);case 31:if("Дата выдачи паспорта"!==d){e.next=33;break}return e.abrupt("continue",54);case 33:if("ПИНФЛ"!==d){e.next=35;break}return e.abrupt("continue",54);case 35:if("ИНН"!==d){e.next=37;break}return e.abrupt("continue",54);case 37:if("Кадастровый номер объекта"!==d){e.next=39;break}return e.abrupt("continue",54);case 39:if("Кадастровый номер земли"!==d){e.next=41;break}return e.abrupt("continue",54);case 41:if("Телефон"!==d){e.next=43;break}return e.abrupt("continue",54);case 43:if("Email"!==d){e.next=45;break}return e.abrupt("continue",54);case 45:if("№ дома"!==d){e.next=47;break}return e.abrupt("continue",54);case 47:if("№ квартиры"!==d){e.next=49;break}return e.abrupt("continue",54);case 49:if("Код домофона"!==d){e.next=51;break}return e.abrupt("continue",54);case 51:if("Подъезд №"!==d){e.next=53;break}return e.abrupt("continue",54);case 53:s.push(c);case 54:e.next=8;break;case 56:e.next=61;break;case 58:e.prev=58,e.t0=e.catch(6),u.e(e.t0);case 61:return e.prev=61,u.f(),e.finish(61);case 64:s.sort((function(e,t){var n=e.title,r=void 0===n?"":n,i=t.title,a=void 0===i?"":i;return(S.get(gp,a)?1:0)-(S.get(gp,r)?1:0)})),y=s.findIndex((function(e){var t=e.title,n=void 0===t?"":t;return!S.get(gp,n)})),v=m(s.entries()),e.prev=67,v.s();case 69:if((b=v.n()).done){e.next=82;break}if(_=i(b.value,2),k=_[0],g=_[1],x=g.title,w=g.compute,k===y&&(a+="<br>"),w&&x){e.next=74;break}return e.abrupt("continue",80);case 74:return e.t1=a,e.t2="<li><p>".concat(S.get(gp,x)||"","<b>").concat(x,":").concat(hn.nbsp,"</b>"),e.next=78,w(n,r);case 78:e.t3=e.sent,a=e.t1+=e.t2.concat.call(e.t2,e.t3,"</p></li>");case 80:e.next=69;break;case 82:e.next=87;break;case 84:e.prev=84,e.t4=e.catch(67),v.e(e.t4);case 87:return e.prev=87,v.f(),e.finish(87);case 90:return a+="<br>",e.abrupt("return",a);case 92:case"end":return e.stop()}}),e,null,[[6,58,61,64],[67,84,87,90]])})));return function(t,n){return e.apply(this,arguments)}}(),Sp=function(){var e=r(t().mark((function e(n){var r,i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.apartmentViewService.read(n);case 2:return r=e.sent,i="",a=function(e){return"uzs"===e?"сум":"у.е."},o=!1,Xe(r.kategoriya_obekta,"Коммерческая")?(r.prodazha&&r.prod_kom_startovaya_czena&&(i+="<p>💵 <b>Продажа:".concat(hn.nbsp,"</b> ").concat(r.prod_kom_startovaya_czena," ").concat(a(r.prod_kom_startovaya_czena_valyuta),"</p>"),o=!0),r.arenda&&r.rent_kom_startovaya_czena&&(i+="<p>🔑 <b>В аренду:".concat(hn.nbsp,"</b> ").concat(r.rent_kom_startovaya_czena," ").concat(a(r.rent_kom_startovaya_czena_valyuta)),r.rent_kom_komissiya_agenstva&&(i+=" (Есть комиссия)"),i+="</p>",o=!0)):Xe(r.kategoriya_obekta,"Жилая","От застройщика")&&(r.prodazha&&r.prod_startovaya_czena&&(i+="<p>💵 <b>Продажа:".concat(hn.nbsp,"</b> ").concat(r.prod_startovaya_czena," ").concat(a(r.prod_startovaya_czena_valyuta),"</p>"),o=!0),r.arenda&&r.rent_startovaya_czena&&(i+="<p>🔑 <b>В аренду:".concat(hn.nbsp,"</b> ").concat(r.rent_startovaya_czena," ").concat(a(r.rent_startovaya_czena_valyuta)),r.rent_komissiya_agenstva&&(i+=" (Есть комиссия)"),i+="</p>",o=!0)),o&&(i+="\n\n"),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),zp=function(){var e=r(t().mark((function e(n,r,a){var o,s,u,l,c,d,p;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o="",n.opisanie&&(o+="<blockquote>".concat(n.opisanie,"</blockquote>")),o+="<br>",s=m(r.entries());try{for(s.s();!(u=s.n()).done;)l=i(u.value,2),c=l[0],d=l[1],o+="<figure>",o+='<img src="'.concat(d,'" />'),o+="<figcaption><em>Изображение".concat(hn.nbsp).concat(c+1,"</em></figcaption>"),o+="</figure>"}catch(t){s.e(t)}finally{s.f()}return o+="<br>",e.t0=o,e.next=9,wp(n,a);case 9:return o=e.t0+=e.sent,o+="<p>",e.t1=o,e.next=14,Sp(n.id);case 14:return o=e.t1+=e.sent,o+="</p>",o+="<br>",e.next=19,Fl.dictService.getYoutubePrimaryLink();case 19:return e.t2=e.sent,e.next=22,Fl.dictService.getInstagramPrimaryLink();case 22:return e.t3=e.sent,e.next=25,Fl.dictService.getFacebookPrimaryLink();case 25:return e.t4=e.sent,e.next=28,Fl.dictService.getTelegramPrimaryLink();case 28:return e.t5=e.sent,p={YouTube:e.t2,Instagram:e.t3,Facebook:e.t4,Telegram:e.t5},o+="<br>",o+="<p>",o+=Object.entries(p).filter((function(e){return i(e,2)[1]})).map((function(e){var t=i(e,2),n=t[0],r=t[1];return"<a href='".concat(r,"'>").concat(n,"</a>")})).join("".concat(hn.nbsp,"|").concat(hn.nbsp)),o+="</p>",e.abrupt("return",o);case 35:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();var Vp=function(e){var t,n,r,i,a,o,s,u,l,c=document.createElement("canvas"),d=c.getContext&&c.getContext("2d"),p={r:0,g:0,b:0},m=0;if(r=c.height=e.naturalHeight||e.offsetHeight||e.height,n=c.width=e.naturalWidth||e.offsetWidth||e.width,!d)return null;d.drawImage(e,0,0),i=(t=d.getImageData(0,0,n,r)).data.length;for(var f=0;f<i;f+=4)p.r+=t.data[f],p.g+=t.data[f+1],p.b+=t.data[f+2],m++;return p.r=Math.floor(p.r/m),p.g=Math.floor(p.g/m),p.b=Math.floor(p.b/m),o=-40,s=(a=p).r,u=a.g,l=a.b,s=(s=Math.floor(s*(100+o)/100))<255?s:255,u=(u=Math.floor(u*(100+o)/100))<255?u:255,l=(l=Math.floor(l*(100+o)/100))<255?l:255,s=Math.round(s),u=Math.round(u),l=Math.round(l),"#"+(1==s.toString(16).length?"0"+s.toString(16):s.toString(16))+(1==u.toString(16).length?"0"+u.toString(16):u.toString(16))+(1==l.toString(16).length?"0"+l.toString(16):l.toString(16))},Ap=1024,Tp=function(){var e=r(t().mark((function e(n){var i,a,o=arguments;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.length>1&&void 0!==o[1]&&o[1],(a=document.createElement("img")).src=n,a.crossOrigin="anonymous",e.abrupt("return",Promise.resolve().then((function(){return new Promise((function(e,t){a.addEventListener("load",(function(){return e()})),a.addEventListener("error",(function(){return t()}))}))})).then((function(){return new Promise(function(){var e=r(t().mark((function e(n,r){var o,s,u,l;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((o=document.createElement("canvas")).width=Math.max(a.naturalHeight,a.naturalWidth),o.height=Math.max(a.naturalHeight,a.naturalWidth),s=o.getContext("2d")){e.next=7;break}return r("there's an error"),e.abrupt("return");case 7:return i||(u=Vp(a),s.fillStyle=u||"#ccc",s.fillRect(0,0,o.width,o.height)),s.translate(o.width/2,o.height/2),s.drawImage(a,-a.width/2,-a.height/2),s.translate(0,0),e.next=13,createImageBitmap(o);case 13:l=e.sent,o.width=Ap,o.height=Ap,s.drawImage(l,0,0,Ap,Ap),o.toBlob((function(e){e?n(e):r("there's an error")}));case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Cp=function(){var e=r(t().mark((function e(n){var r,i,a=arguments;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]&&a[1],e.prev=1,e.next=4,Tp(n,r);case 4:return i=e.sent,e.abrupt("return",i?URL.createObjectURL(i):null);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),Fp=yn.create({body:{fontFamily:"Roboto",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start",paddingTop:35,paddingBottom:65,paddingHorizontal:35},header:{minWidth:"15%",maxWidth:"15%",paddingBottom:20},logo:{width:"auto",height:"auto"},content:{flex:1,width:"100%",maxHeight:"80%",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start"},apartmentNumber:{position:"absolute",fontSize:12,bottom:30,left:0,right:0,textAlign:"center",color:"grey"},image:{objectFit:"contain",height:"auto",width:"auto"},textContainer:{display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start"},imageContainer:{paddingVertical:10,marginVertical:10,display:"flex",alignContent:"center",justifyContent:"center",width:"100%"},stretchContainer:{flex:1},inline:{display:"flex",flexDirection:"row"}}),Lp=function(){var e=r(t().mark((function e(n,i){var a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.featureService.getFeatures();case 2:return a=e.sent,o=function(){var e=r(t().mark((function e(){var o,s,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.settingsViewService.getValue();case 2:if(o=e.sent,!(s=o.logo_file_id)){e.next=10;break}return e.next=7,Fl.appwriteService.getImageURL(s);case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=null;case 11:return u=e.t0,e.t1=Se,e.t2=xn,e.next=16,Promise.all(n.map(function(){var e=r(t().mark((function e(n){var o,s,l,c;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=ve(Zm,n.data,i,a),s=o.visible,e.next=3,Fl.exchangeService.getApartmentRentPriceLabel(n.data);case 3:return l=e.sent,e.next=6,Fl.exchangeService.getApartmentProdPriceLabel(n.data);case 6:return c=e.sent,e.t0=Se,e.t1=bn,e.t2=Fp.body,e.t3=!!u&&Se(_n,{style:Fp.header,children:Se(kn,{style:Fp.logo,src:u})}),e.t4=Se,e.t5=_n,e.t6=Fp.content,e.t7=Se,e.t8=_n,e.t9=Fp.textContainer,e.next=19,Promise.all(s.map(function(){var e=r(t().mark((function e(r){var a,o,s,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.title,o=r.name,s=r.compute,u="",a){e.next=4;break}return e.abrupt("return",null);case 4:if("Источник"!==a){e.next=6;break}return e.abrupt("return",null);case 6:if("Описание"!==a){e.next=8;break}return e.abrupt("return",null);case 8:if("Название ЖК"!==a){e.next=10;break}return e.abrupt("return",null);case 10:if(o&&(u=S.get(n.data,o),u=Array.isArray(u)?u.join(", "):u),!s){e.next=16;break}return e.next=14,s(n.data,i);case 14:u=e.sent,u=Array.isArray(u)?u.join(", "):u;case 16:if(u){e.next=18;break}return e.abrupt("return",null);case 18:return e.abrupt("return",Se(Ae,{children:Se(_n,{style:Fp.inline,children:[Se(gn,{style:{fontSize:12,fontWeight:"normal"},children:[a,":",hn.nbsp]}),Se(gn,{style:{fontSize:12,fontWeight:"bold"},children:u})]})}));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 19:return e.t10=e.sent,e.t11=!!l&&Se(_n,{style:Fp.inline,children:[Se(gn,{style:{fontSize:12,fontWeight:"normal"},children:["Цена (Аренда):",hn.nbsp]}),Se(gn,{style:{fontSize:12,fontWeight:"bold"},children:l})]}),e.t12=!!c&&Se(_n,{style:Fp.inline,children:[Se(gn,{style:{fontSize:12,fontWeight:"normal"},children:["Цена (Продажа):",hn.nbsp]}),Se(gn,{style:{fontSize:12,fontWeight:"bold"},children:c})]}),e.t13=[e.t10,e.t11,e.t12],e.t14={style:e.t9,children:e.t13},e.t15=(0,e.t7)(e.t8,e.t14),e.t16=n.images[0]&&Se(_n,{style:Fp.imageContainer,children:Se(kn,{style:Fp.image,src:n.images[0]})}),e.t17=Se(_n,{style:Fp.stretchContainer}),e.t18=[e.t15,e.t16,e.t17],e.t19={style:e.t6,children:e.t18},e.t20=(0,e.t4)(e.t5,e.t19),e.t21=Se(gn,{style:Fp.apartmentNumber,fixed:!0,children:"Объект №".concat(n.data.index)}),e.t22=[e.t3,e.t20,e.t21],e.t23={size:"A4",style:e.t2,children:e.t22},e.abrupt("return",(0,e.t0)(e.t1,e.t23));case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 16:return e.t3=e.sent,e.t4={children:e.t3},e.abrupt("return",(0,e.t1)(e.t2,e.t4));case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=6,o();case 6:return s=e.sent,e.next=9,vn(s).toBlob();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ip=$l()((function(e){return{root:{display:"flex",alignItems:"center",justifyContent:"stretch",padding:e.spacing(1),marginBottom:e.spacing(1),gap:e.spacing(1)},stretch:{flex:2}}})),Mp=[{action:"pdf-action",isDisabled:function(e){return!e.length},label:"Скачать PDF"},{action:"excel-action",isDisabled:function(e){return!e.length},label:"Скачать Excel"},{action:"telegraph-action",isDisabled:function(e){return!e.length},isVisible:function(){return!1},label:"Опубликовать в Telegraph"}],jp=function(e){var n=e.payload,i=tp({payload:n,mode:"bid"}),a=Ip().classes,o=dn().loading,s=cn().selectedRows,u=Gt(s),l=pn({columns:Sd,storageKey:"apartment_columns"}).columns,c=we.useMemo((function(){return l.filter((function(e){return e.type!==dt.Action}))}),[l]),d=wn({large:!0,title:"Предпросмотр",canCancel:!1}),p=function(e){var n=e.payload;return function(){var e=r(t().mark((function e(i){var a,o,s,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.apartment_images||[],e.next=3,Promise.all(a.map(function(){var e=r(t().mark((function e(n){var r,a,o,s,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.appwriteService.getImageURL(n);case 2:return r=e.sent,e.next=5,pu(r,n,"№".concat(i.index));case 5:if(!(a=e.sent)){e.next=12;break}return e.next=9,Cp(a);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=a;case 13:if(!(a=e.t0)){e.next=26;break}return e.next=17,fetch(a).then((function(e){return e.blob()}));case 17:return o=e.sent,URL.revokeObjectURL(a),e.next=21,Fl.appwriteService.uploadBlob(o,"__DANGEROUS_WILL_BE_REMOVED_TELEGRAPH__.png");case 21:return s=e.sent,e.next=24,Fl.appwriteService.getFileURL(s);case 24:return u=e.sent,e.abrupt("return",u);case 26:return e.abrupt("return",Fl.appwriteService.getFileURL(n));case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return o=e.sent,s="🔥 ",i.prodazha&&!i.arenda&&(s+="Продажа! "),i.arenda&&!i.prodazha&&(s+="Аренда! "),i.zagolovok&&(s+="".concat(i.zagolovok," ")),e.t0=Fl.publishService,e.t1=s,e.next=12,zp(i,o,n);case 12:return e.t2=e.sent,e.next=15,e.t0.publishTelegraph.call(e.t0,e.t1,e.t2);case 15:return u=e.sent,console.log({title:s,result:u}),e.abrupt("return",u.response);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}({payload:n}),h=function(e){var n=e.title,i=e.payload;return function(){var e=r(t().mark((function e(a){var o,s,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(a.map(function(){var e=r(t().mark((function e(n){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.apartment_images||[],e.next=3,Promise.all(i.map(function(){var e=r(t().mark((function e(n,r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===r){e.next=2;break}return e.abrupt("return",null);case 2:return e.abrupt("return",Fl.appwriteService.getImageURL(n));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 3:return a=e.sent,e.abrupt("return",{data:n,images:a.filter((function(e){return e}))});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return o=e.sent,e.next=5,Lp(o,i);case 5:s=e.sent,u=URL.createObjectURL(s),Fl.routerService.subscribeLeave((function(){return URL.revokeObjectURL(u)})),zt(u,"".concat(n||f().format("DD/MM/YYYY HH:mm"),".pdf"));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}({title:n.zagolovok,payload:n}),y=nt({history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),v=y.handleLoadStart,b=y.handleLoadEnd,_=Ve(function(){var e=r(t().mark((function e(n){var r,i,a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],i=m(n.filter((function(e){return e.zagolovok}))),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=15;break}return o=a.value,e.t0=r,e.t1=o.zagolovok,e.next=10,p(o);case 10:e.t2=e.sent,e.t3={label:e.t1,link:e.t2},e.t0.push.call(e.t0,e.t3);case 13:e.next=4;break;case 15:e.next=20;break;case 17:e.prev=17,e.t4=e.catch(2),i.e(e.t4);case 20:return e.prev=20,i.f(),e.finish(20);case 23:return s=r.filter((function(e){return e.link})).map((function(e){var t=e.label,n=e.link;return"".concat(t,"\n").concat(n,"\n")})).join("\n"),e.next=26,d({value:s}).toPromise();case 26:return Sn(s),e.next=29,Fl.alertService.notify("Сообщение скопировано в буфер обмена!");case 29:case"end":return e.stop()}}),e,null,[[2,17,20,23]])})));return function(t){return e.apply(this,arguments)}}(),{onLoadStart:v,onLoadEnd:b,fallback:Fl.errorService.handleGlobalError}),k=_.execute,g=Ve(function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onLoadStart:v,onLoadEnd:b,fallback:Fl.errorService.handleGlobalError}),x=g.execute,w=mn(function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,np({handler:function(){return r},columns:c,payload:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),S=function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("telegraph-action"!==n){e.next=3;break}return e.next=3,k(u.current);case 3:if("pdf-action"!==n){e.next=6;break}return e.next=6,x(u.current);case 6:if("excel-action"!==n){e.next=9;break}return e.next=9,w(u.current);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Se(fn,{className:a.root,children:[Se(Je,{className:a.stretch,fontWeight:"bold",children:"Подходящие объекты"}),Se(xt,{variant:"outlined",onClick:function(){return i(n.id)},children:"Указать критерии"}),Se(Dt,{disabled:o,payload:s,options:Mp,onAction:S})]})},Bp=function(e){var t=e.fieldData,n=e.payload,r=Gt(t),i=Be($d.reloadSubject),a=at(t);we.useEffect((function(){return a.subscribe((function(){i.next()}))}),[]);var s=zn(),u=df({payload:n});we.useEffect((function(){return s.subscribe((function(e){u(e.$id)}))}),[]);var l=pn({storageKey:"apartment_columns",columns:kp}).columns,c=we.useCallback((function(){var e=r.current,t=jd(e),i=$d.getFields(n.id);i.length&&Object.keys(t).forEach((function(t){i.includes(t)||(e[t]=void 0)}));var a=dp({system_metro:e.system_metro,system_rajon:e.system_rajon,system_mahallya:e.system_mahallya,system_rent_price_ot:e.system_rent_price_ot,system_rent_price_do:e.system_rent_price_do,system_rent_kom_price_ot:e.system_rent_kom_price_ot,system_rent_kom_price_do:e.system_rent_kom_price_do,system_prod_price_ot:e.system_prod_price_ot,system_prod_price_do:e.system_prod_price_do,system_prod_kom_price_ot:e.system_prod_kom_price_ot,system_prod_kom_price_do:e.system_prod_kom_price_do});return Fl.loggerService.log("bid_card_fields systemData",{systemData:a}),Fl.loggerService.log("bid_card_fields filterData",{filterData:t}),o(o({},t),a)}),[]);return Se(qe,{sx:{pointerEvents:"all",height:"max(60vh, 350px)",mb:5},children:Se(Vn,{withLoader:!0,withInitialLoader:!0,reloadSubject:i,selectionMode:ht.Multiple,AfterOperationList:jp,handler:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(t=Fl.apartmentViewService).paginate.apply(t,[o(o({},c()),{},{_accessLevel:5,_mode:"audit"})].concat(r))},isRowDisabled:function(e){return e.system_access_level>n.accessLevel},onRowClick:function(e){return s.next(e)},columns:l,payload:function(){return o(o({},n),{},{zagolovok:t.zagolovok})}})})},Dp=function(){return ct(Fl.apartmentViewService.paginate,{onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},fallback:Fl.errorService.handleGlobalError})};Me.createLoader(24);var Rp=[{type:a.Fragment,isVisible:function(e){return!e.kontakt||!!Xe(e.kontakt,"Физическое лицо")},fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",columns:"6",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Основная информация"})}},{type:a.Combo,outlined:!1,name:"kontakt",title:"Контакт",itemList:["Физическое лицо","Юридическое лицо"]},{type:a.Text,outlined:!1,name:"fio",title:"Ф.И.О."},{type:a.Text,description:"Основной",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon",title:"Телефон"},{type:a.Combo,outlined:!1,name:"tip_klienta",title:"Тип клиента",itemList:["Собственник","Доверенное лицо","Риелтор","Информатор","Застройщик"]},{type:a.Combo,outlined:!1,name:"status_klienta",title:"Статус клиента",itemList:["VIP-клиент","Клиент","Постоянный клиент","Специальный клиент","Черный список"]},{type:a.Combo,outlined:!1,name:"loyalnost_klienta",title:"Лояльность клиента",itemList:["Высокая","Средняя","Низкая"]},{type:a.Text,outlined:!1,name:"email",title:"Email"},{type:a.Fragment,isVisible:function(){var e=!0;return e=(e=e&&!Fl.routerService.location.pathname.includes("bid_view"))&&!Fl.routerService.location.pathname.includes("bid_edit")},fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"subtitle2",fontWeight:"bold",sx:{textDecoration:"underline",mt:2,mb:1},children:"Кадастр"})}},{type:a.Text,outlined:!1,name:"kadastrovyj-nomer_obekta",title:"Кадастровый номер объекта"},{type:a.Text,outlined:!1,name:"kadastrovyj-nomer_zemli",title:"Кадастровый номер земли"}]}]},{type:a.Group,fieldBottomMargin:"0",fieldRightMargin:"0",columns:"6",fields:[{type:a.Paper,fieldBottomMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Паспортные данные"})}},{type:a.Text,outlined:!1,name:"seriya-i-nomer_pasporta",title:"Серия и номер паспорта"},{type:a.Combo,outlined:!1,name:"pol",title:"Пол",itemList:["Мужской","Женский"]},{type:a.Text,outlined:!1,name:"pinfl",title:"ПИНФЛ"},{type:a.Text,outlined:!1,name:"inn",title:"ИНН"}]}]}]},{type:a.Fragment,isVisible:function(e){return!!Xe(e.kontakt,"Юридическое лицо")},fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",columns:"6",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Основная информация"})}},{type:a.Combo,outlined:!1,name:"kontakt",title:"Контакт",itemList:["Физическое лицо","Юридическое лицо"]},{type:a.Text,outlined:!1,name:"naimenovanie_organizaczii",title:"Наименование организации"},{type:a.Text,outlined:!1,name:"fio",title:"Ф.И.О."},{type:a.Text,description:"Основной",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon",title:"Телефон"},{type:a.Combo,outlined:!1,name:"tip_klienta",title:"Тип клиента",itemList:["Собственник","Доверенное лицо","Риелтор","Информатор","Застройщик"]},{type:a.Combo,outlined:!1,name:"status_klienta",title:"Статус клиента",itemList:["VIP-клиент","Клиент","Постоянный клиент","Специальный клиент","Черный список"]},{type:a.Combo,outlined:!1,name:"loyalnost_klienta",title:"Лояльность клиента",itemList:["Высокая","Средняя","Низкая"]},{type:a.Text,outlined:!1,name:"email",title:"Email"},{type:a.Fragment,isVisible:function(){var e=!0;return e=(e=e&&!Fl.routerService.location.pathname.includes("bid_view"))&&!Fl.routerService.location.pathname.includes("bid_edit")},fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"subtitle2",fontWeight:"bold",sx:{textDecoration:"underline",mt:2,mb:1},children:"Кадастр"})}},{type:a.Text,outlined:!1,name:"kadastrovyj-nomer_obekta",title:"Кадастровый номер объекта"},{type:a.Text,outlined:!1,name:"kadastrovyj-nomer_zemli",title:"Кадастровый номер земли"}]}]},{type:a.Group,fieldBottomMargin:"0",fieldRightMargin:"0",columns:"6",fields:[{type:a.Paper,fieldBottomMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Паспортные данные"})}},{type:a.Text,outlined:!1,name:"seriya-i-nomer_pasporta",title:"Серия и номер паспорта"},{type:a.Combo,outlined:!1,name:"pol",title:"Пол",itemList:["Мужской","Женский"]},{type:a.Text,outlined:!1,name:"kem_vydan",title:"Кем выдан"},{type:a.Text,outlined:!1,name:"pinfl",title:"ПИНФЛ"},{type:a.Text,outlined:!1,name:"inn",title:"ИНН"},{type:a.Combo,outlined:!1,name:"osnovanie-deyatelnosti-dannogo_licza",title:"Основание деятельности данного лица",itemList:["На основании устава","По доверенности"]}]}]}]}];window.contact_filters=Rp;var qp,Pp,Ep,Np,Op,Up,Hp,Wp,$p,Gp=function(){return ct(Fl.contactViewService.paginate,{onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},fallback:Fl.errorService.handleGlobalError})},Yp=[{type:a.Box,noBaseline:!0,sx:{display:"grid",gridTemplateColumns:"auto auto 1fr auto","& > .MuiGrid-root":{minWidth:"275px"},minWidth:"calc(275px * 3)",mt:-1},fields:[{type:a.Choose,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",choose:(Pp=r(t().mark((function e(n,r){var a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.pickUser(n.system_created_by?[n.system_created_by]:[]),e.next=3,r.userResultSubject.toPromise();case 3:if(!(a=e.sent)||!a.length){e.next=7;break}return o=i(a,1),s=o[0],e.abrupt("return",s);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)}))),function(e,t){return Pp.apply(this,arguments)}),tr:(qp=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.userViewService.tryRead(n);case 2:return r=e.sent,e.abrupt("return",[null==r?void 0:r.last_name,null==r?void 0:r.first_name,null==r?void 0:r.middle_name].filter((function(e){return e})).join(" ")||(null==r?void 0:r.$id)||"");case 4:case"end":return e.stop()}}),e)}))),function(e){return qp.apply(this,arguments)}),name:"system_created_by",title:"",placeholder:"Создал"},{type:a.Combo,fieldBottomMargin:"1",fieldRightMargin:"1",outlined:!1,name:"tip_klienta",title:"",placeholder:"Тип клиента",itemList:["Собственник","Доверенное лицо","Риелтор","Информатор","Застройщик"]},{type:a.Div},{type:a.Text,fieldRightMargin:"1",fieldBottomMargin:"0",inputFormatterTemplate:"0000000000",inputFormatterAllowed:/^[0-9]/,name:"index",title:"",leadingIcon:function(){return Se(qe,{sx:{height:20,width:20,display:"flex",alignItems:"center",justifyContent:"center"},children:Se(Je,{textTransform:"lowercase",variant:"caption",children:"№"})})},placeholder:"",trailingIcon:function(){return Se(An,{sx:{opacity:.5}})},trailingIconClick:function(e,t,n){e&&n("")}}]}],Kp=function(){var e=dn(),t=e.filterData,n=e.handleFilter,r=e.payload,i=e.loading,a=Sc({payload:r}),s=a.pickData,u=a.render,l=a.resultSubject,c=Jp({payload:r}),d=c.pickData,p=c.render,m=c.resultSubject;return Se(qe,{sx:{mb:1},children:[Se(Tn,{sx:{height:"100%",minHeight:48},hideOverflowY:!0,children:Se(qe,{sx:{display:"flex",alignItems:"center",justifyContent:"stretch",pt:1,pb:1},children:Se(st,{handler:t,fields:Yp,readonly:i,change:function(e,t){t||n(e)},payload:function(){return o(o({},r),{},{pickUser:s,userResultSubject:l,pickContact:d,contactResultSubject:m})},fieldDebounce:da})})}),p(),u()]})},Xp=[{type:dt.Compute,field:"fio",compute:function(e){return e.fio||""},headerName:"Ф.И.О. Клиента",width:function(){return 200}},{type:dt.Compute,field:"tip_klienta",compute:function(e){return e.tip_klienta||""},headerName:"Тип клиента",width:function(){return 200}},{type:dt.Compute,field:"status_klienta",compute:function(e){return e.status_klienta||""},headerName:"Статус клиента",width:function(){return 200}},{type:dt.Compute,sortable:!1,field:"status",headerName:"Статус сделки",compute:(Ep=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,e.next=3,Fl.dealViewService.readStatusByContactId(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),function(e){return Ep.apply(this,arguments)}),width:function(){return 150}}],Jp=function(e){var t=e.payload,n=Gp(),r=Be(),i=mt({title:"Выбор контакта",AfterTitle:function(e){var t=e.onClose;return Se(We,{size:"small",onClick:t,children:Se(it,{})})},withSearch:!0,slots:{FilterListSlot:Cn},noInitialFilters:!0,withLoader:!0,fetchDebounce:da,reloadSubject:Fl.userViewService.reloadSubject,selectionMode:ht.Single,AfterOperationList:Kp,onSubmit:function(e){return r.next(e),!0},filterLabel:"Выбрать контакт",filters:Rp,payload:t,columns:Xp,handler:n}),a=i.pickData,o=i.render,s=i.open;return{pickData:a,render:o,resultSubject:r,open:s}},Zp=[{type:a.Box,noBaseline:!0,sx:{display:"grid",gridTemplateColumns:"auto auto 1fr auto","& > .MuiGrid-root":{minWidth:"275px"},minWidth:"calc(275px * 3)",mt:-1},fields:[{type:a.Choose,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",choose:(Hp=r(t().mark((function e(n,r){var a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.pickUser(n.system_created_by?[n.system_created_by]:[]),e.next=3,r.userResultSubject.toPromise();case 3:if(!(a=e.sent)||!a.length){e.next=7;break}return o=i(a,1),s=o[0],e.abrupt("return",s);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)}))),function(e,t){return Hp.apply(this,arguments)}),tr:(Up=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.userViewService.tryRead(n);case 2:return r=e.sent,e.abrupt("return",[null==r?void 0:r.last_name,null==r?void 0:r.first_name,null==r?void 0:r.middle_name].filter((function(e){return e})).join(" ")||(null==r?void 0:r.$id)||"");case 4:case"end":return e.stop()}}),e)}))),function(e){return Up.apply(this,arguments)}),name:"system_created_by",title:"",placeholder:"Создал"},{type:a.Choose,sx:{minWidth:"100% !important"},fieldBottomMargin:"0",fieldRightMargin:"3",columns:"4",choose:(Op=r(t().mark((function e(n,r){var a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.pickContact(n.contact_id?[n.contact_id]:[]),e.next=3,r.contactResultSubject.toPromise();case 3:if(!(a=e.sent)||!a.length){e.next=7;break}return o=i(a,1),s=o[0],e.abrupt("return",s);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)}))),function(e,t){return Op.apply(this,arguments)}),tr:(Np=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.contactViewService.tryRead(n);case 2:return r=e.sent,e.abrupt("return",(null==r?void 0:r.fio)||(null==r?void 0:r.id)||"");case 4:case"end":return e.stop()}}),e)}))),function(e){return Np.apply(this,arguments)}),name:"contact_id",title:"",placeholder:"Владелец"},{type:a.Div},{type:a.Text,fieldRightMargin:"1",fieldBottomMargin:"0",inputFormatterTemplate:"0000000000",inputFormatterAllowed:/^[0-9]/,name:"index",title:"",leadingIcon:function(){return Se(qe,{sx:{height:20,width:20,display:"flex",alignItems:"center",justifyContent:"center"},children:Se(Je,{textTransform:"lowercase",variant:"caption",children:"№"})})},placeholder:"",trailingIcon:function(){return Se(An,{sx:{opacity:.5}})},trailingIconClick:function(e,t,n){e&&n("")}}]}],Qp=function(){var e=dn(),t=e.filterData,n=e.handleFilter,r=e.payload,i=e.loading,a=Sc({payload:r}),s=a.pickData,u=a.render,l=a.resultSubject,c=Jp({payload:r}),d=c.pickData,p=c.render,m=c.resultSubject;return Se(qe,{sx:{mb:1},children:[Se(Tn,{sx:{height:"100%",minHeight:48},hideOverflowY:!0,children:Se(qe,{sx:{display:"flex",alignItems:"center",justifyContent:"stretch",pt:1,pb:1},children:Se(st,{handler:t,fields:Zp,readonly:i,change:function(e,t){t||n(e)},payload:function(){return o(o({},r),{},{pickUser:s,userResultSubject:l,pickContact:d,contactResultSubject:m})},fieldDebounce:da})})}),p(),u()]})},em=function(e){var t=e.payload,n=e.features,r=Dp(),i=Be(),a=pn({storageKey:"apartment_columns",columns:Sd}).columns,o=mt({title:"Выбор объекта",AfterTitle:function(e){var t=e.onClose;return Se(We,{size:"small",onClick:t,children:Se(it,{})})},withSearch:!0,withLoader:!0,withSingleChip:!0,noInitialFilters:!0,fetchDebounce:da,reloadSubject:Fl.userViewService.reloadSubject,selectionMode:ht.Single,onSubmit:function(e){return i.next(e),!0},AfterOperationList:Qp,filterLabel:"Выбрать объект недвижимости",filters:Hd,columns:a,handler:r,payload:t,features:n,chips:zd}),s=o.pickData,u=o.render,l=o.open;return{pickData:s,render:u,resultSubject:i,open:l}},tm=[{type:a.Group,style:{minWidth:540},fields:[{type:a.Combo,title:"Тип сделки",isInvalid:function(e){return e.deal_type?null:"Укажите тип сделки"},name:"deal_type",map:function(e,t){var n=t.data,r=n.prod_czena_ot,i=n.prod_startovaya_czena_ot,a=void 0===i?r:i,o=n.prod_czena_do,s=n.prod_startovaya_czena_do,u=void 0===s?o:s,l=n.prod_kom_czena_ot,c=n.prod_kom_startovaya_czena_ot,d=void 0===c?l:c,p=n.prod_kom_czena_do,m=n.prod_kom_startovaya_czena_do,f=void 0===m?p:m,h=n.rent_czena_ot,y=n.rent_startovaya_czena_ot,v=void 0===y?h:y,b=n.rent_czena_do,_=n.rent_startovaya_czena_do,k=void 0===_?b:_,g=n.rent_kom_czena_ot,x=n.rent_kom_startovaya_czena_ot,w=void 0===x?g:x,z=n.rent_kom_czena_do,V=n.rent_kom_startovaya_czena_do,A=void 0===V?z:V,T=n.prod_czena_valyuta,C=void 0===T?"usd":T,F=n.rent_czena_valyuta,L=void 0===F?"usd":F;return e.deal_type&&"Продажа"===e.deal_type[0]&&(S.set(e,"price_ot",a||d),S.set(e,"price_do",u||f),S.set(e,"unit",[C||"usd"])),e.deal_type&&"Аренда"===e.deal_type[0]&&(S.set(e,"price_ot",v||w),S.set(e,"price_do",k||A),S.set(e,"unit",[L||"usd"])),e},itemList:function(){return[].concat(No)}},{type:a.Box,isVisible:function(e){var t=e.deal_type,n=e.price_type;return!!t&&"range"===n},style:{display:"grid",gridTemplateColumns:"1fr 1fr 125px"},fields:[{type:a.Text,outlined:!1,placeholder:"Не указано",labelShrink:!0,name:"price_ot",title:"Цена От (Итог)"},{type:a.Text,outlined:!1,placeholder:"Не указано",labelShrink:!0,name:"price_do",title:"Цена До (Итог)"},{type:a.Combo,noDeselect:!0,fieldBottomMargin:"0",title:"Валюта",placeholder:"USD",itemList:["usd","uzs"],tr:function(e){return"uzs"===e?"SUM":"USD"},defaultValue:"usd",outlined:!1,name:"unit"}]},{type:a.Text,fieldBottomMargin:"1",placeholder:"Введите комментарий",inputRows:3,labelShrink:!0,name:"comment",title:"Комментарий"},{hidden:!0,type:a.Radio,fieldBottomMargin:"0",name:"price_type",radioValue:"unset",defaultValue:"unset",title:"Цена не указана"},{hidden:!0,type:a.Radio,fieldBottomMargin:"0",name:"price_type",radioValue:"range",title:"Промежуток"}]}],nm=[{type:a.Choose,fieldBottomMargin:"1",isInvalid:function(e){return e.target_apartment_id?null:"Укажите объект недвижимости"},choose:($p=r(t().mark((function e(n,r){var a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.pickApartment(n.target_apartment_id?[n.target_apartment_id]:[]),e.next=3,r.apartmentResultSubject.toPromise();case 3:if(!(a=e.sent)||!a.length){e.next=7;break}return o=i(a,1),s=o[0],e.abrupt("return",s);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)}))),function(e,t){return $p.apply(this,arguments)}),tr:(Wp=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.apartmentViewService.tryRead(n);case 2:return r=e.sent,e.abrupt("return",(null==r?void 0:r.zagolovok)||(null==r?void 0:r.$id)||"");case 4:case"end":return e.stop()}}),e)}))),function(e){return Wp.apply(this,arguments)}),name:"target_apartment_id",title:"Выберите объект",placeholder:"Не выбрано"},{type:a.Text,fieldBottomMargin:"1",placeholder:"Введите комментарий",inputRows:3,labelShrink:!0,name:"comment",title:"Комментарий"},{type:a.Radio,fieldBottomMargin:"0",title:"Закрытая сделка",name:"status",radioValue:"Закрытая сделка",defaultValue:"Закрытая сделка"},{type:a.Radio,fieldBottomMargin:"0",title:"Сделка сорвана",name:"status",radioValue:"Сделка сорвана"}],rm=[{action:"deal-end-action",isDisabled:function(e){return!e.activeItem},label:"Завершить сделку"}],im=$l()((function(e){return{row:{display:"grid",gridTemplateColumns:"1fr 1fr auto",alignItems:"flex-end"},input:{paddingRight:"4px",paddingBottom:"4px"},onlyInput:{maxWidth:"500px",width:"100%"},select:{margin:"0 5px"},checkbox:{}}})),am=new Set(["0","1","2","3","4","5","6","7","8","9","Backspace","ArrowLeft","ArrowRight"]),om=function(e){return am.has(e)},sm=function(e){var t=e.className,n=e.style,r=e.sx,i=e.value_ot,a=void 0===i?"":i,o=e.value_do,s=void 0===o?"":o,u=e.unit,l=void 0===u?"usd":u,c=e.title,d=e.readonly,p=e.onChange,m=Mn(),f=m.reloadTrigger,h=m.doReload,y=we.useMemo((function(){return function(e){return"uzs"===e?"uzs":"usd"}(l)}),[l]),v=at(d);we.useEffect((function(){return v.subscribe(h)}),[]);return Se(Ae,{children:[Se(Je,{sx:{mb:-2.5},variant:"caption",children:c}),Se("div",{}),Se("div",{}),Se(tn,{type:"number",defaultValue:a,value:d?a:void 0,className:t,style:n,sx:r,onKeyDown:function(e){om(e.key)||e.preventDefault()},onChange:function(e){var t=e.target;p({unit:y,value_do:s,value_ot:t.value})},variant:"standard",fullWidth:!0,InputProps:{startAdornment:Se(nn,{sx:{userSelect:"none",pointerEvents:"none"},position:"start",children:Se(qe,{sx:{height:20,width:20,display:"flex",alignItems:"center",justifyContent:"center"},children:Se(Je,{textTransform:"lowercase",variant:"caption",children:"От"})})})}},f),Se(tn,{type:"number",defaultValue:s,value:d?s:void 0,className:t,style:n,sx:r,onKeyDown:function(e){om(e.key)||e.preventDefault()},onChange:function(e){var t=e.target;p({unit:y,value_do:t.value,value_ot:a})},variant:"standard",fullWidth:!0,InputProps:{startAdornment:Se(nn,{sx:{userSelect:"none",pointerEvents:"none"},position:"start",children:Se(qe,{sx:{height:20,width:20,display:"flex",alignItems:"center",justifyContent:"center"},children:Se(Je,{textTransform:"lowercase",variant:"caption",children:"До"})})})}},f),Se(qe,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:55,width:55},children:Se(We,{size:"small",onClick:function(){"usd"===y&&p({value_ot:a,value_do:s,unit:"uzs"}),"uzs"===y&&p({value_ot:a,value_do:s,unit:"usd"})},children:["usd"===y&&Se(jn,{}),"uzs"===y&&Se(qe,{sx:{position:"relative",height:36,width:36},children:Se("span",{style:{fontWeight:"bold",position:"absolute",top:"50%",left:"50%",fontSize:"12px",transform:"translate(-50%, -50%)"},children:"SUM"})})]})})]})},um=function(e){var t=e.className,n=e.style,r=e.sx,i=e.title,a=e.readonly,o=e.value,s=void 0===o?"":o,u=e.unit,l=void 0===u?"%":u,c=e.onChange,d=Mn(),p=(d.reloadTrigger,d.doReload),m=we.useMemo((function(){return function(e){return"1"===e?"1":"%"}(l)}),[l]),f=at(a);we.useEffect((function(){return f.subscribe(p)}),[]);return Se(tn,{type:"number",label:i,className:t,style:n,sx:r,defaultValue:s,value:a?s:void 0,onKeyDown:function(e){om(e.key)||e.preventDefault()},onChange:function(e){var t=e.target;c({unit:m,value:t.value})},variant:"standard",fullWidth:!0,InputProps:{startAdornment:Se(nn,{sx:{userSelect:"none",cursor:"pointer"},onClick:function(){"1"===m&&c({unit:"%",value:s}),"%"===m&&c({unit:"1",value:s})},position:"start",children:["%"===m&&Se(Bn,{}),"1"===m&&Se(Dn,{})]})}})},lm={},cm=["komissiya_agenstva_unit","czena_sobstvennika_ot","czena_sobstvennika_do","startovaya_czena_valyuta","komissiya_menedzhera","komissiya_agenstva","komissiya_menedzhera_unit","startovaya_czena_ot","startovaya_czena_do","torg"],dm=function(e){var t=e.isViewMode,n=e.value,r=void 0===n?lm:n,a=e.title,s=e.prefix,u=e.readonly,l=e.onChange,c=im().classes,d=we.useCallback((function(){var e=Object.entries(r).map((function(e){var t=i(e,2),n=t[0],r=t[1];return[Qe(n,s),r]})).filter((function(e){var t=i(e,1)[0];return cm.includes(t)}));return Object.fromEntries(e)}),[r]),p=i(we.useState(d),2),m=p[0],f=p[1],h=we.useMemo((function(){return S.debounce(l,0)}),[]),y=Rt((function(){var e=Object.entries(m).map((function(e){var t=i(e,2),n=t[0],r=t[1];return[s+n,r]}));h(Object.fromEntries(e))}),[m]).resetWatcher;return Rt((function(){y(),f(d)}),[r]),we.useEffect((function(){return function(){h.flush()}}),[]),Se(Ae,t?{children:[Se(Je,{variant:"h6",fontWeight:"bold",children:a}),Se(sm,{title:"Стартовая цена",readonly:u,unit:m.startovaya_czena_valyuta,value_ot:m.startovaya_czena_ot,value_do:m.startovaya_czena_do,onChange:function(e){var t=e.unit,n=e.value_ot,r=e.value_do;return f((function(e){return o(o({},e),{},{startovaya_czena_valyuta:t,startovaya_czena_ot:n,startovaya_czena_do:r})}))},className:c.onlyInput})]}:{children:[Se(Je,{variant:"h6",fontWeight:"bold",children:a}),Se(qe,{className:c.row,children:Se(sm,{title:"Бюджет клиента",readonly:u,unit:m.startovaya_czena_valyuta,value_ot:m.czena_sobstvennika_ot,value_do:m.czena_sobstvennika_do,onChange:function(e){var t=e.unit,n=e.value_ot,r=e.value_do;return f((function(e){return o(o({},e),{},{startovaya_czena_valyuta:t,czena_sobstvennika_ot:n,czena_sobstvennika_do:r})}))},className:c.input})}),Se(qe,{className:c.row,children:Se(Rn,{className:c.checkbox,control:Se(Ee,{checked:m.torg}),onChange:function(){return f((function(e){return o(o({},e),{},{torg:!e.torg})}))},label:"Торг"})}),!t&&Se(qe,{className:c.row,children:[Se(um,{readonly:u,title:"Комиссия агенства",unit:m.komissiya_agenstva_unit,value:m.komissiya_agenstva,onChange:function(e){var t=e.unit,n=e.value;return f((function(e){return o(o({},e),{},{komissiya_agenstva_unit:t,komissiya_agenstva:n})}))},className:c.input}),Se(um,{readonly:u,title:"Комиссия менеджера",unit:m.komissiya_menedzhera_unit,value:m.komissiya_menedzhera,onChange:function(e){var t=e.unit,n=e.value;return f((function(e){return o(o({},e),{},{komissiya_menedzhera_unit:t,komissiya_menedzhera:n})}))},className:c.input})]})]})},pm=54,mm=$l()((function(e){return{root:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",overflow:"hidden",paddingBottom:"10px"},typogrphy:{padding:"10px"},container:{overflowX:"hidden",overflowY:"scroll",padding:e.spacing(1),flex:1},appBarRoot:{background:e.palette.primary.main,maxHeight:pm,height:pm,boxShadow:"unset",color:"#000"},tabsRoot:{minHeight:pm,height:pm,marginLeft:"0 !important",marginRight:"0 !important"},tabRoot:{minHeight:pm,height:pm,color:"#fff"},tabRootTransparent:{minHeight:pm,height:pm},tabSelected:{color:"#fff !important"},indicator:{height:6,background:"#0288d1"},indicatorTransparent:{height:6,background:e.palette.primary.main}}})),fm=function(e){var t=e.sx,n=e.withTransparentHeader,r=e.withRentTab,a=void 0===r||r,s=e.withSellTab,u=void 0===s||s,l=e.withCommonRow,c=void 0===l||l,d=e.withCommerialRow,p=void 0===d||d,m=e.readonly,f=e.isViewMode,h=void 0!==f&&f,y=e.fieldData,v=e.onChange,b=void 0===v?function(){}:v,_=mm().classes,k=i(we.useState("rent"),2),g=k[0],x=k[1];return we.useEffect((function(){u?x("sell"):a&&x("rent")}),[a,u]),Se(fn,{className:_.root,sx:o(o({},t),{},{height:"100%"}),children:Se(qn,{value:g,children:[n&&Se(qe,{sx:{borderBottom:1,borderColor:"divider",pointerEvents:"all"},children:Se(Pn,{variant:"fullWidth",classes:{root:_.tabsRoot,indicator:_.indicatorTransparent},onChange:function(e,t){return x(t)},children:[u&&Se(En,{classes:{root:_.tabRootTransparent},label:"Покупка",value:"sell"}),a&&Se(En,{classes:{root:_.tabRootTransparent},label:"Аренда",value:"rent"})]})}),!n&&Se(Nn,{classes:{root:_.appBarRoot},position:"static",sx:{borderBottom:1,borderColor:"divider",pointerEvents:"all"},children:Se(Pn,{variant:"fullWidth",classes:{root:_.tabsRoot,indicator:_.indicator},onChange:function(e,t){return x(t)},children:[u&&Se(En,{classes:{root:_.tabRoot,selected:_.tabSelected},label:"Покупка",value:"sell"}),a&&Se(En,{classes:{root:_.tabRoot,selected:_.tabSelected},label:"Аренда",value:"rent"})]})}),u&&Se(On,{className:_.container,sx:{pointerEvents:m?"none":"unset"},value:"sell",children:[c&&Se(dm,{readonly:m,isViewMode:h,title:"Покупка",prefix:"prod_",value:y,onChange:b}),p&&Se(dm,{readonly:m,isViewMode:h,title:"Покупка ком.",prefix:"prod_kom_",value:y,onChange:b})]}),a&&Se(On,{className:_.container,sx:{pointerEvents:m?"none":"unset"},value:"rent",children:[c&&Se(dm,{readonly:m,isViewMode:h,title:"Аренда",prefix:"rent_",value:y,onChange:b}),p&&Se(dm,{readonly:m,isViewMode:h,title:"Аренда ком.",prefix:"rent_kom_",value:y,onChange:b})]})]})})},hm=[{type:a.Paper,isVisible:function(e,t){return!t.hideAutofindFlag},features:["hasResponsiblePermission"],fieldBottomMargin:"1",fieldRightMargin:"1",columns:"12",fields:[{type:a.Component,element:function(e){var n=e.id,a=e.payload,s=e.features,u=e._fieldData,l=i(we.useState(null),2),c=l[0],d=l[1],p=i(we.useState(null),2),m=p[0],f=p[1],h=we.useMemo((function(){return o(o({},c),{},{occupiedBy:m})}),[c,m]),y=em({payload:a,features:s}),v=y.pickData,b=y.render,_=y.resultSubject,k=Ve(r(t().mark((function e(){var r,i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fl.appwriteService.currentUser.$id,e.next=3,Fl.dealHistoryRequestService.readDealStateByBid(n,r);case 3:return i=e.sent,e.next=6,Fl.dealViewService.findOccupiedByTagetBidId(n);case 6:a=e.sent,d(i),f(a);case 9:case"end":return e.stop()}}),e)}))),{onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},fallback:Fl.errorService.handleGlobalError}),g=k.loading,x=k.execute,w=nt({history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),z=w.handleLoadStart,V=w.handleLoadEnd,A=tt({large:!0,title:"Завершение сделки",fields:nm,payload:function(){return o(o({},a),{},{pickApartment:v,apartmentResultSubject:_})},features:s}),T=tt({large:!0,title:"Начало сделки",fields:tm,payload:o({data:u},a),features:s});we.useEffect((function(){return Fl.dealHistoryViewService.createSubject.subscribe((function(e){e.bid_id===n&&x()}))}),[]),we.useEffect((function(){x()}),[]);var C,F,L,I,M=function(){var e=r(t().mark((function e(r){var i,a,o,s,u,l=arguments;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=l.length>1&&void 0!==l[1]?l[1]:[],a=l.length>2&&void 0!==l[2]?l[2]:"usd",o=l.length>3&&void 0!==l[3]?l[3]:"",s=!0,z(),e.prev=5,u=Fl.appwriteService.currentUser.$id,e.next=9,Fl.dealHistoryRequestService.commitBidDealBegin(n,u,r,i,a,o);case 9:return e.next=11,x();case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),Fl.alertService.notify(Xs(e.t0)),s=!1;case 17:return e.prev=17,V(s),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[5,13,17,20]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){T().then(function(){var e=r(t().mark((function e(n){var r,i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:if(r=n.deal_type?n.deal_type[0]:""){e.next=5;break}return e.abrupt("return");case 5:i=[],a="","range"===n.price_type&&(i=[n.price_ot,n.price_do].filter((function(e){return e})),a=n.unit?n.unit[0]:"usd"),M(r,i,a,n.comment);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},B=function(){var e=r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!0,z(),e.prev=2,i=Fl.appwriteService.currentUser.$id,e.next=6,Fl.dealHistoryRequestService.commitBidDealReassign(n,i);case 6:return e.next=8,x();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),r=!1;case 13:return e.prev=13,V(r),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=r(t().mark((function e(r,i,a){var o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=!0,z(),e.prev=2,e.next=5,Fl.dealRequestService.commitBidDealEnd(n,r,i,a);case 5:return e.next=7,x();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),o=!1;case 12:return e.prev=12,V(o),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])})));return function(t,n,r){return e.apply(this,arguments)}}(),R=function(e){"deal-end-action"===e&&A().then((function(e){e&&D(e.target_apartment_id,e.status,e.comment)}))};return Se(Ke,{style:{pointerEvents:"all"},direction:"column",children:[Se(Je,{variant:"body1",sx:{mt:-.5,mb:1,color:function(e){return e.palette.action.active},fontWeight:"bold"},children:"Сделка"}),Se(Ke,{direction:"column",gap:"16px",children:[Se(Ke,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[Se(Ne,{loading:g,Loader:function(){return Se(Ke,{direction:"row",gap:"16px",alignItems:"center",children:[Se(Fn,{variant:"circular",width:40,height:40}),Se(Ke,{children:[Se(Fn,{sx:{mb:1},variant:"rectangular",width:210,height:20}),Se(Fn,{variant:"rectangular",width:210,height:20})]})]})},payload:h,children:(I=r(t().mark((function e(n){var r,i,a,o,s,u,l,c;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.occupiedBy){e.next=2;break}return e.abrupt("return",Se(Je,{variant:"body1",children:["Сделка в статусе"," ",Se(Ln,{href:"#",onClick:function(){return ue("/deal")},children:n.occupiedBy.status})]}));case 2:if(null!=n&&n.activeItem){e.next=4;break}return e.abrupt("return",Se(Je,{variant:"body1",children:"Сделка не создана"}));case 4:return e.next=6,Fl.userViewService.read(n.activeItem.user_id);case 6:if(r=e.sent,i=r.first_name,a=void 0===i?"Не указано":i,o=r.user_role,s=r.avatar,!(u=void 0===s?null:s)){e.next=18;break}return e.next=15,Fl.appwriteService.getImageURL(u);case 15:e.t0=e.sent,e.next=19;break;case 18:e.t0="";case 19:return l=e.t0,e.next=22,Fl.dictService.getUserRoles();case 22:return c=e.sent,e.abrupt("return",Se(Ke,{direction:"row",gap:"16px",alignItems:"center",children:[Se(pt,{alt:a,src:l}),Se(Ke,{direction:"column",children:[Se(Je,{variant:"body1",children:a}),Se(Je,{variant:"caption",style:{fontSize:"14px"},children:null!=o&&o.length?S.get(c,o[0])||o[0]:"Не указано"})]})]}));case 24:case"end":return e.stop()}}),e)}))),function(e){return I.apply(this,arguments)})}),Se(Ke,{direction:"row",gap:1,alignItems:"center",children:[Se(Ne,{loading:g,Loader:function(){return Se(Fn,{variant:"rectangular",sx:{borderRadius:"4px"},width:100,height:35})},payload:h,children:(L=r(t().mark((function e(r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.occupiedBy){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,Fl.permissionRequestService.hasReassignDelayFlagByBidId(n);case 4:if(!e.sent){e.next=7;break}return e.abrupt("return",Se(xt,{disabled:!0,variant:"contained",children:"Сделка активна"}));case 7:if(null==r||!r.activeItem){e.next=11;break}return i=Fl.appwriteService.currentUser.$id,a=r.activeItem.user_id===i,e.abrupt("return",Se(xt,{disabled:a,onClick:B,variant:"contained",children:a?"Сделка создана":"Забрать сделку"}));case 11:return e.abrupt("return",Se(xt,{onClick:j,variant:"contained",children:"Создать сделку"}));case 12:case"end":return e.stop()}}),e)}))),function(e){return L.apply(this,arguments)})}),Se(Ne,{loading:g,Loader:function(){return Se(Fn,{variant:"circular",width:40,height:40})},payload:h,children:(F=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Se(Dt,{transparent:!0,options:rm,payload:n,onAction:R}));case 1:case"end":return e.stop()}}),e)}))),function(e){return F.apply(this,arguments)})})]})]}),Se(Ne,{loading:g,Loader:function(){return Se(In,{max:Number.POSITIVE_INFINITY,style:{marginRight:"auto"},children:[Se(Fn,{variant:"circular",width:28,height:28}),Se(Fn,{variant:"circular",width:28,height:28}),Se(Fn,{variant:"circular",width:28,height:28})]})},payload:h,children:(C=r(t().mark((function e(n){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=n&&null!==(i=n.reassign)&&void 0!==i&&i.length){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,Promise.all(n.reassign.filter((function(e,t,n){return n.findIndex((function(t){return t.user_id===e.user_id}))==t})).map(function(){var e=r(t().mark((function e(n){var r,i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.user_id,e.next=3,Fl.userViewService.tryRead(r);case 3:if(i=e.sent,a="",null==i||!i.avatar){e.next=9;break}return e.next=8,Fl.appwriteService.getImageURL(i.avatar);case 8:a=e.sent;case 9:return e.abrupt("return",Se(pt,{style:{height:"28px",width:"28px"},alt:null==i?void 0:i.email,src:a}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:return a=e.sent,e.abrupt("return",Se(In,{max:Number.POSITIVE_INFINITY,style:{marginRight:"auto"},children:a}));case 6:case"end":return e.stop()}}),e)}))),function(e){return C.apply(this,arguments)})})]}),b()]})}}]},{type:a.Paper,features:["hasResponsiblePermission"],fieldBottomMargin:"1",fieldRightMargin:"1",columns:"12",innerPadding:"0",fields:[{type:a.Component,element:function(e){var n,i=e.system_created_by,a=e.system_only_for_owner,o=e.system_allowance,s=hp().classes;return Se(Ke,{style:{pointerEvents:"all"},direction:"column",children:[Se(Je,{variant:"body1",sx:{m:2,color:function(e){return e.palette.action.active},fontWeight:"bold"},children:"Доступ"}),Se(Pt,{disablePadding:!0,dense:!0,children:Se(Ne,{deps:[a,o],children:(n=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],i&&n.push(i),o&&o.forEach((function(e){return n.push(e)})),n.length){e.next=5;break}return e.abrupt("return",Se(Je,{sx:{m:2,mt:-.5},children:"Все пользователи"}));case 5:return e.t0=Se,e.t1=Ae,e.next=9,Promise.all(n.filter((function(e,t,n){return n.indexOf(e)==t})).map(function(){var e=r(t().mark((function e(n,r){var o,u,l,d,p,m;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.userViewService.read(n);case 2:if(!(u=e.sent).avatar){e.next=9;break}return e.next=6,Fl.appwriteService.getImageURL(u.avatar);case 6:e.t0=e.sent,e.next=10;break;case 9:e.t0="";case 10:return l=e.t0,e.next=13,Fl.dictService.getUserRoles();case 13:return d=e.sent,p=[u.last_name,u.first_name,u.middle_name].filter((function(e){return e})).join(" "),m=null!==(o=u.user_role)&&void 0!==o&&o.length?S.get(d,u.user_role[0])||u.user_role[0]:"Не указано",e.abrupt("return",Se(Vt,{className:Pe(c({},s.listItemAccient,r%2==0)),children:[Se(At,{children:Se(pt,{src:l})}),Se(Ct,{primary:p,secondary:u.phone||m}),n===i&&Se(Ke,{gap:1,direction:"row",children:[Se(Qt,{label:"Создал заявку",color:"info"}),!!a&&Se(Qt,{label:"Эксклюзив",color:"warning"})]})]}));case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 9:return e.t2=e.sent,e.t3={children:e.t2},e.abrupt("return",(0,e.t0)(e.t1,e.t3));case 12:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})})})]})}}]},{type:a.Group,columns:"12",fieldRightMargin:"0",fieldBottomMargin:"0",fields:[{type:a.Paper,style:{height:"100%"},columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Основная информация"})}},{type:a.Text,isVisible:function(e){return Ql(e,"zagolovok")},outlined:!1,name:"zagolovok",title:"Заголовок",placeholder:"Введите текст"},{type:a.Text,isVisible:function(e){return Ql(e,"kategoriya_obekta")},outlined:!1,compute:function(e){return e.kategoriya_obekta||""},title:"Категория объекта"},{type:a.Text,isVisible:function(e){return!!Xe(e.kategoriya_obekta,"Жилая")||!!Xe(e.kategoriya_obekta,"Коммерческая")},outlined:!1,compute:function(e){return e.podkategoriya_obekta||"Не задано"},title:"Подкатегория объекта"},{type:a.Text,isVisible:function(e){return Ql(e,"arenda","prodazha")},outlined:!1,compute:function(e){var t=e.arenda,n=e.prodazha;return n&&t?"Покупка, Аренда":n?"Покупка":t?"Аренда":"Не задано"},title:"Тип сделки"},{type:a.Text,isVisible:function(e){return Ql(e,"strana")},outlined:!1,columns:"6",compute:function(e){return e.strana||""},title:"Страна"},{type:a.Text,isVisible:function(e){return Ql(e,"oblast")},outlined:!1,columns:"6",compute:function(e){return e.oblast||""},title:"Область"},{type:a.Text,isVisible:function(e){return Ql(e,"gorod")},outlined:!1,compute:function(e){return e.gorod||""},title:"Город"},{type:a.Text,isVisible:function(e){return Ql(e,"ulicza")},outlined:!1,compute:function(e){var t=e.ulicza,n=[t?t.toLowerCase().includes("улица")?t:"улица ".concat(t):null].filter((function(e){return e}));return n.length?n.flatMap((function(e){return e})).join(", "):"Не указан"},title:"Адрес"},{type:a.Text,isVisible:function(e){return Ql(e,"rajon")},outlined:!1,compute:function(e){return e.rajon||""},title:"Район"},{type:a.Text,isVisible:function(e){return Ql(e,"mahallya")},outlined:!1,compute:function(e){return e.mahallya||""},title:"Махалля"},{type:a.Text,isVisible:function(e){return Ql(e,"orientir")},outlined:!1,compute:function(e){return e.orientir||""},title:"Ориентир"},{type:a.Text,isVisible:function(e){return Ql(e,"metro")},outlined:!1,compute:function(e){return e.metro||""},title:"Метро"},{type:a.Fragment,isVisible:function(e){var t=!1;return t=t||Xe(e.podkategoriya_obekta,"Квартиры")},fields:[{type:a.Text,isVisible:function(e){return Ql(e,"nomer_doma")},features:["hasBidHouseNumberPermission"],columns:"6",outlined:!1,name:"nomer_doma",title:"№ дома"},{type:a.Text,isVisible:function(e){return Ql(e,"nomer_kvartiry")},features:["hasBidHouseNumberPermission"],columns:"6",outlined:!1,name:"nomer_kvartiry",title:"№ квартиры"}]},{type:a.Fragment,isVisible:function(e){var t=!1;return t=(t=(t=t||null!==e.kategoriya_obekta)||null!==e.podkategoriya_obekta)&&!Xe(e.podkategoriya_obekta,"Квартиры")},fields:[{type:a.Text,isVisible:function(e){return Ql(e,"nomer_doma")},features:["hasBidHouseNumberPermission"],outlined:!1,name:"nomer_doma",title:"№ дома"}]},{type:a.Text,isVisible:function(e){return Ql(e,"istochnik")},outlined:!1,compute:function(e){return e.istochnik||""},title:"Источник"},{type:a.Text,isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.podkategoriya_obekta,"Квартиры"))&&Xe(e.kategoriya_obekta,"Коммерческая","Жилая"),te(t,Ql(e,"tip_nedvizhimosti"))},outlined:!1,compute:function(e){return e.tip_nedvizhimosti||""},title:"Тип недвижимости"},{type:a.Text,isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.podkategoriya_obekta,"Квартиры"))&&Xe(e.kategoriya_obekta,"Коммерческая","Жилая"),te(t,Ql(e,"nazvanie_zhk"))},outlined:!1,compute:function(e){return e.nazvanie_zhk||""},title:"Название ЖК"},{type:a.Component,isVisible:function(e){return Ql(e,"tip_klienta")},fieldBottomMargin:"2",element:function(e){var n,i=e.contact_id;return Se(Ne,{payload:i,Loader:function(){return Se(tn,{fullWidth:!0,variant:"standard",label:"Тип клиента",InputProps:{readOnly:!0},value:"Загрузка"})},children:(n=r(t().mark((function e(){var n,r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.contactViewService.tryRead(i);case 2:return n=e.sent,r=(null==n?void 0:n.tip_klienta)||"",e.abrupt("return",Se(tn,{fullWidth:!0,variant:"standard",label:"Тип клиента",InputProps:{readOnly:!0},value:r}));case 5:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})})}}]},{type:a.Component,style:{height:"100%"},columns:"6",fieldRightMargin:"1",fieldBottomMargin:"1",element:function(e){var t=e.onChange,n=e._fieldData,r=e.features;return Se(fm,{withTransparentHeader:!0,readonly:!0,isViewMode:!r.includes("hasCommissionPermission"),onChange:t,fieldData:n})}}]},{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Fragment,isVisible:function(e){var t=!0;return t=(t=(t=t&&Xe(e.podkategoriya_obekta,"Квартиры"))&&Xe(e.kategoriya_obekta,"Жилая"))&&!Xe(e.kategoriya_obekta,"Коммерческая")},fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилая квартира)"})}},Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"kolichestvo_komnat_ot","kolichestvo_komnat_do")},name:"kolichestvo_komnat",title:"Количество комнат"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya")},title:"Состояние ремонта"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma")},title:"Тип строения"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"balkon","balkon_kvartira","balkon_doma")},title:"Балкон"},Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"etazh_ot","etazh_do")},name:"etazh",title:"Этаж"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.tip_planirovki].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"tip_planirovki")},title:"Тип планировки"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"lift_kommercziya","lift_kvartira","lift_dom")},title:"Лифт"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sanuzel","sanuzel_kvartira","sanuzel_doma")},title:"Санузел"},Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"etazhnost_ot","etazhnost_do")},name:"etazhnost",title:"Этажность"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"zhilaya_ploshhad_ot","zhilaya_ploshhad_do")},name:"zhilaya_ploshhad",title:"Жилая площадь М²"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"mebel","mebel_kvartira","mebel_dom")},title:"Мебель"},Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"vysota_potolkov_ot","vysota_potolkov_do")},name:"vysota_potolkov",title:"Высота потолков"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"obshhaya_ploshhad_ot","obshhaya_ploshhad_do")},name:"obshhaya_ploshhad",title:"Общая площадь М²"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"kolichestvo_spalen_ot","kolichestvo_spalen_do")},name:"kolichestvo_spalen",title:"Количество спален"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya")},title:"Система отопления"},Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"spalnya_sanuzel_ot","spalnya_sanuzel_do")},name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"gaz","gaz_dom","gaz_zemlya")},title:"Газ"},Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"rasstoyanie_do_metro_ot","rasstoyanie_do_metro_do")},name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){var t=e.vid_iz_okna,n=e.vid_iz_okna_dom;return[].concat(p(t||[]),p(n||[])).reduce((function(e,t){return e.includes(t)?e:[].concat(p(e),[t])}),[]).filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"vid_iz_okna","vid_iz_okna_dom")},title:"Вид из окна"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"parkovka","parkovka_kvartira","parkovka_zemlya")},title:"Парковка"},Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",isVisible:function(e){return Ql(e,"god_postrojki_ot","god_postrojki_do")},name:"god_postrojki",title:"Год постройки"})]},{type:a.Fragment,isVisible:function(e){var t=!0;return t=(t=(t=t&&Xe(e.podkategoriya_obekta,"Дома"))&&Xe(e.kategoriya_obekta,"Жилая"))&&!Xe(e.kategoriya_obekta,"Коммерческая")},fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилой дом)"})}},Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"kolichestvo_komnat_ot","kolichestvo_komnat_do")},name:"kolichestvo_komnat",title:"Количество комнат"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sostoyanie_doma].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sostoyanie_doma")},title:"Состояние дома"},Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",isVisible:function(e){return Ql(e,"god_postrojki_ot","god_postrojki_do")},name:"god_postrojki",title:"Год постройки"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma")},title:"Тип строения"},Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"etazhnost_ot","etazhnost_do")},name:"etazhnost",title:"Этажность"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"balkon","balkon_kvartira","balkon_doma")},title:"Балкон"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.tip_planirovki].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"tip_planirovki")},title:"Тип планировки"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.bassejn].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"bassejn")},title:"Бассейн"},Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"ploshhad_doma_ot","ploshhad_doma_do")},name:"ploshhad_doma",title:"Площадь дома М²"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sanuzel","sanuzel_kvartira","sanuzel_doma")},title:"Санузел"},Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"mashina_mesto_ot","mashina_mesto_do")},name:"mashina_mesto",title:"Машина-место"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"kolichestvo_spalen_ot","kolichestvo_spalen_do")},name:"kolichestvo_spalen",title:"Количество спален"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"kolichestvo_sotok_ot","kolichestvo_sotok_do")},name:"kolichestvo_sotok",title:"Количество соток"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.voda,e.voda_dom,e.voda_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"voda","voda_dom","voda_zemlya")},title:"Вода"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"lift_kommercziya","lift_kvartira","lift_dom")},title:"Лифт"},Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"spalnya_sanuzel_ot","spalnya_sanuzel_do")},name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya")},title:"Система отопления"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"mebel","mebel_kvartira","mebel_dom")},title:"Мебель"},Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"rasstoyanie_do_metro_ot","rasstoyanie_do_metro_do")},name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"gaz","gaz_dom","gaz_zemlya")},title:"Газ"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya")},title:"Система кондиционирования"},Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"vysota_potolkov_ot","vysota_potolkov_do")},name:"vysota_potolkov",title:"Высота потолков"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya")},title:"Электричество"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){var t=e.vid_iz_okna,n=e.vid_iz_okna_dom;return[].concat(p(t||[]),p(n||[])).reduce((function(e,t){return e.includes(t)?e:[].concat(p(e),[t])}),[]).filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"vid_iz_okna","vid_iz_okna_dom")},title:"Вид из окна"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.garazh].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"garazh")},title:"Гараж"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya")},title:"Канализация"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.raspolozhenie_doma].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"raspolozhenie_doma")},title:"Расположение дома"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya")},title:"Местоположение объекта"}]},{type:a.Fragment,isVisible:function(e){return(!Xe(e.podkategoriya_obekta,"Земля/Участок")||!Xe(e.kategoriya_obekta,"Коммерческая"))&&((!Xe(e.podkategoriya_obekta,"Дома")||!Xe(e.kategoriya_obekta,"Коммерческая"))&&((!Xe(e.podkategoriya_obekta,"Квартиры")||!Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.kategoriya_obekta,"Коммерческая")))},fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая недвижимость)"})}},Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"kolichestvo_komnat_ot","kolichestvo_komnat_do")},name:"kolichestvo_komnat",title:"Количество комнат"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sostoyanie_obekta,e["sostoyanie-obekta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sostoyanie_obekta","sostoyanie-obekta_zemlya")},title:"Состояние объекта"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya")},title:"Состояние ремонта"},Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"poleznaya_ploshhad_ot","poleznaya_ploshhad_do")},name:"poleznaya_ploshhad",title:"Полезная площадь М²"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"etazh_ot","etazh_do")},name:"etazh",title:"Этаж"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma")},title:"Тип строения"},Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"mashina_mesto_ot","mashina_mesto_do")},name:"mashina_mesto",title:"Машина-место"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"kolichestvo_sotok_ot","kolichestvo_sotok_do")},name:"kolichestvo_sotok",title:"Количество соток"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"etazhnost_ot","etazhnost_do")},name:"etazhnost",title:"Этажность"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"balkon","balkon_kvartira","balkon_doma")},title:"Балкон"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"parkovka","parkovka_kvartira","parkovka_zemlya")},title:"Парковка"},Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"vysota_potolkov_ot","vysota_potolkov_do")},name:"vysota_potolkov",title:"Высота потолков"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"obshhaya_ploshhad_ot","obshhaya_ploshhad_do")},name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sanuzel","sanuzel_kvartira","sanuzel_doma")},title:"Санузел"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"mebel","mebel_kvartira","mebel_dom")},title:"Мебель"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.voda,e.voda_dom,e.voda_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"voda","voda_dom","voda_zemlya")},title:"Вода"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"gaz","gaz_dom","gaz_zemlya")},title:"Газ"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"lift_kommercziya","lift_kvartira","lift_dom")},title:"Лифт"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya")},title:"Система отопления"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya")},title:"Электричество"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya")},title:"Канализация"},Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"rasstoyanie_do_metro_ot","rasstoyanie_do_metro_do")},name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya")},title:"Местоположение объекта"},Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",isVisible:function(e){return Ql(e,"god_postrojki_ot","god_postrojki_do")},name:"god_postrojki",title:"Год постройки"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya")},title:"Система кондиционирования"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.vid_liczenzii].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"vid_liczenzii")},title:"Вид лицензии"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.raspolozhenie_obekta].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"raspolozhenie_obekta")},title:"Расположение объекта"}]},{type:a.Fragment,isVisible:function(e){var t=!0;return t=(t=(t=t&&Xe(e.podkategoriya_obekta,"Земля/Участок"))&&Xe(e.kategoriya_obekta,"Жилая"))&&!Xe(e.kategoriya_obekta,"Коммерческая")},fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилая земля/участок)"})}},Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"kolichestvo_komnat_ot","kolichestvo_komnat_do")},name:"kolichestvo_komnat",title:"Количество комнат"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya")},title:"Назначение объекта"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.tip_zemli_uchastka].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"tip_zemli_uchastka")},title:"Тип земли/участка"},Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"poleznaya_ploshhad_ot","poleznaya_ploshhad_do")},name:"poleznaya_ploshhad",title:"Полезная площадь М²"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"etazh_ot","etazh_do")},name:"etazh",title:"Этаж"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sostoyanie_obekta,e["sostoyanie-obekta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sostoyanie_obekta","sostoyanie-obekta_zemlya")},title:"Состояние объекта"},Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"mashina_mesto_ot","mashina_mesto_do")},name:"mashina_mesto",title:"Машина-место"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"kolichestvo_sotok_ot","kolichestvo_sotok_do")},name:"kolichestvo_sotok",title:"Количество соток"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"etazhnost_ot","etazhnost_do")},name:"etazhnost",title:"Этажность"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya")},title:"Состояние ремонта"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"parkovka","parkovka_kvartira","parkovka_zemlya")},title:"Парковка"},Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"rasstoyanie_do_metro_ot","rasstoyanie_do_metro_do")},name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"obshhaya_ploshhad_ot","obshhaya_ploshhad_do")},name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.voda,e.voda_dom,e.voda_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"voda","voda_dom","voda_zemlya")},title:"Вода"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya")},title:"Местоположение объекта"},Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"rasstoyanie_do_goroda_ot","rasstoyanie_do_goroda_do")},name:"rasstoyanie_do_goroda",title:"Расстояние до города (м)"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya")},title:"Система отопления"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.podezdnye_puti].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"podezdnye_puti")},title:"Подъездные пути"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya")},title:"Система кондиционирования"},Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",isVisible:function(e){return Ql(e,"god_postrojki_ot","god_postrojki_do")},name:"god_postrojki",title:"Год постройки"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya")},title:"Электричество"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"gaz","gaz_dom","gaz_zemlya")},title:"Газ"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya")},title:"Канализация"}]},{type:a.Fragment,isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.podkategoriya_obekta,"Квартиры"))&&Q(te(Xe(e.kategoriya_obekta,"Коммерческая"),Xe(e.kategoriya_obekta,"Жилая")),te(Xe(e.kategoriya_obekta,"Коммерческая"),!Xe(e.kategoriya_obekta,"Жилая")))},fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая + Жилая квартира)"})}},Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"kolichestvo_komnat_ot","kolichestvo_komnat_do")},name:"kolichestvo_komnat",title:"Количество комнат"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya")},title:"Состояние ремонта"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya")},title:"Назначение объекта"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma")},title:"Тип строения"},Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"etazh_ot","etazh_do")},name:"etazh",title:"Этаж"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"balkon","balkon_kvartira","balkon_doma")},title:"Балкон"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.tip_planirovki].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"tip_planirovki")},title:"Тип планировки"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"lift_kommercziya","lift_kvartira","lift_dom")},title:"Лифт"},Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"etazhnost_ot","etazhnost_do")},name:"etazhnost",title:"Этажность"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",isVisible:function(e){return Ql(e,"god_postrojki_ot","god_postrojki_do")},name:"god_postrojki",title:"Год постройки"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"mashina_mesto_ot","mashina_mesto_do")},name:"mashina_mesto",title:"Машина-место"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sanuzel","sanuzel_kvartira","sanuzel_doma")},title:"Санузел"},Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"obshhaya_ploshhad_ot","obshhaya_ploshhad_do")},name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"parkovka","parkovka_kvartira","parkovka_zemlya")},title:"Парковка"},Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"zhilaya_ploshhad_ot","zhilaya_ploshhad_do")},name:"zhilaya_ploshhad",title:"Жилая площадь М²"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"mebel","mebel_kvartira","mebel_dom")},title:"Мебель"},Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"vysota_potolkov_ot","vysota_potolkov_do")},name:"vysota_potolkov",title:"Высота потолков"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"kolichestvo_spalen_ot","kolichestvo_spalen_do")},name:"kolichestvo_spalen",title:"Количество спален"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya")},title:"Система отопления"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){var t=e.vid_iz_okna,n=e.vid_iz_okna_dom;return[].concat(p(t||[]),p(n||[])).reduce((function(e,t){return e.includes(t)?e:[].concat(p(e),[t])}),[]).filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"vid_iz_okna","vid_iz_okna_dom")},title:"Вид из окна"},Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"spalnya_sanuzel_ot","spalnya_sanuzel_do")},name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"gaz","gaz_dom","gaz_zemlya")},title:"Газ"},Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"rasstoyanie_do_metro_ot","rasstoyanie_do_metro_do")},name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya")},title:"Система кондиционирования"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.raspolozhenie_obekta].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"raspolozhenie_obekta")},title:"Расположение объекта"}]},{type:a.Fragment,isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.podkategoriya_obekta,"Дома"))&&Q(te(Xe(e.kategoriya_obekta,"Коммерческая"),Xe(e.kategoriya_obekta,"Жилая")),te(Xe(e.kategoriya_obekta,"Коммерческая"),!Xe(e.kategoriya_obekta,"Жилая")))},fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческий + Жилой дом)"})}},Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"kolichestvo_komnat_ot","kolichestvo_komnat_do")},name:"kolichestvo_komnat",title:"Количество комнат"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sostoyanie_doma].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sostoyanie_doma")},title:"Состояние дома"},{type:a.Items,columns:"3",freeSolo:!0,outlined:!1,compute:function(e){return[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya")},title:"Местоположение объекта"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya")},title:"Назначение объекта"},Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"etazhnost_ot","etazhnost_do")},name:"etazhnost",title:"Этажность"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya")},title:"Состояние ремонта"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.raspolozhenie_obekta].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"raspolozhenie_obekta")},title:"Расположение объекта"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma")},title:"Тип строения"},Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"ploshhad_doma_ot","ploshhad_doma_do")},name:"ploshhad_doma",title:"Площадь дома М²"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.raspolozhenie_doma].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"raspolozhenie_doma")},title:"Расположение дома"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.tip_planirovki].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"tip_planirovki")},title:"Тип планировки"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.bassejn].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"bassejn")},title:"Бассейн"},Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"kolichestvo_sotok_ot","kolichestvo_sotok_do")},name:"kolichestvo_sotok",title:"Количество соток"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sanuzel","sanuzel_kvartira","sanuzel_doma")},title:"Санузел"},Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"mashina_mesto_ot","mashina_mesto_do")},name:"mashina_mesto",title:"Машина-место"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"kolichestvo_spalen_ot","kolichestvo_spalen_do")},name:"kolichestvo_spalen",title:"Количество спален"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.voda,e.voda_dom,e.voda_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"voda","voda_dom","voda_zemlya")},title:"Вода"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"lift_kommercziya","lift_kvartira","lift_dom")},title:"Лифт"},Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"spalnya_sanuzel_ot","spalnya_sanuzel_do")},name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya")},title:"Система отопления"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"mebel","mebel_kvartira","mebel_dom")},title:"Мебель"},Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"rasstoyanie_do_metro_ot","rasstoyanie_do_metro_do")},name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"gaz","gaz_dom","gaz_zemlya")},title:"Газ"},Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",isVisible:function(e){return Ql(e,"god_postrojki_ot","god_postrojki_do")},name:"god_postrojki",title:"Год постройки"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"vysota_potolkov_ot","vysota_potolkov_do")},name:"vysota_potolkov",title:"Высота потолков"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya")},title:"Электричество"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){var t=e.vid_iz_okna,n=e.vid_iz_okna_dom;return[].concat(p(t||[]),p(n||[])).reduce((function(e,t){return e.includes(t)?e:[].concat(p(e),[t])}),[]).filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"vid_iz_okna","vid_iz_okna_dom")},title:"Вид из окна"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.garazh].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"garazh")},title:"Гараж"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya")},title:"Канализация"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"balkon","balkon_kvartira","balkon_doma")},title:"Балкон"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya")},title:"Система кондиционирования"}]},{type:a.Fragment,isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.podkategoriya_obekta,"Земля/Участок"))&&Q(te(Xe(e.kategoriya_obekta,"Коммерческая"),Xe(e.kategoriya_obekta,"Жилая")),te(Xe(e.kategoriya_obekta,"Коммерческая"),!Xe(e.kategoriya_obekta,"Жилая")))},fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая + Жилая земля/участок)"})}},Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"kolichestvo_komnat_ot","kolichestvo_komnat_do")},name:"kolichestvo_komnat",title:"Количество комнат"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya")},title:"Назначение объекта"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.tip_zemli_uchastka].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"tip_zemli_uchastka")},title:"Тип земли/участка"},Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"poleznaya_ploshhad_ot","poleznaya_ploshhad_do")},name:"poleznaya_ploshhad",title:"Полезная площадь М²"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"etazh_ot","etazh_do")},name:"etazh",title:"Этаж"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sostoyanie_obekta,e["sostoyanie-obekta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sostoyanie_obekta","sostoyanie-obekta_zemlya")},title:"Состояние объекта"},Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"mashina_mesto_ot","mashina_mesto_do")},name:"mashina_mesto",title:"Машина-место"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"kolichestvo_sotok_ot","kolichestvo_sotok_do")},name:"kolichestvo_sotok",title:"Количество соток"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"etazhnost_ot","etazhnost_do")},name:"etazhnost",title:"Этажность"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya")},title:"Состояние ремонта"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"parkovka","parkovka_kvartira","parkovka_zemlya")},title:"Парковка"},Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"rasstoyanie_do_metro_ot","rasstoyanie_do_metro_do")},name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"obshhaya_ploshhad_ot","obshhaya_ploshhad_do")},name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.voda,e.voda_dom,e.voda_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"voda","voda_dom","voda_zemlya")},title:"Вода"},{type:a.Items,columns:"3",freeSolo:!0,outlined:!1,compute:function(e){return[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya")},title:"Местоположение объекта"},Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"rasstoyanie_do_goroda_ot","rasstoyanie_do_goroda_do")},name:"rasstoyanie_do_goroda",title:"Расстояние до города (м)"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya")},title:"Система отопления"},Pd({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",isVisible:function(e){return Ql(e,"god_postrojki_ot","god_postrojki_do")},name:"god_postrojki",title:"Год постройки"}),{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya")},title:"Электричество"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.podezdnye_puti].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"podezdnye_puti")},title:"Подъездные пути"},{type:a.Items,columns:"3",freeSolo:!0,outlined:!1,compute:function(e){return[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya")},title:"Система кондиционирования"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"gaz","gaz_dom","gaz_zemlya")},title:"Газ"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((function(e){return e})).flatMap((function(e){return e})).filter((function(e,t,n){return n.indexOf(e)===t}))},isVisible:function(e){return Ql(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya")},title:"Канализация"}]}]},{type:a.Paper,isVisible:function(e){return Ql(e,"vnutri_est","ryadom_est")},fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте"})}},{type:a.Component,fieldBottomMargin:"1",columns:"6",element:function(){return Se(Je,{children:"Внутри есть:"})}},{type:a.Component,fieldBottomMargin:"1",columns:"6",element:function(){return Se(Je,{children:"Рядом есть:"})}},{type:a.Component,columns:"6",isVisible:function(e){var t=e.vnutri_est;return!(null==t||!t.length)},element:function(e){var t=e.vnutri_est;return Se("div",{children:Se(qe,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",gap:1},children:null==t?void 0:t.map((function(e,t){return Se(Qt,{label:e},t)}))})})}},{type:a.Component,columns:"6",isVisible:function(e){var t=e.ryadom_est;return!(null==t||!t.length)},element:function(e){var t=e.ryadom_est;return Se("div",{children:Se(qe,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",gap:1},children:null==t?void 0:t.map((function(e,t){return Se(Qt,{label:e},t)}))})})}}]},{type:a.Paper,isVisible:function(e){return Ql(e,"ploshhad_gostinnoj_ot","ploshhad_gostinnoj_do","ploshhad_spalni_ot","ploshhad_spalni_do","ploshhad_holla_ot","ploshhad_holla_do","ploshhad_kuhni_ot","ploshhad_kuhni_do","ploshhad_sanuzla_ot","ploshhad_sanuzla_do","ploshhad_balkona_ot","ploshhad_balkona_do","ploshhad_terrasy_ot","ploshhad_terrasy_do","ploshhad_komnaty_ohrany_ot","ploshhad_komnaty_ohrany_do","ploshhad_gostevogo_doma_ot","ploshhad_gostevogo_doma_do","ploshhad_dopolnitelnoj_pristrojki_ot","ploshhad_dopolnitelnoj_pristrojki_do")},fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,sx:{mb:2},element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади"})}},{type:a.Fragment,isVisible:function(e){var t=!0;return t=(t=t&&Q(Xe(e.kategoriya_obekta,"Коммерческая"),Xe(e.kategoriya_obekta,"Жилая")))&&Xe(e.podkategoriya_obekta,"Квартиры")},fields:[Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"ploshhad_gostinnoj_ot","ploshhad_gostinnoj_do")},name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"ploshhad_spalni_ot","ploshhad_spalni_do")},name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"ploshhad_holla_ot","ploshhad_holla_do")},name:"ploshhad_holla",title:"Площадь холла М²"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"ploshhad_kuhni_ot","ploshhad_kuhni_do")},name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"ploshhad_sanuzla_ot","ploshhad_sanuzla_do")},name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"ploshhad_balkona_ot","ploshhad_balkona_do")},name:"ploshhad_balkona",title:"Площадь балкона М²"})]},{type:a.Fragment,isVisible:function(e){var t=!0;return t=(t=t&&Q(Xe(e.kategoriya_obekta,"Коммерческая"),Xe(e.kategoriya_obekta,"Жилая")))&&Xe(e.podkategoriya_obekta,"Дома")},fields:[Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"ploshhad_gostinnoj_ot","ploshhad_gostinnoj_do")},name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"ploshhad_spalni_ot","ploshhad_spalni_do")},name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"ploshhad_holla_ot","ploshhad_holla_do")},name:"ploshhad_holla",title:"Площадь холла М²"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"ploshhad_kuhni_ot","ploshhad_kuhni_do")},name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"ploshhad_sanuzla_ot","ploshhad_sanuzla_do")},name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"ploshhad_balkona_ot","ploshhad_balkona_do")},name:"ploshhad_balkona",title:"Площадь балкона М²"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"ploshhad_terrasy_ot","ploshhad_terrasy_do")},name:"ploshhad_terrasy",title:"Площадь террасы М²"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"ploshhad_komnaty_ohrany_ot","ploshhad_komnaty_ohrany_do")},name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"ploshhad_gostevogo_doma_ot","ploshhad_gostevogo_doma_do")},name:"ploshhad_gostevogo_doma",title:"Площадь гостевого дома М²"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"ploshhad_dopolnitelnoj_pristrojki_ot","ploshhad_dopolnitelnoj_pristrojki_do")},name:"ploshhad_dopolnitelnoj_pristrojki",title:"Площадь дополнительной пристройки М²"})]},{type:a.Fragment,isVisible:function(e){var t=!0;return t=(t=t&&Q(Xe(e.kategoriya_obekta,"Коммерческая"),Xe(e.kategoriya_obekta,"Жилая")))&&Xe(e.podkategoriya_obekta,"Земля/Участок")},fields:[Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"ploshhad_gostinnoj_ot","ploshhad_gostinnoj_do")},name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"ploshhad_spalni_ot","ploshhad_spalni_do")},name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"ploshhad_holla_ot","ploshhad_holla_do")},name:"ploshhad_holla",title:"Площадь холла М²"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"ploshhad_kuhni_ot","ploshhad_kuhni_do")},name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"ploshhad_sanuzla_ot","ploshhad_sanuzla_do")},name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"ploshhad_balkona_ot","ploshhad_balkona_do")},name:"ploshhad_balkona",title:"Площадь балкона М²"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"ploshhad_terrasy_ot","ploshhad_terrasy_do")},name:"ploshhad_terrasy",title:"Площадь террасы М²"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"ploshhad_komnaty_ohrany_ot","ploshhad_komnaty_ohrany_do")},name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"})]},{type:a.Fragment,isVisible:function(e){var t=!0;return t=(t=(t=(t=t&&Q(Xe(e.kategoriya_obekta,"Коммерческая")))&&!Xe(e.podkategoriya_obekta,"Квартиры"))&&!Xe(e.podkategoriya_obekta,"Дома"))&&!Xe(e.podkategoriya_obekta,"Земля/Участок")},fields:[Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"ploshhad_gostinnoj_ot","ploshhad_gostinnoj_do")},name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"ploshhad_spalni_ot","ploshhad_spalni_do")},name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"ploshhad_holla_ot","ploshhad_holla_do")},name:"ploshhad_holla",title:"Площадь холла М²"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"ploshhad_kuhni_ot","ploshhad_kuhni_do")},name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"ploshhad_sanuzla_ot","ploshhad_sanuzla_do")},name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"ploshhad_balkona_ot","ploshhad_balkona_do")},name:"ploshhad_balkona",title:"Площадь балкона М²"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"ploshhad_terrasy_ot","ploshhad_terrasy_do")},name:"ploshhad_terrasy",title:"Площадь террасы М²"}),Pd({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:function(e){return Ql(e,"ploshhad_komnaty_ohrany_ot","ploshhad_komnaty_ohrany_do")},name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"})]}]},{type:a.Paper,features:["hasDescriptionPermission"],fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,sx:{mb:2},element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Описание объекта"})}},{type:a.Text,sx:{pointerEvents:"all"},inputRows:8,outlined:!1,name:"opisanie",title:"Описание"}]},{type:a.Component,isVisible:function(e,t){return!t.hideAutofindFlag},fieldBottomMargin:"1",fieldRightMargin:"1",element:function(e){var t=e._fieldData,n=e.payload,r=e.features;return Se(Bp,{payload:n,features:r,fieldData:t})}}],ym=function(e,t){return e.some((function(e){return e.includes(t)}))},vm=function(e){var t;return(null===(t=bm.find((function(t){return(0,t.isActive)(e.location.pathname)})))||void 0===t?void 0:t.id)||"parameter"},bm=[{id:"contact",element:function(e){var t=e.history,n=e.payload,r=e.data;return Se(fp,{history:t,payload:n,children:Se(st,{outlinePaper:!0,readonly:!0,fields:Wc,handler:function(){return r},payload:function(){return o(o({},n),{},{hideAutofindFlag:!0})},features:n.permissions})})},isActive:function(e){return ym(["/bid/contact"],e)}},{id:"parameter",element:function(e){var t=e.history,n=e.payload,r=e.data;return Se(fp,{history:t,payload:n,children:Se(st,{outlinePaper:!0,readonly:!0,fields:hm,handler:function(){return r},payload:function(){return o(o({},n),{},{hideAutofindFlag:!0})},features:n.permissions})})},isActive:function(e){return console.log(e),ym(["/bid/parameter"],e)}},{id:"documents",element:function(e){var n,i,a=e.history,o=e.payload,s=e.data;return Se(fp,{history:a,payload:o,children:Se(fn,{sx:{p:1,mt:1},children:Se(Un,{disabled:!0,accept:"*",multiple:!0,items:s,tr:(i=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.appwriteService.tryReadFileName(n);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=n;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)}),fallback:Fl.errorService.handleGlobalError,onClick:(n=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.appwriteService.getFileURL(n);case 2:return r=e.sent,e.next=5,Fl.appwriteService.readFileName(n);case 5:i=e.sent,zt(r,i);case 7:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)}),onUpload:function(e){return Fl.appwriteService.uploadFile(e)}})})})},isActive:function(e){return ym(["/bid/documents"],e)}},{id:"service_comment",element:function(e){var n=e.history,a=e.payload,o=e.params.id,s=i(we.useState([]),2),u=s[0],l=s[1],c=Ve(r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.serviceCommentViewService.findByBidId(o);case 2:return n=e.sent,e.t0=l,e.next=6,Promise.all(n.map(function(){var e=r(t().mark((function e(n){var r,i,a,o,s,u,l;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.$id,i=n.user_id,a=n.file_id,o=n.comment,s=n.$createdAt,e.next=3,Fl.userViewService.tryRead(i);case 3:if(u=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:if(!a){e.next=12;break}return e.next=9,Fl.appwriteService.tryReadFileName(a);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0="";case 13:return l=e.t0,e.abrupt("return",{id:r,message:o,fileId:a,userId:i,displayName:[u.last_name,u.first_name,u.middle_name,f(s).format("DD.MM.YYYY / HH:mm")].join(" "),fileName:l,avatar:u.avatar||""});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).filter((function(e){return!!e})).reverse());case 6:e.t1=e.sent,(0,e.t0)(e.t1);case 8:case"end":return e.stop()}}),e)}))),{fallback:Fl.errorService.handleGlobalError,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),d=c.execute;we.useEffect((function(){d()}),[]),we.useEffect((function(){return Fl.serviceCommentViewService.createSubject.subscribe((function(e){e.bid_id===o&&d()}))}),[]);var p=function(){var e=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fl.appwriteService.currentUser.$id,e.next=3,Fl.serviceCommentViewService.create({user_id:r,comment:n,apartment_id:null,bid_id:o,contact_id:null,file_id:null});case 3:return e.next=5,d();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=r(t().mark((function e(n,r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Fl.appwriteService.currentUser.$id,e.next=3,Fl.serviceCommentViewService.create({user_id:i,comment:n,apartment_id:null,bid_id:o,contact_id:null,file_id:r});case 3:return e.next=5,d();case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Se(fp,{history:n,payload:a,children:Se(Mc,{payload:a,style:{height:"calc(100vh - 280px)"},messages:u,onText:p,onFile:m})})},isActive:function(e){return ym(["/bid/service_comment"],e)}}],_m=function(){var e=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.bidViewService.read(n);case 2:return r=e.sent,i=r.contact_id,e.next=6,Fl.contactViewService.tryRead(i);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),km="/bid/parameter",gm=re(),xm=function(e){var n,a=e.payload,o=on(),s=o.push,u=o.pop,l=o.clear,c=zn(),d=sn({withActionButton:!0,animation:"none",title:"Предпросмотр",history:gm,routes:bm,BeforeTitle:function(e){var t=e.onClose,n=on().total;return Se(We,{sx:{mr:1,display:1===n?"none":"flex"},size:"small",onClick:t,children:Se(Hn,{})})},AfterTitle:function(e){var t=e.id,n=e.onClose;return Se(Ke,{direction:"row",gap:1,children:[Se(We,{size:"small",onClick:function(){var e=gm.location.pathname,n={"/bid/parameter":"/bid_edit/".concat(t,"/parameter"),"/bid/contact":"/bid_edit/".concat(t,"/contact")};Fl.routerService.push(n[e]||n[km]),l()},children:Se(Wn,{})}),Se(We,{size:"small",onClick:n,children:Se(it,{})})]})},fetchState:(n=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_m(n);case 2:return e.t0=e.sent,e.next=5,Fl.bidViewService.tryRead(n);case 5:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 7:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)}),mapInitialData:function(e,t){var n=i(t,2),r=n[0],a=n[1];return{contact:r,parameter:a,documents:(null==a?void 0:a.bid_files)||[]}},mapPayload:function(){return a},onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},onSubmit:function(e,t){if(t){var n=gm.location.pathname,r={"/bid/parameter":"/bid_view/".concat(e,"/parameter"),"/bid/contact":"/bid_view/".concat(e,"/contact"),"/bid/documents":"/bid_view/".concat(e,"/documents"),"/bid/service_comment":"/bid_view/".concat(e,"/service_comment")};Fl.routerService.push(r[n]||r[km]),l()}return!0},onClose:function(){u()},submitLabel:"Открыть"}),p=d.pickData,m=d.render;return we.useEffect((function(){return c.subscribe((function(e){p(e)}))}),[]),function(e){s({id:"bid",render:m,onInit:function(){gm.push(km)},onMount:function(){p(e)}})}},wm=function(e){var n=e.fieldData,i=e.payload,a=Gt(n),s=Be(Wd.reloadSubject),u=at(n);we.useEffect((function(){return u.subscribe((function(){s.next()}))}),[]);var l=zn(),c=xm({payload:i});we.useEffect((function(){return l.subscribe((function(e){c(e.$id)}))}),[]);var d,p=pn({storageKey:"bid_columns",columns:Md}).columns,m=we.useCallback((function(){var e=a.current,t=jd(e),n=Wd.getFields(i.id);n.length&&Object.keys(t).forEach((function(t){n.includes(t)||(e[t]=void 0)}));var r=dp({system_metro:e.system_metro,system_rajon:e.system_rajon,system_mahallya:e.system_mahallya,system_rent_price:e.system_rent_price,system_rent_kom_price:e.system_rent_kom_price,system_prod_price:e.system_prod_price,system_prod_kom_price:e.system_prod_kom_price});return Fl.loggerService.log("apartment_card_fields systemData",{systemData:r}),Fl.loggerService.log("apartment_card_fields filterData",{filterData:t}),o(o({},t),r)}),[]);return Se(qe,{sx:{pointerEvents:"all",height:"max(60vh, 350px)",mb:5},children:Se(Vn,{withLoader:!0,withInitialLoader:!0,reloadSubject:s,AfterOperationList:lp,handler:(d=r(t().mark((function e(n){var r,i,a,s,u,l=arguments;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=l.length,a=new Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=l[s];return e.next=3,(r=Fl.bidViewService).paginate.apply(r,[o(o({},m()),{},{_accessLevel:5,_mode:"audit"})].concat(a));case 3:return u=e.sent,e.abrupt("return",u);case 5:case"end":return e.stop()}}),e)}))),function(e){return d.apply(this,arguments)}),isRowDisabled:function(e){return e.system_access_level>i.accessLevel},onRowClick:function(e){return l.next(e)},columns:p,payload:i})})},Sm=[{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany")},isVisible:function(e){var t=!0;return t=(t=(t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая"))&&!Xe(e.podkategoriya_obekta,"Квартиры"))&&!Xe(e.podkategoriya_obekta,"Дома"))&&!Xe(e.podkategoriya_obekta,"Земля/Участок")},fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая недвижимость)"})}},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostinnoj")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_spalni")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_holla")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_kuhni")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_sanuzla")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_balkona")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_terrasy")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_komnaty_ohrany")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"}]}]},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany")},isVisible:function(e){return!Xe(e.kategoriya_obekta,"Коммерческая")&&Xe(e.podkategoriya_obekta,"Земля/Участок")},fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Земля/Участок)"})}},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostinnoj")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_spalni")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_holla")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_kuhni")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_sanuzla")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_balkona")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_terrasy")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_komnaty_ohrany")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"}]}]},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona")},isVisible:function(e){var t=!0;return t=(t=t&&!Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Квартиры")},fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Квартиры)"})}},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostinnoj")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_spalni")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_holla")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_kuhni")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_sanuzla")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_balkona")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}]}]},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany","ploshhad_gostevogo_doma","ploshhad_dopolnitelnoj_pristrojki")},isVisible:function(e){var t=!0;return t=(t=t&&!Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Дома")},fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Дома)"})}},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostinnoj")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_spalni")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_holla")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_kuhni")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_sanuzla")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_balkona")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_terrasy")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_komnaty_ohrany")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostevogo_doma")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostevogo_doma",title:"Площадь гостевого дома М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_dopolnitelnoj_pristrojki")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_dopolnitelnoj_pristrojki",title:"Площадь дополнительной пристройки М²"}]}]},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona")},isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Квартиры")},fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая + Жилая квартира)"})}},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostinnoj")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_spalni")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_holla")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_kuhni")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_sanuzla")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_balkona")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}]}]},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany","ploshhad_gostevogo_doma","ploshhad_dopolnitelnoj_pristrojki")},isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Дома")},fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческий + Жилой дом)"})}},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostinnoj")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_spalni")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_holla")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_kuhni")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_sanuzla")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_balkona")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_terrasy")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_komnaty_ohrany")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostevogo_doma")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostevogo_doma",title:"Площадь гостевого дома М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_dopolnitelnoj_pristrojki")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_dopolnitelnoj_pristrojki",title:"Площадь дополнительной пристройки М²"}]}]},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany")},isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Земля/Участок")},fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая + Жилая земля/участок)"})}},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostinnoj")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_spalni")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_holla")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_kuhni")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_sanuzla")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_balkona")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_terrasy")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_komnaty_ohrany")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"}]}]}],zm=[{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"vnutri_est","ryadom_est")},isVisible:function(e){var t=!0;return t=(t=(t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая"))&&!Xe(e.podkategoriya_obekta,"Квартиры"))&&!Xe(e.podkategoriya_obekta,"Дома"))&&!Xe(e.podkategoriya_obekta,"Земля/Участок")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Group,fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая недвижимость)"})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vnutri_est")},columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Телевизор","Кондиционер","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("ryadom_est")},columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Охрана","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"vnutri_est","ryadom_est")},isVisible:function(e){var t=!1;return t=(t=t||Xe(e.podkategoriya_obekta,"Земля/Участок"))&&!Xe(e.kategoriya_obekta,"Коммерческая")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Group,fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Земля/Участок)"})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vnutri_est")},columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Забор","Катлаван","Пожарная сигнализация","Видеонаблюдение","Сигнализация","Разгрузочный пандус"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("ryadom_est")},columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Охрана","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"vnutri_est","ryadom_est")},isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Дома")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Group,fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческий + Жилой дом)"})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vnutri_est")},columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Телевизор","Кондиционер","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг","Полисадник"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("ryadom_est")},columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Охрана","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}}],Vm=[{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"kolichestvo_komnat","naznachenie_obekta","sostoyanie_obekta","poleznaya_ploshhad","etazh","sostoyanie_remonta","mashina_mesto","kolichestvo_sotok","etazhnost","tip_stroeniya","parkovka","sanuzel","obshhaya_ploshhad","balkon","voda","kanalizacziya","lift_kommercziya","sistema_otopleniya","gaz","mebel","rasstoyanie_do_metro","elektrichestvo","god_postrojki","vysota_potolkov","mestopolozhenie_obekta","sistema_kondiczionirovaniya")},isVisible:function(e){return(!Xe(e.podkategoriya_obekta,"Земля/Участок")||!Xe(e.kategoriya_obekta,"Коммерческая"))&&((!Xe(e.podkategoriya_obekta,"Дома")||!Xe(e.kategoriya_obekta,"Коммерческая"))&&((!Xe(e.podkategoriya_obekta,"Квартиры")||!Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.kategoriya_obekta,"Коммерческая")))},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая недвижимость)"})}},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kolichestvo_komnat")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:a.Component,hidden:function(e){return!e.fieldVisibility.has("naznachenie_obekta")},sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:function(e){return Se(Ze,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:function(t){return e.onChange(c({},"naznachenie_obekta",t))}})}},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("sostoyanie_obekta")},columns:"3",outlined:!1,name:"sostoyanie_obekta",title:"Состояние объекта",itemList:["Новой постройки","Недостроенный","Под снос","Коробка"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("poleznaya_ploshhad")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("etazh")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("sostoyanie_remonta")},columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("mashina_mesto")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kolichestvo_sotok")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("etazhnost")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("tip_stroeniya")},columns:"3",outlined:!1,name:"tip_stroeniya",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("parkovka")},columns:"3",outlined:!1,name:"parkovka",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sanuzel")},columns:"3",outlined:!1,name:"sanuzel",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("obshhaya_ploshhad")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("balkon")},columns:"3",outlined:!1,name:"balkon",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("voda")},columns:"3",outlined:!1,name:"voda",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("kanalizacziya")},columns:"3",outlined:!1,name:"kanalizacziya",title:"Канализация",itemList:["Да","Нет"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("lift_kommercziya")},columns:"3",outlined:!1,name:"lift_kommercziya",title:"Лифт",itemList:["Есть","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema_otopleniya")},columns:"3",outlined:!1,name:"sistema_otopleniya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("gaz")},columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("mebel")},columns:"3",outlined:!1,name:"mebel",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_metro")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("elektrichestvo")},columns:"3",outlined:!1,name:"elektrichestvo",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("god_postrojki")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("vysota_potolkov")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("mestopolozhenie_obekta")},columns:"3",outlined:!1,name:"mestopolozhenie_obekta",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema_kondiczionirovaniya")},columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"nazvanie_zhk","kolichestvo_komnat","etazh","etazhnost","etazh","obshhaya_ploshhad","sostoyanie_remonta-kvartiry","kolichestvo_spalen","spalnya_sanuzel","zhilaya_ploshhad","balkon_kvartira","tip_planirovki","mebel_kvartira","sanuzel_kvartira","tip-stroeniya_kvartiry","vysota_potolkov","sistema-otopleniya_kvartiry","energonositel_obekta","lift_kvartira","podezd_nomer","kod_domofona","rasstoyanie_do_metro","vid_iz_okna","parkovka_kvartira","god_postrojki","terrasa","czokol_podval","garderobnaya","umnyj_dom")},isVisible:function(e){if(Xe(e.podkategoriya_obekta,"Квартиры")&&Xe(e.kategoriya_obekta,"Коммерческая"))return!1;var t=!1;return t=t||Xe(e.podkategoriya_obekta,"Квартиры")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Квартиры)"})}},{type:a.Complete,hidden:function(e){return!e.fieldVisibility.has("nazvanie_zhk")},columns:"3",outlined:!1,name:"nazvanie_zhk",title:"Название ЖК",tip:['ЖК "Greenwich"','ЖК "OzMahal"','ЖК "Elysium"','ЖК "Binkat"','ЖК "Brooklyn"','ЖК "Assalom Havo"','ЖК "Istanbul City"']},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kolichestvo_komnat")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("etazh")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("etazhnost")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("obshhaya_ploshhad")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("sostoyanie_remonta-kvartiry")},columns:"3",outlined:!1,name:"sostoyanie_remonta-kvartiry",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kolichestvo_spalen")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("spalnya_sanuzel")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("zhilaya_ploshhad")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"zhilaya_ploshhad",title:"Жилая площадь М²"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("balkon_kvartira")},columns:"3",outlined:!1,name:"balkon_kvartira",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("tip_planirovki")},columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Малосемейная","Общежитие","Пентхаус","Дуплекс","Комната"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("mebel_kvartira")},columns:"3",outlined:!1,name:"mebel_kvartira",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sanuzel_kvartira")},columns:"3",outlined:!1,name:"sanuzel_kvartira",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("tip-stroeniya_kvartiry")},columns:"3",outlined:!1,name:"tip-stroeniya_kvartiry",title:"Тип строения",itemList:["Кирпичный","Монолитный","Блочный","Панельный","Деревянный","Газоблочный","Бетонно-керамзитный"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("vysota_potolkov")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema-otopleniya_kvartiry")},columns:"3",outlined:!1,name:"sistema-otopleniya_kvartiry",title:"Система отопления",itemList:["Центральное","2х контурный котел","Теплый пол"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("energonositel_obekta")},columns:"3",outlined:!1,name:"energonositel_obekta",title:"Энергоноситель объекта",itemList:["Электрофицирован","Газифицирован"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("lift_kvartira")},columns:"3",outlined:!1,name:"lift_kvartira",title:"Лифт",itemList:["Пассажирский","Грузовой","Нет"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("podezd_nomer")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"podezd_nomer",title:"Подъезд №"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kod_domofona")},columns:"3",outlined:!1,name:"kod_domofona",title:"Код домофона"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_metro")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vid_iz_okna")},columns:"3",outlined:!1,name:"vid_iz_okna",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("parkovka_kvartira")},columns:"3",outlined:!1,name:"parkovka_kvartira",title:"Парковка",itemList:["Наземная","Собственная","Подземная","В аренду","Нет"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("god_postrojki")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("terrasa")},columns:"3",outlined:!1,name:"terrasa",title:"Терраса",tr:function(e){return"Yes"===e?"Да":"Нет"}},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("czokol_podval")},columns:"3",outlined:!1,name:"czokol_podval",title:"Цоколь/Подвал",tr:function(e){return"Yes"===e?"Да":"Нет"}},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("garderobnaya")},columns:"3",outlined:!1,name:"garderobnaya",title:"Гардеробная",tr:function(e){return"Yes"===e?"Да":"Нет"}},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("umnyj_dom")},columns:"3",outlined:!1,name:"umnyj_dom",title:"Умный дом",tr:function(e){return"Yes"===e?"Да":"Нет"}}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"kolichestvo_komnat","sostoyanie_doma","god_postrojki","tip-stroeniya_doma","etazhnost","balkon_doma","tip_planirovki","bassejn","ploshhad_doma","sanuzel_doma","mashina_mesto","kolichestvo_spalen","kolichestvo_sotok","sostoyanie_remonta","lift_dom","spalnya_sanuzel","sistema-otopleniya_dom","mebel_dom","rasstoyanie_do_metro","gaz_dom","sistema-kondiczionirovaniya_dom","vysota_potolkov","elektrichestvo_dom","vid_iz_okna_dom","garazh","kanalizacziya_dom","raspolozhenie_doma","mestopolozhenie-obekta_dom","voda_dom","terrasa","garderobnaya","czokol","podval","vdol_dorogi","uglovoj","dva_doma_vo_dvore","komnata_ohrany","gostevoj_domik","barbekyu_zona","dopolnitelnaya_pristrojka","ogorod","saraj","umnyj_dom")},isVisible:function(e){if(Xe(e.podkategoriya_obekta,"Дома")&&Xe(e.kategoriya_obekta,"Коммерческая"))return!1;var t=!1;return t=t||Xe(e.podkategoriya_obekta,"Дома")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Дома)"})}},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kolichestvo_komnat")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("etazhnost")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_doma")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_doma",title:"Площадь дома М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kolichestvo_sotok")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kolichestvo_spalen")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("spalnya_sanuzel")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("sostoyanie_remonta")},columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sanuzel_doma")},columns:"3",outlined:!1,name:"sanuzel_doma",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("bassejn")},columns:"3",outlined:!1,name:"bassejn",title:"Бассейн",itemList:["Летний","Зимний","Сауна","Нет"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("mebel_dom")},columns:"3",outlined:!1,name:"mebel_dom",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("sostoyanie_doma")},columns:"3",outlined:!1,name:"sostoyanie_doma",title:"Состояние дома",itemList:["Новой постройки","Недостроенный","Под снос","Коробка"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("mashina_mesto")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("tip_planirovki")},columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Смешанный"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("tip-stroeniya_doma")},columns:"3",outlined:!1,name:"tip-stroeniya_doma",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("vysota_potolkov")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("garazh")},columns:"3",outlined:!1,name:"garazh",title:"Гараж",itemList:["Подземный","Закрытый","Под навесом","Уличный"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema-otopleniya_dom")},columns:"3",outlined:!1,name:"sistema-otopleniya_dom",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema-kondiczionirovaniya_dom")},columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_dom",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("raspolozhenie_doma")},columns:"3",outlined:!1,name:"raspolozhenie_doma",title:"Расположение дома",itemList:["По середине","В начале двора","В конце двора"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("kanalizacziya_dom")},columns:"3",outlined:!1,name:"kanalizacziya_dom",title:"Канализация",itemList:["Да","Нет"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_metro")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vid_iz_okna_dom")},columns:"3",outlined:!1,name:"vid_iz_okna_dom",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("lift_dom")},columns:"3",outlined:!1,name:"lift_dom",title:"Лифт",itemList:["Есть","Нет"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("god_postrojki")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("voda_dom")},columns:"3",outlined:!1,name:"voda_dom",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("gaz_dom")},columns:"3",outlined:!1,name:"gaz_dom",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("elektrichestvo_dom")},columns:"3",outlined:!1,name:"elektrichestvo_dom",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("balkon_doma")},columns:"3",outlined:!1,name:"balkon_doma",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("mestopolozhenie-obekta_dom")},columns:"3",outlined:!1,name:"mestopolozhenie-obekta_dom",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("terrasa")},columns:"3",outlined:!1,name:"terrasa",title:"Терраса",tr:function(e){return"Yes"===e?"Да":"Нет"}},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("garderobnaya")},columns:"3",outlined:!1,name:"garderobnaya",title:"Гардеробная",tr:function(e){return"Yes"===e?"Да":"Нет"}},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("czokol")},columns:"3",outlined:!1,name:"czokol",title:"Цоколь",tr:function(e){return"Yes"===e?"Да":"Нет"}},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("podval")},columns:"3",outlined:!1,name:"podval",title:"Подвал",tr:function(e){return"Yes"===e?"Да":"Нет"}},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("umnyj_dom")},columns:"3",outlined:!1,name:"umnyj_dom",title:"Умный дом",tr:function(e){return"Yes"===e?"Да":"Нет"}},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("vdol_dorogi")},columns:"3",outlined:!1,name:"vdol_dorogi",title:"Вдоль дороги",tr:function(e){return"Yes"===e?"Да":"Нет"}},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("uglovoj")},columns:"3",outlined:!1,name:"uglovoj",title:"Угловой",tr:function(e){return"Yes"===e?"Да":"Нет"}},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("dva_doma_vo_dvore")},columns:"3",outlined:!1,name:"dva_doma_vo_dvore",title:"2 дома во дворе",tr:function(e){return"Yes"===e?"Да":"Нет"}},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("komnata_ohrany")},columns:"3",outlined:!1,name:"komnata_ohrany",title:"Комната охраны",tr:function(e){return"Yes"===e?"Да":"Нет"}},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("gostevoj_domik")},columns:"3",outlined:!1,name:"gostevoj_domik",title:"Гостевой домик",tr:function(e){return"Yes"===e?"Да":"Нет"}},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("barbekyu_zona")},columns:"3",outlined:!1,name:"barbekyu_zona",title:"Барбекю зона",tr:function(e){return"Yes"===e?"Да":"Нет"}},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("dopolnitelnaya_pristrojka")},columns:"3",outlined:!1,name:"dopolnitelnaya_pristrojka",title:"Дополнительная пристройка",tr:function(e){return"Yes"===e?"Да":"Нет"}},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("ogorod")},columns:"3",outlined:!1,name:"ogorod",title:"Огород",tr:function(e){return"Yes"===e?"Да":"Нет"}},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("saraj")},columns:"3",outlined:!1,name:"saraj",title:"Сарай",tr:function(e){return"Yes"===e?"Да":"Нет"}}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"kolichestvo_komnat","naznachenie-obekta-zemlya_uchastok","tip_zemli_uchastka","poleznaya_ploshhad","etazh","sostoyanie-obekta_zemlya","mashina_mesto","kolichestvo_sotok","etazhnost","sostoyanie-remonta_zemlya","parkovka_zemlya","rasstoyanie_do_metro","obshhaya_ploshhad","voda_zemlya","mestopolozhenie-obekta_zemlya","rasstoyanie_do_goroda","sistema-otopleniya_zemlya","podezdnye_puti","sistema-kondiczionirovaniya_zemlya","god_postrojki","elektrichestvo_zemlya","gaz_zemlya","kanalizacziya_zemlya")},isVisible:function(e){return!Xe(e.kategoriya_obekta,"Коммерческая")&&Xe(e.podkategoriya_obekta,"Земля/Участок")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Земля/Участок)"})}},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kolichestvo_komnat")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:a.Component,hidden:function(e){return!e.fieldVisibility.has("naznachenie-obekta-zemlya_uchastok")},sx:{pr:1,mb:2},columns:"3",name:"naznachenie-obekta-zemlya_uchastok",element:function(e){return Se(Ze,{variant:"standard",label:"Назначение объекта",items:[{label:"Сельхоз использование",value:"Сельхоз использование"},{label:"ИЖС",value:"ИЖС"},{label:"Высотная застройка",value:"Высотная застройка"},{label:"Промышленное назначение",value:"Промышленное назначение"},{label:"ТЦ",value:"ТЦ"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Склады",value:"Склады"},{label:"Инвестпроект",value:"Инвестпроект"},{label:"Строительство образовательных учреждений",value:"Строительство образовательных учреждений"},{label:"АЗС",value:"АЗС"},{label:"Мойка",value:"Мойка"}],value:e["naznachenie-obekta_zemlya"],onChange:function(t){return e.onChange(c({},"naznachenie-obekta_zemlya",t))}})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("tip_zemli_uchastka")},columns:"3",outlined:!1,name:"tip_zemli_uchastka",title:"Тип земли/участка",itemList:["Делимый","Неделимый"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("poleznaya_ploshhad")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("etazh")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("sostoyanie-obekta_zemlya")},columns:"3",outlined:!1,name:"sostoyanie-obekta_zemlya",title:"Состояние объекта",itemList:["Пустая земля/участок","Недостроенная","Под снос"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("mashina_mesto")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kolichestvo_sotok")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("etazhnost")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("sostoyanie-remonta_zemlya")},columns:"3",outlined:!1,name:"sostoyanie-remonta_zemlya",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("parkovka_zemlya")},columns:"3",outlined:!1,name:"parkovka_zemlya",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_metro")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("obshhaya_ploshhad")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("voda_zemlya")},columns:"3",outlined:!1,name:"voda_zemlya",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("mestopolozhenie-obekta_zemlya")},columns:"3",outlined:!1,name:"mestopolozhenie-obekta_zemlya",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_goroda")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_goroda",title:"Расстояние до города (м)"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema-otopleniya_zemlya")},columns:"3",outlined:!1,name:"sistema-otopleniya_zemlya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("podezdnye_puti")},columns:"3",outlined:!1,name:"podezdnye_puti",title:"Подъездные пути",itemList:["Асфальтированная дорога","Грунтовая дорога","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema-kondiczionirovaniya_zemlya")},columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_zemlya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("god_postrojki")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("elektrichestvo_zemlya")},columns:"3",outlined:!1,name:"elektrichestvo_zemlya",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("gaz_zemlya")},columns:"3",outlined:!1,name:"gaz_zemlya",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("kanalizacziya_zemlya")},columns:"3",outlined:!1,name:"kanalizacziya_zemlya",title:"Канализация",itemList:["Да","Нет"]}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"kolichestvo_komnat","sostoyanie_remonta","naznachenie_obekta","raspolozhenie_obekta","etazh","balkon","tip_planirovki","lift_kvartira","etazhnost","god_postrojki","nazvanie_zhk","mashina_mesto","obshhaya_ploshhad","sanuzel_kvartira","parkovka_kvartira","zhilaya_ploshhad","mebel","vysota_potolkov","kolichestvo_spalen","sistema_otopleniya","kod_domofona","spalnya_sanuzel","gaz","podezd_nomer","rasstoyanie_do_metro","vid_iz_okna","sistema_kondiczionirovaniya","tip_stroeniya")},isVisible:function(e){return!(!Xe(e.podkategoriya_obekta,"Квартиры")||!Xe(e.kategoriya_obekta,"Коммерческая"))},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая + Жилая квартира)"})}},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kolichestvo_komnat")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("sostoyanie_remonta")},columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:a.Component,hidden:function(e){return!e.fieldVisibility.has("naznachenie_obekta")},sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:function(e){return Se(Ze,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:function(t){return e.onChange(c({},"naznachenie_obekta",t))}})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("raspolozhenie_obekta")},columns:"3",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("etazh")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("balkon")},columns:"3",outlined:!1,name:"balkon",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("tip_planirovki")},columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Малосемейная","Общежитие","Пентхаус","Дуплекс","Комната"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("lift_kvartira")},columns:"3",outlined:!1,name:"lift_kvartira",title:"Лифт",itemList:["Пассажирский","Грузовой","Нет"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("etazhnost")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("god_postrojki")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"},{type:a.Complete,hidden:function(e){return!e.fieldVisibility.has("nazvanie_zhk")},columns:"3",outlined:!1,name:"nazvanie_zhk",title:"Название ЖК",tip:['ЖК "Greenwich"','ЖК "OzMahal"','ЖК "Elysium"','ЖК "Binkat"','ЖК "Brooklyn"','ЖК "Assalom Havo"','ЖК "Istanbul City"']},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("mashina_mesto")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("obshhaya_ploshhad")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sanuzel_kvartira")},columns:"3",outlined:!1,name:"sanuzel_kvartira",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("parkovka_kvartira")},columns:"3",outlined:!1,name:"parkovka_kvartira",title:"Парковка",itemList:["Наземная","Собственная","Подземная","В аренду","Нет"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("zhilaya_ploshhad")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"zhilaya_ploshhad",title:"Жилая площадь М²"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("mebel")},columns:"3",outlined:!1,name:"mebel",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("vysota_potolkov")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kolichestvo_spalen")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema_otopleniya")},columns:"3",outlined:!1,name:"sistema_otopleniya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kod_domofona")},columns:"3",outlined:!1,name:"kod_domofona",title:"Код домофона"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("spalnya_sanuzel")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("gaz")},columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("podezd_nomer")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"podezd_nomer",title:"Подъезд №"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_metro")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vid_iz_okna")},columns:"3",outlined:!1,name:"vid_iz_okna",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema_kondiczionirovaniya")},columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("tip_stroeniya")},columns:"3",outlined:!1,name:"tip_stroeniya",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"kolichestvo_komnat","sostoyanie_doma","mestopolozhenie_obekta","naznachenie_obekta","etazhnost","sostoyanie_remonta","raspolozhenie_obekta","tip_stroeniya","ploshhad_doma","raspolozhenie_doma","tip_planirovki","bassejn","kolichestvo_sotok","sanuzel_doma","mashina_mesto","kolichestvo_spalen","voda_dom","lift_kvartira","spalnya_sanuzel","sistema_otopleniya","mebel","rasstoyanie_do_metro","gaz","sistema_kondiczionirovaniya","vysota_potolkov","elektrichestvo_dom","vid_iz_okna","garazh","kanalizacziya_dom","balkon","god_postrojki")},isVisible:function(e){return!(!Xe(e.podkategoriya_obekta,"Дома")||!Xe(e.kategoriya_obekta,"Коммерческая"))},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческий + Жилой дом)"})}},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kolichestvo_komnat")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("sostoyanie_doma")},columns:"3",outlined:!1,name:"sostoyanie_doma",title:"Состояние дома",itemList:["Новой постройки","Недостроенный","Под снос","Коробка"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("mestopolozhenie_obekta")},columns:"3",outlined:!1,name:"mestopolozhenie_obekta",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:a.Component,hidden:function(e){return!e.fieldVisibility.has("naznachenie_obekta")},sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:function(e){return Se(Ze,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:function(t){return e.onChange(c({},"naznachenie_obekta",t))}})}},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("etazhnost")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("sostoyanie_remonta")},columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("raspolozhenie_obekta")},columns:"3",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("tip_stroeniya")},columns:"3",outlined:!1,name:"tip_stroeniya",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_doma")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_doma",title:"Площадь дома М²"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("raspolozhenie_doma")},columns:"3",outlined:!1,name:"raspolozhenie_doma",title:"Расположение дома",itemList:["По середине","В начале двора","В конце двора"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("tip_planirovki")},columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Малосемейная","Общежитие","Пентхаус","Дуплекс","Комната"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("bassejn")},columns:"3",outlined:!1,name:"bassejn",title:"Бассейн",itemList:["Летний","Зимний","Сауна","Нет"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kolichestvo_sotok")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sanuzel_doma")},columns:"3",outlined:!1,name:"sanuzel_doma",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("mashina_mesto")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kolichestvo_spalen")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("voda_dom")},columns:"3",outlined:!1,name:"voda_dom",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("lift_kvartira")},columns:"3",outlined:!1,name:"lift_kvartira",title:"Лифт",itemList:["Пассажирский","Грузовой","Нет"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("spalnya_sanuzel")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema_otopleniya")},columns:"3",outlined:!1,name:"sistema_otopleniya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("mebel")},columns:"3",outlined:!1,name:"mebel",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_metro")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("gaz")},columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema_kondiczionirovaniya")},columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("vysota_potolkov")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("elektrichestvo_dom")},columns:"3",outlined:!1,name:"elektrichestvo_dom",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vid_iz_okna")},columns:"3",outlined:!1,name:"vid_iz_okna",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("garazh")},columns:"3",outlined:!1,name:"garazh",title:"Гараж",itemList:["Подземный","Закрытый","Под навесом","Уличный"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("kanalizacziya_dom")},columns:"3",outlined:!1,name:"kanalizacziya_dom",title:"Канализация",itemList:["Да","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("balkon")},columns:"3",outlined:!1,name:"balkon",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("god_postrojki")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"kolichestvo_komnat","naznachenie-obekta-zemlya_uchastok","tip_zemli_uchastka","poleznaya_ploshhad","etazh","sostoyanie-obekta_zemlya","mashina_mesto","kolichestvo_sotok","etazhnost","sostoyanie-remonta_zemlya","parkovka_zemlya","rasstoyanie_do_metro","obshhaya_ploshhad","voda_zemlya","mestopolozhenie-obekta_zemlya","rasstoyanie_do_goroda","sistema-otopleniya_zemlya","podezdnye_puti","sistema-kondiczionirovaniya_zemlya","god_postrojki","elektrichestvo_zemlya","gaz_zemlya","kanalizacziya_zemlya")},isVisible:function(e){return!(!Xe(e.podkategoriya_obekta,"Земля/Участок")||!Xe(e.kategoriya_obekta,"Коммерческая"))},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая + Жилая земля/участок)"})}},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kolichestvo_komnat")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:a.Component,hidden:function(e){return!e.fieldVisibility.has("naznachenie-obekta-zemlya_uchastok")},sx:{pr:1,mb:2},columns:"3",name:"naznachenie-obekta-zemlya_uchastok",element:function(e){return Se(Ze,{variant:"standard",label:"Назначение объекта",items:[{label:"Сельхоз использование",value:"Сельхоз использование"},{label:"ИЖС",value:"ИЖС"},{label:"Высотная застройка",value:"Высотная застройка"},{label:"Промышленное назначение",value:"Промышленное назначение"},{label:"ТЦ",value:"ТЦ"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Склады",value:"Склады"},{label:"Инвестпроект",value:"Инвестпроект"},{label:"Строительство образовательных учреждений",value:"Строительство образовательных учреждений"},{label:"АЗС",value:"АЗС"},{label:"Мойка",value:"Мойка"}],value:e["naznachenie-obekta_zemlya"],onChange:function(t){return e.onChange(c({},"naznachenie-obekta_zemlya",t))}})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("tip_zemli_uchastka")},columns:"3",outlined:!1,name:"tip_zemli_uchastka",title:"Тип земли/участка",itemList:["Делимый","Неделимый"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("poleznaya_ploshhad")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("etazh")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("sostoyanie-obekta_zemlya")},columns:"3",outlined:!1,name:"sostoyanie-obekta_zemlya",title:"Состояние объекта",itemList:["Пустая земля/участок","Недостроенная","Под снос"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("mashina_mesto")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kolichestvo_sotok")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("etazhnost")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("sostoyanie-remonta_zemlya")},columns:"3",outlined:!1,name:"sostoyanie-remonta_zemlya",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("parkovka_zemlya")},columns:"3",outlined:!1,name:"parkovka_zemlya",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_metro")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("obshhaya_ploshhad")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("voda_zemlya")},columns:"3",outlined:!1,name:"voda_zemlya",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("mestopolozhenie-obekta_zemlya")},columns:"3",outlined:!1,name:"mestopolozhenie-obekta_zemlya",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_goroda")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_goroda",title:"Расстояние до города (м)"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema-otopleniya_zemlya")},columns:"3",outlined:!1,name:"sistema-otopleniya_zemlya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("podezdnye_puti")},columns:"3",outlined:!1,name:"podezdnye_puti",title:"Подъездные пути",itemList:["Асфальтированная дорога","Грунтовая дорога","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema-kondiczionirovaniya_zemlya")},columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_zemlya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("god_postrojki")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("elektrichestvo_zemlya")},columns:"3",outlined:!1,name:"elektrichestvo_zemlya",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("gaz_zemlya")},columns:"3",outlined:!1,name:"gaz_zemlya",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("kanalizacziya_zemlya")},columns:"3",outlined:!1,name:"kanalizacziya_zemlya",title:"Канализация",itemList:["Да","Нет"]}]}}],Am=[{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"vnutri_est","ryadom_est")},isVisible:function(e){var t=!0;return t=(t=t&&!Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Квартиры")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Group,fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Квартиры)"})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vnutri_est")},columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Холодильник","Телевизор","Кондиционер","Стиральная машина","Мусоропровод","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("ryadom_est")},columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"vnutri_est","ryadom_est")},isVisible:function(e){var t=!0;return t=(t=t&&!Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Дома")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Group,fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Дома)"})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vnutri_est")},columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Холодильник","Телевизор","Кондиционер","Стиральная машина","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг","Полисадник"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("ryadom_est")},columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Охрана","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"vnutri_est","ryadom_est")},isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Квартиры")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Group,fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая + Жилая квартира)"})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vnutri_est")},columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Холодильник","Телевизор","Кондиционер","Стиральная машина","Мусоропровод","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг","Пожарная сигнализация","Видеонаблюдение","Сигнализация"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("ryadom_est")},columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Охрана","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"vnutri_est","ryadom_est")},isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Земля/Участок")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Group,fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая + Жилая земля/участок)"})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vnutri_est")},columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Забор","Катлаван","Пожарная сигнализация","Видеонаблюдение","Сигнализация"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("ryadom_est")},columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Охрана","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}}],Tm=[{type:a.Paper,hidden:function(e){return!Ql(e.fieldVisibility,"zagolovok","kategoriya_obekta","prodazha","arenda","podkategoriya_obekta","istochnik","tip_nedvizhimosti","vid_obekta","raspolozhenie_obekta","vid_liczenzii")},fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Основная информация"})}},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("zagolovok")},outlined:!1,name:"zagolovok",title:"Заголовок",placeholder:"Введите текст"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("kategoriya_obekta")},outlined:!1,columns:"4",name:"kategoriya_obekta",title:"Категория объекта",itemList:["Жилая","Коммерческая","От застройщика"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("prodazha")},outlined:!1,columns:"4",name:"prodazha",title:"Покупка",itemList:["Прямая продажа","Рассрочка","Через банк","Обмен"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("arenda")},outlined:!1,columns:"4",name:"arenda",title:"Аренда",itemList:["Долгосрочная","Ежемесячная","Посуточная"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("podkategoriya_obekta")},outlined:!1,columns:"4",name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:function(e){return Xe(e.kategoriya_obekta,"Коммерческая")},itemList:function(){return["Квартиры","Дома","Земля/Участок","Здания","Базы"]}},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("podkategoriya_obekta")},outlined:!1,columns:"4",name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:function(e){return!Xe(e.kategoriya_obekta,"Коммерческая")},itemList:function(){return["Квартиры","Дома","Земля/Участок"]}},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("istochnik")},columns:"4",outlined:!1,name:"istochnik",title:"Источник",itemList:["По звонку","Личные связи","Самостоятельный поиск","Риелтор","С сайта","Прибытие в офис","OLX","Facebook","Instagram","Telegram","Эксклюзив","Другое"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("tip_nedvizhimosti")},isVisible:function(e){return!(!Xe(e.podkategoriya_obekta,"Квартиры")||!Xe(e.kategoriya_obekta,"Коммерческая","Жилая"))},columns:"4",outlined:!1,name:"tip_nedvizhimosti",title:"Тип недвижимости",itemList:["Вторичное жилье","Новостройка"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("vid_obekta")},isVisible:function(e){var t=!1;return t=t||Xe(e.podkategoriya_obekta,"Дома")},columns:"4",outlined:!1,name:"vid_obekta",title:"Вид объекта",itemList:["Дом","Коттедж","Таунхаус","ЖАКТ","Часть дома","Дача"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("raspolozhenie_obekta")},isVisible:function(e){var t=!1;return t=(t=(t=(t=t||Xe(e.kategoriya_obekta,"Коммерческая"))&&!Xe(e.podkategoriya_obekta,"Дома"))&&!Xe(e.podkategoriya_obekta,"Земля/Участок"))&&!Xe(e.podkategoriya_obekta,"Квартиры")},columns:"4",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("vid_liczenzii")},isVisible:function(e){var t=!1;return t=t||Xe(e.podkategoriya_obekta,"Земля/Участок")},columns:"4",outlined:!1,name:"vid_liczenzii",title:"Вид лицензии",itemList:["Коммерческая","Жилая"]}]}].concat(Vm,Am,zm,Sm);window.bid_filters=Tm;var Cm,Fm,Lm,Im,Mm,jm,Bm=function(){return ct(Fl.bidViewService.paginate,{onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},fallback:Fl.errorService.handleGlobalError})},Dm=[{type:a.Box,noBaseline:!0,sx:{display:"grid",gridTemplateColumns:"auto auto 1fr auto","& > .MuiGrid-root":{minWidth:"275px"},minWidth:"calc(275px * 3)",mt:-1},fields:[{type:a.Choose,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",choose:(Im=r(t().mark((function e(n,r){var a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.pickUser(n.system_created_by?[n.system_created_by]:[]),e.next=3,r.userResultSubject.toPromise();case 3:if(!(a=e.sent)||!a.length){e.next=7;break}return o=i(a,1),s=o[0],e.abrupt("return",s);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)}))),function(e,t){return Im.apply(this,arguments)}),tr:(Lm=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.userViewService.tryRead(n);case 2:return r=e.sent,e.abrupt("return",[null==r?void 0:r.last_name,null==r?void 0:r.first_name,null==r?void 0:r.middle_name].filter((function(e){return e})).join(" ")||(null==r?void 0:r.$id)||"");case 4:case"end":return e.stop()}}),e)}))),function(e){return Lm.apply(this,arguments)}),name:"system_created_by",title:"",placeholder:"Создал"},{type:a.Choose,sx:{minWidth:"100% !important"},fieldBottomMargin:"0",fieldRightMargin:"3",columns:"4",choose:(Fm=r(t().mark((function e(n,r){var a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.pickContact(n.contact_id?[n.contact_id]:[]),e.next=3,r.contactResultSubject.toPromise();case 3:if(!(a=e.sent)||!a.length){e.next=7;break}return o=i(a,1),s=o[0],e.abrupt("return",s);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)}))),function(e,t){return Fm.apply(this,arguments)}),tr:(Cm=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.contactViewService.tryRead(n);case 2:return r=e.sent,e.abrupt("return",(null==r?void 0:r.fio)||(null==r?void 0:r.id)||"");case 4:case"end":return e.stop()}}),e)}))),function(e){return Cm.apply(this,arguments)}),name:"contact_id",title:"",placeholder:"Контакт"},{type:a.Div},{type:a.Text,fieldRightMargin:"1",fieldBottomMargin:"0",inputFormatterTemplate:"0000000000",inputFormatterAllowed:/^[0-9]/,name:"index",title:"",leadingIcon:function(){return Se(qe,{sx:{height:20,width:20,display:"flex",alignItems:"center",justifyContent:"center"},children:Se(Je,{textTransform:"lowercase",variant:"caption",children:"№"})})},placeholder:"",trailingIcon:function(){return Se(An,{sx:{opacity:.5}})},trailingIconClick:function(e,t,n){e&&n("")}}]}],Rm=function(){var e=dn(),t=e.filterData,n=e.handleFilter,r=e.payload,i=e.loading,a=Sc({payload:r}),s=a.pickData,u=a.render,l=a.resultSubject,c=Jp({payload:r}),d=c.pickData,p=c.render,m=c.resultSubject;return Se(qe,{sx:{mb:1},children:[Se(Tn,{sx:{height:"100%",minHeight:48},hideOverflowY:!0,children:Se(qe,{sx:{display:"flex",alignItems:"center",justifyContent:"stretch",pt:1,pb:1},children:Se(st,{handler:t,fields:Dm,readonly:i,change:function(e,t){t||n(e)},payload:function(){return o(o({},r),{},{pickUser:s,userResultSubject:l,pickContact:d,contactResultSubject:m})},fieldDebounce:da})})}),p(),u()]})},qm=function(e){var t=e.payload,n=e.features,r=Bm(),i=Be(),a=pn({storageKey:"bid_columns",columns:ip}).columns,o=mt({title:"Выбор заявки",AfterTitle:function(e){var t=e.onClose;return Se(We,{size:"small",onClick:t,children:Se(it,{})})},withSearch:!0,withLoader:!0,withSingleChip:!0,noInitialFilters:!0,fetchDebounce:da,reloadSubject:Fl.userViewService.reloadSubject,selectionMode:ht.Single,onSubmit:function(e){return i.next(e),!0},AfterOperationList:Rm,filterLabel:"Выбрать заявку",filters:Tm,chips:op,columns:a,handler:r,payload:t,features:n}),s=o.pickData,u=o.render,l=o.open;return{pickData:s,render:u,resultSubject:i,open:l}},Pm=[{type:a.Group,style:{minWidth:540},fields:[{type:a.Combo,title:"Тип сделки",isInvalid:function(e){return e.deal_type?null:"Укажите тип сделки"},name:"deal_type",map:function(e,t){var n=t.data,r=n.prod_czena,i=n.prod_startovaya_czena,a=void 0===i?r:i,o=n.prod_kom_czena,s=n.prod_kom_startovaya_czena,u=void 0===s?o:s,l=n.rent_czena,c=n.rent_startovaya_czena,d=void 0===c?l:c,p=n.rent_kom_czena,m=n.rent_kom_startovaya_czena,f=void 0===m?p:m,h=n.prod_czena_valyuta,y=void 0===h?"usd":h,v=n.rent_czena_valyuta,b=void 0===v?"usd":v;return e.deal_type&&"Продажа"===e.deal_type[0]&&(S.set(e,"price",a||u),S.set(e,"unit",[y||"usd"])),e.deal_type&&"Аренда"===e.deal_type[0]&&(S.set(e,"price",d||f),S.set(e,"unit",[b||"usd"])),e},itemList:function(){return[].concat(No)}},{type:a.Box,isVisible:function(e){var t=e.deal_type,n=e.price_type;return!!t&&"fixed"===n},style:{display:"grid",gridTemplateColumns:"1fr 125px"},fields:[{type:a.Text,outlined:!1,placeholder:"Не указано",labelShrink:!0,name:"price",title:"Цена (Итог)"},{type:a.Combo,noDeselect:!0,fieldBottomMargin:"0",title:"Валюта",placeholder:"USD",itemList:["usd","uzs"],tr:function(e){return"uzs"===e?"SUM":"USD"},defaultValue:"usd",outlined:!1,name:"unit"}]},{type:a.Text,fieldBottomMargin:"1",placeholder:"Введите комментарий",inputRows:3,labelShrink:!0,name:"comment",title:"Комментарий"},{hidden:!0,type:a.Radio,fieldBottomMargin:"0",name:"price_type",radioValue:"unset",defaultValue:"unset",title:"Цена не указана"},{hidden:!0,type:a.Radio,fieldBottomMargin:"0",name:"price_type",radioValue:"fixed",title:"Фиксированная"}]}],Em=[{type:a.Choose,fieldBottomMargin:"1",isInvalid:function(e){return e.target_bid_id?null:"Укажите заявку"},choose:(jm=r(t().mark((function e(n,r){var a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.pickBid(n.target_bid_id?[n.target_bid_id]:[]),e.next=3,r.bidResultSubject.toPromise();case 3:if(!(a=e.sent)||!a.length){e.next=7;break}return o=i(a,1),s=o[0],e.abrupt("return",s);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)}))),function(e,t){return jm.apply(this,arguments)}),tr:(Mm=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.bidViewService.tryRead(n);case 2:return r=e.sent,e.abrupt("return",(null==r?void 0:r.zagolovok)||(null==r?void 0:r.$id)||"");case 4:case"end":return e.stop()}}),e)}))),function(e){return Mm.apply(this,arguments)}),name:"target_bid_id",title:"Выберите заявку",placeholder:"Не выбрано"},{type:a.Text,fieldBottomMargin:"1",placeholder:"Введите комментарий",inputRows:3,labelShrink:!0,name:"comment",title:"Комментарий"},{type:a.Radio,fieldBottomMargin:"0",title:"Закрытая сделка",name:"status",radioValue:"Закрытая сделка",defaultValue:"Закрытая сделка"},{type:a.Radio,fieldBottomMargin:"0",title:"Сделка сорвана",name:"status",radioValue:"Сделка сорвана"}],Nm=[{action:"deal-end-action",label:"Завершить сделку",isDisabled:function(e){return!e.activeItem}}],Om=$l()((function(e){return{row:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr"},input:{paddingRight:"4px",paddingBottom:"4px"},onlyInput:{maxWidth:"500px",width:"100%"},select:{margin:"0 5px"},checkbox:{}}})),Um=function(e){var t=e.className,n=e.style,r=e.sx,a=e.value,o=void 0===a?"":a,s=e.readonly,u=e.unit,l=void 0===u?"usd":u,c=e.title,d=e.onChange,p=Mn(),m=(p.reloadTrigger,p.doReload),f=i(we.useState(!1),2),h=f[0],y=f[1],v=function(e){return"uzs"===e?"uzs":"usd"}(l),b=at(s),_=at(h);we.useEffect((function(){return ie.join([b.toObserver(),_.toObserver()],{race:!0}).connect(m)}),[]);return Se(tn,{type:"number",label:c,value:s||!h?o:void 0,defaultValue:o,className:t,style:n,sx:r,onKeyDown:function(e){om(e.key)||e.preventDefault()},onChange:function(e){var t=e.target;d({unit:v,value:t.value})},onFocus:function(){return y(!0)},onBlur:function(){return y(!1)},variant:"standard",fullWidth:!0,InputProps:{startAdornment:Se(nn,{sx:{userSelect:"none",cursor:"pointer"},onClick:function(){"usd"===v&&d({value:o,unit:"uzs"}),"uzs"===v&&d({value:o,unit:"usd"})},position:"start",children:["usd"===v&&Se(jn,{sx:{width:"36px"}}),"uzs"===v&&Se("span",{style:{fontWeight:"bold"},children:"SUM"})]})}})},Hm=function(e){var t=e.className,n=e.style,r=e.sx,a=e.title,o=e.square,s=e.readonly,u=e.unit,l=void 0===u?"usd":u,c=e.value,d=void 0===c?"":c,p=e.onChange,m=Mn(),f=(m.reloadTrigger,m.doReload),h=i(we.useState(!1),2),y=h[0],v=h[1],b=we.useMemo((function(){return function(e){return"uzs"===e?"uzs":"usd"}(l)}),[l]),_=at(s),k=at(y);we.useEffect((function(){return ie.join([_.toObserver(),k.toObserver()],{race:!0}).connect(f)}),[]);var g=we.useMemo((function(){if(!o||isNaN(o))return"";if(!d)return"";var e=+d/Math.max(+o,1);return s?e.toFixed(2):e}),[o,d,s]);return Se(tn,{type:"number",label:a,value:s||!y?g:void 0,defaultValue:g,disabled:!o||isNaN(o),className:t,style:n,sx:r,onKeyDown:function(e){om(e.key)||e.preventDefault()},onChange:function(e){var t=e.target;""!==t.value?p({square:o,unit:b,value:""===t.value?"":String(+t.value*+o)}):p({square:o,unit:b,value:""})},onFocus:function(){return v(!0)},onBlur:function(){return v(!1)},variant:"standard",fullWidth:!0,InputProps:{startAdornment:Se(nn,{sx:{userSelect:"none",cursor:"pointer"},onClick:function(){"usd"===b&&p({value:d,unit:"uzs",square:o}),"uzs"===b&&p({value:d,unit:"usd",square:o})},position:"start",children:["usd"===b&&Se(jn,{sx:{width:"36px"}}),"uzs"===b&&Se("span",{style:{fontWeight:"bold"},children:"SUM"})]})}})},Wm=function(e){var t=e.className,n=e.style,r=e.sx,i=e.title,a=e.value,o=void 0===a?"":a,s=e.unit,u=void 0===s?"%":s,l=e.readonly,c=e.onChange,d=Mn(),p=(d.reloadTrigger,d.doReload),m=we.useMemo((function(){return function(e){return"1"===e?"1":"%"}(u)}),[u]),f=at(l);we.useEffect((function(){return f.subscribe(p)}),[]);return Se(tn,{type:"number",label:i,className:t,style:n,sx:r,defaultValue:o,value:l?o:void 0,onKeyDown:function(e){om(e.key)||e.preventDefault()},onChange:function(e){var t=e.target;c({unit:m,value:t.value})},variant:"standard",fullWidth:!0,InputProps:{startAdornment:Se(nn,{sx:{userSelect:"none",cursor:"pointer"},onClick:function(){"1"===m&&c({value:o,unit:"%"}),"%"===m&&c({value:o,unit:"1"})},position:"start",children:["%"===m&&Se(Bn,{}),"1"===m&&Se(Dn,{})]})}})},$m={},Gm=["komissiya_agenstva_unit","czena_sobstvennika","startovaya_czena_valyuta","komissiya_menedzhera","komissiya_agenstva","komissiya_menedzhera_unit","startovaya_czena","torg"],Ym=function(e){var t=e.isViewMode,n=e.square,r=e.value,a=void 0===r?$m:r,s=e.title,u=e.prefix,l=e.readonly,c=e.onChange,d=Om().classes,p=we.useCallback((function(){var e=Object.entries(a).map((function(e){var t=i(e,2),n=t[0],r=t[1];return[Qe(n,u),r]})).filter((function(e){var t=i(e,1)[0];return Gm.includes(t)}));return Object.fromEntries(e)}),[a]),m=i(we.useState(p),2),f=m[0],h=m[1],y=we.useMemo((function(){return S.debounce(c,0)}),[]),v=Rt((function(){var e=Object.entries(f).map((function(e){var t=i(e,2),n=t[0],r=t[1];return[u+n,r]}));y(Object.fromEntries(e))}),[f]).resetWatcher;return Rt((function(){v(),h(p)}),[n,a]),we.useEffect((function(){return function(){y.flush()}}),[]),Se(Ae,t?{children:[Se(Je,{variant:"h6",fontWeight:"bold",children:s}),Se(Um,{title:"Стартовая цена",unit:f.startovaya_czena_valyuta,value:f.startovaya_czena,onChange:function(e){var t=e.unit,n=e.value;return h((function(e){return o(o({},e),{},{startovaya_czena_valyuta:t,startovaya_czena:n})}))},className:d.onlyInput})]}:{children:[Se(Je,{variant:"h6",fontWeight:"bold",children:s}),Se(qe,{className:d.row,children:[Se(Um,{readonly:l,title:"Цена собственника",unit:f.startovaya_czena_valyuta,value:f.czena_sobstvennika,onChange:function(e){var t=e.unit,n=e.value;return h((function(e){return o(o({},e),{},{startovaya_czena_valyuta:t,czena_sobstvennika:n})}))},className:d.input}),Se(Um,{readonly:l,title:"Стартовая цена",unit:f.startovaya_czena_valyuta,value:f.startovaya_czena,onChange:function(e){var t=e.unit,n=e.value;return h((function(e){return o(o({},e),{},{startovaya_czena_valyuta:t,startovaya_czena:n})}))},className:d.input}),Se(Hm,{readonly:l,title:"Стартовая цена м²",square:n,unit:f.startovaya_czena_valyuta,value:f.startovaya_czena,onChange:function(e){var t=e.unit,n=e.value;return h((function(e){return o(o({},e),{},{startovaya_czena_valyuta:t,startovaya_czena:n})}))},className:d.input})]}),Se(qe,{className:d.row,children:Se(Rn,{className:d.checkbox,control:Se(Ee,{checked:f.torg}),onChange:function(){return h((function(e){return o(o({},e),{},{torg:!e.torg})}))},label:"Торг"})}),!t&&Se(qe,{className:d.row,children:[Se(Wm,{readonly:l,title:"Комиссия агенства",unit:f.komissiya_agenstva_unit,value:f.komissiya_agenstva,onChange:function(e){var t=e.unit,n=e.value;return h((function(e){return o(o({},e),{},{komissiya_agenstva_unit:t,komissiya_agenstva:n})}))},className:d.input}),Se(Wm,{readonly:l,title:"Комиссия менеджера",unit:f.komissiya_menedzhera_unit,value:f.komissiya_menedzhera,onChange:function(e){var t=e.unit,n=e.value;return h((function(e){return o(o({},e),{},{komissiya_menedzhera_unit:t,komissiya_menedzhera:n})}))},className:d.input})]})]})},Km=54,Xm=$l()((function(e){return{root:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",overflow:"hidden",paddingBottom:"10px"},typogrphy:{padding:"10px"},container:{overflowX:"hidden",overflowY:"scroll",padding:e.spacing(1),flex:1},appBarRoot:{background:e.palette.primary.main,maxHeight:Km,height:Km,boxShadow:"unset",color:"#000"},tabsRoot:{minHeight:Km,height:Km,marginLeft:"0 !important",marginRight:"0 !important"},tabRoot:{minHeight:Km,height:Km,color:"#fff"},tabRootTransparent:{minHeight:Km,height:Km},tabSelected:{color:"#fff !important"},indicator:{height:6,background:"#0288d1"},indicatorTransparent:{height:6,background:e.palette.primary.main}}})),Jm=function(e){var t=e.sx,n=e.withTransparentHeader,r=e.withRentTab,a=void 0===r||r,s=e.withSellTab,u=void 0===s||s,l=e.withCommonRow,c=void 0===l||l,d=e.withCommerialRow,p=void 0===d||d,m=e.readonly,f=e.isViewMode,h=void 0!==f&&f,y=e.fieldData,v=e.onChange,b=void 0===v?function(){}:v,_=Xm().classes,k=i(we.useState("rent"),2),g=k[0],x=k[1],w=we.useMemo((function(){return y.obshhaya_ploshhad?y.obshhaya_ploshhad:y.ploshhad_doma?y.ploshhad_doma:""}),[y]);return we.useEffect((function(){u?x("sell"):a&&x("rent")}),[a,u]),Se(fn,{className:_.root,sx:o(o({},t),{},{height:"100%"}),children:Se(qn,{value:g,children:[n&&Se(qe,{sx:{borderBottom:1,borderColor:"divider",pointerEvents:"all"},children:Se(Pn,{variant:"fullWidth",classes:{root:_.tabsRoot,indicator:_.indicatorTransparent},onChange:function(e,t){return x(t)},children:[u&&Se(En,{classes:{root:_.tabRootTransparent},label:"Продажа",value:"sell"}),a&&Se(En,{classes:{root:_.tabRootTransparent},label:"Аренда",value:"rent"})]})}),!n&&Se(Nn,{classes:{root:_.appBarRoot},position:"static",sx:{borderBottom:1,borderColor:"divider",pointerEvents:"all"},children:Se(Pn,{variant:"fullWidth",classes:{root:_.tabsRoot,indicator:_.indicator},onChange:function(e,t){return x(t)},children:[u&&Se(En,{classes:{root:_.tabRoot,selected:_.tabSelected},label:"Продажа",value:"sell"}),a&&Se(En,{classes:{root:_.tabRoot,selected:_.tabSelected},label:"Аренда",value:"rent"})]})}),u&&Se(On,{className:_.container,sx:{pointerEvents:m?"none":"unset"},value:"sell",children:[c&&Se(Ym,{isViewMode:h,readonly:m,title:"Продажа",prefix:"prod_",square:w,value:y,onChange:b}),p&&Se(Ym,{isViewMode:h,readonly:m,title:"Продажа ком.",prefix:"prod_kom_",square:w,value:y,onChange:b})]}),a&&Se(On,{className:_.container,sx:{pointerEvents:m?"none":"unset"},value:"rent",children:[c&&Se(Ym,{isViewMode:h,readonly:m,title:"Аренда",prefix:"rent_",value:y,onChange:b,square:w}),p&&Se(Ym,{isViewMode:h,readonly:m,title:"Аренда ком.",prefix:"rent_kom_",value:y,onChange:b,square:w})]})]})})},Zm=[{type:a.Paper,isVisible:function(e,t){return!t.hideAutofindFlag},features:["hasResponsiblePermission"],fieldBottomMargin:"1",fieldRightMargin:"1",columns:"12",fields:[{type:a.Component,element:function(e){var n=e.id,a=e.payload,s=e.features,u=e._fieldData,l=i(we.useState(null),2),c=l[0],d=l[1],p=i(we.useState(null),2),m=p[0],f=p[1],h=we.useMemo((function(){return o(o({},c),{},{occupiedBy:m})}),[c,m]),y=qm({payload:a,features:s}),v=y.pickData,b=y.render,_=y.resultSubject,k=Ve(r(t().mark((function e(){var r,i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fl.appwriteService.currentUser.$id,e.next=3,Fl.dealHistoryRequestService.readDealStateByApartment(n,r);case 3:return i=e.sent,e.next=6,Fl.dealViewService.findOccupiedByTargetApartmentId(n);case 6:a=e.sent,d(i),f(a);case 9:case"end":return e.stop()}}),e)}))),{onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},fallback:Fl.errorService.handleGlobalError}),g=k.loading,x=k.execute,w=nt({history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),z=w.handleLoadStart,V=w.handleLoadEnd,A=tt({large:!0,title:"Завершение сделки",fields:Em,payload:function(){return o(o({},a),{},{pickBid:v,bidResultSubject:_})},features:s}),T=tt({large:!0,title:"Начало сделки",fields:Pm,payload:function(){return o(o({},a),{},{data:u})},features:s});we.useEffect((function(){return Fl.dealHistoryViewService.createSubject.subscribe((function(e){e.apartment_id===n&&x()}))}),[]),we.useEffect((function(){x()}),[]);var C,F,L,I,M=function(){var e=r(t().mark((function e(r){var i,a,o,s,u,l=arguments;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=l.length>1&&void 0!==l[1]?l[1]:[],a=l.length>2&&void 0!==l[2]?l[2]:"usd",o=l.length>3&&void 0!==l[3]?l[3]:"",s=!0,z(),e.prev=5,u=Fl.appwriteService.currentUser.$id,e.next=9,Fl.dealHistoryRequestService.commitApartmentDealBegin(n,u,r,i,a,o);case 9:return e.next=11,x();case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),Fl.alertService.notify(Xs(e.t0)),s=!1;case 17:return e.prev=17,V(s),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[5,13,17,20]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){T().then(function(){var e=r(t().mark((function e(n){var r,i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:if(r=n.deal_type?n.deal_type[0]:""){e.next=5;break}return e.abrupt("return");case 5:i=[],a="usd","fixed"===n.price_type&&(i=[n.price],a=n.unit?n.unit[0]:"usd"),M(r,i,a,n.comment);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},B=function(){var e=r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!0,z(),e.prev=2,i=Fl.appwriteService.currentUser.$id,e.next=6,Fl.dealHistoryRequestService.commitApartmentDealReassign(n,i);case 6:return e.next=8,x();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),r=!1;case 13:return e.prev=13,V(r),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=r(t().mark((function e(r,i,a){var o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=!0,z(),e.prev=2,Fl.appwriteService.currentUser.$id,e.next=6,Fl.dealRequestService.commitApartmentDealEnd(n,r,i,a);case 6:return e.next=8,x();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),o=!1;case 13:return e.prev=13,V(o),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(t,n,r){return e.apply(this,arguments)}}(),R=function(e){"deal-end-action"===e&&A().then((function(e){e&&D(e.target_bid_id,e.status,e.comment)}))};return Se(Ke,{style:{pointerEvents:"all"},direction:"column",children:[Se(Je,{variant:"body1",sx:{mt:-.5,mb:1,color:function(e){return e.palette.action.active},fontWeight:"bold"},children:"Сделка"}),Se(Ke,{direction:"column",gap:"16px",children:[Se(Ke,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[Se(Ne,{loading:g,Loader:function(){return Se(Ke,{direction:"row",gap:"16px",alignItems:"center",children:[Se(Fn,{variant:"circular",width:40,height:40}),Se(Ke,{children:[Se(Fn,{sx:{mb:1},variant:"rectangular",width:210,height:20}),Se(Fn,{variant:"rectangular",width:210,height:20})]})]})},payload:h,children:(I=r(t().mark((function e(n){var r,i,a,o,s,u,l,c;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.occupiedBy){e.next=2;break}return e.abrupt("return",Se(Je,{variant:"body1",children:["Сделка в статусе"," ",Se(Ln,{href:"#",onClick:function(){return ue("/deal")},children:n.occupiedBy.status})]}));case 2:if(null!=n&&n.activeItem){e.next=4;break}return e.abrupt("return",Se(Je,{variant:"body1",children:"Сделка не создана"}));case 4:return e.next=6,Fl.userViewService.read(n.activeItem.user_id);case 6:if(r=e.sent,i=r.first_name,a=void 0===i?"Не указано":i,o=r.user_role,s=r.avatar,!(u=void 0===s?null:s)){e.next=18;break}return e.next=15,Fl.appwriteService.getImageURL(u);case 15:e.t0=e.sent,e.next=19;break;case 18:e.t0="";case 19:return l=e.t0,e.next=22,Fl.dictService.getUserRoles();case 22:return c=e.sent,e.abrupt("return",Se(Ke,{direction:"row",gap:"16px",alignItems:"center",children:[Se(pt,{alt:a,src:l}),Se(Ke,{direction:"column",children:[Se(Je,{variant:"body1",children:a}),Se(Je,{variant:"caption",style:{fontSize:"14px"},children:null!=o&&o.length?S.get(c,o[0])||o[0]:"Не указано"})]})]}));case 24:case"end":return e.stop()}}),e)}))),function(e){return I.apply(this,arguments)})}),Se(Ke,{direction:"row",gap:1,alignItems:"center",children:[Se(Ne,{loading:g,Loader:function(){return Se(Fn,{variant:"rectangular",sx:{borderRadius:"4px"},width:100,height:35})},payload:h,children:(L=r(t().mark((function e(r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.occupiedBy){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,Fl.permissionRequestService.hasReassignDelayFlagByApartmentId(n);case 4:if(!e.sent){e.next=7;break}return e.abrupt("return",Se(xt,{disabled:!0,variant:"contained",children:"Сделка активна"}));case 7:if(null==r||!r.activeItem){e.next=11;break}return i=Fl.appwriteService.currentUser.$id,a=r.activeItem.user_id===i,e.abrupt("return",Se(xt,{disabled:a,onClick:B,variant:"contained",children:a?"Сделка создана":"Забрать сделку"}));case 11:return e.abrupt("return",Se(xt,{onClick:j,variant:"contained",children:"Создать сделку"}));case 12:case"end":return e.stop()}}),e)}))),function(e){return L.apply(this,arguments)})}),Se(Ne,{loading:g,Loader:function(){return Se(Fn,{variant:"circular",width:40,height:40})},payload:h,children:(F=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Se(Dt,{transparent:!0,options:Nm,payload:n,onAction:R}));case 1:case"end":return e.stop()}}),e)}))),function(e){return F.apply(this,arguments)})})]})]}),Se(Ne,{loading:g,Loader:function(){return Se(In,{max:Number.POSITIVE_INFINITY,style:{marginRight:"auto"},children:[Se(Fn,{variant:"circular",width:28,height:28}),Se(Fn,{variant:"circular",width:28,height:28}),Se(Fn,{variant:"circular",width:28,height:28})]})},payload:h,children:(C=r(t().mark((function e(n){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=n&&null!==(i=n.reassign)&&void 0!==i&&i.length){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,Promise.all(n.reassign.filter((function(e,t,n){return n.findIndex((function(t){return t.user_id===e.user_id}))==t})).map(function(){var e=r(t().mark((function e(n){var r,i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.user_id,e.next=3,Fl.userViewService.tryRead(r);case 3:if(i=e.sent,a="",null==i||!i.avatar){e.next=9;break}return e.next=8,Fl.appwriteService.getImageURL(i.avatar);case 8:a=e.sent;case 9:return e.abrupt("return",Se(pt,{style:{height:"28px",width:"28px"},alt:null==i?void 0:i.email,src:a}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:return a=e.sent,e.abrupt("return",Se(In,{max:Number.POSITIVE_INFINITY,style:{marginRight:"auto"},children:a}));case 6:case"end":return e.stop()}}),e)}))),function(e){return C.apply(this,arguments)})})]}),b()]})}}]},{type:a.Paper,innerPadding:"0",features:["hasResponsiblePermission"],fieldBottomMargin:"1",fieldRightMargin:"1",columns:"12",fields:[{type:a.Component,element:function(e){var n,i=e.system_created_by,a=e.system_only_for_owner,o=e.system_allowance,s=Fd().classes;return Se(Ke,{style:{pointerEvents:"all"},direction:"column",children:[Se(Je,{variant:"body1",sx:{m:2,color:function(e){return e.palette.action.active},fontWeight:"bold"},children:"Доступ"}),Se(Pt,{disablePadding:!0,dense:!0,children:Se(Ne,{deps:[a,o],children:(n=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],i&&n.push(i),o&&o.forEach((function(e){return n.push(e)})),n.length){e.next=5;break}return e.abrupt("return",Se(Je,{sx:{m:2,mt:-.5},children:"Все пользователи"}));case 5:return e.t0=Se,e.t1=Ae,e.next=9,Promise.all(n.filter((function(e,t,n){return n.indexOf(e)==t})).map(function(){var e=r(t().mark((function e(n,r){var o,u,l,d,p,m;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.userViewService.read(n);case 2:if(!(u=e.sent).avatar){e.next=9;break}return e.next=6,Fl.appwriteService.getImageURL(u.avatar);case 6:e.t0=e.sent,e.next=10;break;case 9:e.t0="";case 10:return l=e.t0,e.next=13,Fl.dictService.getUserRoles();case 13:return d=e.sent,p=[u.last_name,u.first_name,u.middle_name].filter((function(e){return e})).join(" "),m=null!==(o=u.user_role)&&void 0!==o&&o.length?S.get(d,u.user_role[0])||u.user_role[0]:"Не указано",e.abrupt("return",Se(Vt,{className:Pe(c({},s.listItemAccient,r%2==0)),children:[Se(At,{children:Se(pt,{src:l})}),Se(Ct,{primary:p,secondary:u.phone||m}),n===i&&Se(Ke,{gap:1,direction:"row",children:[Se(Qt,{label:"Создал объект",color:"info"}),!!a&&Se(Qt,{label:"Эксклюзив",color:"warning"})]})]}));case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 9:return e.t2=e.sent,e.t3={children:e.t2},e.abrupt("return",(0,e.t0)(e.t1,e.t3));case 12:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})})})]})}}]},{type:a.Group,fieldRightMargin:"0",fieldBottomMargin:"0",columns:"12",fields:[{type:a.Paper,style:{height:"100%"},columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:function(e){return Ql.apply(void 0,[e].concat(["kategoriya_obekta","podkategoriya_obekta","arenda","prodazha","istochnik"]))},fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Основная информация"})}},{type:a.Text,isVisible:function(e){return Ql(e,"zagolovok")},outlined:!1,name:"zagolovok",title:"Заголовок",placeholder:"Введите текст"},{type:a.Text,isVisible:function(e){return Ql(e,"kategoriya_obekta")},outlined:!1,compute:function(e){var t=e.kategoriya_obekta;return(null==t?void 0:t.flatMap((function(e){return e})).join(", "))||""},title:"Категория объекта"},{type:a.Text,isVisible:function(e){return Ql(e,"podkategoriya_obekta")},outlined:!1,compute:function(e){return e.podkategoriya_obekta||""},title:"Подкатегория объекта"},{type:a.Text,isVisible:function(e){return Ql(e,"arenda","prodazha")},outlined:!1,compute:function(e){var t=e.arenda,n=e.prodazha;return n&&t?"Продажа, Аренда":n?"Продажа":t?"Аренда":"Не задано"},title:"Тип сделки"},{type:a.Text,isVisible:function(e){return Ql(e,"strana")},outlined:!1,columns:"6",compute:function(e){return e.strana||""},title:"Страна"},{type:a.Text,isVisible:function(e){return Ql(e,"oblast")},outlined:!1,columns:"6",compute:function(e){return e.oblast||""},title:"Область"},{type:a.Text,isVisible:function(e){return Ql(e,"gorod")},outlined:!1,compute:function(e){return e.gorod||""},title:"Город"},{type:a.Text,isVisible:function(e){return Ql(e,"ulicza")},outlined:!1,compute:function(e){var t=e.ulicza,n=[t?t.toLowerCase().includes("улица")?t:"улица ".concat(t):null].filter((function(e){return e}));return n.length?n.flatMap((function(e){return e})).join(", "):"Не указан"},title:"Адрес"},{type:a.Text,isVisible:function(e){return Ql(e,"rajon")},outlined:!1,compute:function(e){return e.rajon||""},title:"Район"},{type:a.Text,isVisible:function(e){return Ql(e,"mahallya")},outlined:!1,compute:function(e){return e.mahallya||""},title:"Махалля"},{type:a.Text,isVisible:function(e){return Ql(e,"orientir")},outlined:!1,compute:function(e){return e.orientir||""},title:"Ориентир"},{type:a.Text,isVisible:function(e){return Ql(e,"metro")},outlined:!1,compute:function(e){return e.metro||""},title:"Метро"},{type:a.Fragment,isVisible:function(e){var t=!1;return t=t||Xe(e.podkategoriya_obekta,"Квартиры")},fields:[{type:a.Text,isVisible:function(e){return Ql(e,"nomer_doma")},features:["hasApartmentHouseNumberPermission"],columns:"6",outlined:!1,name:"nomer_doma",title:"№ дома"},{type:a.Text,isVisible:function(e){return Ql(e,"nomer_kvartiry")},features:["hasApartmentHouseNumberPermission"],columns:"6",outlined:!1,name:"nomer_kvartiry",title:"№ квартиры"}]},{type:a.Fragment,isVisible:function(e){var t=!1;return t=(t=(t=t||null!==e.kategoriya_obekta)||null!==e.podkategoriya_obekta)&&!Xe(e.podkategoriya_obekta,"Квартиры")},fields:[{type:a.Text,isVisible:function(e){return Ql(e,"nomer_doma")},features:["hasApartmentHouseNumberPermission"],outlined:!1,name:"nomer_doma",title:"№ дома"}]},{type:a.Text,isVisible:function(e){return Ql(e,"istochnik")},outlined:!1,compute:function(e){return e.istochnik||""},title:"Источник"},{type:a.Component,isVisible:function(e){return Ql(e,"tip_klienta")},fieldBottomMargin:"2",element:function(e){var n,i=e.contact_id;return Se(Ne,{payload:i,Loader:function(){return Se(tn,{fullWidth:!0,variant:"standard",label:"Тип клиента",InputProps:{readOnly:!0},value:"Загрузка"})},children:(n=r(t().mark((function e(){var n,r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.contactViewService.tryRead(i);case 2:return n=e.sent,r=(null==n?void 0:n.tip_klienta)||"",e.abrupt("return",Se(tn,{fullWidth:!0,variant:"standard",label:"Тип клиента",InputProps:{readOnly:!0},value:r}));case 5:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})})}},{type:a.Text,isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.podkategoriya_obekta,"Квартиры"))&&Xe(e.kategoriya_obekta,"Коммерческая","Жилая"),te(t,Ql(e,"tip_nedvizhimosti"))},outlined:!1,compute:function(e){return e.tip_nedvizhimosti||""},title:"Тип недвижимости"}]},{type:a.Group,style:{height:"100%"},columns:"6",fields:[{type:a.Component,style:{height:"100%"},fieldRightMargin:"1",fieldBottomMargin:"1",element:function(e){var t=e.onChange,n=e._fieldData,r=e.features;return Se(Jm,{withTransparentHeader:!0,readonly:!0,onChange:t,fieldData:n,isViewMode:!r.includes("hasCommissionPermission")})}}]}]},{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Fragment,isVisible:function(e){var t=!0;return t=(t=(t=t&&Xe(e.podkategoriya_obekta,"Квартиры"))&&Xe(e.kategoriya_obekta,"Жилая"))&&!Xe(e.kategoriya_obekta,"Коммерческая")},fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилая квартира)"})}},{type:a.Text,columns:"3",isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.podkategoriya_obekta,"Квартиры"))&&Xe(e.kategoriya_obekta,"Коммерческая","Жилая"),te(t,Ql(e,"nazvanie_zhk"))},outlined:!1,compute:function(e){return e.nazvanie_zhk||""},title:"Название ЖК"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.kolichestvo_komnat||""},isVisible:function(e){return Ql(e,"kolichestvo_komnat")},title:"Количество комнат"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.etazh||""},isVisible:function(e){return Ql(e,"etazh")},title:"Этаж"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.etazhnost||""},isVisible:function(e){return Ql(e,"etazhnost")},title:"Этажность"},{type:a.Text,columns:"3",outlined:!1,placeholder:"Нет данных",compute:function(e){return[e.obshhaya_ploshhad,e.ploshhad_doma].flatMap((function(e){return e})).join(" ")},isVisible:function(e){return Ql(e,"obshhaya_ploshhad","ploshhad_doma")},title:"Общая площадь М²"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya")},title:"Состояние ремонта"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.kolichestvo_spalen||""},isVisible:function(e){return Ql(e,"kolichestvo_spalen")},title:"Количество спален"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.spalnya_sanuzel||""},isVisible:function(e){return Ql(e,"spalnya_sanuzel")},title:"Комната + санузел"},{type:a.Text,columns:"3",outlined:!1,placeholder:"Нет данных",compute:function(e){return e.zhilaya_ploshhad||""},isVisible:function(e){return Ql(e,"zhilaya_ploshhad")},title:"Жилая площадь М²"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,placeholder:"Нет данных",compute:function(e){return[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"balkon","balkon_kvartira","balkon_doma")},title:"Балкон"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,placeholder:"Нет данных",compute:function(e){return[e.tip_planirovki].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"tip_planirovki")},title:"Тип планировки"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,placeholder:"Нет данных",compute:function(e){return[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"mebel","mebel_kvartira","mebel_dom")},title:"Мебель"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,placeholder:"Нет данных",compute:function(e){return[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sanuzel","sanuzel_kvartira","sanuzel_doma")},title:"Санузел"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,placeholder:"Нет данных",compute:function(e){return[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma")},title:"Тип строения"},{type:a.Text,columns:"3",outlined:!1,placeholder:"Нет данных",compute:function(e){return e.vysota_potolkov||""},isVisible:function(e){return Ql(e,"vysota_potolkov")},title:"Высота потолков"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya")},title:"Система отопления"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,placeholder:"Нет данных",compute:function(e){return[e.energonositel_obekta].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"energonositel_obekta")},title:"Энергоноситель объекта"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"lift_kommercziya","lift_kvartira","lift_dom")},title:"Лифт"},{type:a.Text,columns:"3",outlined:!1,placeholder:"Нет данных",compute:function(e){return e.podezd_nomer||""},isVisible:function(e){return Ql(e,"podezd_nomer")},title:"Подъезд №"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.kod_domofona||""},isVisible:function(e){return Ql(e,"kod_domofona")},title:"Код домофона"},{type:a.Text,columns:"3",outlined:!1,placeholder:"Нет данных",compute:function(e){return e.rasstoyanie_do_metro||""},isVisible:function(e){return Ql(e,"rasstoyanie_do_metro")},title:"Расстояние до метро (м)"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,placeholder:"Нет данных",compute:function(e){var t=e.vid_iz_okna,n=e.vid_iz_okna_dom;return[].concat(p(t||[]),p(n||[])).reduce((function(e,t){return e.includes(t)?e:[].concat(p(e),[t])}),[]).filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"vid_iz_okna","vid_iz_okna_dom")},title:"Вид из окна"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"parkovka","parkovka_kvartira","parkovka_zemlya")},title:"Парковка"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.god_postrojki||""},isVisible:function(e){return Ql(e,"god_postrojki")},title:"Год постройки"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.terrasa?"Да":"Нет"},isVisible:function(e){return Ql(e,"terrasa")},title:"Терраса"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.czokol_podval?"Да":"Нет"},isVisible:function(e){return Ql(e,"czokol_podval")},title:"Цоколь/Подвал"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.garderobnaya?"Да":"Нет"},isVisible:function(e){return Ql(e,"garderobnaya")},title:"Гардеробная"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.umnyj_dom?"Да":"Нет"},isVisible:function(e){return Ql(e,"umnyj_dom")},title:"Умный дом"}]},{type:a.Fragment,isVisible:function(e){var t=!0;return t=(t=(t=t&&Xe(e.podkategoriya_obekta,"Дома"))&&Xe(e.kategoriya_obekta,"Жилая"))&&!Xe(e.kategoriya_obekta,"Коммерческая")},fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилой дом)"})}},{type:a.Text,columns:"3",outlined:!1,placeholder:"Нет данных",compute:function(e){return e.kolichestvo_komnat||""},isVisible:function(e){return Ql(e,"kolichestvo_komnat")},title:"Количество комнат"},{type:a.Text,columns:"3",outlined:!1,placeholder:"Нет данных",compute:function(e){return e.etazhnost||""},isVisible:function(e){return Ql(e,"etazhnost")},title:"Этажность"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ploshhad_doma||""},isVisible:function(e){return Ql(e,"ploshhad_doma")},title:"Площадь дома М²"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.kolichestvo_sotok||""},isVisible:function(e){return Ql(e,"kolichestvo_sotok")},title:"Количество соток"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.kolichestvo_spalen||""},isVisible:function(e){return Ql(e,"kolichestvo_spalen")},title:"Количество спален"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.spalnya_sanuzel||""},isVisible:function(e){return Ql(e,"spalnya_sanuzel")},title:"Комната + санузел"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya")},title:"Состояние ремонта"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sanuzel","sanuzel_kvartira","sanuzel_doma")},title:"Санузел"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.bassejn].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"bassejn")},title:"Бассейн"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"mebel","mebel_kvartira","mebel_dom")},title:"Мебель"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,placeholder:"Нет данных",compute:function(e){return[e.sostoyanie_doma].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sostoyanie_doma")},title:"Состояние дома"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.mashina_mesto||""},isVisible:function(e){return Ql(e,"mashina_mesto")},title:"Машина-место"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.tip_planirovki].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"tip_planirovki")},title:"Тип планировки"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma")},title:"Тип строения"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.vysota_potolkov||""},isVisible:function(e){return Ql(e,"vysota_potolkov")},title:"Высота потолков"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.garazh].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"garazh")},title:"Гараж"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya")},title:"Система отопления"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya")},title:"Система кондиционирования"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.raspolozhenie_doma].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"raspolozhenie_doma")},title:"Расположение дома"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya")},title:"Канализация"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.rasstoyanie_do_metro||""},isVisible:function(e){return Ql(e,"rasstoyanie_do_metro")},title:"Расстояние до метро (м)"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){var t=e.vid_iz_okna,n=e.vid_iz_okna_dom;return[].concat(p(t||[]),p(n||[])).reduce((function(e,t){return e.includes(t)?e:[].concat(p(e),[t])}),[]).filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"vid_iz_okna","vid_iz_okna_dom")},title:"Вид из окна"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"lift_kommercziya","lift_kvartira","lift_dom")},title:"Лифт"},{type:a.Text,columns:"3",outlined:!1,placeholder:"Нет данных",compute:function(e){return e.god_postrojki||""},isVisible:function(e){return Ql(e,"god_postrojki")},title:"Год постройки"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.voda,e.voda_dom,e.voda_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"voda","voda_dom","voda_zemlya")},title:"Вода"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"gaz","gaz_dom","gaz_zemlya")},title:"Газ"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya")},title:"Электричество"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"balkon","balkon_kvartira","balkon_doma")},title:"Балкон"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya")},title:"Местоположение объекта"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.terrasa?"Да":"Нет"},isVisible:function(e){return Ql(e,"terrasa")},title:"Терраса"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.garderobnaya?"Да":"Нет"},isVisible:function(e){return Ql(e,"garderobnaya")},title:"Гардеробная"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.czokol?"Да":"Нет"},isVisible:function(e){return Ql(e,"czokol")},title:"Цоколь"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.podval?"Да":"Нет"},isVisible:function(e){return Ql(e,"podval")},title:"Подвал"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.umnyj_dom?"Да":"Нет"},isVisible:function(e){return Ql(e,"umnyj_dom")},title:"Умный дом"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.vdol_dorogi?"Да":"Нет"},isVisible:function(e){return Ql(e,"vdol_dorogi")},title:"Вдоль дороги"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.uglovoj?"Да":"Нет"},isVisible:function(e){return Ql(e,"uglovoj")},title:"Угловой"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.dva_doma_vo_dvore?"Да":"Нет"},isVisible:function(e){return Ql(e,"dva_doma_vo_dvore")},title:"2 дома во дворе"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.komnata_ohrany?"Да":"Нет"},isVisible:function(e){return Ql(e,"komnata_ohrany")},title:"Комната охраны"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.gostevoj_domik?"Да":"Нет"},isVisible:function(e){return Ql(e,"gostevoj_domik")},title:"Гостевой домик"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.barbekyu_zona?"Да":"Нет"},isVisible:function(e){return Ql(e,"barbekyu_zona")},title:"Барбекю зона"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.dopolnitelnaya_pristrojka?"Да":"Нет"},isVisible:function(e){return Ql(e,"dopolnitelnaya_pristrojka")},title:"Дополнительная пристройка"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ogorod?"Да":"Нет"},isVisible:function(e){return Ql(e,"ogorod")},title:"Огород"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.saraj?"Да":"Нет"},isVisible:function(e){return Ql(e,"saraj")},title:"Сарай"}]},{type:a.Fragment,isVisible:function(e){return(!Xe(e.podkategoriya_obekta,"Земля/Участок")||!Xe(e.kategoriya_obekta,"Коммерческая"))&&((!Xe(e.podkategoriya_obekta,"Дома")||!Xe(e.kategoriya_obekta,"Коммерческая"))&&((!Xe(e.podkategoriya_obekta,"Квартиры")||!Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.kategoriya_obekta,"Коммерческая")))},fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая недвижимость)"})}},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.kolichestvo_komnat||""},isVisible:function(e){return Ql(e,"kolichestvo_komnat")},title:"Количество комнат"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya")},title:"Назначение объекта"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sostoyanie_obekta,e["sostoyanie-obekta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sostoyanie_obekta","sostoyanie-obekta_zemlya")},title:"Состояние объекта"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.poleznaya_ploshhad||""},isVisible:function(e){return Ql(e,"poleznaya_ploshhad")},title:"Полезная площадь М²"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.etazh||""},isVisible:function(e){return Ql(e,"etazh")},title:"Этаж"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya")},title:"Состояние ремонта"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.mashina_mesto||""},isVisible:function(e){return Ql(e,"mashina_mesto")},title:"Машина-место"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.kolichestvo_sotok||""},isVisible:function(e){return Ql(e,"kolichestvo_sotok")},title:"Количество соток"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.etazhnost||""},isVisible:function(e){return Ql(e,"etazhnost")},title:"Этажность"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma")},title:"Тип строения"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"parkovka","parkovka_kvartira","parkovka_zemlya")},title:"Парковка"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sanuzel","sanuzel_kvartira","sanuzel_doma")},title:"Санузел"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return[e.obshhaya_ploshhad,e.ploshhad_doma].filter((function(e){return e})).flatMap((function(e){return e})).join(" ")},isVisible:function(e){return Ql(e,"obshhaya_ploshhad","ploshhad_doma")},title:"Общая площадь М²"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"balkon","balkon_kvartira","balkon_doma")},title:"Балкон"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.voda,e.voda_dom,e.voda_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"voda","voda_dom","voda_zemlya")},title:"Вода"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya")},title:"Канализация"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"lift_kommercziya","lift_kvartira","lift_dom")},title:"Лифт"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya")},title:"Система отопления"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"gaz","gaz_dom","gaz_zemlya")},title:"Газ"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"mebel","mebel_kvartira","mebel_dom")},title:"Мебель"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.rasstoyanie_do_metro||""},isVisible:function(e){return Ql(e,"rasstoyanie_do_metro")},title:"Расстояние до метро (м)"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya")},title:"Электричество"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.god_postrojki||""},isVisible:function(e){return Ql(e,"god_postrojki")},title:"Год постройки"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.vysota_potolkov||""},isVisible:function(e){return Ql(e,"vysota_potolkov")},title:"Высота потолков"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya")},title:"Местоположение объекта"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya")},title:"Система кондиционирования"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.raspolozhenie_obekta].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"raspolozhenie_obekta")},title:"Расположение объекта"}]},{type:a.Fragment,isVisible:function(e){var t=!0;return t=(t=(t=t&&Xe(e.podkategoriya_obekta,"Земля/Участок"))&&Xe(e.kategoriya_obekta,"Жилая"))&&!Xe(e.kategoriya_obekta,"Коммерческая")},fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилая земля/участок)"})}},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.kolichestvo_komnat||""},title:"Количество комнат",isVisible:function(e){return Ql(e,"kolichestvo_komnat")}},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya")},title:"Назначение объекта"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.tip_zemli_uchastka].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"tip_zemli_uchastka")},title:"Тип земли/участка"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.poleznaya_ploshhad||""},isVisible:function(e){return Ql(e,"poleznaya_ploshhad")},title:"Полезная площадь М²"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.etazh||""},isVisible:function(e){return Ql(e,"etazh")},title:"Этаж"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sostoyanie_obekta,e["sostoyanie-obekta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sostoyanie_obekta","sostoyanie-obekta_zemlya")},title:"Состояние объекта"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.mashina_mesto||""},isVisible:function(e){return Ql(e,"mashina_mesto")},title:"Машина-место"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.kolichestvo_sotok||""},isVisible:function(e){return Ql(e,"kolichestvo_sotok")},title:"Количество соток"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.etazhnost||""},isVisible:function(e){return Ql(e,"etazhnost")},title:"Этажность"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya")},title:"Состояние ремонта"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"parkovka","parkovka_kvartira","parkovka_zemlya")},title:"Парковка"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.rasstoyanie_do_metro||""},isVisible:function(e){return Ql(e,"rasstoyanie_do_metro")},title:"Расстояние до метро (м)"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return[e.obshhaya_ploshhad,e.ploshhad_doma].filter((function(e){return e})).flatMap((function(e){return e})).join(" ")},isVisible:function(e){return Ql(e,"obshhaya_ploshhad","ploshhad_doma")},title:"Общая площадь М²"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.voda,e.voda_dom,e.voda_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"voda","voda_dom","voda_zemlya")},title:"Вода"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya")},title:"Местоположение объекта"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.rasstoyanie_do_goroda||""},isVisible:function(e){return Ql(e,"rasstoyanie_do_goroda")},title:"Расстояние до города (м)"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya")},title:"Система отопления"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.podezdnye_puti].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"podezdnye_puti")},title:"Подъездные пути"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya")},title:"Система кондиционирования"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.god_postrojki||""},isVisible:function(e){return Ql(e,"god_postrojki")},title:"Год постройки"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya")},title:"Электричество"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"gaz","gaz_dom","gaz_zemlya")},title:"Газ"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya")},title:"Канализация"}]},{type:a.Fragment,isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.podkategoriya_obekta,"Квартиры"))&&Q(te(Xe(e.kategoriya_obekta,"Коммерческая"),Xe(e.kategoriya_obekta,"Жилая")),te(Xe(e.kategoriya_obekta,"Коммерческая"),!Xe(e.kategoriya_obekta,"Жилая")))},fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая + Жилая квартира)"})}},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.kolichestvo_komnat||""},isVisible:function(e){return Ql(e,"kolichestvo_komnat")},title:"Количество комнат"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya")},title:"Состояние ремонта"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya")},title:"Назначение объекта"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma")},title:"Тип строения"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.etazh||""},isVisible:function(e){return Ql(e,"etazh")},title:"Этаж"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"balkon","balkon_kvartira","balkon_doma")},title:"Балкон"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.tip_planirovki].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"tip_planirovki")},title:"Тип планировки"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"lift_kommercziya","lift_kvartira","lift_dom")},title:"Лифт"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.etazhnost||""},isVisible:function(e){return Ql(e,"etazhnost")},title:"Этажность"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.god_postrojki||""},isVisible:function(e){return Ql(e,"god_postrojki")},title:"Год постройки"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.mashina_mesto||""},isVisible:function(e){return Ql(e,"mashina_mesto")},title:"Машина-место"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sanuzel","sanuzel_kvartira","sanuzel_doma")},title:"Санузел"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return[e.obshhaya_ploshhad,e.ploshhad_doma].filter((function(e){return e})).flatMap((function(e){return e})).join(" ")},isVisible:function(e){return Ql(e,"obshhaya_ploshhad","ploshhad_doma")},title:"Общая площадь М²"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"parkovka","parkovka_kvartira","parkovka_zemlya")},title:"Парковка"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.zhilaya_ploshhad||""},isVisible:function(e){return Ql(e,"zhilaya_ploshhad")},title:"Жилая площадь М²"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"mebel","mebel_kvartira","mebel_dom")},title:"Мебель"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.vysota_potolkov||""},isVisible:function(e){return Ql(e,"vysota_potolkov")},title:"Высота потолков"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.kolichestvo_spalen||""},isVisible:function(e){return Ql(e,"kolichestvo_spalen")},title:"Количество спален"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya")},title:"Система отопления"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.kod_domofona||""},isVisible:function(e){return Ql(e,"kod_domofona")},title:"Код домофона"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.spalnya_sanuzel||""},isVisible:function(e){return Ql(e,"spalnya_sanuzel")},title:"Комната + санузел"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"gaz","gaz_dom","gaz_zemlya")},title:"Газ"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.podezd_nomer||""},isVisible:function(e){return Ql(e,"podezd_nomer")},title:"Подъезд №"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.rasstoyanie_do_metro||""},isVisible:function(e){return Ql(e,"rasstoyanie_do_metro")},title:"Расстояние до метро (м)"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){var t=e.vid_iz_okna,n=e.vid_iz_okna_dom;return[].concat(p(t||[]),p(n||[])).reduce((function(e,t){return e.includes(t)?e:[].concat(p(e),[t])}),[]).filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"vid_iz_okna","vid_iz_okna_dom")},title:"Вид из окна"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya")},title:"Система кондиционирования"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.raspolozhenie_obekta].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"raspolozhenie_obekta")},title:"Расположение объекта"}]},{type:a.Fragment,isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.podkategoriya_obekta,"Дома"))&&Q(te(Xe(e.kategoriya_obekta,"Коммерческая"),Xe(e.kategoriya_obekta,"Жилая")),te(Xe(e.kategoriya_obekta,"Коммерческая"),!Xe(e.kategoriya_obekta,"Жилая")))},fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческий + Жилой дом)"})}},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.kolichestvo_komnat||""},isVisible:function(e){return Ql(e,"kolichestvo_komnat")},title:"Количество комнат"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sostoyanie_doma].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sostoyanie_doma")},title:"Состояние дома"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya")},title:"Местоположение объекта"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya")},title:"Назначение объекта"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.etazhnost||""},isVisible:function(e){return Ql(e,"etazhnost")},title:"Этажность"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya")},title:"Состояние ремонта"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.raspolozhenie_obekta].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"raspolozhenie_obekta")},title:"Расположение объекта"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma")},title:"Тип строения"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ploshhad_doma||""},isVisible:function(e){return Ql(e,"ploshhad_doma")},title:"Площадь дома М²"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.raspolozhenie_doma].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"raspolozhenie_doma")},title:"Расположение дома"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.tip_planirovki].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"tip_planirovki")},title:"Тип планировки"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.bassejn].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"bassejn")},title:"Бассейн"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.kolichestvo_sotok||""},isVisible:function(e){return Ql(e,"kolichestvo_sotok")},title:"Количество соток"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sanuzel","sanuzel_kvartira","sanuzel_doma")},title:"Санузел"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.mashina_mesto||""},isVisible:function(e){return Ql(e,"mashina_mesto")},title:"Машина-место"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.kolichestvo_spalen||""},isVisible:function(e){return Ql(e,"kolichestvo_spalen")},title:"Количество спален"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.voda,e.voda_dom,e.voda_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"voda","voda_dom","voda_zemlya")},title:"Вода"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"lift_kommercziya","lift_kvartira","lift_dom")},title:"Лифт"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.spalnya_sanuzel||""},isVisible:function(e){return Ql(e,"spalnya_sanuzel")},title:"Комната + санузел"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya")},title:"Система отопления"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"mebel","mebel_kvartira","mebel_dom")},title:"Мебель"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.rasstoyanie_do_metro||""},isVisible:function(e){return Ql(e,"rasstoyanie_do_metro")},title:"Расстояние до метро (м)"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"gaz","gaz_dom","gaz_zemlya")},title:"Газ"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya")},title:"Система кондиционирования"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.vysota_potolkov||""},isVisible:function(e){return Ql(e,"vysota_potolkov")},title:"Высота потолков"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya")},title:"Электричество"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){var t=e.vid_iz_okna,n=e.vid_iz_okna_dom;return[].concat(p(t||[]),p(n||[])).reduce((function(e,t){return e.includes(t)?e:[].concat(p(e),[t])}),[]).filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"vid_iz_okna","vid_iz_okna_dom")},title:"Вид из окна"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.garazh].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"garazh")},title:"Гараж"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya")},title:"Канализация"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"balkon","balkon_kvartira","balkon_doma")},title:"Балкон"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.god_postrojki||""},isVisible:function(e){return Ql(e,"god_postrojki")},title:"Год постройки"}]},{type:a.Fragment,isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.podkategoriya_obekta,"Земля/Участок"))&&Q(te(Xe(e.kategoriya_obekta,"Коммерческая"),Xe(e.kategoriya_obekta,"Жилая")),te(Xe(e.kategoriya_obekta,"Коммерческая"),!Xe(e.kategoriya_obekta,"Жилая")))},fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая + Жилая земля/участок)"})}},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.kolichestvo_komnat||""},isVisible:function(e){return Ql(e,"kolichestvo_komnat")},title:"Количество комнат"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya")},title:"Назначение объекта"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.tip_zemli_uchastka].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"tip_zemli_uchastka")},title:"Тип земли/участка"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.poleznaya_ploshhad||""},isVisible:function(e){return Ql(e,"poleznaya_ploshhad")},title:"Полезная площадь М²"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.etazh||""},isVisible:function(e){return Ql(e,"etazh")},title:"Этаж"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sostoyanie_obekta,e["sostoyanie-obekta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sostoyanie_obekta","sostoyanie-obekta_zemlya")},title:"Состояние объекта"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.mashina_mesto||""},isVisible:function(e){return Ql(e,"mashina_mesto")},title:"Машина-место"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.kolichestvo_sotok||""},isVisible:function(e){return Ql(e,"kolichestvo_sotok")},title:"Количество соток"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.etazhnost||""},isVisible:function(e){return Ql(e,"etazhnost")},title:"Этажность"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya")},title:"Состояние ремонта"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"parkovka","parkovka_kvartira","parkovka_zemlya")},title:"Парковка"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.rasstoyanie_do_metro||""},isVisible:function(e){return Ql(e,"rasstoyanie_do_metro")},title:"Расстояние до метро (м)"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return[e.obshhaya_ploshhad,e.ploshhad_doma].filter((function(e){return e})).flatMap((function(e){return e})).join(" ")},isVisible:function(e){return Ql(e,"obshhaya_ploshhad","ploshhad_doma")},title:"Общая площадь М²"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.voda,e.voda_dom,e.voda_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"voda","voda_dom","voda_zemlya")},title:"Вода"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya")},title:"Местоположение объекта"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.rasstoyanie_do_goroda||""},isVisible:function(e){return Ql(e,"rasstoyanie_do_goroda")},title:"Расстояние до города (м)"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya")},title:"Система отопления"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.podezdnye_puti].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"podezdnye_puti")},title:"Подъездные пути"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya")},title:"Система кондиционирования"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.god_postrojki||""},isVisible:function(e){return Ql(e,"god_postrojki")},title:"Год постройки"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya")},title:"Электричество"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"gaz","gaz_dom","gaz_zemlya")},title:"Газ"},{type:a.Items,freeSolo:!0,columns:"3",outlined:!1,compute:function(e){return[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((function(e){return e})).flatMap((function(e){return e}))},isVisible:function(e){return Ql(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya")},title:"Канализация"}]}]},{type:a.Paper,isVisible:function(e){return Ql(e,"vnutri_est","ryadom_est")},fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте"})}},{type:a.Component,fieldBottomMargin:"1",columns:"6",element:function(){return Se(Je,{children:"Внутри есть:"})}},{type:a.Component,fieldBottomMargin:"1",columns:"6",element:function(){return Se(Je,{children:"Рядом есть:"})}},{type:a.Component,columns:"6",isVisible:function(e){var t=e.vnutri_est;return!(null==t||!t.length)},element:function(e){var t=e.vnutri_est;return Se("div",{children:Se(qe,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",gap:1},children:null==t?void 0:t.map((function(e,t){return Se(Qt,{label:e},t)}))})})}},{type:a.Component,columns:"6",isVisible:function(e){var t=e.ryadom_est;return!(null==t||!t.length)},element:function(e){var t=e.ryadom_est;return Se("div",{children:Se(qe,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",gap:1},children:null==t?void 0:t.map((function(e,t){return Se(Qt,{label:e},t)}))})})}}]},{type:a.Paper,isVisible:function(e){return Ql(e,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany","ploshhad_gostevogo_doma","ploshhad_dopolnitelnoj_pristrojki")},fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,sx:{mb:2},element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади"})}},{type:a.Fragment,isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая","Жилая"))&&Xe(e.podkategoriya_obekta,"Квартиры")},fields:[{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ploshhad_gostinnoj||""},isVisible:function(e){return Ql(e,"ploshhad_gostinnoj")},title:"Площадь гостинной М²"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ploshhad_spalni||""},isVisible:function(e){return Ql(e,"ploshhad_spalni")},title:"Площадь комнаты М²"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ploshhad_holla||""},isVisible:function(e){return Ql(e,"ploshhad_holla")},title:"Площадь холла М²"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ploshhad_kuhni||""},isVisible:function(e){return Ql(e,"ploshhad_kuhni")},title:"Площадь кухни М²"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ploshhad_sanuzla||""},isVisible:function(e){return Ql(e,"ploshhad_sanuzla")},title:"Площадь санузла М²"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ploshhad_balkona||""},isVisible:function(e){return Ql(e,"ploshhad_balkona")},title:"Площадь балкона М²"}]},{type:a.Fragment,isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая","Жилая"))&&Xe(e.podkategoriya_obekta,"Дома")},fields:[{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ploshhad_gostinnoj||""},isVisible:function(e){return Ql(e,"ploshhad_gostinnoj")},title:"Площадь гостинной М²"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ploshhad_spalni||""},isVisible:function(e){return Ql(e,"ploshhad_spalni")},title:"Площадь комнаты М²"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ploshhad_holla||""},isVisible:function(e){return Ql(e,"ploshhad_holla")},title:"Площадь холла М²"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ploshhad_kuhni||""},isVisible:function(e){return Ql(e,"ploshhad_kuhni")},title:"Площадь кухни М²"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ploshhad_sanuzla||""},isVisible:function(e){return Ql(e,"ploshhad_sanuzla")},title:"Площадь санузла М²"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ploshhad_balkona||""},isVisible:function(e){return Ql(e,"ploshhad_balkona")},title:"Площадь балкона М²"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ploshhad_terrasy||""},isVisible:function(e){return Ql(e,"ploshhad_terrasy")},title:"Площадь террасы М²"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ploshhad_komnaty_ohrany||""},isVisible:function(e){return Ql(e,"ploshhad_komnaty_ohrany")},title:"Площадь комнаты охраны М²"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ploshhad_gostevogo_doma||""},isVisible:function(e){return Ql(e,"ploshhad_gostevogo_doma")},title:"Площадь гостевого дома М²"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ploshhad_dopolnitelnoj_pristrojki||""},isVisible:function(e){return Ql(e,"ploshhad_dopolnitelnoj_pristrojki")},title:"Площадь дополнительной пристройки М²"}]},{type:a.Fragment,isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая","Жилая"))&&Xe(e.podkategoriya_obekta,"Земля/Участок")},fields:[{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ploshhad_gostinnoj||""},isVisible:function(e){return Ql(e,"ploshhad_gostinnoj")},title:"Площадь гостинной М²"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ploshhad_spalni||""},isVisible:function(e){return Ql(e,"ploshhad_spalni")},title:"Площадь комнаты М²"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ploshhad_holla||""},isVisible:function(e){return Ql(e,"ploshhad_holla")},title:"Площадь холла М²"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ploshhad_kuhni||""},isVisible:function(e){return Ql(e,"ploshhad_kuhni")},title:"Площадь кухни М²"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ploshhad_sanuzla||""},isVisible:function(e){return Ql(e,"ploshhad_sanuzla")},title:"Площадь санузла М²"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ploshhad_balkona||""},isVisible:function(e){return Ql(e,"ploshhad_balkona")},title:"Площадь балкона М²"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ploshhad_terrasy||""},isVisible:function(e){return Ql(e,"ploshhad_terrasy")},title:"Площадь террасы М²"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ploshhad_komnaty_ohrany||""},isVisible:function(e){return Ql(e,"ploshhad_komnaty_ohrany")},title:"Площадь комнаты охраны М²"}]},{type:a.Fragment,isVisible:function(e){var t=!0;return t=(t=(t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая"))&&!Xe(e.podkategoriya_obekta,"Квартиры"))&&!Xe(e.podkategoriya_obekta,"Дома"))&&!Xe(e.podkategoriya_obekta,"Земля/Участок")},fields:[{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ploshhad_gostinnoj||""},isVisible:function(e){return Ql(e,"ploshhad_gostinnoj")},title:"Площадь гостинной М²"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ploshhad_spalni||""},isVisible:function(e){return Ql(e,"ploshhad_spalni")},title:"Площадь комнаты М²"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ploshhad_holla||""},isVisible:function(e){return Ql(e,"ploshhad_holla")},title:"Площадь холла М²"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ploshhad_kuhni||""},isVisible:function(e){return Ql(e,"ploshhad_kuhni")},title:"Площадь кухни М²"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ploshhad_sanuzla||""},isVisible:function(e){return Ql(e,"ploshhad_sanuzla")},title:"Площадь санузла М²"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ploshhad_balkona||""},isVisible:function(e){return Ql(e,"ploshhad_balkona")},title:"Площадь балкона М²"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ploshhad_terrasy||""},isVisible:function(e){return Ql(e,"ploshhad_terrasy")},title:"Площадь террасы М²"},{type:a.Text,columns:"3",outlined:!1,compute:function(e){return e.ploshhad_komnaty_ohrany||""},isVisible:function(e){return Ql(e,"ploshhad_komnaty_ohrany")},title:"Площадь комнаты охраны М²"}]}]},{type:a.Paper,isVisible:function(e){return Xe(e.kategoriya_obekta,"Коммерческая","Жилая")&&Xe(e.podkategoriya_obekta,"Квартиры","Дома","Земля/Участок","Здания","Базы"),!1},fieldBottomMargin:"1",fieldRightMargin:"1",tabletHidden:!0,phoneHidden:!0,child:{type:a.Component,element:Id}},{type:a.Paper,features:["hasDescriptionPermission"],fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,sx:{mb:2},element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Описание объекта"})}},{type:a.Text,sx:{pointerEvents:"all"},inputRows:8,outlined:!1,name:"opisanie",title:"Описание"}]},{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:function(e){return e.apartment_images&&e.apartment_images.length},fields:[{type:a.Component,sx:{mb:2},element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})}},{type:a.Component,element:kd}]},{type:a.Component,isVisible:function(e,t){return!t.hideAutofindFlag},fieldBottomMargin:"1",fieldRightMargin:"1",element:function(e){var t=e._fieldData,n=e.payload,r=e.features;return Se(wm,{payload:n,features:r,fieldData:t})}}];window.apartment_card_fields=Zm;var Qm,ef,tf,nf,rf,af=function(e,t){return e.some((function(e){return e.includes(t)}))},of=function(e){var t;return(null===(t=sf.find((function(t){return(0,t.isActive)(e.location.pathname)})))||void 0===t?void 0:t.id)||"object"},sf=[{id:"owner_contact",element:function(e){var t=e.history,n=e.payload,r=e.data;return Se(Cd,{history:t,payload:n,children:Se(st,{outlinePaper:!0,readonly:!0,fields:Wc,handler:function(){return r},payload:function(){return o(o({},n),{},{hideAutofindFlag:!0})},features:n.permissions})})},isActive:function(e){return af(["/apartment/owner_contact"],e)}},{id:"object",element:function(e){var t=e.history,n=e.payload,r=e.data;return Se(Cd,{history:t,payload:n,children:Se(st,{outlinePaper:!0,readonly:!0,fields:Zm,handler:function(){return r},payload:function(){return o(o({},n),{},{hideAutofindFlag:!0})},features:n.permissions})})},isActive:function(e){return console.log(e),af(["/apartment/object"],e)}},{id:"documents",element:function(e){var n,i,a=e.history,o=e.payload,s=e.data;return Se(Cd,{history:a,payload:o,children:Se(fn,{sx:{p:1,mt:1},children:Se(Un,{disabled:!0,accept:"*",multiple:!0,items:s,tr:(i=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.appwriteService.tryReadFileName(n);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=n;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)}),fallback:Fl.errorService.handleGlobalError,onClick:(n=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.appwriteService.getFileURL(n);case 2:return r=e.sent,e.next=5,Fl.appwriteService.readFileName(n);case 5:i=e.sent,zt(r,i);case 7:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)}),onUpload:function(e){return Fl.appwriteService.uploadFile(e)}})})})},isActive:function(e){return af(["/apartment/documents"],e)}},{id:"service_comment",element:function(e){var n=e.history,a=e.payload,o=e.params.id,s=i(we.useState([]),2),u=s[0],l=s[1],c=Ve(r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.serviceCommentViewService.findAllByApartmentId(o);case 2:return n=e.sent,e.t0=l,e.next=6,Promise.all(n.map(function(){var e=r(t().mark((function e(n){var r,i,a,o,s,u,l,c;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.$id,i=n.user_id,a=n.file_id,o=n.comment,s=n.$createdAt,e.next=3,Fl.userViewService.tryRead(i);case 3:if(u=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:if(!u.avatar){e.next=12;break}return e.next=9,Fl.appwriteService.getImageURL(u.avatar);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0="";case 13:if(l=e.t0,!a){e.next=20;break}return e.next=17,Fl.appwriteService.tryReadFileName(a);case 17:e.t1=e.sent,e.next=21;break;case 20:e.t1="";case 21:return c=e.t1,e.abrupt("return",{id:r,message:o,fileId:a,userId:i,displayName:[u.last_name,u.first_name,u.middle_name,f(s).format("DD.MM.YYYY / HH:mm")].join(" "),fileName:c,avatar:l});case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).filter((function(e){return!!e})).reverse());case 6:e.t1=e.sent,(0,e.t0)(e.t1);case 8:case"end":return e.stop()}}),e)}))),{fallback:Fl.errorService.handleGlobalError,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),d=c.execute;we.useEffect((function(){d()}),[]),we.useEffect((function(){return Fl.serviceCommentViewService.createSubject.subscribe((function(e){e.apartment_id===o&&d()}))}),[]);var p=function(){var e=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fl.appwriteService.currentUser.$id,e.next=3,Fl.serviceCommentViewService.create({user_id:r,comment:n,apartment_id:o,bid_id:null,contact_id:null,file_id:null});case 3:return e.next=5,d();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=r(t().mark((function e(n,r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Fl.appwriteService.currentUser.$id,e.next=3,Fl.serviceCommentViewService.create({user_id:i,comment:n,apartment_id:o,bid_id:null,contact_id:null,file_id:r});case 3:return e.next=5,d();case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Se(Cd,{history:n,payload:a,children:Se(Mc,{payload:a,style:{height:"calc(100vh - 280px)"},messages:u,onText:p,onFile:m})})},isActive:function(e){return af(["/apartment/service_comment"],e)}}],uf="/apartment/object",lf=function(){var e=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.apartmentViewService.read(n);case 2:return r=e.sent,i=r.contact_id,e.next=6,Fl.contactViewService.tryRead(i);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),cf=re(),df=function(e){var n,a=e.payload,o=on(),s=o.push,u=o.pop,l=o.clear,c=sn({history:cf,withActionButton:!0,animation:"none",title:"Предпросмотр",pathname:"/apartment/object",routes:sf,BeforeTitle:function(e){var t=e.onClose,n=on().total;return Se(We,{sx:{mr:1,display:1===n?"none":"flex"},size:"small",onClick:t,children:Se(Hn,{})})},AfterTitle:function(e){var t=e.id,n=e.onClose;return Se(Ke,{direction:"row",gap:1,children:[Se(We,{size:"small",onClick:function(){var e=cf.location.pathname,n={"/apartment/object":"/apartment_edit/".concat(t,"/object"),"/apartment/owner_contact":"/apartment_edit/".concat(t,"/owner_contact")};Fl.routerService.push(n[e]||n[uf]),l()},children:Se(Wn,{})}),Se(We,{size:"small",onClick:n,children:Se(it,{})})]})},fetchState:(n=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lf(n);case 2:return e.t0=e.sent,e.next=5,Fl.apartmentViewService.tryRead(n);case 5:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 7:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)}),mapInitialData:function(e,t){var n=i(t,2),r=n[0],a=n[1];return{owner_contact:r,object:a,documents:a.apartment_files||[]}},mapPayload:function(){return a},onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},onSubmit:function(e,t){if(t){var n=cf.location.pathname,r={"/apartment/object":"/apartment_view/".concat(e,"/object"),"/apartment/owner_contact":"/apartment_view/".concat(e,"/owner_contact"),"/apartment/documents":"/apartment_view/".concat(e,"/documents"),"/apartment/service_comment":"/apartment_view/".concat(e,"/service_comment")};Fl.routerService.push(r[n]||r[uf]),l()}return!0},onClose:function(){u()},submitLabel:"Открыть"}),d=c.pickData,p=c.render;return function(e){s({id:"apartment",render:p,onInit:function(){cf.push(uf)},onMount:function(){d(e)}})}},pf=function(){return window.innerHeight-280},mf=function(){return window.innerHeight-280},ff=function(e,t){return e.some((function(e){return e.includes(t)}))},hf=function(e){var t;return(null===(t=yf.find((function(t){return(0,t.isActive)(e.location.pathname)})))||void 0===t?void 0:t.id)||"contact"},yf=[{id:"apartments",element:function(e){var n,i=e.history,a=e.payload,s=e.params.id,u=$n(i).listProps,l=df({payload:a}),c=pn({columns:Sd,storageKey:"apartment_columns"}).columns,d=we.useMemo((function(){return c.filter((function(e){return e.type!==dt.Action}))}),[c]);return Se(Ae,{children:Se(_c,{payload:a,history:i,children:Se(Vn,o({withInitialLoader:!0,withLoader:!0,columns:d,handler:(n=r(t().mark((function e(n){var r,i,a,u,l=arguments;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=l.length,a=new Array(i>1?i-1:0),u=1;u<i;u++)a[u-1]=l[u];return e.next=3,(r=Fl.apartmentViewService).paginate.apply(r,[o(o({},n),{},{contact_id:s})].concat(a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)}),onRowClick:function(e){return l(e.id)},onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},heightRequest:pf,payload:a},u))})})},isActive:function(e){return ff(["/contact/apartments"],e)}},{id:"bids",element:function(e){var n,i=e.history,a=e.payload,s=e.params.id,u=$n(i).listProps,l=xm({payload:a}),c=pn({columns:ip,storageKey:"bid_columns"}).columns,d=we.useMemo((function(){return c.filter((function(e){return e.type!==dt.Action}))}),[c]);return Se(Ae,{children:Se(_c,{history:i,payload:a,children:Se(Vn,o({withInitialLoader:!0,withLoader:!0,columns:d,handler:(n=r(t().mark((function e(n){var r,i,a,u,l=arguments;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=l.length,a=new Array(i>1?i-1:0),u=1;u<i;u++)a[u-1]=l[u];return e.next=3,(r=Fl.bidViewService).paginate.apply(r,[o(o({},n),{},{contact_id:s})].concat(a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)}),onRowClick:function(e){return l(e.id)},onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},heightRequest:mf,payload:a},u))})})},isActive:function(e){return ff(["/contact/bids"],e)}},{id:"contact",element:function(e){var t=e.history,n=e.payload,r=e.data;return Se(_c,{history:t,payload:n,children:Se(st,{outlinePaper:!0,readonly:!0,fields:Wc,handler:function(){return r},payload:function(){return o(o({},n),{},{hideAutofindFlag:!0})},features:n.permissions})})},isActive:function(e){return ff(["/contact/contact"],e)}},{id:"service_comment",element:function(e){var n=e.history,a=e.payload,o=e.params.id,s=i(we.useState([]),2),u=s[0],l=s[1],c=Ve(r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.serviceCommentViewService.findAllByContactId(o);case 2:return n=e.sent,e.t0=l,e.next=6,Promise.all(n.map(function(){var e=r(t().mark((function e(n){var r,i,a,o,s,u,l;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.$id,i=n.user_id,a=n.file_id,o=n.comment,s=n.$createdAt,e.next=3,Fl.userViewService.tryRead(i);case 3:if(u=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:if(!a){e.next=12;break}return e.next=9,Fl.appwriteService.tryReadFileName(a);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0="";case 13:return l=e.t0,e.abrupt("return",{id:r,message:o,fileId:a,userId:i,displayName:[u.last_name,u.first_name,u.middle_name,f(s).format("DD.MM.YYYY / HH:mm")].join(" "),fileName:l,avatar:u.avatar||""});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).filter((function(e){return!!e})).reverse());case 6:e.t1=e.sent,(0,e.t0)(e.t1);case 8:case"end":return e.stop()}}),e)}))),{fallback:Fl.errorService.handleGlobalError,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),d=c.execute;we.useEffect((function(){d()}),[]),we.useEffect((function(){return Fl.serviceCommentViewService.createSubject.subscribe((function(e){e.contact_id===o&&d()}))}),[]);var p=function(){var e=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fl.appwriteService.currentUser.$id,e.next=3,Fl.serviceCommentViewService.create({user_id:r,comment:n,apartment_id:null,bid_id:null,contact_id:o,file_id:null});case 3:return e.next=5,d();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=r(t().mark((function e(n,r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Fl.appwriteService.currentUser.$id,e.next=3,Fl.serviceCommentViewService.create({user_id:i,comment:n,apartment_id:null,bid_id:null,contact_id:o,file_id:r});case 3:return e.next=5,d();case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Se(_c,{history:n,payload:a,children:Se(Mc,{payload:a,style:{height:"calc(100vh - 280px)"},messages:u,onText:p,onFile:m})})},isActive:function(e){return ff(["/contact/service_comment"],e)}}],vf="/contact/contact",bf=re(),_f=function(e){var n,a=e.payload,o=on(),s=o.push,u=o.pop,l=o.clear,c=sn({withActionButton:!0,animation:"none",title:"Предпросмотр",history:bf,routes:yf,BeforeTitle:function(e){var t=e.onClose,n=on().total;return Se(We,{sx:{mr:1,display:1===n?"none":"flex"},size:"small",onClick:t,children:Se(Hn,{})})},AfterTitle:function(e){var t=e.id,n=e.onClose;return Se(Ke,{direction:"row",gap:1,children:[Se(We,{size:"small",onClick:function(){Fl.routerService.push("/contact_edit/".concat(t)),l()},children:Se(Wn,{})}),Se(We,{size:"small",onClick:n,children:Se(it,{})})]})},fetchState:(n=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.contactViewService.tryRead(n);case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)}),mapInitialData:function(e,t){return{contact:i(t,1)[0]}},mapPayload:function(){return a},onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},onSubmit:function(e,t){if(t){var n=bf.location.pathname,r={"/contact/apartments":"/contact_view/".concat(e,"/apartments"),"/contact/bids":"/contact_view/".concat(e,"/bids"),"/contact/contact":"/contact_view/".concat(e,"/contact"),"/contact/service_comment":"/contact_view/".concat(e,"/service_comment")};Fl.routerService.push(r[n]||r[vf]),l()}return!0},onClose:function(){u()},submitLabel:"Открыть"}),d=c.pickData,p=c.render;return function(e){s({id:"contact",render:p,onInit:function(){bf.push(vf)},onMount:function(){d(e)}})}},kf=[{type:a.Fragment,isVisible:function(e){return 0===e.activeStep},fields:[{type:a.Component,element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",mb:2,children:"Данные контакта"})}},{type:a.Text,outlined:!0,title:"Ф.И.О",isInvalid:function(e){return e.fio?null:"Обязательно к заполнению"},description:"Фамилия Имя Отчество контакта",name:"fio"},{type:a.Text,outlined:!0,title:"Телефон",isInvalid:function(e){return e.telefon?null:"Обязательно к заполнению"},description:"Телефон контакта",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon"},{type:a.Combo,outlined:!0,name:"tip_klienta",title:"Тип клиента",itemList:["Собственник","Доверенное лицо","Риелтор","Информатор","Застройщик"]}]},{type:a.Fragment,isVisible:function(e){return 2===e.activeStep},fields:[{type:a.Component,element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",mb:1,children:"Предпросмотр"})}},{type:a.Component,isVisible:function(e){return!e.contact_id},element:function(){return Se(Gn,{variant:"outlined",color:"warning",sx:{mb:2},children:"Создавая новый объект, убедитесь, что нет дубликата контакта"})}},{type:a.Component,isVisible:function(e){return!!e.contact_id},element:function(){return Se(Gn,{variant:"outlined",color:"info",sx:{mb:2},children:"Убедитесь, что это контактные данные клиента"})}},{type:a.Text,isVisible:function(e){return!!e.contact_id},compute:(tf=r(t().mark((function e(n){var r,i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.contact_id,e.next=3,Fl.contactViewService.tryRead(r);case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={};case 6:return i=e.t0,a=i.fio,o=void 0===a?"":a,e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),function(e){return tf.apply(this,arguments)}),disabled:!0,outlined:!0,title:"Ф.И.О"},{type:a.Text,isVisible:function(e){return!!e.contact_id},compute:(ef=r(t().mark((function e(n){var r,i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.contact_id,e.next=3,Fl.contactViewService.tryRead(r);case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={};case 6:return i=e.t0,a=i.telefon,o=void 0===a?"":a,e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),function(e){return ef.apply(this,arguments)}),disabled:!0,outlined:!0,title:"Телефон",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000"},{type:a.Text,fieldBottomMargin:"0",isVisible:function(e){return!!e.contact_id},compute:(Qm=r(t().mark((function e(n){var r,i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.contact_id,e.next=3,Fl.contactViewService.tryRead(r);case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={};case 6:return i=e.t0,a=i.tip_klienta,o=void 0===a?null:a,e.abrupt("return",me(o)||"Не указано");case 10:case"end":return e.stop()}}),e)}))),function(e){return Qm.apply(this,arguments)}),disabled:!0,outlined:!0,name:"tip_klienta",title:"Тип клиента"},{type:a.Text,isVisible:function(e){return!e.contact_id},outlined:!0,title:"Ф.И.О",isInvalid:function(e){return e.fio?null:"Обязательно к заполнению"},description:"Фамилия Имя Отчество контакта",name:"fio"},{type:a.Text,isVisible:function(e){return!e.contact_id},outlined:!0,title:"Телефон",isInvalid:function(e){return e.telefon?null:"Обязательно к заполнению"},description:"Телефон контакта",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon"},{type:a.Combo,isVisible:function(e){return!e.contact_id},outlined:!0,name:"tip_klienta",title:"Тип клиента",itemList:["Собственник","Доверенное лицо","Риелтор","Информатор","Застройщик"]}]}],gf=[{type:et.Link,action:"list-action",label:"Список объектов"},{type:et.Link,action:"list-action",label:"Создание объекта"}],xf=$l()((function(e){return{root:{position:"relative",overflow:"hidden"},header:{position:"absolute",top:0,left:0,height:65,paddingLeft:e.spacing(2),paddingRight:e.spacing(2),background:"whitesmoke",width:"100%"},content:{minHeight:300},adjust:{paddingBottom:65},listItemBackground:{background:je(e.palette.primary.main,.05)}}})),wf=Me.createLoader(12),Sf=[{id:"owner_contact",label:"Контакт",isActive:function(){return Dl(["/apartment_edit/:id/owner_contact"])}},{id:"object",label:"Объект",isActive:function(){return Dl(["/apartment_edit/:id","/apartment_edit/:id/object"])}},{id:"tasks",isDisabled:function(){return!0},label:"Задачи",isActive:function(){return Dl(["/apartment_edit/:id/tasks"])}},{id:"advertising",isDisabled:function(){return!0},label:"Реклама",isActive:function(){return Dl(["/apartment_edit/:id/advertising"])}},{id:"service_comment",isDisabled:function(){return!0},label:"Служебный комментарий",isActive:function(){return Dl(["/apartment_edit/:id/service_comment"])}},{id:"history",isDisabled:function(){return!0},label:"История",isActive:function(){return Dl(["/apartment_edit/:id/history"])}},{id:"documents",label:"Документы",isActive:function(){return Dl(["/apartment_edit/:id/documents"])}},{id:"commission_and_status",label:"Комиссия и статус",isDisabled:function(){return!0},isActive:function(){return Dl(["/apartment_edit/:id/commission_and_status"])}}],zf=function(e,t){if(!t){var n=Il("id","create");"owner_contact"===e&&Fl.routerService.replace("/apartment_edit/".concat(n,"/owner_contact")),"object"===e&&Fl.routerService.replace("/apartment_edit/".concat(n,"/object")),"tasks"===e&&Fl.routerService.replace("/apartment_edit/".concat(n,"/tasks")),"advertising"===e&&Fl.routerService.replace("/apartment_edit/".concat(n,"/advertising")),"service_comment"===e&&Fl.routerService.replace("/apartment_edit/".concat(n,"/service_comment")),"history"===e&&Fl.routerService.replace("/apartment_edit/".concat(n,"/history")),"documents"===e&&Fl.routerService.replace("/apartment_edit/".concat(n,"/documents")),"commission_and_status"===e&&Fl.routerService.replace("/apartment_edit/".concat(n,"/commission_and_status"))}},Vf=function(e){var t=e.payload,n=e.children,r=e.mode,i=void 0===r?H.Paper:r,a=we.useMemo((function(){return"tabs"===i?H.Tabs:H.Paper}),[i]);return Se(Ce,{withFixedPos:!0,fixedPosHeaderAdjust:i===H.Paper?85:64,mode:a,options:Sf,payload:t,onActiveOptionChange:zf,children:n})},Af=[{type:et.Link,isVisible:function(){return!!Fl.routerService.previousPath},action:"list-action",label:Se(Ge,{sx:{display:"block"}})},{type:et.Link,action:"list-action",label:"База объектов"},{type:et.Link,action:"list-action",isVisible:function(e){return"create"!==e.id},label:"Редактирование документа"},{type:et.Link,action:"list-action",isVisible:function(e){return"create"===e.id},label:"Создание документа"},{type:et.Button,isDisabled:function(e){return!e.hasChanged},action:"save-action",label:"Сохранить"}],Tf=function(e){var n,i,a=e.data,o=e.onSubmit,s=e.onChange,u=e.fullScreen,l=nt({history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),c=l.handleLoadStart,d=l.handleLoadEnd,p=function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=3;break}return e.next=3,o(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return ir({data:a,fullScreen:u,fallback:Fl.errorService.handleGlobalError,onClick:(i=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.appwriteService.getFileURL(n);case 2:return r=e.sent,e.next=5,Fl.appwriteService.readFileName(n);case 5:i=e.sent,zt(r,i);case 7:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)}),onUpload:function(e){return Fl.appwriteService.uploadFile(e)},onLoadStart:c,onLoadEnd:d,onSubmit:p,onChange:s,submitLabel:"Сохранить",tr:(n=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.appwriteService.tryReadFileName(n);case 2:return r=e.sent,e.abrupt("return",r||n);case 4:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})})},Cf=[{type:et.Link,isVisible:function(){return!!Fl.routerService.previousPath},action:"list-action",label:Se(Ge,{sx:{display:"block"}})},{type:et.Link,action:"list-action",label:"База объектов"},{type:et.Link,action:"list-action",label:"Просмотр документа"},{type:et.Button,isDisabled:function(e){return!e.payload.permissions.hasApartmentUpdatePermission},action:"edit-action",label:"Редактировать"}],Ff=we.forwardRef((function(e,n){var i,a,o=e.item,s=e.loading,u=e.className,l=e.style;return Se("div",{className:u,style:l,ref:n,children:Se(fn,{sx:{position:"relative",overflow:"hidden"},children:[Se(Vt,{children:[Se(At,{children:Se(Ne,{loading:s,payload:o,Loader:function(){return Se(Fn,{variant:"circular",width:40,height:40})},children:(a=r(t().mark((function e(n){var r,i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.user_id,e.next=3,Fl.userViewService.tryRead(r);case 3:if(null==(i=e.sent)||!i.avatar){e.next=10;break}return e.next=7,Fl.appwriteService.getImageURL(i.avatar);case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=void 0;case 11:return a=e.t0,e.abrupt("return",Se(pt,{alt:null==i?void 0:i.email,src:a,sx:{height:40,mr:2,width:40}}));case 13:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})})}),Se(Ne,{loading:s,payload:o,Loader:function(){return Se(Ke,{flex:1,children:[Se(Fn,{sx:{mb:1},variant:"rectangular",width:210,height:22}),Se(Fn,{variant:"rectangular",width:170,height:22})]})},children:(i=r(t().mark((function e(n){var r,i,a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.user_id,i=n.type,e.next=3,Fl.userViewService.tryRead(r);case 3:return a=e.sent,o=[null==a?void 0:a.first_name,null==a?void 0:a.last_name,null==a?void 0:a.middle_name].filter((function(e){return e})).join(" "),s=function(){return"deal-begin"===i?"Создал сделку":"deal-end"===i?"Завершил сделку":"deal-reassign"===i?"Взял ответственность":"deal-status"===i?"Изменил статус":"Что-то сделал"},e.abrupt("return",Se(Ct,{primary:o,secondary:s()}));case 7:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})}),Se(Je,{children:f(o.$createdAt).format("HH:mm DD/MM/YYYY")})]}),!!o.comment&&Se(qe,{component:"pre",sx:{ml:1,mr:1,mb:1},children:Se(Lt,{config:Cc,handler:function(){return o.comment}})}),Se(qe,{sx:{position:"absolute",top:0,left:0,bottom:0,width:6,zIndex:1,background:"skyblue"}})]})})})),Lf="real-estate__headerRoot",If=[{type:et.Link,isVisible:function(){return!!Fl.routerService.previousPath},action:"list-action",label:Se(Ge,{sx:{display:"block"}})},{type:et.Link,action:"list-action",label:"База объектов"},{type:et.Link,action:"list-action",label:"Просмотр истории"}],Mf=Me.createLoader(12),jf=function(){return Se(qe,{sx:{mb:1,minHeight:32},children:Se(Tn,{sx:{height:"100%"},hideOverflowY:!0,children:Se(qe,{sx:{display:"flex",alignItems:"center",justifyContent:"stretch",gap:1},children:[Se(Je,{variant:"subtitle2",children:"Объекты:"}),Se(Ne,{payload:null,Loader:Mf,children:(n=r(t().mark((function e(){var n,r,i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.apartmentRequestService.getAllApartmentCount();case 2:return n=e.sent,e.next=5,Fl.apartmentRequestService.getRentApartmentCount();case 5:return r=e.sent,e.next=8,Fl.apartmentRequestService.getSellApartmentCount();case 8:return i=e.sent,e.next=11,Fl.apartmentRequestService.getArchiveApartmentCount();case 11:return a=e.sent,e.next=14,Fl.apartmentRequestService.getNewApartmentCount();case 14:return o=e.sent,e.abrupt("return",Se(Ke,{direction:"row",gap:1,sx:{pointerEvents:"none"},children:[Se(qe,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[Se(or,{orientation:"vertical"}),Se(Ln,{href:"#",children:["Всего ",n]}),Se(or,{orientation:"vertical"})]}),Se(qe,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[Se(or,{orientation:"vertical"}),Se(Ln,{href:"#",children:["Аренда ",r]}),Se(or,{orientation:"vertical"})]}),Se(qe,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[Se(or,{orientation:"vertical"}),Se(Ln,{href:"#",children:["Продажа ",i]}),Se(or,{orientation:"vertical"})]}),Se(qe,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[Se(or,{orientation:"vertical"}),Se(Ln,{href:"#",children:["Архив ",a]}),Se(or,{orientation:"vertical"})]}),Se(qe,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[Se(or,{orientation:"vertical"}),Se(Ln,{href:"#",children:["Новые ",o]}),Se(or,{orientation:"vertical"})]})]}));case 16:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})}),Se(Je,{variant:"subtitle2",children:"Сделки:"}),Se(Ne,{Loader:Mf,children:(e=r(t().mark((function e(){var n,r,i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.apartmentRequestService.getMyDealCount();case 2:return n=e.sent,e.next=5,Fl.apartmentRequestService.getTotalDealCount();case 5:return r=e.sent,e.next=8,Fl.apartmentRequestService.getNewDealCount();case 8:return i=e.sent,e.next=11,Fl.apartmentRequestService.getArchiveDealCount();case 11:return a=e.sent,e.abrupt("return",Se(Ke,{direction:"row",gap:1,sx:{pointerEvents:"none"},children:[Se(qe,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[Se(or,{orientation:"vertical"}),Se(Ln,{href:"#",children:["Всего ",r]}),Se(or,{orientation:"vertical"})]}),Se(qe,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[Se(or,{orientation:"vertical"}),Se(Ln,{href:"#",children:["Мои ",n]}),Se(or,{orientation:"vertical"})]}),Se(qe,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[Se(or,{orientation:"vertical"}),Se(Ln,{href:"#",children:["Новые ",i]}),Se(or,{orientation:"vertical"})]}),Se(qe,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[Se(or,{orientation:"vertical"}),Se(Ln,{href:"#",children:["Архив ",a]}),Se(or,{orientation:"vertical"})]})]}));case 13:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})})]})})});var e,n},Bf=function(){return window.innerHeight-100},Df=function(){return window.innerHeight-100},Rf=function(){return window.innerHeight-100},qf=function(){return window.innerHeight-100},Pf=function(){return window.innerHeight-100},Ef=[{id:"common",element:function(e){var n=e.payload,i=df({payload:n}),a=Be(Fl.apartmentViewService.reloadSubject),s=pn({columns:Sd,storageKey:"apartment_columns"}),u=s.render,l=s.pickColumns,c=s.columns,d=sr(Fl.routerService.locationState,{fallback:Fl.errorService.handleGlobalError}).listProps,p=Dp(),m=function(){var e=r(t().mark((function e(n,r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Fl.layoutService.setAppbarLoader(!0),e.prev=1,"remove-action"!==n){e.next=6;break}return e.next=5,Fl.apartmentViewService.remove(r.id);case 5:a.next();case 6:if("edit-action"===n&&Fl.routerService.push("/apartment_edit/".concat(r.id)),"copy-action"!==n){e.next=14;break}return e.next=10,Fl.apartmentViewService.read(r.id);case 10:return i=e.sent,e.next=13,Fl.apartmentViewService.create(i);case 13:a.next();case 14:if("toggle-archive"!==n){e.next=18;break}return e.next=17,Fl.apartmentViewService.toggleArchive(r.id);case 17:a.next();case 18:if("toggle-remove"!==n){e.next=22;break}return e.next=21,Fl.apartmentViewService.toggleRemove(r.id);case 21:a.next();case 22:return e.prev=22,Fl.layoutService.setAppbarLoader(!1),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[1,,22,25]])})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add-action"===r&&Fl.routerService.push("/apartment/create"),"column-setup-action"===r&&l(),"excel-action"!==r){e.next=5;break}return e.next=5,np({query:d,handler:p,payload:n,columns:c});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.featureService.hasFeature("officemanager");case 2:if(!e.sent){e.next=5;break}return i(n),e.abrupt("return");case 5:Fl.routerService.push("/apartment_view/".concat(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.permissionService.getPermissions();case 2:e.sent.hasApartmentViewPermission&&h(n.id);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Se(Ae,{children:[Se(Vn,o({withSearch:!0,withSingleSort:!0,noInitialFilters:!0,fetchDebounce:da,reloadSubject:a,title:"Объект недвижимости",filterLabel:"Фильтры",heightRequest:Df,rowActions:Vd,actions:$c,filters:Hd,columns:c,handler:p,chips:zd,AfterActionList:jf,AfterOperationList:Qp,onRowAction:m,onRowClick:y,onAction:f,selectionMode:ht.Multiple,payload:n},d)),u()]})},isActive:function(e){return Dl(["/apartment"],e)},isAvailable:function(){return!1}},{id:"rent",element:function(e){var n=e.payload,i=df({payload:n}),a=Be(Fl.apartmentViewService.reloadSubject),s=pn({columns:Sd,storageKey:"apartment_columns"}),u=s.render,l=s.columns,c=s.pickColumns,d=sr(Fl.routerService.locationState,{fallback:Fl.errorService.handleGlobalError}).listProps,p=Dp(),m=function(){var e=r(t().mark((function e(n,r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Fl.layoutService.setAppbarLoader(!0),e.prev=1,"remove-action"!==n){e.next=6;break}return e.next=5,Fl.apartmentViewService.remove(r.id);case 5:a.next();case 6:if("edit-action"===n&&Fl.routerService.push("/apartment_edit/".concat(r.id)),"copy-action"!==n){e.next=14;break}return e.next=10,Fl.apartmentViewService.read(r.id);case 10:return i=e.sent,e.next=13,Fl.apartmentViewService.create(i);case 13:a.next();case 14:if("toggle-archive"!==n){e.next=18;break}return e.next=17,Fl.apartmentViewService.toggleArchive(r.id);case 17:a.next();case 18:if("toggle-remove"!==n){e.next=22;break}return e.next=21,Fl.apartmentViewService.toggleRemove(r.id);case 21:a.next();case 22:return e.prev=22,Fl.layoutService.setAppbarLoader(!1),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[1,,22,25]])})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add-action"===r&&Fl.routerService.push("/apartment/create"),"column-setup-action"===r&&c(),"excel-action"!==r){e.next=5;break}return e.next=5,np({query:d,payload:o(o({},n),{},{_rent:!0}),handler:p,columns:l});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.featureService.hasFeature("officemanager");case 2:if(!e.sent){e.next=5;break}return i(n),e.abrupt("return");case 5:Fl.routerService.push("/apartment_view/".concat(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.permissionService.getPermissions();case 2:e.sent.hasApartmentViewPermission&&h(n.id);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Se(Ae,{children:[Se(Vn,o({withSearch:!0,withSingleSort:!0,noInitialFilters:!0,fetchDebounce:da,reloadSubject:a,title:"Объект недвижимости",filterLabel:"Фильтры",heightRequest:Rf,rowActions:Vd,actions:$c,filters:Hd,columns:l,handler:p,chips:zd,AfterActionList:jf,AfterOperationList:Qp,onRowAction:m,onRowClick:y,onAction:f,selectionMode:ht.Multiple,payload:function(){return o(o({},n),{},{_rent:!0})}},d)),u()]})},isActive:function(e){return Dl(["/apartment_rent"],e)},isAvailable:function(){return!1}},{id:"sell",element:function(e){var n=e.payload,i=df({payload:n}),a=Be(Fl.apartmentViewService.reloadSubject),s=pn({columns:Sd,storageKey:"apartment_columns"}),u=s.render,l=s.pickColumns,c=s.columns,d=sr(Fl.routerService.locationState,{fallback:Fl.errorService.handleGlobalError}).listProps,p=Dp(),m=function(){var e=r(t().mark((function e(n,r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Fl.layoutService.setAppbarLoader(!0),e.prev=1,"remove-action"!==n){e.next=6;break}return e.next=5,Fl.apartmentViewService.remove(r.id);case 5:a.next();case 6:if("edit-action"===n&&Fl.routerService.push("/apartment_edit/".concat(r.id)),"copy-action"!==n){e.next=14;break}return e.next=10,Fl.apartmentViewService.read(r.id);case 10:return i=e.sent,e.next=13,Fl.apartmentViewService.create(i);case 13:a.next();case 14:if("toggle-archive"!==n){e.next=18;break}return e.next=17,Fl.apartmentViewService.toggleArchive(r.id);case 17:a.next();case 18:if("toggle-remove"!==n){e.next=22;break}return e.next=21,Fl.apartmentViewService.toggleRemove(r.id);case 21:a.next();case 22:return e.prev=22,Fl.layoutService.setAppbarLoader(!1),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[1,,22,25]])})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add-action"===r&&Fl.routerService.push("/apartment/create"),"column-setup-action"===r&&l(),"excel-action"!==r){e.next=5;break}return e.next=5,np({query:d,payload:o(o({},n),{},{_sell:!0}),handler:p,columns:c});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.featureService.hasFeature("officemanager");case 2:if(!e.sent){e.next=5;break}return i(n),e.abrupt("return");case 5:Fl.routerService.push("/apartment_view/".concat(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.permissionService.getPermissions();case 2:e.sent.hasApartmentViewPermission&&h(n.id);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Se(Ae,{children:[Se(Vn,o({withSearch:!0,withSingleSort:!0,noInitialFilters:!0,fetchDebounce:da,reloadSubject:a,title:"Объект недвижимости",filterLabel:"Фильтры",heightRequest:qf,rowActions:Vd,actions:$c,filters:Hd,columns:c,handler:p,chips:zd,AfterActionList:jf,AfterOperationList:Qp,onRowAction:m,onRowClick:y,onAction:f,selectionMode:ht.Multiple,payload:function(){return o(o({},n),{},{_sell:!0})}},d)),u()]})},isActive:function(e){return Dl(["/apartment_sell"],e)},isAvailable:function(){return!1}},{id:"archive",element:function(e){var n=e.payload,i=df({payload:n}),a=Be(Fl.apartmentViewService.reloadSubject),s=pn({columns:Sd,storageKey:"apartment_columns"}),u=s.render,l=s.pickColumns,c=s.columns,d=sr(Fl.routerService.locationState,{fallback:Fl.errorService.handleGlobalError}).listProps,p=Dp(),m=function(){var e=r(t().mark((function e(n,r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Fl.layoutService.setAppbarLoader(!0),e.prev=1,"remove-action"!==n){e.next=6;break}return e.next=5,Fl.apartmentViewService.remove(r.id);case 5:a.next();case 6:if("edit-action"===n&&Fl.routerService.push("/apartment_edit/".concat(r.id)),"copy-action"!==n){e.next=14;break}return e.next=10,Fl.apartmentViewService.read(r.id);case 10:return i=e.sent,e.next=13,Fl.apartmentViewService.create(i);case 13:a.next();case 14:if("toggle-archive"!==n){e.next=18;break}return e.next=17,Fl.apartmentViewService.toggleArchive(r.id);case 17:a.next();case 18:if("toggle-remove"!==n){e.next=22;break}return e.next=21,Fl.apartmentViewService.toggleRemove(r.id);case 21:a.next();case 22:return e.prev=22,Fl.layoutService.setAppbarLoader(!1),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[1,,22,25]])})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add-action"===r&&Fl.routerService.push("/apartment/create"),"column-setup-action"===r&&l(),"excel-action"!==r){e.next=5;break}return e.next=5,np({query:d,payload:o(o({},n),{},{_archive:!0}),handler:p,columns:c});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.featureService.hasFeature("officemanager");case 2:if(!e.sent){e.next=5;break}return i(n),e.abrupt("return");case 5:Fl.routerService.push("/apartment_view/".concat(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.permissionService.getPermissions();case 2:e.sent.hasApartmentViewPermission&&h(n.id);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Se(Ae,{children:[Se(Vn,o({withSearch:!0,withSingleSort:!0,noInitialFilters:!0,fetchDebounce:da,reloadSubject:a,title:"Неактивные объекты",filterLabel:"Фильтры",heightRequest:Bf,rowActions:Vd,actions:$c,filters:Hd,columns:c,handler:p,chips:zd,onRowAction:m,onRowClick:y,onAction:f,AfterActionList:jf,AfterOperationList:Qp,selectionMode:ht.Multiple,payload:function(){return o(o({},n),{},{_archive:!0})}},d)),u()]})},isActive:function(e){return Dl(["/apartment_archive"],e)},isAvailable:function(){return!1}},{id:"remove",element:function(e){var n=e.payload,i=df({payload:n}),a=Be(Fl.apartmentViewService.reloadSubject),s=pn({columns:Sd,storageKey:"apartment_columns"}),u=s.render,l=s.pickColumns,c=s.columns,d=sr(Fl.routerService.locationState,{fallback:Fl.errorService.handleGlobalError}).listProps,p=Dp(),m=function(){var e=r(t().mark((function e(n,r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Fl.layoutService.setAppbarLoader(!0),e.prev=1,"remove-action"!==n){e.next=6;break}return e.next=5,Fl.apartmentViewService.remove(r.id);case 5:a.next();case 6:if("edit-action"===n&&Fl.routerService.push("/apartment_edit/".concat(r.id)),"copy-action"!==n){e.next=14;break}return e.next=10,Fl.apartmentViewService.read(r.id);case 10:return i=e.sent,e.next=13,Fl.apartmentViewService.create(i);case 13:a.next();case 14:if("toggle-archive"!==n){e.next=18;break}return e.next=17,Fl.apartmentViewService.toggleArchive(r.id);case 17:a.next();case 18:if("toggle-remove"!==n){e.next=22;break}return e.next=21,Fl.apartmentViewService.toggleRemove(r.id);case 21:a.next();case 22:return e.prev=22,Fl.layoutService.setAppbarLoader(!1),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[1,,22,25]])})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add-action"===r&&Fl.routerService.push("/apartment/create"),"column-setup-action"===r&&l(),"excel-action"!==r){e.next=5;break}return e.next=5,np({query:d,payload:o(o({},n),{},{_remove:!0}),handler:p,columns:c});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.featureService.hasFeature("officemanager");case 2:if(!e.sent){e.next=5;break}return i(n),e.abrupt("return");case 5:Fl.routerService.push("/apartment_view/".concat(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.permissionService.getPermissions();case 2:e.sent.hasApartmentViewPermission&&h(n.id);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Se(Ae,{children:[Se(Vn,o({withSearch:!0,withSingleSort:!0,noInitialFilters:!0,fetchDebounce:da,reloadSubject:a,title:"Удаленные объекты",filterLabel:"Фильтры",heightRequest:Pf,rowActions:Vd,actions:$c,filters:Hd,columns:c,handler:p,chips:zd,onRowAction:m,onRowClick:y,onAction:f,AfterActionList:jf,AfterOperationList:Qp,selectionMode:ht.Multiple,payload:function(){return o(o({},n),{},{_remove:!0})}},d)),u()]})},isActive:function(e){return Dl(["/apartment_remove"],e)},isAvailable:function(){return!1}}],Nf=function(e){var n=e.images,i=e.onChange,a=nt({history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),o=a.handleLoadStart,s=a.handleLoadEnd,u=a.loading,l=function(){var e=r(t().mark((function e(){var a,u,l,c,d;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!0,o(),e.prev=2,e.next=5,kt("*");case 5:if(u=e.sent){e.next=8;break}return e.abrupt("return");case 8:return l=Et(n)||[],e.next=11,Promise.all(u.map(function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fl.appwriteService.uploadFile(n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:c=e.sent,d=[].concat(p(l),p(c)),i(d),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(2),a=!1,Fl.alertService.notify(Xs(e.t0));case 20:return e.prev=20,s(a),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[2,16,20,23]])})));return function(){return e.apply(this,arguments)}}();return Se(wt,{children:Se(xt,{disabled:u,sx:{borderRadius:"20px"},startIcon:Se(lr,{}),variant:"contained",onClick:l,children:"Добавить фото"})})},Of=function(e){var t=e.payload,n=e.context;return Se(Ke,{direction:"column",children:[Se(xt,{disabled:!n.hasChanged,variant:"contained",color:"info",sx:{height:48},onClick:t.beginSave,children:"Сохранить"}),Se(qe,{sx:{paddingTop:"24px"}})]})},Uf=$l()((function(e){return{root:{position:"absolute",padding:20,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"stretch",transform:"translate(-50%, -50%)",backgroundColor:e.palette.background.paper,borderRadius:5,gap:5},small:{top:"40%",left:"50%",maxHeight:"80%",width:500},large:{top:"50%",left:"50%",width:"calc(100vw - 60px)",height:"calc(100vh - 60px)"},content:{position:"relative",flex:1,overflowY:"auto",paddingTop:e.spacing(1),display:"flex",alignItems:"stretch",justifyContent:"stretch","& > *":{flex:1}},title:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:15,color:e.palette.text.primary},submit:{marginTop:15},disabled:{opacity:.5,pointerEvents:"none"}}})),Hf=function(e){var n=e.onChange,a=i(we.useState(Fl.ymapsService.readyStateSubject.data),2),o=a[0],s=a[1],u=i(we.useState((function(){return{address:"",open:!1}})),2),l=u[0],d=u[1];we.useEffect((function(){return Fl.ymapsService.readyStateSubject.subscribe((function(e){s(e)}))}),[]);var p=i(we.useState(null),2),m=p[0],f=p[1],h=we.useRef(null),y=nt({history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),v=y.handleLoadStart,b=y.handleLoadEnd,_=l.address,k=l.open,g=function(){h.current=null,S.current&&S.current(),d({address:"",open:!1})},x=function(){var e=r(t().mark((function e(){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=h.current,e.prev=1,!r){e.next=7;break}return e.next=5,Fl.ymapsService.getAddress(r);case 5:i=e.sent,n(i);case 7:return e.prev=7,g(),e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[1,,7,10]])})));return function(){return e.apply(this,arguments)}}(),w=Uf().classes,S=we.useRef(null);we.useEffect((function(){if(m)return Fl.ymapsService.drawMap(m,{address:_,change:function(e){return h.current=e}})}),[m]);return{render:function(){return Se(Ye,{open:k,onClose:g,children:Se(qe,{className:Pe(w.root,c({},w.large,!0)),children:[Se("div",{className:w.title,children:Se(Je,{variant:"h6",component:"h2",children:"Выберите точку"})}),Se(qe,{className:w.content,children:[Se("div",{ref:f}),!o&&Se(Me,{size:24,sx:{position:"absolute",top:0,left:0,right:0,bottom:0}})]}),Se(xt,{onClick:x,onLoadStart:v,onLoadEnd:b,variant:"contained",children:"Применить"})]})})},pickMap:function(){return d({address:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",open:!0})}}},Wf=function(e){var t=e.gorod,n=e.mahallya,r=e.nomer_doma,i=e.rajon,a=e.strana,o=e.ulicza,s=e.metro,u=e.onChange,l=Hf({onChange:u}),c=l.render,d=l.pickMap,p=we.useMemo((function(){return[a||null,t?"Город ".concat(t):null,i?"".concat(i):null,n?" ".concat(n):o?" ".concat(o):null,r?"".concat(r):null,s?"Метро ".concat(s):null].filter((function(e){return e})).join(", ")}),[t,n,r,i,a,o,s]);return Se(Ae,{children:[Se(en,{onClick:function(){return function(e){"action-modal"===e&&d(p)}("action-modal")},fullWidth:!0,variant:"contained",children:"Найти на карте"}),c()]})},$f=[{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany")},isVisible:function(e){var t=!0;return t=(t=(t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая"))&&!Xe(e.podkategoriya_obekta,"Квартиры"))&&!Xe(e.podkategoriya_obekta,"Дома"))&&!Xe(e.podkategoriya_obekta,"Земля/Участок")},fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая недвижимость)"})}},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostinnoj")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_spalni")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_holla")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_kuhni")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_sanuzla")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_balkona")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_terrasy")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_komnaty_ohrany")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"}]}]},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany")},isVisible:function(e){return!Xe(e.kategoriya_obekta,"Коммерческая")&&Xe(e.podkategoriya_obekta,"Земля/Участок")},fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Земля/Участок)"})}},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostinnoj")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_spalni")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_holla")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_kuhni")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_sanuzla")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_balkona")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_terrasy")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_komnaty_ohrany")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"}]}]},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona")},isVisible:function(e){var t=!0;return t=(t=t&&!Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Квартиры")},fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Квартиры)"})}},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostinnoj")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_spalni")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_holla")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_kuhni")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_sanuzla")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_balkona")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}]}]},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany","ploshhad_gostevogo_doma","ploshhad_dopolnitelnoj_pristrojki")},isVisible:function(e){var t=!0;return t=(t=t&&!Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Дома")},fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Дома)"})}},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostinnoj")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_spalni")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_holla")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_kuhni")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_sanuzla")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_balkona")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_terrasy")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_komnaty_ohrany")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostevogo_doma")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostevogo_doma",title:"Площадь гостевого дома М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_dopolnitelnoj_pristrojki")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_dopolnitelnoj_pristrojki",title:"Площадь дополнительной пристройки М²"}]}]},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona")},isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Квартиры")},fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая + Жилая квартира)"})}},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostinnoj")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_spalni")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_holla")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_kuhni")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_sanuzla")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_balkona")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}]}]},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany","ploshhad_gostevogo_doma","ploshhad_dopolnitelnoj_pristrojki")},isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Дома")},fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческий + Жилой дом)"})}},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostinnoj")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_spalni")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_holla")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_kuhni")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_sanuzla")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_balkona")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_terrasy")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_komnaty_ohrany")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostevogo_doma")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostevogo_doma",title:"Площадь гостевого дома М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_dopolnitelnoj_pristrojki")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_dopolnitelnoj_pristrojki",title:"Площадь дополнительной пристройки М²"}]}]},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany")},isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Земля/Участок")},fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая + Жилая земля/участок)"})}},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostinnoj")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_spalni")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_holla")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_kuhni")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_sanuzla")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_balkona")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_terrasy")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_komnaty_ohrany")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"}]}]}],Gf=[{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"vnutri_est","ryadom_est")},isVisible:function(e){var t=!0;return t=(t=(t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая"))&&!Xe(e.podkategoriya_obekta,"Квартиры"))&&!Xe(e.podkategoriya_obekta,"Дома"))&&!Xe(e.podkategoriya_obekta,"Земля/Участок")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Group,fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая недвижимость)"})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vnutri_est")},columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Телевизор","Кондиционер","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("ryadom_est")},columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Охрана","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"vnutri_est","ryadom_est")},isVisible:function(e){var t=!1;return t=(t=t||Xe(e.podkategoriya_obekta,"Земля/Участок"))&&!Xe(e.kategoriya_obekta,"Коммерческая")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Group,fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Земля/Участок)"})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vnutri_est")},columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Забор","Катлаван","Пожарная сигнализация","Видеонаблюдение","Сигнализация","Разгрузочный пандус"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("ryadom_est")},columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Охрана","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"vnutri_est","ryadom_est")},isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Дома")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Group,fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческий + Жилой дом)"})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vnutri_est")},columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Телевизор","Кондиционер","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг","Полисадник"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("ryadom_est")},columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Охрана","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}}],Yf=[{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"kolichestvo_komnat","naznachenie_obekta","sostoyanie_obekta","poleznaya_ploshhad","etazh","sostoyanie_remonta","mashina_mesto","kolichestvo_sotok","etazhnost","tip_stroeniya","parkovka","sanuzel","obshhaya_ploshhad","balkon","voda","kanalizacziya","lift_kommercziya","sistema_otopleniya","gaz","mebel","rasstoyanie_do_metro","elektrichestvo","god_postrojki","vysota_potolkov","mestopolozhenie_obekta","sistema_kondiczionirovaniya")},isVisible:function(e){return(!Xe(e.podkategoriya_obekta,"Земля/Участок")||!Xe(e.kategoriya_obekta,"Коммерческая"))&&((!Xe(e.podkategoriya_obekta,"Дома")||!Xe(e.kategoriya_obekta,"Коммерческая"))&&((!Xe(e.podkategoriya_obekta,"Квартиры")||!Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.kategoriya_obekta,"Коммерческая")))},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая недвижимость)"})}},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kolichestvo_komnat")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:a.Component,hidden:function(e){return!e.fieldVisibility.has("naznachenie_obekta")},sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:function(e){return Se(Ze,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:function(t){return e.onChange(c({},"naznachenie_obekta",t))}})}},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("sostoyanie_obekta")},columns:"3",outlined:!1,name:"sostoyanie_obekta",title:"Состояние объекта",itemList:["Новой постройки","Недостроенный","Под снос","Коробка"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("poleznaya_ploshhad")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("etazh")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("sostoyanie_remonta")},columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("mashina_mesto")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kolichestvo_sotok")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("etazhnost")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("tip_stroeniya")},columns:"3",outlined:!1,name:"tip_stroeniya",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("parkovka")},columns:"3",outlined:!1,name:"parkovka",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sanuzel")},columns:"3",outlined:!1,name:"sanuzel",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("obshhaya_ploshhad")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("balkon")},columns:"3",outlined:!1,name:"balkon",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("voda")},columns:"3",outlined:!1,name:"voda",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("kanalizacziya")},columns:"3",outlined:!1,name:"kanalizacziya",title:"Канализация",itemList:["Да","Нет"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("lift_kommercziya")},columns:"3",outlined:!1,name:"lift_kommercziya",title:"Лифт",itemList:["Есть","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema_otopleniya")},columns:"3",outlined:!1,name:"sistema_otopleniya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("gaz")},columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("mebel")},columns:"3",outlined:!1,name:"mebel",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_metro")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("elektrichestvo")},columns:"3",outlined:!1,name:"elektrichestvo",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("god_postrojki")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("vysota_potolkov")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("mestopolozhenie_obekta")},columns:"3",outlined:!1,name:"mestopolozhenie_obekta",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema_kondiczionirovaniya")},columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"nazvanie_zhk","kolichestvo_komnat","etazh","etazhnost","etazh","obshhaya_ploshhad","sostoyanie_remonta-kvartiry","kolichestvo_spalen","spalnya_sanuzel","zhilaya_ploshhad","balkon_kvartira","tip_planirovki","mebel_kvartira","sanuzel_kvartira","tip-stroeniya_kvartiry","vysota_potolkov","sistema-otopleniya_kvartiry","energonositel_obekta","lift_kvartira","podezd_nomer","kod_domofona","rasstoyanie_do_metro","vid_iz_okna","parkovka_kvartira","god_postrojki","terrasa","czokol_podval","garderobnaya","umnyj_dom")},isVisible:function(e){if(Xe(e.podkategoriya_obekta,"Квартиры")&&Xe(e.kategoriya_obekta,"Коммерческая"))return!1;var t=!1;return t=t||Xe(e.podkategoriya_obekta,"Квартиры")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Квартиры)"})}},{type:a.Complete,hidden:function(e){return!e.fieldVisibility.has("nazvanie_zhk")},columns:"3",outlined:!1,name:"nazvanie_zhk",title:"Название ЖК",tip:['ЖК "Greenwich"','ЖК "OzMahal"','ЖК "Elysium"','ЖК "Binkat"','ЖК "Brooklyn"','ЖК "Assalom Havo"','ЖК "Istanbul City"']},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kolichestvo_komnat")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("etazh")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("etazhnost")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("obshhaya_ploshhad")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("sostoyanie_remonta-kvartiry")},columns:"3",outlined:!1,name:"sostoyanie_remonta-kvartiry",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kolichestvo_spalen")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("spalnya_sanuzel")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("zhilaya_ploshhad")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"zhilaya_ploshhad",title:"Жилая площадь М²"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("balkon_kvartira")},columns:"3",outlined:!1,name:"balkon_kvartira",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("tip_planirovki")},columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Малосемейная","Общежитие","Пентхаус","Дуплекс","Комната"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("mebel_kvartira")},columns:"3",outlined:!1,name:"mebel_kvartira",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sanuzel_kvartira")},columns:"3",outlined:!1,name:"sanuzel_kvartira",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("tip-stroeniya_kvartiry")},columns:"3",outlined:!1,name:"tip-stroeniya_kvartiry",title:"Тип строения",itemList:["Кирпичный","Монолитный","Блочный","Панельный","Деревянный","Газоблочный","Бетонно-керамзитный"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("vysota_potolkov")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema-otopleniya_kvartiry")},columns:"3",outlined:!1,name:"sistema-otopleniya_kvartiry",title:"Система отопления",itemList:["Центральное","2х контурный котел","Теплый пол"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("energonositel_obekta")},columns:"3",outlined:!1,name:"energonositel_obekta",title:"Энергоноситель объекта",itemList:["Электрофицирован","Газифицирован"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("lift_kvartira")},columns:"3",outlined:!1,name:"lift_kvartira",title:"Лифт",itemList:["Пассажирский","Грузовой","Нет"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("podezd_nomer")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"podezd_nomer",title:"Подъезд №"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kod_domofona")},columns:"3",outlined:!1,name:"kod_domofona",title:"Код домофона"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_metro")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vid_iz_okna")},columns:"3",outlined:!1,name:"vid_iz_okna",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("parkovka_kvartira")},columns:"3",outlined:!1,name:"parkovka_kvartira",title:"Парковка",itemList:["Наземная","Собственная","Подземная","В аренду","Нет"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("god_postrojki")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("terrasa")},columns:"3",outlined:!1,name:"terrasa",title:"Терраса",tr:function(e){return"Yes"===e?"Да":"Нет"}},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("czokol_podval")},columns:"3",outlined:!1,name:"czokol_podval",title:"Цоколь/Подвал",tr:function(e){return"Yes"===e?"Да":"Нет"}},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("garderobnaya")},columns:"3",outlined:!1,name:"garderobnaya",title:"Гардеробная",tr:function(e){return"Yes"===e?"Да":"Нет"}},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("umnyj_dom")},columns:"3",outlined:!1,name:"umnyj_dom",title:"Умный дом",tr:function(e){return"Yes"===e?"Да":"Нет"}}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"kolichestvo_komnat","sostoyanie_doma","god_postrojki","tip-stroeniya_doma","etazhnost","balkon_doma","tip_planirovki","bassejn","ploshhad_doma","sanuzel_doma","mashina_mesto","kolichestvo_spalen","kolichestvo_sotok","sostoyanie_remonta","lift_dom","spalnya_sanuzel","sistema-otopleniya_dom","mebel_dom","rasstoyanie_do_metro","gaz_dom","sistema-kondiczionirovaniya_dom","vysota_potolkov","elektrichestvo_dom","vid_iz_okna_dom","garazh","kanalizacziya_dom","raspolozhenie_doma","mestopolozhenie-obekta_dom","voda_dom","terrasa","garderobnaya","czokol","podval","vdol_dorogi","uglovoj","dva_doma_vo_dvore","komnata_ohrany","gostevoj_domik","barbekyu_zona","dopolnitelnaya_pristrojka","ogorod","saraj","umnyj_dom")},isVisible:function(e){if(Xe(e.podkategoriya_obekta,"Дома")&&Xe(e.kategoriya_obekta,"Коммерческая"))return!1;var t=!1;return t=t||Xe(e.podkategoriya_obekta,"Дома")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Дома)"})}},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kolichestvo_komnat")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("etazhnost")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_doma")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_doma",title:"Площадь дома М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kolichestvo_sotok")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kolichestvo_spalen")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("spalnya_sanuzel")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("sostoyanie_remonta")},columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sanuzel_doma")},columns:"3",outlined:!1,name:"sanuzel_doma",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("bassejn")},columns:"3",outlined:!1,name:"bassejn",title:"Бассейн",itemList:["Летний","Зимний","Сауна","Нет"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("mebel_dom")},columns:"3",outlined:!1,name:"mebel_dom",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("sostoyanie_doma")},columns:"3",outlined:!1,name:"sostoyanie_doma",title:"Состояние дома",itemList:["Новой постройки","Недостроенный","Под снос","Коробка"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("mashina_mesto")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("tip_planirovki")},columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Смешанный"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("tip-stroeniya_doma")},columns:"3",outlined:!1,name:"tip-stroeniya_doma",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("vysota_potolkov")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("garazh")},columns:"3",outlined:!1,name:"garazh",title:"Гараж",itemList:["Подземный","Закрытый","Под навесом","Уличный"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema-otopleniya_dom")},columns:"3",outlined:!1,name:"sistema-otopleniya_dom",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema-kondiczionirovaniya_dom")},columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_dom",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("raspolozhenie_doma")},columns:"3",outlined:!1,name:"raspolozhenie_doma",title:"Расположение дома",itemList:["По середине","В начале двора","В конце двора"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("kanalizacziya_dom")},columns:"3",outlined:!1,name:"kanalizacziya_dom",title:"Канализация",itemList:["Да","Нет"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_metro")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vid_iz_okna_dom")},columns:"3",outlined:!1,name:"vid_iz_okna_dom",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("lift_dom")},columns:"3",outlined:!1,name:"lift_dom",title:"Лифт",itemList:["Есть","Нет"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("god_postrojki")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("voda_dom")},columns:"3",outlined:!1,name:"voda_dom",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("gaz_dom")},columns:"3",outlined:!1,name:"gaz_dom",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("elektrichestvo_dom")},columns:"3",outlined:!1,name:"elektrichestvo_dom",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("balkon_doma")},columns:"3",outlined:!1,name:"balkon_doma",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("mestopolozhenie-obekta_dom")},columns:"3",outlined:!1,name:"mestopolozhenie-obekta_dom",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("terrasa")},columns:"3",outlined:!1,name:"terrasa",title:"Терраса",tr:function(e){return"Yes"===e?"Да":"Нет"}},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("garderobnaya")},columns:"3",outlined:!1,name:"garderobnaya",title:"Гардеробная",tr:function(e){return"Yes"===e?"Да":"Нет"}},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("czokol")},columns:"3",outlined:!1,name:"czokol",title:"Цоколь",tr:function(e){return"Yes"===e?"Да":"Нет"}},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("podval")},columns:"3",outlined:!1,name:"podval",title:"Подвал",tr:function(e){return"Yes"===e?"Да":"Нет"}},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("umnyj_dom")},columns:"3",outlined:!1,name:"umnyj_dom",title:"Умный дом",tr:function(e){return"Yes"===e?"Да":"Нет"}},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("vdol_dorogi")},columns:"3",outlined:!1,name:"vdol_dorogi",title:"Вдоль дороги",tr:function(e){return"Yes"===e?"Да":"Нет"}},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("uglovoj")},columns:"3",outlined:!1,name:"uglovoj",title:"Угловой",tr:function(e){return"Yes"===e?"Да":"Нет"}},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("dva_doma_vo_dvore")},columns:"3",outlined:!1,name:"dva_doma_vo_dvore",title:"2 дома во дворе",tr:function(e){return"Yes"===e?"Да":"Нет"}},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("komnata_ohrany")},columns:"3",outlined:!1,name:"komnata_ohrany",title:"Комната охраны",tr:function(e){return"Yes"===e?"Да":"Нет"}},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("gostevoj_domik")},columns:"3",outlined:!1,name:"gostevoj_domik",title:"Гостевой домик",tr:function(e){return"Yes"===e?"Да":"Нет"}},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("barbekyu_zona")},columns:"3",outlined:!1,name:"barbekyu_zona",title:"Барбекю зона",tr:function(e){return"Yes"===e?"Да":"Нет"}},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("dopolnitelnaya_pristrojka")},columns:"3",outlined:!1,name:"dopolnitelnaya_pristrojka",title:"Дополнительная пристройка",tr:function(e){return"Yes"===e?"Да":"Нет"}},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("ogorod")},columns:"3",outlined:!1,name:"ogorod",title:"Огород",tr:function(e){return"Yes"===e?"Да":"Нет"}},{type:a.YesNo,hidden:function(e){return!e.fieldVisibility.has("saraj")},columns:"3",outlined:!1,name:"saraj",title:"Сарай",tr:function(e){return"Yes"===e?"Да":"Нет"}}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"kolichestvo_komnat","naznachenie-obekta-zemlya_uchastok","tip_zemli_uchastka","poleznaya_ploshhad","etazh","sostoyanie-obekta_zemlya","mashina_mesto","kolichestvo_sotok","etazhnost","sostoyanie-remonta_zemlya","parkovka_zemlya","rasstoyanie_do_metro","obshhaya_ploshhad","voda_zemlya","mestopolozhenie-obekta_zemlya","rasstoyanie_do_goroda","sistema-otopleniya_zemlya","podezdnye_puti","sistema-kondiczionirovaniya_zemlya","god_postrojki","elektrichestvo_zemlya","gaz_zemlya","kanalizacziya_zemlya")},isVisible:function(e){return!Xe(e.kategoriya_obekta,"Коммерческая")&&Xe(e.podkategoriya_obekta,"Земля/Участок")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Земля/Участок)"})}},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kolichestvo_komnat")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:a.Component,hidden:function(e){return!e.fieldVisibility.has("naznachenie-obekta-zemlya_uchastok")},sx:{pr:1,mb:2},columns:"3",name:"naznachenie-obekta-zemlya_uchastok",element:function(e){return Se(Ze,{variant:"standard",label:"Назначение объекта",items:[{label:"Сельхоз использование",value:"Сельхоз использование"},{label:"ИЖС",value:"ИЖС"},{label:"Высотная застройка",value:"Высотная застройка"},{label:"Промышленное назначение",value:"Промышленное назначение"},{label:"ТЦ",value:"ТЦ"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Склады",value:"Склады"},{label:"Инвестпроект",value:"Инвестпроект"},{label:"Строительство образовательных учреждений",value:"Строительство образовательных учреждений"},{label:"АЗС",value:"АЗС"},{label:"Мойка",value:"Мойка"}],value:e["naznachenie-obekta_zemlya"],onChange:function(t){return e.onChange(c({},"naznachenie-obekta_zemlya",t))}})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("tip_zemli_uchastka")},columns:"3",outlined:!1,name:"tip_zemli_uchastka",title:"Тип земли/участка",itemList:["Делимый","Неделимый"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("poleznaya_ploshhad")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("etazh")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("sostoyanie-obekta_zemlya")},columns:"3",outlined:!1,name:"sostoyanie-obekta_zemlya",title:"Состояние объекта",itemList:["Пустая земля/участок","Недостроенная","Под снос"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("mashina_mesto")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kolichestvo_sotok")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("etazhnost")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("sostoyanie-remonta_zemlya")},columns:"3",outlined:!1,name:"sostoyanie-remonta_zemlya",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("parkovka_zemlya")},columns:"3",outlined:!1,name:"parkovka_zemlya",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_metro")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("obshhaya_ploshhad")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("voda_zemlya")},columns:"3",outlined:!1,name:"voda_zemlya",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("mestopolozhenie-obekta_zemlya")},columns:"3",outlined:!1,name:"mestopolozhenie-obekta_zemlya",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_goroda")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_goroda",title:"Расстояние до города (м)"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema-otopleniya_zemlya")},columns:"3",outlined:!1,name:"sistema-otopleniya_zemlya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("podezdnye_puti")},columns:"3",outlined:!1,name:"podezdnye_puti",title:"Подъездные пути",itemList:["Асфальтированная дорога","Грунтовая дорога","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema-kondiczionirovaniya_zemlya")},columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_zemlya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("god_postrojki")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("elektrichestvo_zemlya")},columns:"3",outlined:!1,name:"elektrichestvo_zemlya",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("gaz_zemlya")},columns:"3",outlined:!1,name:"gaz_zemlya",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("kanalizacziya_zemlya")},columns:"3",outlined:!1,name:"kanalizacziya_zemlya",title:"Канализация",itemList:["Да","Нет"]}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"kolichestvo_komnat","sostoyanie_remonta","naznachenie_obekta","raspolozhenie_obekta","etazh","balkon","tip_planirovki","lift_kvartira","etazhnost","god_postrojki","nazvanie_zhk","mashina_mesto","obshhaya_ploshhad","sanuzel_kvartira","parkovka_kvartira","zhilaya_ploshhad","mebel","vysota_potolkov","kolichestvo_spalen","sistema_otopleniya","kod_domofona","spalnya_sanuzel","gaz","podezd_nomer","rasstoyanie_do_metro","vid_iz_okna","sistema_kondiczionirovaniya","tip_stroeniya")},isVisible:function(e){return!(!Xe(e.podkategoriya_obekta,"Квартиры")||!Xe(e.kategoriya_obekta,"Коммерческая"))},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая + Жилая квартира)"})}},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kolichestvo_komnat")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("sostoyanie_remonta")},columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:a.Component,hidden:function(e){return!e.fieldVisibility.has("naznachenie_obekta")},sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:function(e){return Se(Ze,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:function(t){return e.onChange(c({},"naznachenie_obekta",t))}})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("raspolozhenie_obekta")},columns:"3",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("etazh")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("balkon")},columns:"3",outlined:!1,name:"balkon",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("tip_planirovki")},columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Малосемейная","Общежитие","Пентхаус","Дуплекс","Комната"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("lift_kvartira")},columns:"3",outlined:!1,name:"lift_kvartira",title:"Лифт",itemList:["Пассажирский","Грузовой","Нет"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("etazhnost")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("god_postrojki")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"},{type:a.Complete,hidden:function(e){return!e.fieldVisibility.has("nazvanie_zhk")},columns:"3",outlined:!1,name:"nazvanie_zhk",title:"Название ЖК",tip:['ЖК "Greenwich"','ЖК "OzMahal"','ЖК "Elysium"','ЖК "Binkat"','ЖК "Brooklyn"','ЖК "Assalom Havo"','ЖК "Istanbul City"']},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("mashina_mesto")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("obshhaya_ploshhad")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sanuzel_kvartira")},columns:"3",outlined:!1,name:"sanuzel_kvartira",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("parkovka_kvartira")},columns:"3",outlined:!1,name:"parkovka_kvartira",title:"Парковка",itemList:["Наземная","Собственная","Подземная","В аренду","Нет"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("zhilaya_ploshhad")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"zhilaya_ploshhad",title:"Жилая площадь М²"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("mebel")},columns:"3",outlined:!1,name:"mebel",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("vysota_potolkov")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kolichestvo_spalen")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema_otopleniya")},columns:"3",outlined:!1,name:"sistema_otopleniya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kod_domofona")},columns:"3",outlined:!1,name:"kod_domofona",title:"Код домофона"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("spalnya_sanuzel")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("gaz")},columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("podezd_nomer")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"podezd_nomer",title:"Подъезд №"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_metro")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vid_iz_okna")},columns:"3",outlined:!1,name:"vid_iz_okna",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema_kondiczionirovaniya")},columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("tip_stroeniya")},columns:"3",outlined:!1,name:"tip_stroeniya",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"kolichestvo_komnat","sostoyanie_doma","mestopolozhenie_obekta","naznachenie_obekta","etazhnost","sostoyanie_remonta","raspolozhenie_obekta","tip_stroeniya","ploshhad_doma","raspolozhenie_doma","tip_planirovki","bassejn","kolichestvo_sotok","sanuzel_doma","mashina_mesto","kolichestvo_spalen","voda_dom","lift_kvartira","spalnya_sanuzel","sistema_otopleniya","mebel","rasstoyanie_do_metro","gaz","sistema_kondiczionirovaniya","vysota_potolkov","elektrichestvo_dom","vid_iz_okna","garazh","kanalizacziya_dom","balkon","god_postrojki")},isVisible:function(e){return!(!Xe(e.podkategoriya_obekta,"Дома")||!Xe(e.kategoriya_obekta,"Коммерческая"))},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческий + Жилой дом)"})}},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kolichestvo_komnat")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("sostoyanie_doma")},columns:"3",outlined:!1,name:"sostoyanie_doma",title:"Состояние дома",itemList:["Новой постройки","Недостроенный","Под снос","Коробка"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("mestopolozhenie_obekta")},columns:"3",outlined:!1,name:"mestopolozhenie_obekta",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:a.Component,hidden:function(e){return!e.fieldVisibility.has("naznachenie_obekta")},sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:function(e){return Se(Ze,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:function(t){return e.onChange(c({},"naznachenie_obekta",t))}})}},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("etazhnost")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("sostoyanie_remonta")},columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("raspolozhenie_obekta")},columns:"3",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("tip_stroeniya")},columns:"3",outlined:!1,name:"tip_stroeniya",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("ploshhad_doma")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_doma",title:"Площадь дома М²"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("raspolozhenie_doma")},columns:"3",outlined:!1,name:"raspolozhenie_doma",title:"Расположение дома",itemList:["По середине","В начале двора","В конце двора"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("tip_planirovki")},columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Малосемейная","Общежитие","Пентхаус","Дуплекс","Комната"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("bassejn")},columns:"3",outlined:!1,name:"bassejn",title:"Бассейн",itemList:["Летний","Зимний","Сауна","Нет"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kolichestvo_sotok")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sanuzel_doma")},columns:"3",outlined:!1,name:"sanuzel_doma",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("mashina_mesto")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kolichestvo_spalen")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("voda_dom")},columns:"3",outlined:!1,name:"voda_dom",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("lift_kvartira")},columns:"3",outlined:!1,name:"lift_kvartira",title:"Лифт",itemList:["Пассажирский","Грузовой","Нет"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("spalnya_sanuzel")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema_otopleniya")},columns:"3",outlined:!1,name:"sistema_otopleniya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("mebel")},columns:"3",outlined:!1,name:"mebel",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_metro")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("gaz")},columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema_kondiczionirovaniya")},columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("vysota_potolkov")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("elektrichestvo_dom")},columns:"3",outlined:!1,name:"elektrichestvo_dom",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vid_iz_okna")},columns:"3",outlined:!1,name:"vid_iz_okna",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("garazh")},columns:"3",outlined:!1,name:"garazh",title:"Гараж",itemList:["Подземный","Закрытый","Под навесом","Уличный"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("kanalizacziya_dom")},columns:"3",outlined:!1,name:"kanalizacziya_dom",title:"Канализация",itemList:["Да","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("balkon")},columns:"3",outlined:!1,name:"balkon",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("god_postrojki")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"kolichestvo_komnat","naznachenie-obekta-zemlya_uchastok","tip_zemli_uchastka","poleznaya_ploshhad","etazh","sostoyanie-obekta_zemlya","mashina_mesto","kolichestvo_sotok","etazhnost","sostoyanie-remonta_zemlya","parkovka_zemlya","rasstoyanie_do_metro","obshhaya_ploshhad","voda_zemlya","mestopolozhenie-obekta_zemlya","rasstoyanie_do_goroda","sistema-otopleniya_zemlya","podezdnye_puti","sistema-kondiczionirovaniya_zemlya","god_postrojki","elektrichestvo_zemlya","gaz_zemlya","kanalizacziya_zemlya")},isVisible:function(e){return!(!Xe(e.podkategoriya_obekta,"Земля/Участок")||!Xe(e.kategoriya_obekta,"Коммерческая"))},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая + Жилая земля/участок)"})}},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kolichestvo_komnat")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:a.Component,hidden:function(e){return!e.fieldVisibility.has("naznachenie-obekta-zemlya_uchastok")},sx:{pr:1,mb:2},columns:"3",name:"naznachenie-obekta-zemlya_uchastok",element:function(e){return Se(Ze,{variant:"standard",label:"Назначение объекта",items:[{label:"Сельхоз использование",value:"Сельхоз использование"},{label:"ИЖС",value:"ИЖС"},{label:"Высотная застройка",value:"Высотная застройка"},{label:"Промышленное назначение",value:"Промышленное назначение"},{label:"ТЦ",value:"ТЦ"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Склады",value:"Склады"},{label:"Инвестпроект",value:"Инвестпроект"},{label:"Строительство образовательных учреждений",value:"Строительство образовательных учреждений"},{label:"АЗС",value:"АЗС"},{label:"Мойка",value:"Мойка"}],value:e["naznachenie-obekta_zemlya"],onChange:function(t){return e.onChange(c({},"naznachenie-obekta_zemlya",t))}})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("tip_zemli_uchastka")},columns:"3",outlined:!1,name:"tip_zemli_uchastka",title:"Тип земли/участка",itemList:["Делимый","Неделимый"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("poleznaya_ploshhad")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("etazh")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("sostoyanie-obekta_zemlya")},columns:"3",outlined:!1,name:"sostoyanie-obekta_zemlya",title:"Состояние объекта",itemList:["Пустая земля/участок","Недостроенная","Под снос"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("mashina_mesto")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("kolichestvo_sotok")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("etazhnost")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("sostoyanie-remonta_zemlya")},columns:"3",outlined:!1,name:"sostoyanie-remonta_zemlya",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("parkovka_zemlya")},columns:"3",outlined:!1,name:"parkovka_zemlya",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_metro")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("obshhaya_ploshhad")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("voda_zemlya")},columns:"3",outlined:!1,name:"voda_zemlya",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("mestopolozhenie-obekta_zemlya")},columns:"3",outlined:!1,name:"mestopolozhenie-obekta_zemlya",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_goroda")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_goroda",title:"Расстояние до города (м)"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema-otopleniya_zemlya")},columns:"3",outlined:!1,name:"sistema-otopleniya_zemlya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("podezdnye_puti")},columns:"3",outlined:!1,name:"podezdnye_puti",title:"Подъездные пути",itemList:["Асфальтированная дорога","Грунтовая дорога","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema-kondiczionirovaniya_zemlya")},columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_zemlya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("god_postrojki")},columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("elektrichestvo_zemlya")},columns:"3",outlined:!1,name:"elektrichestvo_zemlya",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("gaz_zemlya")},columns:"3",outlined:!1,name:"gaz_zemlya",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("kanalizacziya_zemlya")},columns:"3",outlined:!1,name:"kanalizacziya_zemlya",title:"Канализация",itemList:["Да","Нет"]}]}}],Kf=[{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"vnutri_est","ryadom_est")},isVisible:function(e){var t=!0;return t=(t=t&&!Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Квартиры")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Group,fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Квартиры)"})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vnutri_est")},columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Холодильник","Телевизор","Кондиционер","Стиральная машина","Мусоропровод","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("ryadom_est")},columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"vnutri_est","ryadom_est")},isVisible:function(e){var t=!0;return t=(t=t&&!Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Дома")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Group,fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Дома)"})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vnutri_est")},columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Холодильник","Телевизор","Кондиционер","Стиральная машина","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг","Полисадник"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("ryadom_est")},columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Охрана","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"vnutri_est","ryadom_est")},isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Квартиры")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Group,fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая + Жилая квартира)"})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vnutri_est")},columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Холодильник","Телевизор","Кондиционер","Стиральная машина","Мусоропровод","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг","Пожарная сигнализация","Видеонаблюдение","Сигнализация"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("ryadom_est")},columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Охрана","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"vnutri_est","ryadom_est")},isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Земля/Участок")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Group,fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая + Жилая земля/участок)"})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vnutri_est")},columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Забор","Катлаван","Пожарная сигнализация","Видеонаблюдение","Сигнализация"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("ryadom_est")},columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Охрана","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}}],Xf=e("e",[{type:a.Paper,hidden:function(e){return!Ql(e.fieldVisibility,"zagolovok","kategoriya_obekta","prodazha","arenda","podkategoriya_obekta","istochnik","tip_nedvizhimosti","vid_obekta","raspolozhenie_obekta","vid_liczenzii")},fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Основная информация"})}},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("zagolovok")},outlined:!1,name:"zagolovok",title:"Заголовок",placeholder:"Введите текст"},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("kategoriya_obekta")},outlined:!1,columns:"4",name:"kategoriya_obekta",title:"Категория объекта",itemList:["Жилая","Коммерческая","От застройщика"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("prodazha")},outlined:!1,columns:"4",name:"prodazha",title:"Продажа",itemList:["Прямая продажа","Рассрочка","Через банк","Обмен"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("arenda")},outlined:!1,columns:"4",name:"arenda",title:"Аренда",itemList:["Долгосрочная","Ежемесячная","Посуточная"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("podkategoriya_obekta")},outlined:!1,columns:"4",name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:function(e){return Xe(e.kategoriya_obekta,"Коммерческая")},itemList:function(){return["Квартиры","Дома","Земля/Участок","Здания","Базы"]}},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("podkategoriya_obekta")},outlined:!1,columns:"4",name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:function(e){return!Xe(e.kategoriya_obekta,"Коммерческая")},itemList:function(){return["Квартиры","Дома","Земля/Участок"]}},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("istochnik")},columns:"4",outlined:!1,name:"istochnik",title:"Источник",itemList:["По звонку","Личные связи","Самостоятельный поиск","Риелтор","С сайта","Прибытие в офис","OLX","Facebook","Instagram","Telegram","Эксклюзив","Другое"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("tip_nedvizhimosti")},isVisible:function(e){return!(!Xe(e.podkategoriya_obekta,"Квартиры")||!Xe(e.kategoriya_obekta,"Коммерческая","Жилая"))},columns:"4",outlined:!1,name:"tip_nedvizhimosti",title:"Тип недвижимости",itemList:["Вторичное жилье","Новостройка"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("vid_obekta")},isVisible:function(e){var t=!1;return t=t||Xe(e.podkategoriya_obekta,"Дома")},columns:"4",outlined:!1,name:"vid_obekta",title:"Вид объекта",itemList:["Дом","Коттедж","Таунхаус","ЖАКТ","Часть дома","Дача"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("raspolozhenie_obekta")},isVisible:function(e){var t=!1;return t=(t=(t=(t=t||Xe(e.kategoriya_obekta,"Коммерческая"))&&!Xe(e.podkategoriya_obekta,"Дома"))&&!Xe(e.podkategoriya_obekta,"Земля/Участок"))&&!Xe(e.podkategoriya_obekta,"Квартиры")},columns:"4",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("vid_liczenzii")},isVisible:function(e){var t=!1;return t=t||Xe(e.podkategoriya_obekta,"Земля/Участок")},columns:"4",outlined:!1,name:"vid_liczenzii",title:"Вид лицензии",itemList:["Коммерческая","Жилая"]}]}].concat(Yf,[{type:a.Box,isVisible:function(e){var t=!1;return t=(t=t||null!==e.podkategoriya_obekta)||null!==e.kategoriya_obekta},sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gridColumnGap:"8px"},fields:[{type:a.Paper,hidden:function(e){return!Ql(e.fieldVisibility,"strana","gorod","oblast","rajon","mahallya","ulicza","orientir","metro","nomer_doma","nomer_kvartiry")},fieldBottomMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Расположение объекта"})}},{type:a.Complete,hidden:function(e){return!e.fieldVisibility.has("strana")},outlined:!1,name:"strana",title:"Страна",tip:(rf=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["Узбекистан"]);case 1:case"end":return e.stop()}}),e)}))),function(){return rf.apply(this,arguments)})},{type:a.Complete,hidden:function(e){return!e.fieldVisibility.has("gorod")},outlined:!1,name:"gorod",title:"Город",tip:["Ташкент"]},{type:a.Complete,hidden:function(e){return!e.fieldVisibility.has("oblast")},outlined:!1,name:"oblast",title:"Область",tip:(nf=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["Ташкентская область"]);case 1:case"end":return e.stop()}}),e)}))),function(){return nf.apply(this,arguments)})},{type:a.Complete,hidden:function(e){return!e.fieldVisibility.has("rajon")},outlined:!1,name:"rajon",title:"Район",tip:["Алмазарский район","Бектемирский район","Мирабадский район","Мирзо-Улугбекский район","Сергелийский район","Учтепинский район","Чиланзарский район","Шайхантахурский район","Юнусабадский район","Яккасарайский район","Янгихаётский район","Яшнабадский район"]},{type:a.Complete,hidden:function(e){return!e.fieldVisibility.has("mahallya")},tip:Fl.dictService.getMahallya,outlined:!1,name:"mahallya",title:"Махалля"},{type:a.Complete,hidden:function(e){return!e.fieldVisibility.has("ulicza")},tip:Fl.dictService.getUlicza,outlined:!1,name:"ulicza",title:"Улица"},{type:a.Complete,hidden:function(e){return!e.fieldVisibility.has("orientir")},tip:Fl.dictService.getOrientir,outlined:!1,name:"orientir",title:"Ориентир"},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("metro")},freeSolo:!0,outlined:!1,name:"metro",title:"Метро",itemList:["А. Ходжаев","Абдулла Кодирий","Алишер Навоий","Амир Темур хиёбони","Беруний","Бобур","Бодомзор","Буюк Ипак йули","Гофур Гулом","Дружба народов","Дустлик","Жанубий","Космонавтлар","Машинасозлар","Миллий бог","Мингурик","Минор","Мирзо Улугбек","Мустакиллик майдони","Новза","Ойбек","Олмазор","Отчопар","Пахтакор","Пушкинская","Сергели","Тинчлик","Тошкент","Тукимачи","Туркистон","Турсунзода","Узбекистон","Усмон Носыр","Файзулла Ходжаев","Хамид Олимжон","Чилонзор","Чорсу","Чош-тепа","Шахристан","Эхтиром","Юнус Ражабий","Юнусабад"]},{type:a.Fragment,isVisible:function(e){var t=!1;return t=t||Xe(e.podkategoriya_obekta,"Квартиры")},fields:[{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("nomer_doma")},columns:"6",outlined:!1,name:"nomer_doma",title:"№ дома"},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("nomer_kvartiry")},columns:"6",outlined:!1,name:"nomer_kvartiry",title:"№ квартиры"}]},{type:a.Fragment,isVisible:function(e){var t=!1;return t=(t=(t=t||null!==e.kategoriya_obekta)||null!==e.podkategoriya_obekta)&&!Xe(e.podkategoriya_obekta,"Квартиры")},fields:[{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("nomer_doma")},outlined:!1,name:"nomer_doma",title:"№ дома"}]},{type:a.Component,element:Wf}]},{type:a.Box,sx:{display:"grid",gridTemplateRows:"auto 1fr",gridRowGap:"8px"},fields:[{type:a.Component,fieldRightMargin:"1",fieldBottomMargin:"1",element:function(e){var t=e.onChange,n=e._fieldData;return Se(Jm,{onChange:t,fieldData:n})}},{type:a.Paper,hidden:function(e){return!Ql(e.fieldVisibility,"opisanie")},fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Описание объекта"})}},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("opisanie")},inputRows:6,outlined:!1,name:"opisanie",title:"Описание"}]}]}]}],Kf,Gf,$f,[{type:a.Paper,isVisible:function(e){return Xe(e.kategoriya_obekta,"Коммерческая","Жилая")&&Xe(e.podkategoriya_obekta,"Квартиры","Дома","Земля/Участок","Здания","Базы"),!1},fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,element:Id}]},{type:a.Fragment,isVisible:function(e){var t=!1;return t=(t=t||null!==e.kategoriya_obekta)||null!==e.podkategoriya_obekta},fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:function(e){return e.apartment_images&&e.apartment_images.length},fields:[{type:a.Component,sx:{mb:2},element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})}},{type:a.Component,element:kd}]},{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,element:function(e){var t=e._fieldData,n=e.onChange;return Se(Nf,{images:t.apartment_images,onChange:function(e){return n({apartment_images:e})}})}}]}]},{type:a.Component,features:["withBottomSaveButton"],watchOneContext:!0,element:Of}]));window.apartment_fields=Xf;var Jf,Zf,Qf,eh,th=[{type:et.Link,isVisible:function(){return!!Fl.routerService.previousPath},action:"list-action",label:Se(Ge,{sx:{display:"block"}})},{type:et.Link,action:"list-action",label:"База объектов"},{type:et.Link,action:"list-action",isVisible:function(e){return"create"!==e.id},label:"Редактирование объекта"},{type:et.Link,action:"list-action",isVisible:function(e){return"create"===e.id},label:"Создание Объекта"},{type:et.Button,isDisabled:function(e){return!e.hasChanged},action:"save-action",label:"Сохранить"}],nh=Me.createLoader(28),rh=[],ih=[{type:dt.Component,headerName:"Аватар",sortable:!1,avatar:!0,width:function(){return 65},element:function(e){var n,i=e.avatar,a=e.email;return Se(Ne,{Loader:nh,children:(n=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=6;break}return e.next=3,Fl.appwriteService.getImageURL(i);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0="";case 7:return n=e.t0,e.abrupt("return",Se(qe,{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:Se(pt,{src:n||void 0,alt:a})}));case 9:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})})}},{type:dt.Compute,sortable:!1,primary:!0,headerName:"Ф.И.О.",compute:function(e){var t=e.first_name,n=void 0===t?"":t,r=e.last_name,i=void 0===r?"":r,a=e.middle_name;return[n,i,void 0===a?"":a].filter((function(e){return e.length})).join(" ")||"Unset"},width:function(){return 200}},{type:dt.Compute,sortable:!1,secondary:!0,compute:(Jf=r(t().mark((function e(n){var r,i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.user_role,i=n.telefon,e.next=3,Fl.dictService.getUserRoles();case 3:return a=e.sent,o=null!=r&&r.length?S.get(a,r[0])||r[0]:"Не указано",e.abrupt("return",i||o);case 6:case"end":return e.stop()}}),e)}))),function(e){return Jf.apply(this,arguments)}),headerName:"Роль",width:function(){return 200}}],ah=function(e){var n=e.title,i=e.payload,a=e.features,o=e.selectedRows,s=void 0===o?rh:o,u=e.selectionMode,l=void 0===u?ht.Multiple:u,c=kc(),d=cr({title:n,selectedRows:s,columns:ih,handler:c,payload:i,features:a,selectionMode:l}),p=nt({history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),m=p.handleLoadStart,f=p.handleLoadEnd;return Ve(r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d({selectedRows:s}).toPromise();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),{onLoadStart:m,onLoadEnd:f,fallback:Fl.errorService.handleGlobalError}).execute},oh=[{type:et.Link,isVisible:function(){return!!Fl.routerService.previousPath},action:"list-action",label:Se(Ge,{sx:{display:"block"}})},{type:et.Link,action:"list-action",label:"База объектов"},{type:et.Link,action:"list-action",label:"Просмотр объекта"},{type:et.Button,isDisabled:function(e){return!e.payload.permissions.hasApartmentUpdatePermission},action:"edit-action",label:"Редактировать"}],sh=[{action:"pick-allowance-action",isDisabled:(eh=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.data.object,i=Fl.appwriteService.currentUser.$id,e.abrupt("return",ee(Q(Promise.resolve(r.system_created_by===i),Fl.featureService.hasFeature("vizhu_kontakty_pod_bronyu"))));case 3:case"end":return e.stop()}}),e)}))),function(e){return eh.apply(this,arguments)}),label:"Поделиться объектом"},{action:"toggle-only-for-owner-action",isVisible:function(e){return!!e.data.object.system_only_for_owner},isDisabled:(Qf=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.data.object,i=Fl.appwriteService.currentUser.$id,e.abrupt("return",ee(Q(Promise.resolve(r.system_created_by===i),Fl.featureService.hasFeature("vizhu_kontakty_pod_bronyu"))));case 3:case"end":return e.stop()}}),e)}))),function(e){return Qf.apply(this,arguments)}),icon:Xt,label:"Эксклюзив"},{action:"toggle-only-for-owner-action",isVisible:function(e){return!e.data.object.system_only_for_owner},isDisabled:(Zf=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.data.object,i=Fl.appwriteService.currentUser.$id,e.abrupt("return",ee(Q(Promise.resolve(r.system_created_by===i),Fl.featureService.hasFeature("vizhu_kontakty_pod_bronyu"))));case 3:case"end":return e.stop()}}),e)}))),function(e){return Zf.apply(this,arguments)}),icon:Kt,label:"Эксклюзив"},{action:"superadmin-remove-action",isVisible:function(e){return e.payload.permissions.hasSuperAdminFlagPermission},label:"Удалить навсегда"}],uh=function(e){var n=e.fieldData,i=e.onChange,a=nt({history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),o=a.handleLoadStart,s=a.handleLoadEnd,u=a.loading,l=function(){var e=r(t().mark((function e(){var a,u,l,c,d;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!0,o(),e.prev=2,e.next=5,kt("*");case 5:if(u=e.sent){e.next=8;break}return e.abrupt("return");case 8:return l=Et(n.contact_files)||[],e.next=11,Promise.all(u.map(function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fl.appwriteService.uploadFile(n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:c=e.sent,d=[].concat(p(l),p(c)),i({contact_files:d}),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(2),a=!1,Fl.alertService.notify(Xs(e.t0));case 20:return e.prev=20,s(a),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[2,16,20,23]])})));return function(){return e.apply(this,arguments)}}();return Se(wt,{children:Se(xt,{disabled:u,sx:{borderRadius:"20px"},startIcon:Se(lr,{}),onClick:l,variant:"contained",children:"Юридическое лицо"===n.kontakt?"Скан документов организации":"Скан документа"})})},lh="Вы уверены, что хотите удалить файл?",ch="Подтверждение",dh=Me.createLoader(24),ph=function(e){return e&&"Физическое лицо"!==e?{type:a.Paper,fieldBottomMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Основная информация"})}},{type:a.Combo,outlined:!1,name:"kontakt",title:"Контакт",itemList:["Физическое лицо","Юридическое лицо"]},{type:a.Text,outlined:!1,name:"naimenovanie_organizaczii",title:"Наименование организации"},{type:a.Text,outlined:!1,name:"fio",title:"Ф.И.О."},{type:a.Text,description:"Основной",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon",title:"Телефон"},{type:a.Combo,outlined:!1,name:"tip_klienta",title:"Тип клиента",itemList:["Собственник","Доверенное лицо","Риелтор","Информатор","Застройщик"]},{type:a.Combo,outlined:!1,name:"status_klienta",title:"Статус клиента",itemList:["VIP-клиент","Клиент","Постоянный клиент","Специальный клиент","Черный список"]},{type:a.Combo,outlined:!1,name:"loyalnost_klienta",title:"Лояльность клиента",itemList:["Высокая","Средняя","Низкая"]},{type:a.Date,outlined:!1,name:"data-sozdaniya_klienta",title:"Дата создания клиента"},{type:a.Text,outlined:!1,name:"fakticheskij_adres",title:"Фактический адрес"},{type:a.Text,outlined:!1,name:"email",title:"Email"},{type:a.Fragment,isVisible:function(){var e=!0;return e=(e=e&&!Fl.routerService.location.pathname.includes("bid_view"))&&!Fl.routerService.location.pathname.includes("bid_edit")},fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"subtitle2",fontWeight:"bold",sx:{textDecoration:"underline",mt:2,mb:1},children:"Кадастр"})}},{type:a.Text,outlined:!1,name:"kadastrovyj-nomer_obekta",title:"Кадастровый номер объекта"},{type:a.Text,outlined:!1,name:"kadastrovyj-nomer_zemli",title:"Кадастровый номер земли"}]}]}:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"0",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Основная информация"})}},{type:a.Combo,outlined:!1,name:"kontakt",title:"Контакт",itemList:["Физическое лицо","Юридическое лицо"]},{type:a.Text,outlined:!1,name:"fio",title:"Ф.И.О."},{type:a.Text,description:"Основной",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon",title:"Телефон"},{type:a.Combo,outlined:!1,name:"tip_klienta",title:"Тип клиента",itemList:["Собственник","Доверенное лицо","Риелтор","Информатор","Застройщик"]},{type:a.Combo,outlined:!1,name:"status_klienta",title:"Статус клиента",itemList:["VIP-клиент","Клиент","Постоянный клиент","Специальный клиент","Черный список"]},{type:a.Combo,outlined:!1,name:"loyalnost_klienta",title:"Лояльность клиента",itemList:["Высокая","Средняя","Низкая"]},{type:a.Date,outlined:!1,name:"data-sozdaniya_klienta",title:"Дата создания клиента"},{type:a.Text,outlined:!1,name:"fakticheskij_adres",title:"Фактический адрес"},{type:a.Text,outlined:!1,name:"email",title:"Email"},{type:a.Fragment,isVisible:function(){var e=!0;return e=(e=e&&!Fl.routerService.location.pathname.includes("bid_view"))&&!Fl.routerService.location.pathname.includes("bid_edit")},fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"subtitle2",fontWeight:"bold",sx:{textDecoration:"underline",mt:2,mb:1},children:"Кадастр"})}},{type:a.Text,outlined:!1,name:"kadastrovyj-nomer_obekta",title:"Кадастровый номер объекта"},{type:a.Text,outlined:!1,name:"kadastrovyj-nomer_zemli",title:"Кадастровый номер земли"}]}]}},mh=function(e){return e&&"Физическое лицо"!==e?{type:a.Paper,fieldBottomMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Паспортные данные"})}},{type:a.Text,outlined:!1,name:"seriya-i-nomer_pasporta",title:"Серия и номер паспорта"},{type:a.Date,outlined:!1,name:"data_rozhdeniya",title:"Дата рождения"},{type:a.Combo,outlined:!1,name:"pol",title:"Пол",itemList:["Мужской","Женский"]},{type:a.Date,outlined:!1,name:"data-vydachi_pasporta",title:"Дата выдачи паспорта"},{type:a.Text,outlined:!1,name:"kem_vydan",title:"Кем выдан"},{type:a.Text,outlined:!1,name:"adres_registraczii",title:"Адрес регистрации"},{type:a.Text,outlined:!1,name:"pinfl",title:"ПИНФЛ"},{type:a.Text,outlined:!1,name:"inn",title:"ИНН"},{type:a.Text,outlined:!1,name:"dolzhnost_rukovoditelya",title:"Должность руководителя"},{type:a.Combo,outlined:!1,name:"osnovanie-deyatelnosti-dannogo_licza",title:"Основание деятельности данного лица",itemList:["На основании устава","По доверенности"]},{type:a.Text,outlined:!1,name:"yuridicheskij_adres",title:"Юридический адрес"},{type:a.Text,outlined:!1,name:"sertifikat_kompanii",title:"Сертификат компании (Гувохнома)"},{type:a.Text,outlined:!1,name:"rekvizity",title:"Реквизиты"}]}:{type:a.Paper,fieldBottomMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Паспортные данные"})}},{type:a.Text,outlined:!1,name:"seriya-i-nomer_pasporta",title:"Серия и номер паспорта"},{type:a.Date,outlined:!1,name:"data_rozhdeniya",title:"Дата рождения"},{type:a.Combo,outlined:!1,name:"pol",title:"Пол",itemList:["Мужской","Женский"]},{type:a.Date,outlined:!1,name:"data-vydachi_pasporta",title:"Дата выдачи паспорта"},{type:a.Text,outlined:!1,name:"kem_vydan",title:"Кем выдан"},{type:a.Text,outlined:!1,name:"adres_registraczii",title:"Адрес регистрации"},{type:a.Text,outlined:!1,name:"pinfl",title:"ПИНФЛ"},{type:a.Text,outlined:!1,name:"inn",title:"ИНН"},{type:a.Text,outlined:!1,name:"rekvizity",title:"Реквизиты"}]}},fh=function(e){return"desktop"===e?{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"0",innerPadding:"0",tabletHidden:!0,phoneHidden:!0,child:{type:a.Component,element:Rc}}:{type:a.Paper,fieldBottomMargin:"1",innerPadding:"0",desktopHidden:!0,child:{type:a.Component,element:Rc}}},hh=function(e){return e&&"Физическое лицо"!==e?[{type:a.Paper,fieldBottomMargin:"1",sx:{padding:"0 !important"},isVisible:function(e){return e.contact_files&&e.contact_files.length},child:{type:a.Component,element:function(e){var n=e.contact_files,i=e.onChange,a=jt({title:ch,msg:lh});return Se(Pt,{children:null==n?void 0:n.map((function(e,o){return Se(Vt,{disableGutters:!0,secondaryAction:Se(bt,{onClick:function(){var t=Et(n)||[];a().then((function(n){n&&i({contact_files:t.filter((function(t){return t!==e}))})}))},children:Se(Nt,{})}),children:Se(Ue,{onClick:(u=r(t().mark((function n(){var r,i;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Fl.appwriteService.getFileURL(e);case 2:return r=t.sent,t.next=5,Fl.appwriteService.readFileName(e);case 5:i=t.sent,zt(r,i);case 7:case"end":return t.stop()}}),n)}))),function(){return u.apply(this,arguments)}),children:Se(Ne,{payload:e,Loader:dh,children:(s=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.appwriteService.readFileName(n);case 2:return r=e.sent,e.abrupt("return",Se(Ct,{primary:r}));case 4:case"end":return e.stop()}}),e)}))),function(e){return s.apply(this,arguments)})})})},"".concat(e,"-").concat(o));var s,u}))})}}},{type:a.Paper,fieldBottomMargin:"0",fields:[{type:a.Component,element:function(e){var t=e._fieldData,n=e.onChange;return Se(uh,{fieldData:t,onChange:n})}}]}]:[{type:a.Paper,fieldBottomMargin:"1",sx:{padding:"0 !important"},isVisible:function(e){return e.contact_files&&e.contact_files.length},child:{type:a.Component,element:function(e){var n=e.contact_files,i=e.onChange,a=jt({title:ch,msg:lh});return Se(Pt,{children:null==n?void 0:n.map((function(e,o){return Se(Vt,{disableGutters:!0,secondaryAction:Se(bt,{onClick:function(){var t=Et(n)||[];a().then((function(n){n&&i({contact_files:t.filter((function(t){return t!==e}))})}))},children:Se(Nt,{})}),children:Se(Ue,{onClick:(u=r(t().mark((function n(){var r,i;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Fl.appwriteService.getFileURL(e);case 2:return r=t.sent,t.next=5,Fl.appwriteService.readFileName(e);case 5:i=t.sent,zt(r,i);case 7:case"end":return t.stop()}}),n)}))),function(){return u.apply(this,arguments)}),children:Se(Ne,{payload:e,Loader:dh,children:(s=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.appwriteService.readFileName(n);case 2:return r=e.sent,e.abrupt("return",Se(Ct,{primary:r}));case 4:case"end":return e.stop()}}),e)}))),function(e){return s.apply(this,arguments)})})})},"".concat(e,"-").concat(o));var s,u}))})}}},{type:a.Paper,fieldBottomMargin:"0",fields:[{type:a.Component,element:function(e){var t=e._fieldData,n=e.onChange;return Se(uh,{fieldData:t,onChange:n})}}]}]},yh=e("f",[{type:a.Init,name:"contact_phones",defaultValue:null},{type:a.Init,name:"contact_names",defaultValue:null},{type:a.Fragment,isVisible:function(e){return!e.kontakt||!!Xe(e.kontakt,"Физическое лицо")},fields:[{type:a.Group,fieldBottomMargin:"0",fieldRightMargin:"1",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",phoneHidden:!0,tabletHidden:!0,fields:[ph("Физическое лицо"),fh("desktop")]},{type:a.Group,fieldBottomMargin:"0",fieldRightMargin:"0",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",desktopHidden:!0,fields:[ph("Физическое лицо"),fh("desktop")]},{type:a.Group,fieldBottomMargin:"1",fieldRightMargin:"0",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",fields:[mh("Физическое лицо"),fh("mobile")].concat(p(hh("Физическое лицо")))}]},{type:a.Fragment,isVisible:function(e){return!!Xe(e.kontakt,"Юридическое лицо")},fields:[{type:a.Group,fieldBottomMargin:"0",fieldRightMargin:"1",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",phoneHidden:!0,tabletHidden:!0,fields:[ph("Юридическое лицо"),fh("desktop")]},{type:a.Group,fieldBottomMargin:"0",fieldRightMargin:"0",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",desktopHidden:!0,fields:[ph("Юридическое лицо"),fh("desktop")]},{type:a.Group,fieldBottomMargin:"1",fieldRightMargin:"0",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",fields:[mh("Юридическое лицо"),fh("mobile")].concat(p(hh("Юридическое лицо")))}]},{type:a.Component,features:["withBottomSaveButton"],watchOneContext:!0,element:Of}]);window.contact_fields=yh;var vh,bh,_h,kh,gh,xh,wh,Sh,zh,Vh,Ah,Th,Ch,Fh,Lh=[{type:et.Link,isVisible:function(){return!!Fl.routerService.previousPath},action:"list-action",label:Se(Ge,{sx:{display:"block"}})},{type:et.Link,action:"list-action",label:"База объектов"},{type:et.Link,action:"list-action",isVisible:function(e){return"create"!==e.id},label:"Редактирование контакта"},{type:et.Link,action:"list-action",isVisible:function(e){return"create"===e.id},label:"Создание контакта"},{type:et.Button,isDisabled:function(e){return!e.hasChanged},action:"save-action",label:"Сохранить"}],Ih=[{type:et.Link,isVisible:function(){return!!Fl.routerService.previousPath},action:"list-action",label:Se(Ge,{sx:{display:"block"}})},{type:et.Link,action:"list-action",label:"База объектов"},{type:et.Link,action:"list-action",label:"Просмотр контакта"},{type:et.Button,isDisabled:function(e){return!e.payload.permissions.hasApartmentUpdatePermission},action:"edit-action",label:"Редактировать"}],Mh=[{action:"show-contact-action",label:"Показать карточку контакта"}],jh=function(){var e=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.apartmentViewService.read(n);case 2:return r=e.sent,i=r.contact_id,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Bh="real-estate__headerRoot",Dh=[{type:et.Link,isVisible:function(){return!!Fl.routerService.previousPath},action:"list-action",label:Se(Ge,{sx:{display:"block"}})},{type:et.Link,action:"list-action",label:"База объектов"},{type:et.Link,action:"list-action",label:"Просмотр служебных комментариев"}],Rh=function(){var e=r(t().mark((function e(n){var r,i,a,o,s,u,l,c,d,p,m,h,y,v,b,_,k,g,x,w,S;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.moment_stamp,n.from_user_id,i=n.to_user_id,a=n.contact_id,o=n.from_user_fio,s=n.to_user_fio,u=n.contact_fio,l=n.title,c=n.$createdAt,d=n.$updatedAt,p=n.is_call,m=n.is_meet,h=n.time_stamp,y=n.$id,v=n.type,b=f(c).format("HH:mm DD/MM/YYYY"),_=o||"Не указано",k=s||"Не указано",g="Не указано",x=u||"Не указано",w="Не указано",e.next=9,Ps(n);case 9:if(null!==(S=e.sent)){e.next=12;break}throw new Error("TaskBoard fetchCard unknown status");case 12:return r&&(w=Fo(r).format("DD/MM/YYYY")),r&&"number"==typeof h&&(w+=" ",w+=Lo(h).format("HH:mm")),l&&(g=l),e.abrupt("return",{id:y,type:v,completionTime:w,fromWhom:_,toWhom:k,task:g,metadata_task:g,createdDate:b,updatedAt:d,metadata_created_at:f(c).format("DD/MM/YYYY"),metadata_updated_at:f(d).format("DD/MM/YYYY"),moment_stamp:r,toUserId:i,isCall:p,isMeet:m,contact_id:a,time_stamp:h,status:S,contact:x});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qh=we.forwardRef((function(e,n){var i,a,o=e.item,s=e.loading,u=e.className,l=e.style;return Se("div",{className:u,style:l,ref:n,children:Se(fn,{sx:{position:"relative",overflow:"hidden"},children:[Se(Vt,{children:[Se(At,{children:Se(Ne,{loading:s,payload:o,Loader:function(){return Se(Fn,{variant:"circular",width:40,height:40})},children:(a=r(t().mark((function e(n){var r,i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.user_id,e.next=3,Fl.userViewService.tryRead(r);case 3:if(null==(i=e.sent)||!i.avatar){e.next=10;break}return e.next=7,Fl.appwriteService.getImageURL(i.avatar);case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=void 0;case 11:return a=e.t0,e.abrupt("return",Se(pt,{alt:null==i?void 0:i.email,src:a,sx:{height:40,mr:2,width:40}}));case 13:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})})}),Se(Ne,{loading:s,payload:o,Loader:function(){return Se(Ke,{flex:1,children:[Se(Fn,{sx:{mb:1},variant:"rectangular",width:210,height:22}),Se(Fn,{variant:"rectangular",width:170,height:22})]})},children:(i=r(t().mark((function e(n){var i,a,o,s,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.user_id,e.next=3,Fl.userViewService.tryRead(i);case 3:return a=e.sent,o=[null==a?void 0:a.first_name,null==a?void 0:a.last_name,null==a?void 0:a.middle_name].filter((function(e){return e})).join(" "),s=function(){var e=r(t().mark((function e(){var n,r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==a||null===(n=a.user_role)||void 0===n||!n.length){e.next=5;break}return e.next=3,Fl.roleViewService.tryRead(a.user_role[0]);case 3:return r=e.sent,e.abrupt("return",(null==r?void 0:r.title)||"");case 5:return e.abrupt("return","");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=8,s();case 8:return u=e.sent,e.abrupt("return",Se(Ct,{primary:o,secondary:u}));case 10:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})}),Se(Je,{children:f(o.$createdAt).format("HH:mm DD/MM/YYYY")})]}),!!o.comment&&Se(qe,{component:"pre",sx:{ml:1,mr:1,mb:1},children:Se(Lt,{config:Cc,handler:function(){return o.comment}})}),Se(qe,{sx:{position:"absolute",top:0,left:0,bottom:0,width:6,zIndex:1,background:"skyblue"}})]})})})),Ph=[{type:et.Button,action:"reassign-action",isDisabled:(vh=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.featureService.hasFeature("vizhu_kontakty_pod_bronyu");case 2:return n=e.sent,e.abrupt("return",!n);case 4:case"end":return e.stop()}}),e)}))),function(){return vh.apply(this,arguments)}),label:"Передать задачу"}],Eh=[{action:"superadmin-remove-action",isVisible:(bh=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.permissions,e.next=3,Fl.featureService.hasFeature("superadmin");case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),function(e){return bh.apply(this,arguments)}),label:"Удалить навсегда"}],Nh=[{id:"history",element:function(e){var n=e.formState,a=e.payload,o=e.params.id,s=function(e){var n=e.taskId,i=nt({history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),a=i.handleLoadStart,o=i.handleLoadEnd,s=Ve(r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.featureService.hasFeature("superadmin");case 2:if(!e.sent){e.next=6;break}return e.next=5,Fl.cleanupService.removeTask(n);case 5:Fl.routerService.push("/task");case 6:case"end":return e.stop()}}),e)}))),{onLoadStart:a,onLoadEnd:o,fallback:Fl.errorService.handleGlobalError}).execute,u=jt({title:"Вы уверены?",msg:"Удаление задачи сотрет соответствующие записи в истории задач. Продолжить?"});return function(){return u().then((function(e){e&&s()}))}}({taskId:o}),u=i(we.useState([]),2),l=u[0],c=u[1],d=ah({selectionMode:ht.Single,payload:a,features:a.permissions,title:"Выберите ответственного"}),p=nt({history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),m=p.handleLoadStart,f=p.handleLoadEnd,h=dr({compute:function(e){return e.height-=350,e}}).height,y=Ve(function(){var e=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=5;break}return e.next=3,Fl.taskHistoryViewService.findAllByTaskId(o);case 3:r=e.sent,c(r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{fallback:Fl.errorService.handleGlobalError,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),v=y.loading,b=y.execute,_=Ve(r(t().mark((function e(){var n,r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.taskViewService.read(o);case 2:return n=e.sent,r=n.title,e.next=6,d();case 6:if(!(i=e.sent)||!i[0]){e.next=10;break}return e.next=10,Fl.taskRequestService.reassignClientTask(o,i[0],"",r);case 10:case"end":return e.stop()}}),e)}))),{onLoadStart:m,onLoadEnd:f,fallback:Fl.errorService.handleGlobalError}).execute;we.useEffect((function(){return Fl.taskHistoryViewService.reloadSubject.subscribe((function(){b(!0)}))}),[]);return Se(Ae,{children:[Se("div",{className:"real-estate__headerRoot",children:Se(ot,{payload:n,items:Ph,actions:Eh,onAction:function(e){"list-action"===e&&Fl.routerService.back("/task"),"reassign-action"===e&&_(),"superadmin-remove-action"===e&&s()}})}),Se(nr,{sx:{height:h},minHeight:72,loading:v,onDataRequest:function(e){b(e)},children:Se(Ke,{spacing:1,children:l.map((function(e){return Se(qh,{loading:v,status:"info",item:e},e.$id)}))})})]})},isActive:function(e){return function(e,t){return e.some((function(e){return e.includes(t)}))}(["/task_history"],e)}}],Oh=re(),Uh=$l()((function(e){return{root:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",minHeight:150},box:{display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(1),flex:1},box_list:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 0",borderBottom:"1px solid gray",width:"100%",gap:"10px"},created_time:{alignSelf:"flex-start"},key:{color:"grey",fontSize:"14px"},value:{textAlign:"end",fontSize:"15px"},btn:{borderRadius:"25px"},adjust:{maxHeight:10,minHeight:10,flex:1},task:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"150px"}}})),Hh=we.forwardRef((function(e,n){var a=e.id,o=e.className,s=e.style,u=e.completionTime,l=e.fromWhom,c=e.toWhom,d=e.task,p=e.createdDate,m=e.contact,f=e.type,h=e.status,y=e.isCall,v=e.isMeet,b=e.contact_id,_=e.payload,k=e.onChangeStatus,g=e.onDrag,x=Uh(),w=x.classes,S=x.cx,z=_f({payload:_}),V=function(e){var n,a=e.payload,o=on(),s=o.push,u=o.pop,l=sn({withActionButton:!0,animation:"none",title:"История задачи",history:Oh,routes:Nh,AfterTitle:function(e){var t=e.onClose;return Se(We,{size:"small",onClick:t,children:Se(it,{})})},fetchState:(n=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.contactViewService.tryRead(n);case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)}),mapInitialData:function(e,t){return{contact:i(t,1)[0]}},mapPayload:function(){return a},onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},onSubmit:function(){return u(),!0},submitLabel:"Закрыть"}),c=l.pickData,d=l.render;return function(e){s({id:"task_history",render:d,onInit:function(){Oh.push("/task_history")},onMount:function(){c(e)}})}}({payload:_}),A=i(we.useState(null),2),T=A[0],C=A[1],F=i(we.useState(null),2),L=F[0],I=F[1],M=Ve(function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},fallback:Fl.errorService.handleGlobalError}),j=M.execute,B=M.loading,D=we.useMemo((function(){var e=Ds.findIndex((function(e){return e===h})),t=Ds.filter((function(t,n){return n<e})).filter((function(e){return"Просрочено"!==e})).filter((function(e){return"Выполненные задачи"!==e})).reverse();return t.push("Просрочено"),t.push("Выполненные задачи"),t}),[h]),R=we.useMemo((function(){var e=Ds.findIndex((function(e){return e===h})),t=Ds.filter((function(t,n){return n>e})).filter((function(e){return"Просрочено"!==e})).filter((function(e){return"Выполненные задачи"!==e}));return t.push("Просрочено"),t.push("Выполненные задачи"),t}),[h]),q=we.useMemo((function(){return!Fl.featureService.features.includes("vizhu_kontakty_pod_bronyu")&&("Выполненные задачи"===h||"Просрочено"===h)}),[h]);return Se("div",{"data-dealid":a,className:Pe(w.root,o),onDrag:function(){return g(a)},style:s,ref:n,draggable:!q,children:[Se(fn,"Клиент"===f?{className:w.box,children:[Se(Ke,{justifyContent:"space-between",alignItems:"center",direction:"row",width:"100%",children:[Se(We,{onClick:function(e){var t=e.currentTarget;C(t),I(null)},disabled:!D.length||B||q,size:"small",children:Se(Ge,{})}),Se(pr,{anchorEl:T,open:!!T,onClose:function(){return C(null)},children:D.map((function(e,t){return Se(mr,{onClick:function(){j(e),C(null)},children:e},"".concat(e,"-").concat(t))}))}),Se(Qt,{label:u,onClick:function(){V(a)},variant:"filled",color:"primary"}),Se(We,{onClick:function(e){var t=e.currentTarget;C(null),I(t)},disabled:!R.length||B||q,size:"small",children:Se($e,{})}),Se(pr,{anchorEl:L,open:!!L,onClose:function(){return I(null)},children:R.map((function(e,t){return Se(mr,{onClick:function(){j(e),I(null)},children:e},"".concat(e,"-").concat(t))}))})]}),Se(qe,{className:w.box_list,children:[Se(Je,{className:w.key,children:"Кому:"}),Se(Je,{className:w.value,children:c})]}),Se(qe,{className:w.box_list,children:[Se(Je,{className:w.key,children:"Контакт:"}),Se(Je,{className:w.value,children:Se(Ln,{href:"#",onClick:function(){return b&&z(b)},children:m})})]}),Se(qe,{className:w.box_list,children:[Se(Je,{className:w.key,children:"Задача:"}),Se(It,{title:d,children:Se(Je,{className:S(w.value,w.task),children:d})})]}),Se(qe,{sx:{display:v||v?"flex":"none",justifyContent:"space-around",gap:"10px",margin:"10px 0",width:"100%"},children:[Se(Qt,{label:"Встреча",color:"info",sx:{opacity:v?1:0}}),Se(Qt,{label:"Звонок",color:"warning",sx:{opacity:y?1:0}})]}),Se(qe,{className:w.created_time,children:[Se(Je,{className:w.key,children:"Дата создания:"}),Se(Je,{className:w.value,children:p})]})]}:{className:w.box,children:[Se(Ke,{justifyContent:"space-between",alignItems:"center",direction:"row",width:"100%",children:[Se(We,{onClick:function(e){var t=e.currentTarget;C(t),I(null)},disabled:!D.length||B||q,size:"small",children:Se(Ge,{})}),Se(pr,{anchorEl:T,open:!!T,onClose:function(){return C(null)},children:D.map((function(e,t){return Se(mr,{onClick:function(){j(e),C(null)},children:e},"".concat(e,"-").concat(t))}))}),Se(Qt,{label:u,onClick:function(){V(a)},variant:"filled",color:"primary"}),Se(We,{onClick:function(e){var t=e.currentTarget;C(null),I(t)},disabled:!R.length||B||q,size:"small",children:Se($e,{})}),Se(pr,{anchorEl:L,open:!!L,onClose:function(){return I(null)},children:R.map((function(e,t){return Se(mr,{onClick:function(){j(e),I(null)},children:e},"".concat(e,"-").concat(t))}))})]}),Se(qe,{className:w.box_list,children:[Se(Je,{className:w.key,children:"От кого:"}),Se(Je,{className:w.value,children:l})]}),Se(qe,{className:w.box_list,children:[Se(Je,{className:w.key,children:"Кому:"}),Se(Je,{className:w.value,children:c})]}),Se(qe,{className:w.box_list,children:[Se(Je,{className:w.key,children:"Задача:"}),Se(Je,{className:w.value,children:Se(It,{title:d,children:Se(Je,{className:S(w.value,w.task),children:d})})})]}),Se(qe,{className:w.created_time,children:[Se(Je,{className:w.key,children:"Дата создания:"}),Se(Je,{className:w.value,children:p})]})]}),Se("div",{className:w.adjust})]})})),Wh=$l()({transparentHeader:{background:"transparent !important",boxShadow:"none !important"}}),$h=[{type:a.Box,sx:{display:"grid",gridTemplateColumns:"auto auto 1fr auto auto","& > .MuiGrid-root":{minWidth:"275px"},mt:-1},fields:[{type:a.Choose,fieldBottomMargin:"0",fieldRightMargin:"2",choose:(kh=r(t().mark((function e(n,r){var a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.pickData(n.user_id?[n.user_id]:[]),e.next=3,r.resultSubject.toPromise();case 3:if(!(a=e.sent)||!a.length){e.next=7;break}return o=i(a,1),s=o[0],e.abrupt("return",s);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)}))),function(e,t){return kh.apply(this,arguments)}),tr:(_h=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.userViewService.tryRead(n);case 2:return r=e.sent,e.abrupt("return",[null==r?void 0:r.last_name,null==r?void 0:r.first_name,null==r?void 0:r.middle_name].filter((function(e){return e})).join(" ")||(null==r?void 0:r.$id)||"");case 4:case"end":return e.stop()}}),e)}))),function(e){return _h.apply(this,arguments)}),name:"user_id",placeholder:"Ответственный",title:""},{type:a.Combo,fieldBottomMargin:"0",fieldRightMargin:"5",name:"task_type",title:"",placeholder:"Тип задачи",itemList:[].concat(["Внутренняя","Клиент"])},{type:a.Div},{type:a.Component,fieldRightMargin:"2",sx:{maxWidth:"185px 1important",minWidth:"185px !important"},element:function(e){var t=e.payload.onCreateTask;return Se(xt,{sx:{mt:1,mr:1,whiteSpace:"nowrap"},onClick:t,size:"small",variant:"contained",children:"Создать задачу"})}},{type:a.Text,fieldBottomMargin:"0",name:"search",title:"",placeholder:"Поиск",leadingIcon:fr,trailingIcon:function(){return Se(An,{sx:{opacity:.5}})},trailingIconClick:function(e,t,n){e&&n("")}}]}],Gh=function(e){var t=e.withTransparentHeader,n=e.onChange,r=e.onCreateTask,i=e.className,a=e.style,s=e.data,u=e.sx,l=e.payload,d=Wh(),p=d.classes,m=d.cx,f=Sc({payload:l}),h=f.pickData,y=f.render,v=f.resultSubject;return Se(fn,{className:m(i,c({},p.transparentHeader,t)),style:a,sx:o({minHeight:48},u),children:[Se(Tn,{sx:{height:"100%"},hideOverflowY:!0,children:Se(qe,{sx:{p:1,display:"flex",alignItems:"center",justifyContent:"stretch"},children:Se(st,{fields:$h,handler:function(){return s},onChange:function(e,t){t||n(e)},payload:function(){return o(o({},l),{},{pickData:h,resultSubject:v,onCreateTask:r})},fieldDebounce:da})})}),y()]})},Yh=function(e){for(var t=!0,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(e instanceof Set){var a,o=m(r);try{for(o.s();!(a=o.n()).done;){var s=a.value;t=t&&e.has(s)}}catch(d){o.e(d)}finally{o.f()}}else{var u,l=m(r);try{for(l.s();!(u=l.n()).done;){var c=u.value;t=t&&!!String(e[c]||"").length}}catch(d){l.e(d)}finally{l.f()}}return t},Kh=[{type:a.Text,columns:"6",fieldBottomMargin:"1",shouldRecompute:function(){return!1},compute:(zh=r(t().mark((function e(){var n,r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Fl.appwriteService.currentUser.$id,e.next=3,Fl.userViewService.tryRead(n);case 3:return r=e.sent,e.abrupt("return",[null==r?void 0:r.last_name,null==r?void 0:r.first_name,null==r?void 0:r.middle_name].filter((function(e){return e})).join(" "));case 5:case"end":return e.stop()}}),e)}))),function(){return zh.apply(this,arguments)}),name:"from_user_id",title:"От кого"},{type:a.Choose,columns:"6",fieldBottomMargin:"1",choose:(Sh=r(t().mark((function e(n,r){var a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.pickUser(n.to_user_id?[n.to_user_id]:[]),e.next=3,r.userResultSubject.toPromise();case 3:if(!(a=e.sent)||!a.length){e.next=7;break}return o=i(a,1),s=o[0],e.abrupt("return",s);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)}))),function(e,t){return Sh.apply(this,arguments)}),tr:(wh=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.userViewService.tryRead(n);case 2:return r=e.sent,e.abrupt("return",[null==r?void 0:r.last_name,null==r?void 0:r.first_name,null==r?void 0:r.middle_name].filter((function(e){return e})).join(" ")||(null==r?void 0:r.$id)||"");case 4:case"end":return e.stop()}}),e)}))),function(e){return wh.apply(this,arguments)}),name:"to_user_id",defaultValue:function(){return Fl.appwriteService.currentUser.$id},title:"Кому",placeholder:"Не выбрано"},{type:a.Date,columns:"6",fieldBottomMargin:"1",name:"date",title:"Дата выполнения",labelShrink:!0,placeholder:"Новые задачи"},{type:a.Time,columns:"6",fieldBottomMargin:"1",name:"time",title:"",labelShrink:!0,placeholder:"Не выбрано"},{type:a.Box,noBaseline:!0,isVisible:function(e){return"Клиент"===e.type},sx:{display:"grid",gridTemplateColumns:"1fr auto auto"},fields:[{type:a.Choose,sx:{minWidth:"100% !important"},fieldBottomMargin:"0",fieldRightMargin:"3",columns:"4",choose:(xh=r(t().mark((function e(n,r){var a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.pickContact(n.contact_id?[n.contact_id]:[]),e.next=3,r.contactResultSubject.toPromise();case 3:if(!(a=e.sent)||!a.length){e.next=7;break}return o=i(a,1),s=o[0],e.abrupt("return",s);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)}))),function(e,t){return xh.apply(this,arguments)}),tr:(gh=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.contactViewService.tryRead(n);case 2:return r=e.sent,e.abrupt("return",(null==r?void 0:r.fio)||(null==r?void 0:r.id)||"");case 4:case"end":return e.stop()}}),e)}))),function(e){return gh.apply(this,arguments)}),name:"contact_id",title:"",placeholder:"Контакт"},{type:a.Checkbox,fieldBottomMargin:"0",name:"is_call",title:"Звонок"},{type:a.Checkbox,fieldBottomMargin:"0",name:"is_meet",title:"Встреча"}]},{type:a.Text,fieldBottomMargin:"1",title:"",placeholder:"Задача",name:"title"},{type:a.Text,fieldBottomMargin:"1",title:"",placeholder:"Комментарий",inputRows:3,name:"comment"},{type:a.Radio,fieldBottomMargin:"0",name:"type",radioValue:"Внутренняя",defaultValue:"Внутренняя",title:"Внутренняя"},{type:a.Radio,fieldBottomMargin:"0",name:"type",radioValue:"Клиент",title:"Клиент"}],Xh=function(e){var n=e.payload,i=e.contactId,a=nt({history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),s=a.handleLoadStart,u=a.handleLoadEnd,l=Sc({payload:n}),c=l.pickData,d=l.render,p=l.resultSubject,m=Jp({payload:n}),f=m.pickData,h=m.render,y=m.resultSubject,v=tt({fields:Kh,title:"Создать задачу",payload:o(o({},n),{},{pickUser:c,userResultSubject:p,pickContact:f,contactResultSubject:y}),handler:function(){return o({from_user_id:Fl.appwriteService.currentUser.$id},i&&{contact_id:i,type:"Клиент"})}});return{execute:Ve(r(t().mark((function e(){var n,r,i,a,o,s,u,l,c,d,p,m,f,h,y,b,_,k;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v().toPromise();case 2:if(!(n=e.sent)||"Внутренняя"!==n.type){e.next=12;break}if(r=n.to_user_id,i=n.comment,a=n.date,o=n.time,s=n.title,u=a?Kn.dateStamp(a):null,l=o?Kn.timeStamp(o):null,Yh(n,"to_user_id","title")){e.next=10;break}return Fl.alertService.notify("Укажите все поля"),e.abrupt("return");case 10:return e.next=12,Fl.taskRequestService.createTodoTask(r,u,l,s,i);case 12:if(!n||"Клиент"!==n.type){e.next=21;break}if(c=n.to_user_id,d=n.comment,p=n.date,m=n.time,f=n.contact_id,h=n.title,y=n.is_meet,b=n.is_call,Yh(n,"to_user_id","contact_id")){e.next=17;break}return Fl.alertService.notify("Укажите все поля"),e.abrupt("return");case 17:return _=p?Kn.dateStamp(p):null,k=m?Kn.timeStamp(m):null,e.next=21,Fl.taskRequestService.createClientTask(c,f,_,k,h,!!b,!!y,d);case 21:case"end":return e.stop()}}),e)}))),{onLoadStart:s,onLoadEnd:u,fallback:Fl.errorService.handleGlobalError}).execute,render:function(){return Se(Ae,{children:[h(),d()]})}}},Jh=[{type:a.Group,fieldBottomMargin:"0",fieldRightMargin:"0",noBaseline:!0,fields:[{type:a.Component,sx:{mb:-1},element:function(){return Se(Je,{variant:"caption",sx:{opacity:.8},children:"Перенос с"})}},{type:a.Group,fieldRightMargin:"0",fieldBottomMargin:"1",fields:[{type:a.Text,fieldBottomMargin:"0",columns:"6",compute:function(e){var t=e.fromStatus;return"Выполненные задачи"===t||"Просрочено"===t||"Новые задачи"===t?t:Fo(e.fromStamp||To()).format("DD/MM/YYYY")}},{type:a.Time,sx:{pointerEvents:"none",opacity:.5},fieldBottomMargin:"0",columns:"6",compute:function(e){var t=e.fromTimeStamp;return"number"==typeof t?Lo(t).format("HH:mm"):null},title:"",placeholder:"Не указано"}]},{type:a.Component,sx:{mb:-1},element:function(){return Se(Je,{variant:"caption",sx:{opacity:.8},children:"Перенос на"})}},{type:a.Group,fieldRightMargin:"0",fieldBottomMargin:"1",fields:[{type:a.Text,fieldBottomMargin:"0",columns:"6",compute:function(e){var t=e.toStatus;return"Выполненные задачи"===t||"Просрочено"===t||"Новые задачи"===t?t:Fo(S.get(Rs,t)||To()).format("DD/MM/YYYY")}},{type:a.Time,fieldBottomMargin:"0",columns:"6",name:"time_stamp",title:"",placeholder:"Не указано"}]}]},{type:a.Text,name:"comment",title:"",placeholder:"Комментарий",inputRows:3}],Zh=$l()((function(e){return{root:c({display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",height:"calc(100vh - 85px)",width:"100%"},"& .".concat("react-declarative__scrollViewTarget"),{transform:"rotateX(180deg)","& > div > div":{marginBottom:"25px",transform:"rotateX(180deg)"}}),container:{position:"relative",flex:1,display:"flex",alignItems:"stretch",justifyContent:"stretch"},content:{flex:1,display:"flex"},group:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",maxWidth:"276px",minWidth:"276px",gap:10,padding:10,marginRight:10},inactiveGroup:{background:"#E1E2E6"},activeGroup:{background:je(e.palette.primary.main,.5)},list:{flex:1,minWidth:"256px",height:"100%"},loading:{pointerEvents:"none"}}})),Qh=["fromWhom","toWhom","task","contact","type","metadata_created_at","metadata_updated_at","metadata_task"],ey={user_id:"",tip_klienta:null,search:""},ty=function(e){var n=e.withTransparentHeader,a=e.dealCardMap,s=e.payload,u=e.contactId,l=Zh().classes,d=i(hr((function(){return o(o({},ey),{},{user_id:"/task_mine"===Fl.routerService.location.pathname?Fl.appwriteService.currentUser.$id:void 0})})),2),p=d[0],h=d[1],y=i(yr((function(){return{user_id:p.user_id,tip_klienta:JSON.parse(p.tip_klienta),search:p.search}})),2),v=y[0],b=y[1];Rt((function(){h(v.current)}),[v.current]);var _=i(we.useState((function(){return new Map(a)})),2),k=_[0],g=_[1],x=function(e){var n=e.payload,i=nt({history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),a=i.handleLoadStart,o=i.handleLoadEnd,s=tt({large:!0,payload:n,fields:Jh}),u=Ve(function(){var e=r(t().mark((function e(n){var r,i,a,o,u,l,c,d,p,m,f,h,y,v,b,_;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.fromStamp,i=n.toStatus,a=n.fromStatus,o=n.fromTimeStamp,u=n.type,l=n.id,c=n.call,d=n.meet,e.next=3,s({title:"Перенос задачи",handler:function(){return{fromStamp:r,toStatus:i,fromStatus:a,fromTimeStamp:o,time_stamp:"number"==typeof o?Lo(o).format("HH:mm"):null}}}).toPromise();case 3:if(!(p=e.sent)){e.next=19;break}return e.next=7,Fl.taskViewService.read(l);case 7:if(f=e.sent,h=f.to_user_id,y=f.title,v=f.contact_id,b=S.get(Rs,i)||null,_=(null===(m=Kn.parseTime(p.time_stamp))||void 0===m?void 0:m.toStamp())||null,"Внутренняя"!==u){e.next=16;break}return e.next=16,Fl.taskRequestService.updateTodoTask(l,h,a,b,_,"Выполненные задачи"===i,y,p.comment);case 16:if("Клиент"!==u){e.next=19;break}return e.next=19,Fl.taskRequestService.updateClientTask(l,h,a,v,b,_,"Выполненные задачи"===i,c,d,y,p.comment);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onLoadStart:a,onLoadEnd:o,fallback:Fl.errorService.handleGlobalError}),l=u.execute;return function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}({payload:s}),w=Xh({payload:s,contactId:u}),z=w.execute,V=w.render,A=we.useMemo((function(){var e,t=[],n=m(k.values());try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r)}}catch(i){n.e(i)}finally{n.f()}return t.flatMap((function(e){return e}))}),[k]),T=Gt(k),C=we.useRef(null),F=i(we.useState(null),2),L=F[0],I=F[1],M=function(){var e=r(t().mark((function e(n,r){var i,a,o,s,u,l,c;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=A.find((function(e){return e.id===n}))){e.next=3;break}return e.abrupt("return");case 3:if(a=i.status,o=i.type,s=i.moment_stamp,u=i.time_stamp,l=i.isCall,c=i.isMeet,a!==r){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,x({id:n,type:o,fromStamp:s,toStatus:r,fromTimeStamp:u,fromStatus:a,call:!!l,meet:!!c});case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),j=Ve(function(){var e=r(t().mark((function e(n){var r,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i(n,1),a=r[0],I(null),e.next=4,M(C.current,a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},fallback:Fl.errorService.handleGlobalError}),B=j.loading,D=j.execute;we.useEffect((function(){return Fl.taskViewService.updateSubject.subscribe(O(function(){var e=r(t().mark((function e(n){var r,a,o,s,u,l,c,d,p,m,f,h,y,v;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=i(n,2),a=r[0],o=r[1],s=new Map(T.current),u=0,l=Ds;u<l.length;u++)c=l[u],d=s.get(c)||[],s.set(c,d.filter((function(e){return e.id!==a})));return e.next=5,Ps(o);case 5:p=e.sent,m=0,f=Ds;case 7:if(!(m<f.length)){e.next=19;break}if((h=f[m])!==p){e.next=16;break}return y=s.get(h)||[],e.next=13,Rh(o);case 13:(v=e.sent)&&y.unshift(v),s.set(h,y);case 16:m++,e.next=7;break;case 19:g(s);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[]),we.useEffect((function(){return Fl.taskViewService.removeSubject.subscribe(O(function(){var e=r(t().mark((function e(n){var r,i,a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=new Map(T.current),i=0,a=Ds;i<a.length;i++)o=a[i],s=r.get(o)||[],r.set(o,s.filter((function(e){return e.id!==n})));g(r);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[]),we.useEffect((function(){return Fl.taskViewService.createSubject.subscribe(O(function(){var e=r(t().mark((function e(n){var r,i,a,o,s,l,c;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u||n.contact_id===u){e.next=2;break}return e.abrupt("return");case 2:return r=new Map(T.current),e.next=5,Ps(n);case 5:i=e.sent,a=0,o=Ds;case 7:if(!(a<o.length)){e.next=20;break}if((s=o[a])!==i){e.next=17;break}return l=(l=r.get(s)||[]).filter((function(e){return e.id!==n.$id})),e.next=14,Rh(n);case 14:null!==(c=e.sent)&&l.unshift(c),r.set(s,l);case 17:a++,e.next=7;break;case 20:g(r);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[]);var R=B;return Se(qe,{className:Pe(l.root,c({},l.loading,R)),children:[Se(Gh,{withTransparentHeader:n,sx:o({},!n&&{mb:2}),data:v.current,payload:s,onChange:b,onCreateTask:z}),Se(qe,{className:l.container,children:[Se(Tn,{withScrollbar:!0,hideOverflowY:!0,className:l.content,children:Ds.map((function(e){var n,i=T.current.get(e)||[];return Se(qe,{onDrop:function(t){var n=t.currentTarget;return D([e,n])},onDragEnd:function(){I(null)},onDragOver:function(t){I(e),t.preventDefault()},className:Pe(l.group,(n={},c(n,l.activeGroup,L===e),c(n,l.inactiveGroup,L!==e),n)),children:[Se(Je,{variant:"h6",fontWeight:"bold",children:e}),Se(nr,{className:l.list,minRowHeight:150,children:i.sort((function(e,t){var n=e.updatedAt,r=t.updatedAt;return f(n).isBefore(r)?1:-1})).filter((function(e){var t=v.current.user_id;return!t||e.toUserId===t})).filter((function(e){var t=v.current.task_type;return null==t||!t.length||e.type===t[0]})).filter((function(e){var t=v.current.search;return!t||vr.apply(void 0,[e,t].concat(Qh))})).map((function(e){return Se(Hh,o({payload:s,onChangeStatus:(n=r(t().mark((function n(r){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M(e.id,r);case 2:case"end":return t.stop()}}),n)}))),function(e){return n.apply(this,arguments)}),onDrag:function(){C.current=e.id}},e),e.id);var n}))})]})}))}),V()]})]})},ny=function(){var e=r(t().mark((function e(n){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new Map,e.next=3,Promise.all(Ds.map(function(){var e=r(t().mark((function e(a){var o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return e.next=3,Fl.taskViewService.findByTaskStatusAndContactId(a,n);case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,Fl.taskViewService.findByTaskStatus(a);case 8:e.t0=e.sent;case 9:return o=e.t0,e.next=12,Promise.all(o.map(function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rh(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:s=e.sent,i.set(a,s.filter((function(e){return null!==e})));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return e.abrupt("return",i);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ry=function(e){var n,a=e.contactId,o=e.payload,s=e.withTransparentHeader,u=function(){var e=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ny(a);case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Se(br,{state:u,fallback:Fl.errorService.handleGlobalError,children:(n=r(t().mark((function e(n){var r,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i(n,1),u=r[0],e.abrupt("return",Se(ty,{withTransparentHeader:s,dealCardMap:u,contactId:a,payload:o}));case 2:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})})},iy=[{type:et.Link,isVisible:function(){return!!Fl.routerService.previousPath},action:"list-action",label:Se(Ge,{sx:{display:"block"}})},{type:et.Link,action:"list-action",label:"База объектов"},{type:et.Link,action:"list-action",label:"Просмотр задач"}],ay=[{id:"list",element:function(e){var t=e.payload;return Se(ur,{history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},routes:Ef,payload:t})},isActive:function(e){return Dl(["/apartment","/apartment_rent","/apartment_sell","/apartment_archive","/apartment_remove"],e)},isAvailable:function(){return!1}},{id:"create",element:function(e){var n=e.payload,a=Yn(),s=a.elementRef,u=a.size,l=_f({payload:n}),d=i(we.useState((function(){return{activeStep:0,contact_id:null,fio:"",telefon:"",tip_klienta:null}})),2),p=d[0],m=d[1],f=i(we.useState([]),2),h=f[0],y=f[1],v=i(we.useState(!1),2),b=v[0],_=v[1],k=i(we.useState(!1),2),g=k[0],x=k[1],w=we.useMemo((function(){return new Date(Date.now()+1e4)}),[p.activeStep]);we.useEffect((function(){x(!1)}),[p.activeStep]);var S=function(e){return m((function(t){return o(o({},t),{},{activeStep:e})}))},z=p.activeStep,V=xf().classes,A=nt({history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),T=A.handleLoadStart,C=A.handleLoadEnd,F=A.loading,L=A.unblock,I=Gt(p),M=Ve(r(t().mark((function e(){var n,r,i,a,o,s,u,l;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=I.current,r=n.contact_id,i=n.fio,a=n.telefon,o=n.tip_klienta,r){e.next=7;break}return e.next=5,Fl.contactViewService.create({fio:i,telefon:a,tip_klienta:o,"data-sozdaniya_klienta":Kn.currentDate()});case 5:s=e.sent,r=s.$id;case 7:return e.next=9,Fl.apartmentViewService.create({contact_id:r});case 9:u=e.sent,l=u.id,L(),Fl.routerService.push("/apartment_edit/".concat(l),{viewRedirectFlag:!0}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),Fl.alertService.notify(Xs(e.t0));case 18:case"end":return e.stop()}}),e,null,[[0,15]])}))),{onLoadStart:T,onLoadEnd:C}).execute,j=function(){var e=r(t().mark((function e(){var n,r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_(!0),p.fio||p.telefon){e.next=3;break}return e.abrupt("return");case 3:if(0!==z){e.next=11;break}return e.next=6,Fl.contactRequestService.findDuplicates(p.telefon);case 6:n=e.sent,r=n.rows,i=n.total,y(r),S(0===i?2:1);case 11:if(1===z&&S(2),2!==z){e.next=15;break}return e.next=15,M();case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=!1;return 1===z&&(e=e||!g),e=(e=e||F)||3===z};return Se(Qn,{children:[Se(ot,{items:gf}),Se(fn,{className:V.root,children:[Se(Xn,{className:V.header,activeStep:z,children:[Se(Jn,{completed:z>0,children:Se(Zn,{children:"Первичные данные"})},0),Se(Jn,{completed:z>1,children:Se(Zn,{children:"Поиск дубликатов"})},1),Se(Jn,{completed:z>2,children:Se(Zn,{children:"Создание объекта"})},2)]}),Se("div",{className:V.adjust}),Se(qe,{ref:s,className:V.content,children:0===z?Se(st,{sx:{pl:1,pr:1,pt:2,pb:3},handler:p,onChange:m,dirty:b,fields:kf}):1===z?Se(nr,{sx:{height:u.height},component:Pt,minRowHeight:54,children:h.map((function(e,n){var i,a=e.fio,s=(e.telefon,e.$id),u=e.tip_klienta,d=e.system_created_by,f=e.index;return Se(Ue,{disableRipple:!0,className:Pe(c({},V.listItemBackground,n%2==1)),onClick:function(){m((function(e){return o(o({},e),{},{contact_id:s,activeStep:2})}))},dense:!0,children:[Se(er,{children:Se(tr,{edge:"start",checked:p.contact_id===s,sx:{marginLeft:"0 !important"},disableRipple:!0})}),Se(Ct,{primary:a,secondary:Se(Ne,{Loader:wf,children:(i=r(t().mark((function e(){var n,r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.userViewService.tryRead(d);case 2:return n=e.sent,r=n?"Создал "+[n.last_name,n.first_name,n.middle_name].filter((function(e){return e})).join(" "):"",e.abrupt("return",["№".concat(f),r,u].filter((function(e){return e})).join(", "));case 5:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})})}),Se(en,{variant:"outlined",onClick:function(e){e.preventDefault(),e.stopPropagation(),l(s)},sx:{ml:3},children:"Показать контакт"})]},n)}))}):2===z?Se(st,{sx:{pl:1,pr:1,pt:2,pb:3},handler:p,dirty:b,fields:kf}):null}),Se(Ke,{sx:{pl:1,pr:1,pb:1},justifyContent:"space-between",flexDirection:"row",children:[Se(xt,{disabled:F||0===z,fallback:Fl.errorService.handleGlobalError,onClick:function(){m((function(e){return o(o({},e),{},{contact_id:null})})),0===h.length?S(0):S(z-1)},sx:{mt:1},variant:"contained",onLoadStart:T,onLoadEnd:C,children:"Назад"}),Se(xt,1===z?{disabled:B(),fallback:Fl.errorService.handleGlobalError,onClick:j,sx:{mt:1},variant:"contained",onLoadStart:T,onLoadEnd:C,children:Se(rr,{expireAt:w,onExpire:function(){return x(!0)},children:"Не вижу дубликат"})}:2===z?{disabled:B(),fallback:Fl.errorService.handleGlobalError,onClick:j,sx:{mt:1},variant:"contained",onLoadStart:T,onLoadEnd:C,children:"Создать объект"}:{disabled:B(),fallback:Fl.errorService.handleGlobalError,onClick:j,sx:{mt:1},variant:"contained",onLoadStart:T,onLoadEnd:C,children:"Далее"})]})]})]})},isActive:function(e){return Dl(["/apartment/create"],e)},isAvailable:function(){return!1}},{id:"object",element:function(e){var t=e.beginSave,n=e.onChange,r=e.payload,i=e.data,a=e.formState,s=at(i);return Se(Ae,{children:[Se(ot,{items:th,payload:a,onAction:function(e){"list-action"===e&&Fl.routerService.back("/apartment"),"save-action"===e&&t()}}),Se(jl,{}),Se(Vf,{payload:r,mode:r.menuMode,children:[Se(st,{fields:Xf,changeSubject:s,features:function(){return o(o({},r.permissions),{},{withBottomSaveButton:!0})},payload:function(){return o(o({},r),{},{beginSave:t})},context:a,onChange:n,handler:function(){return i}}),Se(ut,{}),Se(lt,{})]})]})},isActive:function(e){return Dl(["/apartment_edit/:id","/apartment_edit/:id/object"],e)}},{id:"documents",element:function(e){var n,i,a,o=e.onChange,s=e.payload,u=e.beginSave,l=e.formState,c=e.data,d=nt({history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),p=d.handleLoadStart,m=d.handleLoadEnd,f=d.loading;return Se(Ae,{children:[Se(ot,{items:Af,payload:l,onAction:function(e){"list-action"===e&&Fl.routerService.back("/apartment"),"save-action"===e&&u()}}),Se(jl,{}),Se(Vf,{payload:s,mode:s.menuMode,children:[Se(fn,{sx:{p:1},children:Se(Un,{disabled:f,accept:"*",multiple:!0,items:c,tr:(a=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.appwriteService.tryReadFileName(n);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=n;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),fallback:Fl.errorService.handleGlobalError,onClick:(i=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.appwriteService.getFileURL(n);case 2:return r=e.sent,e.next=5,Fl.appwriteService.readFileName(n);case 5:i=e.sent,zt(r,i);case 7:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)}),onUpload:function(e){return Fl.appwriteService.uploadFile(e)},onChange:(n=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o(n);case 1:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)}),onLoadStart:p,onLoadEnd:m})}),Se(ut,{}),Se(lt,{})]})]})},isActive:function(e){return Dl(["/apartment_edit/:id/documents"],e)}},{id:"owner_contact",element:function(e){var t=e.data,n=e.payload,r=e.formState,i=e.onChange,a=e.beginSave,s=at(t);return Se(Ae,{children:[Se(ot,{items:Lh,onAction:function(e){"list-action"===e&&Fl.routerService.back("/apartment"),"save-action"===e&&a()},payload:r}),Se(jl,{}),Se(Vf,{payload:n,mode:n.menuMode,children:[Se(st,{handler:function(){return t},onChange:i,features:function(){return o(o({},n.permissions),{},{withBottomSaveButton:!0})},payload:function(){return o(o({},n),{},{beginSave:a})},context:r,changeSubject:s,fields:yh}),Se(ut,{}),Se(lt,{})]})]})},isActive:function(e){return Dl(["/apartment_edit/:id/owner_contact"],e)}},{id:"object",element:function(e){var n,i,a,o=e.params.id,s=e.formState,u=e.payload,l=e.data,c=function(e){var n=e.apartmentId,i=nt({history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),a=i.handleLoadStart,o=i.handleLoadEnd,s=Ve(r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.featureService.hasFeature("superadmin");case 2:if(!e.sent){e.next=6;break}return e.next=5,Fl.cleanupService.removeApartment(n);case 5:Fl.routerService.push("/apartment");case 6:case"end":return e.stop()}}),e)}))),{onLoadStart:a,onLoadEnd:o,fallback:Fl.errorService.handleGlobalError}).execute,u=jt({title:"Вы уверены?",msg:"Удаление объекта сотрет соответствующие записи в объектах недвижимости, сделках. Продолжить?"});return function(){return u().then((function(e){e&&s()}))}}({apartmentId:o}),d=rt({AfterTitle:function(e){var t=e.onClose;return Se(We,{size:"small",onClick:t,children:Se(it,{})})},fields:Xf,payload:u,features:u.permissions,outlinePaper:!0,handler:(i=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.apartmentViewService.tryRead(o);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)}),fullScreen:!0,title:"Редактировать",onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},onSubmit:(n=r(t().mark((function e(n,r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!0,e.prev=1,!n){e.next=13;break}return e.t0=Fl.apartmentViewService,e.t1=o,e.next=7,Fl.polishService.polishApartment(n,r);case 7:return e.t2=e.sent,e.next=10,e.t0.update.call(e.t0,e.t1,e.t2);case 10:if(!r.hasAdvertising){e.next=13;break}return e.next=13,Fl.advertisingRequestService.updateAdvertisingByApartment(o,n);case 13:e.next=21;break;case 15:return e.prev=15,e.t3=e.catch(1),i=!1,a=Xs(e.t3),Fl.alertService.notify(a),e.abrupt("return",!1);case 21:return e.prev=21,e.abrupt("return",i);case 24:case"end":return e.stop()}}),e,null,[[1,15,21,24]])}))),function(e,t){return n.apply(this,arguments)}),submitLabel:"Сохранить"}),p=d.pickData,m=d.render,f=ah({title:"Поделиться объектом",payload:u,features:u.permissions,selectedRows:l.system_allowance||[]}),h=Ve(function(){var e=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("list-action"===n&&Fl.routerService.back("/apartment"),"edit-action"===n&&p(),"toggle-only-for-owner-action"!==n){e.next=5;break}return e.next=5,Fl.apartmentViewService.toggleOnlyForOwner(o);case 5:if("pick-allowance-action"!==n){e.next=13;break}return e.next=8,f();case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,Fl.apartmentViewService.updateAllowance(o,r);case 13:"superadmin-remove-action"===n&&c();case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),y=h.execute,v=at(l);return Se(Ae,{children:[Se(ot,{payload:s,items:oh,actions:sh,onAction:(a=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(n);case 2:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})}),Se(jl,{}),Se(Pl,{payload:u,mode:u.menuMode,children:[Se(st,{dirty:!0,readonly:!0,changeSubject:v,features:u.permissions,payload:u,fields:Zm,handler:function(){return l}}),Se(ut,{}),Se(lt,{})]}),m()]})},isActive:function(e){return Dl(["/apartment_view/:id","/apartment_view/:id/object"],e)}},{id:"owner_contact",element:function(e){var n,i,a=e.params.id,o=e.payload,s=e.formState,u=e.data,l=at(u),c=rt({AfterTitle:function(e){var t=e.onClose;return Se(We,{size:"small",onClick:t,children:Se(it,{})})},fields:yh,payload:o,features:o.permissions,outlinePaper:!0,handler:(i=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jh(a);case 2:return n=e.sent,e.next=5,Fl.contactViewService.tryRead(n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)}),fullScreen:!0,title:"Редактировать",onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},onSubmit:(n=r(t().mark((function e(n){var r,i,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!0,e.prev=1,!n){e.next=13;break}return e.next=5,jh(a);case 5:return i=e.sent,e.t0=Fl.contactViewService,e.t1=i,e.next=10,Fl.polishService.polishContact(n,o);case 10:return e.t2=e.sent,e.next=13,e.t0.update.call(e.t0,e.t1,e.t2);case 13:e.next=21;break;case 15:return e.prev=15,e.t3=e.catch(1),r=!1,s=Xs(e.t3),Fl.alertService.notify(s),e.abrupt("return",!1);case 21:return e.prev=21,e.abrupt("return",r);case 24:case"end":return e.stop()}}),e,null,[[1,15,21,24]])}))),function(e){return n.apply(this,arguments)}),submitLabel:"Сохранить"}),d=c.pickData,p=c.render,m=function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"list-action"===n&&Fl.routerService.back("/apartment"),"edit-action"===n&&d(),"show-contact-action"===n&&Fl.routerService.push("/contact_view/".concat(s.data.object.contact_id));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Se(Ae,{children:[Se(ot,{items:Ih,actions:Mh,payload:s,onAction:m}),Se(jl,{}),Se(Pl,{payload:o,mode:o.menuMode,children:[Se(st,{changeSubject:l,readonly:!0,handler:function(){return u},features:o.permissions,fields:Wc,payload:o}),Se(ut,{}),Se(lt,{})]}),p()]})},isActive:function(e){return Dl(["/apartment_view/:id/owner_contact"],e)}},{id:"documents",element:function(e){var n,i,a,s=e.params.id,u=e.data,l=e.payload,c=e.formState,d=Tf({data:u,onSubmit:(n=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.apartmentViewService.update(s,o(o({},c.data.object),{},{apartment_files:n}));case 2:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})}),p=d.render,m=d.pickFiles;return Se(Ae,{children:[Se(ot,{items:Cf,payload:c,onAction:function(e){"list-action"===e&&Fl.routerService.back("/apartment"),"edit-action"===e&&m()}}),Se(jl,{}),Se(Pl,{payload:l,mode:l.menuMode,children:[Se(fn,{sx:{p:1},children:Se(Un,{disabled:!0,accept:"*",multiple:!0,items:u,tr:(a=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.appwriteService.tryReadFileName(n);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=n;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),fallback:Fl.errorService.handleGlobalError,onClick:(i=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.appwriteService.getFileURL(n);case 2:return r=e.sent,e.next=5,Fl.appwriteService.readFileName(n);case 5:i=e.sent,zt(r,i);case 7:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)}),onUpload:function(e){return Fl.appwriteService.uploadFile(e)}})}),Se(ut,{}),Se(lt,{})]}),p()]})},isActive:function(e){return Dl(["/apartment_view/:id/documents"],e)}},{id:"tasks",element:function(e){var t=e.formState,n=e.payload;return Se(Ae,{children:[Se("div",{className:"real-estate__headerRoot",children:[Se(ot,{payload:t,items:iy,onAction:function(e){"list-action"===e&&Fl.routerService.back("/apartment")}}),Se(jl,{})]}),Se(Pl,{payload:n,mode:n.menuMode,children:Se(ry,{withTransparentHeader:!0,contactId:t.data.object.contact_id,payload:n})})]})},isActive:function(e){return Dl(["/apartment_view/:id/tasks"],e)}},{id:"advertising",element:function(e){var n,i=e.formState,a=e.payload,s=e.data,u=e.params.id,l=tt({large:!0,title:"Опубликовать в Telegram",fields:hc}),c=nt({history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),d=c.handleLoadStart,p=c.handleLoadEnd,m=Ve(r(t().mark((function e(){var n,r,c,d,p,m,f,h;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().toPromise();case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:if(!s){e.next=9;break}e.t0=s,e.next=12;break;case 9:return e.next=11,Fl.advertisingRequestService.buildAdvertisingByApartment(o(o({},i.data.object),{},{id:u}));case 11:e.t0=e.sent;case 12:return r=e.t0,e.next=15,Fl.dictService.getTelegramMapRaw();case 15:return c=e.sent,d=S.get(c,n.telegram_channel),e.next=19,fc(r,d.channel,a);case 19:return p=e.sent,m=r.apartment_images||[],f=r.advertising_images||[],h=m.filter((function(e){return f.includes(e)})),e.next=25,Fl.publishService.publishTelegram(n.telegram_channel,p,h,"№".concat(r.apartment_index));case 25:Fl.alertService.notify("Пост отправлен в очередь на публикацию");case 26:case"end":return e.stop()}}),e)}))),{onLoadStart:d,onLoadEnd:p,fallback:Fl.errorService.handleGlobalError}).execute,f=function(){var e=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=2;break}return e.abrupt("return",s);case 2:return e.next=4,Fl.advertisingRequestService.buildAdvertisingByApartment(o(o({},i.data.object),{},{id:u}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=rt({AfterTitle:function(e){var t=e.onClose;return Se(We,{size:"small",onClick:t,children:Se(it,{})})},fields:tc,handler:f,payload:a,features:a.permissions,outlinePaper:!0,fullScreen:!0,title:"Редактировать",onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},onSubmit:(n=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!0,e.prev=1,!n){e.next=10;break}if(null==s||!s.id){e.next=8;break}return e.next=6,Fl.advertisingViewService.update(s.id,n);case 6:e.next=10;break;case 8:return e.next=10,Fl.advertisingViewService.create(n);case 10:e.next=18;break;case 12:return e.prev=12,e.t0=e.catch(1),r=!1,i=Xs(e.t0),Fl.alertService.notify(i),e.abrupt("return",!1);case 18:return e.prev=18,e.abrupt("return",r);case 21:case"end":return e.stop()}}),e,null,[[1,12,18,21]])}))),function(e){return n.apply(this,arguments)}),submitLabel:"Сохранить"}),y=h.pickData,v=h.render,b=function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("list-action"===n&&Fl.routerService.back("/apartment"),"edit-action"===n&&y(),"publish-action"!==n){e.next=5;break}return e.next=5,m();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=at(s);return Se(Ae,{children:[Se(ot,{payload:i,items:yc,onAction:b}),Se(jl,{}),Se(Pl,{payload:a,mode:a.menuMode,children:[Se(st,{dirty:!0,readonly:!0,changeSubject:_,features:a.permissions,payload:a,fields:ec,handler:f}),Se(ut,{}),Se(lt,{})]}),v()]})},isActive:function(e){return Dl(["/apartment_view/:id/advertising"],e)}},{id:"history",element:function(e){var n=e.payload,a=e.formState,o=i(we.useState([]),2),s=o[0],u=o[1],l=Yn({target:document.body,selector:"main",compute:function(e){var t,r=e.height,i=e.width;if(n.menuMode===H.Tabs){var a=document.querySelector(".".concat(ar));r-=(null==a?void 0:a.offsetHeight)||0}return r-=(null===(t=document.querySelector(".".concat(Lf)))||void 0===t?void 0:t.offsetHeight)||0,r-=50,{width:i,height:r=Math.min(window.innerHeight-50,r)}}}).size,c=Ve(function(){var e=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return r=Il("id"),e.next=4,Fl.dealHistoryViewService.findAllByApartmentId(r);case 4:i=e.sent,u(i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{fallback:Fl.errorService.handleGlobalError,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),d=c.loading,p=c.execute;return Se(Ae,{children:[Se("div",{className:Lf,children:[Se(ot,{payload:a,items:If,onAction:function(e){"list-action"===e&&Fl.routerService.back("/apartment")}}),Se(jl,{})]}),Se(Pl,{payload:n,mode:n.menuMode,children:Se(nr,{sx:{height:l.height},minHeight:72,loading:d,onDataRequest:function(e){p(e)},children:Se(Ke,{spacing:1,children:s.map((function(e){return Se(Ff,{loading:d,status:"info",item:e},e.$id)}))})})})]})},isActive:function(e){return Dl(["/apartment_view/:id/history"],e)}},{id:"service_comment",element:function(e){var n=e.payload,a=e.formState,o=i(we.useState([]),2),s=o[0],u=o[1],l=Yn({target:document.body,selector:"main",compute:function(e){var t,r=e.height,i=e.width;if(n.menuMode===H.Tabs){var a=document.querySelector(".".concat(ar));r-=(null==a?void 0:a.offsetHeight)||0}return r-=(null===(t=document.querySelector(".".concat(Bh)))||void 0===t?void 0:t.offsetHeight)||0,r-=50,{width:i,height:r=Math.min(window.innerHeight-50,r)}}}).size,c=Ve(r(t().mark((function e(){var n,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Il("id"),e.next=3,Fl.serviceCommentViewService.findAllByApartmentId(n);case 3:return i=e.sent,e.t0=u,e.next=7,Promise.all(i.map(function(){var e=r(t().mark((function e(n){var r,i,a,o,s,u,l,c;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.$id,i=n.user_id,a=n.file_id,o=n.comment,s=n.$createdAt,e.next=3,Fl.userViewService.tryRead(i);case 3:if(u=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:if(!u.avatar){e.next=12;break}return e.next=9,Fl.appwriteService.getImageURL(u.avatar);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0="";case 13:if(l=e.t0,!a){e.next=20;break}return e.next=17,Fl.appwriteService.tryReadFileName(a);case 17:e.t1=e.sent,e.next=21;break;case 20:e.t1="";case 21:return c=e.t1,e.abrupt("return",{id:r,message:o,fileId:a,userId:i,displayName:[u.last_name,u.first_name,u.middle_name,f(s).format("DD.MM.YYYY / HH:mm")].join(" "),fileName:c,avatar:l});case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).filter((function(e){return!!e})).reverse());case 7:e.t1=e.sent,(0,e.t0)(e.t1);case 9:case"end":return e.stop()}}),e)}))),{fallback:Fl.errorService.handleGlobalError,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),d=c.execute;we.useEffect((function(){d()}),[]),we.useEffect((function(){return Fl.serviceCommentViewService.createSubject.subscribe((function(e){var t=Il("id");e.apartment_id===t&&d()}))}),[]);var p=function(){var e=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fl.appwriteService.currentUser.$id,i=Il("id"),e.next=4,Fl.serviceCommentViewService.create({user_id:r,comment:n,apartment_id:i,bid_id:null,contact_id:null,file_id:null});case 4:return e.next=6,d();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=r(t().mark((function e(n,r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Fl.appwriteService.currentUser.$id,a=Il("id"),e.next=4,Fl.serviceCommentViewService.create({user_id:i,comment:n,apartment_id:a,bid_id:null,contact_id:null,file_id:r});case 4:return e.next=6,d();case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Se(Ae,{children:[Se("div",{className:Bh,children:[Se(ot,{payload:a,items:Dh,onAction:function(e){"list-action"===e&&Fl.routerService.back("/apartment")}}),Se(jl,{})]}),Se(Pl,{payload:n,mode:n.menuMode,children:Se(Mc,{payload:n,style:{height:l.height},messages:s,onText:p,onFile:m})})]})},isActive:function(e){return Dl(["/apartment_view/:id/service_comment"],e)}}],oy=function(){var e=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("create"!==n){e.next=2;break}return e.abrupt("return",{"data-sozdaniya_klienta":Kn.currentDate()});case 2:return e.next=4,Fl.apartmentViewService.read(n);case 4:return r=e.sent,i=r.contact_id,e.next=8,Fl.contactViewService.tryRead(i);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sy=function(e){var n,a=e.id,o=void 0===a?"create":a,s=function(){var e=r(t().mark((function e(n,r,i){var a,s,u,l,c,d,p,m,f,h,y,v;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.afterSave,s=!0,e.prev=2,e.next=5,Fl.polishService.polishApartment(S.get(n,"object")||{},r);case 5:return u=e.sent,e.next=8,Fl.polishService.polishContact(S.get(n,"owner_contact")||{},r);case 8:if(l=e.sent,c=S.get(n,"documents")||[],d=S.get(n,"object.contact_id"),S.set(n,"object.apartment_files",c),!d){e.next=18;break}return e.next=15,Fl.contactViewService.tryRead(d);case 15:e.t0=e.sent,e.next=19;break;case 18:e.t0=!1;case 19:if(p=e.t0,!d||!p){e.next=25;break}return e.next=23,Fl.contactViewService.update(d,l);case 23:e.next=30;break;case 25:return e.next=27,Fl.contactViewService.create(l);case 27:m=e.sent,f=m.id,d=f;case 30:if(S.set(n,"object.contact_id",d),"create"!==o){e.next=43;break}return e.next=34,Fl.apartmentViewService.create(u);case 34:return h=e.sent,y=h.id,e.next=38,Fl.advertisingRequestService.createAdvertisingByApartment(y,u);case 38:return e.next=40,a();case 40:Fl.routerService.push("/apartment_edit/".concat(y)),e.next=45;break;case 43:return e.next=45,Fl.apartmentViewService.update(o,u);case 45:if(!Fl.routerService.hasViewRedirectFlag()){e.next=49;break}return e.next=48,a();case 48:Fl.routerService.push("/apartment_view/".concat(o));case 49:Fl.alertService.notify("Изменения сохранены"),e.next=57;break;case 52:e.prev=52,e.t1=e.catch(2),s=!1,v=Xs(e.t1),Fl.alertService.notify(v);case 57:return e.prev=57,e.abrupt("return",s);case 60:case"end":return e.stop()}}),e,null,[[2,52,57,60]])})));return function(t,n,r){return e.apply(this,arguments)}}(),u=function(){var e=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oy(o);case 2:return e.t0=e.sent,e.next=5,Fl.apartmentViewService.tryRead(o);case 5:return e.t1=e.sent,e.next=8,Fl.advertisingViewService.tryReadByApartmentId(o);case 8:return e.t2=e.sent,e.next=11,Fl.settingsViewService.getMasterDetailMode();case 11:return e.t3=e.sent,e.next=14,Fl.permissionService.getPermissions();case 14:return e.t4=e.sent,e.next=17,Fl.featureService.getAccessLevel();case 17:return e.t5=e.sent,e.next=20,Fl.visibilityService.getFieldVisibilitySet();case 20:return e.t6=e.sent,e.abrupt("return",[e.t0,e.t1,e.t2,e.t3,e.t4,e.t5,e.t6]);case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=Be();return we.useEffect((function(){return Fl.contactViewService.updateSubject.subscribe(function(){var e=r(t().mark((function e(n){var r,a,o,s,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i(n,2),a=r[0],o=r[1],s=Il("id")){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Fl.apartmentViewService.tryRead(s);case 6:if(u=e.sent,a===(null==u?void 0:u.contact_id)){e.next=9;break}return e.abrupt("return");case 9:l.next(["owner_contact",o]);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),we.useEffect((function(){return Fl.apartmentViewService.updateSubject.subscribe((function(e){var t=i(e,2),n=t[0],r=t[1];o===n&&(l.next(["object",r]),l.next(["documents",(null==r?void 0:r.apartment_files)||[]]))}))}),[]),we.useEffect((function(){return Fl.advertisingViewService.updateSubject.subscribe((function(e){var t=i(e,2),n=(t[0],t[1]);o===n.apartment_id&&l.next(["advertising",n])}))}),[]),we.useEffect((function(){return Fl.advertisingViewService.createSubject.subscribe((function(e){o===e.apartment_id&&l.next(["advertising",e])}))}),[]),Se(br,{state:u,reloadSubject:Fl.layoutService.reloadOutletSubject,fallback:Fl.errorService.handleGlobalError,children:(n=r(t().mark((function e(n){var r,a,u,c,d,p,m,f;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i(n,7),a=r[0],u=r[1],c=r[2],d=r[3],p=r[4],m=r[5],f=r[6],e.abrupt("return",Se(ur,{changeSubject:l,history:Fl.routerService,waitForChangesDelay:pa,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},routes:ay,params:{id:o},initialData:{owner_contact:a,advertising:c,object:u,documents:(null==u?void 0:u.apartment_files)||[]},payload:function(){return{menuMode:d,permissions:p,accessLevel:m,hasAdvertising:!!c,fieldVisibility:f,id:o}},onChange:console.log,onSubmit:s}));case 2:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})})},uy=Me.createLoader(12),ly=function(){return Se(qe,{sx:{mb:1,minHeight:32},children:Se(Tn,{sx:{height:"100%"},hideOverflowY:!0,children:Se(qe,{sx:{display:"flex",alignItems:"center",justifyContent:"stretch",gap:1},children:[Se(Je,{variant:"subtitle2",children:"Заявки:"}),Se(Ne,{payload:null,Loader:uy,children:(e=r(t().mark((function e(){var n,r,i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.bidRequestService.getAllBidCount();case 2:return n=e.sent,e.next=5,Fl.bidRequestService.getRentBidCount();case 5:return r=e.sent,e.next=8,Fl.bidRequestService.getSellBidCount();case 8:return i=e.sent,e.next=11,Fl.bidRequestService.getArchiveBidCount();case 11:return a=e.sent,e.next=14,Fl.bidRequestService.getNewBidCount();case 14:return o=e.sent,e.abrupt("return",Se(Ke,{direction:"row",gap:1,sx:{pointerEvents:"none"},children:[Se(qe,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[Se(or,{orientation:"vertical"}),Se(Ln,{href:"#",children:["Всего ",n]}),Se(or,{orientation:"vertical"})]}),Se(qe,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[Se(or,{orientation:"vertical"}),Se(Ln,{href:"#",children:["Аренда ",r]}),Se(or,{orientation:"vertical"})]}),Se(qe,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[Se(or,{orientation:"vertical"}),Se(Ln,{href:"#",children:["Продажа ",i]}),Se(or,{orientation:"vertical"})]}),Se(qe,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[Se(or,{orientation:"vertical"}),Se(Ln,{href:"#",children:["Архив ",a]}),Se(or,{orientation:"vertical"})]}),Se(qe,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[Se(or,{orientation:"vertical"}),Se(Ln,{href:"#",children:["Новые ",o]}),Se(or,{orientation:"vertical"})]})]}));case 16:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})})]})})});var e},cy=function(){return window.innerHeight-100},dy=function(){return window.innerHeight-100},py=function(){return window.innerHeight-100},my=function(){return window.innerHeight-100},fy=[{id:"common",element:function(e){var n=e.payload,i=xm({payload:n}),a=Be(Fl.bidViewService.reloadSubject),s=pn({columns:ip,storageKey:"bid_columns"}),u=s.render,l=s.pickColumns,c=s.columns,d=sr(Fl.routerService.locationState,{fallback:Fl.errorService.handleGlobalError}).listProps,p=Bm(),m=function(){var e=r(t().mark((function e(n,r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Fl.layoutService.setAppbarLoader(!0),e.prev=1,"edit-action"===n&&Fl.routerService.push("/bid_edit/".concat(r.id)),"remove-action"!==n){e.next=7;break}return e.next=6,Fl.bidViewService.remove(r.id);case 6:a.next();case 7:if("copy-action"!==n){e.next=14;break}return e.next=10,Fl.bidViewService.read(r.id);case 10:return i=e.sent,e.next=13,Fl.bidViewService.create(i);case 13:a.next();case 14:if("toggle-archive"!==n){e.next=18;break}return e.next=17,Fl.bidViewService.toggleArchive(r.id);case 17:a.next();case 18:return e.prev=18,Fl.layoutService.setAppbarLoader(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[1,,18,21]])})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add-action"===r&&Fl.routerService.push("/bid/create"),"column-setup-action"===r&&l(),"excel-action"!==r){e.next=5;break}return e.next=5,np({query:d,handler:p,payload:n,columns:c});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.featureService.hasFeature("officemanager");case 2:if(!e.sent){e.next=5;break}return i(n),e.abrupt("return");case 5:Fl.routerService.push("/bid_view/".concat(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.permissionService.getPermissions();case 2:e.sent.hasBidViewPermission&&h(n.id);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Se(Ae,{children:[Se(Vn,o({withSearch:!0,withSingleSort:!0,withSingleChip:!0,noInitialFilters:!0,fetchDebounce:da,reloadSubject:a,title:"Заявки",filterLabel:"Фильтры",heightRequest:dy,rowActions:ap,actions:rp,filters:Tm,columns:c,handler:p,chips:op,AfterActionList:ly,AfterOperationList:Rm,onRowAction:m,onRowClick:y,onAction:f,selectionMode:ht.Multiple,payload:n},d)),u()]})},isActive:function(e){return Dl(["/bid"],e)},isAvailable:function(){return!1}},{id:"rent",element:function(e){var n=e.payload,i=xm({payload:n}),a=Be(Fl.bidViewService.reloadSubject),s=pn({columns:ip,storageKey:"bid_columns"}),u=s.render,l=s.pickColumns,c=s.columns,d=sr(Fl.routerService.locationState,{fallback:Fl.errorService.handleGlobalError}).listProps,p=Bm(),m=function(){var e=r(t().mark((function e(n,r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Fl.layoutService.setAppbarLoader(!0),e.prev=1,"edit-action"===n&&Fl.routerService.push("/bid_edit/".concat(r.id)),"remove-action"!==n){e.next=7;break}return e.next=6,Fl.bidViewService.remove(r.id);case 6:a.next();case 7:if("copy-action"!==n){e.next=14;break}return e.next=10,Fl.bidViewService.read(r.id);case 10:return i=e.sent,e.next=13,Fl.bidViewService.create(i);case 13:a.next();case 14:if("toggle-archive"!==n){e.next=18;break}return e.next=17,Fl.bidViewService.toggleArchive(r.id);case 17:a.next();case 18:return e.prev=18,Fl.layoutService.setAppbarLoader(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[1,,18,21]])})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add-action"===r&&Fl.routerService.push("/bid/create"),"column-setup-action"===r&&l(),"excel-action"!==r){e.next=5;break}return e.next=5,np({query:d,payload:o(o({},n),{},{_rent:!0}),handler:p,columns:c});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.featureService.hasFeature("officemanager");case 2:if(!e.sent){e.next=5;break}return i(n),e.abrupt("return");case 5:Fl.routerService.push("/bid_view/".concat(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.permissionService.getPermissions();case 2:e.sent.hasBidViewPermission&&h(n.id);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Se(Ae,{children:[Se(Vn,o({withSearch:!0,withSingleSort:!0,withSingleChip:!0,noInitialFilters:!0,fetchDebounce:da,reloadSubject:a,title:"Заявки",filterLabel:"Фильтры",heightRequest:py,rowActions:ap,actions:rp,filters:Tm,columns:c,handler:p,chips:op,AfterActionList:ly,AfterOperationList:Rm,onRowAction:m,onRowClick:y,onAction:f,selectionMode:ht.Multiple,payload:o(o({},n),{},{_rent:!0})},d)),u()]})},isActive:function(e){return Dl(["/bid_rent"],e)},isAvailable:function(){return!1}},{id:"sell",element:function(e){var n=e.payload,i=xm({payload:n}),a=Be(Fl.bidViewService.reloadSubject),s=pn({columns:ip,storageKey:"bid_columns"}),u=s.render,l=s.pickColumns,c=s.columns,d=sr(Fl.routerService.locationState,{fallback:Fl.errorService.handleGlobalError}).listProps,p=Bm(),m=function(){var e=r(t().mark((function e(n,r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Fl.layoutService.setAppbarLoader(!0),e.prev=1,"edit-action"===n&&Fl.routerService.push("/bid_edit/".concat(r.id)),"remove-action"!==n){e.next=7;break}return e.next=6,Fl.bidViewService.remove(r.id);case 6:a.next();case 7:if("copy-action"!==n){e.next=14;break}return e.next=10,Fl.bidViewService.read(r.id);case 10:return i=e.sent,e.next=13,Fl.bidViewService.create(i);case 13:a.next();case 14:if("toggle-archive"!==n){e.next=18;break}return e.next=17,Fl.bidViewService.toggleArchive(r.id);case 17:a.next();case 18:return e.prev=18,Fl.layoutService.setAppbarLoader(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[1,,18,21]])})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add-action"===r&&Fl.routerService.push("/bid/create"),"column-setup-action"===r&&l(),"excel-action"!==r){e.next=5;break}return e.next=5,np({query:d,payload:o(o({},n),{},{_sell:!0}),handler:p,columns:c});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.featureService.hasFeature("officemanager");case 2:if(!e.sent){e.next=5;break}return i(n),e.abrupt("return");case 5:Fl.routerService.push("/bid_view/".concat(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.permissionService.getPermissions();case 2:e.sent.hasBidViewPermission&&h(n.id);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Se(Ae,{children:[Se(Vn,o({withSearch:!0,withSingleSort:!0,withSingleChip:!0,noInitialFilters:!0,fetchDebounce:da,reloadSubject:a,title:"Заявки",filterLabel:"Фильтры",heightRequest:my,rowActions:ap,actions:rp,filters:Tm,columns:c,handler:p,chips:op,AfterActionList:ly,AfterOperationList:Rm,onRowAction:m,onRowClick:y,onAction:f,selectionMode:ht.Multiple,payload:o(o({},n),{},{_sell:!0})},d)),u()]})},isActive:function(e){return Dl(["/bid_sell"],e)},isAvailable:function(){return!1}},{id:"archive",element:function(e){var n=e.payload,i=xm({payload:n}),a=Be(Fl.bidViewService.reloadSubject),s=pn({columns:ip,storageKey:"bid_columns"}),u=s.render,l=s.pickColumns,c=s.columns,d=sr(Fl.routerService.locationState,{fallback:Fl.errorService.handleGlobalError}).listProps,p=Bm(),m=function(){var e=r(t().mark((function e(n,r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Fl.layoutService.setAppbarLoader(!0),e.prev=1,"edit-action"===n&&Fl.routerService.push("/bid_edit/".concat(r.id)),"remove-action"!==n){e.next=7;break}return e.next=6,Fl.bidViewService.remove(r.id);case 6:a.next();case 7:if("copy-action"!==n){e.next=14;break}return e.next=10,Fl.bidViewService.read(r.id);case 10:return i=e.sent,e.next=13,Fl.bidViewService.create(i);case 13:a.next();case 14:if("toggle-archive"!==n){e.next=18;break}return e.next=17,Fl.bidViewService.toggleArchive(r.id);case 17:a.next();case 18:return e.prev=18,Fl.layoutService.setAppbarLoader(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[1,,18,21]])})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add-action"===r&&Fl.routerService.push("/bid/create"),"column-setup-action"===r&&l(),"excel-action"!==r){e.next=5;break}return e.next=5,np({query:d,payload:o(o({},n),{},{_archive:!0}),handler:p,columns:c});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.featureService.hasFeature("officemanager");case 2:if(!e.sent){e.next=5;break}return i(n),e.abrupt("return");case 5:Fl.routerService.push("/bid_view/".concat(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.permissionService.getPermissions();case 2:e.sent.hasBidViewPermission&&h(n.id);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Se(Ae,{children:[Se(Vn,o({withSearch:!0,withSingleSort:!0,withSingleChip:!0,noInitialFilters:!0,fetchDebounce:da,reloadSubject:a,title:"Заявки",filterLabel:"Фильтры",heightRequest:cy,rowActions:ap,actions:rp,filters:Tm,columns:c,handler:p,chips:op,AfterActionList:ly,AfterOperationList:Qp,onRowAction:m,onRowClick:y,onAction:f,selectionMode:ht.Multiple,payload:o(o({},n),{},{_archive:!0})},d)),u()]})},isActive:function(e){return Dl(["/bid_archive"],e)},isAvailable:function(){return!1}}],hy=[{id:"contact",label:"Контакт",isActive:function(){return Dl(["/bid_edit/:id/contact"])}},{id:"parameter",label:"Параметры заявки",isActive:function(){return Dl(["/bid_edit/:id","/bid_edit/:id/parameter"])}},{id:"tasks",label:"Задачи",isDisabled:function(){return!0},isActive:function(){return Dl(["/bid_edit/:id/tasks"])}},{id:"service_comment",label:"Служебный комментарий",isDisabled:function(){return!0},isActive:function(){return Dl(["/bid_edit/:id/service_comment"])}},{id:"history",label:"История",isDisabled:function(){return!0},isActive:function(){return Dl(["/bid_edit/:id/history"])}},{id:"documents",label:"Документы",isActive:function(){return Dl(["/bid_edit/:id/documents"])}},{id:"commission_and_status",label:"Комиссия и статус",isDisabled:function(){return!0},isActive:function(){return Dl(["/bid_edit/:id/commission_and_status"])}}],yy=function(e,t){if(!t){var n=Il("id","create");"contact"===e&&Fl.routerService.replace("/bid_edit/".concat(n,"/contact")),"parameter"===e&&Fl.routerService.replace("/bid_edit/".concat(n,"/parameter")),"tasks"===e&&Fl.routerService.replace("/bid_edit/".concat(n,"/tasks")),"service_comment"===e&&Fl.routerService.replace("/bid_edit/".concat(n,"/service_comment")),"history"===e&&Fl.routerService.replace("/bid_edit/".concat(n,"/history")),"documents"===e&&Fl.routerService.replace("/bid_edit/".concat(n,"/documents")),"commission_and_status"===e&&Fl.routerService.replace("/bid_edit/".concat(n,"/commission_and_status"))}},vy=function(e){var t=e.payload,n=e.children,r=e.mode,i=void 0===r?H.Paper:r,a=we.useMemo((function(){return"tabs"===i?H.Tabs:H.Paper}),[i]);return Se(Ce,{withFixedPos:!0,payload:t,fixedPosHeaderAdjust:i===H.Paper?85:64,mode:a,options:hy,onActiveOptionChange:yy,children:n})},by=[{type:et.Link,isVisible:function(){return!!Fl.routerService.previousPath},action:"list-action",label:Se(Ge,{sx:{display:"block"}})},{type:et.Link,action:"list-action",label:"Заявки"},{type:et.Link,action:"list-action",isVisible:function(e){return"create"!==e.id},label:"Редактирование контакта"},{type:et.Link,action:"list-action",isVisible:function(e){return"create"===e.id},label:"Создание контакта"},{type:et.Button,isDisabled:function(e){return!e.hasChanged},action:"save-action",label:"Сохранить"}],_y=[{id:"contact",label:"Контакт",isActive:function(){return Dl(["/bid_view/:id/contact"])}},{id:"parameter",label:"Параметры заявки",isActive:function(){return Dl(["/bid_view/:id","/bid_view/:id/parameter"])}},{id:"tasks",label:"Задачи",isActive:function(){return Dl(["/bid_view/:id/tasks"])}},{id:"service_comment",isVisible:function(e){return e.permissions.hasMasterDetailPermission},label:"Служебный комментарий",isActive:function(){return Dl(["/bid_view/:id/service_comment"])}},{id:"history",label:"История",isActive:function(){return Dl(["/bid_view/:id/history"])}},{id:"documents",label:"Документы",isActive:function(){return Dl(["/bid_view/:id/documents"])}},{id:"commission_and_status",label:"Комиссия и статус",isDisabled:function(){return!0},isActive:function(){return Dl(["/bid_view/:id/commission_and_status"])}}],ky=function(e,t){if(!t){var n=Il("id","create");"contact"===e&&Fl.routerService.replace("/bid_view/".concat(n,"/contact")),"parameter"===e&&Fl.routerService.replace("/bid_view/".concat(n,"/parameter")),"tasks"===e&&Fl.routerService.replace("/bid_view/".concat(n,"/tasks")),"service_comment"===e&&Fl.routerService.replace("/bid_view/".concat(n,"/service_comment")),"history"===e&&Fl.routerService.replace("/bid_view/".concat(n,"/history")),"documents"===e&&Fl.routerService.replace("/bid_view/".concat(n,"/documents")),"commission_and_status"===e&&Fl.routerService.replace("/bid_view/".concat(n,"/commission_and_status"))}},gy=function(e){var t=e.children,n=e.payload,r=e.mode,i=void 0===r?H.Paper:r,a=we.useMemo((function(){return"tabs"===i?H.Tabs:H.Paper}),[i]);return Se(Ce,{payload:n,withFixedPos:!0,fixedPosHeaderAdjust:i===H.Paper?85:64,mode:a,options:_y,onActiveOptionChange:ky,children:t})},xy=[{type:et.Link,isVisible:function(){return!!Fl.routerService.previousPath},action:"list-action",label:Se(Ge,{sx:{display:"block"}})},{type:et.Link,action:"list-action",label:"Заявки"},{type:et.Link,action:"list-action",label:"Просмотр контакта"},{type:et.Button,isDisabled:function(e){return!e.payload.permissions.hasBidUpdatePermission},action:"edit-action",label:"Редактировать"}],wy=[{action:"show-contact-action",label:"Показать карточку контакта"}],Sy=function(){var e=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.bidViewService.read(n);case 2:return r=e.sent,i=r.contact_id,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),zy=[{type:a.Fragment,isVisible:function(e){return 0===e.activeStep},fields:[{type:a.Component,element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",mb:2,children:"Данные контакта"})}},{type:a.Text,outlined:!0,title:"Ф.И.О",isInvalid:function(e){return e.fio?null:"Обязательно к заполнению"},description:"Фамилия Имя Отчество контакта",name:"fio"},{type:a.Text,outlined:!0,title:"Телефон",isInvalid:function(e){return e.telefon?null:"Обязательно к заполнению"},description:"Телефон контакта",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon"},{type:a.Combo,outlined:!0,name:"tip_klienta",title:"Тип клиента",itemList:["Собственник","Доверенное лицо","Риелтор","Информатор","Застройщик"]}]},{type:a.Fragment,isVisible:function(e){return 2===e.activeStep},fields:[{type:a.Component,element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",mb:1,children:"Предпросмотр"})}},{type:a.Component,isVisible:function(e){return!e.contact_id},element:function(){return Se(Gn,{variant:"outlined",color:"warning",sx:{mb:2},children:"Создавая новую заявку, убедитесь, что нет дубликата контакта"})}},{type:a.Component,isVisible:function(e){return!!e.contact_id},element:function(){return Se(Gn,{variant:"outlined",color:"info",sx:{mb:2},children:"Убедитесь, что это контактные данные клиента"})}},{type:a.Text,isVisible:function(e){return!!e.contact_id},compute:(Th=r(t().mark((function e(n){var r,i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.contact_id,e.next=3,Fl.contactViewService.tryRead(r);case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={};case 6:return i=e.t0,a=i.fio,o=void 0===a?"":a,e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),function(e){return Th.apply(this,arguments)}),disabled:!0,outlined:!0,title:"Ф.И.О"},{type:a.Text,isVisible:function(e){return!!e.contact_id},compute:(Ah=r(t().mark((function e(n){var r,i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.contact_id,e.next=3,Fl.contactViewService.tryRead(r);case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={};case 6:return i=e.t0,a=i.telefon,o=void 0===a?"":a,e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),function(e){return Ah.apply(this,arguments)}),disabled:!0,outlined:!0,title:"Телефон",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000"},{type:a.Text,isVisible:function(e){return!!e.contact_id},fieldBottomMargin:"0",compute:(Vh=r(t().mark((function e(n){var r,i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.contact_id,e.next=3,Fl.contactViewService.tryRead(r);case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={};case 6:return i=e.t0,a=i.tip_klienta,o=void 0===a?null:a,e.abrupt("return",me(o)||"Не указано");case 10:case"end":return e.stop()}}),e)}))),function(e){return Vh.apply(this,arguments)}),disabled:!0,outlined:!0,name:"tip_klienta",title:"Тип клиента"},{type:a.Text,isVisible:function(e){return!e.contact_id},outlined:!0,title:"Ф.И.О",isInvalid:function(e){return e.fio?null:"Обязательно к заполнению"},description:"Фамилия Имя Отчество контакта",name:"fio"},{type:a.Text,isVisible:function(e){return!e.contact_id},outlined:!0,title:"Телефон",isInvalid:function(e){return e.telefon?null:"Обязательно к заполнению"},description:"Телефон контакта",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon"},{type:a.Combo,isVisible:function(e){return!e.contact_id},outlined:!0,name:"tip_klienta",title:"Тип клиента",itemList:["Собственник","Доверенное лицо","Риелтор","Информатор","Застройщик"]}]}],Vy=[{type:et.Link,action:"list-action",label:"Список заявок"},{type:et.Link,action:"list-action",label:"Создание заявки"}],Ay=$l()((function(e){return{root:{position:"relative",overflow:"hidden"},header:{position:"absolute",top:0,left:0,height:65,paddingLeft:e.spacing(2),paddingRight:e.spacing(2),background:"whitesmoke",width:"100%"},content:{minHeight:300},adjust:{paddingBottom:65},listItemBackground:{background:je(e.palette.primary.main,.05)}}})),Ty=Me.createLoader(12),Cy=[{type:et.Link,isVisible:function(){return!!Fl.routerService.previousPath},action:"list-action",label:Se(Ge,{sx:{display:"block"}})},{type:et.Link,action:"list-action",label:"Заявки"},{type:et.Link,action:"list-action",isVisible:function(e){return"create"!==e.id},label:"Редактирование документа"},{type:et.Link,action:"list-action",isVisible:function(e){return"create"===e.id},label:"Создание документа"},{type:et.Button,isDisabled:function(e){return!e.hasChanged},action:"save-action",label:"Сохранить"}],Fy=[{type:et.Link,isVisible:function(){return!!Fl.routerService.previousPath},action:"list-action",label:Se(Ge,{sx:{display:"block"}})},{type:et.Link,action:"list-action",label:"Заявки"},{type:et.Link,action:"list-action",label:"Просмотр документа"},{type:et.Button,isDisabled:function(e){return!e.payload.permissions.hasBidUpdatePermission},action:"edit-action",label:"Редактировать"}],Ly="real-estate__headerRoot",Iy=[{type:et.Link,isVisible:function(){return!!Fl.routerService.previousPath},action:"list-action",label:Se(Ge,{sx:{display:"block"}})},{type:et.Link,action:"list-action",label:"Заявки"},{type:et.Link,action:"list-action",label:"Просмотр истории"}],My=e("c",[{type:a.Complete,fieldRightMargin:"0",outlined:!1,name:"strana",title:"Страна",tip:(Fh=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["Узбекистан"]);case 1:case"end":return e.stop()}}),e)}))),function(){return Fh.apply(this,arguments)})},{type:a.Complete,fieldRightMargin:"0",outlined:!1,name:"gorod",title:"Город",tip:["Ташкент"]},{type:a.Complete,fieldRightMargin:"0",outlined:!1,name:"oblast",title:"Область",tip:(Ch=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["Ташкентская область"]);case 1:case"end":return e.stop()}}),e)}))),function(){return Ch.apply(this,arguments)})},{type:a.Complete,fieldRightMargin:"0",outlined:!1,name:"rajon",title:"Район",tip:["Алмазарский район","Бектемирский район","Мирабадский район","Мирзо-Улугбекский район","Сергелийский район","Учтепинский район","Чиланзарский район","Шайхантахурский район","Юнусабадский район","Яккасарайский район","Янгихаётский район","Яшнабадский район"]},{type:a.Complete,fieldRightMargin:"0",tip:Fl.dictService.getMahallya,outlined:!1,name:"mahallya",title:"Махалля"},{type:a.Complete,fieldRightMargin:"0",tip:Fl.dictService.getUlicza,outlined:!1,name:"ulicza",title:"Улица"},{type:a.Complete,tip:Fl.dictService.getOrientir,fieldRightMargin:"0",outlined:!1,name:"orientir",title:"Ориентир"},{type:a.Combo,fieldRightMargin:"0",freeSolo:!0,outlined:!1,name:"metro",title:"Метро",itemList:["А. Ходжаев","Абдулла Кодирий","Алишер Навоий","Амир Темур хиёбони","Беруний","Бобур","Бодомзор","Буюк Ипак йули","Гофур Гулом","Дружба народов","Дустлик","Жанубий","Космонавтлар","Машинасозлар","Миллий бог","Мингурик","Минор","Мирзо Улугбек","Мустакиллик майдони","Новза","Ойбек","Олмазор","Отчопар","Пахтакор","Пушкинская","Сергели","Тинчлик","Тошкент","Тукимачи","Туркистон","Турсунзода","Узбекистон","Усмон Носыр","Файзулла Ходжаев","Хамид Олимжон","Чилонзор","Чорсу","Чош-тепа","Шахристан","Эхтиром","Юнус Ражабий","Юнусабад"]},{type:a.Fragment,isVisible:function(e){var t=!1;return t=t||Xe(e.podkategoriya_obekta,"Квартиры")},fields:[{type:a.Text,columns:"6",outlined:!1,name:"nomer_doma",title:"№ дома"},{type:a.Text,fieldRightMargin:"0",columns:"6",outlined:!1,name:"nomer_kvartiry",title:"№ квартиры"}]},{type:a.Fragment,isVisible:function(e){var t=!1;return t=(t=(t=t||null!==e.kategoriya_obekta)||null!==e.podkategoriya_obekta)&&!Xe(e.podkategoriya_obekta,"Квартиры")},fields:[{type:a.Text,fieldRightMargin:"0",outlined:!1,name:"nomer_doma",title:"№ дома"}]},{type:a.Component,element:Wf}]);window.address_fields=My;var jy=e("d",[{type:a.Items,labelShrink:!0,placeholder:"Выберите несколько",freeSolo:!0,outlined:!1,name:"metro_list",title:"Метро",itemList:["А. Ходжаев","Абдулла Кодирий","Алишер Навоий","Амир Темур хиёбони","Беруний","Бобур","Бодомзор","Буюк Ипак йули","Гофур Гулом","Дружба народов","Дустлик","Жанубий","Космонавтлар","Машинасозлар","Миллий бог","Мингурик","Минор","Мирзо Улугбек","Мустакиллик майдони","Новза","Ойбек","Олмазор","Отчопар","Пахтакор","Пушкинская","Сергели","Тинчлик","Тошкент","Тукимачи","Туркистон","Турсунзода","Узбекистон","Усмон Носыр","Файзулла Ходжаев","Хамид Олимжон","Чилонзор","Чорсу","Чош-тепа","Шахристан","Эхтиром","Юнус Ражабий","Юнусабад"]},{type:a.Items,labelShrink:!0,freeSolo:!0,placeholder:"Выберите несколько",fieldRightMargin:"0",outlined:!1,name:"rajon_list",title:"Район",itemList:["Алмазарский район","Бектемирский район","Мирабадский район","Мирзо-Улугбекский район","Сергелийский район","Учтепинский район","Чиланзарский район","Шайхантахурский район","Юнусабадский район","Яккасарайский район","Янгихаётский район","Яшнабадский район"]},{type:a.Items,labelShrink:!0,freeSolo:!0,placeholder:"Выберите несколько",fieldRightMargin:"0",itemList:Fl.dictService.getMahallya,outlined:!1,name:"mahallya_list",title:"Махалля"}]);window.area_fields=jy;var By=54,Dy=$l()((function(e){return{root:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",overflow:"hidden",height:775},container:{overflow:"hidden",padding:e.spacing(1),flex:1},appBarRoot:{background:e.palette.primary.main,maxHeight:By,height:By,boxShadow:"unset",color:"#000"},tabsRoot:{minHeight:By,height:By,marginLeft:"0 !important",marginRight:"0 !important"},tabRoot:{minHeight:By,height:By,color:"#fff"},tabRootTransparent:{minHeight:By,height:By},tabSelected:{color:"#fff !important"},indicator:{height:6,background:"#0288d1"},indicatorTransparent:{height:6,background:e.palette.primary.main}}})),Ry={},qy=e("B",(function(e){var t=e.sx,n=e.withTransparentHeader,r=void 0!==n&&n,a=e.readonly,s=void 0!==a&&a,u=e._fieldData,l=void 0===u?Ry:u,c=e.onChange,d=Dy().classes,p=i(we.useState("area"),2),m=p[0],f=p[1],h=Mn(),y=h.reloadTrigger,v=h.doReload,b=at(l);return we.useEffect((function(){return b.subscribe((function(){s&&v()}))}),[s]),Se(fn,{className:d.root,sx:o(o({},t),{},{height:"100%"}),children:Se(qn,{value:m,children:[r&&Se(qe,{sx:{borderBottom:1,borderColor:"divider",pointerEvents:"all"},children:Se(Pn,{variant:"fullWidth",classes:{root:d.tabsRoot,indicator:d.indicatorTransparent},onChange:function(e,t){return f(t)},children:[Se(En,{classes:{root:d.tabRootTransparent},label:"Территория",value:"area"}),Se(En,{classes:{root:d.tabRootTransparent},label:"Адрес",value:"address"})]})}),!r&&Se(Nn,{classes:{root:d.appBarRoot},position:"static",sx:{borderBottom:1,borderColor:"divider",pointerEvents:"all"},children:Se(Pn,{variant:"fullWidth",classes:{root:d.tabsRoot,indicator:d.indicator},onChange:function(e,t){return f(t)},children:[Se(En,{classes:{root:d.tabRoot,selected:d.tabSelected},label:"Территория",value:"area"}),Se(En,{classes:{root:d.tabRoot,selected:d.tabSelected},label:"Адрес",value:"address"})]})}),Se(On,{className:d.container,value:"address",children:Se(st,{readonly:s,sx:{marginRight:-8},payload:function(){return{readonly:s}},handler:l,fields:My,onChange:c},y)}),Se(On,{className:d.container,value:"area",children:Se(st,{readonly:s,payload:function(){return{readonly:s}},handler:l,fields:jy,onChange:c},y)})]})})})),Py=[{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany")},isVisible:function(e){var t=!0;return t=(t=(t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая"))&&!Xe(e.podkategoriya_obekta,"Квартиры"))&&!Xe(e.podkategoriya_obekta,"Дома"))&&!Xe(e.podkategoriya_obekta,"Земля/Участок")},fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая недвижимость)"})}},Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostinnoj")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_spalni")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_holla")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_kuhni")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_sanuzla")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_balkona")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_terrasy")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_komnaty_ohrany")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"})]}]},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany")},isVisible:function(e){return!Xe(e.kategoriya_obekta,"Коммерческая")&&Xe(e.podkategoriya_obekta,"Земля/Участок")},fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Земля/Участок)"})}},Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostinnoj")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_spalni")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_holla")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_kuhni")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_sanuzla")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_balkona")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_terrasy")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_komnaty_ohrany")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"})]}]},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona")},isVisible:function(e){var t=!0;return t=(t=t&&!Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Квартиры")},fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Квартиры)"})}},Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostinnoj")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_spalni")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_holla")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_kuhni")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_sanuzla")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_balkona")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"})]}]},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany","ploshhad_gostevogo_doma","ploshhad_dopolnitelnoj_pristrojki")},isVisible:function(e){var t=!0;return t=(t=t&&!Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Дома")},fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Дома)"})}},Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostinnoj")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_spalni")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_holla")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_kuhni")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_sanuzla")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_balkona")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_terrasy")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_komnaty_ohrany")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostevogo_doma")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostevogo_doma",title:"Площадь гостевого дома М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_dopolnitelnoj_pristrojki")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_dopolnitelnoj_pristrojki",title:"Площадь дополнительной пристройки М²"})]}]},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona")},isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Квартиры")},fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая + Жилая квартира)"})}},Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostinnoj")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_spalni")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_holla")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_kuhni")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_sanuzla")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_balkona")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"})]}]},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany","ploshhad_gostevogo_doma","ploshhad_dopolnitelnoj_pristrojki")},isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Дома")},fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческий + Жилой дом)"})}},Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostinnoj")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_spalni")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_holla")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_kuhni")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_sanuzla")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_balkona")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_terrasy")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_komnaty_ohrany")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostevogo_doma")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostevogo_doma",title:"Площадь гостевого дома М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_dopolnitelnoj_pristrojki")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_dopolnitelnoj_pristrojki",title:"Площадь дополнительной пристройки М²"})]}]},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany")},isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Земля/Участок")},fields:[{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая + Жилая земля/участок)"})}},Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_gostinnoj")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_spalni")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_holla")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_kuhni")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_sanuzla")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_balkona")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_terrasy")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_komnaty_ohrany")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"})]}]}],Ey=[{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"vnutri_est","ryadom_est")},isVisible:function(e){var t=!0;return t=(t=(t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая"))&&!Xe(e.podkategoriya_obekta,"Квартиры"))&&!Xe(e.podkategoriya_obekta,"Дома"))&&!Xe(e.podkategoriya_obekta,"Земля/Участок")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Group,fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая недвижимость)"})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vnutri_est")},columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Телевизор","Кондиционер","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("ryadom_est")},columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Охрана","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"vnutri_est","ryadom_est")},isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Квартиры")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Group,fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая + Жилая квартира)"})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vnutri_est")},columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Холодильник","Телевизор","Кондиционер","Стиральная машина","Мусоропровод","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг","Пожарная сигнализация","Видеонаблюдение","Сигнализация"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("ryadom_est")},columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Охрана","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"vnutri_est","ryadom_est")},isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Дома")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Group,fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческий + Жилой дом)"})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vnutri_est")},columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Телевизор","Кондиционер","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг","Полисадник"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("ryadom_est")},columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Охрана","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"vnutri_est","ryadom_est")},isVisible:function(e){var t=!0;return t=(t=t&&Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Земля/Участок")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Group,fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая + Жилая земля/участок)"})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vnutri_est")},columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Забор","Катлаван","Пожарная сигнализация","Видеонаблюдение","Сигнализация"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("ryadom_est")},columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Охрана","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}}],Ny=[{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"kolichestvo_komnat","sostoyanie_obekta","sostoyanie_remonta","poleznaya_ploshhad","etazh","tip_stroeniya","mashina_mesto","kolichestvo_sotok","etazhnost","balkon","parkovka","vysota_potolkov","obshhaya_ploshhad","sanuzel","mebel","voda","gaz","lift_kommercziya","sistema_otopleniya","elektrichestvo","kanalizacziya","rasstoyanie_do_metro","mestopolozhenie_obekta","god_postrojki","sistema_kondiczionirovaniya","vid_liczenzii","naznachenie_obekta")},isVisible:function(e){return(!Xe(e.podkategoriya_obekta,"Земля/Участок")||!Xe(e.kategoriya_obekta,"Коммерческая"))&&((!Xe(e.podkategoriya_obekta,"Дома")||!Xe(e.kategoriya_obekta,"Коммерческая"))&&((!Xe(e.podkategoriya_obekta,"Квартиры")||!Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.kategoriya_obekta,"Коммерческая")))},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая недвижимость)"})}},Pd({hidden:function(e){return!e.fieldVisibility.has("kolichestvo_komnat")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sostoyanie_obekta")},sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_obekta",title:"Состояние объекта",itemList:["Новой постройки","Недостроенный","Под снос","Коробка","Пустая земля/участок"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sostoyanie_remonta")},sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},Pd({hidden:function(e){return!e.fieldVisibility.has("poleznaya_ploshhad")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("etazh")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("tip_stroeniya")},sx:{mt:2},columns:"3",outlined:!1,name:"tip_stroeniya",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},Pd({hidden:function(e){return!e.fieldVisibility.has("mashina_mesto")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),Pd({hidden:function(e){return!e.fieldVisibility.has("kolichestvo_sotok")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"}),Pd({hidden:function(e){return!e.fieldVisibility.has("etazhnost")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("balkon")},sx:{mt:2},columns:"3",outlined:!1,name:"balkon",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("parkovka")},sx:{mt:2},columns:"3",outlined:!1,name:"parkovka",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},Pd({hidden:function(e){return!e.fieldVisibility.has("vysota_potolkov")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"}),Pd({hidden:function(e){return!e.fieldVisibility.has("obshhaya_ploshhad")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sanuzel")},sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("mebel")},sx:{mt:2},columns:"3",outlined:!1,name:"mebel",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("voda")},columns:"3",outlined:!1,name:"voda",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("gaz")},columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("lift_kommercziya")},columns:"3",outlined:!1,name:"lift_kommercziya",title:"Лифт",itemList:["Есть","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema_otopleniya")},columns:"3",outlined:!1,name:"sistema_otopleniya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("elektrichestvo")},columns:"3",outlined:!1,name:"elektrichestvo",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("kanalizacziya")},columns:"3",outlined:!1,name:"kanalizacziya",title:"Канализация",itemList:["Да","Нет"]},Pd({hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_metro")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("mestopolozhenie_obekta")},sx:{mt:2},columns:"3",outlined:!1,name:"mestopolozhenie_obekta",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},Pd({hidden:function(e){return!e.fieldVisibility.has("god_postrojki")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema_kondiczionirovaniya")},columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vid_liczenzii")},columns:"3",outlined:!1,name:"vid_liczenzii",title:"Вид лицензии",itemList:["Коммерческая","Жилая"]},{type:a.Component,hidden:function(e){return!e.fieldVisibility.has("naznachenie_obekta")},sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:function(e){return Se(Ze,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:function(t){return e.onChange(c({},"naznachenie_obekta",t))}})}}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"kolichestvo_komnat","sostoyanie_remonta-kvartiry","nazvanie_zhk","tip-stroeniya_kvartiry","etazh","balkon_kvartira","tip_planirovki","lift_kvartira","etazhnost","sanuzel_kvartira","zhilaya_ploshhad","mebel_kvartira","obshhaya_ploshhad","vysota_potolkov","kolichestvo_spalen","sistema-otopleniya_kvartiry","spalnya_sanuzel","gaz","rasstoyanie_do_metro","vid_iz_okna","parkovka_kvartira","god_postrojki")},isVisible:function(e){if(Xe(e.podkategoriya_obekta,"Квартиры")&&Xe(e.kategoriya_obekta,"Коммерческая"))return!1;var t=!1;return t=t||Xe(e.podkategoriya_obekta,"Квартиры")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Квартиры)"})}},Pd({hidden:function(e){return!e.fieldVisibility.has("kolichestvo_komnat")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sostoyanie_remonta-kvartiry")},sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_remonta-kvartiry",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:a.Complete,hidden:function(e){return!e.fieldVisibility.has("nazvanie_zhk")},columns:"3",outlined:!1,name:"nazvanie_zhk",title:"Название ЖК",tip:['ЖК "Greenwich"','ЖК "OzMahal"','ЖК "Elysium"','ЖК "Binkat"','ЖК "Brooklyn"','ЖК "Assalom Havo"','ЖК "Istanbul City"']},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("tip-stroeniya_kvartiry")},sx:{mt:2},columns:"3",outlined:!1,name:"tip-stroeniya_kvartiry",title:"Тип строения",itemList:["Кирпичный","Монолитный","Блочный","Панельный","Деревянный","Газоблочный","Бетонно-керамзитный"]},Pd({hidden:function(e){return!e.fieldVisibility.has("etazh")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("balkon_kvartira")},sx:{mt:2},columns:"3",outlined:!1,name:"balkon_kvartira",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("tip_planirovki")},sx:{mt:2},columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Малосемейная","Общежитие","Пентхаус","Дуплекс","Комната"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("lift_kvartira")},sx:{mt:2},columns:"3",outlined:!1,name:"lift_kvartira",title:"Лифт",itemList:["Пассажирский","Грузовой","Нет"]},Pd({hidden:function(e){return!e.fieldVisibility.has("etazhnost")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sanuzel_kvartira")},sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel_kvartira",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более"]},Pd({hidden:function(e){return!e.fieldVisibility.has("zhilaya_ploshhad")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"zhilaya_ploshhad",title:"Жилая площадь М²"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("mebel_kvartira")},sx:{mt:2},columns:"3",outlined:!1,name:"mebel_kvartira",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},Pd({hidden:function(e){return!e.fieldVisibility.has("obshhaya_ploshhad")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("vysota_potolkov")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"}),Pd({hidden:function(e){return!e.fieldVisibility.has("kolichestvo_spalen")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema-otopleniya_kvartiry")},sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_kvartiry",title:"Система отопления",itemList:["Центральное","2х контурный котел","Теплый пол"]},Pd({hidden:function(e){return!e.fieldVisibility.has("spalnya_sanuzel")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("gaz")},sx:{mt:2},columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},Pd({hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_metro")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vid_iz_okna")},sx:{mt:2},columns:"3",outlined:!1,name:"vid_iz_okna",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("parkovka_kvartira")},sx:{mt:2},columns:"3",outlined:!1,name:"parkovka_kvartira",title:"Парковка",itemList:["Наземная","Собственная","Подземная","В аренду","Нет"]},Pd({hidden:function(e){return!e.fieldVisibility.has("god_postrojki")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"})]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"kolichestvo_komnat","sostoyanie_doma","god_postrojki","tip-stroeniya_doma","etazhnost","balkon_doma","tip_planirovki","bassejn","ploshhad_doma","sanuzel_doma","mashina_mesto","kolichestvo_spalen","kolichestvo_sotok","voda_dom","lift_dom","spalnya_sanuzel","sistema-otopleniya_dom","mebel_dom","rasstoyanie_do_metro","gaz_dom","sistema-kondiczionirovaniya_dom","vysota_potolkov","elektrichestvo_dom","vid_iz_okna_dom","garazh","kanalizacziya_dom","raspolozhenie_doma","mestopolozhenie-obekta_dom")},isVisible:function(e){if(Xe(e.podkategoriya_obekta,"Дома")&&Xe(e.kategoriya_obekta,"Коммерческая"))return!1;var t=!1;return t=t||Xe(e.podkategoriya_obekta,"Дома")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Дома)"})}},Pd({hidden:function(e){return!e.fieldVisibility.has("kolichestvo_komnat")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sostoyanie_doma")},sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_doma",title:"Состояние дома",itemList:["Новой постройки","Недостроенный","Под снос","Коробка"]},Pd({hidden:function(e){return!e.fieldVisibility.has("god_postrojki")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("tip-stroeniya_doma")},sx:{mt:2},columns:"3",outlined:!1,name:"tip-stroeniya_doma",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},Pd({hidden:function(e){return!e.fieldVisibility.has("etazhnost")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("balkon_doma")},sx:{mt:2},columns:"3",outlined:!1,name:"balkon_doma",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("tip_planirovki")},sx:{mt:2},columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Смешанный"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("bassejn")},sx:{mt:2},columns:"3",outlined:!1,name:"bassejn",title:"Бассейн",itemList:["Летний","Зимний","Сауна","Нет"]},Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_doma")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_doma",title:"Площадь дома М²"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sanuzel_doma")},sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel_doma",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},Pd({hidden:function(e){return!e.fieldVisibility.has("mashina_mesto")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),Pd({hidden:function(e){return!e.fieldVisibility.has("kolichestvo_spalen")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"}),Pd({hidden:function(e){return!e.fieldVisibility.has("kolichestvo_sotok")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("voda_dom")},sx:{mt:2},columns:"3",outlined:!1,name:"voda_dom",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("lift_dom")},sx:{mt:2},columns:"3",outlined:!1,name:"lift_dom",title:"Лифт",itemList:["Есть","Нет"]},Pd({hidden:function(e){return!e.fieldVisibility.has("spalnya_sanuzel")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema-otopleniya_dom")},sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_dom",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("mebel_dom")},sx:{mt:2},columns:"3",outlined:!1,name:"mebel_dom",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},Pd({hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_metro")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("gaz_dom")},sx:{mt:2},columns:"3",outlined:!1,name:"gaz_dom",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema-kondiczionirovaniya_dom")},sx:{mt:2},columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_dom",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},Pd({hidden:function(e){return!e.fieldVisibility.has("vysota_potolkov")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"}),{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("elektrichestvo_dom")},sx:{mt:2},columns:"3",outlined:!1,name:"elektrichestvo_dom",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vid_iz_okna_dom")},sx:{mt:2},columns:"3",outlined:!1,name:"vid_iz_okna_dom",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("garazh")},columns:"3",outlined:!1,name:"garazh",title:"Гараж",itemList:["Подземный","Закрытый","Под навесом","Уличный"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("kanalizacziya_dom")},columns:"3",outlined:!1,name:"kanalizacziya_dom",title:"Канализация",itemList:["Да","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("raspolozhenie_doma")},columns:"3",outlined:!1,name:"raspolozhenie_doma",title:"Расположение дома",itemList:["По середине","В начале двора","В конце двора"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("mestopolozhenie-obekta_dom")},outlined:!1,columns:"3",name:"mestopolozhenie-obekta_dom",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"kolichestvo_komnat","naznachenie-obekta-zemlya_uchastok","tip_zemli_uchastka","poleznaya_ploshhad","etazh","sostoyanie-obekta_zemlya","mashina_mesto","kolichestvo_sotok","etazhnost","sostoyanie-remonta_zemlya","parkovka_zemlya","rasstoyanie_do_metro","obshhaya_ploshhad","voda_zemlya","mestopolozhenie-obekta_zemlya","rasstoyanie_do_goroda","sistema-otopleniya_zemlya","podezdnye_puti","sistema-kondiczionirovaniya_zemlya","god_postrojki","elektrichestvo_zemlya","gaz_zemlya","kanalizacziya_zemlya")},isVisible:function(e){return!Xe(e.kategoriya_obekta,"Коммерческая")&&Xe(e.podkategoriya_obekta,"Земля/Участок")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Земля/Участок)"})}},Pd({hidden:function(e){return!e.fieldVisibility.has("kolichestvo_komnat")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:a.Component,hidden:function(e){return!e.fieldVisibility.has("naznachenie-obekta-zemlya_uchastok")},sx:{mb:2,pr:1},columns:"3",name:"naznachenie-obekta-zemlya_uchastok",element:function(e){return Se(Ze,{variant:"standard",label:"Назначение объекта",items:[{label:"Сельхоз использование",value:"Сельхоз использование"},{label:"ИЖС",value:"ИЖС"},{label:"Высотная застройка",value:"Высотная застройка"},{label:"Промышленное назначение",value:"Промышленное назначение"},{label:"ТЦ",value:"ТЦ"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Склады",value:"Склады"},{label:"Инвестпроект",value:"Инвестпроект"},{label:"Строительство образовательных учреждений",value:"Строительство образовательных учреждений"},{label:"АЗС",value:"АЗС"},{label:"Мойка",value:"Мойка"}],value:e["naznachenie-obekta_zemlya"],onChange:function(t){return e.onChange(c({},"naznachenie-obekta_zemlya",t))}})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("tip_zemli_uchastka")},sx:{mt:2},columns:"3",outlined:!1,name:"tip_zemli_uchastka",title:"Тип земли/участка",itemList:["Делимый","Неделимый"]},Pd({hidden:function(e){return!e.fieldVisibility.has("poleznaya_ploshhad")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("etazh")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sostoyanie-obekta_zemlya")},sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie-obekta_zemlya",title:"Состояние объекта",itemList:["Пустая земля/участок","Недостроенная","Под снос"]},Pd({hidden:function(e){return!e.fieldVisibility.has("mashina_mesto")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),Pd({hidden:function(e){return!e.fieldVisibility.has("kolichestvo_sotok")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"}),Pd({hidden:function(e){return!e.fieldVisibility.has("etazhnost")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sostoyanie-remonta_zemlya")},sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie-remonta_zemlya",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("parkovka_zemlya")},sx:{mt:2},columns:"3",outlined:!1,name:"parkovka_zemlya",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},Pd({hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_metro")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),Pd({hidden:function(e){return!e.fieldVisibility.has("obshhaya_ploshhad")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("voda_zemlya")},sx:{mt:2},columns:"3",outlined:!1,name:"voda_zemlya",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("mestopolozhenie-obekta_zemlya")},sx:{mt:2},columns:"3",outlined:!1,name:"mestopolozhenie-obekta_zemlya",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},Pd({hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_goroda")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_goroda",title:"Расстояние до города (м)"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema-otopleniya_zemlya")},sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_zemlya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("podezdnye_puti")},columns:"3",outlined:!1,name:"podezdnye_puti",title:"Подъездные пути",itemList:["Асфальтированная дорога","Грунтовая дорога","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema-kondiczionirovaniya_zemlya")},columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_zemlya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},Pd({hidden:function(e){return!e.fieldVisibility.has("god_postrojki")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("elektrichestvo_zemlya")},sx:{mt:2},columns:"3",outlined:!1,name:"elektrichestvo_zemlya",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("gaz_zemlya")},columns:"3",outlined:!1,name:"gaz_zemlya",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("kanalizacziya_zemlya")},columns:"3",outlined:!1,name:"kanalizacziya_zemlya",title:"Канализация",itemList:["Да","Нет"]}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"kolichestvo_komnat","sostoyanie_remonta-kvartiry","naznachenie_obekta","raspolozhenie_obekta","etazh","balkon_kvartira","tip_planirovki","lift_kvartira","etazhnost","god_postrojki","nazvanie_zhk","mashina_mesto","obshhaya_ploshhad","sanuzel_kvartira","parkovka_kvartira","zhilaya_ploshhad","mebel_kvartira","vysota_potolkov","kolichestvo_spalen","sistema-otopleniya_kvartiry","vid_iz_okna","spalnya_sanuzel","gaz","rasstoyanie_do_metro","sistema_kondiczionirovaniya","tip-stroeniya_kvartiry")},isVisible:function(e){return!(!Xe(e.kategoriya_obekta,"Коммерческая")||!Xe(e.podkategoriya_obekta,"Квартиры"))},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая + Жилая квартира)"})}},Pd({hidden:function(e){return!e.fieldVisibility.has("kolichestvo_komnat")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sostoyanie_remonta-kvartiry")},sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_remonta-kvartiry",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:a.Component,hidden:function(e){return!e.fieldVisibility.has("naznachenie_obekta")},sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:function(e){return Se(Ze,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:function(t){return e.onChange(c({},"naznachenie_obekta",t))}})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("raspolozhenie_obekta")},columns:"3",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},Pd({hidden:function(e){return!e.fieldVisibility.has("etazh")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("balkon_kvartira")},sx:{mt:2},columns:"3",outlined:!1,name:"balkon_kvartira",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("tip_planirovki")},sx:{mt:2},columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Малосемейная","Общежитие","Пентхаус","Дуплекс","Комната"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("lift_kvartira")},sx:{mt:2},columns:"3",outlined:!1,name:"lift_kvartira",title:"Лифт",itemList:["Пассажирский","Грузовой","Нет"]},Pd({hidden:function(e){return!e.fieldVisibility.has("etazhnost")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),Pd({hidden:function(e){return!e.fieldVisibility.has("god_postrojki")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),{type:a.Complete,hidden:function(e){return!e.fieldVisibility.has("nazvanie_zhk")},columns:"3",outlined:!1,name:"nazvanie_zhk",title:"Название ЖК",tip:['ЖК "Greenwich"','ЖК "OzMahal"','ЖК "Elysium"','ЖК "Binkat"','ЖК "Brooklyn"','ЖК "Assalom Havo"','ЖК "Istanbul City"']},Pd({hidden:function(e){return!e.fieldVisibility.has("mashina_mesto")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),Pd({hidden:function(e){return!e.fieldVisibility.has("obshhaya_ploshhad")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sanuzel_kvartira")},sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel_kvartira",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("parkovka_kvartira")},sx:{mt:2},columns:"3",outlined:!1,name:"parkovka_kvartira",title:"Парковка",itemList:["Наземная","Собственная","Подземная","В аренду","Нет"]},Pd({hidden:function(e){return!e.fieldVisibility.has("zhilaya_ploshhad")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"zhilaya_ploshhad",title:"Жилая площадь М²"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("mebel_kvartira")},sx:{mt:2},columns:"3",outlined:!1,name:"mebel_kvartira",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},Pd({hidden:function(e){return!e.fieldVisibility.has("vysota_potolkov")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"}),Pd({hidden:function(e){return!e.fieldVisibility.has("kolichestvo_spalen")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema-otopleniya_kvartiry")},sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_kvartiry",title:"Система отопления",itemList:["Центральное","2х контурный котел","Теплый пол"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vid_iz_okna")},sx:{mt:2},columns:"3",outlined:!1,name:"vid_iz_okna",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},Pd({hidden:function(e){return!e.fieldVisibility.has("spalnya_sanuzel")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("gaz")},sx:{mt:2},columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},Pd({hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_metro")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema_kondiczionirovaniya")},columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("tip-stroeniya_kvartiry")},sx:{mt:2},columns:"3",outlined:!1,name:"tip-stroeniya_kvartiry",title:"Тип строения",itemList:["Кирпичный","Монолитный","Блочный","Панельный","Деревянный","Газоблочный","Бетонно-керамзитный"]}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"kolichestvo_komnat","sostoyanie_doma","mestopolozhenie-obekta_dom","naznachenie_obekta","etazhnost","sostoyanie_remonta","raspolozhenie_obekta","tip-stroeniya_doma","ploshhad_doma","raspolozhenie_doma","tip_planirovki","bassejn","kolichestvo_sotok","sanuzel_doma","mashina_mesto","kolichestvo_spalen","voda_dom","lift_dom","spalnya_sanuzel","sistema-otopleniya_dom","mebel_dom","rasstoyanie_do_metro","gaz_dom","god_postrojki","vysota_potolkov","elektrichestvo_dom","vid_iz_okna_dom","garazh","kanalizacziya_dom","balkon_doma","sistema-kondiczionirovaniya_dom")},isVisible:function(e){return!(!Xe(e.kategoriya_obekta,"Коммерческая")||!Xe(e.podkategoriya_obekta,"Дома"))},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческий + Жилой дом)"})}},Pd({hidden:function(e){return!e.fieldVisibility.has("kolichestvo_komnat")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sostoyanie_doma")},sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_doma",title:"Состояние дома",itemList:["Новой постройки","Недостроенный","Под снос","Коробка"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("mestopolozhenie-obekta_dom")},sx:{mt:2},columns:"3",outlined:!1,name:"mestopolozhenie-obekta_dom",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:a.Component,hidden:function(e){return!e.fieldVisibility.has("naznachenie_obekta")},sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:function(e){return Se(Ze,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:function(t){return e.onChange(c({},"naznachenie_obekta",t))}})}},Pd({hidden:function(e){return!e.fieldVisibility.has("etazhnost")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sostoyanie_remonta")},sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("raspolozhenie_obekta")},columns:"3",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("tip-stroeniya_doma")},sx:{mt:2},columns:"3",outlined:!1,name:"tip-stroeniya_doma",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},Pd({hidden:function(e){return!e.fieldVisibility.has("ploshhad_doma")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_doma",title:"Площадь дома М²"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("raspolozhenie_doma")},sx:{mt:2},columns:"3",outlined:!1,name:"raspolozhenie_doma",title:"Расположение дома",itemList:["По середине","В начале двора","В конце двора"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("tip_planirovki")},sx:{mt:2},columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Смешанный"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("bassejn")},sx:{mt:2},columns:"3",outlined:!1,name:"bassejn",title:"Бассейн",itemList:["Летний","Зимний","Сауна","Нет"]},Pd({hidden:function(e){return!e.fieldVisibility.has("kolichestvo_sotok")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sanuzel_doma")},sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel_doma",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},Pd({hidden:function(e){return!e.fieldVisibility.has("mashina_mesto")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),Pd({hidden:function(e){return!e.fieldVisibility.has("kolichestvo_spalen")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("voda_dom")},sx:{mt:2},columns:"3",outlined:!1,name:"voda_dom",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("lift_dom")},sx:{mt:2},columns:"3",outlined:!1,name:"lift_dom",title:"Лифт",itemList:["Есть","Нет"]},Pd({hidden:function(e){return!e.fieldVisibility.has("spalnya_sanuzel")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema-otopleniya_dom")},sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_dom",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("mebel_dom")},sx:{mt:2},columns:"3",outlined:!1,name:"mebel_dom",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},Pd({hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_metro")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("gaz_dom")},sx:{mt:2},columns:"3",outlined:!1,name:"gaz_dom",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},Pd({hidden:function(e){return!e.fieldVisibility.has("god_postrojki")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),Pd({hidden:function(e){return!e.fieldVisibility.has("vysota_potolkov")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"}),{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("elektrichestvo_dom")},sx:{mt:2},columns:"3",outlined:!1,name:"elektrichestvo_dom",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vid_iz_okna_dom")},sx:{mt:2},columns:"3",outlined:!1,name:"vid_iz_okna_dom",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("garazh")},columns:"3",outlined:!1,name:"garazh",title:"Гараж",itemList:["Подземный","Закрытый","Под навесом","Уличный"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("kanalizacziya_dom")},columns:"3",outlined:!1,name:"kanalizacziya_dom",title:"Канализация",itemList:["Да","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("balkon_doma")},sx:{mt:2},columns:"3",outlined:!1,name:"balkon_doma",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema-kondiczionirovaniya_dom")},columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_dom",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"kolichestvo_komnat","naznachenie-obekta-zemlya_uchastok","tip_zemli_uchastka","poleznaya_ploshhad","etazh","sostoyanie-obekta_zemlya","mashina_mesto","kolichestvo_sotok","etazhnost","sostoyanie-remonta_zemlya","parkovka_zemlya","rasstoyanie_do_metro","obshhaya_ploshhad","voda_zemlya","mestopolozhenie-obekta_zemlya","rasstoyanie_do_goroda","sistema-otopleniya_zemlya","god_postrojki","elektrichestvo_zemlya","podezdnye_puti","sistema-kondiczionirovaniya_zemlya","gaz_zemlya","kanalizacziya_zemlya")},isVisible:function(e){return!(!Xe(e.kategoriya_obekta,"Коммерческая")||!Xe(e.podkategoriya_obekta,"Земля/Участок"))},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая + Жилая земля/участок)"})}},Pd({hidden:function(e){return!e.fieldVisibility.has("kolichestvo_komnat")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:a.Component,hidden:function(e){return!e.fieldVisibility.has("naznachenie-obekta-zemlya_uchastok")},sx:{mt:2,mb:2,pr:1},columns:"3",name:"naznachenie-obekta-zemlya_uchastok",element:function(e){return Se(Ze,{variant:"standard",label:"Назначение объекта",items:[{label:"Сельхоз использование",value:"Сельхоз использование"},{label:"ИЖС",value:"ИЖС"},{label:"Высотная застройка",value:"Высотная застройка"},{label:"Промышленное назначение",value:"Промышленное назначение"},{label:"ТЦ",value:"ТЦ"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Склады",value:"Склады"},{label:"Инвестпроект",value:"Инвестпроект"},{label:"Строительство образовательных учреждений",value:"Строительство образовательных учреждений"},{label:"АЗС",value:"АЗС"},{label:"Мойка",value:"Мойка"}],value:e["naznachenie-obekta_zemlya"],onChange:function(t){return e.onChange(c({},"naznachenie-obekta_zemlya",t))}})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("tip_zemli_uchastka")},sx:{mt:2},columns:"3",outlined:!1,name:"tip_zemli_uchastka",title:"Тип земли/участка",itemList:["Делимый","Неделимый"]},Pd({hidden:function(e){return!e.fieldVisibility.has("poleznaya_ploshhad")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"}),Pd({hidden:function(e){return!e.fieldVisibility.has("etazh")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sostoyanie-obekta_zemlya")},sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie-obekta_zemlya",title:"Состояние объекта",itemList:["Пустая земля/участок","Недостроенная","Под снос"]},Pd({hidden:function(e){return!e.fieldVisibility.has("mashina_mesto")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),Pd({hidden:function(e){return!e.fieldVisibility.has("kolichestvo_sotok")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"}),Pd({hidden:function(e){return!e.fieldVisibility.has("etazhnost")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sostoyanie-remonta_zemlya")},sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie-remonta_zemlya",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("parkovka_zemlya")},sx:{mt:2},columns:"3",outlined:!1,name:"parkovka_zemlya",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},Pd({hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_metro")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),Pd({hidden:function(e){return!e.fieldVisibility.has("obshhaya_ploshhad")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("voda_zemlya")},sx:{mt:2},columns:"3",outlined:!1,name:"voda_zemlya",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("mestopolozhenie-obekta_zemlya")},sx:{mt:2},columns:"3",outlined:!1,name:"mestopolozhenie-obekta_zemlya",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},Pd({hidden:function(e){return!e.fieldVisibility.has("rasstoyanie_do_goroda")},columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_goroda",title:"Расстояние до города (м)"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema-otopleniya_zemlya")},sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_zemlya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},Pd({hidden:function(e){return!e.fieldVisibility.has("god_postrojki")},columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("elektrichestvo_zemlya")},sx:{mt:2},columns:"3",outlined:!1,name:"elektrichestvo_zemlya",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("podezdnye_puti")},columns:"3",outlined:!1,name:"podezdnye_puti",title:"Подъездные пути",itemList:["Асфальтированная дорога","Грунтовая дорога","Нет"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("sistema-kondiczionirovaniya_zemlya")},columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_zemlya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("gaz_zemlya")},columns:"3",outlined:!1,name:"gaz_zemlya",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("kanalizacziya_zemlya")},columns:"3",outlined:!1,name:"kanalizacziya_zemlya",title:"Канализация",itemList:["Да","Нет"]}]}}],Oy=[{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"vnutri_est","ryadom_est")},isVisible:function(e){var t=!0;return t=(t=t&&!Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Квартиры")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Group,fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Квартиры)"})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vnutri_est")},columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Холодильник","Телевизор","Кондиционер","Стиральная машина","Мусоропровод","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("ryadom_est")},columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"vnutri_est","ryadom_est")},isVisible:function(e){var t=!0;return t=(t=t&&!Xe(e.kategoriya_obekta,"Коммерческая"))&&Xe(e.podkategoriya_obekta,"Дома")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Group,fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Дома)"})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vnutri_est")},columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Холодильник","Телевизор","Кондиционер","Стиральная машина","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг","Полисадник"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("ryadom_est")},columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Охрана","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"vnutri_est","ryadom_est")},isVisible:function(e){var t=!1;return t=(t=t||Xe(e.podkategoriya_obekta,"Земля/Участок"))&&!Xe(e.kategoriya_obekta,"Коммерческая")},child:{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Group,fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Земля/Участок)"})}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vnutri_est")},columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Забор","Катлаван","Пожарная сигнализация","Видеонаблюдение","Сигнализация","Разгрузочный пандус"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("ryadom_est")},columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Охрана","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}}],Uy=e("b",[{type:a.Paper,hidden:function(e){return!Ql(e.fieldVisibility,"zagolovok","kategoriya_obekta","prodazha","arenda","podkategoriya_obekta","raspolozhenie_obekta","istochnik","tip_nedvizhimosti","vid_obekta","vid_liczenzii")},fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Основная информация"})}},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("zagolovok")},outlined:!1,name:"zagolovok",title:"Заголовок",placeholder:"Введите текст"},{type:a.Fragment,isVisible:function(e){return Xe(e.kategoriya_obekta,"Коммерческая")},fields:[{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("kategoriya_obekta")},outlined:!1,columns:"4",name:"kategoriya_obekta",title:"Категория объекта",itemList:["Жилая","Коммерческая","От застройщика"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("prodazha")},outlined:!1,columns:"4",name:"prodazha",title:"Покупка",itemList:["Прямая продажа","Рассрочка","Через банк","Обмен"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("arenda")},outlined:!1,columns:"4",name:"arenda",title:"Аренда",itemList:["Долгосрочная","Ежемесячная","Посуточная"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("podkategoriya_obekta")},outlined:!1,columns:"4",name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:function(e){return Xe(e.kategoriya_obekta,"Коммерческая")},itemList:function(){return["Квартиры","Дома","Земля/Участок","Здания","Базы"]}},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("raspolozhenie_obekta")},isVisible:function(e){if(Xe(e.kategoriya_obekta,"Коммерческая")){if(Xe(e.podkategoriya_obekta,"Дома","Квартиры"))return!1;if(Xe(e.podkategoriya_obekta,"Земля/Участок"))return!1}return!0},columns:"4",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("istochnik")},isVisible:function(e){return!(!Xe(e.kategoriya_obekta,"Коммерческая")||!Xe(e.podkategoriya_obekta,"Дома"))||!Xe(e.podkategoriya_obekta,"Дома")},columns:"4",outlined:!1,name:"istochnik",title:"Источник",itemList:["По звонку","Личные связи","Самостоятельный поиск","Риелтор","С сайта","Прибытие в офис","OLX","Facebook","Instagram","Telegram","Эксклюзив","Другое"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("tip_nedvizhimosti")},isVisible:function(e){return!(!Xe(e.podkategoriya_obekta,"Квартиры")||!Xe(e.kategoriya_obekta,"Коммерческая","Жилая"))},columns:"4",outlined:!1,name:"tip_nedvizhimosti",title:"Тип недвижимости",itemList:["Вторичное жилье","Новостройка"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("vid_obekta")},isVisible:function(e){var t=!1;return t=t||Xe(e.podkategoriya_obekta,"Дома")},columns:"4",outlined:!1,name:"vid_obekta",title:"Вид объекта",itemList:["Дом","Коттедж","Таунхаус","ЖАКТ","Часть дома","Дача"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vid_liczenzii")},isVisible:function(e){return!(!Xe(e.kategoriya_obekta,"Коммерческая")||!Xe(e.podkategoriya_obekta,"Земля/Участок"))},columns:"4",outlined:!1,name:"vid_liczenzii",title:"Вид лицензии",itemList:["Коммерческая","Жилая"]}]},{type:a.Fragment,hidden:function(e){return!Ql(e.fieldVisibility,"kategoriya_obekta","prodazha","arenda","podkategoriya_obekta","istochnik","tip_nedvizhimosti","vid_obekta","raspolozhenie_obekta","vid_liczenzii")},isVisible:function(e){return!Xe(e.kategoriya_obekta,"Коммерческая")},fields:[{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("kategoriya_obekta")},outlined:!1,columns:"4",name:"kategoriya_obekta",title:"Категория объекта",itemList:["Жилая","Коммерческая","От застройщика"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("prodazha")},outlined:!1,columns:"4",name:"prodazha",title:"Покупка",itemList:["Прямая продажа","Рассрочка","Через банк","Обмен"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("arenda")},outlined:!1,columns:"4",name:"arenda",title:"Аренда",itemList:["Долгосрочная","Ежемесячная","Посуточная"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("podkategoriya_obekta")},outlined:!1,columns:"4",name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:function(e){return!Xe(e.kategoriya_obekta,"Коммерческая")},itemList:function(){return["Квартиры","Дома","Земля/Участок"]}},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("istochnik")},columns:"4",outlined:!1,name:"istochnik",title:"Источник",itemList:["По звонку","Личные связи","Самостоятельный поиск","Риелтор","С сайта","Прибытие в офис","OLX","Facebook","Instagram","Telegram","Эксклюзив","Другое"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("tip_nedvizhimosti")},isVisible:function(e){return!!Xe(e.podkategoriya_obekta,"Квартиры")&&!Xe(e.kategoriya_obekta,"Коммерческая")},columns:"4",outlined:!1,name:"tip_nedvizhimosti",title:"Тип недвижимости",itemList:["Вторичное жилье","Новостройка"]},{type:a.Combo,hidden:function(e){return!e.fieldVisibility.has("vid_obekta")},isVisible:function(e){var t=!1;return t=t||Xe(e.podkategoriya_obekta,"Дома")},columns:"4",outlined:!1,name:"vid_obekta",title:"Вид объекта",itemList:["Дом","Коттедж","Таунхаус","ЖАКТ","Часть дома","Дача"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("raspolozhenie_obekta")},isVisible:function(e){var t=!1;return t=(t=(t=t||Xe(e.kategoriya_obekta,"Коммерческая"))&&!Xe(e.podkategoriya_obekta,"Дома"))&&!Xe(e.podkategoriya_obekta,"Земля/Участок")},columns:"4",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:a.Items,hidden:function(e){return!e.fieldVisibility.has("vid_liczenzii")},isVisible:function(e){var t=!1;return t=t||Xe(e.podkategoriya_obekta,"Земля/Участок")},columns:"4",outlined:!1,name:"vid_liczenzii",title:"Вид лицензии",itemList:["Коммерческая","Жилая"]}]}]}].concat(Ny,[{type:a.Box,sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gridColumnGap:"8px"},fields:[{type:a.Component,fieldRightMargin:"1",fieldBottomMargin:"1",element:qy},{type:a.Box,sx:{display:"grid",gridTemplateRows:"1fr auto",gridRowGap:"8px"},fields:[{type:a.Component,fieldRightMargin:"1",fieldBottomMargin:"1",element:function(e){var t=e.onChange,n=e._fieldData;return Se(fm,{onChange:t,fieldData:n})}},{type:a.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",hidden:function(e){return!e.fieldVisibility.has("opisanie")},fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Описание объекта"})}},{type:a.Text,hidden:function(e){return!e.fieldVisibility.has("opisanie")},inputRows:6,outlined:!1,name:"opisanie",title:"Описание"}]}]}]}],Oy,Ey,Py,[{type:a.Component,features:["withBottomSaveButton"],watchOneContext:!0,element:Of}]));window.bid_fields=Uy;var Hy,Wy,$y,Gy,Yy,Ky,Xy,Jy,Zy,Qy,ev,tv,nv,rv,iv,av,ov,sv,uv,lv,cv=[{type:et.Link,isVisible:function(){return!!Fl.routerService.previousPath},action:"list-action",label:Se(Ge,{sx:{display:"block"}})},{type:et.Link,action:"list-action",label:"Заявки"},{type:et.Link,action:"list-action",label:"Редактирование заявки"},{type:et.Button,isDisabled:function(e){return!e.hasChanged},action:"save-action",label:"Сохранить"}],dv=[{type:et.Link,isVisible:function(){return!!Fl.routerService.previousPath},action:"list-action",label:Se(Ge,{sx:{display:"block"}})},{type:et.Link,action:"list-action",label:"Заявки"},{type:et.Link,action:"list-action",label:"Просмотр заявки"},{type:et.Button,isDisabled:function(e){return!e.payload.permissions.hasBidUpdatePermission},action:"edit-action",label:"Редактировать"}],pv=[{action:"pick-allowance-action",isDisabled:($y=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.data.parameter,i=Fl.appwriteService.currentUser.$id,e.abrupt("return",ee(Q(Promise.resolve(r.system_created_by===i),Fl.featureService.hasFeature("vizhu_kontakty_pod_bronyu"))));case 3:case"end":return e.stop()}}),e)}))),function(e){return $y.apply(this,arguments)}),label:"Поделиться объектом"},{action:"toggle-only-for-owner-action",isVisible:function(e){return!!e.data.parameter.system_only_for_owner},isDisabled:(Wy=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.data.parameter,i=Fl.appwriteService.currentUser.$id,e.abrupt("return",ee(Q(Promise.resolve(r.system_created_by===i),Fl.featureService.hasFeature("vizhu_kontakty_pod_bronyu"))));case 3:case"end":return e.stop()}}),e)}))),function(e){return Wy.apply(this,arguments)}),icon:Xt,label:"Эксклюзив"},{action:"toggle-only-for-owner-action",isVisible:function(e){return!e.data.parameter.system_only_for_owner},isDisabled:(Hy=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.data.parameter,i=Fl.appwriteService.currentUser.$id,e.abrupt("return",ee(Q(Promise.resolve(r.system_created_by===i),Fl.featureService.hasFeature("vizhu_kontakty_pod_bronyu"))));case 3:case"end":return e.stop()}}),e)}))),function(e){return Hy.apply(this,arguments)}),icon:Kt,label:"Эксклюзив"},{action:"superadmin-remove-action",isVisible:function(e){return e.payload.permissions.hasSuperAdminFlagPermission},label:"Удалить навсегда"}],mv="real-estate__headerRoot",fv=[{type:et.Link,isVisible:function(){return!!Fl.routerService.previousPath},action:"list-action",label:Se(Ge,{sx:{display:"block"}})},{type:et.Link,action:"list-action",label:"Заявки"},{type:et.Link,action:"list-action",label:"Просмотр служебных комментариев"}],hv=[{type:et.Link,isVisible:function(){return!!Fl.routerService.previousPath},action:"list-action",label:Se(Ge,{sx:{display:"block"}})},{type:et.Link,action:"list-action",label:"Заявки"},{type:et.Link,action:"list-action",label:"Просмотр задач"}],yv=[{id:"list",element:function(e){var t=e.payload;return Se(ur,{history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},routes:fy,payload:t})},isActive:function(e){return Dl(["/bid","/bid_rent","/bid_sell","/bid_archive"],e)},isAvailable:function(){return!1}},{id:"create",element:function(e){var n=e.payload,a=Yn(),s=a.elementRef,u=a.size,l=_f({payload:n}),d=i(we.useState((function(){return{activeStep:0,contact_id:null,fio:"",telefon:"",tip_klienta:null}})),2),p=d[0],m=d[1],f=i(we.useState([]),2),h=f[0],y=f[1],v=i(we.useState(!1),2),b=v[0],_=v[1],k=i(we.useState(!1),2),g=k[0],x=k[1],w=we.useMemo((function(){return new Date(Date.now()+1e4)}),[p.activeStep]);we.useEffect((function(){x(!1)}),[p.activeStep]);var S=function(e){return m((function(t){return o(o({},t),{},{activeStep:e})}))},z=p.activeStep,V=Ay().classes,A=nt({history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),T=A.handleLoadStart,C=A.handleLoadEnd,F=A.loading,L=A.unblock,I=Gt(p),M=Ve(r(t().mark((function e(){var n,r,i,a,o,s,u,l;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=I.current,r=n.contact_id,i=n.fio,a=n.telefon,o=n.tip_klienta,r){e.next=7;break}return e.next=5,Fl.contactViewService.create({fio:i,telefon:a,tip_klienta:o,"data-sozdaniya_klienta":Kn.currentDate()});case 5:s=e.sent,r=s.$id;case 7:return e.next=9,Fl.bidViewService.create({contact_id:r});case 9:u=e.sent,l=u.id,L(),Fl.routerService.push("/bid_edit/".concat(l),{viewRedirectFlag:!0}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),Fl.alertService.notify(Xs(e.t0));case 18:case"end":return e.stop()}}),e,null,[[0,15]])}))),{onLoadStart:T,onLoadEnd:C}).execute,j=function(){var e=r(t().mark((function e(){var n,r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_(!0),p.fio||p.telefon){e.next=3;break}return e.abrupt("return");case 3:if(0!==z){e.next=11;break}return e.next=6,Fl.contactRequestService.findDuplicates(p.telefon);case 6:n=e.sent,r=n.rows,i=n.total,y(r),S(0===i?2:1);case 11:if(1===z&&S(2),2!==z){e.next=15;break}return e.next=15,M();case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=!1;return 1===z&&(e=e||!g),e=(e=e||F)||3===z};return Se(Qn,{children:[Se(ot,{items:Vy}),Se(fn,{className:V.root,children:[Se(Xn,{className:V.header,activeStep:z,children:[Se(Jn,{completed:z>0,children:Se(Zn,{children:"Первичные данные"})},0),Se(Jn,{completed:z>1,children:Se(Zn,{children:"Поиск дубликатов"})},1),Se(Jn,{completed:z>2,children:Se(Zn,{children:"Создание заявки"})},2)]}),Se("div",{className:V.adjust}),Se(qe,{ref:s,className:V.content,children:0===z?Se(st,{sx:{pl:1,pr:1,pt:2,pb:3},handler:p,onChange:m,dirty:b,fields:zy}):1===z?Se(nr,{sx:{height:u.height},component:Pt,minRowHeight:54,children:h.map((function(e,n){var i,a=e.fio,s=(e.telefon,e.$id),u=e.tip_klienta,d=e.index,f=e.system_created_by;return Se(Ue,{disableRipple:!0,className:Pe(c({},V.listItemBackground,n%2==1)),onClick:function(){m((function(e){return o(o({},e),{},{contact_id:s,activeStep:2})}))},dense:!0,children:[Se(er,{children:Se(tr,{edge:"start",checked:p.contact_id===s,sx:{marginLeft:"0 !important"},disableRipple:!0})}),Se(Ct,{primary:a,secondary:Se(Ne,{Loader:Ty,children:(i=r(t().mark((function e(){var n,r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.userViewService.tryRead(f);case 2:return n=e.sent,r=n?"Создал "+[n.last_name,n.first_name,n.middle_name].filter((function(e){return e})).join(" "):"",e.abrupt("return",["№".concat(d),r,u].filter((function(e){return e})).join(", "));case 5:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})})}),Se(en,{variant:"outlined",onClick:function(e){e.preventDefault(),e.stopPropagation(),l(s)},sx:{ml:3},children:"Показать контакт"})]},n)}))}):2===z?Se(st,{sx:{pl:1,pr:1,pt:2,pb:3},handler:p,dirty:b,fields:zy}):null}),Se(Ke,{sx:{pl:1,pr:1,pb:1},justifyContent:"space-between",flexDirection:"row",children:[Se(xt,{disabled:F||0===z,fallback:Fl.errorService.handleGlobalError,onClick:function(){m((function(e){return o(o({},e),{},{contact_id:null})})),0===h.length?S(0):S(z-1)},sx:{mt:1},variant:"contained",onLoadStart:T,onLoadEnd:C,children:"Назад"}),Se(xt,1===z?{disabled:B(),fallback:Fl.errorService.handleGlobalError,onClick:j,sx:{mt:1},variant:"contained",onLoadStart:T,onLoadEnd:C,children:Se(rr,{expireAt:w,onExpire:function(){return x(!0)},children:"Не вижу дубликат"})}:2===z?{disabled:B(),fallback:Fl.errorService.handleGlobalError,onClick:j,sx:{mt:1},variant:"contained",onLoadStart:T,onLoadEnd:C,children:"Создать заявку"}:{disabled:B(),fallback:Fl.errorService.handleGlobalError,onClick:j,sx:{mt:1},variant:"contained",onLoadStart:T,onLoadEnd:C,children:"Далее"})]})]})]})},isActive:function(e){return Dl(["/bid/create"],e)},isAvailable:function(){return!1}},{id:"contact",element:function(e){var t=e.formState,n=e.payload,r=e.data,i=e.beginSave,a=e.onChange,s=at(r);return Se(Ae,{children:[Se(ot,{items:by,onAction:function(e){"list-action"===e&&Fl.routerService.back("/contact"),"save-action"===e&&i()},payload:t}),Se(jl,{}),Se(vy,{payload:n,mode:n.menuMode,children:[Se(st,{changeSubject:s,features:function(){return o(o({},n.permissions),{},{withBottomSaveButton:!0})},handler:function(){return r},payload:function(){return o(o({},n),{},{beginSave:i})},context:t,fields:yh,onChange:a}),Se(ut,{}),Se(lt,{})]})]})},isActive:function(e){return Dl(["/bid_edit/:id/contact"],e)}},{id:"parameter",element:function(e){var t=e.payload,n=e.formState,r=e.beginSave,i=e.data,a=e.onChange,s=at(i);return Se(Ae,{children:[Se(ot,{items:cv,onAction:function(e){"list-action"===e&&Fl.routerService.back("/bid"),"save-action"===e&&r()},payload:n}),Se(jl,{}),Se(vy,{payload:t,mode:t.menuMode,children:[Se(st,{changeSubject:s,features:function(){return o(o({},t.permissions),{},{withBottomSaveButton:!0})},fields:Uy,payload:function(){return o(o({},t),{},{beginSave:r})},context:n,handler:function(){return i},onChange:a}),Se(ut,{}),Se(lt,{})]})]})},isActive:function(e){return Dl(["/bid_edit/:id","/bid_edit/:id/parameter"],e)}},{id:"documents",element:function(e){var n,i,a,o=e.data,s=e.onChange,u=e.payload,l=e.beginSave,c=e.formState,d=nt({history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),p=d.handleLoadStart,m=d.handleLoadEnd,f=d.loading;return Se(Ae,{children:[Se(ot,{items:Cy,payload:c,onAction:function(e){"list-action"===e&&Fl.routerService.back("/apartment"),"save-action"===e&&l()}}),Se(jl,{}),Se(vy,{payload:u,mode:u.menuMode,children:[Se(fn,{sx:{p:1},children:Se(Un,{disabled:f,accept:"*",multiple:!0,items:o,tr:(a=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.appwriteService.tryReadFileName(n);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=n;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),fallback:Fl.errorService.handleGlobalError,onClick:(i=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.appwriteService.getFileURL(n);case 2:return r=e.sent,e.next=5,Fl.appwriteService.readFileName(n);case 5:i=e.sent,zt(r,i);case 7:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)}),onUpload:function(e){return Fl.appwriteService.uploadFile(e)},onChange:(n=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(n);case 1:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)}),onLoadStart:p,onLoadEnd:m})}),Se(ut,{}),Se(lt,{})]})]})},isActive:function(e){return Dl(["/bid_edit/:id/documents"],e)}},{id:"contact",element:function(e){var n,i,a=e.params.id,o=e.formState,s=e.payload,u=e.data,l=e.beginSave,c=e.onChange,d=rt({AfterTitle:function(e){var t=e.onClose;return Se(We,{size:"small",onClick:t,children:Se(it,{})})},fields:yh,payload:s,features:s.permissions,outlinePaper:!0,handler:(i=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sy(a);case 2:return n=e.sent,e.next=5,Fl.contactViewService.tryRead(n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)}),fullScreen:!0,title:"Редактировать",onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},onSubmit:(n=r(t().mark((function e(n){var r,i,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!0,e.prev=1,!n){e.next=13;break}return e.next=5,Sy(a);case 5:return i=e.sent,e.t0=Fl.contactViewService,e.t1=i,e.next=10,Fl.polishService.polishContact(n,s);case 10:return e.t2=e.sent,e.next=13,e.t0.update.call(e.t0,e.t1,e.t2);case 13:e.next=21;break;case 15:return e.prev=15,e.t3=e.catch(1),r=!1,o=Xs(e.t3),Fl.alertService.notify(o),e.abrupt("return",!1);case 21:return e.prev=21,e.abrupt("return",r);case 24:case"end":return e.stop()}}),e,null,[[1,15,21,24]])}))),function(e){return n.apply(this,arguments)}),submitLabel:"Сохранить"}),p=d.pickData,m=d.render,f=at(u);return Se(Ae,{children:[Se(ot,{items:xy,actions:wy,onAction:function(e){"list-action"===e&&Fl.routerService.back("/bid"),"save-action"===e&&l(),"edit-action"===e&&p(),"show-contact-action"===e&&Fl.routerService.push("/contact_view/".concat(o.data.parameter.contact_id))},payload:o}),Se(jl,{}),Se(gy,{payload:s,mode:s.menuMode,children:[Se(st,{readonly:!0,handler:function(){return u},fields:Wc,features:s.permissions,changeSubject:f,payload:s,onChange:c}),Se(ut,{}),Se(lt,{})]}),m()]})},isActive:function(e){return Dl(["/bid_view/:id/contact"],e)}},{id:"parameter",element:function(e){var n,i,a,o=e.params.id,s=void 0===o?"create":o,u=e.payload,l=e.formState,c=e.data,d=e.onChange,p=function(e){var n=e.bidId,i=nt({history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),a=i.handleLoadStart,o=i.handleLoadEnd,s=Ve(r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.featureService.hasFeature("superadmin");case 2:if(!e.sent){e.next=6;break}return e.next=5,Fl.cleanupService.removeBid(n);case 5:Fl.routerService.push("/bid");case 6:case"end":return e.stop()}}),e)}))),{onLoadStart:a,onLoadEnd:o,fallback:Fl.errorService.handleGlobalError}).execute,u=jt({title:"Вы уверены?",msg:"Удаление заявки сотрет соответствующие записи в заявках, сделках. Продолжить?"});return function(){return u().then((function(e){e&&s()}))}}({bidId:s}),m=rt({AfterTitle:function(e){var t=e.onClose;return Se(We,{size:"small",onClick:t,children:Se(it,{})})},fields:Uy,payload:u,features:u.permissions,outlinePaper:!0,handler:(i=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.bidViewService.tryRead(s);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)}),fullScreen:!0,title:"Редактировать",onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},onSubmit:(n=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!0,e.prev=1,!n){e.next=10;break}return e.t0=Fl.bidViewService,e.t1=s,e.next=7,Fl.polishService.polishBid(n,u);case 7:return e.t2=e.sent,e.next=10,e.t0.update.call(e.t0,e.t1,e.t2);case 10:e.next=18;break;case 12:return e.prev=12,e.t3=e.catch(1),r=!1,i=Xs(e.t3),Fl.alertService.notify(i),e.abrupt("return",!1);case 18:return e.prev=18,e.abrupt("return",r);case 21:case"end":return e.stop()}}),e,null,[[1,12,18,21]])}))),function(e){return n.apply(this,arguments)}),submitLabel:"Сохранить"}),f=m.pickData,h=m.render,y=ah({title:"Поделиться заявкой",payload:u,features:u.permissions,selectedRows:c.system_allowance||[]}),v=Ve(function(){var e=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("list-action"===n&&Fl.routerService.back("/bid"),"edit-action"===n&&f(),"toggle-only-for-owner-action"!==n){e.next=5;break}return e.next=5,Fl.bidViewService.toggleOnlyForOwner(s);case 5:if("pick-allowance-action"!==n){e.next=13;break}return e.next=8,y();case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,Fl.bidViewService.updateAllowance(s,r);case 13:"superadmin-remove-action"===n&&p();case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),b=v.execute,_=at(c);return Se(Ae,{children:[Se(ot,{items:dv,actions:pv,onAction:(a=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(n);case 2:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),payload:l}),Se(jl,{}),Se(gy,{payload:u,mode:u.menuMode,children:[Se(st,{readonly:!0,changeSubject:_,features:u.permissions,fields:hm,handler:function(){return c},payload:u,onChange:d}),Se(ut,{}),Se(lt,{})]}),h()]})},isActive:function(e){return Dl(["/bid_view/:id","/bid_view/:id/parameter"],e)}},{id:"history",element:function(e){var n=e.formState,a=e.payload,o=i(we.useState([]),2),s=o[0],u=o[1],l=Yn({target:document.body,selector:"main",compute:function(e){var t,n=e.height,r=e.width;if(a.menuMode===H.Tabs){var i=document.querySelector(".".concat(ar));n-=(null==i?void 0:i.offsetHeight)||0}return n-=(null===(t=document.querySelector(".".concat(Ly)))||void 0===t?void 0:t.offsetHeight)||0,n-=50,{width:r,height:n=Math.min(window.innerHeight-50,n)}}}).size,c=Ve(function(){var e=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return r=Il("id"),e.next=4,Fl.dealHistoryViewService.findAllByBidId(r);case 4:i=e.sent,u(i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{fallback:Fl.errorService.handleGlobalError,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),d=c.loading,p=c.execute;return Se(Ae,{children:[Se("div",{className:Ly,children:[Se(ot,{payload:n,items:Iy,onAction:function(e){"list-action"===e&&Fl.routerService.back("/bid")}}),Se(jl,{})]}),Se(gy,{payload:a,mode:a.menuMode,children:Se(nr,{sx:{height:l.height},minHeight:72,loading:d,onDataRequest:function(e){p(e)},children:Se(Ke,{spacing:1,children:s.map((function(e){return Se(Ff,{loading:d,status:"info",item:e},e.$id)}))})})})]})},isActive:function(e){return Dl(["/bid_view/:id/history"],e)}},{id:"tasks",element:function(e){var t=e.formState,n=e.payload;return Se(Ae,{children:[Se("div",{className:"real-estate__headerRoot",children:[Se(ot,{payload:t,items:hv,onAction:function(e){"list-action"===e&&Fl.routerService.back("/apartment")}}),Se(jl,{})]}),Se(gy,{payload:n,mode:n.menuMode,children:Se(ry,{withTransparentHeader:!0,contactId:t.data.parameter.contact_id,payload:n})})]})},isActive:function(e){return Dl(["/bid_view/:id/tasks"],e)}},{id:"documents",element:function(e){var n,i,a,s=e.params.id,u=e.data,l=e.payload,c=e.formState,d=Tf({data:u,onSubmit:(n=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.bidViewService.update(s,o(o({},c.data.parameter),{},{bid_files:n}));case 2:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})}),p=d.render,m=d.pickFiles;return Se(Ae,{children:[Se(ot,{items:Fy,payload:c,onAction:function(e){"list-action"===e&&Fl.routerService.back("/bid"),"edit-action"===e&&m()}}),Se(jl,{}),Se(gy,{payload:l,mode:l.menuMode,children:[Se(fn,{sx:{p:1},children:Se(Un,{disabled:!0,accept:"*",multiple:!0,items:u,tr:(a=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.appwriteService.tryReadFileName(n);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=n;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),fallback:Fl.errorService.handleGlobalError,onClick:(i=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.appwriteService.getFileURL(n);case 2:return r=e.sent,e.next=5,Fl.appwriteService.readFileName(n);case 5:i=e.sent,zt(r,i);case 7:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)}),onUpload:function(e){return Fl.appwriteService.uploadFile(e)}})}),Se(ut,{}),Se(lt,{})]}),p()]})},isActive:function(e){return Dl(["/bid_view/:id/documents"],e)}},{id:"service_comment",element:function(e){var n=e.formState,a=e.payload,o=i(we.useState([]),2),s=o[0],u=o[1],l=Yn({target:document.body,selector:"main",compute:function(e){var t,n=e.height,r=e.width;if(a.menuMode===H.Tabs){var i=document.querySelector(".".concat(ar));n-=(null==i?void 0:i.offsetHeight)||0}return n-=(null===(t=document.querySelector(".".concat(mv)))||void 0===t?void 0:t.offsetHeight)||0,n-=50,{width:r,height:n=Math.min(window.innerHeight-50,n)}}}).size,c=Ve(r(t().mark((function e(){var n,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Il("id"),e.next=3,Fl.serviceCommentViewService.findByBidId(n);case 3:return i=e.sent,e.t0=u,e.next=7,Promise.all(i.map(function(){var e=r(t().mark((function e(n){var r,i,a,o,s,u,l;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.$id,i=n.user_id,a=n.file_id,o=n.comment,s=n.$createdAt,e.next=3,Fl.userViewService.tryRead(i);case 3:if(u=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:if(!a){e.next=12;break}return e.next=9,Fl.appwriteService.tryReadFileName(a);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0="";case 13:return l=e.t0,e.abrupt("return",{id:r,message:o,fileId:a,userId:i,displayName:[u.last_name,u.first_name,u.middle_name,f(s).format("DD.MM.YYYY / HH:mm")].join(" "),fileName:l,avatar:u.avatar||""});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).filter((function(e){return!!e})).reverse());case 7:e.t1=e.sent,(0,e.t0)(e.t1);case 9:case"end":return e.stop()}}),e)}))),{fallback:Fl.errorService.handleGlobalError,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),d=c.execute;we.useEffect((function(){d()}),[]),we.useEffect((function(){return Fl.serviceCommentViewService.createSubject.subscribe((function(e){var t=Il("id");e.bid_id===t&&d()}))}),[]);var p=function(){var e=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fl.appwriteService.currentUser.$id,i=Il("id"),e.next=4,Fl.serviceCommentViewService.create({user_id:r,comment:n,bid_id:i,apartment_id:null,contact_id:null,file_id:null});case 4:return e.next=6,d();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=r(t().mark((function e(n,r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Fl.appwriteService.currentUser.$id,a=Il("id"),e.next=4,Fl.serviceCommentViewService.create({user_id:i,comment:n,apartment_id:a,bid_id:null,contact_id:null,file_id:r});case 4:return e.next=6,d();case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Se(Ae,{children:[Se("div",{className:mv,children:[Se(ot,{payload:n,items:fv,onAction:function(e){"list-action"===e&&Fl.routerService.back("/apartment")}}),Se(jl,{})]}),Se(gy,{payload:a,mode:a.menuMode,children:Se(Mc,{payload:a,style:{height:l.height},messages:s,onText:p,onFile:m})})]})},isActive:function(e){return Dl(["/bid_view/:id/service_comment"],e)}}],vv=function(){var e=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("create"!==n){e.next=2;break}return e.abrupt("return",{"data-sozdaniya_klienta":Kn.currentDate()});case 2:return e.next=4,Fl.bidViewService.read(n);case 4:return r=e.sent,i=r.contact_id,e.next=8,Fl.contactViewService.tryRead(i);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),bv=function(e){var n,a=e.id,o=void 0===a?"create":a,s=function(){var e=r(t().mark((function e(n,r,i){var a,s,u,l,c,d,p,m,f,h,y,v;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.afterSave,s=!0,e.prev=2,e.next=5,Fl.polishService.polishBid(S.get(n,"parameter")||{},r);case 5:return u=e.sent,e.next=8,Fl.polishService.polishContact(S.get(n,"contact")||{},r);case 8:if(l=e.sent,c=S.get(n,"documents")||[],d=S.get(n,"parameter.contact_id"),S.set(n,"parameter.bid_files",c),!d){e.next=18;break}return e.next=15,Fl.contactViewService.tryRead(d);case 15:e.t0=e.sent,e.next=19;break;case 18:e.t0=!1;case 19:if(p=e.t0,!d||!p){e.next=25;break}return e.next=23,Fl.contactViewService.update(d,l);case 23:e.next=30;break;case 25:return e.next=27,Fl.contactViewService.create(l);case 27:m=e.sent,f=m.id,d=f;case 30:if(S.set(n,"parameter.contact_id",d),"create"!==o){e.next=41;break}return e.next=34,Fl.bidViewService.create(u);case 34:return h=e.sent,y=h.id,e.next=38,a();case 38:Fl.routerService.push("/bid_edit/".concat(y)),e.next=43;break;case 41:return e.next=43,Fl.bidViewService.update(o,u);case 43:if(!Fl.routerService.hasViewRedirectFlag()){e.next=47;break}return e.next=46,a();case 46:Fl.routerService.push("/bid_view/".concat(o));case 47:Fl.alertService.notify("Изменения сохранены"),e.next=55;break;case 50:e.prev=50,e.t1=e.catch(2),s=!1,v=Xs(e.t1),Fl.alertService.notify(v);case 55:return e.prev=55,e.abrupt("return",s);case 58:case"end":return e.stop()}}),e,null,[[2,50,55,58]])})));return function(t,n,r){return e.apply(this,arguments)}}(),u=function(){var e=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vv(o);case 2:return e.t0=e.sent,e.next=5,Fl.bidViewService.tryRead(o);case 5:return e.t1=e.sent,e.next=8,Fl.settingsViewService.getMasterDetailMode();case 8:return e.t2=e.sent,e.next=11,Fl.permissionService.getPermissions();case 11:return e.t3=e.sent,e.next=14,Fl.featureService.getAccessLevel();case 14:return e.t4=e.sent,e.next=17,Fl.visibilityService.getFieldVisibilitySet();case 17:return e.t5=e.sent,e.abrupt("return",[e.t0,e.t1,e.t2,e.t3,e.t4,e.t5]);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=Be();return we.useEffect((function(){return Fl.contactViewService.updateSubject.subscribe(function(){var e=r(t().mark((function e(n){var r,a,o,s,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i(n,2),a=r[0],o=r[1],s=Il("id")){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Fl.bidViewService.read(s);case 6:u=e.sent,a===(null==u?void 0:u.contact_id)&&l.next(["contact",o]);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),we.useEffect((function(){return Fl.bidViewService.updateSubject.subscribe((function(e){var t=i(e,2),n=t[0],r=t[1];o===n&&(l.next(["parameter",r]),l.next(["documents",(null==r?void 0:r.bid_files)||[]]))}))}),[]),Se(br,{state:u,reloadSubject:Fl.layoutService.reloadOutletSubject,fallback:Fl.errorService.handleGlobalError,children:(n=r(t().mark((function e(n){var r,a,u,c,d,p,m;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i(n,6),a=r[0],u=r[1],c=r[2],d=r[3],p=r[4],m=r[5],e.abrupt("return",Se(ur,{history:Fl.routerService,waitForChangesDelay:pa,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},routes:yv,params:{id:o},initialData:{contact:a,parameter:u,documents:(null==u?void 0:u.bid_files)||[]},payload:function(){return{menuMode:c,permissions:d,accessLevel:p,fieldVisibility:m,id:o}},changeSubject:l,onChange:console.log,onSubmit:s}));case 2:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})})},_v=[{id:"objects",label:"Объекты",isDisabled:function(){return!0}},{id:"bids",label:"Заявки",isDisabled:function(){return!0}},{id:"contact",label:"Контакт",isActive:function(){return!0}},{id:"tasks",isDisabled:function(){return!0},label:"Задачи"},{id:"service_comment",isDisabled:function(){return!0},label:"Служебный комментарий"},{id:"history",isDisabled:function(){return!0},label:"История"}],kv=function(e,t){if(!t){var n=Il("id","create");"contact"===e&&Fl.routerService.replace("/contact_edit/".concat(n,"/contact")),"tasks"===e&&Fl.routerService.replace("/contact_edit/".concat(n,"/tasks")),"history"===e&&Fl.routerService.replace("/contact_edit/".concat(n,"/history"))}},gv=function(e){var t=e.payload,n=e.children,r=e.mode,i=void 0===r?H.Paper:r,a=we.useMemo((function(){return"tabs"===i?H.Tabs:H.Paper}),[i]);return Se(Ce,{withFixedPos:!0,fixedPosHeaderAdjust:i===H.Paper?85:64,mode:a,options:_v,payload:t,onActiveOptionChange:kv,children:n})},xv=[{type:et.Link,isVisible:function(){return!!Fl.routerService.previousPath},action:"list-action",label:Se(Ge,{sx:{display:"block"}})},{type:et.Link,action:"list-action",label:"Список контактов"},{type:et.Link,action:"user-list-action",label:"Данные контакта"},{type:et.Button,isDisabled:function(e){return!e.hasChanged},action:"save-action",label:"Сохранить"}],wv=[{id:"objects",label:"Объекты",isActive:function(){return Dl(["/contact_view/:id/objects"])}},{id:"bids",label:"Заявки",isActive:function(){return Dl(["/contact_view/:id/bids"])}},{id:"contact",label:"Контакт",isActive:function(){return Dl(["/contact_view/:id","/contact_view/:id/contact"])}},{id:"tasks",label:"Задачи",isActive:function(){return Dl(["/contact_view/:id/tasks"])}},{id:"service_comment",label:"Служебный комментарий",isActive:function(){return Dl(["/contact_view/:id/service_comment"])}},{id:"history",label:"История",isActive:function(){return Dl(["/contact_view/:id/history"])}}],Sv=function(e,t){if(!t){var n=Il("id","create");"objects"===e&&Fl.routerService.replace("/contact_view/".concat(n,"/objects")),"bids"===e&&Fl.routerService.replace("/contact_view/".concat(n,"/bids")),"contact"===e&&Fl.routerService.replace("/contact_view/".concat(n,"/contact")),"tasks"===e&&Fl.routerService.replace("/contact_view/".concat(n,"/tasks")),"service_comment"===e&&Fl.routerService.replace("/contact_view/".concat(n,"/service_comment")),"history"===e&&Fl.routerService.replace("/contact_view/".concat(n,"/history"))}},zv=function(e){var t=e.children,n=e.payload,r=e.mode,i=void 0===r?H.Paper:r,a=we.useMemo((function(){return"tabs"===i?H.Tabs:H.Paper}),[i]);return Se(Ce,{withFixedPos:!0,payload:n,fixedPosHeaderAdjust:i===H.Paper?85:64,mode:a,options:wv,onActiveOptionChange:Sv,children:t})},Vv=[{type:et.Link,isVisible:function(){return!!Fl.routerService.previousPath},action:"list-action",label:Se(Ge,{sx:{display:"block"}})},{type:et.Link,action:"list-action",label:"Контакты"},{type:et.Link,action:"user-list-action",label:"Данные контакта"},{type:et.Button,isDisabled:function(e){return!e.payload.permissions.hasContactUpdatePermission},action:"edit-action",label:"Редактировать"}],Av=[{action:"superadmin-remove-action",isVisible:function(e){return e.payload.permissions.hasSuperAdminFlagPermission},label:"Удалить навсегда"}],Tv=[{type:a.Fragment,isVisible:function(e){return 0===e.activeStep},fields:[{type:a.Component,element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",mb:2,children:"Данные контакта"})}},{type:a.Text,outlined:!0,title:"Ф.И.О",isInvalid:function(e){return e.fio?null:"Обязательно к заполнению"},description:"Фамилия Имя Отчество контакта",name:"fio"},{type:a.Text,outlined:!0,title:"Телефон",isInvalid:function(e){return e.telefon?null:"Обязательно к заполнению"},description:"Телефон контакта",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon"},{type:a.Combo,outlined:!0,name:"tip_klienta",title:"Тип клиента",itemList:["Собственник","Доверенное лицо","Риелтор","Информатор","Застройщик"]}]},{type:a.Fragment,isVisible:function(e){return 2===e.activeStep},fields:[{type:a.Component,element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",mb:1,children:"Предпросмотр"})}},{type:a.Component,isVisible:function(e){return!e.contact_id},element:function(){return Se(Gn,{variant:"outlined",color:"warning",sx:{mb:2},children:"Создавая новый контакт, убедитесь, что нет дубликата"})}},{type:a.Component,isVisible:function(e){return!!e.contact_id},element:function(){return Se(Gn,{variant:"outlined",color:"info",sx:{mb:2},children:"Убедитесь, что это контактные данные клиента"})}},{type:a.Text,isVisible:function(e){return!!e.contact_id},compute:(Ky=r(t().mark((function e(n){var r,i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.contact_id,e.next=3,Fl.contactViewService.tryRead(r);case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={};case 6:return i=e.t0,a=i.fio,o=void 0===a?"":a,e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),function(e){return Ky.apply(this,arguments)}),disabled:!0,outlined:!0,title:"Ф.И.О"},{type:a.Text,isVisible:function(e){return!!e.contact_id},compute:(Yy=r(t().mark((function e(n){var r,i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.contact_id,e.next=3,Fl.contactViewService.tryRead(r);case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={};case 6:return i=e.t0,a=i.telefon,o=void 0===a?"":a,e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),function(e){return Yy.apply(this,arguments)}),disabled:!0,outlined:!0,title:"Телефон",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000"},{type:a.Text,isVisible:function(e){return!!e.contact_id},fieldBottomMargin:"0",compute:(Gy=r(t().mark((function e(n){var r,i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.contact_id,e.next=3,Fl.contactViewService.tryRead(r);case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={};case 6:return i=e.t0,a=i.tip_klienta,o=void 0===a?null:a,e.abrupt("return",me(o)||"Не указано");case 10:case"end":return e.stop()}}),e)}))),function(e){return Gy.apply(this,arguments)}),disabled:!0,outlined:!0,name:"tip_klienta",title:"Тип клиента"},{type:a.Text,isVisible:function(e){return!e.contact_id},outlined:!0,title:"Ф.И.О",isInvalid:function(e){return e.fio?null:"Обязательно к заполнению"},description:"Фамилия Имя Отчество контакта",name:"fio"},{type:a.Text,isVisible:function(e){return!e.contact_id},outlined:!0,title:"Телефон",isInvalid:function(e){return e.telefon?null:"Обязательно к заполнению"},description:"Телефон контакта",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon"},{type:a.Combo,isVisible:function(e){return!e.contact_id},outlined:!0,name:"tip_klienta",title:"Тип клиента",itemList:["Собственник","Доверенное лицо","Риелтор","Информатор","Застройщик"]}]}],Cv=[{type:et.Link,action:"list-action",label:"Список контактов"},{type:et.Link,action:"list-action",label:"Создание контакта"}],Fv=$l()((function(e){return{root:{position:"relative",overflow:"hidden"},header:{position:"absolute",top:0,left:0,height:65,paddingLeft:e.spacing(2),paddingRight:e.spacing(2),background:"whitesmoke",width:"100%"},content:{minHeight:300},adjust:{paddingBottom:65},listItemBackground:{background:je(e.palette.primary.main,.05)}}})),Lv=Me.createLoader(12),Iv="real-estate__headerRoot",Mv=[{type:et.Link,isVisible:function(){return!!Fl.routerService.previousPath},action:"list-action",label:Se(Ge,{sx:{display:"block"}})},{type:et.Link,action:"list-action",label:"Контакты"},{type:et.Link,action:"list-action",label:"История контакта"}],jv=[{type:dt.Compute,sortable:!1,field:"index",headerName:"Номер",element:function(e){var t=e.index;return Se(Ft,{content:t})},width:function(){return 100}},{type:dt.Compute,field:"fio",compute:function(e){return e.fio||""},headerName:"Ф.И.О.",width:function(){return 125}},{type:dt.Compute,isVisible:function(e){return e.payload.permissions.hasPreviewModeDisabled},field:"phone",serialize:(Jy=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.permissionRequestService.getOwnerContactPermissionByContactId(n.id);case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",n.telefon||"");case 4:return e.abrupt("return","Скрыто");case 5:case"end":return e.stop()}}),e)}))),function(e){return Jy.apply(this,arguments)}),element:function(e){return Se(vt,{payload:e.id,condition:function(e){return Fl.permissionRequestService.getOwnerContactPermissionByContactId(e)},Loading:"Загрузка",Else:"Скрыто",children:e.telefon||""})},headerName:"Телефон",width:function(){return 125}},{type:dt.Compute,field:"tip_klienta",compute:function(e){return e.tip_klienta||""},headerName:"Тип клиента",width:function(){return 160}},{type:dt.Compute,field:"status_klienta",compute:function(e){return e.status_klienta||""},headerName:"Статус клиента",width:function(){return 180}},{type:dt.Compute,sortable:!1,field:"status",headerName:"Статус сделки",compute:(Xy=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,e.next=3,Fl.dealViewService.readStatusByContactId(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),function(e){return Xy.apply(this,arguments)}),width:function(){return 150}},{type:dt.Action,headerName:"Действие",sortable:!1,width:function(){return 100}}],Bv=[{type:Ot.Add,isDisabled:function(e,t){return!t.permissions.hasContactCreatePermission},label:"Создать"},{type:Ot.Menu,options:[{action:"add-action",isDisabled:function(e,t){return!t.permissions.hasContactCreatePermission}},{action:"update-now"},{action:"resort-action"},{action:"drop-filters"},{action:"excel-action",isVisible:function(e,t){return t.permissions.hasOfficeManagerFlagPermission},label:"Скачать лист Excel",icon:Ht}]}],Dv=[{label:"Создать копию",action:"copy-action",icon:Zt},{label:"Удалить",action:"remove-action",icon:Nt}],Rv=function(){return window.innerHeight-100},qv=[{type:et.Link,isVisible:function(){return!!Fl.routerService.previousPath},action:"list-action",label:Se(Ge,{sx:{display:"block"}})},{type:et.Link,action:"list-action",label:"Контакты"},{type:et.Link,action:"list-action",label:"Задачи контакта"}],Pv=function(e){return function(){return Se(Me,{handler:(n=r(t().mark((function n(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Fl.appwriteService.isAuthorized){t.next=3;break}return Fl.routerService.push("/login_page"),t.abrupt("return");case 3:return t.next=5,e();case 5:case"end":return t.stop()}}),n)}))),function(){return n.apply(this,arguments)}),height:"calc(100vh - 80px)"});var n}},Ev=[{type:et.Link,isVisible:function(){return!!Fl.routerService.previousPath},action:"list-action",label:Se(_r,{sx:{display:"block"}})},{type:et.Link,action:"list-action",label:"Контакты"},{type:et.Link,action:"list-action",label:"Объекты контакта"}],Nv=function(){return window.innerHeight-220},Ov=[{type:et.Link,isVisible:function(){return!!Fl.routerService.previousPath},action:"list-action",label:Se(_r,{sx:{display:"block"}})},{type:et.Link,action:"list-action",label:"Контакты"},{type:et.Link,action:"list-action",label:"Заявки контакта"}],Uv=function(){return window.innerHeight-220},Hv="real-estate__headerRoot",Wv=[{type:et.Link,isVisible:function(){return!!Fl.routerService.previousPath},action:"list-action",label:Se(Ge,{sx:{display:"block"}})},{type:et.Link,action:"list-action",label:"Контакты"},{type:et.Link,action:"list-action",label:"Просмотр служебных комментариев"}],$v=[{id:"list",element:function(e){var n=e.payload,i=_f({payload:n}),a=Be(Fl.contactViewService.reloadSubject),s=sr(Fl.routerService.locationState,{fallback:Fl.errorService.handleGlobalError}).listProps,u=Gp(),l=function(){var e=r(t().mark((function e(n,r){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Fl.layoutService.setAppbarLoader(!0),e.prev=1,"remove-action"!==n){e.next=6;break}return e.next=5,Fl.contactViewService.remove(r.id);case 5:a.next();case 6:if("copy-action"!==n){e.next=13;break}return e.next=9,Fl.contactViewService.read(r.id);case 9:return i=e.sent,e.next=12,Fl.contactViewService.create(i);case 12:a.next();case 13:return e.prev=13,Fl.layoutService.setAppbarLoader(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,,13,16]])})));return function(t,n){return e.apply(this,arguments)}}(),c=function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add-action"===r&&Fl.routerService.push("/contact/create"),"excel-action"!==r){e.next=4;break}return e.next=4,np({query:s,handler:u,payload:n,columns:jv});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.featureService.hasFeature("officemanager");case 2:if(!e.sent){e.next=5;break}return i(n),e.abrupt("return");case 5:Fl.routerService.push("/contact_view/".concat(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.permissionService.getPermissions();case 2:e.sent.hasContactViewPermission&&d(n.id);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Se(Ae,{children:Se(Vn,o({withSearch:!0,withSingleSort:!0,noInitialFilters:!0,fetchDebounce:da,reloadSubject:a,title:"Контакты",filterLabel:"Фильтры",heightRequest:Rv,AfterOperationList:Kp,rowActions:Dv,actions:Bv,columns:jv,handler:u,filters:Rp,onRowAction:l,onRowClick:p,onAction:c,selectionMode:ht.Multiple,payload:n},s))})},isActive:function(e){return Dl(["/contact"],e)},isAvailable:function(){return!1}},{id:"create",element:function(e){var n=e.payload,a=_f({payload:n}),s=Yn(),u=s.elementRef,l=s.size,d=i(we.useState((function(){return{activeStep:0,contact_id:null,fio:"",telefon:"",tip_klienta:null}})),2),p=d[0],m=d[1],f=i(we.useState([]),2),h=f[0],y=f[1],v=i(we.useState(!1),2),b=v[0],_=v[1],k=i(we.useState(!1),2),g=k[0],x=k[1],w=we.useMemo((function(){return new Date(Date.now()+1e4)}),[p.activeStep]);we.useEffect((function(){x(!1)}),[p.activeStep]);var S=function(e){return m((function(t){return o(o({},t),{},{activeStep:e})}))},z=p.activeStep,V=Fv().classes,A=nt({history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),T=A.handleLoadStart,C=A.handleLoadEnd,F=A.loading,L=A.unblock;Gt(p);var I=Ve(r(t().mark((function e(){var n,r,i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=p.contact_id,r=p.fio,i=p.telefon,a=p.tip_klienta,n){e.next=7;break}return e.next=5,Fl.contactViewService.create({fio:r,telefon:i,tip_klienta:a,"data-sozdaniya_klienta":Kn.currentDate()});case 5:o=e.sent,n=o.$id;case 7:L(),Fl.routerService.push("/contact_view/".concat(n)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),Fl.alertService.notify(Xs(e.t0));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),{onLoadStart:T,onLoadEnd:C}).execute,M=function(){var e=r(t().mark((function e(){var n,r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_(!0),p.fio||p.telefon){e.next=3;break}return e.abrupt("return");case 3:if(0!==z){e.next=11;break}return e.next=6,Fl.contactRequestService.findDuplicates(p.telefon);case 6:n=e.sent,r=n.rows,i=n.total,y(r),S(0===i?2:1);case 11:if(1===z&&S(2),2!==z){e.next=15;break}return e.next=15,I();case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=!1;return 1===z&&(e=e||!g),e=(e=e||F)||3===z};return Se(Qn,{children:[Se(ot,{items:Cv}),Se(fn,{className:V.root,children:[Se(Xn,{className:V.header,activeStep:z,children:[Se(Jn,{completed:z>0,children:Se(Zn,{children:"Первичные данные"})},0),Se(Jn,{completed:z>1,children:Se(Zn,{children:"Поиск дубликатов"})},1),Se(Jn,{completed:z>2,children:Se(Zn,{children:"Создание контакта"})},2)]}),Se("div",{className:V.adjust}),Se(qe,{ref:u,className:V.content,children:0===z?Se(st,{sx:{pl:1,pr:1,pt:2,pb:3},handler:p,onChange:m,dirty:b,fields:Tv}):1===z?Se(nr,{sx:{height:l.height},component:Pt,minRowHeight:54,children:h.map((function(e,n){var i,s=e.fio,u=(e.telefon,e.$id),l=e.tip_klienta,d=e.index,f=e.system_created_by;return Se(Ue,{disableRipple:!0,className:Pe(c({},V.listItemBackground,n%2==1)),onClick:function(){m((function(e){return o(o({},e),{},{contact_id:u,activeStep:2})}))},dense:!0,children:[Se(er,{children:Se(tr,{edge:"start",checked:p.contact_id===u,sx:{marginLeft:"0 !important"},disableRipple:!0})}),Se(Ct,{primary:s,secondary:Se(Ne,{Loader:Lv,children:(i=r(t().mark((function e(){var n,r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.userViewService.tryRead(f);case 2:return n=e.sent,r=n?"Создал "+[n.last_name,n.first_name,n.middle_name].filter((function(e){return e})).join(" "):"",e.abrupt("return",["№".concat(d),r,l].filter((function(e){return e})).join(", "));case 5:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})})}),Se(en,{variant:"outlined",onClick:function(e){e.preventDefault(),e.stopPropagation(),a(u)},sx:{ml:3},children:"Показать контакт"})]},n)}))}):2===z?Se(st,{sx:{pl:1,pr:1,pt:2,pb:3},handler:p,dirty:b,fields:Tv}):null}),Se(Ke,{sx:{pl:1,pr:1,pb:1},justifyContent:"space-between",flexDirection:"row",children:[Se(xt,{disabled:F||0===z,fallback:Fl.errorService.handleGlobalError,onClick:function(){m((function(e){return o(o({},e),{},{contact_id:null})})),0===h.length?S(0):S(z-1)},sx:{mt:1},variant:"contained",onLoadStart:T,onLoadEnd:C,children:"Назад"}),Se(xt,1===z?{disabled:j(),fallback:Fl.errorService.handleGlobalError,onClick:M,sx:{mt:1},variant:"contained",onLoadStart:T,onLoadEnd:C,children:Se(rr,{expireAt:w,onExpire:function(){return x(!0)},children:"Не вижу дубликат"})}:2===z?{disabled:j(),fallback:Fl.errorService.handleGlobalError,onClick:M,sx:{mt:1},variant:"contained",onLoadStart:T,onLoadEnd:C,children:"Перейти"}:{disabled:j(),fallback:Fl.errorService.handleGlobalError,onClick:M,sx:{mt:1},variant:"contained",onLoadStart:T,onLoadEnd:C,children:"Далее"})]})]})]})},isActive:function(e){return Dl(["/contact/create"],e)},isAvailable:function(){return!1}},{id:"contact",element:function(e){e.params;var t=e.payload,n=e.formState,r=e.beginSave,i=e.onChange,a=e.data,s=at(a);return Se(Ae,{children:[Se(ot,{items:xv,onAction:function(e){"list-action"===e&&Fl.routerService.back("/contact"),"save-action"===e&&r()},payload:n}),Se(jl,{}),Se(gv,{mode:t.menuMode,payload:t,children:[Se(st,{changeSubject:s,features:function(){return o(o({},t.permissions),{},{withBottomSaveButton:!0})},handler:function(){return a},payload:function(){return o(o({},t),{},{beginSave:r})},context:n,fields:yh,onChange:i}),Se(lt,{})]})]})},isActive:function(e){return Dl(["/contact_edit/:id"],e)}},{id:"contact",element:function(e){var n,i=e.formState,a=e.payload,s=e.params.id,u=df({payload:a}),l=pn({columns:Sd,storageKey:"apartment_columns"}).columns,c=we.useMemo((function(){return l.filter((function(e){return e.type!==dt.Action}))}),[l]);return Se(Ae,{children:[Se(ot,{items:Ev,onAction:function(e){"list-action"===e&&Fl.routerService.back("/apartment")},payload:i}),Se(jl,{}),Se(zv,{mode:a.menuMode,payload:a,children:Se(Vn,{columns:c,handler:(n=r(t().mark((function e(n){var r,i,a,u,l=arguments;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=l.length,a=new Array(i>1?i-1:0),u=1;u<i;u++)a[u-1]=l[u];return e.next=3,(r=Fl.apartmentViewService).paginate.apply(r,[o(o({},n),{},{contact_id:s})].concat(a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)}),onRowClick:function(e){return u(e.id)},onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},heightRequest:Nv,payload:a})})]})},isActive:function(e){return Dl(["/contact_view/:id/objects"],e)}},{id:"contact",element:function(e){var n,i=e.formState,a=e.payload,s=e.params.id,u=xm({payload:a}),l=pn({columns:ip,storageKey:"bid_columns"}).columns,c=we.useMemo((function(){return l.filter((function(e){return e.type!==dt.Action}))}),[l]);return Se(Ae,{children:[Se(ot,{items:Ov,onAction:function(e){"list-action"===e&&Fl.routerService.back("/bid")},payload:i}),Se(jl,{}),Se(zv,{mode:a.menuMode,payload:a,children:Se(Vn,{columns:c,handler:(n=r(t().mark((function e(n){var r,i,a,u,l=arguments;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=l.length,a=new Array(i>1?i-1:0),u=1;u<i;u++)a[u-1]=l[u];return e.next=3,(r=Fl.bidViewService).paginate.apply(r,[o(o({},n),{},{contact_id:s})].concat(a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)}),onRowClick:function(e){return u(e.id)},onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},heightRequest:Uv,payload:a})})]})},isActive:function(e){return Dl(["/contact_view/:id/bids"],e)}},{id:"contact",element:Pv((function(){var e=Il("id");Fl.routerService.push("/contact_view/".concat(e,"/contact"))})),isActive:function(e){return Dl(["/contact_view/:id"],e)}},{id:"contact",element:function(e){var n,i,a=e.params.id,o=void 0===a?"create":a,s=e.formState,u=e.payload,l=e.data,c=at(l),d=function(e){var n=e.contactId,i=nt({history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),a=i.handleLoadStart,o=i.handleLoadEnd,s=Ve(r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.featureService.hasFeature("superadmin");case 2:if(!e.sent){e.next=6;break}return e.next=5,Fl.cleanupService.removeContact(n);case 5:Fl.routerService.push("/contact");case 6:case"end":return e.stop()}}),e)}))),{onLoadStart:a,onLoadEnd:o,fallback:Fl.errorService.handleGlobalError}).execute,u=jt({title:"Вы уверены?",msg:"Удаление контакта сотрет соответствующие записи в задачах, объектах недвижимости, заявках, сделках. Продолжить?"});return function(){return u().then((function(e){e&&s()}))}}({contactId:o}),p=rt({AfterTitle:function(e){var t=e.onClose;return Se(We,{size:"small",onClick:t,children:Se(it,{})})},fields:yh,payload:u,features:u.permissions,outlinePaper:!0,handler:(i=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.contactViewService.tryRead(o);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)}),fullScreen:!0,title:"Редактировать",onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},onSubmit:(n=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!0,e.prev=1,!n){e.next=10;break}return e.t0=Fl.contactViewService,e.t1=o,e.next=7,Fl.polishService.polishContact(n,u);case 7:return e.t2=e.sent,e.next=10,e.t0.update.call(e.t0,e.t1,e.t2);case 10:e.next=18;break;case 12:return e.prev=12,e.t3=e.catch(1),r=!1,i=Xs(e.t3),Fl.alertService.notify(i),e.abrupt("return",!1);case 18:return e.prev=18,e.abrupt("return",r);case 21:case"end":return e.stop()}}),e,null,[[1,12,18,21]])}))),function(e){return n.apply(this,arguments)}),submitLabel:"Сохранить"}),m=p.pickData,f=p.render;return Se(Ae,{children:[Se(ot,{items:Vv,onAction:function(e){"list-action"===e&&Fl.routerService.back("/contact"),"edit-action"===e&&m(),"superadmin-remove-action"===e&&d()},actions:Av,payload:s}),Se(jl,{}),Se(zv,{mode:u.menuMode,payload:u,children:[Se(st,{readonly:!0,dirty:"create"===o,handler:function(){return l},fields:Wc,features:u.permissions,changeSubject:c,payload:u}),Se(lt,{}),f()]})]})},isActive:function(e){return Dl(["/contact_view/:id/contact"],e)}},{id:"service_comment",element:function(e){var n=e.payload,a=e.formState,o=i(we.useState([]),2),s=o[0],u=o[1],l=Yn({target:document.body,selector:"main",compute:function(e){var t,r=e.height,i=e.width;if(n.menuMode===H.Tabs){var a=document.querySelector(".".concat(ar));r-=(null==a?void 0:a.offsetHeight)||0}return r-=(null===(t=document.querySelector(".".concat(Hv)))||void 0===t?void 0:t.offsetHeight)||0,r-=50,{width:i,height:r=Math.min(window.innerHeight-50,r)}}}).size,c=Ve(r(t().mark((function e(){var n,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Il("id"),e.next=3,Fl.serviceCommentViewService.findAllByContactId(n);case 3:return i=e.sent,e.t0=u,e.next=7,Promise.all(i.map(function(){var e=r(t().mark((function e(n){var r,i,a,o,s,u,l,c;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.$id,i=n.user_id,a=n.file_id,o=n.comment,s=n.$createdAt,e.next=3,Fl.userViewService.tryRead(i);case 3:if(u=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:if(!u.avatar){e.next=12;break}return e.next=9,Fl.appwriteService.getImageURL(u.avatar);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0="";case 13:if(l=e.t0,!a){e.next=20;break}return e.next=17,Fl.appwriteService.tryReadFileName(a);case 17:e.t1=e.sent,e.next=21;break;case 20:e.t1="";case 21:return c=e.t1,e.abrupt("return",{id:r,message:o,fileId:a,userId:i,displayName:[u.last_name,u.first_name,u.middle_name,f(s).format("DD.MM.YYYY / HH:mm")].join(" "),fileName:c,avatar:l});case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).filter((function(e){return!!e})).reverse());case 7:e.t1=e.sent,(0,e.t0)(e.t1);case 9:case"end":return e.stop()}}),e)}))),{fallback:Fl.errorService.handleGlobalError,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),d=c.execute;we.useEffect((function(){d()}),[]),we.useEffect((function(){return Fl.serviceCommentViewService.createSubject.subscribe((function(e){var t=Il("id");e.contact_id===t&&d()}))}),[]);var p=function(){var e=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Il("id"),i=Fl.appwriteService.currentUser.$id,e.next=4,Fl.serviceCommentViewService.create({user_id:i,comment:n,apartment_id:null,bid_id:null,contact_id:r,file_id:null});case 4:return e.next=6,d();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=r(t().mark((function e(n,r){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Il("id"),a=Fl.appwriteService.currentUser.$id,e.next=4,Fl.serviceCommentViewService.create({user_id:a,comment:n,apartment_id:null,bid_id:null,contact_id:i,file_id:r});case 4:return e.next=6,d();case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Se(Ae,{children:[Se("div",{className:Hv,children:[Se(ot,{payload:a,items:Wv,onAction:function(e){"list-action"===e&&Fl.routerService.back("/contact")}}),Se(jl,{})]}),Se(zv,{payload:n,mode:n.menuMode,children:Se(Mc,{payload:n,style:{height:l.height},messages:s,onText:p,onFile:m})})]})},isActive:function(e){return Dl(["/contact_view/:id/service_comment"],e)}},{id:"tasks",element:function(e){var t=e.formState,n=e.payload,r=e.params.id;return Se(Ae,{children:[Se("div",{className:"real-estate__headerRoot",children:[Se(ot,{payload:t,items:qv,onAction:function(e){"list-action"===e&&Fl.routerService.back("/apartment")}}),Se(jl,{})]}),Se(zv,{payload:n,mode:n.menuMode,children:Se(ry,{withTransparentHeader:!0,contactId:r,payload:n})})]})},isActive:function(e){return Dl(["/contact_view/:id/tasks"],e)}},{id:"history",element:function(e){var n=e.formState,a=e.payload,o=i(we.useState([]),2),s=o[0],u=o[1],l=Yn({target:document.body,selector:"main",compute:function(e){var t,n=e.height,r=e.width;if(a.menuMode===H.Tabs){var i=document.querySelector(".".concat(ar));n-=(null==i?void 0:i.offsetHeight)||0}return n-=(null===(t=document.querySelector(".".concat(Iv)))||void 0===t?void 0:t.offsetHeight)||0,n-=50,{width:r,height:n=Math.min(window.innerHeight-50,n)}}}).size,c=Ve(function(){var e=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return r=Il("id"),e.next=4,Fl.dealHistoryViewService.findAllByContactId(r);case 4:i=e.sent,u(i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{fallback:Fl.errorService.handleGlobalError,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),d=c.loading,p=c.execute;return Se(Ae,{children:[Se("div",{className:Iv,children:[Se(ot,{payload:n,items:Mv,onAction:function(e){"list-action"===e&&Fl.routerService.back("/apartment")}}),Se(jl,{})]}),Se(zv,{payload:a,mode:a.menuMode,children:Se(nr,{sx:{height:l.height},minHeight:72,loading:d,onDataRequest:function(e){p(e)},children:Se(Ke,{spacing:1,children:s.map((function(e){return Se(Ff,{loading:d,status:"info",item:e},e.$id)}))})})})]})},isActive:function(e){return Dl(["/contact_view/:id/history"],e)}}],Gv=function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("create"!==n){e.next=2;break}return e.abrupt("return",{"data-sozdaniya_klienta":Kn.currentDate()});case 2:return e.next=4,Fl.contactViewService.tryRead(n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Yv=function(e){var n,a=e.id,o=void 0===a?"create":a,s=function(){var e=r(t().mark((function e(n,r,i){var a,s,u,l,c,d;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.afterSave,s=!0,e.prev=2,e.next=5,Fl.polishService.polishContact(S.get(n,"contact")||{},r);case 5:if(u=e.sent,"create"!==o){e.next=16;break}return e.next=9,Fl.contactViewService.create(u);case 9:return l=e.sent,c=l.id,e.next=13,a();case 13:Fl.routerService.push("/contact_edit/".concat(c)),e.next=18;break;case 16:return e.next=18,Fl.contactViewService.update(o,u);case 18:if(!Fl.routerService.hasViewRedirectFlag()){e.next=22;break}return e.next=21,a();case 21:Fl.routerService.push("/contact_view/".concat(o));case 22:Fl.alertService.notify("Изменения сохранены"),e.next=30;break;case 25:e.prev=25,e.t0=e.catch(2),s=!1,d=Xs(e.t0),Fl.alertService.notify(d);case 30:return e.prev=30,e.abrupt("return",s);case 33:case"end":return e.stop()}}),e,null,[[2,25,30,33]])})));return function(t,n,r){return e.apply(this,arguments)}}(),u=function(){var e=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gv(o);case 2:return e.t0=e.sent,e.next=5,Fl.settingsViewService.getMasterDetailMode();case 5:return e.t1=e.sent,e.next=8,Fl.permissionService.getPermissions();case 8:return e.t2=e.sent,e.next=11,Fl.featureService.getAccessLevel();case 11:return e.t3=e.sent,e.abrupt("return",[e.t0,e.t1,e.t2,e.t3]);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=Be();return we.useEffect((function(){return Fl.contactViewService.updateSubject.subscribe((function(e){var t=i(e,2),n=t[0],r=t[1],a=Il("id");a&&a===n&&l.next(["contact",r])}))}),[]),Se(br,{state:u,reloadSubject:Fl.layoutService.reloadOutletSubject,fallback:Fl.errorService.handleGlobalError,children:(n=r(t().mark((function e(n){var r,a,u,c,d;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i(n,4),a=r[0],u=r[1],c=r[2],d=r[3],e.abrupt("return",Se(ur,{changeSubject:l,history:Fl.routerService,waitForChangesDelay:pa,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},routes:$v,params:{id:o},initialData:{contact:a},payload:function(){return{menuMode:u,permissions:c,accessLevel:d}},onChange:console.log,onSubmit:s}));case 2:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})})},Kv=$l()((function(e){return{container:{padding:"16px",height:"100%"},icoContainer:{display:"flex",alignContent:"center",justifyContent:"center",width:"100%",marginBottom:"12px"},ico:{color:e.palette.text.primary,width:"48px",height:"48px"},btn:{borderRadius:"100px",marginLeft:"10%",marginRight:"10%",maxWidth:"225px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:"#000000DE",background:"#E0E0E0",fontWeight:"500",width:"100%","&:hover":{color:"white"}},content:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",height:"100%"}}})),Xv=function(e){var t=e.text,n=e.iconNumber,r=e.onClick,i=Kv().classes,a=[Se(kr,{className:i.ico}),Se(gr,{className:i.ico}),Se(xr,{className:i.ico})];return Se("div",{className:i.container,children:Se(qe,{className:i.content,children:[Se("div",{className:i.icoContainer,children:Se(bt,{onClick:function(){r&&r()},disableRipple:!0,children:n?a[n-1]:Se(wr,{})})}),Se(xt,{onClick:r,endIcon:Se(Sr,{}),className:i.btn,variant:"contained",children:t})]})})},Jv=function(){var e=f.localeData(),t=e.weekdays(),n=e.weekdaysShort(),r=f.Ls[f.locale()].weekStart,i=void 0===r?0:r,a=n||t;return[].concat(p(a.slice(i,7)),p(a.slice(0,i))).map((function(e){return"".concat(e.slice(0,1).toUpperCase()).concat(e.slice(1,3))}))},Zv=i(zr("dashboard_target"),2),Qv=Zv[0],eb=Zv[1],tb=$l()((function(e){return{switchHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",margin:"5px 0 10px"},daysHeader:{display:"flex",justifyContent:"stretch",alignItems:"stretch",height:"35px"},monthName:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"14px",button:{padding:"5px",color:e.palette.text.primary}},dayLabel:{flex:1,textAlign:"center",opacity:.5},dayLabelStart:{textAlign:"center"},dayLabelEnd:{textAlign:"center"},noBorder:{border:"0"}}})),nb=function(e){var t=e.currentMonth,n=e.onMonthChange,r=e.onHeaderMonthClick,a=e.onHeaderYearClick,o=i(eb(),2),s=o[0],u=o[1],l=tb().classes;return Se("div",{children:[Se("div",{className:l.switchHeader,children:[Se(We,{onClick:function(){return n(t.clone().subtract(1,"months"))},children:Se(_r,{})}),Se(Je,{className:l.monthName,children:[Se(It,{title:"all"===s?"Показаны задачи всех риелторов":"Показаны только мои задачи",children:Se(en,{sx:{fontWeight:"bold"},onClick:function(){u("all"===s?"mine":"all")},className:Pe(l.noBorder),children:"all"===s?"Все":"Мои"})}),Se(en,{onClick:r,className:Pe(l.noBorder),children:t.format("MMMM")}),Se(en,{onClick:a,className:Pe(l.noBorder),children:t.format("YYYY")})]}),Se(We,{className:l.noBorder,onClick:function(){return n(t.clone().add(1,"months"))},children:Se(Vr,{})})]}),Se("div",{className:l.daysHeader,children:Jv().map((function(e,t){var n;return Se(Je,{className:Pe(l.dayLabel,(n={},c(n,l.dayLabelStart,0===t),c(n,l.dayLabelEnd,6===t),n)),children:e},t)}))})]})},rb=i(Fe(),2),ib=rb[0],ab=rb[1],ob=$l()((function(e){return{listItemAccient:{background:je(e.palette.getContrastText(e.palette.background.paper),.018)}}})),sb=function(e){e.onChange;var n=e.day,a=ob().classes,s=i(ab(),1)[0],u=i(we.useState([]),2),l=u[0],d=u[1],p=i(we.useState(null),2),m=p[0],h=p[1],y=l.length,v=Ve(r(t().mark((function e(){var r,i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d([]),s){e.next=3;break}return e.abrupt("return");case 3:return r=To(n),e.next=6,s.promise;case 6:i=e.sent,a=i.filter((function(e){return e.moment_stamp===r})).filter((function(e){return!e.is_complete})),d(a);case 9:case"end":return e.stop()}}),e)}))),{onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},fallback:Fl.errorService.handleGlobalError}).execute;we.useEffect((function(){v()}),[s]);return Se(Ae,{children:[Se(en,{onClick:function(e){var t=e.currentTarget;return h(t)},sx:o({},n.isToday()&&{background:"#132e5511","&:hover":{background:"#132e5533"}}),children:Se(wt,{sx:{flexDirection:"column",gap:"5px"},children:[n.format("DD"),!!y&&Se(Ar,{sx:{mt:"-2.5px"},side:5,color:n.isBefore(f().add(-1,"days"))?"red":y>3?"orange":"green"})]})}),Se(Tr,{open:!!m,anchorEl:m,onClose:function(){return h(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},children:0===l.length?Se(Je,{sx:{p:2},children:"На этот день задач не назначено"}):Se(qe,{sx:{height:356,width:356},children:Se(Pt,{disablePadding:!0,subheader:Se(Cr,{component:Je,sx:{fontWeight:"bold"},children:["Задачи на ",n.format("DD/MM/YYYY")]}),children:Se(nr,{sx:{height:308,width:356},children:l.map((function(e,t){var n=e.id,r=e.title,i=e.contact_fio,o=e.to_user_fio,s=e.type,u=e.is_call,l=e.is_meet;return Se(Ue,{className:Pe(c({},a.listItemAccient,t%2==0)),onClick:function(){return Fl.routerService.push("/task")},children:Se(Ct,{primary:"Внутренняя"===s?"Задача: ".concat(r):"Контакт: ".concat(i," ").concat([u&&"Звонок",l&&"Встреча"].filter((function(e){return e})).join(", ")),secondary:"Ответственный: ".concat(o)})},n)}))})})})})]})},ub=$l()((function(e){return{container:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},calendar:{flex:1,display:"grid",background:e.palette.background.paper,gridTemplateColumns:"repeat(7, 2fr)",gridRowGap:"2px"},inactiveDay:{opacity:.5,pointerEvents:"none"},day:{"& button":{border:"0",color:e.palette.text.primary}},cell:{display:"flex",alignItems:"center",justifyContent:"center","&:nth-of-type(7n)":{justifyContent:'"flex-end"'},"&:nth-of-type(7n + 1)":{justifyContent:'"flex-start"'}}}})),lb=function(e){var n=e.onChange,a=e.onHeaderMonthClick,o=e.onHeaderYearClick,s=e.minDate,u=e.maxDate,l=e.date,d=i(eb(),1)[0],p=i(we.useState(l.clone().startOf("month")),2),m=p[0],f=p[1],h=i(ab(),2)[1];we.useEffect((function(){var e=To(m.clone().startOf("week")),n=To(m.clone().endOf("month").endOf("week")),i=function(){var i=r(t().mark((function r(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("all"!==d){t.next=4;break}return t.next=3,Fl.dashboardRequestService.getTasksByStamp(e,n);case 3:case 6:return t.abrupt("return",t.sent);case 4:return t.next=6,Fl.dashboardRequestService.getMyTasksByStamp(e,n);case 7:case"end":return t.stop()}}),r)})));return function(){return i.apply(this,arguments)}}();h({fromStamp:e,toStamp:n,target:d,promise:i()})}),[m,d]);var y=we.useCallback((function(e){var t=e.clone().endOf("week"),r=m.get("month");return function(e,t){for(var n=t.diff(e,"days")+1,r=[],i=0;i!==n;i++)r.push(e.clone().add(i,"days"));return r}(e,t).map((function(e){var t=l.isSame(e,"date"),i=e.get("month")!==r||u.isBefore(e)||s.isAfter(e);return Se("div",{className:Pe(b.day,b.cell,c({},b.inactiveDay,i)),children:Se(sb,{day:e,isActive:t,onChange:n})},e.toString())}))}),[m,l,u,s,n]),v=we.useCallback((function(){return function(e,t){for(var n=t.diff(e,"weeks")+1,r=[],i=0;i!==n;i++)r.push(e.clone().add(i,"weeks"));return r}(m.clone().startOf("week"),m.clone().endOf("month").endOf("week")).map((function(e){return Se(we.Fragment,{children:y(e)},"week-".concat(e.toString()))}))}),[m,y]),b=ub().classes;return Se("div",{className:b.container,children:[Se(nb,{currentMonth:m,onMonthChange:function(e){return f(e)},onHeaderMonthClick:a,onHeaderYearClick:o}),Se("div",{className:b.calendar,children:v()})]})},cb=$l()((function(e){return{container:{height:"100%",width:"100%",display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column"},stretch:{flex:1},disabled:{pointerEvents:"none",opacity:.5},monthLabel:{textAlign:"center"},noBorder:{border:"0"},arrows:{padding:"5px",color:e.palette.text.secondary},header:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"5px"},content:{flex:1,display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gridGap:"15px",button:{color:e.palette.text.primary}}}})),db=function(e){var t=e.date,n=e.minDate,r=e.maxDate,a=e.onChange;t.get("month");var o=i(we.useState(t.get("year")),2),s=o[0],u=o[1],l=function(){for(var e=[],t=f().startOf("year"),n=0;12!==n;n++)e.push(t.clone().add(n,"months"));return e}().map((function(e){return e.get("month")})),d=function(){var e=f.localeData(),t=e.months();return(e.monthsShort()||t).map((function(e){return"".concat(e.slice(0,1).toUpperCase()).concat(e.slice(1,3))}))}(),p=cb().classes,m=we.useCallback((function(e){var i=t.clone().set("month",e);i=i.set("year",s),t&&r.isBefore(t)?a(r.clone()):t&&n.isAfter(t)?a(n.clone()):a(i)}),[s,t,r,n,a]);return Se("div",{className:p.container,children:[Se("div",{className:p.header,children:[Se(We,{className:p.noBorder,onClick:function(){var e=s-1;e>=n.get("year")&&u(e)},children:Se(Fr,{className:p.arrows})}),Se(Je,{className:Pe(p.monthLabel,p.stretch),children:s}),Se(We,{className:p.noBorder,onClick:function(){var e=s+1;e<=r.get("year")&&u(e)},children:Se(Lr,{className:p.arrows})})]}),Se("div",{className:p.content,children:l.map((function(e){var t=r.get("month")<e&&r.get("year")===s||n.get("month")>e&&n.get("year")===s;return Se(en,{className:Pe(c({},p.disabled,t)),onClick:function(){return m(e)},children:d[e]},e)}))})]})},pb=$l()((function(e){return{container:{height:"100%",width:"100%",display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column"},stretch:{flex:1},yearLabel:{textAlign:"center"},noBorder:{border:"0"},arrows:{padding:"5px",border:"0",color:e.palette.text.disabled},header:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"5px"},content:{flex:1,display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gridGap:"15px",button:{color:e.palette.text.primary}}}})),mb=function(e){var t=e.date,n=e.minDate,r=e.maxDate,a=e.onChange,o=t.get("year"),s=we.useMemo((function(){return function(e,t){for(var n=t.diff(e,"years")+1,r=[],i=0;i!==n;i++)r.push(e.clone().add(i,"years"));return r}(n,r).map((function(e){return e.get("year")})).reduce((function(e,t){var n=i(e.slice().reverse(),1)[0];return n.push(t),12===n.length?[].concat(p(e),[[]]):e}),[[]])}),[n,r]),u=i(we.useState(s.findIndex((function(e){return e.includes(o)}))),2),l=u[0],c=u[1],d=we.useCallback((function(e){var i=t.clone().set("year",e);t&&r.isBefore(t)?a(r.clone()):t&&n.isAfter(t)?a(n.clone()):a(i)}),[t,r,n,a]),m=s[l]||[],f=pb().classes;return Se("div",{className:f.container,children:[Se("div",{className:f.header,children:[Se(en,{className:f.noBorder,variant:"text",onClick:function(){c(Math.max(l-1,0))},children:Se(Fr,{className:f.arrows})}),Se(Je,{className:Pe(f.yearLabel,f.stretch),children:t.format("YYYY")}),Se(en,{className:f.noBorder,variant:"text",onClick:function(){var e=l+1;e<s.length&&c(e)},children:Se(Lr,{className:f.arrows})})]}),Se("div",{className:f.content,children:m.map((function(e){return Se(en,{color:e===o?"primary":"secondary",onClick:function(){return d(e)},children:e},e)}))})]})},fb=$l()((function(e){return{container:{width:"100%",height:"100%",padding:e.spacing(1)}}})),hb=function(e){var t=e.date,n=void 0===t?f():t,r=e.minDate,a=void 0===r?f("1900-01-01"):r,o=e.maxDate,s=void 0===o?f("2100-01-01"):o,u=e.onChange,l=i(we.useState((function(){return n.isBefore(a)?a:n})),2),c=l[0],d=l[1],p=i(we.useState(!1),2),m=p[0],h=p[1],y=i(we.useState(!1),2),v=y[0],b=y[1],_=function(){return h(!0)},k=function(){return b(!0)},g=c.startOf("day"),x=function(e){h(!1),d(e.clone().set("year",e.get("year")))},w=function(e){b(!1),d(e.clone().set("month",e.get("month")))},S=fb().classes;return Se(fn,{className:S.container,children:m?Se(mb,{date:g,onChange:x,minDate:a,maxDate:s}):v?Se(db,{date:g,onChange:w,minDate:a,maxDate:s}):Se(ib,{initialState:null,children:Se(lb,{date:g,onChange:u,minDate:a,maxDate:s,onHeaderMonthClick:k,onHeaderYearClick:_})})})},yb=$l()({root:{position:"relative",height:"100%",width:"100%",overflow:"hidden"},container:{position:"absolute",top:0,left:0,height:"100%",width:"100%"}}),vb=function(e){var t=e.children,n=void 0===t?null:t,r=e.className,i=e.style,a=yb().classes;return Se(fn,{className:Pe(a.root,r),style:i,children:Se(qe,{className:a.container,children:n})})},bb=i(zr("dashboard_period"),2),_b=bb[0],kb=bb[1],gb=$l()((function(e){return{container:{padding:"24px",position:"relative"},text:{fontSize:"16px",p:{fontSize:"12px",margin:"0"}},heading:{display:"flex",gap:"12px",alignItems:"center",padding:"0 0 12px 0 ",marginBottom:"12px",borderBottom:"1px solid #0000001F",button:{color:e.palette.text.primary}},amount:{fontSize:"24px",textAlign:"right"},options:{position:"absolute",top:"4px",right:"4px"}}})),xb=[Se(Ir,{}),Se(Mr,{}),Se(jr,{}),Se(Br,{}),Se(Dr,{})],wb=[{label:"Все",action:"all-action",isVisible:function(e){return"all"===e.target},icon:Xt},{label:"Все",action:"all-action",isVisible:function(e){return"all"!==e.target},icon:Kt},{label:"Мои",action:"mine-action",isVisible:function(e){return"mine"===e.target},icon:Xt},{label:"Мои",action:"mine-action",isVisible:function(e){return"mine"!==e.target},icon:Kt},{divider:!0},{icon:Rr,action:"last-day",label:"За последний день",isVisible:function(e){return"last-day"===e.period}},{icon:qr,action:"last-day",label:"За последний день",isVisible:function(e){return"last-day"!==e.period}},{icon:Rr,action:"last-week",label:"За последнюю неделю",isVisible:function(e){return"last-week"===e.period}},{icon:qr,action:"last-week",label:"За последнюю неделю",isVisible:function(e){return"last-week"!==e.period}},{icon:Rr,action:"last-month",label:"За последний месяц",isVisible:function(e){return"last-month"===e.period}},{icon:qr,action:"last-month",label:"За последний месяц",isVisible:function(e){return"last-month"!==e.period}},{icon:Rr,action:"last-three-months",label:"За последние три месяца",isVisible:function(e){return"last-three-months"===e.period}},{icon:qr,action:"last-three-months",label:"За последние три месяца",isVisible:function(e){return"last-three-months"!==e.period}},{icon:Rr,action:"last-year",label:"За последний год",isVisible:function(e){return"last-year"===e.period}},{icon:qr,action:"last-year",label:"За последний год",isVisible:function(e){return"last-year"!==e.period}}],Sb=function(e){var t=e.text,n=e.amount,r=e.iconNumber,a=gb().classes,o=i(kb(),2),s=o[0],u=o[1],l=i(eb(),2),c=l[0],d=l[1];return Se("div",{className:a.container,children:[Se(Dt,{className:a.options,payload:{period:s,target:c},transparent:!0,options:wb,onAction:function(e){"all-action"!==e?"mine-action"!==e?u(e):d("mine"):d("all")}}),Se("div",{className:a.heading,children:[Se(We,{children:r?xb[r-1]:Se(wr,{})}),Se("div",{className:a.text,children:t})]}),Se("p",{className:a.amount,children:n})]})},zb=function(){return Se(Me,{size:24,sx:{justifyContent:"flex-end",width:"100%"}})},Vb=function(){return Se(Me,{size:24,sx:{justifyContent:"flex-end",width:"100%"}})},Ab=$l()((function(e){return{funnelContainer:{padding:"10px 24px",position:"relative",height:"100%"},funnelTitle:{fontSize:"16px"},center:{height:"calc(100% - 100px)",marginTop:"65px"},funnel:{maxWidth:"452px",margin:"0 auto",width:"100%",paddingTop:"10px",display:"flex",flexDirection:"column",alignItems:"center",marginTop:"-10%",gap:"10px"},row:{background:"#D9D9D9",clipPath:"polygon(0 0, 100% 0, 97% 100%, 3% 100%)",textAlign:"center",fontSize:"14px",height:"20px"},options:{position:"absolute",top:"4px",right:"4px"},listItemAccient:{background:je(e.palette.getContrastText(e.palette.background.paper),.018)}}})),Tb=[{label:"Все сделки",action:"all-action",isVisible:function(e){return"all"===e.target},icon:Xt},{label:"Все сделки",action:"all-action",isVisible:function(e){return"all"!==e.target},icon:Kt},{label:"Мои сделки",action:"mine-action",isVisible:function(e){return"mine"===e.target},icon:Xt},{label:"Мои сделки",action:"mine-action",isVisible:function(e){return"mine"!==e.target},icon:Kt},{divider:!0},{icon:Rr,action:"last-day",label:"За последний день",isVisible:function(e){return"last-day"===e.period}},{icon:qr,action:"last-day",label:"За последний день",isVisible:function(e){return"last-day"!==e.period}},{icon:Rr,action:"last-week",label:"За последнюю неделю",isVisible:function(e){return"last-week"===e.period}},{icon:qr,action:"last-week",label:"За последнюю неделю",isVisible:function(e){return"last-week"!==e.period}},{icon:Rr,action:"last-month",label:"За последний месяц",isVisible:function(e){return"last-month"===e.period}},{icon:qr,action:"last-month",label:"За последний месяц",isVisible:function(e){return"last-month"!==e.period}},{icon:Rr,action:"last-three-months",label:"За последние три месяца",isVisible:function(e){return"last-three-months"===e.period}},{icon:qr,action:"last-three-months",label:"За последние три месяца",isVisible:function(e){return"last-three-months"!==e.period}},{icon:Rr,action:"last-year",label:"За последний год",isVisible:function(e){return"last-year"===e.period}},{icon:qr,action:"last-year",label:"За последний год",isVisible:function(e){return"last-year"!==e.period}}],Cb=function(e){var t=e.valueMap,n=Ab().classes,r=i(kb(),2),a=r[0],o=r[1],s=i(eb(),2),u=s[0],l=s[1],c=i(we.useState(null),2),d=c[0],p=c[1],m=i(we.useState(null),2),f=m[0],h=m[1];return Se(qe,{className:n.funnelContainer,children:[Se(Dt,{className:n.options,payload:{period:a,target:u},transparent:!0,options:Tb,onAction:function(e){"all-action"!==e?"mine-action"!==e?o(e):l("mine"):l("all")}}),Se(qe,{className:n.funnelTitle,children:"Воронка Продаж"}),Se(wt,{className:n.center,children:Se(qe,{className:n.funnel,children:Eo.map((function(e,r){return Se(Ae,{children:[Se(Pr,{onClick:function(t){var n=t.currentTarget;p(n),h(e)},sx:{width:100-5*r+"%"},className:n.row,children:[e," ",t[e]]},e),Se(Tr,{open:f===e,anchorEl:d,onClose:function(){p(null),h(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},children:Se(Je,{sx:{p:2},children:[e," ",t[e]]})})]})}))})})]})},Fb=function(){return Se(Me,{sx:{height:"100%",width:"100%",marginTop:"-2.5%"}})},Lb=function(e){return e.map((function(e){return{value:e,sort:Math.random()}})).sort((function(e,t){return e.sort-t.sort})).map((function(e){return e.value}))},Ib=Object.values({pink:{400:"#ec407a",a100:"#ff80ab"},purple:{a100:"#ea80fc",a400:"#d500f9"},indigo:{a100:"#8c9eff",a400:"#3d5afe"},teal:{400:"#26a69a",a200:"#64ffda"},amber:{600:"#ffb300",a200:"#ffd740"},brown:{400:"#8d6e63",600:"#6d4c41"}}).flatMap((function(e){return Object.values(e)})),Mb=Lb(Ib.slice(5).reduce((function(e,t,n){return n%2==0?[].concat(p(e),[t]):[t].concat(p(e))}),Lb(Ib.slice(0,5)))),jb=function(e){return Mb[e%Mb.length]},Bb=function(){return Se(Me,{sx:{height:"100%",width:"100%"}})},Db=$l()({title:{fontSize:"16px",marginBottom:"18px"},container:{padding:"10px 24px",position:"relative",height:"100%"},options:{position:"absolute",top:"4px",right:"4px"},list:{display:"flex",flexDirection:"column",gap:"13px",margin:"0",padding:"0"},statRow:{display:"flex",width:"100%",alignItems:"center",gap:"7px",color:"00000099",fontSize:"14px",letterSpacing:"0.17px"},stats:{height:"4px",width:"200px"},managersList:{listStyle:"none",display:"flex",flexDirection:"column",fontSize:"12px",gap:"5px",padding:"0 !important"},managerRow:{display:"flex",alignItems:"center",gap:"8px"},managerDot:{width:"12px",height:"12px",background:"#000000DE",borderRadius:"100%"}}),Rb=[{label:"Все сделки",action:"all-action",isVisible:function(e){return"all"===e.target},icon:Xt},{label:"Все сделки",action:"all-action",isVisible:function(e){return"all"!==e.target},icon:Kt},{label:"Мои сделки",action:"mine-action",isVisible:function(e){return"mine"===e.target},icon:Xt},{label:"Мои сделки",action:"mine-action",isVisible:function(e){return"mine"!==e.target},icon:Kt},{divider:!0},{icon:Rr,action:"last-day",label:"За последний день",isVisible:function(e){return"last-day"===e.period}},{icon:qr,action:"last-day",label:"За последний день",isVisible:function(e){return"last-day"!==e.period}},{icon:Rr,action:"last-week",label:"За последнюю неделю",isVisible:function(e){return"last-week"===e.period}},{icon:qr,action:"last-week",label:"За последнюю неделю",isVisible:function(e){return"last-week"!==e.period}},{icon:Rr,action:"last-month",label:"За последний месяц",isVisible:function(e){return"last-month"===e.period}},{icon:qr,action:"last-month",label:"За последний месяц",isVisible:function(e){return"last-month"!==e.period}},{icon:Rr,action:"last-three-months",label:"За последние три месяца",isVisible:function(e){return"last-three-months"===e.period}},{icon:qr,action:"last-three-months",label:"За последние три месяца",isVisible:function(e){return"last-three-months"!==e.period}},{icon:Rr,action:"last-year",label:"За последний год",isVisible:function(e){return"last-year"===e.period}},{icon:qr,action:"last-year",label:"За последний год",isVisible:function(e){return"last-year"!==e.period}}],qb=function(){var e,n=Db().classes,a=i(kb(),2),o=a[0],s=a[1],u=i(eb(),2),l=u[0],c=u[1];return Se("div",{className:n.container,children:[Se(Dt,{className:n.options,payload:{period:o,target:l},transparent:!0,options:Rb,onAction:function(e){"all-action"!==e?"mine-action"!==e?s(e):c("mine"):c("all")}}),Se("div",{className:n.title,children:"Всего сделок"}),Se(Ne,{payload:o,deps:[l],Loader:Bb,children:(e=r(t().mark((function e(i){var a,o,s,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.userViewService.findAll();case 2:return a=e.sent,e.next=5,Promise.all(a.filter((function(e){var t=e.$id;return"mine"!==l||t===Fl.appwriteService.currentUser.$id})).map(function(){var e=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,e.next=3,Fl.dashboardRequestService.getDoneDealsByUserCount(i,r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return o=e.sent,s=o.map((function(e,t){var n,r,i,o,s=[null===(n=a[t])||void 0===n?void 0:n.last_name,null===(r=a[t])||void 0===r?void 0:r.first_name,null===(i=a[t])||void 0===i?void 0:i.middle_name].filter((function(e){return e})).join(" ");return{id:(null===(o=a[t])||void 0===o?void 0:o.id)||"unknown",label:s,color:jb(t),value:e}})).sort((function(e,t){var n=e.value;return t.value-n})),u=o.reduce((function(e,t){return Math.max(e,t)})),e.abrupt("return",Se(Er,{sx:{maxHeight:"calc(100% - 60px)",paddingLeft:"8px",overflowY:"auto"},children:[Se("div",{className:n.list,children:s.map((function(e){var t=e.id,r=e.value,i=e.color,a=Math.round(100/u*r);return Se("div",{className:n.statRow,children:[Se(Nr,{className:n.stats,sx:{backgroundColor:"#ccc","& .MuiLinearProgress-bar":{backgroundColor:i}},variant:"determinate",value:Math.max(a,3)}),r," Продаж"]},t)}))}),Se("ul",{className:n.managersList,children:s.map((function(e){var t=e.id,r=e.label,i=e.color;return Se("li",{className:n.managerRow,children:[Se(Ar,{color:i,side:12})," ",r]},t)}))})]}));case 9:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})})]})},Pb=function(){return Se(Me,{size:24,sx:{justifyContent:"flex-end",width:"100%"}})},Eb="7px",Nb=[{type:a.Group,columns:"14",tabletColumns:"12",phoneColumns:"12",fieldRightMargin:Eb,fieldBottomMargin:Eb,fields:[{type:a.Hero,height:"max(calc(100vh * 0.2), 150px)",columns:"3",tabletColumns:"6",phoneColumns:"12",bottom:Eb,right:Eb,child:{type:a.Component,element:function(){var e,n=i(kb(),1)[0],a=i(eb(),1)[0];return Se(vb,{style:{background:"#fff",boxShadow:"0px 10px 10px -4px #00000033"},children:Se(Sb,{amount:Se(Ne,{payload:n,deps:[a],Loader:Pb,children:(e=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("mine"!==a){e.next=4;break}return e.next=3,Fl.dashboardRequestService.getNewBidsCountByUserId(n,Fl.appwriteService.currentUser.$id);case 3:case 6:return e.abrupt("return",e.sent);case 4:return e.next=6,Fl.dashboardRequestService.getNewBidsCount(n);case 7:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})}),text:"Заявки",iconNumber:1})})}}},{type:a.Hero,columns:"3",tabletColumns:"6",phoneColumns:"12",right:Eb,bottom:Eb,height:"max(calc(100vh * 0.2), 150px)",child:{type:a.Component,element:function(){var e,n=i(kb(),1)[0],a=i(eb(),1)[0];return Se(vb,{style:{background:"#fff",boxShadow:"0px 10px 10px -4px #00000033"},children:Se(Sb,{amount:Se(Ne,{payload:n,deps:[a],Loader:zb,children:(e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("mine"!==a){e.next=4;break}return e.next=3,Fl.dashboardRequestService.getNewBidsCountByUserId(n,Fl.appwriteService.currentUser.$id);case 3:case 6:return e.abrupt("return",e.sent);case 4:return e.next=6,Fl.dashboardRequestService.getNewApartmentCount(n);case 7:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})}),text:"Объекты",iconNumber:2})})}}},{type:a.Hero,columns:"3",tabletColumns:"6",phoneColumns:"12",height:"max(calc(100vh * 0.2), 150px)",bottom:Eb,right:Eb,child:{type:a.Component,element:function(){var e,n=i(kb(),1)[0],a=i(eb(),1)[0];return Se(vb,{style:{background:"#fff",boxShadow:"0px 10px 10px -4px #00000033"},children:Se(Sb,{amount:Se(Ne,{payload:n,deps:[a],Loader:Vb,children:(e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("mine"!==a){e.next=4;break}return e.next=3,Fl.dashboardRequestService.getDealsInProgressCountUserId(n,Fl.appwriteService.currentUser.$id);case 3:case 6:return e.abrupt("return",e.sent);case 4:return e.next=6,Fl.dashboardRequestService.getDealsInProgressCount(n);case 7:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})}),text:"В сделке",iconNumber:3})})}}},{type:a.Hero,columns:"3",tabletColumns:"6",phoneColumns:"12",bottom:Eb,right:Eb,height:"max(calc(100vh * 0.2), 150px)",child:{type:a.Component,element:function(){return kb(),Se(vb,{style:{background:"#fff",boxShadow:"0px 10px 10px -4px #00000033",opacity:"0.5"},children:Se(Sb,{amount:null,text:Se(Ae,{children:["Прибыль ",Se("p",{children:"За месяц"})]}),iconNumber:4})})}}}]},{type:a.Group,columns:"12",tabletColumns:"12",phoneColumns:"12",fields:[{type:a.Hero,height:"min(calc(100vh * 0.5), 700px)",right:Eb,bottom:Eb,columns:"6",phoneColumns:"12",child:{type:a.Component,element:function(){return Se(vb,{style:{boxShadow:"0px 10px 10px -4px #00000033"},children:Se(hb,{onChange:console.log})})}}},{type:a.Hero,columns:"6",phoneColumns:"12",right:Eb,bottom:Eb,height:"min(calc(100vh * 0.5), 700px)",child:{type:a.Component,element:function(){var e,n=i(kb(),1)[0],a=i(eb(),1)[0];return Se(vb,{style:{background:"#fff",boxShadow:"0px 10px 10px -4px #00000033"},children:Se(Ne,{payload:n,deps:[a],Loader:Fb,children:(e=r(t().mark((function e(n){var i,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Eo.map(function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("all"!==a){e.next=6;break}return e.next=3,Fl.dashboardRequestService.getDealsByStatusCount(n,r);case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,Fl.dashboardRequestService.getDealsByStatusByUserCount(n,r,Fl.appwriteService.currentUser.$id);case 8:e.t0=e.sent;case 9:return e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return i=e.sent,s=Eo.reduce((function(e,t,n){return o(o({},e),{},c({},t,i[n]))}),{}),e.abrupt("return",Se(Cb,{valueMap:s}));case 5:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})})})}}}]},{type:a.Group,columns:"12",tabletColumns:"12",phoneColumns:"12",fields:[{type:a.Hero,minHeight:"min(calc(100vh * 0.5), 700px)",columns:"6",phoneColumns:"12",right:Eb,bottom:Eb,child:{type:a.Component,element:function(){return Se(vb,{style:{background:"#fff",boxShadow:"0px 10px 10px -4px #00000033"},children:Se(qb,{})})}}},{type:a.Group,columns:"6",phoneColumns:"12",fields:[{type:a.Hero,desktopColumns:"6",tabletColumns:"6",phoneColumns:"12",right:Eb,bottom:Eb,minHeight:"min(calc(100vh * 0.25), 350px)",child:{type:a.Component,element:function(){return Se(vb,{style:{background:"#fff",boxShadow:"0px 10px 10px -4px #00000033"},children:Se(Xv,{onClick:function(){return Fl.routerService.push("/apartment/create")},text:"Добавить Обьект",iconNumber:1})})}}},{type:a.Hero,desktopColumns:"6",tabletColumns:"6",phoneColumns:"12",right:Eb,bottom:Eb,minHeight:"min(calc(100vh * 0.25), 350px)",child:{type:a.Component,element:function(){return Se(vb,{style:{background:"#fff",boxShadow:"0px 10px 10px -4px #00000033"},children:Se(Xv,{onClick:function(){return Fl.routerService.push("/bid/create")},text:"Создать Заявку",iconNumber:2})})}}},{type:a.Hero,desktopColumns:"6",tabletColumns:"6",phoneColumns:"12",right:Eb,bottom:Eb,minHeight:"min(calc(100vh * 0.25), 350px)",child:{type:a.Component,element:function(e){var t=e.payload,n=Xh({payload:t}),r=n.execute,i=n.render;return Se(vb,{style:{background:"#fff",boxShadow:"0px 10px 10px -4px #00000033"},children:[Se(Xv,{onClick:r,text:"Добавить Задачу",iconNumber:3}),i()]})}}}]}]}],Ob=[{id:"common",element:function(e){var t=e.payload;return Se(st,{fields:Nb,payload:t,features:t.permissions})},isActive:function(e){return Dl(["/dashboard"],e)},isAvailable:function(){return!1}}],Ub=$l()((function(e){return{root:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",minHeight:150},container:{position:"relative",display:"flex",alignItems:"stretch",justifyContent:"stretch",flex:1},content:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",paddingTop:6,paddingBottom:6,gap:6,flex:1},header:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",paddingLeft:e.spacing(.5),paddingRight:e.spacing(.5)},row:{display:"flex",alignItems:"center",justifyContent:"space-between"},noBorder:{border:"none !important"},bold:{fontWeight:"bold !important"},adjust:{maxHeight:10,minHeight:10,flex:1},button:{backgroundColor:"#3F51B5",color:"#ffffff",fontSize:12,marginLeft:"auto",marginRight:"auto","&:hover":{color:"#3F51B5"}},fieldContainer:{display:"flex",justifyContent:"space-between"},fieldDesc:{fontSize:10,opacity:.6,marginLeft:4},dateFieldDesc:{fontSize:8,opacity:.6,marginLeft:8},field:{fontSize:12,marginRight:4,fontWeight:500},dateField:{fontSize:8}}})),Hb=we.forwardRef((function(e,n){var a,o,s,u=e.className,l=e.style,c=e.contactDisplayName,d=e.contactType,p=e.contactNumber,m=e.responsible,h=e.requestType,y=e.dealIndex,v=e.dealType,b=e.dealStatus,_=e.price,k=e.currency,g=e.createdAt,x=e.updatedAt,w=e.apartmentId,S=e.targetApartmentId,z=e.targetBidId,V=e.bidId,A=e.id,T=e.onChangeStatus,C=e.onDrag,F=Ub().classes,L=function(e){var n=e.dealId,i=nt({history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),a=i.handleLoadStart,o=i.handleLoadEnd,s=Ve(r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.featureService.hasFeature("superadmin");case 2:if(!e.sent){e.next=6;break}return e.next=5,Fl.cleanupService.removeDeal(n);case 5:Fl.routerService.push("/deal");case 6:case"end":return e.stop()}}),e)}))),{onLoadStart:a,onLoadEnd:o,fallback:Fl.errorService.handleGlobalError}).execute,u=jt({title:"Вы уверены?",msg:"Удаление сделки сотрет соответствующие записи в истории сделок. Продолжить?"});return function(){return u().then((function(e){e&&s()}))}}({dealId:A}),I=i(we.useState(null),2),M=I[0],j=I[1],B=i(we.useState(null),2),D=B[0],R=B[1],q=Ve(function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},fallback:Fl.errorService.handleGlobalError}),P=q.execute,E=q.loading,N=we.useMemo((function(){var e=Eo.findIndex((function(e){return e===b}));return Eo.filter((function(t,n){return n<e})).reverse()}),[b]),O=we.useMemo((function(){var e=Eo.findIndex((function(e){return e===b}));return Eo.filter((function(t,n){return n>e}))}),[b]),U=we.useMemo((function(){return f(g).format("DD.MM.YYYY / HH:mm")}),[g]),H=we.useMemo((function(){return f(x).format("DD.MM.YYYY / HH:mm")}),[x]),W=we.useMemo((function(){return"Сделка сорвана"===b||"Закрытая сделка"===b}),[b]),$=we.useCallback((function(){w?Fl.routerService.push("/apartment_view/".concat(w,"/history")):V&&Fl.routerService.push("/bid_view/".concat(V,"/history"))}),[]);return Se("div",{"data-dealid":A,className:Pe(F.root,u),onDrag:function(){return C(A)},style:l,ref:n,draggable:!W,children:[Se(fn,{className:F.container,children:Se(qe,{className:F.content,children:[Se(qe,{className:F.row,children:[Se(We,{onClick:function(e){var t=e.currentTarget;j(t),R(null)},disabled:!N.length||E||W,size:"small",children:Se(_r,{})}),Se(pr,{anchorEl:M,open:!!M,onClose:function(){return j(null)},children:N.map((function(e,t){return Se(mr,{onClick:function(){P(e),j(null)},children:e},"".concat(e,"-").concat(t))}))}),Se(rn,{label:m,variant:"filled",color:"#2196F3",sx:{fontWeight:500,fontSize:10,maxWidth:175}}),Se(We,{onClick:function(e){var t=e.currentTarget;j(null),R(t)},disabled:!O.length||E||W,size:"small",children:Se(Vr,{})}),Se(pr,{anchorEl:D,open:!!D,onClose:function(){return R(null)},children:O.map((function(e,t){return Se(mr,{onClick:function(){P(e),R(null)},children:e},"".concat(e,"-").concat(t))}))})]}),Se(wt,{sx:{minHeight:50},children:Se(Je,{fontSize:12,textAlign:"center",maxWidth:"80%",paddingBottom:"6px",children:c})}),p&&Se(qe,{className:F.content,children:[Se(qe,{className:F.fieldContainer,sx:{borderBottom:1,borderColor:"#E0E0E0"},children:[Se(Je,{className:F.fieldDesc,children:"Тип контакта"}),Se(Je,{className:F.field,children:d})]}),Se(qe,{className:F.fieldContainer,sx:{borderBottom:1,borderColor:"#E0E0E0"},children:[Se(Je,{className:F.fieldDesc,children:"Номер телефона"}),Se(Je,{className:F.field,children:p})]}),S&&Se(Ne,{payload:S,children:(s=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.apartmentViewService.read(n);case 2:return r=e.sent,i=r.zagolovok,e.abrupt("return",Se(qe,{className:F.fieldContainer,sx:{borderBottom:1,borderColor:"#E0E0E0"},children:[Se(Je,{className:F.fieldDesc,children:"Объект недвижимости"}),Se(Je,{className:F.field,children:Se(Ln,{href:"#",onClick:function(){return ue("/apartment_view/".concat(n))},children:i})})]}));case 5:case"end":return e.stop()}}),e)}))),function(e){return s.apply(this,arguments)})}),z&&Se(Ne,{payload:z,children:(o=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.bidViewService.read(n);case 2:return r=e.sent,i=r.zagolovok,e.abrupt("return",Se(qe,{className:F.fieldContainer,sx:{borderBottom:1,borderColor:"#E0E0E0"},children:[Se(Je,{className:F.fieldDesc,children:"Заявка"}),Se(Je,{className:F.field,children:Se(Ln,{href:"#",onClick:function(){return ue("/bid_view/".concat(n))},children:i})})]}));case 5:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})})]}),Se(wt,{children:Se(qe,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center",maxWidth:"90%",gap:1},children:[Se(rn,{label:"№ ".concat(y),variant:"filled",color:"#E0E0E0"}),Se(rn,"Аренда"==v?{label:"Аренда",variant:"filled",color:"#AF4C5E",sx:{color:"white"}}:{label:"Покупка",variant:"filled",color:"#4CAFAF",sx:{color:"white"}}),Se(rn,"Заявка"===h?{label:"Заявка",variant:"filled",color:"#AFAB4C",sx:{color:"white"}}:{label:"Объект",variant:"filled",color:"#4CAF50",sx:{color:"white"}})]})}),_&&Se(qe,{className:F.content,children:Se(qe,{className:F.fieldContainer,children:[Se(Je,{className:F.fieldDesc,children:["Цена ","(".concat("uzs"===k?"SUM":"$",")")]}),Se(Je,{className:F.field,children:_})]})}),Se(qe,{className:F.container,sx:{borderTop:1,pl:1,borderColor:"#E0E0E0"},children:[Se(wt,{className:F.content,children:[Se(Je,{className:F.dateFieldDesc,children:"Дата создания:"}),Se(Je,{className:F.dateField,children:U})]}),Se(wt,{className:F.content,children:[Se(Je,{className:F.dateFieldDesc,children:"Дата обновления:"}),Se(Je,{className:F.dateField,children:H})]})]}),Se(en,{onClick:$,variant:"outlined",sx:{ml:1,mr:1},children:"Посмотреть историю"}),Se(Ne,{payload:A,children:(a=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.featureService.hasFeature("superadmin");case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",Se(xt,{onClick:L,variant:"outlined",color:"error",sx:{ml:1,mr:1},children:"Удалить навсегда"}));case 4:return e.abrupt("return",null);case 5:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})})]})}),Se("div",{className:F.adjust})]})})),Wb=[{type:a.Box,sx:{display:"grid",gridTemplateColumns:"auto auto 1fr auto","& > .MuiGrid-root":{minWidth:"275px"},mt:-1},fields:[{type:a.Choose,fieldBottomMargin:"0",fieldRightMargin:"2",choose:(Qy=r(t().mark((function e(n,r){var a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.pickData(n.user_id?[n.user_id]:[]),e.next=3,r.resultSubject.toPromise();case 3:if(!(a=e.sent)||!a.length){e.next=7;break}return o=i(a,1),s=o[0],e.abrupt("return",s);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)}))),function(e,t){return Qy.apply(this,arguments)}),tr:(Zy=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.userViewService.tryRead(n);case 2:return r=e.sent,e.abrupt("return",[null==r?void 0:r.last_name,null==r?void 0:r.first_name,null==r?void 0:r.middle_name].filter((function(e){return e})).join(" ")||(null==r?void 0:r.$id)||"");case 4:case"end":return e.stop()}}),e)}))),function(e){return Zy.apply(this,arguments)}),name:"user_id",placeholder:"Ответственный",title:""},{type:a.Combo,fieldBottomMargin:"0",name:"tip_klienta",title:"",placeholder:"Тип клиента",itemList:["Собственник","Доверенное лицо","Риелтор","Информатор","Застройщик"]},{type:a.Div},{type:a.Text,fieldBottomMargin:"0",name:"search",title:"",placeholder:"Поиск",leadingIcon:fr,trailingIcon:function(){return Se(An,{sx:{opacity:.5}})},trailingIconClick:function(e,t,n){e&&n("")}}]}],$b=function(e){var t=e.onChange,n=e.className,r=e.style,i=e.data,a=e.payload,s=Sc({payload:a}),u=s.pickData,l=s.render,c=s.resultSubject;return Se(fn,{className:n,style:r,sx:{mb:1,minHeight:48},children:[Se(Tn,{sx:{height:"100%"},hideOverflowY:!0,children:Se(qe,{sx:{p:1,display:"flex",alignItems:"center",justifyContent:"stretch"},children:Se(st,{fields:Wb,handler:function(){return i},onChange:function(e,n){n||t(e)},payload:function(){return o(o({},a),{},{pickData:u,resultSubject:c})},fieldDebounce:da})})}),l()]})},Gb=function(){var e=r(t().mark((function e(n){var i,a,o,s,u,l,c,d;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){var e=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.apartment_id){e.next=3;break}return i="Объект",e.abrupt("return");case 3:if(!n.bid_id){e.next=6;break}return i="Заявка",e.abrupt("return");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=3,o();case 3:return e.next=5,Fl.userViewService.read(n.user_id);case 5:return s=e.sent,u=s.first_name,l=s.last_name,c=s.middle_name,d=[l,u,c].filter((function(e){return e})).join(" "),n.price&&1===n.price.length&&(a=n.price[0]),n.price&&2===n.price.length&&(a="От ".concat(n.price[0]," До ").concat(n.price[1])),e.abrupt("return",{id:n.id,contactType:n.tip_klienta,contactNumber:n.telefon,contactDisplayName:n.fio,createdAt:n.$createdAt,updatedAt:n.$updatedAt,dealIndex:n.index,requestType:i,currency:n.price_unit,metadata_created_at:f(n.$createdAt).format("DD/MM/YYYY"),metadata_updated_at:f(n.$updatedAt).format("DD/MM/YYYY"),price:a,apartmentId:n.apartment_id,bidId:n.bid_id,targetApartmentId:n.target_apartment_id,targetBidId:n.target_bid_id,userId:n.user_id,responsible:d,dealStatus:n.status,dealType:n.type});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Yb=Eo.indexOf("Задаток/Залог"),Kb=[{type:a.Choose,fieldBottomMargin:"1",isVisible:function(e){return Yh(e,"bid_id","occupation")},isInvalid:function(e){return e.occupation&&e.bid_id?e.target_apartment_id?null:"Укажите объект недвижимости":null},choose:(rv=r(t().mark((function e(n,r){var a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.pickApartment(n.target_apartment_id?[n.target_apartment_id]:[]),e.next=3,r.apartmentResultSubject.toPromise();case 3:if(!(a=e.sent)||!a.length){e.next=7;break}return o=i(a,1),s=o[0],e.abrupt("return",s);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)}))),function(e,t){return rv.apply(this,arguments)}),tr:(nv=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.apartmentViewService.tryRead(n);case 2:return r=e.sent,e.abrupt("return",(null==r?void 0:r.zagolovok)||(null==r?void 0:r.$id)||"");case 4:case"end":return e.stop()}}),e)}))),function(e){return nv.apply(this,arguments)}),name:"target_apartment_id",title:"Выберите объект",placeholder:"Не выбрано"},{type:a.Choose,fieldBottomMargin:"1",isVisible:function(e){return Yh(e,"apartment_id","occupation")},isInvalid:function(e){return e.occupation&&e.apartment_id?e.target_bid_id?null:"Укажите заявку":null},choose:(tv=r(t().mark((function e(n,r){var a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.pickBid(n.target_bid_id?[n.target_bid_id]:[]),e.next=3,r.bidResultSubject.toPromise();case 3:if(!(a=e.sent)||!a.length){e.next=7;break}return o=i(a,1),s=o[0],e.abrupt("return",s);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)}))),function(e,t){return tv.apply(this,arguments)}),tr:(ev=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.bidViewService.tryRead(n);case 2:return r=e.sent,e.abrupt("return",(null==r?void 0:r.zagolovok)||(null==r?void 0:r.$id)||"");case 4:case"end":return e.stop()}}),e)}))),function(e){return ev.apply(this,arguments)}),name:"target_bid_id",title:"Выберите заявку",placeholder:"Не выбрано"},{type:a.Text,sx:{minWidth:470},title:"",placeholder:"Комментарий",name:"comment",inputRows:3}],Xb=$l()((function(e){return{root:c({display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",height:"calc(100vh - 85px)",width:"100%"},"& .".concat("react-declarative__scrollViewTarget"),{transform:"rotateX(180deg)","& > div > div":{marginBottom:"25px",transform:"rotateX(180deg)"}}),container:{position:"relative",flex:1,display:"flex",alignItems:"stretch",justifyContent:"stretch"},content:{flex:1,display:"flex"},group:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",maxWidth:"276px",minWidth:"276px",gap:10,padding:10,marginRight:10},inactiveGroup:{background:"#E1E2E6"},activeGroup:{background:je(e.palette.primary.main,.5)},list:{flex:1,minWidth:"256px",height:"100%"},loading:{pointerEvents:"none"}}})),Jb=["contactDisplayName","contactType","contactNumber","responsible","requestType","dealType","metadata_created_at","metadata_updated_at"],Zb={user_id:"",tip_klienta:null,search:""},Qb=[{id:"list",element:function(e){var n=e.params.dealCardMap,a=e.payload,s=Xb().classes,u=i(hr(Zb),2),l=u[0],d=u[1],m=i(yr((function(){return{user_id:l.user_id,tip_klienta:JSON.parse(l.tip_klienta),search:l.search}})),2),h=m[0],y=m[1];Rt((function(){d(h.current)}),[h.current]);var v=i(we.useState((function(){return new Map(n)})),2),b=v[0],_=v[1],k=we.useMemo((function(){return p(b.values()).flatMap((function(e){return e}))}),[b]),g=Gt(b),x=we.useRef(null),w=i(we.useState(null),2),S=w[0],z=w[1],V=function(e){var n=e.payload,i=e.features,a=em({payload:n,features:i}),s=a.pickData,u=a.render,l=a.resultSubject,c=qm({payload:n,features:i}),d=c.pickData,p=c.render,m=c.resultSubject,f=nt({history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),h=f.handleLoadStart,y=f.handleLoadEnd,v=tt({large:!0,title:"Изменение статуса",fields:Kb,payload:function(){return o(o({},n),{},{apartmentResultSubject:l,pickApartment:s,bidResultSubject:m,pickBid:d})}}),b=Ve(function(){var e=r(t().mark((function e(n){var r,i,a,o,s,u,l,c,d,p,m,f,h;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.id,i=n.fromStatus,a=n.toStatus,o=n.apartment_id,s=n.bid_id,u=n.target_apartment_id,l=n.target_bid_id,i!==a){e.next=3;break}return e.abrupt("return");case 3:return c=Eo.indexOf(a)>=Yb,e.next=6,v({handler:function(){return{fromStatus:i,toStatus:a,occupation:c,apartment_id:o,bid_id:s,target_apartment_id:c?u:null,target_bid_id:c?l:null}}}).toPromise();case 6:if(!(d=e.sent)){e.next=36;break}if(!d.target_bid_id){e.next=21;break}return e.next=11,Fl.dealViewService.findOccupiedByBidId(d.target_bid_id);case 11:return p=e.sent,e.next=14,Fl.dealViewService.findOccupiedByTagetBidId(d.target_bid_id);case 14:if(m=e.sent,!p||p.id===r){e.next=18;break}return Fl.alertService.notify("На данную заявку создана другая сделка"),e.abrupt("return");case 18:if(!m||m.id===r){e.next=21;break}return Fl.alertService.notify("Данная заявка используется в другой сделке"),e.abrupt("return");case 21:if(!d.target_apartment_id){e.next=34;break}return e.next=24,Fl.dealViewService.findOccupiedByApartmentId(d.target_apartment_id);case 24:return f=e.sent,e.next=27,Fl.dealViewService.findOccupiedByTargetApartmentId(d.target_apartment_id);case 27:if(h=e.sent,!f||f.id===r){e.next=31;break}return Fl.alertService.notify("На данный объект создана другая сделка"),e.abrupt("return");case 31:if(!h||h.id===r){e.next=34;break}return Fl.alertService.notify("Данный лбъект используется в другой сделке"),e.abrupt("return");case 34:return e.next=36,Fl.dealRequestService.commitDealStatusChange(r,o,s,d.target_apartment_id,d.target_bid_id,i,a,d.comment);case 36:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onLoadStart:h,onLoadEnd:y,fallback:Fl.errorService.handleGlobalError});return{handleMoveDeal:b.execute,render:function(){return Se(Ae,{children:[u(),p()]})}}}({payload:a,features:a.permissions}),A=V.handleMoveDeal,T=V.render,C=function(){var e=r(t().mark((function e(n,r){var i,a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=k.find((function(e){return e.id===n}))){e.next=3;break}throw new Error("DealPages BoardView handleChangeStatus dealCard not found");case 3:return a=i.dealStatus,o=i.apartmentId,s=i.bidId,e.next=6,A({id:n,apartment_id:o||null,bid_id:s||null,fromStatus:a,toStatus:r,target_apartment_id:i.targetApartmentId,target_bid_id:i.targetBidId});case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),F=Ve(function(){var e=r(t().mark((function e(n){var r,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i(n,1),a=r[0],z(null),e.next=4,C(x.current,a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},fallback:Fl.errorService.handleGlobalError}),L=F.loading,I=F.execute;we.useEffect((function(){return Fl.dealViewService.updateSubject.subscribe(O(function(){var e=r(t().mark((function e(n){var r,a,o,s,u,l,c,d,p,m,f,h;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=i(n,2),a=r[0],o=r[1],s=new Map(g.current),u=0,l=Eo;u<l.length;u++)c=l[u],d=s.get(c)||[],s.set(c,d.filter((function(e){return e.id!==a})));p=0,m=Eo;case 4:if(!(p<m.length)){e.next=17;break}if((f=m[p])!==o.status){e.next=14;break}return h=s.get(f)||[],e.t0=h,e.next=11,Gb(o);case 11:e.t1=e.sent,e.t0.unshift.call(e.t0,e.t1),s.set(f,h);case 14:p++,e.next=4;break;case 17:_(s);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[]),we.useEffect((function(){return Fl.dealViewService.removeSubject.subscribe(O(function(){var e=r(t().mark((function e(n){var r,i,a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=new Map(g.current),i=0,a=Eo;i<a.length;i++)o=a[i],s=r.get(o)||[],r.set(o,s.filter((function(e){return e.id!==n})));_(r);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[]),we.useEffect((function(){return Fl.dealViewService.createSubject.subscribe(O(function(){var e=r(t().mark((function e(n){var r,i,a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new Map(g.current),i=0,a=Eo;case 2:if(!(i<a.length)){e.next=16;break}if((o=a[i])!==n.status){e.next=13;break}return s=(s=r.get(o)||[]).filter((function(e){return e.id!==n.$id})),e.t0=s,e.next=10,Gb(n);case 10:e.t1=e.sent,e.t0.unshift.call(e.t0,e.t1),r.set(o,s);case 13:i++,e.next=2;break;case 16:_(r);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[]);var M=L;return Se(qe,{className:Pe(s.root,c({},s.loading,M)),children:[Se($b,{data:h.current,payload:a,onChange:y}),Se(qe,{className:s.container,children:Se(Tn,{withScrollbar:!0,hideOverflowY:!0,className:s.content,children:Eo.map((function(e){var n,i=g.current.get(e)||[];return Se(qe,{onDrop:function(t){var n=t.currentTarget;return I([e,n])},onDragEnd:function(){z(null)},onDragOver:function(t){z(e),t.preventDefault()},className:Pe(s.group,(n={},c(n,s.activeGroup,S===e),c(n,s.inactiveGroup,S!==e),n)),children:[Se(Je,{variant:"h6",fontWeight:"bold",children:e}),Se(nr,{className:s.list,minRowHeight:150,children:i.sort((function(e,t){var n=e.updatedAt,r=t.updatedAt;return f(n).isBefore(r)?1:-1})).filter((function(e){var t=h.current.user_id;return!t||e.userId===t})).filter((function(e){var t=h.current.tip_klienta;return null==t||!t.length||e.contactType===t[0]})).filter((function(e){var t=h.current.search;return!t||vr.apply(void 0,[e,t].concat(Jb))})).map((function(e){return Se(Hb,o({onChangeStatus:(n=r(t().mark((function n(r){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C(e.id,r);case 2:case"end":return t.stop()}}),n)}))),function(e){return n.apply(this,arguments)}),onDrag:function(){x.current=e.id}},e),e.id);var n}))})]})}))})}),T()]})},isActive:function(e){return Dl(["/deal"],e)},isAvailable:function(){return!1}}],e_=function(){var e=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Map,e.next=3,Promise.all(Eo.map(function(){var e=r(t().mark((function e(i){var a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dealViewService.findByDealStatus(i);case 2:return a=e.sent,e.next=5,Promise.all(a.map(function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gb(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:o=e.sent,n.set(i,o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t_=function(){return Se(Je,{variant:"h2",color:"primary",width:"100%",textAlign:"center",fontWeight:"bold",sx:{textStroke:"2px #fff",WebkitTextStroke:"2px #fff"},children:ca})},n_=$l()((function(e){return{root:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,background:e.palette.background.default,height:"100%",width:"100%",display:"flex",alignItems:"center",flexDirection:"column",gap:20,padding:15},container:{position:"relative",overflow:"hidden",minWidth:375,maxWidth:375,padding:15},reveal:{width:"unset"}}})),r_=$l()((function(e){return{root:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,background:e.palette.background.default,height:"100%",width:"100%",display:"flex",alignItems:"center",flexDirection:"column",gap:20,padding:15},container:{position:"relative",overflow:"hidden",minWidth:375,maxWidth:375,padding:15},reveal:{width:"unset"}}})),i_=function(){var e=r(t().mark((function e(n){var r,i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new FormData(n),i=r.get("email"),a=r.get("password"),i){e.next=6;break}return Fl.alertService.notify("Введите email"),e.abrupt("return");case 6:if(a){e.next=9;break}return Fl.alertService.notify("Введите пароль"),e.abrupt("return");case 9:return e.next=11,Fl.authService.login({email:i.toString(),password:a.toString()});case 11:e.sent&&Fl.routerService.push("/profile");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a_=function(){var e=r(t().mark((function e(n){var r,i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new FormData(n),i=r.get("email"),a=r.get("password"),o=r.get("confirm"),i){e.next=7;break}return Fl.alertService.notify("Введите email"),e.abrupt("return");case 7:if(a){e.next=10;break}return Fl.alertService.notify("Введите пароль"),e.abrupt("return");case 10:if(a===o){e.next=13;break}return Fl.alertService.notify("Пароли не совпадают"),e.abrupt("return");case 13:return e.next=15,Fl.authService.register({email:i.toString(),password:a.toString()});case 15:e.sent&&Fl.routerService.push("/profile");case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o_=["Control","S"],s_={overrideSystem:!0,ignoreInputFields:!0,repeatOnHold:!1},u_=function(e){var t=mn(e);return Hr(o_,t,s_)},l_=function(e,t){return{type:a.Box,sx:{display:"grid",gridTemplateColumns:"1fr auto",alignItems:"flex-end",mb:1},fields:[{type:a.Text,fieldBottomMargin:"0",isDisabled:function(n){return!n["".concat(e,"_link_enabled_").concat(t)]},name:"".concat(e,"_link_").concat(t),title:"Ссылка на ".concat(e)},{type:a.Checkbox,fieldBottomMargin:"0",name:"".concat(e,"_link_enabled_").concat(t),title:"Включено"}]}},c_=[{type:a.Paper,fieldBottomMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Курс валюты"})}},{type:a.Group,fieldRightMargin:"0",fieldBottomMargin:"0",fields:[{type:a.Text,desktopColumns:"3",tabletColumns:"6",phoneColumns:"12",outlined:!1,name:"usd_eur",title:"Пара USD-EUR",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000"}]},{type:a.Group,fieldRightMargin:"0",fieldBottomMargin:"0",fields:[{type:a.Text,desktopColumns:"3",tabletColumns:"6",phoneColumns:"12",outlined:!1,name:"usd_uzs",title:"Пара USD-UZS",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000"}]}]},{type:a.Paper,fieldBottomMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Отображение карточек"})}},{type:a.Combo,desktopColumns:"3",tabletColumns:"6",phoneColumns:"12",outlined:!1,name:"masterdetail_mode",title:"Режим отображения",itemList:(lv=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getMasterDetailMode();case 2:return n=e.sent,e.abrupt("return",Object.keys(n));case 4:case"end":return e.stop()}}),e)}))),function(){return lv.apply(this,arguments)}),tr:(uv=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getMasterDetailMode();case 2:return r=e.sent,e.abrupt("return",S.get(r,n));case 4:case"end":return e.stop()}}),e)}))),function(e){return uv.apply(this,arguments)})}]},{type:a.Paper,fieldBottomMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Водяной знак"})}},{type:a.Choose,name:"watermark_file_id",title:"Файл водяного знака",choose:(sv=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wr("*.png");case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,Fl.appwriteService.uploadFile(n);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)}))),function(){return sv.apply(this,arguments)}),tr:(ov=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Fl.appwriteService.readFileName(n);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return","Не указано");case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),function(e){return ov.apply(this,arguments)}),desktopColumns:"3",tabletColumns:"6",phoneColumns:"12",outlined:!1}]},{type:a.Paper,fieldBottomMargin:"1",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Логотип"})}},{type:a.Choose,name:"logo_file_id",title:"Файл логотипа",choose:(av=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wr("*.png");case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,Fl.appwriteService.uploadFile(n);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)}))),function(){return av.apply(this,arguments)}),tr:(iv=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Fl.appwriteService.readFileName(n);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return","Не указано");case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),function(e){return iv.apply(this,arguments)}),desktopColumns:"3",tabletColumns:"6",phoneColumns:"12",outlined:!1}]},{type:a.Paper,fieldRightMargin:"0",fields:[{type:a.Component,fieldBottomMargin:"1",element:function(){return Se(Je,{variant:"h6",fontWeight:"bold",children:"Ссылки на социальные сети"})}},l_(Oa,1),l_(Ua,1),l_(Ea,1),l_(Na,1)]}];window.setting_common_fields=c_;var d_=[{type:et.Link,action:"breadcrumbs-action",label:"RealEstate"},{type:et.Link,action:"breadcrumbs-action",label:"Системные настройки"},{type:et.Button,isDisabled:function(e){return!e.hasChanged},action:"save-action",label:"Сохранить"}],p_=[{type:et.Link,action:"breadcrumbs-action",label:"RealEstate"},{type:et.Link,action:"breadcrumbs-action",label:"Видимость полей"},{type:et.Button,isDisabled:function(e){return!e.hasChanged},action:"save-action",label:"Сохранить"}],m_=[{type:a.Expansion,fieldBottomMargin:"1",hidden:!1,title:"Каналы в Telegram",fields:[{type:a.Typography,sx:{"& *":{fontWeight:"bold !important"}},placeholder:"Список каналов",typoVariant:"subtitle2"}].concat(p(p(new Array(10)).map((function(e,t){return function(e){return{type:a.Box,sx:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr auto",alignItems:"flex-end",mb:1},fields:[{type:a.Text,isDisabled:function(t){return!t["telegram_channel_enabled_".concat(e)]},fieldBottomMargin:"0",name:"telegram_name_".concat(e),title:"Имя канала"},{type:a.Text,isDisabled:function(t){return!t["telegram_channel_enabled_".concat(e)]},fieldBottomMargin:"0",name:"telegram_token_".concat(e),title:"Токен бота"},{type:a.Text,fieldBottomMargin:"0",isDisabled:function(t){return!t["telegram_channel_enabled_".concat(e)]},name:"telegram_channel_".concat(e),title:"Никнейм канала"},{type:a.Checkbox,fieldBottomMargin:"0",name:"telegram_channel_enabled_".concat(e),title:"Включено"}]}}(t+1)}))))},{type:a.Expansion,title:"Контакты в Telegram",fields:[{type:a.Outline,fieldRightMargin:"1",columns:"6",hidden:!1,fields:[{type:a.Typography,sx:{"& *":{fontWeight:"bold !important"}},placeholder:"Список номеров агенства",typoVariant:"subtitle2"}].concat(p(p(new Array(5)).map((function(e,t){return function(e){return{type:a.Box,sx:{display:"grid",gridTemplateColumns:"1fr 1fr auto",alignItems:"flex-end",mb:1},fields:[{type:a.Text,fieldBottomMargin:"0",isDisabled:function(t){return!t["telegram_agency_enabled_".concat(e)]},name:"telegram_agency_".concat(e),title:"Номер агенства"},{type:a.Text,isDisabled:function(t){return!t["telegram_agency_enabled_".concat(e)]},fieldBottomMargin:"0",name:"telegram_agency_nickname_".concat(e),title:"Никнейм в Telegram"},{type:a.Checkbox,fieldBottomMargin:"0",name:"telegram_agency_enabled_".concat(e),title:"Включено"}]}}(t+1)}))))},{type:a.Outline,columns:"6",hidden:!1,fields:[{type:a.Typography,sx:{"& *":{fontWeight:"bold !important"}},placeholder:"Список номеров агента",typoVariant:"subtitle2"}].concat(p(p(new Array(5)).map((function(e,t){return function(e){return{type:a.Box,sx:{display:"grid",gridTemplateColumns:"1fr 1fr auto",alignItems:"flex-end",mb:1},fields:[{type:a.Text,fieldBottomMargin:"0",isDisabled:function(t){return!t["telegram_agent_enabled_".concat(e)]},name:"telegram_agent_".concat(e),title:"Номер агента"},{type:a.Text,isDisabled:function(t){return!t["telegram_agent_enabled_".concat(e)]},fieldBottomMargin:"0",name:"telegram_agent_nickname_".concat(e),title:"Никнейм в Telegram"},{type:a.Checkbox,fieldBottomMargin:"0",name:"telegram_agent_enabled_".concat(e),title:"Включено"}]}}(t+1)}))))}]}];window.setting_integration_fields=m_;var f_,h_,y_,v_=[{type:et.Link,action:"breadcrumbs-action",label:"RealEstate"},{type:et.Link,action:"breadcrumbs-action",label:"Telegram"},{type:et.Button,isDisabled:function(e){return!e.hasChanged},action:"save-action",label:"Сохранить"}],b_=[{type:a.Text,outlined:!0,name:"title",title:"Наименование",isInvalid:function(e){return e.title?null:"Поле не должно быть пустым"}},{type:a.Text,outlined:!0,title:"Комментарий",name:"comment",inputRows:3}],__=[{title:"База объектов",children:[{name:"sozdanie_obekta",label:"Создание объекта",description:"Возможность создать объект"},{name:"redaktirovanie_obekta",label:"Редактирование объекта",description:"Возможность отредактировать объект"},{name:"prosmotr_obekta",label:"Просмотр объекта",description:"Возможность просмотреть объект"}]},{title:"Заявки",children:[{name:"sozdanie_zayavki",label:"Создание заявки",description:"Возможность создать заявку"},{name:"redaktirovanie_zayavki",label:"Редактирование заявки",description:"Возможность отредактировать заявку"},{name:"prosmotr_zayavki",label:"Просмотр заявки",description:"Возможность просмотреть заявку"}]},{title:"Контакты",children:[{name:"sozdanie_kontakta",label:"Создание контакта",description:"Возможность создать контакт"},{name:"redaktirovanie_kontakta",label:"Редактирование контакта",description:"Возможность отредактировать данные контакта"},{name:"prosmotr_kontakta",label:"Просмотр контакта",description:"Возможность просмотреть данные контакта"}]},{title:"Реклама",children:[{name:"publikacziya_reklamy",label:"Публикация рекламы в канал",description:"Возможность опубликовать рекламу в канал"},{name:"dobavlenie_kategorii_i_podkategorii",label:"Добавление категории и подкатегории в канал",description:"Возможность добавления категории и подкатегории в канал"}]},{title:"Служебный комментарий",children:[{name:"upominanie_polzovatelya",label:"Упоминание сотрудника",description:"Возможность упомянуть сотрудника в чате"},{name:"dobavlenie_fajla",label:"Добавление файла",description:"Возможность добавить файл в чат"}]},{title:"Сотрудники",children:[{name:"redaktirovanie_sotrudnika",label:"Редактирование сотрудника",description:"Возможность отредактировать данные сотрудника"},{name:"prosmotr_nomera_telefona_i_email",label:"Просмотр номера телефона и email",description:"Возможность просмотреть номер телефона и email сотрудника"},{name:"nastrojka_urovnej_dostupa",label:"Настройка уровней доступа",description:"Возможность настраивать уровни доступа"},{name:"anonimnoe_redaktirovanie",label:"Анонимное редактирование",description:"Красная плашка просмотра объекта или заявки не показывается"},{name:"polnoe_udalenie",label:"Полное удаление",description:"Возможность удалить объект или заявку"}]},(f_={title:"Уровень доступа",levels:[{label:"Стажер",description:"Видит только свои записи"},{label:"Сотрудник",description:"Видит свои записи и записи стажера"},{label:"Менеджер",description:"Видит свои записи и записи стажера, сотрудника"},{label:"Администратор",description:"Видит свои записи и записи стажера, сотрудника, менеджера"},{label:"Суперадмин",description:"Видет все данные из базы данных без ограничений"}]},h_=f_.title,y_=f_.levels,{title:h_,children:y_.map((function(e,t){var n=e.label,r=e.description,i="level-".concat(t+1);return{name:i,label:n,description:r,map:function(e){if(!e[i])return e;for(var t=0;t!==y_.length;t++){var n="level-".concat(t+1);n!==i&&(e[n]=!1)}return e}}}))}),{title:"Доступ",children:[{name:"ne_vizhu_nomera_telefonov_chuzhih_kontaktov",label:"Не вижу номера телефонов чужих контактов (Стажер)",description:"Возможность скрыть номера телефонов контактов по всей базе кроме созданных самим пользователем"},{name:"vse_obekty_eksklyuzivny",label:"Все объекты эксклюзивны по умолчанию (Менеджер)",description:"Созданные пользователем контакты видны только ему"},{name:"vizhu_vse_urovni",label:"Вижу все уровни",description:"Видит номер контакта у вышестоящих уровней доступа"},{name:"vizhu_kontakty_pod_bronyu",label:"Вижу контакты под бронью (Директор)",description:"Вижу контакты, даже если получен задаток"},{name:"zaderzhka_perenaznacheniya_otvetstvennogo",label:"Задержка переназначения ответственного",description:"Могу забрать объект только через три дня простоя"},{name:"superadmin",label:"Суперадмин",description:"Действия, доступные только администратору базы данных"},{name:"officemanager",label:"Офис-менеджер",description:"Действия, доступные только офис-менеджеру"}]},{title:"Настройки",children:[{name:"dostup_k_nastrojkam",label:"Доступ к настройкам",description:"Возможность разрешить менять настройки"},{name:"sozdanie_roli",label:"Создание роли",description:"Возможность создать роль"},{name:"redaktirovanie_roli",label:"Редактирование роли",description:"Возможность отредактировать роль"},{name:"dostup_k_nastrojke_polej",label:"Доступ к настройке полей",description:"Возможность включать и выключать поля"}]}],k_=$l()((function(e){return{root:{position:"absolute",padding:20,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"stretch",transform:"translate(-50%, -50%)",outline:"none",backgroundColor:e.palette.background.paper,borderRadius:5,gap:5},content:{overflow:"hidden",overflowY:"auto",flex:1},small:{top:"40%",left:"50%",maxHeight:"80%",width:500},large:{top:"50%",left:"50%",width:"calc(100vw - 60px)",height:"calc(100vh - 60px)"},container:{flex:1,overflow:"hidden"},title:{display:"flex",justifyContent:"space-between",alignItems:"center",height:65,color:e.palette.text.primary},submit:{marginTop:15},disabled:{opacity:.5,pointerEvents:"none"},indicatorTransparent:{height:6,background:e.palette.primary.main},tabRootTransparent:{minHeight:54,height:54},tabsRoot:{minHeight:54,height:54,marginLeft:"0 !important",marginRight:"0 !important"}}})),g_=[{type:dt.Compute,compute:function(e){return e.title||"Не указано"},field:"title",headerName:"Наименование",width:function(){return 200}},{type:dt.Compute,compute:function(e){return e.comment||"Не указано"},field:"comment",headerName:"Комментарий",width:function(e){return Math.max(e-300,200)}},{type:dt.Action,headerName:"Действие",sortable:!1,width:function(){return 100}}],x_=[{type:Ot.Add,isDisabled:function(e,t){return!t.permissions.hasSettingsCreateRolePermission}},{type:Ot.Menu,options:[{action:"add-action",isDisabled:function(e,t){return!t.permissions.hasSettingsCreateRolePermission}},{action:"update-now"},{action:"resort-action"},{action:"drop-filters"}]}],w_=[{label:"Удалить",action:"remove-action",icon:Nt}],S_=function(){return window.innerHeight-160},z_=[{id:"common",element:function(e){var n=e.payload,a=function(){var e=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.settingsViewService.getValue();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(e){var i,a=$r({waitForChangesDelay:pa,history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},updateSubject:Fl.settingsViewService.updateSubject,onSave:(i=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!0,e.prev=1,e.next=4,Fl.settingsViewService.setValue(n);case 4:Fl.alertService.notify("Изменения сохранены"),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(1),r=!1,i=Xs(e.t0),Fl.alertService.notify(i);case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,null,[[1,7]])}))),function(e){return i.apply(this,arguments)}),fallback:Fl.errorService.handleGlobalError}),s=a.data,u=a.oneProps,l=a.beginSave,c=a.waitForChanges;u_(r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:l();case 3:case"end":return e.stop()}}),e)}))));return Se(Qn,{children:[Se(ot,{items:d_,onAction:function(e){"save-action"===e&&l()},payload:{hasChanged:!!s,payload:n}}),Se(st,o({dirty:!0,handler:function(){return e.data},payload:n,fields:c_},u)),Se(lt,{})]})};return Se(br,{state:a,fallback:Fl.errorService.handleGlobalError,children:function(e){var t=i(e,1)[0];return Se(s,{data:t})}})},isActive:function(e){return Dl(["/settings","/settings/common"],e)},isAvailable:function(){return!1}},{id:"roles",element:function(e){var n,a=e.payload,s=nt({history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),u=function(e){var n=e.fullScreen,a=e.onChange,s=e.onSubmit,u=e.fallback,l=e.onLoadStart,d=e.onLoadEnd,p=i(we.useState("common"),2),m=p[0],f=p[1],h=i(we.useState({}),2),y=h[0],v=h[1],b=i(we.useState(!1),2),_=b[0],k=b[1],g=i(we.useState(!1),2),x=g[0],w=g[1],S=i(we.useState(!1),2),z=S[0],V=S[1],A=i(we.useState(0),2),T=A[0],C=A[1],F=k_(),L=F.classes,I=F.cx;Rt((function(){a&&a(y)}),[y]);var M=function(e,t){t||(v(e),V(!0),k(!1))},j=function(){v({}),w(!1),V(!1)},B=function(){var e=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=3;break}return e.next=3,s(y);case 3:w(!1),V(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){C((function(e){return e+1})),l&&l()},R=function(e){C((function(e){return e-1})),d&&d(e)};return{render:function(){var e;return Se(Ye,{open:x,onClose:j,children:Se(qe,{className:I(L.root,(e={},c(e,L.small,!n),c(e,L.large,n),e)),children:[Se(qe,{className:L.content,children:[Se(qe,{className:L.title,sx:{position:"sticky",top:0,zIndex:1,background:"white"},children:Se(Je,{variant:"h6",component:"h2",children:y.id?"Редактирование роли":"Создание роли"})}),Se(qn,{value:m,children:[Se(qe,{className:L.container,sx:{borderBottom:1,borderColor:"divider",pointerEvents:"all",position:"sticky",top:"65px",zIndex:1,background:"white"},children:Se(Pn,{variant:"fullWidth",classes:{root:L.tabsRoot,indicator:L.indicatorTransparent},onChange:function(e,t){f(t),k(!1)},children:[Se(En,{classes:{root:L.tabRootTransparent},label:"Общая информация",value:"common"}),Se(En,{classes:{root:L.tabRootTransparent},label:"Бизнес функции",value:"features"})]})}),Se(On,{className:L.content,value:"common",children:Se(st,{sx:{pt:2},handler:y,fields:b_,change:M,invalidity:function(){return k(!0)}})}),Se(On,{className:L.content,value:"features",children:Se(Gr,{sx:{pt:2},readonly:_,features:__,outlinePaper:!0,handler:function(){return y.role_features?y.role_features.reduce((function(e,t){return o(o({},e),{},c({},t,!0))}),{}):{}},change:function(e,t){if(e&&!t){var n=Object.entries(e).filter((function(e){var t=i(e,2);return t[0],!!t[1]})).map((function(e){return i(e,1)[0]}));v((function(e){return o(o({},e),{},{role_features:n})})),V(!0)}}})})]})]}),Se(xt,{className:L.submit,disabled:!!T||!z||_,fallback:u,onLoadStart:D,onLoadEnd:R,size:"large",variant:"contained",color:"info",fullWidth:!0,onClick:B,children:y.id?"Сохранить":"Создать"})]})})},pickRole:function(e){v(e),w(!0)}}}({onLoadStart:s.handleLoadStart,onLoadEnd:s.handleLoadEnd,onSubmit:(n=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.id){e.next=6;break}return e.next=3,Fl.roleViewService.update(n.id,n);case 3:return Fl.alertService.notify("Изменения сохранены"),p.next(),e.abrupt("return");case 6:return e.next=8,Fl.roleViewService.create(n);case 8:Fl.alertService.notify("Роль создана"),p.next();case 10:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)}),fullScreen:!0}),l=u.pickRole,d=u.render,p=Be(Fl.roleViewService.reloadSubject),m=sr(Fl.routerService.locationState,{fallback:Fl.errorService.handleGlobalError}).listProps,f=ct(Fl.roleViewService.findAll,{onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},fallback:Fl.errorService.handleGlobalError,searchEntries:["title","comment"]}),h=function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"add-action"===n&&l({});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=r(t().mark((function e(n,r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("remove-action"!==n){e.next=3;break}return e.next=3,Fl.roleViewService.remove(r.id);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.permissionService.getPermissions();case 2:e.sent.hasSettingsEditRolePermission&&l(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Se(Ae,{children:[Se(Vn,o({withSingleSort:!0,withSearch:!0,fetchDebounce:da,reloadSubject:p,title:"Роли",heightRequest:S_,rowActions:w_,actions:x_,columns:g_,handler:f,payload:a,onRowClick:v,onAction:h,onRowAction:y,selectionMode:ht.Multiple},m)),d()]})},isActive:function(e){return Dl(["/settings/roles"],e)},isAvailable:function(){return!1}},{id:"integration",element:function(e){var n=e.payload,a=function(){var e=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.settingsViewService.getValue();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(e){var i,a=$r({waitForChangesDelay:pa,history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},updateSubject:Fl.settingsViewService.updateSubject,onSave:(i=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!0,e.prev=1,e.next=4,Fl.settingsViewService.setValue(n);case 4:Fl.alertService.notify("Изменения сохранены"),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(1),r=!1,i=Xs(e.t0),Fl.alertService.notify(i);case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,null,[[1,7]])}))),function(e){return i.apply(this,arguments)}),fallback:Fl.errorService.handleGlobalError}),s=a.data,u=a.oneProps,l=a.beginSave,c=a.waitForChanges;u_(r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:l();case 3:case"end":return e.stop()}}),e)}))));return Se(Qn,{children:[Se(ot,{items:v_,onAction:function(e){"save-action"===e&&l()},payload:{hasChanged:!!s,payload:n}}),Se(st,o({dirty:!0,handler:function(){return e.data},payload:n,fields:m_},u)),Se(lt,{})]})};return Se(br,{state:a,fallback:Fl.errorService.handleGlobalError,children:function(e){var t=i(e,1)[0];return Se(s,{data:t})}})},isActive:function(e){return Dl(["/settings/integration"],e)},isAvailable:function(){return!1}},{id:"field_visibility",element:function(e){var n=e.payload,s=function(){var e=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.settingsViewService.getValue();case 2:return e.t0=e.sent,e.next=5,Fl.visibilityService.getFieldVisibilitySet();case 5:return e.t1=e.sent,e.next=8,Fl.visibilityService.getFieldVisibilityVariant();case 8:return e.t2=e.sent,e.abrupt("return",[e.t0,e.t1,e.t2]);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(e){var s,u=$r({waitForChangesDelay:pa,history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},updateSubject:Fl.settingsViewService.updateSubject,onSave:(s=r(t().mark((function n(r){var a,s,u;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=!0,t.prev=1,s=Object.entries(r).filter((function(e){return i(e,2)[1]})).map((function(e){return i(e,1)[0]})),t.next=5,Fl.settingsViewService.setValue(o(o({},e.settings),{},{field_visibility:s}));case 5:Fl.alertService.notify("Изменения сохранены"),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(1),a=!1,u=Xs(t.t0),Fl.alertService.notify(u);case 13:return t.abrupt("return",a);case 14:case"end":return t.stop()}}),n,null,[[1,8]])}))),function(e){return s.apply(this,arguments)}),fallback:Fl.errorService.handleGlobalError}),l=u.data,d=u.oneProps,p=u.beginSave,m=u.waitForChanges,f=we.useMemo((function(){var t=e.visibilityVariant;return[{type:a.Expansion,title:"Видимость полей",fields:t.map((function(e){var t=e.label,n=e.value;return{type:a.Checkbox,name:n,title:"".concat(t," (").concat(n,")")}}))}]}),[]);u_(r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:p();case 3:case"end":return e.stop()}}),e)}))));return Se(Qn,{children:[Se(ot,{items:p_,onAction:function(e){"save-action"===e&&p()},payload:{hasChanged:!!l,payload:n}}),Se(st,o({dirty:!0,handler:function(){return e.visibilityVariant.reduce((function(t,n){var r=n.value;return o(o({},t),{},c({},r,e.visibilitySet.has(r)))}),{})},payload:n,fields:f},d)),Se(lt,{})]})};return Se(br,{state:s,fallback:Fl.errorService.handleGlobalError,children:function(e){var t=i(e,3),n=t[0],r=t[1],a=t[2];return Se(u,{settings:n,visibilitySet:r,visibilityVariant:a})}})},isActive:function(e){return Dl(["/settings/field_visibility"],e)},isAvailable:function(){return!1}}],V_=function(){var e,n=function(){var e=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.settingsViewService.getMasterDetailMode();case 2:return e.t0=e.sent,e.next=5,Fl.permissionService.getPermissions();case 5:return e.t1=e.sent,e.next=8,Fl.featureService.getAccessLevel();case 8:return e.t2=e.sent,e.abrupt("return",[e.t0,e.t1,e.t2]);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Se(br,{state:n,reloadSubject:Fl.layoutService.reloadOutletSubject,fallback:Fl.errorService.handleGlobalError,children:(e=r(t().mark((function e(n){var r,a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i(n,3),a=r[0],o=r[1],s=r[2],e.abrupt("return",Se(ur,{history:Fl.routerService,routes:z_,payload:function(){return{menuMode:a,permissions:o,accessLevel:s}}}));case 2:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})})},A_=[{id:"list",element:ry,isActive:function(e){return Dl(["/task","/task_mine"],e)},isAvailable:function(){return!1}}],T_=function(e){e.id;var n,a=function(){var e=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.settingsViewService.getMasterDetailMode();case 2:return e.t0=e.sent,e.next=5,Fl.permissionService.getPermissions();case 5:return e.t1=e.sent,e.next=8,Fl.featureService.getAccessLevel();case 8:return e.t2=e.sent,e.abrupt("return",[e.t0,e.t1,e.t2]);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Se(br,{state:a,fallback:Fl.errorService.handleGlobalError,children:(n=r(t().mark((function e(n){var r,a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i(n,3),a=r[0],o=r[1],s=r[2],e.abrupt("return",Se(ur,{history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},routes:A_,payload:function(){return{menuMode:a,permissions:o,accessLevel:s}}}));case 2:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})})},C_=[{id:"user",label:"Общая информация",isActive:function(){return Dl(["/user_edit/:id","/user_edit/:id/user"])}},{id:"additional_info",label:"Дополнительная информация",isActive:function(){return Dl(["/user_edit/:id","/user_edit/:id/additional_info"])}},{id:"features",label:"Бизнес-функции",isActive:function(){return Dl(["/user_edit/:id/features"])}},{id:"files",label:"Файлы",isActive:function(){return Dl(["/user_edit/:id/files"])}}],F_=function(e,t){if(!t){var n=Il("id");"user"===e&&Fl.routerService.replace("/user_edit/".concat(n,"/user")),"additional_info"===e&&Fl.routerService.replace("/user_edit/".concat(n,"/additional_info")),"files"===e&&Fl.routerService.replace("/user_edit/".concat(n,"/files")),"features"===e&&Fl.routerService.replace("/user_edit/".concat(n,"/features"))}},L_=function(e){var t=e.children,n=e.payload,r=e.mode,i=void 0===r?H.Paper:r,a=we.useMemo((function(){return"tabs"===i?H.Tabs:H.Paper}),[i]);return Se(Ce,{withFixedPos:!0,payload:n,fixedPosHeaderAdjust:i===H.Paper?85:64,mode:a,options:C_,onActiveOptionChange:F_,children:t})},I_=[{type:a.Paper,fieldBottomMargin:"1",fields:[{type:a.Typography,typoVariant:"h6",placeholder:"Паспортные данные"},{type:a.Text,columns:"6",outlined:!1,name:"seriya-i-nomer_pasporta",title:"Серия и номер паспорта"},{type:a.Date,columns:"6",outlined:!1,name:"data-vydachi_pasporta",title:"Дата выдачи паспорта"},{type:a.Text,columns:"6",outlined:!1,name:"kem_vydan",title:"Кем выдан"},{type:a.Text,columns:"6",outlined:!1,name:"adres_propiski",title:"Адрес прописки"},{type:a.Text,columns:"6",outlined:!1,name:"adres_prozhivaniya",title:"Адрес проживания"}]},{type:a.Paper,fieldBottomMargin:"1",fields:[{type:a.Typography,typoVariant:"h6",placeholder:"Дополнительно"},{type:a.Text,columns:"6",outlined:!1,inputRows:3,name:"o_sebe",title:"О себе"},{type:a.Text,columns:"6",outlined:!1,inputRows:3,name:"hobbi",title:"Хобби"}]},{type:a.Paper,fieldBottomMargin:"1",fields:[{type:a.Typography,typoVariant:"h6",placeholder:"Социальные сети"},{type:a.Text,columns:"6",outlined:!1,name:"telegram",title:"Telegram"},{type:a.Text,columns:"6",outlined:!1,name:"fejsbuk",title:"Facebook"},{type:a.Text,columns:"6",outlined:!1,name:"instagram",title:"Instagram"},{type:a.Text,columns:"6",outlined:!1,name:"vatsap",title:"WhatsApp"},{type:a.Text,columns:"6",outlined:!1,name:"v_kontakte",title:"VK"},{type:a.Text,columns:"6",outlined:!1,name:"zum",title:"ZOOM"}]},{type:a.Paper,fieldBottomMargin:"1",fields:[{type:a.Typography,typoVariant:"h6",placeholder:"Дополнительные сведения"},{type:a.Group,fields:[{type:a.Group,columns:"6",fields:[{type:a.Component,element:function(){return Se(Je,{children:"Дети"})}},{type:a.Group,child:{type:a.Box,sx:{display:"grid",gridTemplateColumns:"auto auto 1fr"},fields:[{type:a.Radio,name:"deti",radioValue:"д",title:"Да"},{type:a.Radio,name:"deti",radioValue:"н",title:"Нет"}]}},{type:a.Group,columns:"12",fields:[{type:a.Combo,fieldRightMargin:"4",columns:"6",outlined:!1,name:"semejnoe_polozhenie",title:"Семейное положение",itemList:["Не выбрано","Холост/не замужем","Женат/замужем","Гражданский брак","Разведен(а)"]},{type:a.Date,fieldRightMargin:"4",columns:"6",outlined:!1,name:"data_priema_rezyume",title:"Дата приема резюме"},{type:a.Date,fieldRightMargin:"4",columns:"6",outlined:!1,name:"sertifikat",title:"Сертификат"},{type:a.Date,fieldRightMargin:"4",columns:"6",outlined:!1,name:"nachalo_opyta_raboty",title:"Начало опыта работы"},{type:a.Date,fieldRightMargin:"4",columns:"6",outlined:!1,name:"data_uvolneniya",title:"Дата увольнения"},{type:a.Text,outlined:!1,inputRows:3,name:"prichina_uvolneniya",title:"Причина увольнения"}]}]}]}]}];window.user_additional_info_fields=I_;var M_,j_,B_=[{type:et.Link,isVisible:function(){return!!Fl.routerService.previousPath},action:"list-action",label:Se(Ge,{sx:{display:"block"}})},{type:et.Link,action:"user-list-action",label:"Сотрудники"},{type:et.Link,action:"user-list-action",label:"Редактирование дополнительной информации сотрудника"},{type:et.Button,isDisabled:function(e){return!e.hasChanged},action:"user-save-action",label:"Сохранить"}],D_=[{id:"user",label:"Общая информация",isActive:function(){return Dl(["/user_view/:id","/user_view/:id/user"])}},{id:"additional_info",label:"Дополнительная информация",isActive:function(){return Dl(["/user_view/:id","/user_view/:id/additional_info"])}},{id:"features",isDisabled:function(e){return!e.permissions.hasUsersAccessLevelsPermission},label:"Бизнес-функции",isActive:function(){return Dl(["/user_view/:id/features"])}},{id:"files",label:"Файлы",isActive:function(){return Dl(["/user_view/:id/files"])}}],R_=function(e,t){if(!t){var n=Il("id");"user"===e&&Fl.routerService.replace("/user_view/".concat(n,"/user")),"additional_info"===e&&Fl.routerService.replace("/user_view/".concat(n,"/additional_info")),"features"===e&&Fl.routerService.replace("/user_view/".concat(n,"/features")),"files"===e&&Fl.routerService.replace("/user_view/".concat(n,"/files"))}},q_=function(e){var t=e.children,n=e.payload,r=e.mode,i=void 0===r?H.Paper:r,a=we.useMemo((function(){return"tabs"===i?H.Tabs:H.Paper}),[i]);return Se(Ce,{withFixedPos:!0,payload:n,fixedPosHeaderAdjust:i===H.Paper?85:64,mode:a,options:D_,onActiveOptionChange:R_,children:t})},P_=[{type:a.Paper,isVisible:function(e){return Ql(e,"seriya-i-nomer_pasporta","data-vydachi_pasporta","kem_vydan","adres_propiski","adres_prozhivaniya")},fieldBottomMargin:"1",fields:[{type:a.Typography,typoVariant:"h6",placeholder:"Паспортные данные"},{type:a.Text,isVisible:function(e){return Ql(e,"seriya-i-nomer_pasporta")},columns:"6",outlined:!1,name:"seriya-i-nomer_pasporta",title:"Серия и номер паспорта"},{type:a.Text,isVisible:function(e){return Ql(e,"data-vydachi_pasporta")},columns:"6",outlined:!1,name:"data-vydachi_pasporta",title:"Дата выдачи паспорта"},{type:a.Text,isVisible:function(e){return Ql(e,"kem_vydan")},columns:"6",outlined:!1,name:"kem_vydan",title:"Кем выдан"},{type:a.Text,isVisible:function(e){return Ql(e,"adres_propiski")},columns:"6",outlined:!1,name:"adres_propiski",title:"Адрес прописки"},{type:a.Text,isVisible:function(e){return Ql(e,"adres_prozhivaniya")},columns:"6",outlined:!1,name:"adres_prozhivaniya",title:"Адрес проживания"}]},{type:a.Paper,isVisible:function(e){return Ql(e,"o_sebe","hobbi")},fieldBottomMargin:"1",fields:[{type:a.Typography,typoVariant:"h6",placeholder:"Дополнительно"},{type:a.Text,isVisible:function(e){return Ql(e,"o_sebe")},columns:"6",outlined:!1,inputRows:3,name:"o_sebe",title:"О себе"},{type:a.Text,isVisible:function(e){return Ql(e,"hobbi")},columns:"6",outlined:!1,inputRows:3,name:"hobbi",title:"Хобби"}]},{type:a.Paper,isVisible:function(e){return Ql(e,"telegram","fejsbuk","instagram","vatsap","v_kontakte","zum")},fieldBottomMargin:"1",fields:[{type:a.Typography,typoVariant:"h6",placeholder:"Социальные сети"},{type:a.Text,isVisible:function(e){return Ql(e,"telegram")},columns:"6",outlined:!1,name:"telegram",title:"Telegram"},{type:a.Text,isVisible:function(e){return Ql(e,"fejsbuk")},columns:"6",outlined:!1,name:"fejsbuk",title:"Facebook"},{type:a.Text,isVisible:function(e){return Ql(e,"instagram")},columns:"6",outlined:!1,name:"instagram",title:"Instagram"},{type:a.Text,isVisible:function(e){return Ql(e,"vatsap")},columns:"6",outlined:!1,name:"vatsap",title:"WhatsApp"},{type:a.Text,isVisible:function(e){return Ql(e,"v_kontakte")},columns:"6",outlined:!1,name:"v_kontakte",title:"VK"},{type:a.Text,isVisible:function(e){return Ql(e,"zum")},columns:"6",outlined:!1,name:"zum",title:"ZOOM"}]},{type:a.Paper,isVisible:function(e){return Ql(e,"deti","semejnoe_polozhenie","data_priema_rezyume","sertifikat","nachalo_opyta_raboty","data_uvolneniya","prichina_uvolneniya")},fieldBottomMargin:"1",fields:[{type:a.Typography,typoVariant:"h6",placeholder:"Дополнительные сведения"},{type:a.Group,fields:[{type:a.Group,isVisible:function(e){return Ql(e,"deti")},columns:"6",fields:[{type:a.Component,element:function(){return Se(Je,{children:"Дети"})}},{type:a.Group,child:{type:a.Box,sx:{display:"grid",gridTemplateColumns:"auto auto 1fr"},fields:[{type:a.Radio,isVisible:function(e){return Ql(e,"deti")},name:"deti",radioValue:"д",title:"Да"},{type:a.Radio,isVisible:function(e){return Ql(e,"deti")},name:"deti",radioValue:"н",title:"Нет"}]}},{type:a.Group,columns:"12",fields:[{type:a.Text,isVisible:function(e){return Ql(e,"semejnoe_polozhenie")},fieldRightMargin:"4",columns:"6",outlined:!1,name:"semejnoe_polozhenie",title:"Семейное положение"},{type:a.Text,isVisible:function(e){return Ql(e,"data_priema_rezyume")},fieldRightMargin:"4",columns:"6",outlined:!1,name:"data_priema_rezyume",title:"Дата приема резюме"},{type:a.Text,isVisible:function(e){return Ql(e,"sertifikat")},fieldRightMargin:"4",columns:"6",outlined:!1,name:"sertifikat",title:"Сертификат"},{type:a.Text,isVisible:function(e){return Ql(e,"nachalo_opyta_raboty")},fieldRightMargin:"4",columns:"6",outlined:!1,name:"nachalo_opyta_raboty",title:"Начало опыта работы"},{type:a.Text,isVisible:function(e){return Ql(e,"data_uvolneniya")},fieldRightMargin:"4",columns:"6",outlined:!1,name:"data_uvolneniya",title:"Дата увольнения"},{type:a.Text,isVisible:function(e){return Ql(e,"prichina_uvolneniya")},outlined:!1,inputRows:3,name:"prichina_uvolneniya",title:"Причина увольнения"}]}]}]}]}],E_=[{type:et.Link,action:"list-action",label:"Сотрудники"},{type:et.Link,action:"list-action",label:"Дополнительная информация сотрудника"},{type:et.Button,isDisabled:function(e){return!e.payload.permissions.hasUsersUpdatePermission},action:"edit-action",label:"Редактировать"}],N_=[{type:et.Link,isVisible:function(){return!!Fl.routerService.previousPath},action:"list-action",label:Se(Ge,{sx:{display:"block"}})},{type:et.Link,action:"user-list-action",label:"Сотрудники"},{type:et.Link,action:"user-list-action",label:"Редактирование бизнес-функций сотрудника"},{type:et.Button,isDisabled:function(e){return!e.hasChanged},action:"user-save-action",label:"Сохранить"}],O_=[{type:et.Link,action:"list-action",label:"Сотрудники"},{type:et.Link,action:"list-action",label:"Бизнес-Функции сотрудника"},{type:et.Button,action:"edit-action",label:"Редактировать"}],U_=[{type:et.Link,isVisible:function(){return!!Fl.routerService.previousPath},action:"list-action",label:Se(Ge,{sx:{display:"block"}})},{type:et.Link,action:"list-action",label:"Сотрудники"},{type:et.Link,action:"list-action",label:"Редактирование файлов сотрудника"},{type:et.Button,isDisabled:function(e){return!e.hasChanged},action:"save-action",label:"Сохранить"}],H_=[{type:et.Link,action:"list-action",label:"Сотрудники"},{type:et.Link,action:"list-action",label:"Файлы сотрудника"},{type:et.Button,isDisabled:function(e){return!e.payload.permissions.hasUsersUpdatePermission},action:"edit-action",label:"Редактировать"}],W_=Me.createLoader(28),$_=[{type:a.Text,outlined:!0,name:"email",title:"Email"},{type:a.Text,outlined:!0,name:"phone",title:"Телефон"}],G_=[{type:dt.Component,headerName:"Аватар",sortable:!1,width:function(){return 65},element:function(e){var n,i=e.avatar,a=e.email;return Se(Ne,{Loader:W_,children:(n=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=6;break}return e.next=3,Fl.appwriteService.getImageURL(i);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0="";case 7:return n=e.t0,e.abrupt("return",Se(qe,{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:Se(pt,{src:n||void 0,alt:a})}));case 9:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})})}},{type:dt.Compute,sortable:!1,field:"index",headerName:"Номер",element:function(e){var t=e.index;return Se(Ft,{content:t})},width:function(){return 100}},{type:dt.Compute,sortable:!1,headerName:"Имя",compute:function(e){var t=e.last_name,n=void 0===t?"":t,r=e.first_name,i=void 0===r?"":r,a=e.middle_name;return[n,i,void 0===a?"":a].filter((function(e){return e.length})).join(" ")||""},width:function(e){return Math.max((e-265)/3,200)}},{type:dt.Compute,isVisible:function(e){var t=e.payload.permissions;return te(t.hasContactNumberPermission,t.hasUsersViewPhoneAndEmailPermission)},sortable:!1,compute:function(e){return e.rabochij_telefon||""},field:"rabochij_telefon",headerName:"Рабочий телефон",width:function(e){return Math.max((e-265)/3,200)}},{type:dt.Compute,sortable:!1,compute:function(e){return e.email||""},isVisible:function(e){var t=e.payload.permissions;return te(t.hasContactEmailPermission,t.hasUsersViewPhoneAndEmailPermission)},field:"email",headerName:"Email",width:function(e){return Math.max((e-265)/3,200)}},{type:dt.Action,headerName:"Действие",sortable:!1,width:function(){return 100}}],Y_=[{type:Ot.Menu,options:[{action:"update-now"},{action:"resort-action"},{action:"drop-filters"}]}],K_=[{label:"Редактировать",isDisabled:function(e,t){return!t.permissions.hasUsersUpdatePermission},action:"edit-action"},{label:"В архиве",action:"toggle-archive",icon:Kt,isVisible:function(e){var t=e.system_is_remove;return te(!t)}},{label:"В архиве",action:"toggle-archive",icon:Xt,isVisible:function(e){var t=e.system_is_remove;return te(!!t)}}],X_=function(){return window.innerHeight-100},J_=Me.createLoader(28),Z_=[{type:a.Text,outlined:!0,name:"email",title:"Email"},{type:a.Text,outlined:!0,name:"phone",title:"Телефон"}],Q_=[{type:dt.Component,headerName:"Аватар",sortable:!1,width:function(){return 65},element:function(e){var n,i=e.avatar,a=e.email;return Se(Ne,{Loader:J_,children:(n=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=6;break}return e.next=3,Fl.appwriteService.getImageURL(i);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0="";case 7:return n=e.t0,e.abrupt("return",Se(qe,{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:Se(pt,{src:n||void 0,alt:a})}));case 9:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})})}},{type:dt.Compute,sortable:!1,field:"index",headerName:"Номер",element:function(e){var t=e.index;return Se(Ft,{content:t})},width:function(){return 100}},{type:dt.Compute,sortable:!1,headerName:"Имя",compute:function(e){var t=e.last_name,n=void 0===t?"":t,r=e.first_name,i=void 0===r?"":r,a=e.middle_name;return[n,i,void 0===a?"":a].filter((function(e){return e.length})).join(" ")||""},width:function(){return 125}},{type:dt.Compute,isVisible:function(e){var t=e.payload.permissions;return te(t.hasContactNumberPermission,t.hasUsersViewPhoneAndEmailPermission)},sortable:!1,compute:function(e){return e.rabochij_telefon||""},field:"rabochij_telefon",headerName:"Рабочий телефон",width:function(){return 180}},{type:dt.Compute,sortable:!1,compute:function(e){return e.email||""},isVisible:function(e){var t=e.payload.permissions;return te(t.hasContactEmailPermission,t.hasUsersViewPhoneAndEmailPermission)},field:"email",headerName:"Email",width:function(){return 180}},{type:dt.Action,headerName:"Действие",sortable:!1,width:function(){return 100}}],ek=[{type:Ot.Menu,options:[{action:"update-now"},{action:"resort-action"},{action:"drop-filters"}]}],tk=[{label:"Редактировать",isDisabled:function(e,t){return!t.permissions.hasUsersUpdatePermission},action:"edit-action"},{label:"В архиве",action:"toggle-archive",icon:Kt,isVisible:function(e){var t=e.system_is_remove;return te(!t)}},{label:"В архиве",action:"toggle-archive",icon:Xt,isVisible:function(e){var t=e.system_is_remove;return te(!!t)}}],nk=function(){return window.innerHeight-100},rk=function(e){var n=e.payload,i=Be(Fl.userViewService.reloadSubject),a=sr(Fl.routerService.locationState,{fallback:Fl.errorService.handleGlobalError}).listProps,s=kc(),u=function(){var e=r(t().mark((function e(n,r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("edit-action"===n&&Fl.routerService.push("/user_edit/".concat(r.id)),"remove-action"!==n){e.next=5;break}return e.next=4,Fl.userViewService.remove(r.id);case 4:i.next();case 5:if("toggle-archive"!==n){e.next=8;break}return e.next=8,Fl.userViewService.toggleArchive(r.id);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Se(Ae,{children:Se(Vn,o({withSearch:!0,withSingleSort:!0,noInitialFilters:!0,fetchDebounce:da,title:"Сотрудники",filterLabel:"Фильтры",reloadSubject:i,heightRequest:nk,rowActions:tk,actions:ek,filters:Z_,columns:Q_,handler:s,onRowAction:u,onRowClick:function(e){Fl.routerService.push("/user_view/".concat(e.id))},selectionMode:ht.Multiple,slots:{FilterListSlot:ft},payload:n},a))})},ik=[{id:"common",element:rk,isActive:function(e){return Dl(["/user"],e)},isAvailable:function(){return!1}},{id:"common",element:rk,isActive:function(e){return Dl(["/user_common"],e)},isAvailable:function(){return!1}},{id:"archive",element:function(e){var n=e.payload,i=Be(Fl.userViewService.reloadSubject),a=sr(Fl.routerService.locationState,{fallback:Fl.errorService.handleGlobalError}).listProps,s=kc(),u=function(){var e=r(t().mark((function e(n,r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("edit-action"===n&&Fl.routerService.push("/user_edit/".concat(r.id)),"remove-action"!==n){e.next=5;break}return e.next=4,Fl.userViewService.remove(r.id);case 4:i.next();case 5:if("toggle-archive"!==n){e.next=8;break}return e.next=8,Fl.userViewService.toggleArchive(r.id);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Se(Ae,{children:Se(Vn,o({withSearch:!0,withSingleSort:!0,noInitialFilters:!0,fetchDebounce:da,title:"Сотрудники",filterLabel:"Фильтры",reloadSubject:i,heightRequest:X_,rowActions:K_,actions:Y_,filters:$_,columns:G_,handler:s,onRowAction:u,onRowClick:function(e){Fl.routerService.push("/user_view/".concat(e.id))},selectionMode:ht.Multiple,slots:{FilterListSlot:ft},payload:function(){return o(o({},n),{},{_archive:!0})}},a))})},isActive:function(e){return Dl(["/user_archive"],e)},isAvailable:function(){return!1}}],ak=$l()((function(e){return{root:{alignItems:"center",display:"flex"},avatar:{height:64,marginRight:e.spacing(2),width:64},avatarWrapper:{height:"100%",minWidth:60},content:{width:"100%"}}})),ok=Me.createLoader(24),sk=function(e){var n,i,a=e.readonly,o=e.avatar,s=e.email,u=e.onChange,l=ak().classes;return Se(qe,{className:l.root,children:[Se(qe,{className:l.avatarWrapper,children:Se(Ne,{payload:o,Loader:ok,children:(i=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return e.next=3,Fl.appwriteService.getImageURL(n);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=void 0;case 7:return r=e.t0,e.abrupt("return",Se(pt,{alt:s,src:r,className:l.avatar}));case 9:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})})}),Se("div",{className:l.content,children:[Se(Kr,{container:!0,spacing:1,children:[Se(Kr,{item:!0,children:Se(xt,{disabled:a,color:"primary",onClick:(n=r(t().mark((function e(){var n,r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wr("image/jpeg, image/png");case 2:if(!(n=e.sent)){e.next=8;break}return e.next=6,Fl.appwriteService.uploadFile(n);case 6:r=e.sent,u(r);case 8:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)}),size:"small",type:"button",variant:"outlined",children:"Выбрать фото"})}),Se(Kr,{item:!0,children:Se(en,{disabled:!o||a,onClick:function(){return u(null)},color:"primary",size:"small",type:"button",variant:"text",children:"Удалить"})}),Se(Kr,{item:!0,xs:!0})]}),Se(Je,{color:"textSecondary",variant:"caption",children:"Размер: 200x200, максимальный размер файла: 5Мб"})]})]})},uk=[{type:a.Paper,fieldBottomMargin:"1",fields:[{type:a.Box,sx:{display:"grid",gridTemplateColumns:"1fr auto"},fields:[{type:a.Component,element:function(e){var t=e.readonly,n=e.avatar,r=e.email,i=e.onChange;return Se(sk,{avatar:n,email:r,readonly:t,onChange:function(e){return i({avatar:e})}})}},{type:a.Switch,fieldBottomMargin:"0",name:"active",title:"Активация"}]}]},{type:a.Paper,fieldBottomMargin:"1",fields:[{type:a.Typography,typoVariant:"h6",placeholder:"Основные данные"},{type:a.Text,name:"last_name",title:"Фамилия",outlined:!1,isInvalid:function(e){return e.last_name?null:"Необходимо заполнить поле"}},{type:a.Text,name:"first_name",title:"Имя",outlined:!1,isInvalid:function(e){return e.first_name?null:"Необходимо заполнить поле"}},{type:a.Text,name:"middle_name",title:"Отчество",outlined:!1},{type:a.Group,fields:[{type:a.Group,columns:"6",fields:[{type:a.Component,element:function(){return Se(Je,{children:"Пол"})}},{type:a.Group,child:{type:a.Box,sx:{display:"grid",gridTemplateColumns:"auto auto 1fr"},fields:[{type:a.Radio,name:"pol",radioValue:"м",title:"Мужской"},{type:a.Radio,name:"pol",radioValue:"ж",title:"Женский"}]}},{type:a.Group,columns:"12",fields:[{type:a.Date,fieldRightMargin:"4",columns:"6",outlined:!1,name:"data_rozhdeniya",title:"Дата рождения"},{type:a.Date,fieldRightMargin:"4",columns:"6",outlined:!1,name:"data_trudoustrojstva",title:"Дата трудоустройства"},{type:a.Text,fieldRightMargin:"4",columns:"6",outlined:!1,readonly:!0,name:"email",title:"Email",placeholder:"Добавить рабочий email"},{type:a.Text,fieldRightMargin:"4",columns:"6",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"rabochij_telefon",title:"Рабочий телефон",placeholder:"Добавить номер"}]}]}]}]},{type:a.Paper,fieldBottomMargin:"1",fields:[{type:a.Typography,typoVariant:"h6",placeholder:"Дополнительный телефон"},{type:a.Text,columns:"6",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"lichnyj_nomer",title:"Личный номер"}]},{type:a.Paper,fieldBottomMargin:"1",fields:[{type:a.Typography,typoVariant:"h6",placeholder:"Статус"},{type:a.Combo,columns:"6",outlined:!1,name:"ofis",title:"Офис",itemList:[]},{type:a.Combo,isDisabled:function(e,t){return!t.permissions.hasUsersAccessLevelsPermission},columns:"6",outlined:!1,isInvalid:function(e){return e.user_role?null:"Необходимо заполнить поле"},itemList:(j_=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getUserRoles();case 2:return n=e.sent,e.abrupt("return",Object.keys(n));case 4:case"end":return e.stop()}}),e)}))),function(){return j_.apply(this,arguments)}),tr:(M_=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getUserRoles();case 2:return r=e.sent,e.abrupt("return",S.get(r,n)||n);case 4:case"end":return e.stop()}}),e)}))),function(e){return M_.apply(this,arguments)}),name:"user_role",title:"Роль"},{type:a.Combo,columns:"6",outlined:!1,name:"filial",title:"Филиал",itemList:[]},{type:a.Text,columns:"6",outlined:!1,name:"dolzhnost",title:"Должность"},{type:a.Combo,columns:"6",outlined:!1,name:"otdel",title:"Отдел",itemList:[]},{type:a.Combo,columns:"6",outlined:!1,name:"status_sotrudnika",title:"Статус сотрудника",itemList:["Новый","В штате","Вне штата","Не работает","Уволен"]},{type:a.Group,columns:"6",fieldRightMargin:"0",fieldBottomMargin:"0",child:{type:a.Div,style:{display:"grid",gridTemplateColumns:"auto auto 1fr"},fields:[{type:a.Checkbox,name:"nachalnik_otdela",title:"Начальник отдела"}]}}]}];window.user_fields=uk;var lk,ck,dk=[{type:et.Link,isVisible:function(){return!!Fl.routerService.previousPath},action:"list-action",label:Se(Ge,{sx:{display:"block"}})},{type:et.Link,action:"list-action",label:"Сотрудники"},{type:et.Link,action:"list-action",label:"Редактирование общей информации сотрудника"},{type:et.Button,isDisabled:function(e){return!e.hasChanged},action:"save-action",label:"Сохранить"}],pk=$l()((function(e){return{root:{alignItems:"center",display:"flex"},avatar:{height:64,marginRight:e.spacing(2),width:64},avatarWrapper:{height:"100%",minWidth:60},content:{width:"100%"}}})),mk=Me.createLoader(24),fk=function(e){var n,i,a=e.readonly,o=e.avatar,s=e.email,u=e.onChange,l=pk().classes;return Se(qe,{className:l.root,children:[Se(qe,{className:l.avatarWrapper,children:Se(Ne,{payload:o,Loader:mk,children:(i=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return e.next=3,Fl.appwriteService.getImageURL(n);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=void 0;case 7:return r=e.t0,e.abrupt("return",Se(pt,{alt:s,src:r,className:l.avatar}));case 9:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})})}),Se("div",{className:l.content,children:[Se(Kr,{container:!0,spacing:1,children:[Se(Kr,{item:!0,children:Se(xt,{disabled:a,color:"primary",onClick:(n=r(t().mark((function e(){var n,r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wr("image/jpeg, image/png");case 2:if(!(n=e.sent)){e.next=8;break}return e.next=6,Fl.appwriteService.uploadFile(n);case 6:r=e.sent,u(r);case 8:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)}),size:"small",type:"button",variant:"outlined",children:"Выбрать фото"})}),Se(Kr,{item:!0,children:Se(en,{disabled:!o||a,onClick:function(){return u(null)},color:"primary",size:"small",type:"button",variant:"text",children:"Удалить"})}),Se(Kr,{item:!0,xs:!0})]}),Se(Je,{color:"textSecondary",variant:"caption",children:"Размер: 200x200, максимальный размер файла: 5Мб"})]})]})},hk=[{type:a.Paper,fieldBottomMargin:"1",fields:[{type:a.Box,sx:{display:"grid",gridTemplateColumns:"1fr auto"},fields:[{type:a.Component,element:function(e){var t=e.readonly,n=e.avatar,r=e.email,i=e.onChange;return Se(fk,{avatar:n,email:r,readonly:t,onChange:function(e){return i({avatar:e})}})}},{type:a.Switch,fieldBottomMargin:"0",name:"active",title:"Активация"}]}]},{type:a.Paper,isVisible:function(e){return Ql(e,"first_name","last_name","middle_name")},fieldBottomMargin:"1",fields:[{type:a.Typography,typoVariant:"h6",placeholder:"Личная информация"},{type:a.Text,isVisible:function(e){return Ql(e,"last_name")},name:"last_name",title:"Фамилия",outlined:!1,isInvalid:function(e){return e.last_name?null:"Необходимо заполнить поле"}},{type:a.Text,isVisible:function(e){return Ql(e,"first_name")},name:"first_name",title:"Имя",outlined:!1,isInvalid:function(e){return e.first_name?null:"Необходимо заполнить поле"}},{type:a.Text,isVisible:function(e){return Ql(e,"middle_name")},name:"middle_name",title:"Отчество",outlined:!1},{type:a.Group,isVisible:function(e){return Ql(e,"pol","data_rozhdeniya","data_trudoustrojstva","email","rabochij_telefon")},fields:[{type:a.Group,isVisible:function(e){return Ql(e,"pol")},columns:"6",fields:[{type:a.Component,element:function(){return Se(Je,{children:"Пол"})}},{type:a.Group,child:{type:a.Box,sx:{display:"grid",gridTemplateColumns:"auto auto 1fr"},fields:[{type:a.Radio,isVisible:function(e){return Ql(e,"pol")},name:"pol",radioValue:"м",title:"Мужской"},{type:a.Radio,isVisible:function(e){return Ql(e,"pol")},name:"pol",radioValue:"ж",title:"Женский"}]}},{type:a.Group,columns:"12",fields:[{type:a.Text,isVisible:function(e){return Ql(e,"data_rozhdeniya")},fieldRightMargin:"4",columns:"6",outlined:!1,name:"data_rozhdeniya",title:"Дата рождения"},{type:a.Text,isVisible:function(e){return Ql(e,"data_trudoustrojstva")},fieldRightMargin:"4",columns:"6",outlined:!1,name:"data_trudoustrojstva",title:"Дата трудоустройства"},{type:a.Text,features:["hasUsersViewPhoneAndEmailPermission"],isVisible:function(e){return Ql(e,"email")},fieldRightMargin:"4",columns:"6",outlined:!1,name:"email",title:"Email",placeholder:"Добавить рабочий email"},{type:a.Text,features:["hasUsersViewPhoneAndEmailPermission"],isVisible:function(e){return Ql(e,"rabochij_telefon")},fieldRightMargin:"4",columns:"6",outlined:!1,name:"rabochij_telefon",title:"Рабочий телефон",placeholder:"Добавить номер"}]}]}]}]},{type:a.Paper,features:["hasUsersViewPhoneAndEmailPermission"],isVisible:function(e){return Ql(e,"lichnyj_nomer")},fieldBottomMargin:"1",fields:[{type:a.Typography,typoVariant:"h6",placeholder:"Дополнительный телефон"},{type:a.Text,isVisible:function(e){return Ql(e,"lichnyj_nomer")},columns:"6",outlined:!1,name:"lichnyj_nomer",title:"Личный номер"}]},{type:a.Paper,isVisible:function(e){return Ql(e,"ofis","user_role","filial","dolzhnost","otdel","status_sotrudnika","nachalnik_otdela")},fieldBottomMargin:"1",fields:[{type:a.Typography,typoVariant:"h6",placeholder:"Статус"},{type:a.Text,isVisible:function(e){return Ql(e,"ofis")},columns:"6",outlined:!1,name:"ofis",title:"Офис"},{type:a.Combo,isVisible:function(e){return Ql(e,"user_role")},columns:"6",outlined:!1,isInvalid:function(e){return e.user_role?null:"Необходимо заполнить поле"},itemList:(ck=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getUserRoles();case 2:return n=e.sent,e.abrupt("return",Object.keys(n));case 4:case"end":return e.stop()}}),e)}))),function(){return ck.apply(this,arguments)}),tr:(lk=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.dictService.getUserRoles();case 2:return r=e.sent,e.abrupt("return",S.get(r,n)||n);case 4:case"end":return e.stop()}}),e)}))),function(e){return lk.apply(this,arguments)}),name:"user_role",title:"Роль"},{type:a.Text,isVisible:function(e){return Ql(e,"filial")},columns:"6",outlined:!1,name:"filial",title:"Филиал"},{type:a.Text,isVisible:function(e){return Ql(e,"dolzhnost")},columns:"6",outlined:!1,name:"dolzhnost",title:"Должность"},{type:a.Text,isVisible:function(e){return Ql(e,"otdel")},columns:"6",outlined:!1,name:"otdel",title:"Отдел"},{type:a.Text,isVisible:function(e){return Ql(e,"status_sotrudnika")},columns:"6",outlined:!1,name:"status_sotrudnika",title:"Статус сотрудника"},{type:a.Component,element:function(e){var t=e.nachalnik_otdela;return Se("div",{children:Se(qe,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",gap:1},children:t&&Se(Qt,{label:"Начальник отдела"})})})}}]}],yk=[{type:et.Link,action:"list-action",label:"Сотрудники"},{type:et.Link,action:"list-action",label:"Общая информация сотрудника"},{type:et.Button,isDisabled:function(e){return!e.payload.permissions.hasUsersUpdatePermission},action:"edit-action",label:"Редактировать"}],vk=[{id:"list",element:function(e){var t=e.payload;return Se(ur,{history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},routes:ik,payload:t})},isActive:function(e){return Dl(["/user","/user_common","/user_archive"],e)},isAvailable:function(){return!1}},{id:"user",element:Pv((function(){var e=Il("id");Fl.routerService.push("/user_edit/".concat(e,"/user"))})),isActive:function(e){return Dl(["/user_edit/:id"],e)}},{id:"user",element:function(e){var t=e.payload,n=e.onChange,r=e.formState,i=e.data,a=e.beginSave;return Se(Ae,{children:[Se(ot,{onAction:function(e){"list-action"===e&&Fl.routerService.back("/user"),"save-action"===e&&a()},items:dk,payload:r}),Se(jl,{}),Se(L_,{payload:t,mode:t.menuMode,children:Se(st,{dirty:!0,handler:function(){return i},fields:uk,payload:t,features:t.permissions,onChange:n})}),Se(lt,{})]})},isActive:function(e){return Dl(["/user_edit/:id/user"],e)}},{id:"files",element:function(e){var n,i,a,o=e.formState,s=e.onChange,u=e.beginSave,l=e.data,c=e.payload,d=nt({history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),p=d.handleLoadStart,m=d.handleLoadEnd;return Se(Ae,{children:[Se(ot,{items:U_,onAction:function(e){"list-action"===e&&Fl.routerService.back("/user"),"save-action"===e&&u()},payload:o}),Se(jl,{}),Se(L_,{payload:c,mode:c.menuMode,children:[Se(fn,{sx:{p:1},children:Se(Un,{accept:"*",multiple:!0,items:l,tr:(a=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.appwriteService.tryReadFileName(n);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=n;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),fallback:Fl.errorService.handleGlobalError,onClick:(i=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.appwriteService.getFileURL(n);case 2:return r=e.sent,e.next=5,Fl.appwriteService.readFileName(n);case 5:i=e.sent,zt(r,i);case 7:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)}),onUpload:function(e){return Fl.appwriteService.uploadFile(e)},onChange:(n=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(n);case 1:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)}),onLoadStart:p,onLoadEnd:m})}),Se(lt,{})]})]})},isActive:function(e){return Dl(["/user_edit/:id/files"],e)}},{id:"additional_info",element:function(e){var t=e.payload,n=e.onChange,r=e.formState,i=e.data,a=e.beginSave;return Se(Ae,{children:[Se(ot,{onAction:function(e){"user-list-action"===e&&Fl.routerService.back("/user"),"user-save-action"===e&&a()},items:B_,payload:r}),Se(jl,{}),Se(L_,{payload:t,mode:t.menuMode,children:Se(st,{dirty:!0,handler:function(){return i},fields:I_,features:t.permissions,onChange:n})}),Se(lt,{})]})},isActive:function(e){return Dl(["/user_edit/:id/additional_info"],e)}},{id:"features",element:function(e){var t=e.beginSave,n=e.data,r=e.formState,a=e.payload,s=e.onChange;return Se(Ae,{children:[Se(ot,{items:N_,onAction:function(e){"user-list-action"===e&&Fl.routerService.back("/user"),"user-save-action"===e&&t()},payload:r}),Se(jl,{}),Se(L_,{payload:a,mode:a.menuMode,children:[Se(Gr,{expandAll:!0,handler:function(){return n.reduce((function(e,t){return o(o({},e),{},c({},t,!0))}),{})},features:__,change:function(e,t){if(e&&!t){var n=Object.entries(e).filter((function(e){var t=i(e,2);t[0];return!!t[1]})).map((function(e){return i(e,1)[0]}));s(n)}}}),Se(lt,{})]})]})},isActive:function(e){return Dl(["/user_edit/:id/features"],e)}},{id:"user",element:Pv((function(){var e=Il("id");Fl.routerService.push("/user_view/".concat(e,"/user"))})),isActive:function(e){return Dl(["/user_view/:id"],e)}},{id:"user",element:function(e){var n,i,a=e.params.id,o=e.payload,s=e.onChange,u=e.formState,l=e.data,c=at(l),d=rt({AfterTitle:function(e){var t=e.onClose;return Se(We,{size:"small",onClick:t,children:Se(it,{})})},fields:uk,payload:o,features:o.permissions,outlinePaper:!0,handler:(i=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.userViewService.tryRead(a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)}),fullScreen:!0,title:"Редактировать",onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},onSubmit:(n=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!0,e.prev=1,!n){e.next=5;break}return e.next=5,Fl.userViewService.update(a,n);case 5:e.next=13;break;case 7:return e.prev=7,e.t0=e.catch(1),r=!1,i=Xs(e.t0),Fl.alertService.notify(i),e.abrupt("return",!1);case 13:return e.prev=13,e.abrupt("return",r);case 16:case"end":return e.stop()}}),e,null,[[1,7,13,16]])}))),function(e){return n.apply(this,arguments)}),submitLabel:"Сохранить"}),p=d.pickData,m=d.render;return Se(Ae,{children:[Se(ot,{onAction:function(e){"list-action"===e&&Fl.routerService.push("/user"),"edit-action"===e&&p()},items:yk,payload:u}),Se(jl,{}),Se(q_,{payload:o,mode:o.menuMode,children:Se(st,{dirty:!0,readonly:!0,handler:function(){return l},fields:hk,features:o.permissions,onChange:s,payload:o,changeSubject:c})}),Se(lt,{}),m()]})},isActive:function(e){return Dl(["/user_view/:id/user"],e)}},{id:"additional_info",element:function(e){var n,i,a=e.params.id,o=e.payload,s=e.onChange,u=e.formState,l=e.data,c=at(l),d=rt({AfterTitle:function(e){var t=e.onClose;return Se(We,{size:"small",onClick:t,children:Se(it,{})})},fields:I_,payload:o,features:o.permissions,outlinePaper:!0,handler:(i=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.userViewService.tryRead(a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)}),fullScreen:!0,title:"Редактировать",onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},onSubmit:(n=r(t().mark((function e(n){var i,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!0,e.prev=1,!n){e.next=10;break}if(!n.user_role){e.next=8;break}return o=new Set(n.user_features||[]),e.next=7,Promise.all(n.user_role.map(function(){var e=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.roleViewService.tryRead(n);case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return");case 5:(i=r.role_features)&&i.forEach((function(e){return o.add(e)}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:n.user_features=p(o);case 8:return e.next=10,Fl.userViewService.update(a,n);case 10:e.next=18;break;case 12:return e.prev=12,e.t0=e.catch(1),i=!1,s=Xs(e.t0),Fl.alertService.notify(s),e.abrupt("return",!1);case 18:return e.prev=18,e.abrupt("return",i);case 21:case"end":return e.stop()}}),e,null,[[1,12,18,21]])}))),function(e){return n.apply(this,arguments)}),submitLabel:"Сохранить"}),m=d.pickData,f=d.render;return Se(Ae,{children:[Se(ot,{onAction:function(e){"list-action"===e&&Fl.routerService.push("/back"),"edit-action"===e&&m()},items:E_,payload:u}),Se(jl,{}),Se(q_,{payload:o,mode:o.menuMode,children:Se(st,{dirty:!0,readonly:!0,handler:function(){return l},fields:P_,features:o.permissions,onChange:s,payload:o,changeSubject:c})}),Se(lt,{}),f()]})},isActive:function(e){return te(Dl(["/user_view/:id/additional_info"],e))}},{id:"files",element:function(e){var n,i,a,o,s=e.params.id,u=e.formState,l=e.onChange,c=e.data,d=e.payload,p=Tf({data:c,onSubmit:(n=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.userViewService.update(s,{user_files:n});case 2:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})}),m=p.render,f=p.pickFiles;return Se(Ae,{children:[Se(ot,{items:H_,onAction:function(e){"list-action"===e&&Fl.routerService.push("/user"),"edit-action"===e&&f()},payload:u}),Se(jl,{}),Se(q_,{payload:d,mode:d.menuMode,children:[Se(fn,{sx:{p:1},children:Se(Un,{accept:"*",multiple:!0,disabled:!0,items:c,tr:(o=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.appwriteService.tryReadFileName(n);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=n;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)}),fallback:Fl.errorService.handleGlobalError,onClick:(a=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.appwriteService.getFileURL(n);case 2:return r=e.sent,e.next=5,Fl.appwriteService.readFileName(n);case 5:i=e.sent,zt(r,i);case 7:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),onUpload:function(e){return Fl.appwriteService.uploadFile(e)},onChange:(i=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l(n);case 1:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})})}),Se(lt,{})]}),m()]})},isActive:function(e){return Dl(["/user_view/:id/files"],e)}},{id:"features",element:function(e){var n=e.params.id,a=e.data,s=e.formState,u=e.payload,l=at(a),d=Be();we.useEffect((function(){return l.subscribe((function(e){var t,n=e.reduce((function(e,t){return o(o({},e),{},c({},t,!0))}),{});__.forEach((function(e){return e.children.forEach((function(e){var t=e.name;n[t]||(n[t]=!1)}))})),null===(t=u.features)||void 0===t||t.forEach((function(e){n[e]=!0})),d.next(n)}))}),[]);var p,m,f=function(e,n){var a=n.data,s=n.onSubmit,u=n.onChange,l=n.fullScreen,d=n.expandAll,p=nt({history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)}}),m=p.handleLoadStart,f=p.handleLoadEnd,h=function(){var e=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=4;break}return r=Object.entries(n).filter((function(e){var t=i(e,2);return t[0],!!t[1]})).map((function(e){return i(e,1)[0]})),e.next=4,s&&s(r);case 4:return e.abrupt("return",!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Yr({expandAll:d,features:e,handler:function(){return a.reduce((function(e,t){return o(o({},e),{},c({},t,!0))}),{})},fullScreen:l,fallback:Fl.errorService.handleGlobalError,onLoadStart:m,onLoadEnd:f,onSubmit:h,onChange:function(e,t){if(e&&!t){var n=Object.entries(e).filter((function(e){var t=i(e,2);return t[0],!!t[1]})).map((function(e){return i(e,1)[0]}));u&&u(n)}},submitLabel:"Сохранить"})}(__,{expandAll:!0,data:a,fullScreen:!0,onSubmit:(p=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.userViewService.update(n,{user_features:r});case 2:case"end":return e.stop()}}),e)}))),function(e){return p.apply(this,arguments)})}),h=f.render,y=f.pickData;return Se(Ae,{children:[Se(ot,{items:O_,onAction:function(e){"list-action"===e&&Fl.routerService.push("/user"),"edit-action"===e&&y()},payload:s}),Se(jl,{}),Se(q_,{payload:u,mode:u.menuMode,children:[Se(Ne,{payload:n,children:(m=r(t().mark((function e(n){var r,i,a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.userViewService.read(n);case 2:if(r=e.sent,null!=(i=r.user_role)&&i.length){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,Fl.roleViewService.tryRead(i[0]);case 8:if(a=e.sent){e.next=11;break}return e.abrupt("return");case 11:return o=a.title,e.abrupt("return",Se(fn,{sx:{width:"100%",p:1,pt:2,pb:2,mb:1},children:Se(Je,{variant:"subtitle2",children:["Список бизнес-функций расширен ролью сотрудника"," ",Se(Ln,{href:"#",onClick:function(){return ue("/settings/roles")},children:o})]})}));case 13:case"end":return e.stop()}}),e)}))),function(e){return m.apply(this,arguments)})}),Se(Gr,{readonly:!0,expandAll:!0,handler:function(){return u.features.reduce((function(e,t){return o(o({},e),{},c({},t,!0))}),{})},changeSubject:d,features:__}),Se(lt,{})]}),h()]})},isActive:function(e){return Dl(["/user_view/:id/features"],e)}}],bk=function(e){var n,a=e.id,o=void 0===a?"":a,s=function(){var e=r(t().mark((function e(n){var r,i,a,s,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!0,e.prev=1,i=S.get(n,"user")||{},a=S.get(n,"features")||[],s=S.get(n,"files")||[],S.set(i,"user_files",s),S.set(i,"user_features",a),e.next=9,Fl.userViewService.update(o,i);case 9:Fl.alertService.notify("Изменения сохранены"),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),r=!1,u=Xs(e.t0),Fl.alertService.notify(u);case 17:return e.prev=17,e.abrupt("return",r);case 20:case"end":return e.stop()}}),e,null,[[1,12,17,20]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.userViewService.tryRead(o);case 2:return e.t0=e.sent,e.next=5,Fl.settingsViewService.getMasterDetailMode();case 5:return e.t1=e.sent,e.next=8,Fl.permissionService.getPermissions();case 8:return e.t2=e.sent,e.next=11,Fl.featureService.getFeaturesByUserId(o);case 11:return e.t3=e.sent,e.next=14,Fl.featureService.getAccessLevel();case 14:return e.t4=e.sent,e.abrupt("return",[e.t0,e.t1,e.t2,e.t3,e.t4]);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=Be();return we.useEffect((function(){return Fl.userViewService.updateSubject.subscribe((function(e){var t=i(e,2),n=t[0],r=t[1],a=Il("id");a&&a===n&&(l.next(["user",r]),l.next(["files",(null==r?void 0:r.user_files)||[]]),l.next(["features",(null==r?void 0:r.user_features)||[]]),l.next(["additional_info",r]))}))}),[]),Se(br,{state:u,reloadSubject:Fl.layoutService.reloadOutletSubject,fallback:Fl.errorService.handleGlobalError,children:(n=r(t().mark((function e(n){var r,a,u,c,d,p;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i(n,5),a=r[0],u=r[1],c=r[2],d=r[3],p=r[4],e.abrupt("return",Se(ur,{changeSubject:l,history:Fl.routerService,waitForChangesDelay:pa,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},routes:vk,params:{id:o},initialData:{user:a,files:(null==a?void 0:a.user_files)||[],features:(null==a?void 0:a.user_features)||[],additional_info:a},payload:function(){return{menuMode:u,permissions:c,features:d,accessLevel:p}},onChange:function(e,t,n,r){var i,a;t||"user"===r&&(l.next(["files",(null===(i=e.user)||void 0===i?void 0:i.user_files)||[]]),l.next(["features",(null===(a=e.user)||void 0===a?void 0:a.user_features)||[]]))},onSubmit:s}));case 2:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})})},_k=[{path:"/error_page",element:function(){var e=n_().classes;return Se(Ur,{children:Se(qe,{className:e.root,children:Se(Or,{className:e.reveal,children:Se(fn,{className:e.container,children:Se(Ke,{direction:"column",gap:"15px",children:[Se(t_,{}),Se("span",{children:navigator.onLine?"Во время работы приложения произошла ошибка. Информация об ошибке передана в отдел разработки":"Нет подключения к интернету. Пожалуйста, попробуйте позже"}),Se(en,{variant:"contained",onClick:N,children:"Перезагрузить страницу"})]})})})})})}},{path:"/login_page",element:function(){return Se(qe,{sx:{position:"fixed",top:0,left:0,height:"100vh",width:"100vw",background:"whitesmoke",display:"flex",alignItems:"center",justifyContent:"center",zIndex:99999},children:Se(fn,{component:"form",sx:{p:2,marginTop:"-5vh",maxWidth:"325px",minWidth:"325px"},onSubmit:function(e){return e.preventDefault(),!1},children:[Se(Je,{variant:"h3",sx:{color:function(e){return e.palette.primary.main},mb:3,textAlign:"center",fontWeight:"bold"},children:"RealEstate"}),Se(qe,{sx:{display:"flex",flexDirection:"column",gap:"15px"},children:[Se(tn,{required:!0,name:"email",fullWidth:!0,label:"Email",placeholder:"Email",helperText:"Email",type:"email"}),Se(tn,{required:!0,fullWidth:!0,name:"password",label:"Пароль",placeholder:"Пароль",helperText:"Пароль",type:"password"})]}),Se(qe,{sx:{display:"flex",flexDirection:"row-reverse",mb:2},children:Se(Ln,{href:"#",onClick:function(){return Fl.routerService.push("/register_page")},children:"Регистрация"})}),Se(xt,{onClick:(e=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.currentTarget,e.next=3,i_(r.closest("form"));case 3:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),variant:"contained",type:"submit",fullWidth:!0,children:"Войти"})]})});var e}},{path:"/register_page",element:function(){return Se(qe,{sx:{position:"fixed",top:0,left:0,height:"100vh",width:"100vw",background:"whitesmoke",display:"flex",alignItems:"center",justifyContent:"center",zIndex:99999},children:Se(fn,{component:"form",sx:{p:2,marginTop:"-5vh",maxWidth:"325px",minWidth:"325px"},onSubmit:function(e){return e.preventDefault(),!1},children:[Se(Je,{variant:"h3",sx:{color:function(e){return e.palette.primary.main},mb:3,textAlign:"center",fontWeight:"bold"},children:"RealEstate"}),Se(qe,{sx:{display:"flex",flexDirection:"column",gap:"15px"},children:[Se(tn,{required:!0,name:"email",fullWidth:!0,label:"Email",placeholder:"Email",helperText:"Email",type:"email"}),Se(tn,{required:!0,fullWidth:!0,name:"password",label:"Пароль",placeholder:"Пароль",helperText:"Пароль",type:"password"}),Se(tn,{required:!0,fullWidth:!0,name:"confirm",label:"Повторите пароль",placeholder:"Повторите пароль",helperText:"Повторите пароль",type:"password"})]}),Se(qe,{sx:{display:"flex",flexDirection:"row-reverse",mb:2},children:Se(Ln,{href:"#",onClick:function(){return Fl.routerService.push("/login_page")},children:"Вход"})}),Se(xt,{onClick:(e=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.currentTarget,e.next=3,a_(r.closest("form"));case 3:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),variant:"contained",type:"submit",fullWidth:!0,children:"Регистрация"})]})});var e}},{path:"/inactive_page",element:function(){var e=r_().classes;return Se(Ur,{children:Se(qe,{className:e.root,children:Se(Or,{className:e.reveal,children:Se(fn,{className:e.container,children:Se(Ke,{direction:"column",gap:"15px",children:[Se(t_,{}),Se("span",{children:"Ожидание активации профиля. Попросите Администратора активировать ваш аккаунт"}),Se(en,{variant:"contained",onClick:N,children:"Перезагрузить страницу"})]})})})})})}}],kk=[{path:"/dashboard",sideMenu:"root.global.dashboard",element:function(){var e,n=function(){var e=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.settingsViewService.getMasterDetailMode();case 2:return e.t0=e.sent,e.next=5,Fl.permissionService.getPermissions();case 5:return e.t1=e.sent,e.next=8,Fl.featureService.getAccessLevel();case 8:return e.t2=e.sent,e.abrupt("return",[e.t0,e.t1,e.t2]);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Se(Qv,{initialState:"all",children:Se(_b,{initialState:"last-month",children:Se(br,{state:n,reloadSubject:Fl.layoutService.reloadOutletSubject,fallback:Fl.errorService.handleGlobalError,children:(e=r(t().mark((function e(n){var r,a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i(n,3),a=r[0],o=r[1],s=r[2],e.abrupt("return",Se(ur,{history:Fl.routerService,routes:Ob,payload:function(){return{menuMode:a,permissions:o,accessLevel:s}}}));case 2:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})})})})}},{path:"/apartment",sideMenu:"root.global.apartment",element:sy},{path:"/apartment_rent",sideMenu:"root.global.apartment.rent",element:sy},{path:"/apartment_sell",sideMenu:"root.global.apartment.sell",element:sy},{path:"/apartment_archive",sideMenu:"root.global.apartment.archive.archive",element:sy},{path:"/apartment_remove",sideMenu:"root.global.apartment.archive.remove",element:sy},{path:"/apartment",sideMenu:"root.global.apartment",element:sy},{path:"/apartment/create",sideMenu:"root.global.apartment",element:sy},{path:"/apartment_edit/:id",sideMenu:"root.global.apartment",element:sy},{path:"/apartment_edit/:id/object",sideMenu:"root.global.apartment",element:sy},{path:"/apartment_edit/:id/owner_contact",sideMenu:"root.global.apartment",element:sy},{path:"/apartment_edit/:id/documents",sideMenu:"root.global.apartment",element:sy},{path:"/apartment_view/:id",sideMenu:"root.global.apartment",element:sy},{path:"/apartment_view/:id/object",sideMenu:"root.global.apartment",element:sy},{path:"/apartment_view/:id/owner_contact",sideMenu:"root.global.apartment",element:sy},{path:"/apartment_view/:id/documents",sideMenu:"root.global.apartment",element:sy},{path:"/apartment_view/:id/history",sideMenu:"root.global.apartment",element:sy},{path:"/apartment_view/:id/tasks",sideMenu:"root.global.apartment",element:sy},{path:"/apartment_view/:id/advertising",sideMenu:"root.global.apartment",element:sy},{path:"/apartment_view/:id/service_comment",sideMenu:"root.global.apartment",element:sy},{path:"/bid",sideMenu:"root.global.bid",element:bv},{path:"/bid_rent",sideMenu:"root.global.bid.rent",element:bv},{path:"/bid_sell",sideMenu:"root.global.bid.sell",element:bv},{path:"/bid_archive",sideMenu:"root.global.bid.archive",element:bv},{path:"/bid/create",sideMenu:"root.global.bid",element:bv},{path:"/bid_edit/create",sideMenu:"root.global.bid",element:bv},{path:"/bid_edit/create/parameter",sideMenu:"root.global.bid",element:bv},{path:"/bid_edit/create/documents",sideMenu:"root.global.bid",element:bv},{path:"/bid_edit/create/contact",sideMenu:"root.global.bid",element:bv},{path:"/bid_edit/:id",sideMenu:"root.global.bid",element:bv},{path:"/bid_edit/:id/parameter",sideMenu:"root.global.bid",element:bv},{path:"/bid_edit/:id/documents",sideMenu:"root.global.bid",element:bv},{path:"/bid_edit/:id/contact",sideMenu:"root.global.bid",element:bv},{path:"/bid_view/:id",sideMenu:"root.global.bid",element:bv},{path:"/bid_view/:id/parameter",sideMenu:"root.global.bid",element:bv},{path:"/bid_view/:id/history",sideMenu:"root.global.bid",element:bv},{path:"/bid_view/:id/documents",sideMenu:"root.global.bid",element:bv},{path:"/bid_view/:id/contact",sideMenu:"root.global.bid",element:bv},{path:"/bid_view/:id/tasks",sideMenu:"root.global.bid",element:bv},{path:"/bid_view/:id/service_comment",sideMenu:"root.global.bid",element:bv},{path:"/deal",sideMenu:"root.global.deal",element:function(){var e,n=function(){var e=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,e_();case 2:return e.t0=e.sent,e.next=5,Fl.settingsViewService.getMasterDetailMode();case 5:return e.t1=e.sent,e.next=8,Fl.permissionService.getPermissions();case 8:return e.t2=e.sent,e.next=11,Fl.featureService.getAccessLevel();case 11:return e.t3=e.sent,e.abrupt("return",[e.t0,e.t1,e.t2,e.t3]);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Se(br,{state:n,fallback:Fl.errorService.handleGlobalError,children:(e=r(t().mark((function e(n){var r,a,o,s,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i(n,4),a=r[0],o=r[1],s=r[2],u=r[3],e.abrupt("return",Se(ur,{history:Fl.routerService,onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},routes:Qb,params:{dealCardMap:a},payload:function(){return{menuMode:o,permissions:s,accessLevel:u}}}));case 2:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})})}},{path:"/task",sideMenu:"root.global.task",element:T_},{path:"/task_mine",sideMenu:"root.global.task",element:T_},{path:"/contact",sideMenu:"root.global.contact",element:Yv},{path:"/contact/create",sideMenu:"root.global.contact",element:Yv},{path:"/contact_edit/create",sideMenu:"root.global.contact",element:Yv},{path:"/contact_edit/:id",sideMenu:"root.global.contact",element:Yv},{path:"/contact_view/:id",sideMenu:"root.global.contact",element:Yv},{path:"/contact_view/:id/contact",sideMenu:"root.global.contact",element:Yv},{path:"/contact_view/:id/objects",sideMenu:"root.global.contact",element:Yv},{path:"/contact_view/:id/bids",sideMenu:"root.global.contact",element:Yv},{path:"/contact_view/:id/tasks",sideMenu:"root.global.contact",element:Yv},{path:"/contact_view/:id/service_comment",sideMenu:"root.global.contact",element:Yv},{path:"/contact_view/:id/history",sideMenu:"root.global.contact",element:Yv},{path:"/user",sideMenu:"root.global.user",element:bk},{path:"/user_common",sideMenu:"root.global.user.common",element:bk},{path:"/user_archive",sideMenu:"root.global.user.archive",element:bk},{path:"/user_view/:id",sideMenu:"root.global.user",element:bk},{path:"/user_view/:id/user",sideMenu:"root.global.user",element:bk},{path:"/user_view/:id/files",sideMenu:"root.global.user",element:bk},{path:"/user_view/:id/features",sideMenu:"root.global.user",element:bk},{path:"/user_view/:id/additional_info",sideMenu:"root.global.user",element:bk},{path:"/user_edit/:id",sideMenu:"root.global.user",element:bk},{path:"/user_edit/:id/user",sideMenu:"root.global.user",element:bk},{path:"/user_edit/:id/files",sideMenu:"root.global.user",element:bk},{path:"/user_edit/:id/features",sideMenu:"root.global.user",element:bk},{path:"/user_edit/:id/additional_info",sideMenu:"root.global.user",element:bk},{path:"/settings",sideMenu:"root.global.settings",element:V_},{path:"/settings/common",sideMenu:"root.global.settings",element:V_},{path:"/settings/roles",sideMenu:"root.global.settings",element:V_},{path:"/settings/integration",sideMenu:"root.global.settings",element:V_},{path:"/settings/field_visibility",sideMenu:"root.global.settings",element:V_}],gk=[{path:"/",sideMenu:"root.global.user",element:Pv((function(){Fl.routerService.push("/dashboard")}))}].concat(kk,_k),xk=function(e){Ml(),console.log({path:e}),"root.global.settings.common"===e&&Fl.routerService.push("/settings/common"),"root.global.settings.roles"===e&&Fl.routerService.push("/settings/roles"),"root.global.settings.integration"===e&&Fl.routerService.push("/settings/integration"),"root.global.settings.field_visibility"===e&&Fl.routerService.push("/settings/field_visibility")},wk=function(e){"root.global.dashboard"===e&&Fl.routerService.push("/dashboard"),"root.global.user"===e&&Fl.routerService.push("/user"),"root.global.user.common"===e&&Fl.routerService.push("/user_common"),"root.global.user.archive"===e&&Fl.routerService.push("/user_archive"),"root.global.apartment"===e&&Fl.routerService.push("/apartment"),"root.global.apartment.rent"===e&&Fl.routerService.push("/apartment_rent"),"root.global.apartment.sell"===e&&Fl.routerService.push("/apartment_sell"),"root.global.apartment.archive"===e&&Fl.routerService.push("/apartment_archive"),"root.global.apartment.archive.archive"===e&&Fl.routerService.push("/apartment_archive"),"root.global.apartment.archive.remove"===e&&Fl.routerService.push("/apartment_remove"),"root.global.bid"===e&&Fl.routerService.push("/bid"),"root.global.bid.rent"===e&&Fl.routerService.push("/bid_rent"),"root.global.bid.sell"===e&&Fl.routerService.push("/bid_sell"),"root.global.bid.archive"===e&&Fl.routerService.push("/bid_archive"),"root.global.deal"===e&&Fl.routerService.push("/deal"),"root.global.deal.all"===e&&Fl.routerService.push("/deal_all"),"root.global.deal.mine"===e&&Fl.routerService.push("/deal_mine"),"root.global.task"===e&&Fl.routerService.push("/task"),"root.global.task.all"===e&&Fl.routerService.push("/task_all"),"root.global.task.mine"===e&&Fl.routerService.push("/task_mine"),"root.global.contact"===e&&Fl.routerService.push("/contact"),"root.global.settings"===e&&Fl.routerService.push("/settings")},Sk=function(){var e=null,t=null;return function(){var n=Fl.routerService.location.pathname;return e!==n&&(t=Te(gk,Fl.routerService.location.pathname),e=n),t}}(),zk=Sk,Vk={"Refresh manually":"Обновить","Create new row":"Создать новую строку","Change sort order":"Изменить порядок сортировки","Drop filters":"Сбросить фильтры",Filters:"Фильтры",Search:"Поиск","Loading data":"Загрузка данных","Nothing found":"","Not found":"Нет данных","No options":"Нет данных","Drag and drop a file here or click":"Выберите файл",Choose:"Выбрать",Deselect:"Убрать",Green:"Зеленый",Skyblue:"Синий",Yellow:"Желтый",Red:"Красный",Submit:"Применить",Date:"Дата",Time:"Время",Loading:"Загрузка",Required:"Заполнить","The form contains unsaved changes. Continue?":"Форма содержит несохраненные изменения. Продолжить?","The form contains invalid data. Continue?":"Форма содержит неправильно указанные данные. Продолжить?","Are you sure you want to delete this file?":"Вы уверены, что хотите удалить файл?",Confirmation:"Подтверждение",Forbidden:"Нет доступа",Ok:"Ок",Cancel:"Отмена",Remove:"Удалить",Actions:"Действие",Save:"Сохранить","Not chosen":"Не указано","Continue?":"Продолжить",Unset:"Нет данных","Select all":"Выбрать","No tips":"Нет данных","Column configuration":"Отображение колонок","Loading...":"Загрузка","Pick item":"Выберите"};var Ak={"/login_page":{"Sign in":"Войти"},"/register_page":{"Sign in":"Регистрация"}},Tk=function(){var e=null,t={};return function(){var n=Fl.routerService.location.pathname;if(e!==n){var r=zk();t=Ak[(null==r?void 0:r.path)||"unknown"]||{},e=n}return t}}();function Ck(e){return Tk()[e]||function(e){return Vk[e]||e}(e)}var Fk,Lk=[function(){document.querySelectorAll("input").forEach((function(e){e.placeholder&&(e.placeholder=Ck(e.placeholder))}))},function(){document.querySelectorAll("textarea").forEach((function(e){e.placeholder&&(e.placeholder=Ck(e.placeholder))}))}];(document.addEventListener("DOMContentLoaded",(function(){var e=S.throttle(Xr(Lk.map((function(e){return function(){e()}}))),1,{trailing:!0});new MutationObserver(e).observe(document.body,{childList:!0,subtree:!0})})),Jr.install(Vk,Ck),Fl.routerService.listen((function(e){"PUSH"===e.action&&window.Translate.clear()})),window.self!==window.top&&zt.override((function(e,t){var n;null===(n=window.top)||void 0===n||n.postMessage({type:"download-action",url:e,filename:t},"*")})),window.self!==window.top?ue.override((function(e){e.startsWith("/")?Fl.routerService.push(e):window.open(e)})):ue.override((function(e){e.startsWith("/")?Fl.routerService.push(e):window.location.href=e})),window.self!==window.top&&Sn.override((function(e){var t;null===(t=window.top)||void 0===t||t.postMessage({type:"copy-action",text:e},"*")})),window.self!==window.top&&N.override((function(){var e;null===(e=window.top)||void 0===e||e.postMessage({type:"reload-action"},"*")})),window.self!==window.top)&&(null===(Fk=window.top)||void 0===Fk||Fk.postMessage({type:"init-action"},"*"));window.getOlxToken=function(){var e;return null===(e=window.top)||void 0===e||e.postMessage({type:"get-olx-token"},"*"),ie.create((function(e){return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}})).filter((function(e){return"type"in e.data})).filter((function(e){return"get-olx-token"===e.data.type})).map((function(e){return e.data.result})).toPromise()};var Ik=1e3,Mk=function(){var e=r(t().mark((function e(){var n,r,i,a,o,s,u,l,c,d,p,m,f,h,v,b;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!1,r=!1,e.prev=2,a=y(Do(_a));case 4:return e.next=6,a.next();case 6:if(!(n=!(o=e.sent).done)){e.next=20;break}return s=o.value,u=$a(s),e.next=11,Fl.exchangeService.getApartmentPriceMetadata(u);case 11:return l=e.sent,console.log("PATCHING APARTMENT ".concat(u.$id),{metadata:l}),e.next=15,Fl.appwriteService.databases.updateDocument(fa.databaseId,_a,u.$id,l);case 15:return e.next=17,U(Ik);case 17:n=!1,e.next=4;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),r=!0,i=e.t0;case 26:if(e.prev=26,e.prev=27,!n||null==a.return){e.next=31;break}return e.next=31,a.return();case 31:if(e.prev=31,!r){e.next=34;break}throw i;case 34:return e.finish(31);case 35:return e.finish(26);case 36:c=!1,d=!1,e.prev=38,m=y(Do(wa));case 40:return e.next=42,m.next();case 42:if(!(c=!(f=e.sent).done)){e.next=56;break}return h=f.value,v=mo(h),e.next=47,Fl.exchangeService.getBidPriceMetadata(v);case 47:return b=e.sent,console.log("PATCHING BID ".concat(v.$id),{metadata:b}),e.next=51,Fl.appwriteService.databases.updateDocument(fa.databaseId,wa,v.$id,b);case 51:return e.next=53,U(Ik);case 53:c=!1,e.next=40;break;case 56:e.next=62;break;case 58:e.prev=58,e.t1=e.catch(38),d=!0,p=e.t1;case 62:if(e.prev=62,e.prev=63,!c||null==m.return){e.next=67;break}return e.next=67,m.return();case 67:if(e.prev=67,!d){e.next=70;break}throw p;case 70:return e.finish(67);case 71:return e.finish(62);case 72:console.log("DONE");case 73:case"end":return e.stop()}}),e,null,[[2,22,26,36],[27,,31,35],[38,58,62,72],[63,,67,71]])})));return function(){return e.apply(this,arguments)}}(),jk=function(){var e=r(t().mark((function e(){var n,r,i,a,o,s,u,l,c,d,p,m,f,h;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!1,r=!1,e.prev=2,a=y(Do(_a));case 4:return e.next=6,a.next();case 6:if(!(n=!(o=e.sent).done)){e.next=19;break}return s=o.value,e.next=10,Fl.metadataService.getAreaMetadataByApartment(s.$id);case 10:return u=e.sent,console.log("PATCHING APARTMENT ".concat(s.$id),{metadata:u}),e.next=14,Fl.appwriteService.databases.updateDocument(fa.databaseId,_a,s.$id,u);case 14:return e.next=16,U(Ik);case 16:n=!1,e.next=4;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(2),r=!0,i=e.t0;case 25:if(e.prev=25,e.prev=26,!n||null==a.return){e.next=30;break}return e.next=30,a.return();case 30:if(e.prev=30,!r){e.next=33;break}throw i;case 33:return e.finish(30);case 34:return e.finish(25);case 35:l=!1,c=!1,e.prev=37,p=y(Do(wa));case 39:return e.next=41,p.next();case 41:if(!(l=!(m=e.sent).done)){e.next=54;break}return f=m.value,e.next=45,Fl.metadataService.getAreaMetadataByBid(f.$id);case 45:return h=e.sent,console.log("PATCHING BID ".concat(f.$id),{metadata:h}),e.next=49,Fl.appwriteService.databases.updateDocument(fa.databaseId,wa,f.$id,h);case 49:return e.next=51,U(Ik);case 51:l=!1,e.next=39;break;case 54:e.next=60;break;case 56:e.prev=56,e.t1=e.catch(37),c=!0,d=e.t1;case 60:if(e.prev=60,e.prev=61,!l||null==p.return){e.next=65;break}return e.next=65,p.return();case 65:if(e.prev=65,!c){e.next=68;break}throw d;case 68:return e.finish(65);case 69:return e.finish(60);case 70:console.log("DONE");case 71:case"end":return e.stop()}}),e,null,[[2,21,25,35],[26,,30,34],[37,56,60,70],[61,,65,69]])})));return function(){return e.apply(this,arguments)}}(),Bk=function(){var e=r(t().mark((function e(){var n,r,i,a,o,s,u,l,c,d,p,m,f,h,v,b,_,k,g,x,w,S,z=arguments;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=z.length>0&&void 0!==z[0]&&z[0],r=!1,i=!1,e.prev=3,o=y(Do(_a));case 5:return e.next=7,o.next();case 7:if(!(r=!(s=e.sent).done)){e.next=20;break}if(!(u=s.value).system_created_by||n){e.next=11;break}return e.abrupt("continue",17);case 11:return l={system_created_by:Fl.appwriteService.currentUser.$id},console.log("PATCHING APARTMENT ".concat(u.$id),{metadata:l}),e.next=15,Fl.appwriteService.databases.updateDocument(fa.databaseId,_a,u.$id,l);case 15:return e.next=17,U(Ik);case 17:r=!1,e.next=5;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(3),i=!0,a=e.t0;case 26:if(e.prev=26,e.prev=27,!r||null==o.return){e.next=31;break}return e.next=31,o.return();case 31:if(e.prev=31,!i){e.next=34;break}throw a;case 34:return e.finish(31);case 35:return e.finish(26);case 36:c=!1,d=!1,e.prev=38,m=y(Do(wa));case 40:return e.next=42,m.next();case 42:if(!(c=!(f=e.sent).done)){e.next=55;break}if(!(h=f.value).system_created_by||n){e.next=46;break}return e.abrupt("continue",52);case 46:return v={system_created_by:Fl.appwriteService.currentUser.$id},console.log("PATCHING BID ".concat(h.$id),{metadata:v}),e.next=50,Fl.appwriteService.databases.updateDocument(fa.databaseId,wa,h.$id,v);case 50:return e.next=52,U(Ik);case 52:c=!1,e.next=40;break;case 55:e.next=61;break;case 57:e.prev=57,e.t1=e.catch(38),d=!0,p=e.t1;case 61:if(e.prev=61,e.prev=62,!c||null==m.return){e.next=66;break}return e.next=66,m.return();case 66:if(e.prev=66,!d){e.next=69;break}throw p;case 69:return e.finish(66);case 70:return e.finish(61);case 71:b=!1,_=!1,e.prev=73,g=y(Do(ka));case 75:return e.next=77,g.next();case 77:if(!(b=!(x=e.sent).done)){e.next=90;break}if(!(w=x.value).system_created_by||n){e.next=81;break}return e.abrupt("continue",87);case 81:return S={system_created_by:Fl.appwriteService.currentUser.$id},console.log("PATCHING CONTACT ".concat(w.$id),{metadata:S}),e.next=85,Fl.appwriteService.databases.updateDocument(fa.databaseId,ka,w.$id,S);case 85:return e.next=87,U(Ik);case 87:b=!1,e.next=75;break;case 90:e.next=96;break;case 92:e.prev=92,e.t2=e.catch(73),_=!0,k=e.t2;case 96:if(e.prev=96,e.prev=97,!b||null==g.return){e.next=101;break}return e.next=101,g.return();case 101:if(e.prev=101,!_){e.next=104;break}throw k;case 104:return e.finish(101);case 105:return e.finish(96);case 106:console.log("DONE");case 107:case"end":return e.stop()}}),e,null,[[3,22,26,36],[27,,31,35],[38,57,61,71],[62,,66,70],[73,92,96,106],[97,,101,105]])})));return function(){return e.apply(this,arguments)}}(),Dk=function(){var e=r(t().mark((function e(){var n,r,i,a,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!1,r=!1,e.prev=2,a=y(Do(ya));case 4:return e.next=6,a.next();case 6:if(!(n=!(o=e.sent).done)){e.next=18;break}if("boolean"!=typeof(s=o.value).system_is_remove){e.next=10;break}return e.abrupt("continue",15);case 10:return console.log("PATCHING USER ".concat(s.$id)),e.next=13,Fl.appwriteService.databases.updateDocument(fa.databaseId,ya,s.$id,{active:!0,system_is_remove:!1});case 13:return e.next=15,U(Ik);case 15:n=!1,e.next=4;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(2),r=!0,i=e.t0;case 24:if(e.prev=24,e.prev=25,!n||null==a.return){e.next=29;break}return e.next=29,a.return();case 29:if(e.prev=29,!r){e.next=32;break}throw i;case 32:return e.finish(29);case 33:return e.finish(24);case 34:console.log("DONE");case 35:case"end":return e.stop()}}),e,null,[[2,20,24,34],[25,,29,33]])})));return function(){return e.apply(this,arguments)}}(),Rk=function(){var e=r(t().mark((function e(){var n,r,i,a,o,s,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new Set,r=!1,i=!1,e.prev=3,o=y(Do(_a));case 5:return e.next=7,o.next();case 7:if(!(r=!(s=e.sent).done)){e.next=13;break}u=s.value,n.add(u.orientir);case 10:r=!1,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),i=!0,a=e.t0;case 19:if(e.prev=19,e.prev=20,!r||null==o.return){e.next=24;break}return e.next=24,o.return();case 24:if(e.prev=24,!i){e.next=27;break}throw a;case 27:return e.finish(24);case 28:return e.finish(19);case 29:console.log(p(n).filter((function(e){return e})));case 30:case"end":return e.stop()}}),e,null,[[3,15,19,29],[20,,24,28]])})));return function(){return e.apply(this,arguments)}}();window.migration={updateSystemArea:jk,updateSystemPrice:Mk,updateSystemCreatedBy:Bk,updateUserArchive:Dk,readOrientirList:Rk},Zr.register({family:"Roboto",src:"https://cdnjs.cloudflare.com/ajax/libs/ink/3.1.10/fonts/Roboto/roboto-regular-webfont.ttf",fontWeight:"normal"}),Zr.register({family:"Roboto",src:"https://cdnjs.cloudflare.com/ajax/libs/ink/3.1.10/fonts/Roboto/roboto-bold-webfont.ttf",fontWeight:"bold"});var qk=0,Pk=URL.createObjectURL,Ek=URL.revokeObjectURL;window.createObjectURL=function(){return qk++,Pk.apply(void 0,arguments)},window.revokeObjectURL=function(){return qk--,Ek.apply(void 0,arguments)},window.countObjectURL=function(){console.log("URL.createObjectURL refcount=".concat(qk))};var Nk,Ok,Uk,Hk=Qr((function(e){var t=e.children,n=Fl.alertService.current;return Se(Ae,{children:[!!n&&Se(ei,{open:!0,anchorOrigin:{vertical:"bottom",horizontal:"center"},autoHideDuration:5e3,onClose:Fl.alertService.hideCurrent,sx:{zIndex:9999999},message:n.message},n.key),t]})})),Wk=function(){var e=i(we.useState(Fl.appwriteService.isAuthorized),2),n=e[0],a=e[1];we.useEffect((function(){return ge((function(){return Fl.appwriteService.isAuthorized}),(function(){return a(Fl.appwriteService.isAuthorized)}))}),[]);var o,s=function(){return Se(Ke,{direction:"row",alignItems:"center",children:[Se(ti,{sx:{fontSize:18,color:Fl.previewModeService.previewMode?"#c2c2c2":"#757575"}}),Se(ni,{checked:Fl.previewModeService.previewMode,onClick:Fl.previewModeService.togglePreviewMode,size:"small"}),Se(ri,{sx:{fontSize:18,color:Fl.previewModeService.previewMode?"#757575":"#c2c2c2"}})]})};return Se(Ke,{width:"100%",minHeight:"48px",direction:"row",alignItems:"center",justifyContent:"space-between",children:Se(Ne,{deps:[n],children:(o=r(t().mark((function e(){var n,r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Fl.appwriteService.isAuthorized){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Fl.settingsViewService.getValue();case 4:if(n=e.sent,!(r=n.logo_file_id)){e.next=11;break}return e.next=9,Fl.appwriteService.getImageURL(r);case 9:return i=e.sent,e.abrupt("return",Se(Ke,{direction:"column",alignItems:"center",width:"100%",spacing:2,marginY:2,children:[Se(qe,{component:"img",sx:{height:128,width:128,objectFit:"contain",pointerEvents:"none"},src:i}),s()]}));case 11:return e.abrupt("return",Se(Ae,{children:[Se(Je,{sx:{height:42,display:"flex",alignItems:"center",color:"#666",fontWeight:"bold",fontSize:14},variant:"caption",children:"Real Estate APP"}),s()]}));case 12:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})})})},$k=function(e){var n=e.loading,a=i(we.useState(0),2),o=a[0],s=a[1],u=Ve(r(t().mark((function e(){var n,r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Fl.appwriteService.currentUser.$id,e.next=3,Fl.notifyViewService.findAllUnreadByUserId(n);case 3:r=e.sent,i=r.length,s(i);case 6:case"end":return e.stop()}}),e)}))),{onLoadStart:function(){return Fl.layoutService.setAppbarLoader(!0)},onLoadEnd:function(){return Fl.layoutService.setAppbarLoader(!1)},fallback:Fl.errorService.handleGlobalError}).execute;return we.useEffect((function(){return ge((function(){return Fl.appwriteService.isAuthorized}),(function(){Fl.appwriteService.isAuthorized&&u()}))}),[]),we.useEffect((function(){return Fl.notifyViewService.reloadSubject.debounce(1e3).connect((function(){Fl.appwriteService.isAuthorized&&u()}))}),[]),Se(ai,{badgeContent:o,color:"info",children:Se(ii,{sx:{color:"white !important",opacity:n?.8:1}})})},Gk=function(){return Se(Me,{sx:{width:384,height:"calc(100% - 96px)"}})},Yk=$l()((function(e){return{list:{pt:1,pb:1,"& > *":{paddingTop:0,paddingBottom:0,"& > *":{paddingTop:0,paddingBottom:0}}},listItemAccient:{background:je(e.palette.getContrastText(e.palette.background.paper),.018)}}})),Kk=function(){var e,n,a=i(we.useState(),2),o=a[0],s=a[1],u=Yk().classes,l=i(we.useState(0),2),d=l[0],p=l[1];return Se(Ae,{children:[Se(bt,{onClick:(n=r(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.currentTarget,Fl.appwriteService.isAuthorized){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Fl.notifyViewService.toggleReadAllByUserId(Fl.appwriteService.currentUser.$id);case 5:s(r);case 6:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)}),onLoadStart:function(){return p((function(e){return e+1}))},onLoadEnd:function(){return p((function(e){return e-1}))},color:"inherit",sx:{ml:2},children:Se($k,{loading:!!d})}),Se(Tr,{open:!!o,anchorEl:o,onClose:function(){return s(null)},anchorOrigin:{vertical:"bottom",horizontal:"right"},children:Se(Pt,{sx:{width:384,height:448},subheader:Se(Cr,{component:Je,sx:{fontWeight:"bold"},children:"Уведомления"}),children:Se(Ne,{Loader:Gk,children:(e=r(t().mark((function e(){var n,r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Fl.appwriteService.currentUser.$id,e.next=3,Fl.notifyViewService.findAllByUserId(n);case 3:return r=e.sent,e.abrupt("return",Se(nr,{className:u.list,sx:{width:384,height:"calc(100% - 48px)"},children:r.sort((function(e,t){var n=e.$createdAt,r=t.$createdAt;return f(n).isBefore(r)?1:-1})).map((function(e,t){return Se(Vt,{className:Pe(c({},u.listItemAccient,t%2==0)),disableGutters:!0,children:Se(Ue,{onClick:function(){return e.url&&ue(e.url)},children:[Se(At,{children:Se(pt,{children:Se(oi,{sx:{color:"white",mt:"-2px"}})})}),Se(Ct,{primary:Se(Lt,{config:Cc,handler:function(){return e.title}}),secondary:f(e.$createdAt).format("HH:mm DD/MM/YYYY")}),Se(We,{disableRipple:!0,children:Se(si,{})})]})},e.$id)}))}));case 5:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})})})})]})},Xk=[{action:"logout-action",icon:ui,label:"Выйти"}],Jk=[{id:"global",noHeader:!0,children:[{id:"dashboard",label:"Главная",icon:li},{id:"apartment",label:"База объектов",icon:ci,options:[{id:"rent",icon:di,label:"Аренда"},{id:"sell",icon:pi,label:"Продажа"},{id:"archive",icon:mi,label:"Архив",options:[{id:"archive",icon:fi,label:"Неактивно"},{id:"remove",icon:hi,label:"Удалено"}]}]},{id:"bid",label:"Заявки",icon:yi,options:[{id:"rent",icon:vi,label:"Аренда"},{id:"sell",icon:bi,label:"Продажа"},{id:"archive",icon:_i,label:"Архив"}]},{id:"deal",label:"Сделки",icon:ki},{id:"task",label:"Задачи",icon:gi},{id:"contact",label:"Контакты",icon:xi},{id:"user",label:"Сотрудники",icon:wi,options:[{id:"common",icon:Si,label:"Все сотрудники"},{id:"archive",icon:hi,label:"Архив"}]},{id:"settings",isVisible:(Uk=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.permissionService.getPermissions();case 2:return n=e.sent,e.abrupt("return",!!n.hasSettingsEditPermission);case 4:case"end":return e.stop()}}),e)}))),function(){return Uk.apply(this,arguments)}),label:"Настройки",icon:zi,tabs:[{id:"common",isActive:function(){return Dl(["/settings","/settings/common"])},label:"Общая информация"},{id:"roles",isActive:function(){return Dl(["/settings/roles"])},isDisabled:(Ok=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.permissionService.getPermissions();case 2:return n=e.sent,e.abrupt("return",!n.hasUsersAccessLevelsPermission);case 4:case"end":return e.stop()}}),e)}))),function(){return Ok.apply(this,arguments)}),label:"Роли сотрудников"},{id:"integration",isActive:function(){return Dl(["/settings/integration"])},label:"Интеграция в Telegram"},{id:"field_visibility",isDisabled:(Nk=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.permissionService.getPermissions();case 2:return n=e.sent,e.abrupt("return",!n.hasSettingsViewFieldsPermission);case 4:case"end":return e.stop()}}),e)}))),function(){return Nk.apply(this,arguments)}),isActive:function(){return Dl(["/settings/field_visibility"])},label:"Поля"}]}]}],Zk="40vmin",Qk=["/images/cubes.png","/images/snow.png","/images/square.png","/images/triangle.png","/images/cells.png"],eg=function(){var e=Math.floor(Date.now()/1e3/60);return Qk[e%Qk.length]},tg=function(){var e=i(we.useState((function(){return eg()})),2),t=e[0],n=e[1];return we.useEffect((function(){return ie.create((function(e){return Fl.routerService.listen(e)})).connect((function(){return n(eg())}))}),[]),Se(Vi,{children:"\n            body {\n                background-position: top calc(100vh - ".concat(Zk," - 24px) right 24px;\n                background-size: ").concat(Zk,', auto, contain;\n                background-repeat: no-repeat;\n                background-image: url("').concat(t,'");\n            }\n        ')})},ng=function(){return Se(Ae,{children:Se(Je,{variant:"caption",sx:{opacity:.5,pointerEvents:"none",p:1},children:["v","1.0.0"]})})},rg=function(){return Se(qe,{sx:{position:"fixed",top:0,left:0,right:0,bottom:0,height:"100vh",width:"100vw",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,background:function(e){return e.palette.background.paper}},children:Se(Fi,{})})},ig=function(){return Se(Ae,{})},ag=L(r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Li.prefetch(!0);case 2:case"end":return e.stop()}}),e)})))),og=function(){Fl.layoutService.setAppbarLoader(!0)},sg=function(){Fl.layoutService.setAppbarLoader(!1)},ug=function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("logout-action"!==n){e.next=3;break}return e.next=3,Fl.authService.logout();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),lg=Qr((function(){return Se(Vt,{children:Se(Ct,{primary:Fl.appwriteService.currentUser.email,secondary:Fl.appwriteService.currentUser.$id})})})),cg=Qr((function(){return Se(qe,{sx:{display:{xs:"none",md:"flex"}},children:[Se(vt,{condition:(n=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.permissionService.getPermissions();case 2:return n=e.sent,e.abrupt("return",n.hasBidCreatePermission);case 4:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)}),payload:Fl.appwriteService.isAuthorized,children:Se(en,{sx:{mr:1},variant:"contained",size:"small",color:"info",onClick:function(){return Fl.routerService.push("/bid/create")},children:"Добавить заявку"})}),Se(vt,{condition:(e=r(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fl.permissionService.getPermissions();case 2:return n=e.sent,e.abrupt("return",n.hasApartmentCreatePermission);case 4:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)}),payload:Fl.appwriteService.isAuthorized,children:Se(en,{variant:"contained",size:"small",color:"info",onClick:function(){return Fl.routerService.push("/apartment/create")},children:"Добавить объект"})}),Se(Kk,{})]});var e,n})),dg=function(){var e=i(we.useState(zk()),2),t=e[0],n=e[1],r=i(we.useState(Fl.routerService.location.pathname),2),a=r[0],o=r[1],s=i(we.useState(Fl.layoutService.hasAppbarLoader),2),u=s[0],l=s[1],c=i(we.useState(Fl.layoutService.hasModalLoader),2),d=c[0],p=c[1],m=we.useMemo((function(){return Dl(_k.map((function(e){return e.path})))}),[a]);return we.useEffect((function(){return ge((function(){return Fl.routerService.location.pathname}),(function(){n(zk())}))}),[]),we.useEffect((function(){return Ai((function(){o(Fl.routerService.location.pathname)}),{delay:10})}),[]),we.useEffect((function(){return Ai((function(){l(Fl.layoutService.hasAppbarLoader)}),{delay:10})}),[]),we.useEffect((function(){return Ai((function(){p(Fl.layoutService.hasModalLoader)}))}),[]),Se(Ae,{children:[Se(Ti,{fixedHeader:!0,noOptionHover:!0,noAppName:!0,noSearch:!0,noContent:m,appName:ca,deps:[a],activeOptionPath:(null==t?void 0:t.sideMenu)||"",loading:u,options:Jk,actions:Xk,onOptionClick:wk,onOptionGroupClick:wk,onTabChange:xk,onLoadStart:og,onLoadEnd:sg,onAction:ug,BeforeSearch:Wk,onInit:ag,BeforeMenuContent:lg,BeforeActionMenu:cg,AfterContent:ng,children:[Se(Ci,{Loader:ig,history:Fl.routerService,items:gk,fallback:Fl.errorService.handleGlobalError,onLoadStart:og,onLoadEnd:sg,onInit:ag}),Se(tg,{})]}),d&&Se(rg,{})]})},pg=Se(qr,{fontSize:"small"}),mg=Se(Rr,{fontSize:"small"}),fg=[],hg="#3F51B5",yg=Pi({palette:{mode:"light",primary:{main:hg},secondary:{main:"#2196F3"},warning:{main:"#d9822b"},info:{main:"#1070CA"},success:{main:"#27AB6E"},error:{main:"#ec4c47"},text:{primary:"#000000DE",secondary:"#00000099",disabled:"#cccccc"},background:{default:"#E8E9ED !important",paper:"#fff"}},components:{MuiAppBar:{styleOverrides:{root:{background:"#6974B0"}}},MuiTab:{styleOverrides:{fullWidth:{background:"#6974b066",color:"white !important",fontWeight:"bold"}}},MuiIconButton:{styleOverrides:{root:{borderRadius:6,padding:8},sizeSmall:{padding:4}}},MuiButton:{styleOverrides:{contained:{background:hg,"&:hover":{background:"#4E65C9"}}}},MuiBadge:{styleOverrides:{badge:{background:hg}}},MuiSnackbar:{styleOverrides:{root:{border:"1px solid black",borderRadius:"4px",boxShadow:"0 0 5px 2px grey","& > *":{color:"black !important"}}}}}}),vg=document.getElementById("root"),bg=Ei({key:"mui",prepend:!0}),_g=Ei({key:"tss"});Ni("bgcolor-red","background: rgb(255, 229, 229); color: rgb(255, 0, 0);"),Ni("bgcolor-green","background: rgb(240, 246, 236); color: rgb(112, 173, 71);"),Ni("text-spacer","display: inline-block; padding: 10px; visibility: hidden;"),Ni("text-underline","display: inline-block; text-decoration: underline;"),Ni("blank-link","display: inline-block; text-decoration: underline;",{onClick:function(e){var t=e.currentTarget.getAttribute("href");t&&ue(t)}});var kg=Se(Ji,{history:Fl.routerService,onError:Fl.errorService.handleGlobalError,children:Se(Oi,{value:bg,children:Se(Ui,{value:_g,children:Se(Hi,{theme:yg,children:Se(Wi,{dateAdapter:$i,children:Se(Bl,{children:Se(Gi,{Combo:function(e){var n=e.value,a=e.disabled,s=e.readonly,u=e.description,l=void 0===u?"":u,c=e.placeholder,d=void 0===c?"":c,m=e.outlined,f=void 0===m||m,h=e.itemList,y=void 0===h?[]:h,v=e.virtualListBox,b=e.watchItemList,_=e.labelShrink,k=e.noDeselect,g=e.freeSolo,x=e.title,w=void 0===x?"":x,S=e.dirty,z=e.invalid,V=e.tr,A=void 0===V?function(e){return e.toString()}:V,T=e.onChange,C=Ii().object,F=Mi(),L=i(we.useState((function(){return{options:[],labels:{}}})),2),I=L[0],M=L[1],j=we.useRef(!1),B=ji([I],10),D=Gt(I.labels),R=we.useMemo((function(){if("string"==typeof n)return n;var e=i(Object.values(n||{}),1)[0];return void 0===e?null:e}),[n]),q=Bi().fallback,P=Ve(function(){var e=r(t().mark((function e(n){var i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i={},y=y||[],e.t0=p,e.t1=Set,e.t2=Object,"function"!=typeof y){e.next=11;break}return e.next=8,Promise.resolve(y(n,F));case 8:e.t3=e.sent,e.next=12;break;case 11:e.t3=y;case 12:return e.t4=e.t3,e.t5=e.t2.values.call(e.t2,e.t4),e.t6=new e.t1(e.t5),a=(0,e.t0)(e.t6),e.next=18,Promise.all(a.map(function(){var e=r(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(A(r,n,F));case 2:return e.abrupt("return",i[r]=e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 18:return g&&R&&!a.includes(R)&&a.push(R),M({labels:i,options:a}),j.current=!0,e.next=23,B();case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{fallback:q}),E=P.loading,N=P.execute,O=function(e){return Object.values(e||{}).sort((function(e,t){return t.localeCompare(e)})).join("-")}(R),U=we.useRef(null),H=we.useRef(!0);we.useEffect((function(){if(!H.current){if(U.current===C)return;if(!b)return}U.current=C,H.current=!1,N(C)}),[O,a,S,z,C,s]);var W=function(e,t){return function(n){return Se(tn,o(o({},n),{},{sx:o({},!f&&{position:"relative",mt:1,"& .MuiFormHelperText-root":{position:"absolute",top:"100%"}}),variant:f?"outlined":"standard",placeholder:e?void 0:d,label:w,helperText:S&&z||l,error:S&&null!==z,InputProps:o(o({},n.InputProps),{},{readOnly:t,endAdornment:Se(Ae,{children:[e?Se(qi,{color:"inherit",size:20}):null,n.InputProps.endAdornment]})}),InputLabelProps:o(o({},n.InputLabelProps),_&&{shrink:!0})}))}},$=function(e,t,n){var r=D.current;return Se("li",o(o({},e),{},{children:[Se(tr,{icon:pg,checkedIcon:mg,style:{marginRight:8},checked:n.selected}),g?t:r[t]||"".concat(t," (unknown)")]}))},G=function(e){var t=D.current;return g?e:t[e]||"".concat(e," (unknown)")},Y=function(e){T(e?[e]:null)};return E||!j.current?Se(Ri,{disableClearable:k,disabled:!0,loading:!0,value:null,options:fg,onChange:function(){return null},freeSolo:g,ListboxComponent:v?Di:void 0,getOptionLabel:G,renderInput:W(!0,!0),renderOption:$}):Se(Ri,{disableClearable:k,loading:E,value:R||null,onChange:function(e,t){return function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),Y(t)},getOptionLabel:G,freeSolo:g,options:I.options,disabled:a,readOnly:s,ListboxComponent:v?Di:void 0,renderInput:W(!1,s),renderOption:$})},children:Se(Yi,{FilterListSlot:Cn,children:Se(Ki,{children:Se(Xi,{children:Se(Hk,{children:Se(dg,{})})})})})})})})})})})}),gg=Zi(vg);Qi.setValue({WITH_DIRTY_CLICK_LISTENER:!0,WITH_MOBILE_READONLY_FALLBACK:!0,WITH_WAIT_FOR_MOVE_LISTENER:!0,WITH_WAIT_FOR_TOUCH_LISTENER:!0,WITH_DISMOUNT_LISTENER:!0,WITH_SYNC_COMPUTE:!0,CUSTOM_FIELD_DEBOUNCE:800,FIELD_BLUR_DEBOUNCE:50}),lt.setAdjustHeight(25);var xg=function(){var e=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.Translate){e.next=5;break}return e.next=3,U(500);case 3:e.next=0;break;case 5:gg.render(kg);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();xg()}}}))}();
