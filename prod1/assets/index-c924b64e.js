var e=Object.defineProperty,t=(t,a,i)=>(((t,a,i)=>{a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[a]=i})(t,"symbol"!=typeof a?a+"":a,i),i);function a(){import.meta.url,import("_").catch((()=>1))}import{u as i,i as o,s as l,d as r,l as n,a as s,b as d,r as m,m as c,v as u,c as p,S as y,V as h,e as b,Q as _,U as v,I as f,f as g,A as k,D as w,F as S,g as z,h as x,C as F,j as T,k as A,H as C,x as V,n as I,o as L,t as M,T as B,p as D,q as j,w as q,y as R,z as P,B as E,E as N,X as U,L as H,G as O,_ as W,J as $,K as G,M as Y,N as K,O as Z,P as X,R as J,W as Q,Y as ee,Z as te,$ as ae,a0 as ie,a1 as oe,a2 as le,a3 as re,a4 as ne,a5 as se,a6 as de,a7 as me,a8 as ce,a9 as ue,aa as pe,ab as ye,ac as he,ad as be,ae as _e,af as ve,ag as fe,ah as ge,ai as ke,aj as we,ak as Se,al as ze,am as xe,an as Fe,ao as Te,ap as Ae,aq as Ce,ar as Ve,as as Ie,at as Le,au as Me,av as Be,aw as De,ax as je,ay as qe,az as Re,aA as Pe,aB as Ee,aC as Ne,aD as Ue,aE as He,aF as Oe,aG as We,aH as $e,aI as Ge,aJ as Ye,aK as Ke,aL as Ze,aM as Xe,aN as Je,aO as Qe,aP as et,aQ as tt,aR as at,aS as it,aT as ot,aU as lt,aV as rt,aW as nt,aX as st,aY as dt,aZ as mt,a_ as ct,a$ as ut,b0 as pt,b1 as yt,b2 as ht,b3 as bt,b4 as _t,b5 as vt,b6 as ft,b7 as gt,b8 as kt,b9 as wt,ba as St,bb as zt,bc as xt,bd as Ft,be as Tt,bf as At,bg as Ct,bh as Vt,bi as It,bj as Lt,bk as Mt,bl as Bt,bm as Dt,bn as jt,bo as qt,bp as Rt,bq as Pt,br as Et,bs as Nt,bt as Ut,bu as Ht,bv as Ot,bw as Wt,bx as $t,by as Gt,bz as Yt,bA as Kt,bB as Zt,bC as Xt,bD as Jt,bE as Qt,bF as ea,bG as ta,bH as aa,bI as ia,bJ as oa,bK as la,bL as ra,bM as na,bN as sa,bO as da,bP as ma,bQ as ca,bR as ua,bS as pa,bT as ya,bU as ha,bV as ba,bW as _a,bX as va,bY as fa,bZ as ga,b_ as ka,b$ as wa,c0 as Sa,c1 as za,c2 as xa,c3 as Fa,c4 as Ta,c5 as Aa,c6 as Ca,c7 as Va,c8 as Ia,c9 as La,ca as Ma,cb as Ba,cc as Da,cd as ja,ce as qa,cf as Ra,cg as Pa,ch as Ea,ci as Na,cj as Ua,ck as Ha,cl as Oa,cm as Wa,cn as $a,co as Ga,cp as Ya,cq as Ka,cr as Za,cs as Xa,ct as Ja,cu as Qa,cv as ei,cw as ti,cx as ai,cy as ii,cz as oi,cA as li,cB as ri,cC as ni,cD as si,cE as di,cF as mi,cG as ci,cH as ui,cI as pi,cJ as yi,cK as hi,cL as bi,cM as _i,cN as vi,cO as fi,cP as gi,cQ as ki,cR as wi,cS as Si,cT as zi,cU as xi,cV as Fi,cW as Ti,cX as Ai,cY as Ci,cZ as Vi,c_ as Ii,c$ as Li,d0 as Mi,d1 as Bi,d2 as Di,d3 as ji,d4 as qi,d5 as Ri,d6 as Pi,d7 as Ei,d8 as Ni,d9 as Ui,da as Hi,db as Oi,dc as Wi,dd as $i,de as Gi,df as Yi,dg as Ki,dh as Zi,di as Xi,dj as Ji,dk as Qi,dl as eo,dm as to}from"./vendor-cdbc25c4.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const ao=(e=[])=>{const t=[],a=(e=[])=>e.forEach((e=>{const i=e.fields||[],o=e.child?[e.child]:[];a([...i,...o]),t.push(e)}));return a(e),t},io=e=>ao(e).filter((({name:e})=>e)).map((({name:e,type:t})=>({name:e,type:t}))).reduce(((e,{name:t,type:a})=>e.some((e=>{const i=e.name===t;return i&&e.type!=a&&console.warn("CONFLICT name=".concat(t," type1=").concat(e.type.toString()," type2=").concat(a.toString())),i}))?e:[...e,{name:t,type:a}]),[]);window.mapSchema=(e,{textFieldSize:t=96,itemFieldSize:a=48,comboFieldSize:o=48,dateFieldSize:l=12,timeFieldSize:r=12}={})=>io(e).map((({type:e,name:n})=>e===i.Items?{key:n,type:"string",status:"available",required:!1,array:!0,size:a,default:null}:e===i.Combo?{key:n,type:"string",status:"available",required:!1,array:!1,size:o,default:null}:e===i.Time?{key:n,type:"string",status:"available",required:!1,array:!1,size:r,default:null}:e===i.Radio?{key:n,type:"string",status:"available",required:!1,array:!1,size:radioFieldSize,default:null}:e===i.Date?{key:n,type:"string",status:"available",required:!1,array:!1,size:l,default:null}:e===i.Checkbox||e===i.Switch?{key:n,type:"boolean",status:"available",required:!1,array:!1,default:null}:(e===i.Component&&console.warn("Field name=".concat(n," is a component field. By default we are using nvarchar[").concat(t,"]. Double check manually for an array field")),{key:n,type:"string",status:"available",required:!1,array:!1,size:t,default:null}))).map((e=>JSON.stringify(e,null,2))).join(",\n"),window.mapFields=io,window.mapTypes=e=>io(e).map((({name:e,type:t})=>'"'.concat(e,'": ').concat(t===i.Combo?"string[] | null":t===i.Text?"string":t===i.Items?"string[] | null":t===i.Date||t===i.Radio||t===i.Complete||t===i.Time?"string":t===i.Checkbox||t===i.Switch?"boolean":(console.warn("UNKNOWN TYPE name=".concat(e," type=").concat(t.toString())),"string"),";"))).join("\n"),window.deepFlat=ao,"ResizeObserver"in window||(window.ResizeObserver=o),l.polyfill(),r.extend(n),r.extend(s),r.extend(d),r.locale(m);const oo={projectId:"64b53d0c41fcf5093b12",projectName:"RealEstate",databases:[{$id:"64c4de8e7b30179809ef",name:"DATABASE",$createdAt:"2023-09-14T10:10:35.686+00:00",$updatedAt:"2023-09-14T11:59:42.307+00:00",enabled:!0}],collections:[{$id:"64c4fb401e0a490e44bf",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"USER",enabled:!0,documentSecurity:!1,attributes:[{key:"user_role",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"email",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"middle_name",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"user_features",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"user_files",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"phone",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"active",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"first_name",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"last_name",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"avatar",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"index",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:-1},{key:"system_metadata",type:"string",status:"available",error:"",required:!1,array:!1,size:1024,default:null},{key:"filial",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"otdel",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"status_sotrudnika",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"telegram",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"fejsbuk",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"instagram",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"vatsap",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"v_kontakte",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"zum",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"semejnoe_polozhenie",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rabochij_telefon",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"lichnyj_nomer",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"ofis",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"data_priema_rezyume",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"sertifikat",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"nachalo_opyta_raboty",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"data_uvolneniya",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"prichina_uvolneniya",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"pol",type:"string",status:"available",error:"",required:!1,array:!1,size:18,default:null},{key:"data_rozhdeniya",type:"string",status:"available",error:"",required:!1,array:!1,size:20,default:null},{key:"seriya-i-nomer_pasporta",type:"string",status:"available",error:"",required:!1,array:!1,size:30,default:null},{key:"data-vydachi_pasporta",type:"string",status:"available",error:"",required:!1,array:!1,size:20,default:null},{key:"kem_vydan",type:"string",status:"available",error:"",required:!1,array:!1,size:25,default:null},{key:"data_trudoustrojstva",type:"string",status:"available",error:"",required:!1,array:!1,size:10,default:null},{key:"dolzhnost",type:"string",status:"available",error:"",required:!1,array:!1,size:20,default:null},{key:"nachalnik_otdela",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"deti",type:"string",status:"available",error:"",required:!1,array:!1,size:10,default:null},{key:"adres_propiski",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"adres_prozhivaniya",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"o_sebe",type:"string",status:"available",error:"",required:!1,array:!1,size:256,default:null},{key:"hobbi",type:"string",status:"available",error:"",required:!1,array:!1,size:256,default:null}],indexes:[{key:"system_metadata",type:"fulltext",status:"available",error:"",attributes:["system_metadata"],orders:["ASC"]},{key:"email1",type:"fulltext",status:"available",error:"",attributes:["email"],orders:["ASC"]},{key:"email1-phone1",type:"fulltext",status:"available",error:"",attributes:["email","phone"],orders:["ASC","ASC"]},{key:"phone1",type:"fulltext",status:"available",error:"",attributes:["phone"],orders:["ASC"]}]},{$id:"64c4fb9158c913d9036e",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"SETTINGS",enabled:!0,documentSecurity:!1,attributes:[{key:"usd_eur",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"usd_uzs",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"watermark_file_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"masterdetail_mode",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null}],indexes:[]},{$id:"64d5f3fb13b5a40c0d1d",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"FILES",enabled:!0,documentSecurity:!1,attributes:[{key:"name",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null}],indexes:[]},{$id:"64d4a34e613b8f723d6f",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"CONTACT",enabled:!0,documentSecurity:!1,attributes:[{key:"telefon",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"status_klienta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"tip_klienta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"loyalnost_klienta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"osnovanie-deyatelnosti-dannogo_licza",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"naimenovanie_organizaczii",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kadastrovyj-nomer_zemli",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"data-vydachi_pasporta",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kontakt",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"seriya-i-nomer_pasporta",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"fio",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kem_vydan",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"adres_registraczii",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sertifikat_kompanii",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"dolzhnost_rukovoditelya",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"contact_files",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"kadastrovyj-nomer_obekta",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"istochnik",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rekvizity",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_metadata",type:"string",status:"available",error:"",required:!1,array:!1,size:1024,default:null},{key:"pinfl",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"fakticheskij_adres",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"data_rozhdeniya",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"inn",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"pol",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"email",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"data-sozdaniya_klienta",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"yuridicheskij_adres",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"index",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:-1},{key:"contact_phones",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"contact_names",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"system_access_level",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"system_created_by",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_only_for_owner",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_allowance",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null}],indexes:[{key:"fio",type:"fulltext",status:"available",error:"",attributes:["fio"],orders:["ASC"]},{key:"system_metadata",type:"fulltext",status:"available",error:"",attributes:["system_metadata"],orders:["ASC"]},{key:"fio-telefon",type:"fulltext",status:"available",error:"",attributes:["fio","telefon"],orders:["ASC","ASC"]},{key:"telefon",type:"fulltext",status:"available",error:"",attributes:["telefon"],orders:["ASC"]}]},{$id:"64db49022640a0d53252",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"DEAL",enabled:!0,documentSecurity:!1,attributes:[{key:"user_id",type:"string",status:"available",error:"",required:!0,array:!1,size:96,default:null},{key:"apartment_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"bid_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"status",type:"string",status:"available",error:"",required:!0,array:!1,size:48,default:null},{key:"type",type:"string",status:"available",error:"",required:!0,array:!1,size:48,default:null},{key:"price",type:"string",status:"available",error:"",required:!1,array:!0,size:128,default:null},{key:"price_unit",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"index",type:"integer",status:"available",error:"",required:!0,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"fio",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telefon",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"tip_klienta",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"contact_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"target_apartment_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"target_bid_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null}],indexes:[{key:"contact",type:"key",status:"available",error:"",attributes:["contact_id"],orders:["ASC"]},{key:"apartment",type:"key",status:"available",error:"",attributes:["apartment_id"],orders:["ASC"]},{key:"bid",type:"key",status:"available",error:"",attributes:["bid_id"],orders:["ASC"]},{key:"target_apartment_status",type:"key",status:"available",error:"",attributes:["target_apartment_id","status"],orders:["ASC","ASC"]},{key:"target_bid_status",type:"key",status:"available",error:"",attributes:["target_bid_id","status"],orders:["ASC","ASC"]}]},{$id:"64c75cc607be95d26b8d",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"EDITTARGET",enabled:!0,documentSecurity:!1,attributes:[{key:"entity_id",type:"string",status:"available",error:"",required:!1,array:!1,size:64,default:null},{key:"path",type:"string",status:"available",error:"",required:!1,array:!1,size:64,default:null}],indexes:[]},{$id:"64ff0d1a1eec52961ec4",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"DEAL_HISTORY",enabled:!0,documentSecurity:!1,attributes:[{key:"bid_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"user_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"type",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"apartment_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"payload",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"comment",type:"string",status:"available",error:"",required:!1,array:!1,size:512,default:null},{key:"deal_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"contact_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null}],indexes:[{key:"bid_type",type:"key",status:"available",error:"",attributes:["bid_id","type"],orders:["ASC","ASC"]},{key:"apartment_type",type:"key",status:"available",error:"",attributes:["apartment_id","type"],orders:["ASC","ASC"]},{key:"apartment",type:"key",status:"available",error:"",attributes:["apartment_id"],orders:["ASC"]},{key:"bid",type:"key",status:"available",error:"",attributes:["bid_id"],orders:["ASC"]},{key:"contact",type:"key",status:"available",error:"",attributes:["contact_id"],orders:["ASC"]}]},{$id:"64d4a5782854ff66e9a1",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"APARTMENT",enabled:!0,documentSecurity:!1,attributes:[{key:"sanuzel_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"balkon_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"raspolozhenie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rent_kom_czena_sobstvennika_valyuta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"orientir",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rent_kom_komissiya_agenstva_unit",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"terrasa",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"sistema_kondiczionirovaniya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"etazhnost",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"etazh",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_gostevogo_doma",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kanalizacziya_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_sanuzla",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"mestopolozhenie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_balkona",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_metadata",type:"string",status:"available",error:"",required:!1,array:!1,size:1024,default:null},{key:"prod_komissiya_menedzhera",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"uglovoj",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"voda_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rajon",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"strana",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sistema-kondiczionirovaniya_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kolichestvo_komnat",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"prod_kom_komissiya_agenstva",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rent_komissiya_agenstva",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kolichestvo_spalen",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_doma",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rent_czena",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"bassejn",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"tip_stroeniya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"raspolozhenie_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kanalizacziya_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sistema-otopleniya_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"prod_kom_komissiya_menedzhera_unit",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"nazvanie_zhk",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"prod_torg",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"podezd_nomer",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sostoyanie_remonta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rent_kom_komissiya_menedzhera",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"prod_kom_komissiya_agenstva_unit",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mashina_mesto",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"naznachenie-obekta-zemlya_uchastok",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rent_kom_komissiya_agenstva",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"elektrichestvo",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"prod_komissiya_menedzhera_unit",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"tip_zemli_uchastka",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sostoyanie-obekta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rent_kom_czena_sobstvennika",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sostoyanie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rent_komissiya_agenstva_unit",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rent_kom_torg",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"prod_kom_torg",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"rent_kom_komissiya_menedzhera_unit",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"czokol",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"vysota_potolkov",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"mebel",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"parkovka_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sistema-otopleniya_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"god_postrojki",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"naznachenie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"prod_kom_startovaya_czena",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"zhd_vetka",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"contact_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_kuhni",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"voda_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rent_torg",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"prod_kom_komissiya_menedzhera",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"zagolovok",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sistema-kondiczionirovaniya_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"metro",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sanuzel_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"vid_iz_okna",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"prod_komissiya_agenstva_unit",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_holla",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sostoyanie-remonta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"gaz_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rasstoyanie_do_goroda",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rent_kom_startovaya_czena_valyuta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"lift_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"prod_czena",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"elektrichestvo_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"balkon",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sanuzel",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"arenda",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mebel_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"lift_kommercziya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sostoyanie_remonta-kvartiry",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sostoyanie_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"podkategoriya_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"energonositel_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sistema-otopleniya_kvartiry",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kanalizacziya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mebel_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rasstoyanie_do_metro",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"parkovka",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"lift_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"gorod",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"oblast",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"podezdnye_puti",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"torecz",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"nomer_kvartiry",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rent_startovaya_czena_valyuta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"gaz_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"istochnik",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sobstvennoe_obsluzhivayushhee_tszh",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"sistema_otopleniya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"balkon_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"garazh",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"poleznaya_ploshhad",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"elektrichestvo_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kod_domofona",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"vid_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rent_komissiya_menedzhera",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"tip_planirovki",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"parkovka_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"tip-stroeniya_kvartiry",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"nomer_doma",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rent_czena_valyuta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"apartment_images",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"prod_kom_czena_sobstvennika",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rent_startovaya_czena",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"mahallya",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rent_komissiya_menedzhera_unit",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rent_kom_startovaya_czena",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"voda",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"apartment_files",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"ploshhad_spalni",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"addon_square_names",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_gostinnoj",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_terrasy",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"gaz",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"zhilaya_ploshhad",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kategoriya_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"index",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:-1},{key:"konserzh",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"prod_kom_czena_sobstvennika_valyuta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"prod_kom_startovaya_czena_valyuta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"vid_iz_okna_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"prod_czena_for",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"garderobnaya",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"ploshhad_dopolnitelnoj_pristrojki",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ulicza",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"naznachenie-obekta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"obshhaya_ploshhad",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"prod_komissiya_agenstva",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"creator_user_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"addon_square_values",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"prod_startovaya_czena",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rent_czena_for",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_komnaty_ohrany",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"spalnya_sanuzel",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"prod_czena_valyuta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"prod_startovaya_czena_valyuta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rent_kom_czena_for",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"vid_liczenzii",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mestopolozhenie-obekta_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kolichestvo_sotok",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"prod_kom_czena_for",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"tip-stroeniya_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mestopolozhenie-obekta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"prodazha",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"opisanie",type:"string",status:"available",error:"",required:!1,array:!1,size:1024,default:null},{key:"vnutri_est",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ryadom_est",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"komnata_ohrany",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"vdol_dorogi",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"podval",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"saraj",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"ogorod",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"reshetki_na_oknah",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"pozharnaya_signalizacziya",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"videonablyudenie",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"signalizacziya",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"razgruzochnyj_pandus",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"gostevoj_domik",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"barbekyu_zona",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"dva_doma_vo_dvore",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"polisadnik",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"dopolnitelnaya_pristrojka",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"ohrana",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"holodilnik",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_access_level",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"system_is_rent",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_is_sell",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_is_archive",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_created_by",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_only_for_owner",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_allowance",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null}],indexes:[]},{$id:"64d7502a5ce9f881b680",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"BIDS",enabled:!0,documentSecurity:!1,attributes:[{key:"parkovka",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"naznachenie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"spalnya_sanuzel_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kanalizacziya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kolichestvo_spalen_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"etazh_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"vid_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mebel_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"balkon",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"system_metadata",type:"string",status:"available",error:"",required:!1,array:!1,size:1024,default:null},{key:"prod_kom_komissiya_agenstva",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"mebel",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"vdol_dorogi",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"ploshhad_sanuzla_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"tip_stroeniya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"poleznaya_ploshhad_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sostoyanie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"etazhnost_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rasstoyanie_do_metro_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"tip-stroeniya_kvartiry",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"czokol",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"god_postrojki_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"konserzh",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"sistema-otopleniya_kvartiry",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"nomer_kvartiry",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_kuhni_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"zhilaya_ploshhad_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"etazh_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_balkona_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rent_komissiya_menedzhera_unit",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"prod_komissiya_agenstva_unit",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"balkon_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"god_postrojki_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"prodazha",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"zagolovok",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"voda",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"metro",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"lift_kommercziya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rent_kom_komissiya_menedzhera",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"gaz",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"poleznaya_ploshhad_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kolichestvo_sotok_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rent_kom_komissiya_menedzhera_unit",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"spalnya_sanuzel_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"vid_iz_okna",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kolichestvo_spalen_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"lift_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sostoyanie_remonta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"bassejn",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mashina_mesto_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sanuzel",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"obshhaya_ploshhad_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"obshhaya_ploshhad_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sistema_kondiczionirovaniya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kolichestvo_sotok_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"vysota_potolkov_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"raspolozhenie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"naznachenie-obekta-zemlya_uchastok",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"raspolozhenie_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"nazvanie_zhk",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"vysota_potolkov_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sanuzel_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"voda_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kolichestvo_komnat_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"zhd_vetka",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"podkategoriya_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kolichestvo_komnat_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rent_kom_startovaya_czena_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"zhilaya_ploshhad_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"elektrichestvo",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_holla_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"torecz",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"kategoriya_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"istochnik",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mebel_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"terrasa",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"tip_zemli_uchastka",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"prod_kom_startovaya_czena_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"prod_torg",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"prod_kom_komissiya_menedzhera_unit",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"prod_komissiya_menedzhera_unit",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"voda_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mahallya",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rajon",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"tip-stroeniya_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"bid_files",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"ploshhad_dopolnitelnoj_pristrojki_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sostoyanie-remonta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rent_czena_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sistema-otopleniya_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"prod_komissiya_menedzhera",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sistema-otopleniya_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rent_kom_komissiya_agenstva_unit",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rent_kom_startovaya_czena_valyuta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sostoyanie-obekta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rent_czena_valyuta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sobstvennoe_obsluzhivayushhee_tszh",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"kanalizacziya_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rent_komissiya_agenstva",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"gaz_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rent_kom_czena_sobstvennika_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"strana",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"gorod",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"bid_images",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"rent_czena_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"oblast",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rent_kom_torg",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"ploshhad_sanuzla_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_komnaty_ohrany_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"orientir",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"vid_iz_okna_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_gostevogo_doma_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"mestopolozhenie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rent_kom_komissiya_agenstva",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"prod_czena_valyuta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sanuzel_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rent_kom_czena_sobstvennika_for",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rent_kom_startovaya_czena_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"parkovka_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"garderobnaya",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"prod_kom_startovaya_czena_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"prod_kom_torg",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"garazh",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rent_startovaya_czena_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"prod_czena_for",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rent_startovaya_czena_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"mestopolozhenie-obekta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rasstoyanie_do_goroda_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_dopolnitelnoj_pristrojki_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rent_kom_czena_sobstvennika_valyuta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"elektrichestvo_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_komnaty_ohrany_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_kuhni_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sistema_otopleniya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"elektrichestvo_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ulicza",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rent_startovaya_czena_valyuta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rent_torg",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"vid_liczenzii",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rasstoyanie_do_goroda_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rent_komissiya_menedzhera",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rasstoyanie_do_metro_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sistema-kondiczionirovaniya_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_gostinnoj_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"prod_kom_komissiya_menedzhera",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"prod_startovaya_czena_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"prod_startovaya_czena_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"prod_kom_startovaya_czena_valyuta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"balkon_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kanalizacziya_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_holla_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_balkona_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sostoyanie_remonta-kvartiry",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"prod_kom_komissiya_agenstva_unit",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"prod_startovaya_czena_valyuta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"tip_planirovki",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_spalni_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"prod_czena_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"podval",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"nomer_doma",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"podezdnye_puti",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"etazhnost_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"prod_startovaya_czena_for",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"prod_kom_czena_sobstvennika_valyuta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_doma_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"prod_kom_czena_sobstvennika_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"lift_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mestopolozhenie-obekta_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"gaz_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_spalni_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"contact_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sostoyanie_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"opisanie",type:"string",status:"available",error:"",required:!1,array:!1,size:1024,default:null},{key:"ploshhad_gostinnoj_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"parkovka_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"uglovoj",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"naznachenie-obekta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"arenda",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"prod_kom_czena_sobstvennika_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rent_komissiya_agenstva_unit",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_terrasy_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rent_kom_czena_sobstvennika_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sistema-kondiczionirovaniya_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"creator_user_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"prod_czena_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rent_kom_startovaya_czena_for",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_terrasy_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"index",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:-1},{key:"mashina_mesto_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"prod_kom_czena_sobstvennika_for",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_gostevogo_doma_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"prod_kom_startovaya_czena_for",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_doma_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rent_czena_for",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rent_startovaya_czena_for",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"prod_komissiya_agenstva",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"metro_list",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rajon_list",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mahallya_list",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"vnutri_est",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ryadom_est",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"komnata_ohrany",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"saraj",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"ogorod",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"reshetki_na_oknah",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"pozharnaya_signalizacziya",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"videonablyudenie",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"signalizacziya",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"razgruzochnyj_pandus",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"gostevoj_domik",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"barbekyu_zona",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"dva_doma_vo_dvore",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"polisadnik",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"dopolnitelnaya_pristrojka",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"ohrana",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_access_level",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"system_is_rent",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_is_sell",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_is_archive",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_created_by",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_only_for_owner",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_allowance",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null}],indexes:[{key:"system_metadata",type:"fulltext",status:"available",error:"",attributes:["system_metadata"],orders:["ASC"]}]},{$id:"6509b9124a8ff89af189",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"SERVICE_COMMENT",enabled:!0,documentSecurity:!1,attributes:[{key:"apartment_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"bid_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"contact_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"comment",type:"string",status:"available",error:"",required:!1,array:!1,size:2048,default:null},{key:"file_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"user_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null}],indexes:[{key:"apartment",type:"key",status:"available",error:"",attributes:["apartment_id"],orders:["ASC"]},{key:"contact",type:"key",status:"available",error:"",attributes:["contact_id"],orders:["ASC"]},{key:"bid",type:"key",status:"available",error:"",attributes:["bid_id"],orders:["ASC"]}]},{$id:"650af9b005b11d0b21a4",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"ROLES",enabled:!0,documentSecurity:!1,attributes:[{key:"title",type:"string",status:"available",error:"",required:!1,array:!1,size:128,default:null},{key:"comment",type:"string",status:"available",error:"",required:!1,array:!1,size:2048,default:null},{key:"role_features",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null}],indexes:[]},{$id:"651a9e22bab7ca1094fa",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"NOTIFY",enabled:!0,documentSecurity:!1,attributes:[{key:"user_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"title",type:"string",status:"available",error:"",required:!1,array:!1,size:512,default:null},{key:"url",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"is_read",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null}],indexes:[{key:"user",type:"key",status:"available",error:"",attributes:["user_id"],orders:["ASC"]},{key:"user_read",type:"key",status:"available",error:"",attributes:["user_id","is_read"],orders:["ASC","ASC"]}]},{$id:"651bcf6238a18a8fd2f2",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"TASK",enabled:!0,documentSecurity:!1,attributes:[{key:"from_user_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"to_user_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"contact_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"type",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"title",type:"string",status:"available",error:"",required:!1,array:!1,size:512,default:null},{key:"index",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"moment_stamp",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"is_complete",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"is_meet",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"is_call",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"from_user_fio",type:"string",status:"available",error:"",required:!1,array:!1,size:128,default:null},{key:"to_user_fio",type:"string",status:"available",error:"",required:!1,array:!1,size:128,default:null},{key:"contact_fio",type:"string",status:"available",error:"",required:!1,array:!1,size:128,default:null},{key:"time_stamp",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null}],indexes:[{key:"to_user",type:"key",status:"available",error:"",attributes:["to_user_id"],orders:["ASC"]},{key:"contact",type:"key",status:"available",error:"",attributes:["contact_id"],orders:["ASC"]},{key:"type",type:"key",status:"available",error:"",attributes:["type"],orders:["ASC"]},{key:"moment_stamp",type:"key",status:"available",error:"",attributes:["moment_stamp"],orders:["ASC"]},{key:"complete",type:"key",status:"available",error:"",attributes:["is_complete"],orders:["ASC"]}]},{$id:"651be76b0bfd3092408e",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"TASK_HISTORY",enabled:!0,documentSecurity:!1,attributes:[{key:"user_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"contact_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"task_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"comment",type:"string",status:"available",error:"",required:!1,array:!1,size:1024,default:null}],indexes:[{key:"user",type:"key",status:"available",error:"",attributes:["user_id"],orders:["ASC"]},{key:"contact",type:"key",status:"available",error:"",attributes:["contact_id"],orders:["ASC"]},{key:"task",type:"key",status:"available",error:"",attributes:["task_id"],orders:["ASC"]}]}],buckets:[{$id:"64c4f91c7f9a4458c4bb",$createdAt:"2023-07-29T11:33:48.524+00:00",$updatedAt:"2023-07-29T14:57:21.610+00:00",$permissions:['create("any")','read("any")','update("any")','delete("any")'],fileSecurity:!1,name:"ROOT",enabled:!0,maximumFileSize:3e9,allowedFileExtensions:[],compression:"none",encryption:!0,antivirus:!0}],functions:[{$id:"6513df8529ea78bf2325",name:"BUN_APARTMENT_PAGINATOR",runtime:"bun-1.0",execute:[],events:[],schedule:"",timeout:15,enabled:!0,logging:!0,entrypoint:"src/index.js",commands:"bun install",ignore:["node_modules",".npm"],path:"functions/bun-apartment-paginator"},{$id:"6513fbd219052f40b1a8",name:"BUN_BID_PAGINATOR",runtime:"bun-1.0",execute:[],events:[],schedule:"",timeout:15,enabled:!0,logging:!0,entrypoint:"src/index.js",commands:"bun install",ignore:["node_modules",".npm"],path:"functions/bun-bid-paginator"},{$id:"65141fcd03cbb257e5fc",name:"BUN_CONTACT_PAGINATOR",runtime:"bun-1.0",execute:[],events:[],schedule:"",timeout:15,enabled:!0,logging:!0,entrypoint:"src/index.js",commands:"bun install",ignore:["node_modules",".npm"],path:"functions/bun-contact-paginator"}]},lo=e=>{const t=oo.collections.find((t=>t.name===e));if(!t)throw new Error("params.ts collection not found: ".concat(e));return null==t?void 0:t.$id},ro=e=>{const t=oo.functions.find((t=>t.name===e));if(!t)throw new Error("params.ts function not found: ".concat(e));return null==t?void 0:t.$id},no="RealEstate",so=1700,mo=500,co="/assets",uo={endpoint:"https://cloud.appwrite.io/v1",databaseId:"64c4de8e7b30179809ef",projectId:"64ff425ae6da38de0a60"},po=oo.buckets[0].$id,yo=lo("USER"),ho=lo("SETTINGS"),bo=lo("EDITTARGET"),_o=lo("APARTMENT"),vo=lo("CONTACT"),fo=lo("FILES"),go=lo("BIDS"),ko=lo("DEAL"),wo=lo("TASK"),So=lo("DEAL_HISTORY"),zo=lo("SERVICE_COMMENT"),xo=lo("ROLES"),Fo=lo("NOTIFY"),To=lo("TASK_HISTORY"),Ao=ro("BUN_APARTMENT_PAGINATOR"),Co=ro("BUN_CONTACT_PAGINATOR"),Vo=ro("BUN_BID_PAGINATOR"),Io="databases.*.collections.*.documents.*.update",Lo="databases.*.collections.*.documents.*.create",Mo="databases.*.collections.*.documents.*.delete",Bo=1024;class Do{constructor(){t(this,"_alerts",[]),t(this,"hideCurrent",(()=>{this._alerts.length>0&&this._alerts.shift()})),t(this,"notify",(e=>{this.hideCurrent(),this._alerts.push({key:u(),message:e})})),c(this)}get current(){return this._alerts.length?this._alerts[0]:null}}const jo=e=>{const t=e.$id;return Object.entries(e).map((([e,t])=>Array.isArray(t)?[e,t.length?t:null]:[e,t])).reduce(((e,[t,a])=>({...e,[t]:a})),{id:t})},qo=e=>e.map(jo),Ro=e=>Object.entries(e).filter((([e])=>"id"!==e)).filter((([e])=>!e.startsWith("$"))).filter((([e])=>!e.startsWith("system_"))).filter((([e])=>"is_archive"!==e)).map((([e,t])=>Array.isArray(t)?[e,t.length?t:null]:[e,t])).reduce(((e,[t,a])=>({...e,[t]:a})),{});window.toRussian=e=>p(e,{engToRus:!0,slug:!0}),window.fromRussian=e=>p(e,{slug:!0});const Po={appwriteService:Symbol.for("appwriteService"),alertService:Symbol.for("alertService"),layoutService:Symbol.for("layoutService"),routerService:Symbol.for("routerService"),errorService:Symbol.for("errorService"),authService:Symbol.for("authService"),dictService:Symbol.for("dictService"),cacheService:Symbol.for("cacheService"),ymapsService:Symbol.for("ymapsService"),loggerService:Symbol.for("loggerService"),realtimeService:Symbol.for("realtimeService")},Eo={editTargetService:Symbol.for("editTargetService"),permissionService:Symbol.for("permissionService"),featureService:Symbol.for("featureService"),previewModeService:Symbol.for("previewModeService"),metadataService:Symbol.for("metadataService")},No={...Po,...{contactRequestService:Symbol.for("contactRequestService"),dealHistoryRequestService:Symbol.for("dealHistoryRequestService"),dealRequestService:Symbol.for("dealRequestService"),taskRequestService:Symbol.for("taskRequestService"),taskHistoryRequestService:Symbol.for("taskHistoryRequestService"),dashboardRequestService:Symbol.for("dashboardRequestService"),permissionRequestService:Symbol.for("permissionRequestService")},...{settingsDbService:Symbol.for("settingsDbService"),userDbService:Symbol.for("userDbService"),apartmentDbService:Symbol.for("apartmentDbService"),bidDbService:Symbol.for("bidDbService"),dealDbService:Symbol.for("dealDbService"),contactDbService:Symbol.for("contactDbService"),dealHistoryDbService:Symbol.for("dealHistoryDbService"),serviceCommentDbService:Symbol.for("serviceCommentDbService"),roleDbService:Symbol.for("roleDbService"),notifyDbService:Symbol.for("notifyDbService"),taskDbService:Symbol.for("taskDbService"),taskHistoryDbService:Symbol.for("taskHistoryDbService")},...{settingsViewService:Symbol.for("settingsViewService"),userViewService:Symbol.for("userViewService"),apartmentViewService:Symbol.for("apartmentViewService"),bidViewService:Symbol.for("bidViewService"),dealViewService:Symbol.for("dealViewService"),contactViewService:Symbol.for("contactViewService"),dealHistoryViewService:Symbol.for("dealHistoryViewService"),serviceCommentViewService:Symbol.for("serviceCommentViewService"),roleViewService:Symbol.for("roleViewService"),notifyViewService:Symbol.for("notifyViewService"),taskViewService:Symbol.for("taskViewService"),taskHistoryViewService:Symbol.for("taskHistoryViewService")},...Eo},Uo="databases.".concat(uo.databaseId,".collections.").concat(_o,".documents");class Ho{constructor(){t(this,"reloadSubject",new y),t(this,"updateSubject",new y),t(this,"featureService",h(No.featureService)),t(this,"permissionService",h(No.permissionService)),t(this,"appwriteService",h(No.appwriteService)),t(this,"realtimeService",h(No.realtimeService)),t(this,"getMetadata",(async e=>{const t=[];return t.push(e.zagolovok),t.join(" ").slice(0,Bo)})),t(this,"createIndex",(async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(uo.databaseId,_o,[_.limit(1),_.select(["index"])]);return e+1})),t(this,"findById",(async e=>{const t=await this.appwriteService.databases.getDocument(uo.databaseId,_o,e);return jo(t)})),t(this,"paginate",(async(e,t,a,i,o,l)=>{const{rows:r,total:n}=await this.appwriteService.execute(Ao,{filterData:{_accessLevel:this.featureService.readAccessLevel,_search:o,...e},pagination:t,sortModel:a,chips:i,search:o,payload:l});return{rows:qo(r),total:n}})),t(this,"create",(async e=>{var t,a;const i=await this.permissionService.getPermissions(),o=await this.appwriteService.databases.createDocument(uo.databaseId,_o,this.appwriteService.createId(),{...Ro(e),system_metadata:await this.getMetadata(e),system_access_level:await this.featureService.getAccessLevel(),system_is_rent:!!(null==(t=e.arenda)?void 0:t.length),system_is_sell:!!(null==(a=e.prodazha)?void 0:a.length),system_created_by:this.appwriteService.currentUser.$id,system_only_for_owner:i.hasManagerAllObjectsExclusivePermission,system_is_archive:!1,index:await this.createIndex()});return jo(o)})),t(this,"update",(async(e,t)=>{var a,i;const o=await this.appwriteService.databases.updateDocument(uo.databaseId,_o,e,{...Ro(t),system_metadata:await this.getMetadata(t),system_is_rent:!!(null==(a=t.arenda)?void 0:a.length),system_is_sell:!!(null==(i=t.prodazha)?void 0:i.length)}),l=jo(o);return this.updateSubject.next([e,l]),l})),t(this,"toggleArchive",(async e=>{const{system_is_archive:t}=await this.findById(e),a=await this.appwriteService.databases.updateDocument(uo.databaseId,_o,e,{system_is_archive:!t}),i=jo(a);this.updateSubject.next([e,i]),this.reloadSubject.next()})),t(this,"toggleOnlyForOwner",(async e=>{const{system_only_for_owner:t}=await this.findById(e),a=await this.appwriteService.databases.updateDocument(uo.databaseId,_o,e,{system_only_for_owner:!t}),i=jo(a);this.updateSubject.next([e,i]),this.reloadSubject.next()})),t(this,"moveToArchive",(async e=>{const t=await this.appwriteService.databases.updateDocument(uo.databaseId,_o,e,{system_is_archive:!0}),a=jo(t);this.updateSubject.next([e,a]),this.reloadSubject.next()})),t(this,"remove",(async e=>{await this.appwriteService.databases.deleteDocument(uo.databaseId,_o,e)})),t(this,"prefetch",v((async()=>{this.realtimeService.subscribe(Uo,(({events:e,payload:t})=>{if(e.includes(Lo)&&this.reloadSubject.next(),e.includes(Mo)&&this.reloadSubject.next(),e.includes(Io)){const e=jo(t);this.updateSubject.next([t.$id,e])}}))}))),b(this,{})}}class Oo{constructor(){t(this,"apartmentDbService",h(No.apartmentDbService)),t(this,"loggerService",h(No.loggerService)),t(this,"reloadSubject",this.apartmentDbService.reloadSubject),t(this,"updateSubject",this.apartmentDbService.updateSubject),t(this,"create",(async e=>(this.loggerService.log("apartmentViewService create",e),await this.apartmentDbService.create(e)))),t(this,"update",(async(e,t)=>(this.loggerService.log("apartmentViewService update",t),await this.apartmentDbService.update(e,t)))),t(this,"toggleArchive",(async e=>(this.loggerService.log("apartmentViewService toggleArchive"),await this.apartmentDbService.toggleArchive(e)))),t(this,"toggleOnlyForOwner",(async e=>(this.loggerService.log("apartmentViewService toggleOnlyForOwner"),await this.apartmentDbService.toggleOnlyForOwner(e)))),t(this,"moveToArchive",(async e=>(this.loggerService.log("apartmentViewService moveToArchive"),await this.apartmentDbService.moveToArchive(e)))),t(this,"remove",(async e=>(this.loggerService.log("apartmentViewService remove",{id:e}),await this.apartmentDbService.remove(e)))),t(this,"read",(async e=>{this.loggerService.log("apartmentViewService read",{id:e});return await this.apartmentDbService.findById(e)})),t(this,"tryRead",(async e=>{this.loggerService.log("apartmentViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),t(this,"paginate",(async(e,t,a,i,o,l)=>(this.loggerService.log("apartmentViewService paginate"),await this.apartmentDbService.paginate(e,t,a,i,o,l)))),b(this,{})}}class Wo{constructor(){t(this,"cacheService",h(No.cacheService)),t(this,"_client",null),t(this,"_functions",null),t(this,"_account",null),t(this,"_storage",null),t(this,"_databases",null),t(this,"_session",null),t(this,"_currentUser",null),t(this,"createId",(()=>f.unique())),t(this,"getCurrentSession",(async e=>{try{return await e.getSession("current")}catch(t){return null}})),t(this,"init",v((async()=>{const{endpoint:e,projectId:t}=uo,a=new F;a.setEndpoint(e).setProject(t).setLocale("ru-RU");const i=new k(a),o=new w(a),l=new S(a),r=new z(a),n=await this.getCurrentSession(i),s=n?await i.get():null;x((()=>{this._client=a,this._account=i,this._session=n,this._databases=o,this._functions=l,this._storage=r,this._currentUser=s}))}))),t(this,"readFileName",(async e=>{const{name:t}=await this.databases.getDocument(uo.databaseId,fo,e);return t})),t(this,"tryReadFileName",(async e=>{try{return await this.readFileName(e)}catch(t){return null}})),t(this,"uploadFile",(async e=>{const t=u();return await this.storage.createFile(po,t,e),await this.databases.createDocument(uo.databaseId,fo,t,{name:e.name}),t})),t(this,"uploadBlob",(async(e,t)=>{const a=new File([e],t);return await this.uploadFile(a)})),t(this,"removeFile",(async e=>{await this.storage.deleteFile(po,e)})),t(this,"getFileURL",(async e=>(await this.storage.getFileView(po,e)).toString())),t(this,"getImageURL",(async e=>{let t="";return await this.cacheService.hasImage(e)||(t=await this.getFileURL(e)),await this.cacheService.getImage(t,e)})),t(this,"execute",g((async(e,t)=>{const a=JSON.stringify(t),{responseBody:i,status:o}=await this.functions.createExecution(e,a,!1);if("failed"===o)throw i;const l=JSON.parse(i||"{}");if(l.error)throw new Error(l.error);return l}),3)),t(this,"prefetch",(async()=>{await this.init()})),c(this),this.init()}get client(){return this._client}get storage(){return this._storage}get account(){return this._account}get session(){return this._session}get databases(){return this._databases}get functions(){return this._functions}get isAuthorized(){return!!this._session}get currentUser(){return this._currentUser||{}}}const $o={user_role:[],user_features:[],active:!1,middle_name:"",phone:"",email:"",user_files:[],first_name:"",avatar:"",last_name:"",system_metadata:""};class Go{constructor(){t(this,"appwriteService",h(No.appwriteService)),t(this,"alertService",h(No.alertService)),t(this,"routerService",h(No.routerService)),t(this,"tryReadUserData",(async e=>{try{return await this.appwriteService.databases.getDocument(uo.databaseId,yo,e)}catch(t){return null}})),t(this,"initUser",v((async e=>{const t=await this.tryReadUserData(e.userId);if(!t){const{total:t}=await this.appwriteService.databases.listDocuments(uo.databaseId,yo,[_.limit(1),_.select(["index"])]);return await this.appwriteService.databases.createDocument(uo.databaseId,yo,e.userId,{...$o,index:t+1}),this.routerService.push("/inactive_page"),!1}const{email:a}=this.appwriteService.currentUser;return a&&!t.email&&await this.appwriteService.databases.updateDocument(uo.databaseId,yo,e.userId,{...$o,...Ro(t),system_metadata:t.system_metadata||"",email:a}),!!t.active||(this.routerService.push("/inactive_page"),!1)}))),t(this,"login",(async({email:e,password:t})=>{try{const a=await this.appwriteService.account.createEmailSession(e,t);await this.initUser(a),T()}catch(a){return this.alertService.notify(a.message||"Unknown error"),!1}})),t(this,"logout",(async()=>{try{await this.appwriteService.account.deleteSession("current"),T()}catch(e){return this.alertService.notify(e.message||"Unknown error"),!1}})),t(this,"register",(async({email:e,password:t})=>{try{await this.appwriteService.account.create(this.appwriteService.createId(),e,t),T()}catch(a){return this.alertService.notify(a.message||"Unknown error"),!1}})),t(this,"prefetch",v((async()=>{this.appwriteService.isAuthorized||this.routerService.push("/login_page");const e=this.appwriteService.session;this.appwriteService.isAuthorized&&await this.initUser(e)}))),b(this,{})}}const Yo="databases.".concat(uo.databaseId,".collections.").concat(go,".documents");class Ko{constructor(){t(this,"reloadSubject",new y),t(this,"updateSubject",new y),t(this,"featureService",h(No.featureService)),t(this,"appwriteService",h(No.appwriteService)),t(this,"permissionService",h(No.permissionService)),t(this,"realtimeService",h(No.realtimeService)),t(this,"getMetadata",(async e=>{const t=[];return t.push(e.zagolovok),t.join(" ").slice(0,Bo)})),t(this,"createIndex",(async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(uo.databaseId,go,[_.limit(1),_.select(["index"])]);return e+1})),t(this,"findById",(async e=>{const t=await this.appwriteService.databases.getDocument(uo.databaseId,go,e);return jo(t)})),t(this,"paginate",(async(e,t,a,i,o,l)=>{const{rows:r,total:n}=await this.appwriteService.execute(Vo,{filterData:{_accessLevel:this.featureService.readAccessLevel,_search:o,...e},pagination:t,sortModel:a,chips:i,search:o,payload:l});return{rows:qo(r),total:n}})),t(this,"create",(async e=>{var t,a;const i=await this.permissionService.getPermissions(),o=await this.appwriteService.databases.createDocument(uo.databaseId,go,this.appwriteService.createId(),{...Ro(e),system_metadata:await this.getMetadata(e),system_access_level:await this.featureService.getAccessLevel(),system_is_rent:!!(null==(t=e.arenda)?void 0:t.length),system_is_sell:!!(null==(a=e.prodazha)?void 0:a.length),system_created_by:this.appwriteService.currentUser.$id,system_only_for_owner:i.hasManagerAllObjectsExclusivePermission,system_is_archive:!1,index:await this.createIndex()});return jo(o)})),t(this,"update",(async(e,t)=>{var a,i;const o=await this.appwriteService.databases.updateDocument(uo.databaseId,go,e,{...Ro(t),system_metadata:await this.getMetadata(t),system_is_rent:!!(null==(a=t.arenda)?void 0:a.length),system_is_sell:!!(null==(i=t.prodazha)?void 0:i.length)}),l=jo(o);return this.updateSubject.next([e,l]),l})),t(this,"toggleArchive",(async e=>{const{system_is_archive:t}=await this.findById(e),a=await this.appwriteService.databases.updateDocument(uo.databaseId,go,e,{system_is_archive:!t}),i=jo(a);this.updateSubject.next([e,i]),this.reloadSubject.next()})),t(this,"toggleOnlyForOwner",(async e=>{const{system_only_for_owner:t}=await this.findById(e),a=await this.appwriteService.databases.updateDocument(uo.databaseId,go,e,{system_only_for_owner:!t}),i=jo(a);this.updateSubject.next([e,i]),this.reloadSubject.next()})),t(this,"moveToArchive",(async e=>{const t=await this.appwriteService.databases.updateDocument(uo.databaseId,go,e,{system_is_archive:!0}),a=jo(t);this.updateSubject.next([e,a]),this.reloadSubject.next()})),t(this,"remove",(async e=>{await this.appwriteService.databases.deleteDocument(uo.databaseId,go,e)})),t(this,"prefetch",v((async()=>{this.realtimeService.subscribe(Yo,(({events:e,payload:t})=>{if(e.includes(Lo)&&this.reloadSubject.next(),e.includes(Mo)&&this.reloadSubject.next(),e.includes(Io)){const e=jo(t);this.updateSubject.next([t.$id,e])}}))}))),b(this,{})}}class Zo{constructor(){t(this,"bidDbService",h(No.bidDbService)),t(this,"loggerService",h(No.loggerService)),t(this,"reloadSubject",this.bidDbService.reloadSubject),t(this,"updateSubject",this.bidDbService.updateSubject),t(this,"create",(async e=>(this.loggerService.log("bidViewService create",e),await this.bidDbService.create(e)))),t(this,"update",(async(e,t)=>(this.loggerService.log("bidViewService update",t),await this.bidDbService.update(e,t)))),t(this,"remove",(async e=>(this.loggerService.log("bidViewService remove",{id:e}),await this.bidDbService.remove(e)))),t(this,"toggleArchive",(async e=>(this.loggerService.log("bidViewService toggleArchive"),await this.bidDbService.toggleArchive(e)))),t(this,"toggleOnlyForOwner",(async e=>(this.loggerService.log("bidViewService toggleOnlyForOwner"),await this.bidDbService.toggleOnlyForOwner(e)))),t(this,"moveToArchive",(async e=>(this.loggerService.log("bidViewService moveToArchive"),await this.bidDbService.moveToArchive(e)))),t(this,"read",(async e=>{this.loggerService.log("bidViewService read",{id:e});return await this.bidDbService.findById(e)})),t(this,"tryRead",(async e=>{this.loggerService.log("bidViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),t(this,"paginate",(async(e,t,a,i,o,l)=>(this.loggerService.log("bidViewService paginate"),await this.bidDbService.paginate(e,t,a,i,o,l)))),b(this,{})}}const Xo="cache",Jo="realestate";class Qo{constructor(){t(this,"routerService",h(No.routerService)),t(this,"db",null),t(this,"resourceMap",new Map),t(this,"init",(()=>new Promise(((e,t)=>{const a=indexedDB.open(Jo,1);a.onupgradeneeded=()=>{a.result.createObjectStore(Xo)},a.onsuccess=()=>{this.db=a.result,this.db.onerror=()=>{console.error("Error creating/accessing db")},e()},a.onerror=()=>{t()}})))),t(this,"writeImage",(async(e,t)=>new Promise(((a,i)=>{const o=this.db.transaction([Xo],"readwrite").objectStore(Xo).put(e,t);o.addEventListener("success",(()=>a())),o.addEventListener("error",(()=>i()))})))),t(this,"readImage",(e=>new Promise(((t,a)=>{const i=this.db.transaction([Xo],"readonly").objectStore(Xo).openCursor(e);i.addEventListener("success",(()=>{var e;return t((null==(e=i.result)?void 0:e.value)||null)})),i.addEventListener("error",(()=>a()))})))),t(this,"hasImage",(async e=>{if(this.resourceMap.has(e))return!0;const t=await this.readImage(e);if(t){const a=URL.createObjectURL(t);return this.resourceMap.set(e,a),!0}return!1})),t(this,"getImage",(async(e,t)=>{const a=this.resourceMap.get(t);if(a)return a;const i=await this.readImage(t);if(i){const e=URL.createObjectURL(i);return this.resourceMap.set(t,e),e}const o=await(e=>new Promise((t=>{const a=document.createElement("img");a.style.position="fixed",a.style.pointerEvents="none",a.style.visibility="hidden",document.body.appendChild(a),a.onload=()=>{const e=document.createElement("canvas");e.height=a.height,e.width=a.width;const i=e.getContext("2d");if(!i)return document.body.removeChild(a),void t(null);i.drawImage(a,0,0),e.toBlob((e=>{if(!e)return document.body.removeChild(a),void t(null);document.body.removeChild(a),t(e)}))},a.onerror=e=>{console.error(e),document.body.removeChild(a),t(null)},a.crossOrigin="anonymous",a.src=e})))(e);return o?(await this.writeImage(o,t),await this.getImage(e,t)):e})),t(this,"collectGarbage",(()=>{this.resourceMap.forEach((([e,t])=>{URL.revokeObjectURL(t),this.resourceMap.delete(e)}))})),t(this,"cleanup",(()=>new Promise((async(e,t)=>{try{if(navigator.storage&&navigator.storage.estimate){const{quota:a,usage:i}=await navigator.storage.estimate();if(a&&i){if(i/a*100>60){const a=indexedDB.deleteDatabase(Jo);return a.addEventListener("success",(()=>e())),void a.addEventListener("error",(()=>t()))}return void e()}}e()}catch(a){console.log("cacheService failed to clear cache"),e()}})))),t(this,"prefetch",v((async()=>{await this.cleanup(),await this.init()}))),b(this,{})}}const el="databases.".concat(uo.databaseId,".collections.").concat(vo,".documents");class tl{constructor(){t(this,"reloadSubject",new y),t(this,"updateSubject",new y),t(this,"featureService",h(No.featureService)),t(this,"appwriteService",h(No.appwriteService)),t(this,"permissionService",h(No.permissionService)),t(this,"realtimeService",h(No.realtimeService)),t(this,"getMetadata",(async e=>{const t=[];return t.push(e.fio),t.push(e.telefon),t.push(e.inn),t.push(e.pinfl),t.join(" ").slice(0,Bo)})),t(this,"createIndex",(async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(uo.databaseId,vo,[_.limit(1),_.select(["index"])]);return e+1})),t(this,"findById",(async e=>{const t=await this.appwriteService.databases.getDocument(uo.databaseId,vo,e);return jo(t)})),t(this,"paginate",(async(e,t,a,i,o,l)=>{const{rows:r,total:n}=await this.appwriteService.execute(Co,{filterData:{_accessLevel:this.featureService.readAccessLevel,_search:o,...e},pagination:t,sortModel:a,chips:i,search:o,payload:l});return{rows:qo(r),total:n}})),t(this,"create",(async e=>{const t=await this.permissionService.getPermissions(),a=await this.appwriteService.databases.createDocument(uo.databaseId,vo,this.appwriteService.createId(),{...Ro(e),system_metadata:await this.getMetadata(e),system_access_level:await this.featureService.getAccessLevel(),system_created_by:this.appwriteService.currentUser.$id,system_only_for_owner:t.hasManagerAllObjectsExclusivePermission,index:await this.createIndex()});return jo(a)})),t(this,"update",(async(e,t)=>{const a=await this.appwriteService.databases.updateDocument(uo.databaseId,vo,e,{...Ro(t),system_metadata:await this.getMetadata(t)}),i=jo(a);return this.updateSubject.next([e,i]),i})),t(this,"remove",(async e=>{await this.appwriteService.databases.deleteDocument(uo.databaseId,vo,e)})),t(this,"prefetch",v((async()=>{this.realtimeService.subscribe(el,(({events:e,payload:t})=>{if(e.includes(Lo)&&this.reloadSubject.next(),e.includes(Mo)&&this.reloadSubject.next(),e.includes(Io)){const e=jo(t);this.updateSubject.next([t.$id,e])}}))}))),b(this,{})}}class al{constructor(){t(this,"appwriteService",h(No.appwriteService)),t(this,"loggerService",h(No.loggerService)),t(this,"findDuplicates",(async({fio:e,telefon:t})=>{this.loggerService.log("contactRequestService findDuplicates",{fio:e,telefon:t});const a=await this.appwriteService.databases.listDocuments(uo.databaseId,vo,[...e&&[_.search("fio",e)],...t&&[_.search("telefon",t)]]);return{rows:qo(a.documents),total:a.total}})),c(this)}}class il{constructor(){t(this,"contactDbService",h(No.contactDbService)),t(this,"loggerService",h(No.loggerService)),t(this,"reloadSubject",this.contactDbService.reloadSubject),t(this,"updateSubject",this.contactDbService.updateSubject),t(this,"create",(async e=>(this.loggerService.log("contactViewService create",e),await this.contactDbService.create(e)))),t(this,"update",(async(e,t)=>(this.loggerService.log("contactViewService update",t),await this.contactDbService.update(e,t)))),t(this,"remove",(async e=>(this.loggerService.log("contactViewService remove",{id:e}),await this.contactDbService.remove(e)))),t(this,"read",(async e=>{this.loggerService.log("contactViewService read",{id:e});return await this.contactDbService.findById(e)})),t(this,"tryRead",(async e=>{this.loggerService.log("contactViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),t(this,"paginate",(async(e,t,a,i,o,l)=>(this.loggerService.log("contactViewService paginate"),await this.contactDbService.paginate(e,t,a,i,o,l)))),b(this,{})}}const ol="1970-01-01",ll=(e=r())=>{const t=r(ol);return e.diff(t,"day")},rl=e=>{const t=ll();return nl(t+e).utc().format()},nl=e=>r(ol).add(e,"day"),sl=e=>r().set("hour",0).set("minute",0).add(e,"minute");window.getMomentStamp=ll,window.fromMomentStamp=nl,window.getUtcOffset=rl;const dl={"last-month":rl(-31)};class ml{constructor(){t(this,"appwriteService",h(No.appwriteService)),t(this,"getNewBidsCount",(async e=>{const{total:t}=await this.appwriteService.databases.listDocuments(uo.databaseId,go,[_.limit(1),_.select(["index"]),_.greaterThanEqual("$createdAt",dl[e])]);return t})),t(this,"getNewApartmentCount",(async e=>{const{total:t}=await this.appwriteService.databases.listDocuments(uo.databaseId,_o,[_.limit(1),_.select(["index"]),_.greaterThanEqual("$createdAt",dl[e])]);return t})),t(this,"getDealsInProgressCount",(async e=>{const{total:t}=await this.appwriteService.databases.listDocuments(uo.databaseId,ko,[_.limit(1),_.select(["index"]),_.greaterThanEqual("$createdAt",dl[e]),_.notEqual("status"," "),_.notEqual("status"," ")]);return t})),t(this,"getDealsByStatusCount",(async(e,t)=>{const{total:a}=await this.appwriteService.databases.listDocuments(uo.databaseId,ko,[_.limit(1),_.select(["index"]),_.greaterThanEqual("$createdAt",dl[e]),_.equal("status",t)]);return a})),t(this,"getDoneDealsByUserCount",(async(e,t)=>{const{total:a}=await this.appwriteService.databases.listDocuments(uo.databaseId,ko,[_.limit(1),_.select(["index"]),_.greaterThanEqual("$createdAt",dl[e]),_.equal("user_id",t),_.equal("status"," ")]);return a})),t(this,"getTasksByStamp",(async(e,t)=>{const{documents:a}=await this.appwriteService.databases.listDocuments(uo.databaseId,wo,[_.greaterThanEqual("moment_stamp",e),_.lessThanEqual("moment_stamp",t)]);return qo(a)})),b(this,{})}}const cl=async(e,t,a,i)=>await Dr.appwriteService.databases.listDocuments(uo.databaseId,e,[_.limit(t),_.orderDesc("$updatedAt"),...a,...i?[_.cursorAfter(i)]:[]]),ul=async function*(e,t=[],{documentReadDelay:a=100,documentsPageSize:i=5e3,totalDocumentsLimit:o=1e5}={}){let l=0,r=null,n=cl(e,i,t,null);for(;l<o;){console.log("Fetching collection ".concat(e," from ").concat(e," starting from ").concat(r||0));const o=(await Promise.all([n,A(a)]))[0];if(o.documents.length<i){for(const e of o.documents)yield e;break}r=o.documents[o.documents.length-1].$id,n=cl(e,i,t,r);for(const e of o.documents)yield e;l+=o.documents.length}},pl=async e=>{const t=[];for await(const a of e)t.push(a);return t},yl=[" "," ","","","/","",""," "," "],hl=["",""],bl="databases.".concat(uo.databaseId,".collections.").concat(ko,".documents");class _l{constructor(){t(this,"reloadSubject",new y),t(this,"createSubject",new y),t(this,"removeSubject",new y),t(this,"updateSubject",new y),t(this,"appwriteService",h(No.appwriteService)),t(this,"realtimeService",h(No.realtimeService)),t(this,"createIndex",(async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(uo.databaseId,ko,[_.limit(1),_.select(["index"])]);return e+1})),t(this,"findByContactId",(async e=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(uo.databaseId,ko,[_.limit(1),_.equal("contact_id",e),_.notEqual("status"," "),_.notEqual("status"," "),_.orderDesc("$createdAt")]);if(!t)throw new Error("dealDbService findByContactId document not found");return jo(t)})),t(this,"findOccupiedByTargetApartmentId",(async e=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(uo.databaseId,ko,[_.limit(1),_.equal("target_apartment_id",e),_.notEqual("status"," "),_.notEqual("status"," "),_.orderDesc("$createdAt")]);return t?jo(t):null})),t(this,"findOccupiedByApartmentId",(async e=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(uo.databaseId,ko,[_.limit(1),_.equal("apartment_id",e),_.notEqual("status"," "),_.notEqual("status"," "),_.orderDesc("$createdAt")]);return t?jo(t):null})),t(this,"findOccupiedByTagetBidId",(async e=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(uo.databaseId,ko,[_.limit(1),_.equal("target_bid_id",e),_.notEqual("status"," "),_.notEqual("status"," "),_.orderDesc("$createdAt")]);return t?jo(t):null})),t(this,"findOccupiedByBidId",(async e=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(uo.databaseId,ko,[_.limit(1),_.equal("bid_id",e),_.notEqual("status"," "),_.notEqual("status"," "),_.orderDesc("$createdAt")]);return t?jo(t):null})),t(this,"findByApartmentId",(async e=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(uo.databaseId,ko,[_.limit(1),_.equal("apartment_id",e),_.notEqual("status"," "),_.notEqual("status"," "),_.orderDesc("$createdAt")]);if(!t)throw new Error("dealDbService findByApartmentId document not found");return jo(t)})),t(this,"findByBidId",(async e=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(uo.databaseId,ko,[_.limit(1),_.equal("bid_id",e),_.notEqual("status"," "),_.notEqual("status"," "),_.orderDesc("$createdAt")]);if(!t)throw new Error("dealDbService findByBidId document not found");return jo(t)})),t(this,"findById",(async e=>{const t=await this.appwriteService.databases.getDocument(uo.databaseId,ko,e);return jo(t)})),t(this,"findByDealStatus",(async e=>{const t=await pl(ul(ko,[_.equal("status",e)],{totalDocumentsLimit:250}));return qo(t)})),t(this,"create",(async e=>{const t=await this.appwriteService.databases.createDocument(uo.databaseId,ko,this.appwriteService.createId(),{...Ro(e),index:await this.createIndex()}),a=jo(t);return this.createSubject.next(a),a})),t(this,"update",(async(e,t)=>{const a=await this.appwriteService.databases.updateDocument(uo.databaseId,ko,e,{...Ro(t)}),i=jo(a);return this.updateSubject.next([e,i]),i})),t(this,"remove",(async e=>{await this.appwriteService.databases.deleteDocument(uo.databaseId,ko,e),this.removeSubject.next(e)})),t(this,"prefetch",v((()=>{(async()=>{this.realtimeService.subscribe(bl,(({events:e,payload:t})=>{if(e.includes(Lo)){const e=jo(t);this.reloadSubject.next(),this.createSubject.next(e)}if(e.includes(Mo)&&(this.reloadSubject.next(),this.removeSubject.next(t.$id)),e.includes(Io)){const e=jo(t);this.updateSubject.next([t.$id,e])}}))})()}))),b(this,{})}}const vl="databases.".concat(uo.databaseId,".collections.").concat(So,".documents");class fl{constructor(){t(this,"createSubject",new y),t(this,"reloadSubject",new y),t(this,"updateSubject",new y),t(this,"appwriteService",h(No.appwriteService)),t(this,"realtimeService",h(No.realtimeService)),t(this,"findById",(async e=>{const t=await this.appwriteService.databases.getDocument(uo.databaseId,So,e);return jo(t)})),t(this,"findByContactId",(async e=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(uo.databaseId,So,[_.limit(1),_.equal("contact_id",e),_.orderDesc("$createdAt")]);if(!t)throw new Error("dealHistoryDbService findByContactId document not found");return jo(t)})),t(this,"findByApartmentId",(async e=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(uo.databaseId,So,[_.limit(1),_.equal("apartment_id",e),_.orderDesc("$createdAt")]);if(!t)throw new Error("dealHistoryDbService findByApartmentId document not found");return jo(t)})),t(this,"findByBidId",(async e=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(uo.databaseId,So,[_.limit(1),_.equal("bid_id",e),_.orderDesc("$createdAt")]);if(!t)throw new Error("dealHistoryDbService findByBidId document not found");return jo(t)})),t(this,"create",(async e=>{const t=await this.appwriteService.databases.createDocument(uo.databaseId,So,this.appwriteService.createId(),Ro(e));return jo(t)})),t(this,"update",(async(e,t)=>{const a=await this.appwriteService.databases.updateDocument(uo.databaseId,So,e,Ro(t));return jo(a)})),t(this,"remove",(async e=>{await this.appwriteService.databases.deleteDocument(uo.databaseId,So,e)})),t(this,"findAllByApartmentId",(async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(uo.databaseId,So,[_.orderDesc("$createdAt"),_.equal("apartment_id",e)]);return qo(t)})),t(this,"findAllByContactId",(async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(uo.databaseId,So,[_.orderDesc("$createdAt"),_.equal("contact_id",e)]);return qo(t)})),t(this,"findAllByBidId",(async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(uo.databaseId,So,[_.orderDesc("$createdAt"),_.equal("bid_id",e)]);return qo(t)})),t(this,"prefetch",v((async()=>{this.realtimeService.subscribe(vl,(({events:e,payload:t})=>{if(e.includes(Lo)&&(this.reloadSubject.next(),this.createSubject.next(t)),e.includes(Mo)&&this.reloadSubject.next(),e.includes(Io)){const e=jo(t);this.updateSubject.next([t.$id,e])}}))}))),b(this,{})}}const gl="deal-begin",kl="deal-end",wl="deal-reassign",Sl="deal-status";class zl{constructor(){t(this,"dealHistoryViewService",h(No.dealHistoryViewService)),t(this,"dealViewService",h(No.dealViewService)),t(this,"contactViewService",h(No.contactViewService)),t(this,"apartmentViewService",h(No.apartmentViewService)),t(this,"bidViewService",h(No.bidViewService)),t(this,"appwriteService",h(No.appwriteService)),t(this,"loggerService",h(No.loggerService)),t(this,"layoutService",h(No.layoutService)),t(this,"readDealStateByApartment",(async(e,t)=>{this.loggerService.log("dealHistoryRequestService readDealStateByApartment",{apartmentId:e,userId:t});const{documents:a}=await this.appwriteService.databases.listDocuments(uo.databaseId,So,[_.limit(1),_.equal("apartment_id",e),_.equal("type",kl),_.orderDesc("$createdAt")]),{documents:i}=await this.appwriteService.databases.listDocuments(uo.databaseId,So,[_.limit(1),_.equal("apartment_id",e),_.equal("type",gl),_.orderDesc("$createdAt")]),[o=null]=a,[l=null]=i,n=(()=>{if(!l)return kl;if(!o)return gl;const e=r(l.$createdAt),t=r(o.$createdAt);return e.isAfter(t)?gl:kl})(),s=[];if(l&&n===gl){const{documents:t}=await this.appwriteService.databases.listDocuments(uo.databaseId,So,[_.equal("apartment_id",e),_.cursorBefore(l.$id),_.orderDesc("$createdAt")]);for(const e of t)e.type===wl&&s.push(e)}const[d=null]=s;return d&&l?(s.unshift(l),{status:wl,activeItem:d,reassign:s}):{status:n,activeItem:n===gl?l:null,reassign:s}})),t(this,"commitApartmentDealBegin",(async(e,t,a,i,o,l)=>{this.loggerService.log("dealHistoryRequestService commitApartmentDealBegin",{apartmentId:e,userId:t});if((await this.readDealStateByApartment(e,t)).status!==kl)throw new Error("commitApartmentDealBegin invalid state");const r=["<pre>","  <text-underline>".concat(a,"</text-underline>"),l?": ".concat(l):"","</pre>"].join("\n"),{contact_id:n}=await this.apartmentViewService.read(e),{fio:s,telefon:d,tip_klienta:m}=await this.contactViewService.read(n),{id:c}=await this.dealViewService.create({status:" ",apartment_id:e,contact_id:n,bid_id:null,type:a,user_id:t,price:i,price_unit:o,target_apartment_id:null,target_bid_id:null,fio:s,telefon:d,tip_klienta:m?m[0]:""});await this.dealHistoryViewService.create({deal_id:c,apartment_id:e,contact_id:n,user_id:t,type:gl,comment:r,bid_id:null,payload:null}),this.layoutService.reloadOutlet()})),t(this,"commitApartmentDealEnd",(async(e,t,a,i)=>{this.loggerService.log("dealHistoryRequestService commitApartmentDealEnd",{apartmentId:e,userId:t});const o=await this.readDealStateByApartment(e,t);if(o.status!==gl&&o.status!==wl)throw new Error("commitApartmentDealEnd invalid state");if(!o.activeItem)throw new Error("commitApartmentDealBegin activeItem is null");if(await this.dealHistoryViewService.create({contact_id:o.activeItem.contact_id,apartment_id:e,user_id:t,deal_id:o.activeItem.deal_id,type:kl,comment:a,bid_id:null,payload:null}),i){const{target_bid_id:t}=await this.dealViewService.read(o.activeItem.deal_id);await this.apartmentViewService.moveToArchive(e),t&&await this.bidViewService.moveToArchive(t)}this.layoutService.reloadOutlet()})),t(this,"commitApartmentDealReassign",(async(e,t)=>{this.loggerService.log("dealHistoryRequestService commitApartmentDealReassign",{apartmentId:e,userId:t});const a=await this.readDealStateByApartment(e,t);if(a.status!==gl&&a.status!==wl)throw new Error("commitApartmentDealBegin invalid state");if(!a.activeItem)throw new Error("commitApartmentDealBegin activeItem is null");await Promise.all([this.dealHistoryViewService.create({contact_id:a.activeItem.contact_id,apartment_id:e,user_id:t,deal_id:a.activeItem.deal_id,type:wl,comment:"",bid_id:null,payload:null}),this.dealViewService.update(a.activeItem.deal_id,{user_id:t})]),this.layoutService.reloadOutlet()})),t(this,"readDealStateByBid",(async(e,t)=>{this.loggerService.log("dealHistoryRequestService readDealStateByBid",{bidId:e,userId:t});const{documents:a}=await this.appwriteService.databases.listDocuments(uo.databaseId,So,[_.limit(1),_.equal("bid_id",e),_.equal("type",kl),_.orderDesc("$createdAt")]),{documents:i}=await this.appwriteService.databases.listDocuments(uo.databaseId,So,[_.limit(1),_.equal("bid_id",e),_.equal("type",gl),_.orderDesc("$createdAt")]),[o=null]=a,[l=null]=i,n=(()=>{if(!l)return kl;if(!o)return gl;const e=r(l.$createdAt),t=r(o.$createdAt);return e.isAfter(t)?gl:kl})(),s=[];if(l&&n===gl){const{documents:t}=await this.appwriteService.databases.listDocuments(uo.databaseId,So,[_.equal("bid_id",e),_.cursorBefore(l.$id),_.orderDesc("$createdAt")]);for(const e of t)e.type===wl&&s.push(e)}const[d=null]=s;return d&&l?(s.unshift(l),{status:wl,activeItem:d,reassign:s}):{status:n,activeItem:n===gl?l:null,reassign:s}})),t(this,"commitBidDealBegin",(async(e,t,a,i,o,l)=>{this.loggerService.log("dealHistoryRequestService commitBidDealBegin",{bidId:e,userId:t});if((await this.readDealStateByBid(e,t)).status!==kl)throw new Error("commitApartmentDealBegin invalid state");const{contact_id:r}=await this.bidViewService.read(e),{fio:n,telefon:s,tip_klienta:d}=await this.contactViewService.read(r),{id:m}=await this.dealViewService.create({status:" ",bid_id:e,apartment_id:null,contact_id:r,target_apartment_id:null,target_bid_id:null,type:a,user_id:t,price:i,price_unit:o,fio:n,telefon:s,tip_klienta:d?d[0]:""}),c=["<pre>","  <text-underline>".concat(a,"</text-underline>"),l?": ".concat(l):"","</pre>"].join("\n");await this.dealHistoryViewService.create({bid_id:e,user_id:t,deal_id:m,type:gl,comment:c,contact_id:r,apartment_id:null,payload:null}),this.layoutService.reloadOutlet()})),t(this,"commitBidDealEnd",(async(e,t,a,i)=>{this.loggerService.log("dealHistoryRequestService commitBidDealEnd",{bidId:e,userId:t});const o=await this.readDealStateByBid(e,t);if(o.status!==gl&&o.status!==wl)throw new Error("commitBidDealEnd invalid state");if(!o.activeItem)throw new Error("commitBidDealEnd activeItem is null");if(await this.dealHistoryViewService.create({bid_id:e,user_id:t,type:kl,deal_id:o.activeItem.deal_id,comment:a,contact_id:o.activeItem.contact_id,apartment_id:null,payload:null}),i){const{target_apartment_id:t}=await this.dealViewService.read(o.activeItem.deal_id);await this.bidViewService.moveToArchive(e),t&&await this.apartmentViewService.moveToArchive(t)}this.layoutService.reloadOutlet()})),t(this,"commitBidDealReassign",(async(e,t)=>{this.loggerService.log("dealHistoryRequestService commitBidDealReassign",{bidId:e,userId:t});const a=await this.readDealStateByBid(e,t);if(a.status!==gl&&a.status!==wl)throw new Error("commitApartmentDealBegin invalid state");if(!a.activeItem)throw new Error("commitApartmentDealBegin activeItem is null");await Promise.all([this.dealHistoryViewService.create({bid_id:e,user_id:t,type:wl,deal_id:a.activeItem.deal_id,contact_id:a.activeItem.contact_id,comment:"",apartment_id:null,payload:null}),this.dealViewService.update(a.activeItem.deal_id,{user_id:t})]),this.layoutService.reloadOutlet()})),t(this,"commitDealStatusByApartment",(async(e,t,a,i)=>{this.loggerService.log("dealHistoryRequestService commitDealStatusByApartment",{apartmentId:e});const{deal_id:o,contact_id:l}=await this.dealHistoryViewService.findByApartmentId(e),r=this.appwriteService.currentUser.$id,n=["<pre>","   <text-underline>".concat(t,"</text-underline>  <text-underline>").concat(a,"</text-underline>"),i?": ".concat(i):"","</pre>"].join("\n");" "!==a&&" "!==a?await this.dealHistoryViewService.create({contact_id:l,bid_id:null,user_id:r,type:Sl,deal_id:o,comment:n,apartment_id:e,payload:null}):await this.commitApartmentDealEnd(e,r,n," "===a)})),t(this,"commitDealStatusByBid",(async(e,t,a,i)=>{this.loggerService.log("dealHistoryRequestService commitDealStatusByBid",{bidId:e});const{deal_id:o,contact_id:l}=await this.dealHistoryViewService.findByBidId(e),r=this.appwriteService.currentUser.$id,n=["<pre>","   <text-underline>".concat(t,"</text-underline>  <text-underline>").concat(a,"</text-underline>"),i?": ".concat(i):"","</pre>"].join("\n");" "!==a&&" "!==a?await this.dealHistoryViewService.create({bid_id:e,user_id:r,type:Sl,deal_id:o,comment:n,contact_id:l,apartment_id:null,payload:null}):await this.commitBidDealEnd(e,r,n," "===a)})),b(this,{})}}class xl{constructor(){t(this,"dealHistoryDbService",h(No.dealHistoryDbService)),t(this,"loggerService",h(No.loggerService)),t(this,"createSubject",this.dealHistoryDbService.createSubject),t(this,"reloadSubject",this.dealHistoryDbService.reloadSubject),t(this,"updateSubject",this.dealHistoryDbService.updateSubject),t(this,"create",(async e=>(this.loggerService.log("dealHistoryViewService create",e),await this.dealHistoryDbService.create(e)))),t(this,"update",(async(e,t)=>(this.loggerService.log("dealHistoryViewService update",t),await this.dealHistoryDbService.update(e,t)))),t(this,"remove",(async e=>(this.loggerService.log("dealHistoryViewService remove",{id:e}),await this.dealHistoryDbService.remove(e)))),t(this,"read",(async e=>{this.loggerService.log("dealHistoryViewService read",{id:e});return await this.dealHistoryDbService.findById(e)})),t(this,"findByApartmentId",(async e=>(this.loggerService.log("dealHistoryViewService findByApartmentId"),await this.dealHistoryDbService.findByApartmentId(e)))),t(this,"findByBidId",(async e=>(this.loggerService.log("dealHistoryViewService findByBidId"),await this.dealHistoryDbService.findByBidId(e)))),t(this,"findByContactId",(async e=>(this.loggerService.log("dealHistoryViewService findByContactId"),await this.dealHistoryDbService.findByContactId(e)))),t(this,"findAllByApartmentId",(async e=>{if(this.loggerService.log("dealHistoryViewService findAllByApartmentId"),!e)throw new Error("dealHistoryViewService findAllByApartmentId id is null");return await this.dealHistoryDbService.findAllByApartmentId(e)})),t(this,"findAllByBidId",(async e=>{if(this.loggerService.log("dealHistoryViewService findAllByBidId"),!e)throw new Error("dealHistoryViewService findAllByBidId id is null");return await this.dealHistoryDbService.findAllByBidId(e)})),t(this,"findAllByContactId",(async e=>{if(this.loggerService.log("dealHistoryViewService findAllByContactId"),!e)throw new Error("dealHistoryViewService findAllByContactId id is null");return await this.dealHistoryDbService.findAllByContactId(e)})),t(this,"tryRead",(async e=>{this.loggerService.log("dealHistoryViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),b(this,{})}}class Fl{constructor(){t(this,"dealHistoryRequestService",h(No.dealHistoryRequestService)),t(this,"dealViewService",h(No.dealViewService)),t(this,"commidDealHistoryInternal",(async(e,t,a,i,o)=>{try{if(e)return void(await this.dealHistoryRequestService.commitDealStatusByApartment(e,a,i,o));if(t)return void(await this.dealHistoryRequestService.commitDealStatusByBid(t,a,i,o))}catch(l){console.log(l)}})),t(this,"commitDealStatusChange",(async(e,t,a,i,o,l,r,n)=>{await Promise.all([this.commidDealHistoryInternal(t,a,l,r,n),this.dealViewService.update(e,{status:r,target_apartment_id:i,target_bid_id:o})])})),t(this,"commitBidDealEnd",(async(e,t,a,i)=>{const{$id:o,status:l}=await this.dealViewService.findByBidId(e);await this.commitDealStatusChange(o,null,e,t,null,l,a,i)})),t(this,"commitApartmentDealEnd",(async(e,t,a,i)=>{const{$id:o,status:l}=await this.dealViewService.findByApartmentId(e);await this.commitDealStatusChange(o,e,null,null,t,l,a,i)})),b(this,{})}}class Tl{constructor(){t(this,"dealDbService",h(No.dealDbService)),t(this,"loggerService",h(No.loggerService)),t(this,"reloadSubject",this.dealDbService.reloadSubject),t(this,"createSubject",this.dealDbService.createSubject),t(this,"removeSubject",this.dealDbService.removeSubject),t(this,"updateSubject",this.dealDbService.updateSubject),t(this,"create",(async e=>(this.loggerService.log("dealViewService create",e),await this.dealDbService.create(e)))),t(this,"update",(async(e,t)=>(this.loggerService.log("dealViewService update",t),await this.dealDbService.update(e,t)))),t(this,"remove",(async e=>(this.loggerService.log("dealViewService remove",{id:e}),await this.dealDbService.remove(e)))),t(this,"read",(async e=>{this.loggerService.log("dealViewService read",{id:e});return await this.dealDbService.findById(e)})),t(this,"tryRead",(async e=>{this.loggerService.log("dealViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),t(this,"readStatusByApartmentId",(async e=>{this.loggerService.log("dealViewService readStatusByApartmentId");let t="";try{const{status:a}=await this.dealDbService.findByApartmentId(e);t=a}catch(a){t=""}finally{return t}})),t(this,"readStatusByBidId",(async e=>{this.loggerService.log("dealViewService readStatusByBidId");let t="";try{const{status:a}=await this.dealDbService.findByBidId(e);t=a}catch(a){t=""}finally{return t}})),t(this,"readStatusByContactId",(async e=>{this.loggerService.log("dealViewService readStatusByContactId");let t="";try{const{status:a}=await this.dealDbService.findByContactId(e);t=a}catch(a){t=" "}finally{return t}})),t(this,"findByDealStatus",(async e=>(this.loggerService.log("dealViewService findByDealStatus"),await this.dealDbService.findByDealStatus(e)))),t(this,"findByApartmentId",(async e=>(this.loggerService.log("dealViewService findByApartmentId"),await this.dealDbService.findByApartmentId(e)))),t(this,"findByBidId",(async e=>(this.loggerService.log("dealViewService findByBidId"),await this.dealDbService.findByBidId(e)))),t(this,"findByContactId",(async e=>(this.loggerService.log("dealViewService findByContactId"),await this.dealDbService.findByContactId(e)))),t(this,"findOccupiedByTargetApartmentId",(async e=>(this.loggerService.log("dealViewService findOccupiedByTargetApartmentId"),await this.dealDbService.findOccupiedByTargetApartmentId(e)))),t(this,"findOccupiedByTagetBidId",(async e=>(this.loggerService.log("dealViewService findOccupiedByTagetBidId"),await this.dealDbService.findOccupiedByTagetBidId(e)))),t(this,"findOccupiedByApartmentId",(async e=>(this.loggerService.log("dealViewService findOccupiedByApartmentId"),await this.dealDbService.findOccupiedByApartmentId(e)))),t(this,"findOccupiedByBidId",(async e=>(this.loggerService.log("dealViewService findOccupiedByBidId"),await this.dealDbService.findOccupiedByBidId(e)))),b(this,{})}}class Al{constructor(){t(this,"roleViewService",h(No.roleViewService)),t(this,"getCurrencyType",v((async()=>({eur:"EUR",usd:"USD",uzs:"UZS"})))),t(this,"getUserRoles",(async()=>(await this.roleViewService.findAll()).reduce(((e,{id:t,title:a})=>({...e,[t]:a})),{}))),t(this,"getMasterDetailMode",(async()=>({[C.Tabs]:"",[C.Paper]:""}))),t(this,"getCountries",v((async()=>await V("".concat(co,"/country-list.json"))))),t(this,"getMahallya",v((async()=>await V("".concat(co,"/mahallya.json"))))),t(this,"getUlicza",v((async()=>await V("".concat(co,"/ulicza.json"))))),t(this,"prefetch",v((()=>Promise.all([this.getCountries(),this.getMahallya(),this.getUlicza()])))),b(this,{})}}const Cl=(()=>{let e=null,t={};return()=>{const{pathname:a}=Dr.routerService.location;return e!==a&&(t=I(Wu,Dr.routerService.location.pathname)||{},e=a),t}})(),Vl=(e,t=null)=>{const a=Cl();return L.get(a,e)||t};class Il{constructor(){t(this,"appwriteService",h(No.appwriteService)),t(this,"userViewService",h(No.userViewService)),t(this,"_alerts",[]),t(this,"getDocument",(async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(uo.databaseId,bo,[_.equal("$id",e),_.limit(1)]);return t.length?t[0]:null})),t(this,"findAll",(async()=>{const e=await this.appwriteService.databases.listDocuments(uo.databaseId,bo,[_.orderDesc("$createdAt")]);return qo(e.documents)})),t(this,"handleBuildAlerts",(async e=>{const{sideMenu:t=null}=Yu()||{},{id:a=null}=Cl();return(await Promise.all(e.filter((e=>null!==e.path)).filter((e=>null!==e.entity_id)).filter((e=>e.path===t)).filter((e=>e.entity_id===a)).filter((e=>e.id!==this.appwriteService.currentUser.$id)).filter((e=>"create"!==e.id)).filter((({$updatedAt:e})=>{const t=r(e);return r().diff(t,"minute")<15})).map((async({id:e,$updatedAt:t})=>{const a=await this.userViewService.tryRead(e);if(!a)return null;const i=[a.first_name,a.last_name,a.middle_name].join(" "),o=r(t);let l=o.get("hour").toString(),n=o.get("minute").toString(),s=o.get("second").toString();l=1===l.length?"0"+l:l,n=1===n.length?"0"+n:n,s=1===s.length?"0"+s:s;return{color:"error",content:" ".concat(i,"   ( ").concat(l,":").concat(n,":").concat(s,")")}})))).filter((e=>!!e))})),t(this,"handleFetch",B((async()=>{const e=await this.findAll(),t=await this.handleBuildAlerts(e);x((()=>{this._alerts=t}))}))),t(this,"create",(async e=>await this.appwriteService.databases.createDocument(uo.databaseId,bo,this.appwriteService.currentUser.$id,Ro(e)))),t(this,"update",(async e=>await this.appwriteService.databases.updateDocument(uo.databaseId,bo,this.appwriteService.currentUser.$id,Ro(e)))),t(this,"prefetch",v((async()=>{this.appwriteService.isAuthorized&&(await this.handleFetch(),this.appwriteService.client.subscribe("databases.".concat(uo.databaseId,".collections.").concat(bo,".documents"),(async()=>{await this.handleFetch()})))}))),b(this,{_alerts:D,alerts:j})}get alerts(){return M(this._alerts)}}class Ll{constructor(){t(this,"routerService",h(No.routerService)),t(this,"loggerService",h(No.loggerService)),t(this,"errorSubject",new y),t(this,"handleGlobalError",(e=>{console.error(e),this.loggerService.error(e),this.routerService.push("/error_page"),this.errorSubject.next()})),c(this)}}class Ml{constructor(){t(this,"appwriteService",h(No.appwriteService)),t(this,"userViewService",h(No.userViewService)),t(this,"roleViewService",h(No.roleViewService)),t(this,"_features",[]),t(this,"getFeaturesByUserId",(async e=>{const{user_role:t=null,user_features:a=[]}=await this.userViewService.tryRead(e)||{},i=await this.roleViewService.tryRead(t?t[0]:"unknown"),o=[...a||[],...(null==i?void 0:i.role_features)||[]];return[...new Set(o)]})),t(this,"init",v((async()=>{if(!this.isAuthorized)return void this.init.clear();const e=await this.getFeaturesByUserId(this.appwriteService.currentUser.$id);x((()=>{this._features=e}))}))),t(this,"getFeatures",(async()=>(await this.init(),this.features))),t(this,"getAccessLevel",(async()=>(await this.init(),this.accessLevel))),t(this,"hasFeature",(async(...e)=>{const t=await this.getFeatures();return e.some((e=>t.includes(e)))})),b(this,{_features:D,features:j,accessLevel:j})}get isAuthorized(){return this.appwriteService.isAuthorized}get features(){return M(this._features)}get readAccessLevel(){const e=new Set(this.features).has("vizhu_vse_urovni")?5:0;return Math.max(this.accessLevel,e)}get accessLevel(){const e=new Set(this.features),t=[...new Array(5)].map(((e,t)=>t+1)).reverse();if(e.has("vizhu_vse_urovni"))return 5;for(const a of t)if(e.has("level-".concat(a)))return a;return console.warn("FeatureService accessLevel unset level"),0}}class Bl{constructor(){t(this,"appbarSubject",new y),t(this,"modalSubject",new y),t(this,"reloadOutletSubject",new y),t(this,"_modalLoading",0),t(this,"_appbarLoading",0),t(this,"setModalLoader",(e=>{this._modalLoading=Math.max(this._modalLoading+(e?1:-1),0),this.modalSubject.next(e)})),t(this,"setAppbarLoader",(e=>{this._appbarLoading=Math.max(this._appbarLoading+(e?1:-1),0),this.appbarSubject.next(e)})),t(this,"dropModalLoader",(()=>{this._modalLoading=0,this.modalSubject.next(!1)})),t(this,"dropAppbarLoader",(()=>{this._appbarLoading=0,this.appbarSubject.next(!1)})),t(this,"reloadOutlet",(()=>{this.reloadOutletSubject.next()})),c(this)}get hasModalLoader(){return!!this._modalLoading}get hasAppbarLoader(){return!!this._appbarLoading}}class Dl{constructor(){t(this,"appwriteService",h(No.appwriteService)),t(this,"error",(e=>{q((t=>{t.setExtra("user_id",this.appwriteService.currentUser.$id),t.setExtra("email",this.appwriteService.currentUser.email),R(e)}))})),t(this,"log",((e,t)=>{console.log(e),q((a=>{a.setExtra("user_id",this.appwriteService.currentUser.$id),a.setExtra("email",this.appwriteService.currentUser.email),a.setExtra("msg",e),t&&a.setExtra("data",t),P("Log for ".concat(this.appwriteService.currentUser.email))}))})),t(this,"prefetch",v((async()=>{E({dsn:"https://8cba9840891744e8835be09bf6f2c5e6@o4505477865996288.ingest.sentry.io/4505477935726592",environment:"frontend"})}))),b(this,{})}}const jl=(()=>{let e=null,t=null;return()=>{const{pathname:a}=Dr.routerService.location;return e!==a&&(t=(()=>{const e=Vl("id");let t=!1,a=!1,i=!1;return e&&Dr.routerService.location.pathname.startsWith("/bid")&&(i=!0),e&&Dr.routerService.location.pathname.startsWith("/apartment")&&(a=!0),e&&Dr.routerService.location.pathname.startsWith("/contact")&&(t=!0),{id:e||"unknown",isContact:t,isApartment:a,isBid:i}})(),e=a),t}})(),ql=["system_created_by","system_only_for_owner","system_allowance"],Rl={system_created_by:null,system_only_for_owner:!1,system_allowance:[]},Pl=async(e,t)=>{const{documents:[a=null]}=await Dr.appwriteService.databases.listDocuments(uo.databaseId,e,[_.select([...ql]),_.equal("$id",t),_.limit(1),_.orderDesc("$createdAt")]);return a||Rl};window.readOwnerMetadata=Pl;class El{constructor(){t(this,"getMetadata",(async()=>{const{id:e,isApartment:t,isBid:a,isContact:i}=jl();return a?await Pl(go,e):t?await Pl(_o,e):i?await Pl(vo,e):void 0})),b(this,{})}}const Nl="databases.".concat(uo.databaseId,".collections.").concat(Fo,".documents");class Ul{constructor(){t(this,"createSubject",new y),t(this,"reloadSubject",new y),t(this,"updateSubject",new y),t(this,"appwriteService",h(No.appwriteService)),t(this,"realtimeService",h(No.realtimeService)),t(this,"findAllByUserId",v((async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(uo.databaseId,Fo,[_.equal("user_id",e),_.orderDesc("$createdAt")]);return qo(t)}))),t(this,"findAllUnreadByUserId",v((async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(uo.databaseId,Fo,[_.equal("user_id",e),_.equal("is_read",[!1]),_.orderDesc("$createdAt")]);return qo(t)}))),t(this,"findById",(async e=>{const t=await this.appwriteService.databases.getDocument(uo.databaseId,Fo,e);return jo(t)})),t(this,"create",(async e=>{const t=await this.appwriteService.databases.createDocument(uo.databaseId,Fo,this.appwriteService.createId(),{is_read:!1,...Ro(e)});this.findAllByUserId.clear(),this.findAllUnreadByUserId.clear();const a=jo(t);return this.createSubject.next(a),this.reloadSubject.next(),a})),t(this,"update",(async(e,t)=>{const a=await this.appwriteService.databases.updateDocument(uo.databaseId,Fo,e,{is_read:!1,...Ro(t)});this.findAllByUserId.clear(),this.findAllUnreadByUserId.clear();const i=jo(a);return this.updateSubject.next([e,i]),this.reloadSubject.next(),i})),t(this,"remove",(async e=>{await this.appwriteService.databases.deleteDocument(uo.databaseId,Fo,e),this.findAllByUserId.clear(),this.findAllUnreadByUserId.clear(),this.reloadSubject.next()})),t(this,"prefetch",v((async()=>{this.realtimeService.subscribe(Nl,(({events:e,payload:t})=>{if(e.includes(Lo)&&(this.findAllByUserId.clear(),this.findAllUnreadByUserId.clear(),this.reloadSubject.next(),this.createSubject.next(t)),e.includes(Mo)&&(this.findAllByUserId.clear(),this.findAllUnreadByUserId.clear(),this.reloadSubject.next()),e.includes(Io)){this.findAllByUserId.clear(),this.findAllUnreadByUserId.clear();const e=jo(t);this.updateSubject.next([t.$id,e])}}))}))),b(this,{})}}class Hl{constructor(){t(this,"notifyDbService",h(No.notifyDbService)),t(this,"loggerService",h(No.loggerService)),t(this,"createSubject",this.notifyDbService.createSubject),t(this,"reloadSubject",this.notifyDbService.reloadSubject),t(this,"updateSubject",this.notifyDbService.updateSubject),t(this,"create",(async e=>(this.loggerService.log("roleViewService create",e),await this.notifyDbService.create(e)))),t(this,"findAllByUserId",(async e=>(this.loggerService.log("roleViewService findAllByUserId"),await this.notifyDbService.findAllByUserId(e)))),t(this,"findAllUnreadByUserId",(async e=>(this.loggerService.log("roleViewService findAllUnreadByUserId"),await this.notifyDbService.findAllUnreadByUserId(e)))),t(this,"toggleReadAllByUserId",(async e=>{this.loggerService.log("roleViewService toggleReadAllByUserId");const t=await this.notifyDbService.findAllUnreadByUserId(e);await Promise.all(t.map((async({$id:e})=>{this.notifyDbService.update(e,{is_read:!0})})))})),t(this,"update",(async(e,t)=>(this.loggerService.log("roleViewService update",t),await this.notifyDbService.update(e,t)))),t(this,"remove",(async e=>(this.loggerService.log("roleViewService remove",{id:e}),await this.notifyDbService.remove(e)))),t(this,"read",(async e=>{this.loggerService.log("roleViewService read",{id:e});return await this.notifyDbService.findById(e)})),t(this,"tryRead",(async e=>{this.loggerService.log("roleViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),b(this,{})}}const Ol=N((async e=>await Pl(go,e))),Wl=N((async e=>await Pl(vo,e))),$l=N((async e=>await Pl(_o,e)));class Gl{constructor(){t(this,"appwriteService",h(No.appwriteService)),t(this,"featureService",h(No.featureService)),t(this,"routerService",h(No.routerService)),t(this,"dealViewService",h(No.dealViewService)),t(this,"hasReassignDelayFlagByApartmentId",(async e=>{const t=await U(H(this.featureService.hasFeature("zaderzhka_perenaznacheniya_otvetstvennogo")),(async()=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(uo.databaseId,So,[_.limit(1),_.select(["$id"]),_.equal("apartment_id",e),_.notEqual("type","deal-status"),_.orderDesc("$createdAt")]);if(!t)return!0;if("deal-end"===t.type)return!0;return ll()-ll(r(t.$createdAt))>3})());return H(t)})),t(this,"hasReassignDelayFlagByBidId",(async e=>{const t=await U(H(this.featureService.hasFeature("zaderzhka_perenaznacheniya_otvetstvennogo")),(async()=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(uo.databaseId,So,[_.limit(1),_.select(["$id"]),_.equal("bid_id",e),_.notEqual("type","deal-status"),_.orderDesc("$createdAt")]);if(!t)return!0;if("deal-end"===t.type)return!0;return ll()-ll(r(t.$createdAt))>3})());return H(t)})),t(this,"getOwnerContactPermissionByApartmentId",(e=>{const t=this.appwriteService.currentUser.$id,a=N((async()=>await Pl(_o,e)));return U(this.featureService.hasFeature("vizhu_kontakty_pod_bronyu"),O((()=>U(H(this.featureService.hasFeature("ne_vizhu_nomera_telefonov_chuzhih_kontaktov")),(async()=>{const{system_created_by:e}=await a();return e===t})()))(),(async()=>{const{system_created_by:e,system_only_for_owner:i}=await a();return!i||e===t})(),(async()=>{const a=await this.dealViewService.findOccupiedByApartmentId(e);return!a||a.user_id===t})(),(async()=>{const a=await this.dealViewService.findOccupiedByTargetApartmentId(e);return!a||a.user_id===t})()))})),t(this,"getOwnerContactPermissionByBidId",(e=>{const t=this.appwriteService.currentUser.$id,a=N((async()=>await Pl(go,e)));return U(this.featureService.hasFeature("vizhu_kontakty_pod_bronyu"),O((()=>U(H(this.featureService.hasFeature("ne_vizhu_nomera_telefonov_chuzhih_kontaktov")),(async()=>{const{system_created_by:e}=await a();return e===t})()))(),(async()=>{const{system_created_by:e,system_only_for_owner:i}=await a();return!i||e===t})(),(async()=>{const a=await this.dealViewService.findOccupiedByBidId(e);return!a||a.user_id===t})(),(async()=>{const a=await this.dealViewService.findOccupiedByTagetBidId(e);return!a||a.user_id===t})()))})),t(this,"getOwnerContactPermissionByContactId",(e=>{const t=this.appwriteService.currentUser.$id,a=N((async()=>await Pl(vo,e)));return O((()=>U(H(this.featureService.hasFeature("ne_vizhu_nomera_telefonov_chuzhih_kontaktov")),(async()=>{const{system_created_by:e}=await a();return e===t})()))(),(async()=>{const{system_created_by:e,system_only_for_owner:i}=await a();return!i||e===t})())})),t(this,"hasInternOwnerContactPermission",N((async()=>{const{id:e,isApartment:t,isBid:a,isContact:i}=jl(),o=await this.featureService.hasFeature("ne_vizhu_nomera_telefonov_chuzhih_kontaktov");let l=!1,r=!1,n=!1;if(o){if(a){const{system_created_by:t}=await Ol(e);n=this.appwriteService.currentUser.$id===t}if(t){const{system_created_by:t}=await $l(e);r=this.appwriteService.currentUser.$id===t}if(i){const{system_created_by:t}=await Wl(e);l=this.appwriteService.currentUser.$id===t}}return U(!o,l,r,n)}))),t(this,"hasExclusiveOwnerContactPermission",N((async()=>{const{id:e,isApartment:t,isBid:a,isContact:i}=jl();let o=!0,l=!0,r=!0;if(t){const{system_created_by:t,system_only_for_owner:a}=await $l(e);a&&(o=t===this.appwriteService.currentUser.$id)}if(i){const{system_created_by:t,system_only_for_owner:a}=await Wl(e);a&&(l=t===this.appwriteService.currentUser.$id)}if(a){const{system_created_by:t,system_only_for_owner:a}=await Ol(e);a&&(r=t===this.appwriteService.currentUser.$id)}return O(o,l,r)}))),t(this,"hasOccupationOwnerContactPermission",N((async()=>{const{id:e,isApartment:t,isBid:a}=jl();let i=!0;if(t){const t=await this.dealViewService.findOccupiedByApartmentId(e);t&&(i=t.user_id===this.appwriteService.currentUser.$id)}if(a){const t=await this.dealViewService.findOccupiedByBidId(e);t&&(i=t.user_id===this.appwriteService.currentUser.$id)}return O(i,!0)}))),t(this,"hasTargetOccupationOwnerContactPermission",N((async()=>{const{id:e,isApartment:t,isBid:a}=jl();let i=!0;if(t){const t=await this.dealViewService.findOccupiedByTargetApartmentId(e);t&&(i=t.user_id===this.appwriteService.currentUser.$id)}if(a){const t=await this.dealViewService.findOccupiedByTagetBidId(e);t&&(i=t.user_id===this.appwriteService.currentUser.$id)}return O(i,!0)}))),t(this,"hasAllOwnerContactPermission",N((()=>U(this.featureService.hasFeature("vizhu_kontakty_pod_bronyu"),O(this.hasInternOwnerContactPermission(),this.hasExclusiveOwnerContactPermission(),this.hasOccupationOwnerContactPermission(),this.hasTargetOccupationOwnerContactPermission()))))),b(this,{})}}class Yl{constructor(){t(this,"featureService",h(No.featureService)),t(this,"routerService",h(No.routerService)),t(this,"permissionRequestService",h(No.permissionRequestService)),t(this,"previewModeService",h(No.previewModeService)),t(this,"hasContactNumberPermission",(async()=>await O(this.previewModeService.hasPreviewModeDisabled(),this.permissionRequestService.hasAllOwnerContactPermission()))),t(this,"hasContactEmailPermission",(async()=>await O(this.previewModeService.hasPreviewModeDisabled(),this.permissionRequestService.hasAllOwnerContactPermission()))),t(this,"hasApartmentHouseNumberPermission",(async()=>await O(this.previewModeService.hasPreviewModeDisabled()))),t(this,"hasBidHouseNumberPermission",(async()=>await O(this.previewModeService.hasPreviewModeDisabled()))),t(this,"hasResponsiblePermission",(async()=>await O(this.previewModeService.hasPreviewModeDisabled()))),t(this,"hasOwnerPricePermission",(async()=>await O(this.previewModeService.hasPreviewModeDisabled()))),t(this,"hasCommissionPermission",(async()=>await O(this.previewModeService.hasPreviewModeDisabled()))),t(this,"hasMasterDetailPermission",(async()=>await O(this.previewModeService.hasPreviewModeDisabled()))),t(this,"hasDescriptionPermission",(async()=>await O(this.previewModeService.hasPreviewModeDisabled()))),t(this,"hasFioPermission",(async()=>await O(this.previewModeService.hasPreviewModeDisabled()))),t(this,"hasApartmentViewPermission",(async()=>U(await this.featureService.hasFeature("prosmotr_obekta")))),t(this,"hasBidViewPermission",(async()=>U(await this.featureService.hasFeature("prosmotr_zayavki")))),t(this,"hasContactViewPermission",(async()=>U(await this.featureService.hasFeature("prosmotr_kontakta")))),t(this,"hasApartmentCreatePermission",(async()=>U(await this.featureService.hasFeature("sozdanie_obekta")))),t(this,"hasBidCreatePermission",(async()=>U(await this.featureService.hasFeature("sozdanie_zayavki")))),t(this,"hasContactCreatePermission",(async()=>U(await this.featureService.hasFeature("sozdanie_kontakta")))),t(this,"hasApartmentUpdatePermission",(async()=>U(await this.featureService.hasFeature("redaktirovanie_obekta")))),t(this,"hasBidUpdatePermission",(async()=>U(await this.featureService.hasFeature("redaktirovanie_zayavki")))),t(this,"hasContactUpdatePermission",(async()=>U(await this.featureService.hasFeature("redaktirovanie_kontakta")))),t(this,"hasUsersUpdatePermission",(async()=>U(await this.featureService.hasFeature("redaktirovanie_sotrudnika")))),t(this,"hasSettingsCreateRolePermission",(async()=>U(await this.featureService.hasFeature("sozdanie_roli")))),t(this,"hasSettingsEditRolePermission",(async()=>U(await this.featureService.hasFeature("redaktirovanie_roli")))),t(this,"hasUsersViewPhoneAndEmailPermission",(async()=>U(await this.featureService.hasFeature("prosmotr_nomera_telefona_i_email")))),t(this,"hasUserServiceCommentMentionPermission",(async()=>U(await this.featureService.hasFeature("upominanie_polzovatelya")))),t(this,"hasUserServiceCommentAddingFilePermission",(async()=>U(await this.featureService.hasFeature("dobavlenie_fajla")))),t(this,"hasUsersAccessLevelsPermission",(async()=>U(await this.featureService.hasFeature("nastrojka_urovnej_dostupa")))),t(this,"hasSettingsEditPermission",(async()=>U(await this.featureService.hasFeature("dostup_k_nastrojkam")))),t(this,"hasManagerAllObjectsExclusivePermission",(async()=>U(await this.featureService.hasFeature("vse_obekty_eksklyuzivny")))),t(this,"getPermissions",(async()=>{let e=!1,t=!1,a=!1,i=!1,o=!1,l=!1,r=!1,n=!1,s=!1,d=!1,m=!1,c=!1,u=!1,p=!1,y=!1,h=!1,b=!1,_=!1,v=!1,f=!1,g=!1,k=!1,w=!1,S=!1,z=!1,x=!1,F=!1,T=!1,A=!1;return await Promise.all([this.previewModeService.hasPreviewModeDisabled().then((t=>e=t)),this.hasContactNumberPermission().then((e=>t=e)),this.hasContactEmailPermission().then((e=>a=e)),this.hasApartmentHouseNumberPermission().then((e=>i=e)),this.hasBidHouseNumberPermission().then((e=>o=e)),this.hasResponsiblePermission().then((e=>l=e)),this.hasOwnerPricePermission().then((e=>r=e)),this.hasCommissionPermission().then((e=>n=e)),this.hasMasterDetailPermission().then((e=>s=e)),this.hasDescriptionPermission().then((e=>d=e)),this.hasFioPermission().then((e=>m=e)),this.hasApartmentViewPermission().then((e=>c=e)),this.hasBidViewPermission().then((e=>u=e)),this.hasContactViewPermission().then((e=>p=e)),this.hasApartmentCreatePermission().then((e=>y=e)),this.hasBidCreatePermission().then((e=>h=e)),this.hasContactCreatePermission().then((e=>b=e)),this.hasApartmentUpdatePermission().then((e=>_=e)),this.hasBidUpdatePermission().then((e=>v=e)),this.hasContactUpdatePermission().then((e=>f=e)),this.hasUsersUpdatePermission().then((e=>g=e)),this.hasSettingsCreateRolePermission().then((e=>k=e)),this.hasSettingsEditRolePermission().then((e=>w=e)),this.hasUsersViewPhoneAndEmailPermission().then((e=>S=e)),this.hasUserServiceCommentMentionPermission().then((e=>z=e)),this.hasUserServiceCommentAddingFilePermission().then((e=>x=e)),this.hasUsersAccessLevelsPermission().then((e=>F=e)),this.hasSettingsEditPermission().then((e=>T=e)),this.hasManagerAllObjectsExclusivePermission().then((e=>A=e))]),{hasPreviewModeDisabled:e,hasContactNumberPermission:t,hasContactEmailPermission:a,hasApartmentHouseNumberPermission:i,hasBidHouseNumberPermission:o,hasResponsiblePermission:l,hasOwnerPricePermission:r,hasCommissionPermission:n,hasMasterDetailPermission:s,hasDescriptionPermission:d,hasFioPermission:m,hasApartmentViewPermission:c,hasBidViewPermission:u,hasContactViewPermission:p,hasApartmentCreatePermission:y,hasBidCreatePermission:h,hasContactCreatePermission:b,hasApartmentUpdatePermission:_,hasBidUpdatePermission:v,hasContactUpdatePermission:f,hasUsersUpdatePermission:g,hasSettingsCreateRolePermission:k,hasSettingsEditRolePermission:w,hasUsersViewPhoneAndEmailPermission:S,hasUserServiceCommentMentionPermission:z,hasUserServiceCommentAddingFilePermission:x,hasUsersAccessLevelsPermission:F,hasSettingsEditPermission:T,hasManagerAllObjectsExclusivePermission:A}})),t(this,"prefetch",v((async()=>{await this.getPermissions()})))}}const Kl=W("REAL_ESTATE_PREVIEW_MODE");class Zl{constructor(){t(this,"togglePreviewMode",(()=>{Kl.setValue(!this.previewMode),T()})),t(this,"hasPreviewModeDisabled",(async()=>await Promise.resolve(!this.previewMode))),b(this,{})}get previewMode(){return Kl.getValue()||!1}}class Xl{constructor(){t(this,"appwriteService",h(No.appwriteService)),t(this,"errorService",h(No.errorService)),t(this,"loggerService",h(No.loggerService)),t(this,"subscribeAppwrite",((e,t)=>(this.loggerService.log("realtimeService appwrite event bus fallback"),this.appwriteService.client.subscribe(e,t)))),t(this,"subscribe",((e,t)=>this.subscribeAppwrite(e,t))),b(this,{})}}const Jl="databases.".concat(uo.databaseId,".collections.").concat(xo,".documents");class Ql{constructor(){t(this,"createSubject",new y),t(this,"reloadSubject",new y),t(this,"updateSubject",new y),t(this,"appwriteService",h(No.appwriteService)),t(this,"realtimeService",h(No.realtimeService)),t(this,"findById",(async e=>{const t=(await this.findAll()).find((t=>t.id===e));if(!t)throw new Error("userDbService findById user not found");return jo(t)})),t(this,"findAll",v((async()=>{const{documents:e}=await this.appwriteService.databases.listDocuments(uo.databaseId,xo,[_.orderDesc("$createdAt")]);return qo(e)}))),t(this,"create",(async e=>{const t=await this.appwriteService.databases.createDocument(uo.databaseId,xo,this.appwriteService.createId(),Ro(e));this.findAll.clear();const a=jo(t);return this.createSubject.next(a),a})),t(this,"update",(async(e,t)=>{const a=await this.appwriteService.databases.updateDocument(uo.databaseId,xo,e,Ro(t));this.findAll.clear();const i=jo(a);return this.updateSubject.next([e,i]),i})),t(this,"remove",(async e=>{await this.appwriteService.databases.deleteDocument(uo.databaseId,xo,e),this.findAll.clear(),this.reloadSubject.next()})),t(this,"prefetch",v((async()=>{this.realtimeService.subscribe(Jl,(({events:e,payload:t})=>{if(e.includes(Lo)&&(this.findAll.clear(),this.reloadSubject.next(),this.createSubject.next(t)),e.includes(Mo)&&(this.findAll.clear(),this.reloadSubject.next()),e.includes(Io)){this.findAll.clear();const e=jo(t);this.updateSubject.next([t.$id,e])}}))}))),b(this,{})}}class er{constructor(){t(this,"roleDbService",h(No.roleDbService)),t(this,"loggerService",h(No.loggerService)),t(this,"createSubject",this.roleDbService.createSubject),t(this,"reloadSubject",this.roleDbService.reloadSubject),t(this,"updateSubject",this.roleDbService.updateSubject),t(this,"create",(async e=>(this.loggerService.log("roleViewService create",e),await this.roleDbService.create(e)))),t(this,"findAll",(async()=>(this.loggerService.log("roleViewService findAll"),await this.roleDbService.findAll()))),t(this,"update",(async(e,t)=>(this.loggerService.log("roleViewService update",t),await this.roleDbService.update(e,t)))),t(this,"remove",(async e=>(this.loggerService.log("roleViewService remove",{id:e}),await this.roleDbService.remove(e)))),t(this,"read",(async e=>{this.loggerService.log("roleViewService read",{id:e});return await this.roleDbService.findById(e)})),t(this,"tryRead",(async e=>{this.loggerService.log("roleViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),b(this,{})}}const tr=$();class ar{constructor(){t(this,"previousPath","/"),t(this,"location",tr.location),t(this,"action",tr.action),t(this,"hasViewRedirectFlag",(()=>!!this.locationState.viewRedirectFlag)),t(this,"updateState",(()=>{var e;const{location:t,action:a}=tr;this.previousPath=(null==(e=this.location)?void 0:e.pathname)||"/",this.location=t,this.action=a})),t(this,"createHref",(e=>{const t=tr.createHref(e);return this.updateState(),t})),t(this,"push",((e,t)=>{const a=tr.push(e,t);return this.updateState(),a})),t(this,"replace",((e,t)=>{const a=tr.replace(e,t);return this.updateState(),a})),t(this,"go",(e=>{const t=tr.go(e);return this.updateState(),t})),t(this,"back",(()=>{const e=tr.back();return this.updateState(),e})),t(this,"forward",(()=>{const e=tr.forward();return this.updateState(),e})),t(this,"listen",(e=>{const t=tr.listen(e);return this.updateState(),t})),t(this,"block",(e=>{const t=tr.block(e);return this.updateState(),t})),c(this)}get locationState(){return this.location.state?M(this.location.state):{}}}const ir="databases.".concat(uo.databaseId,".collections.").concat(zo,".documents");class or{constructor(){t(this,"createSubject",new y),t(this,"reloadSubject",new y),t(this,"updateSubject",new y),t(this,"appwriteService",h(No.appwriteService)),t(this,"realtimeService",h(No.realtimeService)),t(this,"findById",(async e=>{const t=await this.appwriteService.databases.getDocument(uo.databaseId,zo,e);return jo(t)})),t(this,"create",(async e=>{const t=await this.appwriteService.databases.createDocument(uo.databaseId,zo,this.appwriteService.createId(),Ro(e)),a=jo(t);return this.createSubject.next(a),a})),t(this,"update",(async(e,t)=>{const a=await this.appwriteService.databases.updateDocument(uo.databaseId,zo,e,Ro(t));return jo(a)})),t(this,"remove",(async e=>{await this.appwriteService.databases.deleteDocument(uo.databaseId,zo,e)})),t(this,"findAllByApartmentId",(async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(uo.databaseId,zo,[_.orderDesc("$createdAt"),_.equal("apartment_id",e)]);return qo(t)})),t(this,"findByBidId",(async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(uo.databaseId,zo,[_.orderDesc("$createdAt"),_.equal("bid_id",e)]);return qo(t)})),t(this,"prefetch",v((async()=>{this.realtimeService.subscribe(ir,(({events:e,payload:t})=>{if(e.includes(Lo)&&(this.reloadSubject.next(),this.createSubject.next(t)),e.includes(Mo)&&this.reloadSubject.next(),e.includes(Io)){const e=jo(t);this.updateSubject.next([t.$id,e])}}))}))),b(this,{})}}class lr{constructor(){t(this,"serviceCommentDbService",h(No.serviceCommentDbService)),t(this,"loggerService",h(No.loggerService)),t(this,"createSubject",this.serviceCommentDbService.createSubject),t(this,"reloadSubject",this.serviceCommentDbService.reloadSubject),t(this,"updateSubject",this.serviceCommentDbService.updateSubject),t(this,"create",(async e=>(this.loggerService.log("serviceCommentViewService create",e),await this.serviceCommentDbService.create(e)))),t(this,"update",(async(e,t)=>(this.loggerService.log("serviceCommentViewService update",t),await this.serviceCommentDbService.update(e,t)))),t(this,"remove",(async e=>(this.loggerService.log("serviceCommentViewService remove",{id:e}),await this.serviceCommentDbService.remove(e)))),t(this,"read",(async e=>{this.loggerService.log("serviceCommentViewService read",{id:e});return await this.serviceCommentDbService.findById(e)})),t(this,"findAllByApartmentId",(async e=>{if(this.loggerService.log("serviceCommentViewService findAllByApartmentId"),!e)throw new Error("serviceCommentViewService findAllByApartmentId id is null");return await this.serviceCommentDbService.findAllByApartmentId(e)})),t(this,"findByBidId",(async e=>{if(this.loggerService.log("serviceCommentViewService findByBidId"),!e)throw new Error("serviceCommentViewService findByBidId id is null");return await this.serviceCommentDbService.findByBidId(e)})),t(this,"tryRead",(async e=>{this.loggerService.log("serviceCommentViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),b(this,{})}}const rr={usd_eur:"0.9",usd_uzs:"1000",watermark_file_id:null,masterdetail_mode:[C.Paper]},nr="settings",sr="databases.".concat(uo.databaseId,".collections.").concat(ho,".documents");class dr{constructor(){t(this,"appwriteService",h(No.appwriteService)),t(this,"updateSubject",new y),t(this,"realtimeService",h(No.realtimeService)),t(this,"create",(async()=>await this.appwriteService.databases.createDocument(uo.databaseId,ho,nr,rr))),t(this,"read",v((async()=>{const e=await this.appwriteService.databases.getDocument(uo.databaseId,ho,nr);return{...rr,...jo(e)}}))),t(this,"update",B((async e=>{await A(1e3);const t=await this.appwriteService.databases.updateDocument(uo.databaseId,ho,nr,{...rr,...Ro(e)}),a=jo(t);return this.updateSubject.next([null,a]),a}))),t(this,"remove",(async e=>await this.appwriteService.databases.deleteDocument(uo.databaseId,nr,e))),t(this,"prefetch",v((async()=>{this.realtimeService.subscribe(sr,(({payload:e})=>{this.read.clear();const t=jo(e);this.updateSubject.next([null,t])}))}))),b(this,{})}}class mr{constructor(){t(this,"settingsDbService",h(No.settingsDbService)),t(this,"loggerService",h(No.loggerService)),t(this,"updateSubject",this.settingsDbService.updateSubject),t(this,"getExchangeRate",(async e=>{const{usd_eur:t,usd_uzs:a}=await this.getValue();return"usd_eur"!==e||isNaN(t)?"usd_uzs"!==e||isNaN(a)?null:parseFloat(a):parseFloat(t)})),t(this,"getMasterDetailMode",(async()=>{const{masterdetail_mode:e}=await this.getValue(),t=(null==e?void 0:e.length)?e[0]:null;return t===C.Tabs?C.Tabs:(C.Paper,C.Paper)})),t(this,"getValue",(async()=>{this.loggerService.log("settingsViewService getValue");try{return await this.settingsDbService.read()}catch(e){return await this.settingsDbService.create()}})),t(this,"setValue",(async e=>(this.loggerService.log("settingsViewService setValue",e),await this.settingsDbService.update(e)))),b(this,{})}}const cr=[""," "," "," ","  "," "],ur={" ":ll()+1," ":ll(),"  ":ll()+7,"":ll()-1},pr=async e=>null===e?" ":e<=ur[""]?"":e===ur[" "]?" ":e===ur[" "]?" ":e>ur[" "]&&e<=ur["  "]?"  ":null,yr=async e=>e.is_complete?" ":await pr(e.moment_stamp),hr="databases.".concat(uo.databaseId,".collections.").concat(wo,".documents");class br{constructor(){t(this,"reloadSubject",new y),t(this,"createSubject",new y),t(this,"removeSubject",new y),t(this,"updateSubject",new y),t(this,"appwriteService",h(No.appwriteService)),t(this,"realtimeService",h(No.realtimeService)),t(this,"createIndex",(async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(uo.databaseId,wo,[_.limit(1),_.select(["index"])]);return e+1})),t(this,"findById",(async e=>{const t=await this.appwriteService.databases.getDocument(uo.databaseId,wo,e);return jo(t)})),t(this,"findByTaskStatus",(async e=>{let t=[];return""===e&&(t=await pl(ul(wo,[_.lessThanEqual("moment_stamp",ur.)],{totalDocumentsLimit:250})))," "===e&&(t=await pl(ul(wo,[_.equal("moment_stamp",ur[" "])],{totalDocumentsLimit:250})))," "===e&&(t=await pl(ul(wo,[_.equal("moment_stamp",ur[" "])],{totalDocumentsLimit:250}))),"  "===e&&(t=await pl(ul(wo,[_.greaterThan("moment_stamp",ur[" "]),_.lessThanEqual("moment_stamp",ur["  "])],{totalDocumentsLimit:250})))," "===e&&(t=await pl(ul(wo,[_.isNull("moment_stamp"),_.equal("is_complete",!1)],{totalDocumentsLimit:250})))," "===e&&(t=await pl(ul(wo,[_.equal("is_complete",!0)],{totalDocumentsLimit:250}))),qo(t)})),t(this,"create",(async e=>{const t=await this.appwriteService.databases.createDocument(uo.databaseId,wo,this.appwriteService.createId(),{is_complete:!1,...Ro(e),index:await this.createIndex()}),a=jo(t);return this.createSubject.next(a),a})),t(this,"update",(async(e,t)=>{const a=await this.appwriteService.databases.updateDocument(uo.databaseId,wo,e,{...Ro(t)}),i=jo(a);return this.updateSubject.next([e,i]),i})),t(this,"remove",(async e=>{await this.appwriteService.databases.deleteDocument(uo.databaseId,wo,e),this.removeSubject.next(e)})),t(this,"prefetch",v((()=>{(async()=>{this.realtimeService.subscribe(hr,(({events:e,payload:t})=>{if(e.includes(Lo)){const e=jo(t);this.reloadSubject.next(),this.createSubject.next(e)}if(e.includes(Mo)&&(this.reloadSubject.next(),this.removeSubject.next(t.$id)),e.includes(Io)){const e=jo(t);this.updateSubject.next([t.$id,e])}}))})()}))),b(this,{})}}const _r="databases.".concat(uo.databaseId,".collections.").concat(To,".documents");class vr{constructor(){t(this,"createSubject",new y),t(this,"reloadSubject",new y),t(this,"updateSubject",new y),t(this,"appwriteService",h(No.appwriteService)),t(this,"realtimeService",h(No.realtimeService)),t(this,"findById",(async e=>{const t=await this.appwriteService.databases.getDocument(uo.databaseId,To,e);return jo(t)})),t(this,"create",(async e=>{const t=await this.appwriteService.databases.createDocument(uo.databaseId,To,this.appwriteService.createId(),Ro(e));return jo(t)})),t(this,"update",(async(e,t)=>{const a=await this.appwriteService.databases.updateDocument(uo.databaseId,To,e,Ro(t));return jo(a)})),t(this,"remove",(async e=>{await this.appwriteService.databases.deleteDocument(uo.databaseId,To,e)})),t(this,"findAllByContactId",(async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(uo.databaseId,To,[_.orderDesc("$createdAt"),_.equal("contact_id",e)]);return qo(t)})),t(this,"findAllByTaskId",(async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(uo.databaseId,To,[_.orderDesc("$createdAt"),_.equal("task_id",e)]);return qo(t)})),t(this,"findAllByUserId",(async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(uo.databaseId,To,[_.orderDesc("$createdAt"),_.equal("user_id",e)]);return qo(t)})),t(this,"prefetch",v((async()=>{this.realtimeService.subscribe(_r,(({events:e,payload:t})=>{if(e.includes(Lo)&&(this.reloadSubject.next(),this.createSubject.next(t)),e.includes(Mo)&&this.reloadSubject.next(),e.includes(Io)){const e=jo(t);this.updateSubject.next([t.$id,e])}}))}))),b(this,{})}}class fr{constructor(){t(this,"taskHistoryViewService",h(No.taskHistoryViewService)),t(this,"appwriteService",h(No.appwriteService)),t(this,"contactViewService",h(No.contactViewService)),t(this,"userViewService",h(No.userViewService)),t(this,"todoTaskCommit",(async(e,t,a,i,o)=>{const l=this.appwriteService.currentUser.$id,r=null===t?" ":"  (<text-underline>".concat(t,"</text-underline> -> <text-underline>").concat(a,"</text-underline>)"),n=[" ".concat(r),o?": ".concat(o):null,": ".concat(i)].filter((e=>e)).join("\n");await this.taskHistoryViewService.create({user_id:l,task_id:e,contact_id:null,comment:n})})),t(this,"clientTaskCommit",(async(e,t,a,i,o,l)=>{const r=this.appwriteService.currentUser.$id,{fio:n}=await this.contactViewService.read(t),s=null===a?" ":"  (<text-underline>".concat(a,"</text-underline> -> <text-underline>").concat(i,"</text-underline>)"),d=[" ".concat(s),": ".concat(n),l?": ".concat(l):null,": ".concat(o)].filter((e=>e)).join("\n");await this.taskHistoryViewService.create({user_id:r,task_id:e,contact_id:t,comment:d})})),b(this,{})}}class gr{constructor(){t(this,"taskHistoryDbService",h(No.taskHistoryDbService)),t(this,"loggerService",h(No.loggerService)),t(this,"createSubject",this.taskHistoryDbService.createSubject),t(this,"reloadSubject",this.taskHistoryDbService.reloadSubject),t(this,"updateSubject",this.taskHistoryDbService.updateSubject),t(this,"create",(async e=>(this.loggerService.log("taskHistoryViewService create",e),await this.taskHistoryDbService.create(e)))),t(this,"update",(async(e,t)=>(this.loggerService.log("taskHistoryViewService update",t),await this.taskHistoryDbService.update(e,t)))),t(this,"remove",(async e=>(this.loggerService.log("taskHistoryViewService remove",{id:e}),await this.taskHistoryDbService.remove(e)))),t(this,"read",(async e=>{this.loggerService.log("taskHistoryViewService read",{id:e});return await this.taskHistoryDbService.findById(e)})),t(this,"findAllByContactId",(async e=>(this.loggerService.log("taskHistoryViewService findAllByContactId"),await this.taskHistoryDbService.findAllByContactId(e)))),t(this,"findAllByTaskId",(async e=>(this.loggerService.log("taskHistoryViewService findAllByTaskId"),await this.taskHistoryDbService.findAllByTaskId(e)))),t(this,"findAllByUserId",(async e=>(this.loggerService.log("taskHistoryViewService findAllByTaskId"),await this.taskHistoryDbService.findAllByUserId(e)))),t(this,"tryRead",(async e=>{this.loggerService.log("taskHistoryViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),b(this,{})}}const kr="Wrong or invalid email!",wr="Your password is incorrect !",Sr="The user was not found !",zr="Unexpected error, please try again later.",xr=e=>"auth/user-not-found"===e.code?Sr:"auth/wrong-password"===e.code?wr:"auth/invalid-email"===e.code?kr:G(e)||zr;class Fr{constructor(){t(this,"taskHistoryRequestService",h(No.taskHistoryRequestService)),t(this,"taskViewService",h(No.taskViewService)),t(this,"userViewService",h(No.userViewService)),t(this,"contactViewService",h(No.contactViewService)),t(this,"appwriteService",h(No.appwriteService)),t(this,"notifyViewService",h(No.notifyViewService)),t(this,"tryCommitTodoTask",(async(e,t,a,i,o)=>{try{await this.taskHistoryRequestService.todoTaskCommit(e,t,a,i,o)}catch(l){console.log(xr(l))}})),t(this,"tryCommitClientTask",(async(e,t,a,i,o)=>{try{await this.taskHistoryRequestService.clientTaskCommit(e,t,a,i,o)}catch(l){console.log(xr(l))}})),t(this,"createTodoTask",(async(e,t,a,i,o)=>{const l=this.appwriteService.currentUser.$id;let r,n;{const{first_name:e,last_name:t,middle_name:a}=await this.userViewService.read(l);r=[t,e,a].filter((e=>e)).join(" ")}{const{first_name:t,last_name:a,middle_name:i}=await this.userViewService.read(e);n=[a,t,i].filter((e=>e)).join(" ")}const{id:s}=await this.taskViewService.create({from_user_id:l,to_user_id:e,contact_id:null,moment_stamp:t,time_stamp:a,type:"",is_call:!1,is_meet:!1,from_user_fio:r,to_user_fio:n,contact_fio:"",title:i}),d=await pr(t);await Promise.all([this.tryCommitTodoTask(s,null,d||" ",o,i),this.notifyViewService.create({title:"    ",url:"/task",user_id:e})])})),t(this,"createClientTask",(async(e,t,a,i,o,l,r,n)=>{const s=this.appwriteService.currentUser.$id;let d,m,c;{const{first_name:e,last_name:t,middle_name:a}=await this.userViewService.read(s);d=[t,e,a].filter((e=>e)).join(" ")}{const{first_name:t,last_name:a,middle_name:i}=await this.userViewService.read(e);m=[a,t,i].filter((e=>e)).join(" ")}{const{fio:e}=await this.contactViewService.read(t);c=e}const{id:u}=await this.taskViewService.create({from_user_id:s,to_user_id:e,contact_id:t,moment_stamp:a,time_stamp:i,is_call:l,is_meet:r,type:"",from_user_fio:d,to_user_fio:m,contact_fio:c,title:o}),p=await pr(a);await Promise.all([this.tryCommitClientTask(u,t,null,p||" ",n),this.notifyViewService.create({title:"     ",url:"/task",user_id:e})])})),t(this,"updateTodoTask",(async(e,t,a,i,o,l,r,n)=>{const s=this.appwriteService.currentUser.$id,{id:d}=await this.taskViewService.update(e,{from_user_id:s,to_user_id:t,contact_id:null,moment_stamp:i,time_stamp:o,is_complete:l,is_call:!1,is_meet:!1,type:"",title:r}),m=await pr(i);await this.tryCommitTodoTask(d,a,m||(l?" ":" "),n,r)})),t(this,"updateClientTask",(async(e,t,a,i,o,l,r,n,s,d,m)=>{const c=this.appwriteService.currentUser.$id,{id:u}=await this.taskViewService.update(e,{from_user_id:c,to_user_id:t,contact_id:i,moment_stamp:o,time_stamp:l,is_complete:r,is_meet:s,is_call:n,type:"",title:d}),p=await pr(o);await this.tryCommitClientTask(u,i,a,p||(r?" ":" "),m)})),b(this,{})}}class Tr{constructor(){t(this,"taskDbService",h(No.taskDbService)),t(this,"loggerService",h(No.loggerService)),t(this,"reloadSubject",this.taskDbService.reloadSubject),t(this,"createSubject",this.taskDbService.createSubject),t(this,"removeSubject",this.taskDbService.removeSubject),t(this,"updateSubject",this.taskDbService.updateSubject),t(this,"create",(async e=>(this.loggerService.log("taskViewService create",e),await this.taskDbService.create(e)))),t(this,"update",(async(e,t)=>(this.loggerService.log("taskViewService update",t),await this.taskDbService.update(e,t)))),t(this,"remove",(async e=>(this.loggerService.log("taskViewService remove",{id:e}),await this.taskDbService.remove(e)))),t(this,"read",(async e=>{this.loggerService.log("taskViewService read",{id:e});return await this.taskDbService.findById(e)})),t(this,"tryRead",(async e=>{this.loggerService.log("taskViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),t(this,"findByTaskStatus",(async e=>(this.loggerService.log("taskViewService findByTaskStatus"),await this.taskDbService.findByTaskStatus(e)))),b(this,{})}}const Ar="databases.".concat(uo.databaseId,".collections.").concat(yo,".documents");class Cr{constructor(){t(this,"reloadSubject",new y),t(this,"updateSubject",new y),t(this,"appwriteService",h(No.appwriteService)),t(this,"realtimeService",h(No.realtimeService)),t(this,"getMetadata",(e=>{const t=[];return t.push(e.middle_name),t.push(e.last_name),t.push(e.first_name),t.push(e.email),t.push(e.phone),t.join(" ").slice(0,Bo)})),t(this,"createIndex",(async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(uo.databaseId,vo,[_.limit(1),_.select(["index"])]);return e+1})),t(this,"findById",(async e=>{const t=(await this.findAll()).find((t=>t.id===e));if(!t)throw new Error("userDbService findById user not found");return jo(t)})),t(this,"findAll",v((async()=>{const e=await pl(ul(yo));return qo(e)}))),t(this,"update",(async(e,t)=>{const a=await this.appwriteService.databases.updateDocument(uo.databaseId,yo,e,{...Ro(t),system_metadata:await this.getMetadata(t)});this.findAll.clear();const i=jo(a);return this.updateSubject.next([e,i]),i})),t(this,"remove",(async e=>(this.findAll.clear(),await this.appwriteService.databases.deleteDocument(uo.databaseId,yo,e)))),t(this,"prefetch",v((async()=>{this.realtimeService.subscribe(Ar,(({events:e,payload:t})=>{if(e.includes(Lo)&&(this.findAll.clear(),this.reloadSubject.next()),e.includes(Mo)&&(this.findAll.clear(),this.reloadSubject.next()),e.includes(Io)){this.findAll.clear();const e=jo(t);this.updateSubject.next([t.$id,e])}}))}))),b(this,{})}}class Vr{constructor(){t(this,"userDbService",h(No.userDbService)),t(this,"loggerService",h(No.loggerService)),t(this,"reloadSubject",this.userDbService.reloadSubject),t(this,"updateSubject",this.userDbService.updateSubject),t(this,"update",(async(e,t)=>(this.loggerService.log("userViewService update",t),await this.userDbService.update(e,t)))),t(this,"remove",(async e=>(this.loggerService.log("userViewService remove",{id:e}),await this.userDbService.remove(e)))),t(this,"read",(async e=>(this.loggerService.log("userViewService read",{id:e}),await this.userDbService.findById(e)))),t(this,"tryRead",(async e=>{this.loggerService.log("userViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),t(this,"findAll",(async()=>(this.loggerService.log("userViewService findAll"),await this.userDbService.findAll()))),b(this,{})}}class Ir{constructor(){t(this,"suggest",(async e=>(await ymaps.suggest(e)).map((({value:e})=>e)))),t(this,"geocode",(async e=>{const t=(await ymaps.geocode(e)).geoObjects.get(0);if(t){const[e,a]=t.geometry.getCoordinates();return{lat:e,lon:a}}return{lat:null,lon:null}})),t(this,"openAddress",(async e=>{const{lat:t,lon:a}=await this.geocode(e);if(t&&a){const i=new URL("https://maps.yandex.com");i.searchParams.set("ll","".concat(a,", ").concat(t)),i.searchParams.set("text",e),i.searchParams.set("z","16"),Y(i.toString())}})),t(this,"getAddressString",(async({lat:e,lon:t})=>{const a=[e,t];return(await ymaps.geocode(a)).geoObjects.get(0).getAddressLine()})),t(this,"getAddress",(async({lat:e,lon:t})=>{const a=[e,t],i=(await ymaps.geocode(a)).geoObjects.get(0);let o=i.getAdministrativeAreas()||"",l=i.getPremise()||"",r=i.getLocalities()||"",n=i.getThoroughfare()||"",s=i.getCountry()||"",d=i.getPremiseNumber()||"";return Array.isArray(r)&&(r=r[1]||""),Array.isArray(n)&&(n=n[0]||""),Array.isArray(l)&&(l=l[0]||""),Array.isArray(o)&&(o=o[0]||""),Array.isArray(s)&&(s=s[0]||""),Array.isArray(d)&&(d=d[0]||""),{strana:s.toString(),gorod:o.toString(),nomer_doma:d.toString(),rajon:r.toString(),ulicza:n.toString(),metro:null,mahallya:l.toString()}})),t(this,"drawMap",((e,{address:t,change:a})=>{let i=null,o=null;console.log({address:t});return(async()=>{const l=t?await this.geocode(t):{lat:null,lon:null};if(l.lat&&l.lon)i=new ymaps.Map(e,{center:[l.lat,l.lon],zoom:9}),o=new ymaps.Placemark([l.lat,l.lon],{iconCaption:t},{preset:"islands#violetDotIconWithCaption",draggable:!0}),i.geoObjects.add(o);else{const{lat:t,lon:a}=await this.geocode(", ");i=new ymaps.Map(e,{center:[t,a],zoom:10})}i.events.add("click",(async e=>{const t=e.get("coords");o||(o=new ymaps.Placemark(t,{iconCaption:"..."},{preset:"islands#violetDotIconWithCaption",draggable:!0}),i&&i.geoObjects.add(o)),o.geometry.setCoordinates(t),o.properties.set({iconCaption:"..."}),o.properties.set({iconCaption:await this.getAddressString({lat:t[0],lon:t[1]})}),a({lat:t[0],lon:t[1]})}))})(),()=>{null==i||i.destroy(),i=null}})),t(this,"prefetch",v((async()=>{const e=new URL("2.1","https://api-maps.yandex.ru");e.searchParams.set("apikey","03219f2d-b9b3-4850-98ea-9db0670d8a6b"),e.searchParams.set("lang","ru"),e.searchParams.set("load","SuggestView,suggest,geocode,Map,Placemark"),await K(e.toString()),await ymaps.ready()}))),b(this,{})}}Z(No.appwriteService,(()=>new Wo)),Z(No.authService,(()=>new Go)),Z(No.alertService,(()=>new Do)),Z(No.layoutService,(()=>new Bl)),Z(No.routerService,(()=>new ar)),Z(No.errorService,(()=>new Ll)),Z(No.dictService,(()=>new Al)),Z(No.cacheService,(()=>new Qo)),Z(No.ymapsService,(()=>new Ir)),Z(No.loggerService,(()=>new Dl)),Z(No.realtimeService,(()=>new Xl)),Z(No.editTargetService,(()=>new Il)),Z(No.permissionService,(()=>new Yl)),Z(No.featureService,(()=>new Ml)),Z(No.previewModeService,(()=>new Zl)),Z(No.metadataService,(()=>new El)),Z(No.userDbService,(()=>new Cr)),Z(No.settingsDbService,(()=>new dr)),Z(No.apartmentDbService,(()=>new Ho)),Z(No.bidDbService,(()=>new Ko)),Z(No.dealDbService,(()=>new _l)),Z(No.contactDbService,(()=>new tl)),Z(No.dealHistoryDbService,(()=>new fl)),Z(No.serviceCommentDbService,(()=>new or)),Z(No.roleDbService,(()=>new Ql)),Z(No.notifyDbService,(()=>new Ul)),Z(No.taskDbService,(()=>new br)),Z(No.taskHistoryDbService,(()=>new vr)),Z(No.contactRequestService,(()=>new al)),Z(No.dealHistoryRequestService,(()=>new zl)),Z(No.dealRequestService,(()=>new Fl)),Z(No.taskRequestService,(()=>new Fr)),Z(No.taskHistoryRequestService,(()=>new fr)),Z(No.dashboardRequestService,(()=>new ml)),Z(No.permissionRequestService,(()=>new Gl)),Z(No.userViewService,(()=>new Vr)),Z(No.settingsViewService,(()=>new mr)),Z(No.apartmentViewService,(()=>new Oo)),Z(No.bidViewService,(()=>new Zo)),Z(No.dealViewService,(()=>new Tl)),Z(No.contactViewService,(()=>new il)),Z(No.dealHistoryViewService,(()=>new xl)),Z(No.serviceCommentViewService,(()=>new lr)),Z(No.roleViewService,(()=>new er)),Z(No.notifyViewService,(()=>new Hl)),Z(No.taskViewService,(()=>new Tr)),Z(No.taskHistoryViewService,(()=>new gr));const Lr={appwriteService:h(No.appwriteService),authService:h(No.authService),alertService:h(No.alertService),routerService:h(No.routerService),layoutService:h(No.layoutService),errorService:h(No.errorService),dictService:h(No.dictService),cacheService:h(No.cacheService),ymapsService:h(No.ymapsService),loggerService:h(No.loggerService),realtimeService:h(No.realtimeService)},Mr={editTargetService:h(No.editTargetService),permissionService:h(No.permissionService),featureService:h(No.featureService),previewModeService:h(No.previewModeService),metadataService:h(No.metadataService)},Br={contactRequestService:h(No.contactRequestService),dealHistoryRequestService:h(No.dealHistoryRequestService),dealRequestService:h(No.dealRequestService),taskRequestService:h(No.taskRequestService),taskHistoryRequestService:h(No.taskHistoryRequestService),dashboardRequestService:h(No.dashboardRequestService),permissionRequestService:h(No.permissionRequestService)},Dr={...Lr,...{settingsDbService:h(No.settingsDbService),apartmentDbService:h(No.apartmentDbService),bidDbService:h(No.bidDbService),dealDbService:h(No.dealDbService),userDbService:h(No.userDbService),contactDbService:h(No.contactDbService),dealHistoryDbService:h(No.dealHistoryDbService),serviceCommentDbService:h(No.serviceCommentDbService),roleDbService:h(No.roleDbService),notifyDbService:h(No.notifyDbService),taskDbService:h(No.taskDbService),taskHistoryDbService:h(No.taskHistoryDbService)},...{userViewService:h(No.userViewService),apartmentViewService:h(No.apartmentViewService),bidViewService:h(No.bidViewService),dealViewService:h(No.dealViewService),settingsViewService:h(No.settingsViewService),contactViewService:h(No.contactViewService),dealHistoryViewService:h(No.dealHistoryViewService),serviceCommentViewService:h(No.serviceCommentViewService),roleViewService:h(No.roleViewService),notifyViewService:h(No.notifyViewService),taskViewService:h(No.taskViewService),taskHistoryViewService:h(No.taskHistoryViewService)},...Mr,...Br};window.addEventListener("unhandledrejection",(e=>{Dr.errorService.handleGlobalError(new Error(e.reason))})),window.addEventListener("offline",(()=>{T()})),window.addEventListener("error",(e=>{e instanceof X&&Dr.errorService.handleGlobalError(e)})),Dr.layoutService.setModalLoader(!0),Dr.layoutService.appbarSubject.filter((e=>!e)).filter((()=>!Dr.layoutService.hasAppbarLoader)).operator(J.take(1)).debounce(1e3).once((()=>{Dr.layoutService.setModalLoader(!1)})),Q.join([Dr.layoutService.appbarSubject.toObserver(),Q.fromInterval(1e4)],{race:!0}).reduce(((e,[t])=>t?e+1:0),0).filter((e=>3===e)).connect((()=>{Dr.layoutService.hasModalLoader||Dr.layoutService.dropAppbarLoader()})),Dr.routerService.listen((({action:e})=>{"PUSH"===e&&Dr.cacheService.collectGarbage()})),Dr.userViewService.updateSubject.subscribe((([e])=>{Dr.appwriteService.currentUser.$id===e&&T()})),window.ioc=Dr;const{makeStyles:jr}=ee({useTheme:te}),qr=[{type:i.Fragment,isVisible:({activeStep:e})=>0===e,fields:[{type:i.Component,element:()=>ae(le,{variant:"h6",fontWeight:"bold",mb:2,children:" "})},{type:i.Text,outlined:!0,title:"..",isInvalid:({fio:e})=>e?null:"  ",description:"   ",name:"fio"},{type:i.Text,outlined:!0,title:"",isInvalid:({telefon:e})=>e?null:"  ",description:" ",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon"}]},{type:i.Fragment,isVisible:({activeStep:e})=>2===e,fields:[{type:i.Component,element:()=>ae(le,{variant:"h6",fontWeight:"bold",mb:1,children:""})},{type:i.Component,isVisible:({contact_id:e})=>!e,element:()=>ae(re,{variant:"outlined",color:"warning",sx:{mb:2},children:"  , ,    "})},{type:i.Component,isVisible:({contact_id:e})=>!!e,element:()=>ae(re,{variant:"outlined",color:"info",sx:{mb:2},children:",     "})},{type:i.Text,isVisible:({contact_id:e})=>!!e,compute:async({contact_id:e})=>{const{fio:t=""}=await Dr.contactViewService.tryRead(e)||{};return t},disabled:!0,outlined:!0,title:".."},{type:i.Text,isVisible:({contact_id:e})=>!!e,compute:async({contact_id:e})=>{const{telefon:t=""}=await Dr.contactViewService.tryRead(e)||{};return t},fieldBottomMargin:"0",disabled:!0,outlined:!0,title:"",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000"},{type:i.Text,isVisible:({contact_id:e})=>!e,outlined:!0,title:"..",isInvalid:({fio:e})=>e?null:"  ",description:"   ",name:"fio"},{type:i.Text,isVisible:({contact_id:e})=>!e,outlined:!0,title:"",isInvalid:({telefon:e})=>e?null:"  ",description:" ",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon"}]}],Rr=[{type:ie.Link,action:"list-action",label:" "},{type:ie.Link,action:"list-action",label:" "}],Pr=jr()((e=>({root:{position:"relative",overflow:"hidden"},header:{position:"absolute",top:0,left:0,height:65,paddingLeft:e.spacing(2),paddingRight:e.spacing(2),background:"whitesmoke",width:"100%"},content:{minHeight:300},adjust:{paddingBottom:65},listItemBackground:{background:oe(e.palette.primary.main,.05)}}))),Er=se.forwardRef((({sx:e,variant:t="filled"},a)=>{const[i,o]=se.useState([]);return se.useEffect((()=>Ce((()=>Dr.editTargetService.alerts),(()=>{o(Dr.editTargetService.alerts)}))),[]),se.useEffect((()=>{o(Dr.editTargetService.alerts)}),[]),ae(Ve,{ref:a,sx:{...e,mb:2},variant:t,items:i})})),Nr=({children:e})=>{const{execute:t}=Ie((async()=>{const{sideMenu:e=null}=Yu()||{},{id:t=null}=Cl();if(!Dr.appwriteService.isAuthorized)return;const a=await Dr.editTargetService.getDocument(Dr.appwriteService.currentUser.$id);if(!a)return void(await Dr.editTargetService.create({entity_id:t,path:e}));let i=!1;i=i||a.entity_id!==t,i=i||a.path!==e,i&&await Dr.editTargetService.update({entity_id:t,path:e})}),{onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1),fallback:Dr.errorService.handleGlobalError});return se.useEffect((()=>Ce((()=>Dr.routerService.location.pathname),(()=>{Dr.appwriteService.isAuthorized&&t()}))),[]),ae(Le,{children:e})},Ur=(e,t=Dr.routerService.location.pathname)=>!!Me(Wu.filter((({path:t})=>e.includes(t))),t),Hr=[{id:"owner_contact",label:"",isActive:()=>Ur(["/apartment_edit/:id/owner_contact"])},{id:"object",label:"",isActive:()=>Ur(["/apartment_edit/:id","/apartment_edit/:id/object"])},{id:"tasks",isDisabled:()=>!0,label:"",isActive:()=>Ur(["/apartment_edit/:id/tasks"])},{id:"advertising",isDisabled:()=>!0,label:"",isActive:()=>Ur(["/apartment_edit/:id/advertising"])},{id:"service_comment",isDisabled:()=>!0,label:" ",isActive:()=>Ur(["/apartment_edit/:id/service_comment"])},{id:"history",isDisabled:()=>!0,label:"",isActive:()=>Ur(["/apartment_edit/:id/history"])},{id:"documents",label:"",isActive:()=>Ur(["/apartment_edit/:id/documents"])},{id:"commission_and_status",label:"  ",isDisabled:()=>!0,isActive:()=>Ur(["/apartment_edit/:id/commission_and_status"])}],Or=(e,t)=>{if(t)return;const a=Vl("id","create");"owner_contact"===e&&Dr.routerService.replace("/apartment_edit/".concat(a,"/owner_contact")),"object"===e&&Dr.routerService.replace("/apartment_edit/".concat(a,"/object")),"tasks"===e&&Dr.routerService.replace("/apartment_edit/".concat(a,"/tasks")),"advertising"===e&&Dr.routerService.replace("/apartment_edit/".concat(a,"/advertising")),"service_comment"===e&&Dr.routerService.replace("/apartment_edit/".concat(a,"/service_comment")),"history"===e&&Dr.routerService.replace("/apartment_edit/".concat(a,"/history")),"documents"===e&&Dr.routerService.replace("/apartment_edit/".concat(a,"/documents")),"commission_and_status"===e&&Dr.routerService.replace("/apartment_edit/".concat(a,"/commission_and_status"))},Wr=({payload:e,children:t,mode:a=C.Paper})=>{const i=se.useMemo((()=>"tabs"===a?C.Tabs:C.Paper),[a]);return ae(Be,{withFixedPos:!0,fixedPosHeaderAdjust:a===C.Paper?85:64,mode:i,options:Hr,payload:e,onActiveOptionChange:Or,children:t})},$r=[{type:ie.Link,action:"list-action",label:" "},{type:ie.Link,action:"list-action",isVisible:({id:e})=>"create"!==e,label:" "},{type:ie.Link,action:"list-action",isVisible:({id:e})=>"create"===e,label:" "},{type:ie.Button,isDisabled:({hasChanged:e})=>!e,action:"save-action",label:""}],Gr=[{id:"owner_contact",isVisible:({permissions:e})=>e.hasMasterDetailPermission,label:"",isActive:()=>Ur(["/apartment_view/:id/owner_contact"])},{id:"object",label:"",isActive:()=>Ur(["/apartment_view/:id","/apartment_view/:id/object"])},{id:"tasks",isVisible:({permissions:e})=>e.hasMasterDetailPermission,label:"",isActive:()=>Ur(["/apartment_view/:id/tasks"])},{id:"advertising",isDisabled:()=>!0,label:"",isActive:()=>Ur(["/apartment_view/:id/advertising"])},{id:"service_comment",isVisible:({permissions:e})=>e.hasMasterDetailPermission,label:" ",isActive:()=>Ur(["/apartment_view/:id/service_comment"])},{id:"history",isVisible:({permissions:e})=>e.hasMasterDetailPermission,label:"",isActive:()=>Ur(["/apartment_view/:id/history"])},{id:"documents",isVisible:({permissions:e})=>e.hasMasterDetailPermission,label:"",isActive:()=>Ur(["/apartment_view/:id/documents"])},{id:"commission_and_status",isVisible:({permissions:e})=>e.hasMasterDetailPermission,label:"  ",isDisabled:()=>!0,isActive:()=>Ur(["/apartment_view/:id/commission_and_status"])}],Yr=(e,t)=>{if(t)return;const a=Vl("id","create");"owner_contact"===e&&Dr.routerService.replace("/apartment_view/".concat(a,"/owner_contact")),"object"===e&&Dr.routerService.replace("/apartment_view/".concat(a,"/object")),"tasks"===e&&Dr.routerService.replace("/apartment_view/".concat(a,"/tasks")),"advertising"===e&&Dr.routerService.replace("/apartment_view/".concat(a,"/advertising")),"service_comment"===e&&Dr.routerService.replace("/apartment_view/".concat(a,"/service_comment")),"history"===e&&Dr.routerService.replace("/apartment_view/".concat(a,"/history")),"documents"===e&&Dr.routerService.replace("/apartment_view/".concat(a,"/documents")),"commission_and_status"===e&&Dr.routerService.replace("/apartment_view/".concat(a,"/commission_and_status"))},Kr=({children:e,payload:t,mode:a=C.Paper})=>{const i=se.useMemo((()=>"tabs"===a?C.Tabs:C.Paper),[a]);return ae(Be,{withFixedPos:!0,payload:t,fixedPosHeaderAdjust:a===C.Paper?85:64,mode:i,options:Gr,onActiveOptionChange:Yr,children:e})},Zr=({data:e,onSubmit:t,onChange:a,fullScreen:i})=>{const{handleLoadStart:o,handleLoadEnd:l}=de({history:Dr.routerService,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1)});return Pe({data:e,fullScreen:i,fallback:Dr.errorService.handleGlobalError,onClick:async e=>{const t=await Dr.appwriteService.getFileURL(e),a=await Dr.appwriteService.readFileName(e);je(t,a)},onUpload:e=>Dr.appwriteService.uploadFile(e),onLoadStart:o,onLoadEnd:l,onSubmit:async e=>{t&&await t(e)},onChange:a,submitLabel:"",tr:async e=>await Dr.appwriteService.tryReadFileName(e)||e})},Xr=[{type:ie.Link,action:"list-action",label:" "},{type:ie.Link,action:"list-action",label:" "},{type:ie.Button,isDisabled:({payload:{permissions:e}})=>!e.hasApartmentUpdatePermission,action:"edit-action",label:""}],Jr={allowCustomElements:!0,allowElements:["text-underline","blank-link"],allowAttributes:{href:["blank-link"]}},Qr=se.forwardRef((({item:e,loading:t,className:a,style:i},o)=>ae("div",{className:a,style:i,ref:o,children:ae(ce,{sx:{position:"relative",overflow:"hidden"},children:[ae(Ee,{children:[ae(Ne,{children:ae(Ue,{loading:t,payload:e,Loader:()=>ae(He,{variant:"circular",width:40,height:40}),children:async({user_id:e})=>{const t=await Dr.userViewService.tryRead(e),a=(null==t?void 0:t.avatar)?await Dr.appwriteService.getImageURL(t.avatar):void 0;return ae(Oe,{alt:null==t?void 0:t.email,src:a,sx:{height:40,mr:2,width:40}})}})}),ae(Ue,{loading:t,payload:e,Loader:()=>ae(be,{flex:1,children:[ae(He,{sx:{mb:1},variant:"rectangular",width:210,height:22}),ae(He,{variant:"rectangular",width:170,height:22})]}),children:async({user_id:e,type:t})=>{const a=await Dr.userViewService.tryRead(e),i=[null==a?void 0:a.first_name,null==a?void 0:a.last_name,null==a?void 0:a.middle_name].filter((e=>e)).join(" ");return ae(xe,{primary:i,secondary:"deal-begin"===t?" ":"deal-end"===t?" ":"deal-reassign"===t?" ":"deal-status"===t?" ":"- "})}}),ae(le,{children:r(e.$createdAt).format("HH:mm DD/MM/YYYY")})]}),!!e.comment&&ae(he,{component:"pre",sx:{ml:1,mr:1,mb:1},children:ae(We,{config:Jr,handler:()=>e.comment})}),ae(he,{sx:{position:"absolute",top:0,left:0,bottom:0,width:6,zIndex:1,background:"skyblue"}})]})}))),en="real-estate__headerRoot",tn=[{type:ie.Link,action:"list-action",label:" "},{type:ie.Link,action:"list-action",label:" "}],an=[{type:Ge.Add,isDisabled:(e,{permissions:t})=>!t.hasApartmentCreatePermission,label:""},{type:Ge.Fab,action:"column-setup-action",icon:Ye,label:""},{type:Ge.Menu,options:[{action:"add-action",isDisabled:(e,{permissions:t})=>!t.hasApartmentCreatePermission},{action:"update-now"},{action:"resort-action"},{action:"drop-filters"}]}],on=Ke.createLoader(28),ln=[{type:Ze.Compute,sortable:!1,field:"index",description:" ",headerName:"",element:({index:e})=>ae(Xe,{content:e}),width:()=>100},{type:Ze.Compute,sortable:!1,field:"photo",description:" ",headerName:"",width:()=>150,element:({apartment_images:e})=>ae(he,{style:{height:64,width:128,display:"flex",alignItems:"center",background:"#ccc",justifyContent:"center"},children:ae(Ue,{Loader:on,children:async()=>{const t=e?e[0]:null,a=t?await Dr.appwriteService.getImageURL(t):"";return ae(Le,{children:a?ae("img",{crossOrigin:"anonymous",loading:"lazy",alt:"apartment",src:a,style:{objectFit:"cover",height:"100%",width:"100%"}}):ae(Je,{sx:{color:"white",fontSize:28}})})}})})},{type:Ze.Text,sortable:!0,field:"zagolovok",description:" ",headerName:"",width:()=>200},{type:Ze.Text,sortable:!0,field:"kolichestvo_komnat",description:"   ",fullName:" ",headerName:"",width:()=>100},{type:Ze.Text,sortable:!0,field:"etazh",description:"  ",headerName:"",width:()=>100},{type:Ze.Text,sortable:!0,field:"etazhnost",description:" ",headerName:"",width:()=>100},{type:Ze.Compute,sortable:!0,field:"ploshhad",description:" ",compute:e=>[e.obshhaya_ploshhad,e.ploshhad_doma].filter((e=>!!e)).join(", "),headerName:" ",width:()=>200},{type:Ze.Compute,sortable:!0,description:"",field:"adres",compute:e=>[e.strana,e.gorod,e.oblast,e.rajon,e.mahallya,e.ulicza,e.orientir].filter((e=>!!e)).join(", "),headerName:"",width:()=>250},{type:Ze.Compute,field:"kategoriya_obekta",description:" ",sortable:!0,compute:e=>{var t;return(null==(t=e.kategoriya_obekta)?void 0:t.join(", "))||"Unset"},headerName:"",width:()=>200},{type:Ze.Compute,description:"",field:"czena_prodazha",sortable:!0,isVisible:({payload:e})=>e.permissions.hasOwnerPricePermission,compute:async({prod_startovaya_czena:e,prod_startovaya_czena_valyuta:t,prod_startovaya_czena_for:a,prod_kom_startovaya_czena:i,prod_kom_startovaya_czena_valyuta:o,prod_kom_startovaya_czena_for:l})=>e?"".concat(e," ").concat("uzs"===t?"UZS":"USD"," (").concat((null==a?void 0:a.join(""))||"",")"):i?"".concat(i," ").concat("uzs"===o?"UZS":"USD"," (").concat((null==l?void 0:l.join(""))||"",")"):"Unset",headerName:" ()",width:()=>200},{type:Ze.Compute,description:"",field:"czena_arenda",isVisible:({payload:e})=>e.permissions.hasOwnerPricePermission,sortable:!0,compute:async({rent_startovaya_czena:e,rent_startovaya_czena_valyuta:t,rent_startovaya_czena_for:a,rent_kom_startovaya_czena:i,rent_kom_startovaya_czena_valyuta:o,rent_kom_startovaya_czena_for:l})=>e?"".concat(e," ").concat("uzs"===t?"UZS":"USD"," (").concat((null==a?void 0:a.join(""))||"",")"):i?"".concat(i," ").concat("uzs"===o?"UZS":"USD"," (").concat((null==l?void 0:l.join(""))||"",")"):"Unset",headerName:" ()",width:()=>200},{type:Ze.Compute,sortable:!0,description:"",field:"istochnik",compute:e=>e.istochnik||"Unset",headerName:"",width:()=>150},{type:Ze.Compute,description:" ",sortable:!1,field:"status",headerName:"",compute:async({id:e})=>await Dr.dealViewService.readStatusByApartmentId(e),width:()=>150},{type:Ze.Compute,isVisible:({payload:{permissions:e}})=>e.hasFioPermission,description:", ,  ",sortable:!1,field:"fio",compute:async({contact_id:e})=>{const t=await Dr.contactViewService.tryRead(e);return t?t.fio:"Unset"},headerName:".. ",width:()=>200},{type:Ze.Compute,isVisible:({payload:{permissions:e}})=>e.hasPreviewModeDisabled,sortable:!1,field:"telefon",description:"  ",element:({id:e,contact_id:t})=>ae(Qe,{payload:e,condition:e=>Dr.permissionRequestService.getOwnerContactPermissionByApartmentId(e),Loading:"",Else:"",children:ae(Ue,{payload:t,children:async e=>{const t=await Dr.contactViewService.tryRead(e);return t?t.telefon:"Unset"}})}),headerName:" ",width:()=>200},{type:Ze.Compute,field:"$createdAt",description:"  ",headerName:" ",compute:({$createdAt:e})=>r(e).format("DD/MM/YYYY"),sortable:!0,width:()=>200},{type:Ze.Compute,field:"$updatedAt",description:"  ",sortable:!0,headerName:" ",compute:({$updatedAt:e})=>r(e).format("DD/MM/YYYY"),width:()=>200},{type:Ze.Action,headerName:"",sortable:!1,width:()=>100}],rn=[{label:"",isDisabled:(e,{permissions:t})=>!t.hasApartmentUpdatePermission,action:"edit-action",icon:et},{label:" ",action:"toggle-archive",icon:tt,isVisible:({system_is_archive:e})=>!e},{label:" ",action:"toggle-archive",icon:at,isVisible:({system_is_archive:e})=>!!e},{label:" ",isVisible:({accessLevel:e})=>5===e,action:"copy-action",icon:it},{label:"",action:"remove-action",isVisible:({accessLevel:e})=>5===e,icon:ot}],nn=({name:e,columns:t,title:a,isVisible:o,inputFormatterAllowed:l,inputFormatterTemplate:r})=>({type:i.Group,isVisible:o,columns:t,fields:[{type:i.Component,fieldRightMargin:"0",fieldBottomMargin:"0",element:()=>ae(le,{variant:"caption",sx:{opacity:.8},children:a})},{type:i.Text,sx:{"& .MuiIconButton-root":{pointerEvents:"none"}},isInvalid:t=>t["".concat(e,"_ot")]&&t["".concat(e,"_do")]&&parseInt(t["".concat(e,"_ot")])>parseInt(t["".concat(e,"_do")])?"    ":null,title:"",columns:"6",outlined:!1,inputFormatterAllowed:l,inputFormatterTemplate:r,name:"".concat(e,"_ot"),leadingIcon:()=>ae(he,{sx:{height:20,width:20,display:"flex",alignItems:"center",justifyContent:"center"},children:ae(le,{textTransform:"lowercase",variant:"caption",children:""})})},{type:i.Text,sx:{"& .MuiIconButton-root":{pointerEvents:"none"}},isInvalid:t=>t["".concat(e,"_ot")]&&t["".concat(e,"_do")]&&parseInt(t["".concat(e,"_ot")])>parseInt(t["".concat(e,"_do")])?"    ":null,title:"",columns:"6",outlined:!1,inputFormatterAllowed:l,inputFormatterTemplate:r,name:"".concat(e,"_do"),leadingIcon:()=>ae(he,{sx:{height:20,width:20,display:"flex",alignItems:"center",justifyContent:"center"},children:ae(le,{textTransform:"lowercase",variant:"caption",children:""})})}]}),sn=[{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,"/"),t},fields:[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ( )"})},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"   "})]}]},{type:i.Fragment,isVisible:e=>!lt(e.kategoriya_obekta,"")&&lt(e.podkategoriya_obekta,"/"),fields:[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    (/)"})},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"   "})]}]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&!lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,""),t},fields:[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ()"})},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"  "})]}]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&!lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,""),t},fields:[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ()"})},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"   "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostevogo_doma",title:"   "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_dopolnitelnoj_pristrojki",title:"   "})]}]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,""),t},fields:[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ( )"})},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"  "})]}]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,""),t},fields:[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ( )"})},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"   "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostevogo_doma",title:"   "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_dopolnitelnoj_pristrojki",title:"   "})]}]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,"/"),t},fields:[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ( /)"})},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"   "})]}]}],dn=[{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,"/"),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Group,fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ( )"})},{type:i.Items,columns:"6",outlined:!1,name:"vnutri_est",title:" :",itemList:["","",""," ",""," ","","","",""," ","","","",""," "," ","","","  "," ","",""," "]},{type:i.Items,columns:"6",outlined:!1,name:"ryadom_est",title:" :",itemList:[" ",""," ",""," "," ",""," ","","","","/","","","","",""," ","/ "]}]}]}},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,""),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Group,fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ( )"})},{type:i.Items,columns:"6",outlined:!1,name:"vnutri_est",title:" :",itemList:[""," ","","",""," ",""," ","","","",""," ","  "," ","",""," ","","","","","","  ","",""," "]},{type:i.Items,columns:"6",outlined:!1,name:"ryadom_est",title:" :",itemList:[" ",""," "," "," ",""," ",""," ","","","","/","","","","",""," ","/ "]}]}]}},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,""),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Group,fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ( )"})},{type:i.Items,columns:"6",outlined:!1,name:"vnutri_est",title:" :",itemList:["","",""," ",""," ","","","",""," "," "," "," ","2   ","","",""," "," ","","","","",""," ","  "," ","",""]},{type:i.Items,columns:"6",outlined:!1,name:"ryadom_est",title:" :",itemList:[" ",""," ",""," "," ",""," ","","","","/","","","","",""," ","/ "]}]}]}},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,"/"),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Group,fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ( /)"})},{type:i.Items,columns:"6",outlined:!1,name:"vnutri_est",title:" :",itemList:["","","","","","",""," ","",""," "]},{type:i.Items,columns:"6",outlined:!1,name:"ryadom_est",title:" :",itemList:[" ",""," ",""," "," ",""," ","","","","/","","","","",""," ","/ "]}]}]}}],mn=[{type:i.Fragment,isVisible:e=>(!lt(e.podkategoriya_obekta,"/")||!lt(e.kategoriya_obekta,""))&&((!lt(e.podkategoriya_obekta,"")||!lt(e.kategoriya_obekta,""))&&((!lt(e.podkategoriya_obekta,"")||!lt(e.kategoriya_obekta,""))&&lt(e.kategoriya_obekta,""))),child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"  ( )"})},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:" "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_obekta",title:" ",itemList:[" ",""," ",""," /"]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_remonta",title:" ",itemList:["","","",""," "," ",""," "]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:""}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip_stroeniya",title:" ",itemList:["","","-","","","",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"-"}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:" "}),nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:""}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"balkon",title:"",itemList:["",""," ","2x6","2  ",""]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"parkovka",title:"",itemList:["","","","",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:" "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"  "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel",title:"",itemList:["","","2  "," "]},{type:i.Combo,sx:{mt:2},columns:"3",outlined:!1,name:"mebel",title:"",itemList:["","",""," + "]},{type:i.Items,columns:"3",outlined:!1,name:"voda",title:"",itemList:[" ","","  "," "," "," "]},{type:i.Items,columns:"3",outlined:!1,name:"gaz",title:"",itemList:["","","  ",""]},{type:i.Combo,columns:"3",outlined:!1,name:"lift_kommercziya",title:"",itemList:["",""]},{type:i.Items,columns:"3",outlined:!1,name:"sistema_otopleniya",title:" ",itemList:[""," ","",""," ","  ","  "]},{type:i.Combo,columns:"3",outlined:!1,name:"elektrichestvo",title:"",itemList:["","  ",""]},{type:i.Combo,columns:"3",outlined:!1,name:"kanalizacziya",title:"",itemList:["",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"   ()"}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"mestopolozhenie_obekta",title:" ",itemList:[" "," ","  "," "," /"," ","  ","  "]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:" "}),{type:i.Items,columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:" ",itemList:["","",""]},{type:i.Items,columns:"3",outlined:!1,name:"vid_liczenzii",title:" ",itemList:["",""]},{type:i.Component,sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>ae(rt,{variant:"standard",label:" ",items:[{label:"",value:""},{label:"",value:""},{label:"/",value:"/"},{label:". ",value:". "},{label:" ",value:" "},{label:"  ",value:"  "},{label:"/",value:"/"},{label:"",value:""},{label:" ",value:" "},{label:"//",value:"//"},{label:" ",value:" "},{label:"  ",value:"  ",child:[{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""}]},{label:" ",value:" ",child:[{label:"",value:""},{label:" ",value:" "},{label:" ",value:" "}]},{label:" ",value:" "},{label:" ",value:" "}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})}]}},{type:i.Fragment,isVisible:e=>{if(lt(e.podkategoriya_obekta,"")&&lt(e.kategoriya_obekta,""))return!1;let t=!1;return t=t||lt(e.podkategoriya_obekta,""),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"  ()"})},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:" "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_remonta-kvartiry",title:" ",itemList:["","","",""," "," ",""," "]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:" "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip-stroeniya_kvartiry",title:" ",itemList:["","","","","","","-"]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:""}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"balkon_kvartira",title:"",itemList:["",""," ","2x6","2  ",""]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip_planirovki",title:" ",itemList:["","","-","","","","","","","",""]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"lift_kvartira",title:"",itemList:["","",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:""}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel_kvartira",title:"",itemList:["","","2  "]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"zhilaya_ploshhad",title:"  "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"mebel_kvartira",title:"",itemList:["","",""," + "]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:" "}),nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:" "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_kvartiry",title:" ",itemList:["","2  "," "]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:" + "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"gaz",title:"",itemList:["","","  ",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"   ()"}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"vid_iz_okna",title:"  ",itemList:[" "," "," "]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"parkovka_kvartira",title:"",itemList:["","",""," ",""]}]}},{type:i.Fragment,isVisible:e=>{if(lt(e.podkategoriya_obekta,"")&&lt(e.kategoriya_obekta,""))return!1;let t=!1;return t=t||lt(e.podkategoriya_obekta,""),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"  ()"})},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:" "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_doma",title:" ",itemList:[" ",""," ",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:" "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip-stroeniya_doma",title:" ",itemList:["","","-","","","",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:""}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"balkon_doma",title:"",itemList:["",""," ","2x6","2  ",""]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip_planirovki",title:" ",itemList:["","","-","","","",""]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"bassejn",title:"",itemList:["","",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_doma",title:"  "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel_doma",title:"",itemList:["","","2  "," "]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"-"}),nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:" "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:" "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"voda_dom",title:"",itemList:[" ","","  "," "," "," "]},{type:i.Combo,sx:{mt:2},columns:"3",outlined:!1,name:"lift_dom",title:"",itemList:["",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:" + "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_dom",title:" ",itemList:[""," ","",""," ","  ","  "]},{type:i.Combo,sx:{mt:2},columns:"3",outlined:!1,name:"mebel_dom",title:"",itemList:["","",""," + "]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"   ()"}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"gaz_dom",title:"",itemList:["","","  ",""]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_dom",title:" ",itemList:["","",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:" "}),{type:i.Combo,sx:{mt:2},columns:"3",outlined:!1,name:"elektrichestvo_dom",title:"",itemList:["","  ",""]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"vid_iz_okna_dom",title:"  ",itemList:[" "," "," "]},{type:i.Items,columns:"3",outlined:!1,name:"garazh",title:"",itemList:["",""," ",""]},{type:i.Combo,columns:"3",outlined:!1,name:"kanalizacziya_dom",title:"",itemList:["",""]},{type:i.Items,columns:"3",outlined:!1,name:"raspolozhenie_doma",title:" ",itemList:[" ","  ","  "]},{type:i.Items,columns:"3",outlined:!1,name:"mestopolozhenie-obekta_dom",title:" ",itemList:[" "," ","  "," "," /"," ","  ","  "]}]}},{type:i.Fragment,isVisible:e=>!lt(e.kategoriya_obekta,"")&&lt(e.podkategoriya_obekta,"/"),child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"  (/)"})},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:" "}),{type:i.Component,sx:{mb:2,pr:1},columns:"3",name:"naznachenie-obekta-zemlya_uchastok",element:e=>ae(rt,{variant:"standard",label:" ",items:[{label:" ",value:" "},{label:"",value:""},{label:" ",value:" "},{label:" ",value:" "},{label:"",value:""},{label:"/",value:"/"},{label:" ",value:" "},{label:"",value:""},{label:"",value:""},{label:"  ",value:"  "},{label:"",value:""},{label:"",value:""}],value:e["naznachenie-obekta_zemlya"],onChange:t=>e.onChange({"naznachenie-obekta_zemlya":t})})},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip_zemli_uchastka",title:" /",itemList:["",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:""}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie-obekta_zemlya",title:" ",itemList:[" /",""," "]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"-"}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:" "}),nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:""}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie-remonta_zemlya",title:" ",itemList:["","","",""," "," ",""," "]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"parkovka_zemlya",title:"",itemList:["","","","",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"   ()"}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"  "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"voda_zemlya",title:"",itemList:[" ","","  "," "," "]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"mestopolozhenie-obekta_zemlya",title:" ",itemList:[" "," ","  "," "," /"," ","  ","  "]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_goroda",title:"   ()"}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_zemlya",title:" ",itemList:[""," ","",""," ","  ","  "]},{type:i.Items,columns:"3",outlined:!1,name:"podezdnye_puti",title:" ",itemList:[" "," ",""]},{type:i.Items,columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_zemlya",title:" ",itemList:["","",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:" "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"elektrichestvo_zemlya",title:"",itemList:["","  ",""]},{type:i.Items,columns:"3",outlined:!1,name:"gaz_zemlya",title:"",itemList:["","","  ",""]},{type:i.Combo,columns:"3",outlined:!1,name:"kanalizacziya_zemlya",title:"",itemList:["",""]}]}},{type:i.Fragment,isVisible:e=>!(!lt(e.kategoriya_obekta,"")||!lt(e.podkategoriya_obekta,"")),child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"  ( )"})},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:" "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_remonta-kvartiry",title:" ",itemList:["","","",""," "," ",""," "]},{type:i.Component,sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>ae(rt,{variant:"standard",label:" ",items:[{label:"",value:""},{label:"",value:""},{label:"/",value:"/"},{label:". ",value:". "},{label:" ",value:" "},{label:"  ",value:"  "},{label:"/",value:"/"},{label:"",value:""},{label:" ",value:" "},{label:"//",value:"//"},{label:" ",value:" "},{label:"  ",value:"  ",child:[{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""}]},{label:" ",value:" ",child:[{label:"",value:""},{label:" ",value:" "},{label:" ",value:" "}]},{label:" ",value:" "},{label:" ",value:" "}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip-stroeniya_kvartiry",title:" ",itemList:["","","","","","","-"]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:""}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"balkon_kvartira",title:"",itemList:["",""," ","2x6","2  ",""]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip_planirovki",title:" ",itemList:["","","-","","","","","","","",""]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"lift_kvartira",title:"",itemList:["","",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:""}),nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:" "}),{type:i.Complete,columns:"3",outlined:!1,name:"nazvanie_zhk",title:" ",tip:[" ",' "Greenwich"',' "OzMahal"',' "Elysium"',' "Binkat"',' "Brooklyn"',' "Assalom Havo"',' "Istanbul City"']},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"-"}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"  "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel_kvartira",title:"",itemList:["","","2  "]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"parkovka_kvartira",title:"",itemList:["","",""," ",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"zhilaya_ploshhad",title:"  "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"mebel_kvartira",title:"",itemList:["","",""," + "]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:" "}),nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:" "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_kvartiry",title:" ",itemList:["","2  "," "]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"vid_iz_okna",title:"  ",itemList:[" "," "," "]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:" + "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"gaz",title:"",itemList:["","","  ",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"   ()"}),{type:i.Items,columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:" ",itemList:["","",""]}]}},{type:i.Fragment,isVisible:e=>!(!lt(e.kategoriya_obekta,"")||!lt(e.podkategoriya_obekta,"")),child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"  ( )"})},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:" "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_doma",title:" ",itemList:[" ",""," ",""]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"mestopolozhenie-obekta_dom",title:" ",itemList:[" "," ","  "," "," /"," ","  ","  "]},{type:i.Component,sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>ae(rt,{variant:"standard",label:" ",items:[{label:"",value:""},{label:"",value:""},{label:"/",value:"/"},{label:". ",value:". "},{label:" ",value:" "},{label:"  ",value:"  "},{label:"/",value:"/"},{label:"",value:""},{label:" ",value:" "},{label:"//",value:"//"},{label:" ",value:" "},{label:"  ",value:"  ",child:[{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""}]},{label:" ",value:" ",child:[{label:"",value:""},{label:" ",value:" "},{label:" ",value:" "}]},{label:" ",value:" "},{label:" ",value:" "}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:""}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_remonta",title:" ",itemList:["","","",""," "," ",""," "]},{type:i.Items,columns:"3",outlined:!1,name:"raspolozhenie_obekta",title:" ",itemList:[" -","  ","  ","  ","  ","  "," "," "]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip-stroeniya_doma",title:" ",itemList:["","","-","","","",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_doma",title:"  "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"raspolozhenie_doma",title:" ",itemList:[" ","  ","  "]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip_planirovki",title:" ",itemList:["","","-","","","",""]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"bassejn",title:"",itemList:["","",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:" "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel_doma",title:"",itemList:["","","2  "," "]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"-"}),nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:" "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"voda_dom",title:"",itemList:[" ","","  "," "," "," "]},{type:i.Combo,sx:{mt:2},columns:"3",outlined:!1,name:"lift_dom",title:"",itemList:["",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:" + "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_dom",title:" ",itemList:[""," ","",""," ","  ","  "]},{type:i.Combo,sx:{mt:2},columns:"3",outlined:!1,name:"mebel_dom",title:"",itemList:["","",""," + "]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"   ()"}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"gaz_dom",title:"",itemList:["","","  ",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:" "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:" "}),{type:i.Combo,sx:{mt:2},columns:"3",outlined:!1,name:"elektrichestvo_dom",title:"",itemList:["","  ",""]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"vid_iz_okna_dom",title:"  ",itemList:[" "," "," "]},{type:i.Items,columns:"3",outlined:!1,name:"garazh",title:"",itemList:["",""," ",""]},{type:i.Combo,columns:"3",outlined:!1,name:"kanalizacziya_dom",title:"",itemList:["",""]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"balkon_doma",title:"",itemList:["",""," ","2x6","2  ",""]},{type:i.Items,columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_dom",title:" ",itemList:["","",""]}]}},{type:i.Fragment,isVisible:e=>!(!lt(e.kategoriya_obekta,"")||!lt(e.podkategoriya_obekta,"/")),child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"  ( /)"})},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:" "}),{type:i.Component,sx:{mt:2,mb:2,pr:1},columns:"3",name:"naznachenie-obekta-zemlya_uchastok",element:e=>ae(rt,{variant:"standard",label:" ",items:[{label:" ",value:" "},{label:"",value:""},{label:" ",value:" "},{label:" ",value:" "},{label:"",value:""},{label:"/",value:"/"},{label:" ",value:" "},{label:"",value:""},{label:"",value:""},{label:"  ",value:"  "},{label:"",value:""},{label:"",value:""}],value:e["naznachenie-obekta_zemlya"],onChange:t=>e.onChange({"naznachenie-obekta_zemlya":t})})},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip_zemli_uchastka",title:" /",itemList:["",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:""}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie-obekta_zemlya",title:" ",itemList:[" /",""," "]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"-"}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:" "}),nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:""}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie-remonta_zemlya",title:" ",itemList:["","","",""," "," ",""," "]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"parkovka_zemlya",title:"",itemList:["","","","",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"   ()"}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"  "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"voda_zemlya",title:"",itemList:[" ","","  "," "," "]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"mestopolozhenie-obekta_zemlya",title:" ",itemList:[" "," ","  "," "," /"," ","  ","  "]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_goroda",title:"   ()"}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_zemlya",title:" ",itemList:[""," ","",""," ","  ","  "]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:" "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"elektrichestvo_zemlya",title:"",itemList:["","  ",""]},{type:i.Items,columns:"3",outlined:!1,name:"podezdnye_puti",title:" ",itemList:[" "," ",""]},{type:i.Items,columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_zemlya",title:" ",itemList:["","",""]},{type:i.Items,columns:"3",outlined:!1,name:"gaz_zemlya",title:"",itemList:["","","  ",""]},{type:i.Combo,columns:"3",outlined:!1,name:"kanalizacziya_zemlya",title:"",itemList:["",""]}]}}],cn=[{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&!lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,""),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Group,fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ()"})},{type:i.Items,columns:"6",outlined:!1,name:"vnutri_est",title:" :",itemList:[""," ","","",""," ",""," ","","","",""," ","","","","","","  ",""]},{type:i.Items,columns:"6",outlined:!1,name:"ryadom_est",title:" :",itemList:[" ",""," "," "," ",""," ",""," ","","","","/","","","","",""," "]}]}]}},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&!lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,""),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Group,fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ()"})},{type:i.Items,columns:"6",outlined:!1,name:"vnutri_est",title:" :",itemList:["","",""," ",""," ","","","",""," ","","","","",""," "," "," "," ","2   ","","",""," "]},{type:i.Items,columns:"6",outlined:!1,name:"ryadom_est",title:" :",itemList:[" ",""," ",""," "," ",""," ","","","","/","","","","",""," "]}]}]}},{type:i.Fragment,isVisible:e=>{let t=!1;return t=t||lt(e.podkategoriya_obekta,"/"),t=t&&!lt(e.kategoriya_obekta,""),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Group,fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    (/)"})},{type:i.Items,columns:"6",outlined:!1,name:"vnutri_est",title:" :",itemList:["","","","","","",""," ","",""," "]},{type:i.Items,columns:"6",outlined:!1,name:"ryadom_est",title:" :",itemList:[" ",""," ",""," "," ",""," ","","","","/","","","","",""," ","/ "]}]}]}}],un=[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:" "})},{type:i.Text,outlined:!1,name:"zagolovok",title:"",placeholder:" "},{type:i.Fragment,isVisible:e=>lt(e.kategoriya_obekta,""),fields:[{type:i.Combo,outlined:!1,columns:"4",name:"kategoriya_obekta",title:" ",itemList:["","",""]},{type:i.Items,outlined:!1,columns:"4",name:"prodazha",title:"",itemList:[" ",""," ",""]},{type:i.Items,outlined:!1,columns:"4",name:"arenda",title:"",itemList:["","",""]},{type:i.Combo,outlined:!1,columns:"4",name:"podkategoriya_obekta",title:" ",isVisible:e=>lt(e.kategoriya_obekta,""),itemList:()=>["","","/","",""]},{type:i.Items,isVisible:e=>{if(lt(e.kategoriya_obekta,"")){if(lt(e.podkategoriya_obekta,""))return!1;if(lt(e.podkategoriya_obekta,"/"))return!1}return!0},columns:"4",outlined:!1,name:"raspolozhenie_obekta",title:" ",itemList:[" -","  ","  ","  ","  ","  "," "," "]},{type:i.Combo,isVisible:e=>!(!lt(e.kategoriya_obekta,"")||!lt(e.podkategoriya_obekta,""))||!lt(e.podkategoriya_obekta,""),columns:"4",outlined:!1,name:"istochnik",title:"",itemList:[" "," "," ",""," ","  ","OLX","Facebook","Instagram","Telegram","",""]},{type:i.Combo,isVisible:e=>{let t=!1;return t=t||lt(e.podkategoriya_obekta,""),t},columns:"4",outlined:!1,name:"vid_obekta",title:" ",itemList:["","","",""," ",""]},{type:i.Items,isVisible:e=>!(!lt(e.kategoriya_obekta,"")||!lt(e.podkategoriya_obekta,"/")),columns:"4",outlined:!1,name:"vid_liczenzii",title:" ",itemList:["",""]}]},{type:i.Fragment,isVisible:e=>!lt(e.kategoriya_obekta,""),fields:[{type:i.Combo,outlined:!1,columns:"4",name:"kategoriya_obekta",title:" ",itemList:["","",""]},{type:i.Items,outlined:!1,columns:"4",name:"prodazha",title:"",itemList:[" ",""," ",""]},{type:i.Items,outlined:!1,columns:"4",name:"arenda",title:"",itemList:["","",""]},{type:i.Combo,outlined:!1,columns:"4",name:"podkategoriya_obekta",title:" ",isVisible:e=>!lt(e.kategoriya_obekta,""),itemList:()=>["","","/"]},{type:i.Combo,columns:"4",outlined:!1,name:"istochnik",title:"",itemList:[" "," "," ",""," ","  ","OLX","Facebook","Instagram","Telegram","",""]},{type:i.Complete,isVisible:e=>!!lt(e.podkategoriya_obekta,"")&&!lt(e.kategoriya_obekta,""),columns:"4",outlined:!1,name:"nazvanie_zhk",title:" ",tip:[" ",' "Greenwich"',' "OzMahal"',' "Elysium"',' "Binkat"',' "Brooklyn"',' "Assalom Havo"',' "Istanbul City"']},{type:i.Combo,isVisible:e=>{let t=!1;return t=t||lt(e.podkategoriya_obekta,""),t},columns:"4",outlined:!1,name:"vid_obekta",title:" ",itemList:["","","",""," ",""]},{type:i.Items,isVisible:e=>{let t=!1;return t=t||lt(e.kategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,"/"),t},columns:"4",outlined:!1,name:"raspolozhenie_obekta",title:" ",itemList:[" -","  ","  ","  ","  ","  "," "," "]},{type:i.Items,isVisible:e=>{let t=!1;return t=t||lt(e.podkategoriya_obekta,"/"),t},columns:"4",outlined:!1,name:"vid_liczenzii",title:" ",itemList:["",""]}]}]},...mn,...cn,...dn,...sn];window.apartment_filters=un;const pn=()=>nt(Dr.apartmentViewService.paginate,{onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1),fallback:Dr.errorService.handleGlobalError}),yn=jr()({dialog_wrapper:{width:"100%",maxwidth:"400px",boxSizing:"border-box"},dialog:{"&:first-of-type":{padding:0},width:"100%",boxSizing:"border-box"}}),hn=({children:e,disabled:t,invalid:a,dividers:i=!1,canCancel:o=!0,noSave:l=!1,onAccept:r=(()=>console.log("accept")),onDismiss:n=(()=>console.log("dismiss")),...s})=>{const{classes:d}=yn();return ae(ct,{...s,className:d.dialog_wrapper,children:[ae(st,{dividers:i,className:d.dialog,children:e}),ae(dt,{children:[!l&&ae(mt,{disabled:t||a,color:"primary",onClick:r,children:"OK"}),o&&ae(mt,{disabled:t,color:"primary",onClick:n,children:""})]})]})},bn=jr()(((e,t,a)=>({inactive:{opacity:.5},container:{boxSizing:"border-box",width:"400px",height:340},list:{boxSizing:"border-box",width:"100%",["& > .".concat(a.item,":nth-of-type(2n)")]:{background:oe(e.palette.getContrastText(e.palette.background.paper),.04)}},item:{"& .MuiListItemText-root > .MuiTypography-root":{width:"100%",overflow:"hidden",textOverflow:"ellipsis"}},item_right_side:{display:"flex",alignItems:"center",gap:"5px"}}))),_n=({columns:e,storageKey:t})=>{const{classes:a}=bn(),[i,o]=se.useState(!1),l=se.useMemo((()=>ut("".concat(t,"_v1"))),[]),[r,n]=se.useState((()=>{let t=l.getValue();return t||(t=e.filter((e=>e.field)).filter((e=>e.type!==Ze.Action)).map((e=>({field:e.field,show:!0,displayName:e.fullName||e.headerName||String(e.field)})))),t})),s=se.useMemo((()=>{const t=r.filter((({show:e})=>e)).map((({field:t})=>e.find((e=>e.field===t)))).filter((e=>e)),a=e.find((({type:e})=>e===Ze.Action));return a&&t.push(a),t}),[]),d=()=>{l.setValue(r),T()};return{open:i,render:()=>ae(hn,{open:i,onAccept:d,onDismiss:()=>o(!1),children:ae(he,{className:a.container,children:ae(ge,{className:a.list,disablePadding:!0,children:r.map(((e,t)=>ae(Ee,{className:a.item,children:[ae(xe,{primary:e.displayName}),ae(he,{className:a.item_right_side,children:[ae(pt,{onClick:()=>(e=>{const t=r.findIndex((t=>t.field===e));0!==t&&n((e=>{const a=e[t];return e[t]=e[t-1],e[t-1]=a,[...e]}))})(e.field),disabled:0==t||!e.show,children:ae(yt,{})}),ae(pt,{onClick:()=>(e=>{const t=r.findIndex((t=>t.field===e));t!==r.length&&n((e=>{const a=e[t];return e[t]=e[t+1],e[t+1]=a,[...e]}))})(e.field),disabled:t==r.length-1||!e.show,children:ae(ht,{})}),ae(bt,{checked:e.show,onClick:()=>{return t=e.field,n((e=>e.map((e=>e.field===t?{...e,show:!e.show}:e))));var t}})]})]},t)))})})}),columns:s,pickColumns:()=>o(!0)}},vn=()=>window.innerHeight-70,fn=()=>window.innerHeight-70,gn=()=>window.innerHeight-70,kn=()=>window.innerHeight-70,wn=[{id:"common",element:({payload:e})=>{const t=_t(Dr.apartmentViewService.reloadSubject),{render:a,pickColumns:i,columns:o}=_n({columns:ln,storageKey:"apartment_columns"}),{listProps:l}=vt(Dr.routerService.locationState,{fallback:Dr.errorService.handleGlobalError}),r=pn();return ae(Le,{children:[ae(ft,{withSearch:!0,withSingleSort:!0,noInitialFilters:!0,fetchDebounce:so,reloadSubject:t,title:" ",filterLabel:"",heightRequest:fn,rowActions:rn,actions:an,filters:un,columns:o,handler:r,onRowAction:async(e,a)=>{Dr.layoutService.setAppbarLoader(!0);try{if("remove-action"===e&&(await Dr.apartmentViewService.remove(a.id),t.next()),"edit-action"===e&&Dr.routerService.push("/apartment_edit/".concat(a.id)),"copy-action"===e){const e=await Dr.apartmentViewService.read(a.id);await Dr.apartmentViewService.create(e),t.next()}"toggle-archive"===e&&(await Dr.apartmentViewService.toggleArchive(a.id),t.next())}finally{Dr.layoutService.setAppbarLoader(!1)}},onRowClick:async e=>{(await Dr.permissionService.getPermissions()).hasApartmentViewPermission&&Dr.routerService.push("/apartment_view/".concat(e.id))},onAction:e=>{"add-action"===e&&Dr.routerService.push("/apartment/create"),"column-setup-action"===e&&i()},selectionMode:gt.Multiple,payload:e,...l}),a()]})},isActive:e=>Ur(["/apartment"],e),isAvailable:()=>!1},{id:"rent",element:({payload:e})=>{const t=_t(Dr.apartmentViewService.reloadSubject),{render:a,columns:i,pickColumns:o}=_n({columns:ln,storageKey:"apartment_columns"});console.log({columns:i}),console.log({list_columns:ln});const{listProps:l}=vt(Dr.routerService.locationState,{fallback:Dr.errorService.handleGlobalError}),r=pn();return ae(Le,{children:[ae(ft,{withSearch:!0,withSingleSort:!0,noInitialFilters:!0,fetchDebounce:so,reloadSubject:t,title:" ",filterLabel:"",heightRequest:gn,rowActions:rn,actions:an,filters:un,columns:i,handler:r,onRowAction:async(e,a)=>{Dr.layoutService.setAppbarLoader(!0);try{if("remove-action"===e&&(await Dr.apartmentViewService.remove(a.id),t.next()),"edit-action"===e&&Dr.routerService.push("/apartment_edit/".concat(a.id)),"copy-action"===e){const e=await Dr.apartmentViewService.read(a.id);await Dr.apartmentViewService.create(e),t.next()}"toggle-archive"===e&&(await Dr.apartmentViewService.toggleArchive(a.id),t.next())}finally{Dr.layoutService.setAppbarLoader(!1)}},onRowClick:async e=>{(await Dr.permissionService.getPermissions()).hasApartmentViewPermission&&Dr.routerService.push("/apartment_view/".concat(e.id))},onAction:e=>{"add-action"===e&&Dr.routerService.push("/apartment/create"),"column-setup-action"===e&&o()},selectionMode:gt.Multiple,payload:()=>({...e,_rent:!0}),...l}),a()]})},isActive:e=>Ur(["/apartment_rent"],e),isAvailable:()=>!1},{id:"sell",element:({payload:e})=>{const t=_t(Dr.apartmentViewService.reloadSubject),{render:a,pickColumns:i,columns:o}=_n({columns:ln,storageKey:"apartment_columns"}),{listProps:l}=vt(Dr.routerService.locationState,{fallback:Dr.errorService.handleGlobalError}),r=pn();return ae(Le,{children:[ae(ft,{withSearch:!0,withSingleSort:!0,noInitialFilters:!0,fetchDebounce:so,reloadSubject:t,title:" ",filterLabel:"",heightRequest:kn,rowActions:rn,actions:an,filters:un,columns:o,handler:r,onRowAction:async(e,a)=>{Dr.layoutService.setAppbarLoader(!0);try{if("remove-action"===e&&(await Dr.apartmentViewService.remove(a.id),t.next()),"edit-action"===e&&Dr.routerService.push("/apartment_edit/".concat(a.id)),"copy-action"===e){const e=await Dr.apartmentViewService.read(a.id);await Dr.apartmentViewService.create(e),t.next()}"toggle-archive"===e&&(await Dr.apartmentViewService.toggleArchive(a.id),t.next())}finally{Dr.layoutService.setAppbarLoader(!1)}},onRowClick:async e=>{(await Dr.permissionService.getPermissions()).hasApartmentViewPermission&&Dr.routerService.push("/apartment_view/".concat(e.id))},onAction:e=>{"add-action"===e&&Dr.routerService.push("/apartment/create"),"column-setup-action"===e&&i()},selectionMode:gt.Multiple,payload:()=>({...e,_sell:!0}),...l}),a()]})},isActive:e=>Ur(["/apartment_sell"],e),isAvailable:()=>!1},{id:"archive",element:({payload:e})=>{const t=_t(Dr.apartmentViewService.reloadSubject),{render:a,pickColumns:i,columns:o}=_n({columns:ln,storageKey:"apartment_columns"}),{listProps:l}=vt(Dr.routerService.locationState,{fallback:Dr.errorService.handleGlobalError}),r=pn();return ae(Le,{children:[ae(ft,{withSearch:!0,withSingleSort:!0,noInitialFilters:!0,fetchDebounce:so,reloadSubject:t,title:" ",filterLabel:"",heightRequest:vn,rowActions:rn,actions:an,filters:un,columns:o,handler:r,onRowAction:async(e,a)=>{Dr.layoutService.setAppbarLoader(!0);try{if("remove-action"===e&&(await Dr.apartmentViewService.remove(a.id),t.next()),"edit-action"===e&&Dr.routerService.push("/apartment_edit/".concat(a.id)),"copy-action"===e){const e=await Dr.apartmentViewService.read(a.id);await Dr.apartmentViewService.create(e),t.next()}"toggle-archive"===e&&(await Dr.apartmentViewService.toggleArchive(a.id),t.next())}finally{Dr.layoutService.setAppbarLoader(!1)}},onRowClick:async e=>{(await Dr.permissionService.getPermissions()).hasApartmentViewPermission&&Dr.routerService.push("/apartment_view/".concat(e.id))},onAction:e=>{"add-action"===e&&Dr.routerService.push("/apartment/create"),"column-setup-action"===e&&i()},selectionMode:gt.Multiple,payload:()=>({...e,_archive:!0}),...l}),a()]})},isActive:e=>Ur(["/apartment_archive"],e),isAvailable:()=>!1}],Sn=({addon_square_names:e,addon_square_values:t})=>{e=e||[],t=t||[];const a=[];for(let i=0;i!==e.length;i++)a.push({id:u(),title:e[i],number:t[i]});return a},zn=({addon_square_names:e,addon_square_values:t,readonly:a,onChange:o})=>{const[l,r]=se.useState((()=>Sn({addon_square_names:e,addon_square_values:t}))),n=wt({fields:[{type:i.Text,sx:{mt:-2},name:"title",title:"",isInvalid:({title:e})=>e?null:" "},{type:i.Text,name:"number",title:"",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isInvalid:({number:e})=>e?null:" "}]}),s=St({title:" ?",msg:" ,    ?"}),{resetWatcher:d}=zt((()=>{var e;o({addon_square_names:(e=l).length?e.map((({title:e})=>e)):null,addon_square_values:e.length?e.map((({number:e})=>e)):null})}),[l]);se.useEffect((()=>{const a=Sn({addon_square_names:e,addon_square_values:t});d(),r(a)}),[e,t]);return ae(be,{direction:"column",children:[ae(be,{direction:"row",alignItems:"center",justifyContent:"space-between",marginBottom:"20px",children:[ae(le,{variant:"h6",fontWeight:"bold",children:". "}),ae(mt,{disabled:a,onClick:()=>{n({title:" ",handler:{id:u(),title:"",number:""}}).then((e=>{e&&r((t=>[...t,e]))}))},variant:"contained",children:""})]}),ae(he,{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"10px"},children:l.map((e=>ae(xt,{id:"standard-read-only-input",label:e.title,value:e.number,onClick:()=>{var t;t={id:e.id,title:e.title,number:e.number},n({title:" ",handler:{id:t.id,title:t.title,number:t.number}}).then((e=>{e&&(r((t=>{const a=t.findIndex((t=>t.id===e.id));return t[a]=e,[...t]})),console.log(l))}))},InputProps:{readOnly:!0,endAdornment:ae(Ft,{position:"end",children:ae(pt,{disabled:a,edge:"end",onClick:t=>{var a;t.preventDefault(),t.stopPropagation(),a=e.id,s().then((e=>{e&&r((e=>e.filter((e=>e.id!==a))))}))},children:ae(ot,{fill:"white",style:{cursor:"pointer",color:"grey"}})})})},variant:"standard"})))})]})},xn=({images:e,onChange:t})=>{const{handleLoadStart:a,handleLoadEnd:i,loading:o}=de({history:Dr.routerService,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1)});return ae(At,{children:ae(_e,{disabled:o,sx:{borderRadius:"20px"},startIcon:ae(Tt,{}),variant:"contained",onClick:async()=>{let o=!0;a();try{const a=await Ct("*");if(!a)return;const i=Vt(e)||[],o=await Promise.all(a.map((async e=>Dr.appwriteService.uploadFile(e)))),l=[...i,...o];t(l)}catch(l){o=!1,Dr.alertService.notify(xr(l))}finally{i(o)}},children:" "})})},Fn=({payload:e,context:t})=>ae(be,{direction:"column",children:[ae(_e,{disabled:!t.hasChanged,variant:"contained",color:"info",sx:{height:48},onClick:e.beginSave,children:""}),ae(he,{sx:{paddingTop:"24px"}})]}),[Tn,An]=It(),[Cn,Vn]=It(),In=(e,t)=>new Promise(((a,i)=>{e.onload=()=>{const o=document.createElement("canvas");o.width=e.height,o.height=e.width;const l=o.getContext("2d");l?(l.translate(o.width/2,o.height/2),l.rotate(t*Math.PI/180),l.drawImage(e,-e.width/2,-e.height/2),o.toBlob((e=>{e?a(e):i("there's an error")}))):i("there's an error")},e.onerror=e=>{i("there's an error"),console.error(e)}}));const Ln=async(e,t)=>{try{const a=await(async(e,t)=>{const a=document.createElement("img"),i=document.createElement("img"),{watermark_file_id:o}=await Dr.settingsViewService.getValue(),l=o?await Dr.appwriteService.getImageURL(o):new URL("/watermark.png",window.origin);return i.src=l.toString(),i.crossOrigin="anonymous",a.src=e,a.crossOrigin="anonymous",Promise.resolve().then((()=>Promise.all([new Promise(((e,t)=>{i.addEventListener("load",(()=>e())),i.addEventListener("error",(()=>t()))})),new Promise(((e,t)=>{a.addEventListener("load",(()=>e())),a.addEventListener("error",(()=>t()))}))]))).then((()=>new Promise(((e,o)=>{const l=document.createElement("canvas");l.width=a.width,l.height=a.height;const r=l.getContext("2d");if(!r)return void o("there's an error");if(r.translate(l.width/2,l.height/2),r.drawImage(a,-a.width/2,-a.height/2),t){const e=.07*Math.min(a.height,a.width);r.lineWidth=.05*e,r.font="bold ".concat(e,"px Segoe UI, Arial, sans-serif"),r.fillStyle="white",r.strokeStyle="black",r.fillText(String(t||""),-1*a.width/2+10,a.height/2-10),r.strokeText(String(t||""),-1*a.width/2+10,a.height/2-10)}r.globalAlpha=1;const n=.3*Math.min(l.width/i.naturalWidth,l.height/i.naturalHeight),s=i.naturalWidth*n,d=i.naturalHeight*n;r.drawImage(i,-s/2,-d/2,s,d),l.toBlob((t=>{t?e(t):o("there's an error")}))}))))})(e,t);return a?URL.createObjectURL(a):null}catch(a){return null}},Mn=Ke.createLoader(96),Bn=[{action:"download-action",label:" "},{action:"open-action",label:"  ",isVisible:({accessLevel:e})=>5===e},{action:"rotate-left-action",icon:Dt,label:" ",isVisible:e=>!e.readonly},{action:"rotate-right-action",icon:jt,label:" ",isVisible:e=>!e.readonly},{action:"remove-action",isVisible:e=>!e.readonly,label:""}],Dn=jr()((e=>({square:{position:"relative"},dragHoverActive:{background:oe(e.palette.primary.main,.5)},dragHoverInactive:{background:"#ccc"},prev:{position:"absolute",margin:"auto",left:"0",top:"0",bottom:0,zIndex:"2 !important",color:e.palette.background.paper,width:"30%"},next:{position:"absolute",margin:"auto",right:"10px",top:"10px",bottom:"5px",zIndex:"2 !important",color:e.palette.background.paper,width:"30%"},action:{zIndex:"5 !important"},defaultIcon:{position:"absolute",right:10,bottom:10,height:35,width:35,fill:"orange",background:"white",borderRadius:"50%",padding:"1.5px",zIndex:"1"},"tss-nuqny4-root":{zIndex:"5 !important"}}))),jn=({dropSubject:e,className:t,readonly:a,image:i,images:o,payload:l,text:r,sx:n,onChange:s,onClick:d,onLoadStart:m,onLoadEnd:c,onMouseOver:u,drag:p})=>{const{classes:y}=Dn(),h=St({title:"?",msg:"   "}),[b,_]=se.useState(!1),[v,f]=se.useState(!1),[g,k]=se.useState(!1),w=_t(e),S=_t();se.useEffect((()=>()=>{S.next()}),[]),se.useEffect((()=>w.subscribe((()=>{k(!1)}))),[]);const[,z]=An(),[,x]=Vn(),{handleLoadStart:F,handleLoadEnd:T,loading:A}=de({history:Dr.routerService,onLoadStart:()=>{m&&m(),Dr.layoutService.setAppbarLoader(!0)},onLoadEnd:()=>{c&&c(),Dr.layoutService.setAppbarLoader(!1)}}),C=async()=>{let e=!0;F();try{const e=await async function(e,t){const a=await Dr.appwriteService.getImageURL(e),i=document.createElement("img");i.src=a,i.crossOrigin="anonymous";const o=await In(i,90);if(!o)return t;const l=t.indexOf(e),r=await Dr.appwriteService.tryReadFileName(e),n=await Dr.appwriteService.uploadBlob(o,r||o.type||"unknown.png");return t[l]=n,[...t]}(i,o);s(e)}catch(t){e=!1}finally{T(e)}},V=async()=>{let e=!0;F();try{const e=await async function(e,t){const a=await Dr.appwriteService.getImageURL(e),i=document.createElement("img");i.src=a,i.crossOrigin="anonymous",console.log(i.height),console.log(i.width);const o=await In(i,-90);if(!o)return t;const l=t.indexOf(e),r=await Dr.appwriteService.tryReadFileName(e),n=await Dr.appwriteService.uploadBlob(o,r||o.type||"unknown.png");return t[l]=n,[...t]}(i,o);s(e)}catch(t){e=!1}finally{T(e)}};return ae(he,{className:t,sx:n,onClick:()=>d&&d(i),children:ae(Lt,{draggable:p,onDragStart:()=>z(i),onDragOver:e=>{e.preventDefault(),x(i)},onDragLeave:()=>k(!1),onDragEnter:()=>k(!0),className:y.square,children:[0===o.indexOf(i)&&ae(Mt,{className:y.defaultIcon}),ae(he,{className:we({[y.dragHoverActive]:g,[y.dragHoverInactive]:!g}),component:"div",sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:()=>{v||_(!0)},onMouseLeave:()=>{v||_(!1)},children:[ae(Bt,{disabled:A,className:y.action,sx:{position:"absolute",top:10,left:10,transition:"opacity 150ms",opacity:b||u||v?1:0},payload:{...l,readonly:a},options:Bn,onAction:async e=>{if("download-action"===e&&(async()=>{const e=await Dr.appwriteService.getImageURL(i),t=await Ln(e,r);S.once((()=>{t&&URL.revokeObjectURL(t)})),je(t||e,"".concat(r,".png"))})(),"open-action"===e&&(async()=>{let e=!0;F();try{const e=await Dr.appwriteService.getImageURL(i);Y(e)}catch(t){e=!1,Dr.alertService.notify(xr(t))}finally{T(e)}})(),"remove-action"===e){await h().toPromise()&&await(()=>{const e=(Vt(o)||[]).filter((e=>e!==i));s(e.length?e:null)})()}"rotate-left-action"===e&&await V(),"rotate-right-action"===e&&await C()},onToggle:e=>{e&&_(!1),f(e)}}),ae(Ue,{Loader:Mn,payload:i,children:async e=>{if(!e)return ae(Je,{sx:{fontSize:96,fill:"white"}});const t=await Dr.appwriteService.getImageURL(e),a=await Ln(t,r);return S.once((()=>{a&&URL.revokeObjectURL(a)})),ae("img",{crossOrigin:"anonymous",loading:"lazy",alt:e,src:a||t,style:{objectFit:"contain",height:"100%",width:"100%",pointerEvents:"none"}})}})]})]})})},qn=jr()((e=>({root:{position:"fixed",padding:20,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"stretch",transform:"translate(-50%, -50%)",backgroundColor:e.palette.background.paper,borderRadius:5,gap:5,top:"50%",left:"50%",width:"calc(100vmin - 50px)",height:"calc(100vmin - 50px)",outline:"none"},content:{overflow:"hidden",padding:e.spacing(1),flex:1},container:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flex:1,overflow:"hidden",paddingTop:e.spacing(1)},title:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:15,color:e.palette.text.primary},submit:{marginTop:15},disabled:{opacity:.5,pointerEvents:"none"},indicatorTransparent:{height:6,background:e.palette.primary.main},tabRootTransparent:{minHeight:54,height:54},tabsRoot:{minHeight:54,height:54,marginLeft:"0 !important",marginRight:"0 !important"},prev:{position:"absolute",margin:"auto",left:"10px",top:"10px",bottom:"5px",zIndex:"2 !important",color:e.palette.background.paper,width:"30%"},next:{position:"absolute",margin:"auto",right:"10px",top:"10px",bottom:"5px",zIndex:"2 !important",color:e.palette.background.paper,width:"30%"},icon_border:{border:"1px solid black"}}))),Rn=({apartment_images:e,_fieldData:t,payload:a,readonly:i,onChange:o})=>{const[l]=An(),[r]=Vn(),n=Nt(e),s=Nt(l),d=Nt(r),{pickImage:m,render:c}=(({_fieldData:e,payload:t,onChange:a})=>{const[i,o]=se.useState(""),[l,r]=se.useState(!1),n=e.apartment_images.length,[s,d]=se.useState(0),[m,c]=se.useState(!1),[u,p]=se.useState(0),[y,h]=se.useState(!1);se.useEffect((()=>{var t;d((null==(t=e.apartment_images)?void 0:t.indexOf(i))||0)}),[i]);const{classes:b,cx:_}=qn(),v=()=>{u||(o(""),d(0),c(!1))},f=()=>{p((e=>e+1))},g=()=>{p((e=>e-1))},k=t=>{t.preventDefault(),t.stopPropagation(),o(e.apartment_images[s+1])},w=t=>{t.preventDefault(),t.stopPropagation(),o(e.apartment_images[s-1])};return{render:()=>ae(Et,{open:m,onClose:v,sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:ae("div",{className:b.root,onMouseEnter:()=>{r(!0)},onMouseLeave:()=>{r(!1)},onClick:()=>c(!1),children:ae("div",{className:b.container,children:[ae(ke,{className:b.prev,onClick:w,disabled:0===s,onMouseOver:()=>h(!0),onMouseLeave:()=>h(!1)}),ae(ke,{className:b.next,onClick:k,disabled:s===n-1,onMouseOver:()=>h(!0),onMouseLeave:()=>h(!1)}),ae(jn,{onLoadEnd:g,onLoadStart:f,className:b.content,images:e.apartment_images,text:"".concat(e.index),payload:t,onChange:a,image:i,readonly:!0,drag:!1,onMouseOver:y}),n>1&&ae(he,{sx:{position:"absolute",left:0,bottom:0,width:"100%",height:75,display:"flex",alignItems:"space-beetween",justifyContent:"center",transition:"opacity 150ms",opacity:l?1:0},children:ae(qt,{onClick:e=>{e.preventDefault(),e.stopPropagation()},steps:n,position:"static",activeStep:s,nextButton:ae(pt,{size:"small",sx:{ml:1},onClick:k,disabled:s===n-1,children:ae(Rt,{})}),backButton:ae(pt,{size:"small",sx:{mr:1},onClick:w,disabled:0===s,children:ae(Pt,{})}),sx:{height:"45px",backdropFilter:"blur(20px)",backgroundColor:"#00000012",borderRadius:"25px",zIndex:"1000"}})})]})})}),handleNext:k,handleBack:w,pickImage:e=>{o(e),c(!0)}}})({_fieldData:t,payload:a,apartment_images:e,onChange:e=>{o({apartment_images:e})},readonly:i}),u=_t();return ae(Le,{children:[ae(be,{gap:1,sx:{pointerEvents:"all"},flexWrap:"wrap",direction:"row",onDrop:()=>{(()=>{const{current:e}=n,{current:t}=s,{current:a}=d;if(!e)return;if(t==a)return;const i=e.indexOf(t),l=e.indexOf(a),r=e[i];e[i]=e[l],e[l]=r,o({apartment_images:e})})(),u.next()},children:null==e?void 0:e.map(((e,l)=>ae(jn,{sx:{width:175},image:e,images:t.apartment_images,onChange:e=>{o({apartment_images:e})},text:"".concat(t.index),dropSubject:u,drag:!i,payload:a,readonly:i,onClick:m},l)))}),c()]})},Pn=e=>ae(Tn,{initialState:"",children:ae(Cn,{initialState:"",children:ae(Rn,{...e})})}),En=({title:e,name:t,features:a})=>[{type:i.Text,hidden:!0,name:t,defaultValue:""},{type:i.Text,hidden:!0,name:"".concat(t,"_valyuta"),defaultValue:""},{type:i.Component,features:a,fieldBottomMargin:"1",fieldRightMargin:"1",element:a=>{const{_fieldData:i,onChange:o}=a,[l,r]=se.useState(i[t]||""),n=i["".concat(t,"_valyuta")]&&"uzs"===i["".concat(t,"_valyuta")][0]?"uzs":"usd",s=L.debounce((e=>{o({[t]:e})}),300);return se.useEffect((()=>()=>{s.flush()}),[]),ae(xt,{label:e,defaultValue:l,onChange:({target:e})=>{const t=isNaN(e.value)?l:e.value;e.value=t,s(t),r(t)},onBlur:()=>s.flush(),variant:"standard",fullWidth:!0,InputProps:{startAdornment:ae(Ft,{sx:{userSelect:"none",cursor:"pointer"},onClick:()=>{"usd"===n&&o({["".concat(t,"_valyuta")]:["uzs"]}),"uzs"===n&&o({["".concat(t,"_valyuta")]:["usd"]})},position:"start",children:["usd"===n&&ae(Ut,{sx:{width:"36px"}}),"uzs"===n&&ae("span",{style:{fontWeight:"bold"},children:"SUM"})]})}})}}],Nn=({title:e,name:t})=>[{type:i.Text,hidden:!0,name:t,defaultValue:""},{type:i.Text,hidden:!0,name:"".concat(t,"_unit"),defaultValue:""},{type:i.Component,fieldBottomMargin:"1",fieldRightMargin:"1",columns:"6",element:a=>{const{_fieldData:i,onChange:o}=a,[l,r]=se.useState(i[t]||""),n=i["".concat(t,"_unit")]&&"1"===i["".concat(t,"_unit")][0]?"1":"%",s=L.debounce((e=>{o({[t]:e})}),300);return se.useEffect((()=>()=>{s.flush()}),[]),ae(xt,{label:e,defaultValue:l,onChange:({target:e})=>{const t=isNaN(e.value)?l:e.value;e.value=t,s(t),r(t)},onBlur:()=>s.flush(),variant:"standard",fullWidth:!0,InputProps:{startAdornment:ae(Ft,{sx:{userSelect:"none",cursor:"pointer"},onClick:()=>{"1"===n&&o({["".concat(t,"_unit")]:["%"]}),"%"===n&&o({["".concat(t,"_unit")]:["1"]})},position:"start",children:["%"===n&&ae(Ht,{}),"1"===n&&ae(Ot,{})]})}})}}],Un=[{type:i.Fragment,isVisible:({kategoriya_obekta:e})=>lt(e,"",""),fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:" "})},{type:i.Box,noBaseline:!0,sx:{display:"flex",alignItems:"flex-end","& > *":{flex:1},"& > :last-child":{maxWidth:125}},fields:[...En({title:" ",features:["hasOwnerPricePermission"],name:"rent_czena"}),...En({title:" ",name:"rent_startovaya_czena"}),{type:i.Combo,noDeselect:!0,title:"",fieldBottomMargin:"1",name:"rent_czena_for",itemList:["2",""],tr:e=>"2"===e?"":e,placeholder:"",defaultValue:""}]},{type:i.Fragment,features:["hasCommissionPermission"],fields:[{type:i.Checkbox,isDisabled:(e,{readonly:t})=>t,fieldBottomMargin:"1",name:"rent_torg",title:""},...Nn({title:" ",name:"rent_komissiya_agenstva"}),...Nn({title:" ",name:"rent_komissiya_menedzhera"})]},{type:i.Div,style:{height:10}}]},{type:i.Fragment,isVisible:({kategoriya_obekta:e})=>lt(e,""),fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"  ."})},{type:i.Box,noBaseline:!0,sx:{display:"flex",alignItems:"flex-end","& > *":{flex:1},"& > :last-child":{maxWidth:125}},fields:[...En({title:" ",features:["hasOwnerPricePermission"],name:"rent_kom_czena_sobstvennika"}),...En({title:" ",name:"rent_kom_startovaya_czena"}),{type:i.Combo,noDeselect:!0,title:"",fieldBottomMargin:"1",name:"rent_kom_czena_for",itemList:["2",""],tr:e=>"2"===e?"":e,placeholder:"",defaultValue:""}]},{type:i.Fragment,features:["hasCommissionPermission"],fields:[{type:i.Checkbox,isDisabled:(e,{readonly:t})=>t,fieldBottomMargin:"1",name:"rent_kom_torg",title:""},...Nn({title:" ",name:"rent_kom_komissiya_agenstva"}),...Nn({title:" ",name:"rent_kom_komissiya_menedzhera"})]},{type:i.Div,style:{height:10}}]}];window.price_rent_fields=Un;const Hn=[{type:i.Fragment,isVisible:({kategoriya_obekta:e})=>lt(e,"",""),fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:" "})},{type:i.Box,noBaseline:!0,sx:{display:"flex",alignItems:"flex-end","& > *":{flex:1},"& > :last-child":{maxWidth:125}},fields:[...En({title:" ",features:["hasOwnerPricePermission"],name:"prod_czena"}),...En({title:" ",name:"prod_startovaya_czena"}),{type:i.Combo,noDeselect:!0,title:"",fieldBottomMargin:"1",name:"prod_czena_for",itemList:["2",""],tr:e=>"2"===e?"":e,placeholder:"",defaultValue:""}]},{type:i.Fragment,features:["hasCommissionPermission"],fields:[{type:i.Checkbox,isDisabled:(e,{readonly:t})=>t,fieldBottomMargin:"1",name:"prod_torg",title:""},...Nn({title:" ",name:"prod_komissiya_agenstva"}),...Nn({title:" ",name:"prod_komissiya_menedzhera"})]},{type:i.Div,style:{height:10}}]},{type:i.Fragment,isVisible:({kategoriya_obekta:e})=>lt(e,""),fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"  ."})},{type:i.Box,noBaseline:!0,sx:{display:"flex",alignItems:"flex-end","& > *":{flex:1},"& > :last-child":{maxWidth:125}},fields:[...En({title:" ",features:["hasOwnerPricePermission"],name:"prod_kom_czena_sobstvennika"}),...En({title:" ",name:"prod_kom_startovaya_czena"}),{type:i.Combo,noDeselect:!0,title:"",fieldBottomMargin:"1",name:"prod_kom_czena_for",itemList:["2",""],tr:e=>"2"===e?"":e,placeholder:"",defaultValue:""}]},{type:i.Fragment,features:["hasCommissionPermission"],fields:[{type:i.Checkbox,isDisabled:(e,{readonly:t})=>t,fieldBottomMargin:"1",name:"prod_kom_torg",title:""},...Nn({title:" ",name:"prod_kom_komissiya_agenstva"}),...Nn({title:" ",name:"prod_kom_komissiya_menedzhera"})]},{type:i.Div,style:{height:10}}]}];window.price_sell_fields=Hn;const On=54,Wn=jr()((e=>({root:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",overflow:"hidden"},container:{overflowX:"hidden",overflowY:"scroll",padding:e.spacing(1),flex:1},appBarRoot:{background:e.palette.primary.main,maxHeight:On,height:On,boxShadow:"unset",color:"#000"},tabsRoot:{minHeight:On,height:On,marginLeft:"0 !important",marginRight:"0 !important"},tabRoot:{minHeight:On,height:On,color:"#fff"},tabRootTransparent:{minHeight:On,height:On},tabSelected:{color:"#fff !important"},indicator:{height:6,background:"#0288d1"},indicatorTransparent:{height:6,background:e.palette.primary.main}}))),$n={},Gn=({sx:e,features:t,withTransparentHeader:a=!1,withRentTab:i=!1,withSellTab:o=!1,readonly:l=!1,fieldData:r=$n,onChange:n})=>{const{reloadTrigger:s,doReload:d}=Wt(),{classes:m}=Wn(),[c,u]=se.useState("rent");se.useEffect((()=>{o?u("sell"):i&&u("rent")}),[i,o]);const p=$t(r);return se.useEffect((()=>p.subscribe((()=>{l&&d()}))),[l]),ae(ce,{className:m.root,sx:{...e,height:"100%"},children:ae(Gt,{value:c,children:[a&&ae(he,{sx:{borderBottom:1,borderColor:"divider",pointerEvents:"all"},children:ae(Yt,{variant:"fullWidth",classes:{root:m.tabsRoot,indicator:m.indicatorTransparent},onChange:(e,t)=>u(t),children:[o&&ae(Kt,{classes:{root:m.tabRootTransparent},label:"",value:"sell"}),i&&ae(Kt,{classes:{root:m.tabRootTransparent},label:"",value:"rent"})]})}),!a&&ae(Zt,{classes:{root:m.appBarRoot},position:"static",sx:{borderBottom:1,borderColor:"divider",pointerEvents:"all"},children:ae(Yt,{variant:"fullWidth",classes:{root:m.tabsRoot,indicator:m.indicator},onChange:(e,t)=>u(t),children:[o&&ae(Kt,{classes:{root:m.tabRoot,selected:m.tabSelected},label:"",value:"sell"}),i&&ae(Kt,{classes:{root:m.tabRoot,selected:m.tabSelected},label:"",value:"rent"})]})}),o&&ae(Xt,{className:m.container,value:"sell",children:ae(fe,{readonly:l,features:t,payload:()=>({readonly:l}),handler:r,fields:Hn,onChange:n},s)}),i&&ae(Xt,{className:m.container,value:"rent",children:ae(fe,{readonly:l,features:t,payload:()=>({readonly:l}),handler:r,fields:Un,onChange:n},s)})]})})},Yn=jr()((e=>({root:{position:"absolute",padding:20,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"stretch",transform:"translate(-50%, -50%)",backgroundColor:e.palette.background.paper,borderRadius:5,gap:5},small:{top:"40%",left:"50%",maxHeight:"80%",width:500},large:{top:"50%",left:"50%",width:"calc(100vw - 50px)",height:"calc(100vh - 50px)"},content:{flex:1,overflowY:"auto",paddingTop:e.spacing(1),display:"flex",alignItems:"stretch",justifyContent:"stretch","& > *":{flex:1}},title:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:15,color:e.palette.text.primary},submit:{marginTop:15},disabled:{opacity:.5,pointerEvents:"none"}}))),Kn=({onChange:e})=>{const[t,a]=se.useState((()=>({address:"",open:!1}))),[i,o]=se.useState(null),l=se.useRef(null),{handleLoadStart:r,handleLoadEnd:n}=de({history:Dr.routerService,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1)}),{address:s,open:d}=t,m=()=>{l.current=null,p.current&&p.current(),a({address:"",open:!1})},c=async()=>{const{current:t}=l;try{if(t){const a=await Dr.ymapsService.getAddress(t);e(a)}}finally{m()}},{classes:u}=Yn(),p=se.useRef(null);se.useEffect((()=>{if(i)return Dr.ymapsService.drawMap(i,{address:s,change:e=>l.current=e})}),[i]);return{render:()=>ae(Et,{open:d,onClose:m,children:ae(he,{className:we(u.root,{[u.large]:!0}),children:[ae("div",{className:u.title,children:ae(le,{variant:"h6",component:"h2",children:" "})}),ae(he,{className:u.content,children:ae("div",{ref:o})}),ae(_e,{onClick:c,onLoadStart:r,onLoadEnd:n,variant:"contained",children:""})]})}),pickMap:(e="")=>a({address:e,open:!0})}},Zn=({gorod:e,mahallya:t,nomer_doma:a,rajon:i,strana:o,ulicza:l,metro:r,onChange:n})=>{const{render:s,pickMap:d}=Kn({onChange:n}),m=se.useMemo((()=>[o||null,e?" ".concat(e):null,i?"".concat(i):null,t?" ".concat(t):l?" ".concat(l):null,a?"".concat(a):null,r?" ".concat(r):null].filter((e=>e)).join(", ")),[e,t,a,i,o,l,r]);return ae(Le,{children:[ae(mt,{onClick:()=>{"action-modal"==="action-modal"&&d(m)},fullWidth:!0,variant:"contained",children:"  "}),s()]})},Xn=[{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,"/"),t},fields:[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ( )"})},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"   "}]}]},{type:i.Fragment,isVisible:e=>!lt(e.kategoriya_obekta,"")&&lt(e.podkategoriya_obekta,"/"),fields:[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    (/)"})},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"   "}]}]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&!lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,""),t},fields:[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ()"})},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"  "}]}]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&!lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,""),t},fields:[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ()"})},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"   "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostevogo_doma",title:"   "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_dopolnitelnoj_pristrojki",title:"   "}]}]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,""),t},fields:[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ( )"})},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"  "}]}]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,""),t},fields:[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ( )"})},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"   "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostevogo_doma",title:"   "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_dopolnitelnoj_pristrojki",title:"   "}]}]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,"/"),t},fields:[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ( /)"})},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"   "}]}]}],Jn=[{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,"/"),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Group,fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ( )"})},{type:i.Items,columns:"6",outlined:!1,name:"vnutri_est",title:" :",itemList:["","",""," ",""," ","","","",""," ","","","",""," "," ","","","  "," ","",""," "]},{type:i.Items,columns:"6",outlined:!1,name:"ryadom_est",title:" :",itemList:[" ",""," ",""," "," ",""," ","","","","/","","","","",""," ","/ "]}]}]}},{type:i.Fragment,isVisible:e=>{let t=!1;return t=t||lt(e.podkategoriya_obekta,"/"),t=t&&!lt(e.kategoriya_obekta,""),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Group,fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    (/)"})},{type:i.Items,columns:"6",outlined:!1,name:"vnutri_est",title:" :",itemList:["","","","","","",""," ","",""," "]},{type:i.Items,columns:"6",outlined:!1,name:"ryadom_est",title:" :",itemList:[" ",""," ",""," "," ",""," ","","","","/","","","","",""," ","/ "]}]}]}},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,""),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Group,fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ( )"})},{type:i.Items,columns:"6",outlined:!1,name:"vnutri_est",title:" :",itemList:["","",""," ",""," ","","","",""," "," "," "," ","2   ","","",""," "," ","","","","",""," ","  "," ","",""]},{type:i.Items,columns:"6",outlined:!1,name:"ryadom_est",title:" :",itemList:[" ",""," ",""," "," ",""," ","","","","/","","","","",""," ","/ "]}]}]}}],Qn=[{type:i.Fragment,isVisible:e=>(!lt(e.podkategoriya_obekta,"/")||!lt(e.kategoriya_obekta,""))&&((!lt(e.podkategoriya_obekta,"")||!lt(e.kategoriya_obekta,""))&&((!lt(e.podkategoriya_obekta,"")||!lt(e.kategoriya_obekta,""))&&lt(e.kategoriya_obekta,""))),child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"  ( )"})},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:" "},{type:i.Component,sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>ae(rt,{variant:"standard",label:" ",items:[{label:"",value:""},{label:"",value:""},{label:"/",value:"/"},{label:". ",value:". "},{label:" ",value:" "},{label:"  ",value:"  "},{label:"/",value:"/"},{label:"",value:""},{label:" ",value:" "},{label:"//",value:"//"},{label:" ",value:" "},{label:"  ",value:"  ",child:[{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""}]},{label:" ",value:" ",child:[{label:"",value:""},{label:" ",value:" "},{label:" ",value:" "}]},{label:" ",value:" "},{label:" ",value:" "}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},{type:i.Combo,columns:"3",outlined:!1,name:"sostoyanie_obekta",title:" ",itemList:[" ",""," ",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:""},{type:i.Combo,columns:"3",outlined:!1,name:"sostoyanie_remonta",title:" ",itemList:["","","",""," "," ",""," "]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"-"},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:" "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:""},{type:i.Combo,columns:"3",outlined:!1,name:"tip_stroeniya",title:" ",itemList:["","","-","","","",""]},{type:i.Items,columns:"3",outlined:!1,name:"parkovka",title:"",itemList:["","","","",""]},{type:i.Items,columns:"3",outlined:!1,name:"sanuzel",title:"",itemList:["","","2  "," "]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"  "},{type:i.Items,columns:"3",outlined:!1,name:"balkon",title:"",itemList:["",""," ","2x6","2  ",""]},{type:i.Items,columns:"3",outlined:!1,name:"voda",title:"",itemList:[" ","","  "," "," "," "]},{type:i.Combo,columns:"3",outlined:!1,name:"kanalizacziya",title:"",itemList:["",""]},{type:i.Combo,columns:"3",outlined:!1,name:"lift_kommercziya",title:"",itemList:["",""]},{type:i.Items,columns:"3",outlined:!1,name:"sistema_otopleniya",title:" ",itemList:[""," ","",""," ","  ","  "]},{type:i.Items,columns:"3",outlined:!1,name:"gaz",title:"",itemList:["","","  ",""]},{type:i.Combo,columns:"3",outlined:!1,name:"mebel",title:"",itemList:["","",""," + "]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"   ()"},{type:i.Combo,columns:"3",outlined:!1,name:"elektrichestvo",title:"",itemList:["","  ",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:" "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:" "},{type:i.Items,columns:"3",outlined:!1,name:"mestopolozhenie_obekta",title:" ",itemList:[" "," ","  "," "," /"," ","  ","  "]},{type:i.Items,columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:" ",itemList:["","",""]}]}},{type:i.Fragment,isVisible:e=>{if(lt(e.podkategoriya_obekta,"")&&lt(e.kategoriya_obekta,""))return!1;let t=!1;return t=t||lt(e.podkategoriya_obekta,""),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"  ()"})},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:" "},{type:i.Combo,columns:"3",outlined:!1,name:"sostoyanie_remonta-kvartiry",title:" ",itemList:["","","",""," "," ",""," "]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:" "},{type:i.Combo,columns:"3",outlined:!1,name:"tip-stroeniya_kvartiry",title:" ",itemList:["","","","","","","-"]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:""},{type:i.Items,columns:"3",outlined:!1,name:"balkon_kvartira",title:"",itemList:["",""," ","2x6","2  ",""]},{type:i.Items,columns:"3",outlined:!1,name:"tip_planirovki",title:" ",itemList:["","","-","","","","","","","",""]},{type:i.Combo,columns:"3",outlined:!1,name:"lift_kvartira",title:"",itemList:["","",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:""},{type:i.Items,columns:"3",outlined:!1,name:"sanuzel_kvartira",title:"",itemList:["","","2  "]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"zhilaya_ploshhad",title:"  "},{type:i.Combo,columns:"3",outlined:!1,name:"mebel_kvartira",title:"",itemList:["","",""," + "]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:" "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:" "},{type:i.Items,columns:"3",outlined:!1,name:"sistema-otopleniya_kvartiry",title:" ",itemList:["","2  "," "]},{type:i.Text,columns:"3",outlined:!1,name:"kod_domofona",title:" "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:" + "},{type:i.Items,columns:"3",outlined:!1,name:"energonositel_obekta",title:" ",itemList:["",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"podezd_nomer",title:" "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"   ()"},{type:i.Items,columns:"3",outlined:!1,name:"vid_iz_okna",title:"  ",itemList:[" "," "," "]},{type:i.Items,columns:"3",outlined:!1,name:"parkovka_kvartira",title:"",itemList:["","",""," ",""]}]}},{type:i.Fragment,isVisible:e=>{if(lt(e.podkategoriya_obekta,"")&&lt(e.kategoriya_obekta,""))return!1;let t=!1;return t=t||lt(e.podkategoriya_obekta,""),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"  ()"})},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:" "},{type:i.Combo,columns:"3",outlined:!1,name:"sostoyanie_doma",title:" ",itemList:[" ",""," ",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:" "},{type:i.Combo,columns:"3",outlined:!1,name:"tip-stroeniya_doma",title:" ",itemList:["","","-","","","",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:""},{type:i.Items,columns:"3",outlined:!1,name:"balkon_doma",title:"",itemList:["",""," ","2x6","2  ",""]},{type:i.Items,columns:"3",outlined:!1,name:"tip_planirovki",title:" ",itemList:["","","-","","","",""]},{type:i.Items,columns:"3",outlined:!1,name:"bassejn",title:"",itemList:["","",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_doma",title:"  "},{type:i.Items,columns:"3",outlined:!1,name:"sanuzel_doma",title:"",itemList:["","","2  "," "]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"-"},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:" "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:" "},{type:i.Combo,columns:"3",outlined:!1,name:"sostoyanie_remonta",title:" ",itemList:["","","",""," "," ",""," "]},{type:i.Combo,columns:"3",outlined:!1,name:"lift_dom",title:"",itemList:["",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:" + "},{type:i.Items,columns:"3",outlined:!1,name:"sistema-otopleniya_dom",title:" ",itemList:[""," ","",""," ","  ","  "]},{type:i.Combo,columns:"3",outlined:!1,name:"mebel_dom",title:"",itemList:["","",""," + "]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"   ()"},{type:i.Items,columns:"3",outlined:!1,name:"gaz_dom",title:"",itemList:["","","  ",""]},{type:i.Items,columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_dom",title:" ",itemList:["","",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:" "},{type:i.Combo,columns:"3",outlined:!1,name:"elektrichestvo_dom",title:"",itemList:["","  ",""]},{type:i.Items,columns:"3",outlined:!1,name:"vid_iz_okna_dom",title:"  ",itemList:[" "," "," "]},{type:i.Items,columns:"3",outlined:!1,name:"garazh",title:"",itemList:["",""," ",""]},{type:i.Combo,columns:"3",outlined:!1,name:"kanalizacziya_dom",title:"",itemList:["",""]},{type:i.Combo,columns:"3",outlined:!1,name:"raspolozhenie_doma",title:" ",itemList:[" ","  ","  "]},{type:i.Items,columns:"3",outlined:!1,name:"mestopolozhenie-obekta_dom",title:" ",itemList:[" "," ","  "," "," /"," ","  ","  "]},{type:i.Items,columns:"3",outlined:!1,name:"voda_dom",title:"",itemList:[" ","","  "," "," "," "]}]}},{type:i.Fragment,isVisible:e=>!lt(e.kategoriya_obekta,"")&&lt(e.podkategoriya_obekta,"/"),child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"  (/)"})},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:" "},{type:i.Component,sx:{pr:1,mb:2},columns:"3",name:"naznachenie-obekta-zemlya_uchastok",element:e=>ae(rt,{variant:"standard",label:" ",items:[{label:" ",value:" "},{label:"",value:""},{label:" ",value:" "},{label:" ",value:" "},{label:"",value:""},{label:"/",value:"/"},{label:" ",value:" "},{label:"",value:""},{label:"",value:""},{label:"  ",value:"  "},{label:"",value:""},{label:"",value:""}],value:e["naznachenie-obekta_zemlya"],onChange:t=>e.onChange({"naznachenie-obekta_zemlya":t})})},{type:i.Items,columns:"3",outlined:!1,name:"tip_zemli_uchastka",title:" /",itemList:["",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:""},{type:i.Combo,columns:"3",outlined:!1,name:"sostoyanie-obekta_zemlya",title:" ",itemList:[" /",""," "]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"-"},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:" "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:""},{type:i.Combo,columns:"3",outlined:!1,name:"sostoyanie-remonta_zemlya",title:" ",itemList:["","","",""," "," ",""," "]},{type:i.Items,columns:"3",outlined:!1,name:"parkovka_zemlya",title:"",itemList:["","","","",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"   ()"},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"  "},{type:i.Items,columns:"3",outlined:!1,name:"voda_zemlya",title:"",itemList:[" ","","  "," "," "]},{type:i.Items,columns:"3",outlined:!1,name:"mestopolozhenie-obekta_zemlya",title:" ",itemList:[" "," ","  "," "," /"," ","  ","  "]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_goroda",title:"   ()"},{type:i.Items,columns:"3",outlined:!1,name:"sistema-otopleniya_zemlya",title:" ",itemList:[""," ","",""," ","  ","  "]},{type:i.Combo,columns:"3",outlined:!1,name:"podezdnye_puti",title:" ",itemList:[" "," ",""]},{type:i.Items,columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_zemlya",title:" ",itemList:["","",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:" "},{type:i.Combo,columns:"3",outlined:!1,name:"elektrichestvo_zemlya",title:"",itemList:["","  ",""]},{type:i.Items,columns:"3",outlined:!1,name:"gaz_zemlya",title:"",itemList:["","","  ",""]},{type:i.Combo,columns:"3",outlined:!1,name:"kanalizacziya_zemlya",title:"",itemList:["",""]}]}},{type:i.Fragment,isVisible:e=>!(!lt(e.podkategoriya_obekta,"")||!lt(e.kategoriya_obekta,"")),child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"  ( )"})},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:" "},{type:i.Combo,columns:"3",outlined:!1,name:"sostoyanie_remonta",title:" ",itemList:["","","",""," "," ",""," "]},{type:i.Component,sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>ae(rt,{variant:"standard",label:" ",items:[{label:"",value:""},{label:"",value:""},{label:"/",value:"/"},{label:". ",value:". "},{label:" ",value:" "},{label:"  ",value:"  "},{label:"/",value:"/"},{label:"",value:""},{label:" ",value:" "},{label:"//",value:"//"},{label:" ",value:" "},{label:"  ",value:"  ",child:[{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""}]},{label:" ",value:" ",child:[{label:"",value:""},{label:" ",value:" "},{label:" ",value:" "}]},{label:" ",value:" "},{label:" ",value:" "}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},{type:i.Combo,columns:"3",outlined:!1,name:"tip_stroeniya",title:" ",itemList:["","","-","","","",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:""},{type:i.Items,columns:"3",outlined:!1,name:"balkon",title:"",itemList:["",""," ","2x6","2  ",""]},{type:i.Items,columns:"3",outlined:!1,name:"tip_planirovki",title:" ",itemList:["","","-","","","","","","","",""]},{type:i.Combo,columns:"3",outlined:!1,name:"lift_kvartira",title:"",itemList:["","",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:""},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:" "},{type:i.Complete,columns:"3",outlined:!1,name:"nazvanie_zhk",title:" ",tip:[" ",' "Greenwich"',' "OzMahal"',' "Elysium"',' "Binkat"',' "Brooklyn"',' "Assalom Havo"',' "Istanbul City"']},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"-"},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"  "},{type:i.Items,columns:"3",outlined:!1,name:"sanuzel_kvartira",title:"",itemList:["","","2  "]},{type:i.Items,columns:"3",outlined:!1,name:"parkovka_kvartira",title:"",itemList:["","",""," ",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"zhilaya_ploshhad",title:"  "},{type:i.Combo,columns:"3",outlined:!1,name:"mebel",title:"",itemList:["","",""," + "]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:" "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:" "},{type:i.Items,columns:"3",outlined:!1,name:"sistema_otopleniya",title:" ",itemList:[""," ","",""," ","  ","  "]},{type:i.Text,columns:"3",outlined:!1,name:"kod_domofona",title:" "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:" + "},{type:i.Items,columns:"3",outlined:!1,name:"gaz",title:"",itemList:["","","  ",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"podezd_nomer",title:" "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"   ()"},{type:i.Items,columns:"3",outlined:!1,name:"vid_iz_okna",title:"  ",itemList:[" "," "," "]},{type:i.Items,columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:" ",itemList:["","",""]}]}},{type:i.Fragment,isVisible:e=>!(!lt(e.podkategoriya_obekta,"")||!lt(e.kategoriya_obekta,"")),child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"  ( )"})},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:" "},{type:i.Combo,columns:"3",outlined:!1,name:"sostoyanie_doma",title:" ",itemList:[" ",""," ",""]},{type:i.Items,columns:"3",outlined:!1,name:"mestopolozhenie_obekta",title:" ",itemList:[" "," ","  "," "," /"," ","  ","  "]},{type:i.Component,sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>ae(rt,{variant:"standard",label:" ",items:[{label:"",value:""},{label:"",value:""},{label:"/",value:"/"},{label:". ",value:". "},{label:" ",value:" "},{label:"  ",value:"  "},{label:"/",value:"/"},{label:"",value:""},{label:" ",value:" "},{label:"//",value:"//"},{label:" ",value:" "},{label:"  ",value:"  ",child:[{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""}]},{label:" ",value:" ",child:[{label:"",value:""},{label:" ",value:" "},{label:" ",value:" "}]},{label:" ",value:" "},{label:" ",value:" "}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:""},{type:i.Combo,columns:"3",outlined:!1,name:"sostoyanie_remonta",title:" ",itemList:["","","",""," "," ",""," "]},{type:i.Items,columns:"3",outlined:!1,name:"raspolozhenie_obekta",title:" ",itemList:[" -","  ","  ","  ","  ","  "," "," "]},{type:i.Combo,columns:"3",outlined:!1,name:"tip_stroeniya",title:" ",itemList:["","","-","","","",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_doma",title:"  "},{type:i.Combo,columns:"3",outlined:!1,name:"raspolozhenie_doma",title:" ",itemList:[" ","  ","  "]},{type:i.Items,columns:"3",outlined:!1,name:"tip_planirovki",title:" ",itemList:["","","-","","","","","","","",""]},{type:i.Items,columns:"3",outlined:!1,name:"bassejn",title:"",itemList:["","",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:" "},{type:i.Items,columns:"3",outlined:!1,name:"sanuzel_doma",title:"",itemList:["","","2  "," "]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"-"},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:" "},{type:i.Items,columns:"3",outlined:!1,name:"voda_dom",title:"",itemList:[" ","","  "," "," "," "]},{type:i.Combo,columns:"3",outlined:!1,name:"lift_kvartira",title:"",itemList:["","",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:" + "},{type:i.Items,columns:"3",outlined:!1,name:"sistema_otopleniya",title:" ",itemList:[""," ","",""," ","  ","  "]},{type:i.Combo,columns:"3",outlined:!1,name:"mebel",title:"",itemList:["","",""," + "]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"   ()"},{type:i.Items,columns:"3",outlined:!1,name:"gaz",title:"",itemList:["","","  ",""]},{type:i.Items,columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:" ",itemList:["","",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:" "},{type:i.Combo,columns:"3",outlined:!1,name:"elektrichestvo_dom",title:"",itemList:["","  ",""]},{type:i.Items,columns:"3",outlined:!1,name:"vid_iz_okna",title:"  ",itemList:[" "," "," "]},{type:i.Items,columns:"3",outlined:!1,name:"garazh",title:"",itemList:["",""," ",""]},{type:i.Combo,columns:"3",outlined:!1,name:"kanalizacziya_dom",title:"",itemList:["",""]},{type:i.Items,columns:"3",outlined:!1,name:"balkon",title:"",itemList:["",""," ","2x6","2  ",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:" "}]}},{type:i.Fragment,isVisible:e=>!(!lt(e.podkategoriya_obekta,"/")||!lt(e.kategoriya_obekta,"")),child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"  ( /)"})},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:" "},{type:i.Component,sx:{pr:1,mb:2},columns:"3",name:"naznachenie-obekta-zemlya_uchastok",element:e=>ae(rt,{variant:"standard",label:" ",items:[{label:" ",value:" "},{label:"",value:""},{label:" ",value:" "},{label:" ",value:" "},{label:"",value:""},{label:"/",value:"/"},{label:" ",value:" "},{label:"",value:""},{label:"",value:""},{label:"  ",value:"  "},{label:"",value:""},{label:"",value:""}],value:e["naznachenie-obekta_zemlya"],onChange:t=>e.onChange({"naznachenie-obekta_zemlya":t})})},{type:i.Items,columns:"3",outlined:!1,name:"tip_zemli_uchastka",title:" /",itemList:["",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:""},{type:i.Combo,columns:"3",outlined:!1,name:"sostoyanie-obekta_zemlya",title:" ",itemList:[" /",""," "]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"-"},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:" "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:""},{type:i.Combo,columns:"3",outlined:!1,name:"sostoyanie-remonta_zemlya",title:" ",itemList:["","","",""," "," ",""," "]},{type:i.Items,columns:"3",outlined:!1,name:"parkovka_zemlya",title:"",itemList:["","","","",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"   ()"},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"  "},{type:i.Items,columns:"3",outlined:!1,name:"voda_zemlya",title:"",itemList:[" ","","  "," "," "]},{type:i.Items,columns:"3",outlined:!1,name:"mestopolozhenie-obekta_zemlya",title:" ",itemList:[" "," ","  "," "," /"," ","  ","  "]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_goroda",title:"   ()"},{type:i.Items,columns:"3",outlined:!1,name:"sistema-otopleniya_zemlya",title:" ",itemList:[""," ","",""," ","  ","  "]},{type:i.Combo,columns:"3",outlined:!1,name:"podezdnye_puti",title:" ",itemList:[" "," ",""]},{type:i.Items,columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_zemlya",title:" ",itemList:["","",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:" "},{type:i.Combo,columns:"3",outlined:!1,name:"elektrichestvo_zemlya",title:"",itemList:["","  ",""]},{type:i.Items,columns:"3",outlined:!1,name:"gaz_zemlya",title:"",itemList:["","","  ",""]},{type:i.Combo,columns:"3",outlined:!1,name:"kanalizacziya_zemlya",title:"",itemList:["",""]}]}}],es=[{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&!lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,""),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Group,fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ()"})},{type:i.Items,columns:"6",outlined:!1,name:"vnutri_est",title:" :",itemList:[""," ","","",""," ",""," ","","","",""," ","","","","","","  ",""]},{type:i.Items,columns:"6",outlined:!1,name:"ryadom_est",title:" :",itemList:[" ",""," "," "," ",""," ",""," ","","","","/","","","","",""," "]}]}]}},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&!lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,""),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Group,fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ()"})},{type:i.Items,columns:"6",outlined:!1,name:"vnutri_est",title:" :",itemList:["","",""," ",""," ","","","",""," ","","","","",""," "," "," "," ","2   ","","",""," "]},{type:i.Items,columns:"6",outlined:!1,name:"ryadom_est",title:" :",itemList:[" ",""," ",""," "," ",""," ","","","","/","","","","",""," "]}]}]}},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,""),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Group,fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ( )"})},{type:i.Items,columns:"6",outlined:!1,name:"vnutri_est",title:" :",itemList:[""," ","","",""," ",""," ","","","",""," ","  "," ","",""," ","","","","","","  ","",""," "]},{type:i.Items,columns:"6",outlined:!1,name:"ryadom_est",title:" :",itemList:[" ",""," "," "," ",""," ",""," ","","","","/","","","","",""," ","/ "]}]}]}},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,"/"),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Group,fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ( /)"})},{type:i.Items,columns:"6",outlined:!1,name:"vnutri_est",title:" :",itemList:["","","","","","",""," ","",""," "]},{type:i.Items,columns:"6",outlined:!1,name:"ryadom_est",title:" :",itemList:[" ",""," ",""," "," ",""," ","","","","/","","","","",""," ","/ "]}]}]}}],ts=[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:" "})},{type:i.Text,outlined:!1,name:"zagolovok",title:"",placeholder:" "},{type:i.Items,outlined:!1,columns:"4",name:"kategoriya_obekta",title:" ",itemList:["","",""]},{type:i.Items,outlined:!1,columns:"4",name:"prodazha",title:"",itemList:[" ",""," ",""]},{type:i.Items,outlined:!1,columns:"4",name:"arenda",title:"",itemList:["","",""]},{type:i.Combo,outlined:!1,columns:"4",name:"podkategoriya_obekta",title:" ",isVisible:e=>lt(e.kategoriya_obekta,""),itemList:()=>["","","/","",""]},{type:i.Combo,outlined:!1,columns:"4",name:"podkategoriya_obekta",title:" ",isVisible:e=>!lt(e.kategoriya_obekta,""),itemList:()=>["","","/"]},{type:i.Combo,columns:"4",outlined:!1,name:"istochnik",title:"",itemList:[" "," "," ",""," ","  ","OLX","Facebook","Instagram","Telegram","",""]},{type:i.Complete,isVisible:e=>!!lt(e.podkategoriya_obekta,"")&&!lt(e.kategoriya_obekta,""),columns:"4",outlined:!1,name:"nazvanie_zhk",title:" ",tip:[" ",' "Greenwich"',' "OzMahal"',' "Elysium"',' "Binkat"',' "Brooklyn"',' "Assalom Havo"',' "Istanbul City"']},{type:i.Combo,isVisible:e=>{let t=!1;return t=t||lt(e.podkategoriya_obekta,""),t},columns:"4",outlined:!1,name:"vid_obekta",title:" ",itemList:["","","",""," ",""]},{type:i.Items,isVisible:e=>{let t=!1;return t=t||lt(e.kategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,"/"),t},columns:"4",outlined:!1,name:"raspolozhenie_obekta",title:" ",itemList:[" -","  ","  ","  ","  ","  "," "," "]},{type:i.Combo,isVisible:e=>{let t=!1;return t=t||lt(e.podkategoriya_obekta,"/"),t},columns:"4",outlined:!1,name:"vid_liczenzii",title:" ",itemList:["",""]}]},...Qn,{type:i.Group,columns:"12",fieldRightMargin:"0",fieldBottomMargin:"0",fields:[{type:i.Fragment,isVisible:e=>{let t=!1;return t=t||null!==e.podkategoriya_obekta,t=t||null!==e.kategoriya_obekta,t},child:{type:i.Paper,columns:"6",fieldRightMargin:"1",fieldBottomMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:" "})},{type:i.Complete,outlined:!1,name:"strana",title:"",tip:async()=>[""]},{type:i.Complete,outlined:!1,name:"gorod",title:"",tip:[""]},{type:i.Complete,outlined:!1,name:"oblast",title:"",tip:async()=>[" "]},{type:i.Complete,outlined:!1,name:"rajon",title:"",tip:[" "," "," ","- "," "," "," "," "," "," "," "," "]},{type:i.Complete,tip:Dr.dictService.getMahallya,outlined:!1,name:"mahallya",title:""},{type:i.Complete,tip:Dr.dictService.getUlicza,outlined:!1,name:"ulicza",title:""},{type:i.Text,outlined:!1,name:"orientir",title:""},{type:i.Combo,freeSolo:!0,outlined:!1,name:"metro",title:"",itemList:[". "," "," ","  ","","","","  "," "," ","","","",""," ","",""," "," ","","","","","","","","","","","","",""," "," "," ","","","-","",""," ",""]},{type:i.Fragment,isVisible:e=>{let t=!1;return t=t||lt(e.podkategoriya_obekta,""),t},fields:[{type:i.Text,columns:"6",outlined:!1,name:"nomer_doma",title:" "},{type:i.Text,columns:"6",outlined:!1,name:"nomer_kvartiry",title:" "}]},{type:i.Fragment,isVisible:e=>{let t=!1;return t=t||null!==e.kategoriya_obekta,t=t||null!==e.podkategoriya_obekta,t=t&&!lt(e.podkategoriya_obekta,""),t},fields:[{type:i.Text,outlined:!1,name:"nomer_doma",title:" "}]},{type:i.Component,element:Zn}]}},{type:i.Fragment,isVisible:e=>{let t=!1;return t=t||null!==e.podkategoriya_obekta,t=t||null!==e.kategoriya_obekta,t},child:{type:i.Group,style:{height:"100%"},columns:"6",fieldRightMargin:"0",fieldBottomMargin:"0",fields:[{type:i.Component,style:{height:"calc(100% - 212px)"},fieldRightMargin:"1",fieldBottomMargin:"1",isVisible:e=>{let t=!1;return t=t||null!==e.arenda,t=t||null!==e.prodazha,t},element:({onChange:e,_fieldData:t})=>ae(Gn,{withRentTab:null!==t.arenda,withSellTab:null!==t.prodazha,onChange:e,fieldData:t})},{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:" "})},{type:i.Text,inputRows:3,outlined:!1,name:"opisanie",title:""}]}]}}]},...es,...Jn,...Xn,{type:i.Paper,isVisible:e=>!!lt(e.kategoriya_obekta,"",""),fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,element:zn}]},{type:i.Fragment,isVisible:e=>{let t=!1;return t=t||null!==e.kategoriya_obekta,t=t||null!==e.podkategoriya_obekta,t},fields:[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>e.apartment_images&&e.apartment_images.length,fields:[{type:i.Component,sx:{mb:2},element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:" "})},{type:i.Component,element:Pn}]},{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,element:({_fieldData:e,onChange:t})=>ae(xn,{images:e.apartment_images,onChange:e=>t({apartment_images:e})})}]}]},{type:i.Component,features:["withBottomSaveButton"],watchOneContext:!0,element:Fn}];window.apartment_fields=ts;const as=[{type:ie.Link,action:"list-action",label:" "},{type:ie.Link,action:"list-action",isVisible:({id:e})=>"create"!==e,label:" "},{type:ie.Link,action:"list-action",isVisible:({id:e})=>"create"===e,label:" "},{type:ie.Button,isDisabled:({hasChanged:e})=>!e,action:"save-action",label:""}],is=[{type:Ze.Compute,sortable:!1,field:"index",headerName:"",element:({index:e})=>ae(Xe,{content:e}),width:()=>100},{type:Ze.Text,sortable:!0,field:"zagolovok",headerName:"",width:()=>200},{type:Ze.Compute,isVisible:({payload:{permissions:e}})=>e.hasFioPermission,sortable:!1,field:"fio",compute:async({contact_id:e})=>{const t=await Dr.contactViewService.tryRead(e);return t?t.fio:"Unset"},headerName:"... ",width:()=>200},{type:Ze.Compute,isVisible:({payload:{permissions:e}})=>e.hasPreviewModeDisabled,sortable:!1,field:"telefon",element:({id:e,contact_id:t})=>ae(Qe,{payload:e,condition:e=>Dr.permissionRequestService.getOwnerContactPermissionByBidId(e),Loading:"",Else:"",children:ae(Ue,{payload:t,children:async e=>{const t=await Dr.contactViewService.tryRead(e);return t?t.telefon:"Unset"}})}),headerName:" ",width:()=>200},{type:Ze.Compute,field:"kategoriya_obekta",sortable:!0,compute:e=>e.kategoriya_obekta||"Unset",headerName:"",width:()=>200},{type:Ze.Compute,field:"podkategoriya_obekta",sortable:!0,compute:e=>e.podkategoriya_obekta||"Unset",headerName:"",width:()=>200},{type:Ze.Compute,field:"czena_prodazha",isVisible:({payload:e})=>e.permissions.hasOwnerPricePermission,sortable:!0,compute:async({prod_startovaya_czena_ot:e,prod_startovaya_czena_do:t,prod_startovaya_czena_valyuta:a,prod_startovaya_czena_for:i,prod_kom_startovaya_czena_ot:o,prod_kom_startovaya_czena_do:l,prod_kom_startovaya_czena_valyuta:r,prod_kom_startovaya_czena_for:n})=>e&&t?" ".concat(e,"  ").concat(t," ").concat("uzs"===a?"UZS":"USD"," (").concat((null==i?void 0:i.join(""))||"",")"):o&&l?" ".concat(o,"  ").concat(l," ").concat("uzs"===r?"UZS":"USD"," (").concat((null==n?void 0:n.join(""))||"",")"):"Unset",headerName:" ()",width:()=>300},{type:Ze.Compute,field:"czena_arenda",isVisible:({payload:e})=>e.permissions.hasOwnerPricePermission,sortable:!0,compute:async({rent_startovaya_czena_ot:e,rent_startovaya_czena_do:t,rent_startovaya_czena_valyuta:a,rent_startovaya_czena_for:i,rent_kom_startovaya_czena_ot:o,rent_kom_startovaya_czena_do:l,rent_kom_startovaya_czena_valyuta:r,rent_kom_startovaya_czena_for:n})=>e&&t?" ".concat(e,"  ").concat(t," ").concat("uzs"===a?"UZS":"USD"," (").concat((null==i?void 0:i.join(""))||"",")"):o&&l?" ".concat(o,"  ").concat(l," ").concat("uzs"===r?"UZS":"USD"," (").concat((null==n?void 0:n.join(""))||"",")"):"Unset",headerName:" ()",width:()=>300},{type:Ze.Compute,sortable:!0,field:"prodazha_arenda",headerName:" ",element:({prodazha:e,arenda:t})=>{const a=[...e||[],...t||[]];return ae(he,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",gap:1},children:[!a.length&&"Unset",a.map((e=>ae(Qt,{label:e})))]})},width:()=>300},{type:Ze.Compute,sortable:!1,description:" ",field:"status",headerName:"",compute:async({id:e})=>await Dr.dealViewService.readStatusByBidId(e),width:()=>150},{type:Ze.Compute,headerName:" ",compute:({$createdAt:e})=>r(e).format("DD/MM/YYYY"),sortable:!0,field:"$createdAt",width:()=>200},{type:Ze.Compute,headerName:" ",compute:({$updatedAt:e})=>r(e).format("DD/MM/YYYY"),sortable:!0,field:"$updatedAt",width:()=>200}],os=e=>{const t={};for(const a of Object.keys(e||{}))"id"!==a&&(a.startsWith("$")||a.endsWith("_images")||a.endsWith("_files")||null!==e[a]&&""!==e[a]&&!1!==e[a]&&(t[a]=e[a]));return t},ls=({fieldData:e,payload:t})=>{const a=$t(e),{columns:i}=_n({storageKey:"bid_columns",columns:is}),o=se.useMemo((()=>os(e)),[e]);return ae(he,{sx:{pointerEvents:"all",height:"max(60vh, 350px)",mb:5},children:ae(ft,{withLoader:!0,withInitialLoader:!0,reloadSubject:a,handler:async(e,...t)=>await Dr.bidViewService.paginate({...o,_accessLevel:5,_mode:"audit"},...t),isRowDisabled:({system_access_level:e})=>e>t.accessLevel,columns:i,payload:t})})},rs=[{type:Ge.Add,isDisabled:(e,{permissions:t})=>!t.hasBidCreatePermission,label:""},{type:Ge.Fab,action:"column-setup-action",icon:Ye,label:""},{type:Ge.Menu,options:[{action:"add-action",isDisabled:(e,{permissions:t})=>!t.hasBidCreatePermission},{action:"update-now"},{action:"resort-action"},{action:"drop-filters"}]}],ns=[{type:Ze.Compute,sortable:!1,field:"index",description:" ",headerName:"",element:({index:e})=>ae(Xe,{content:e}),width:()=>100},{type:Ze.Text,sortable:!0,field:"zagolovok",description:" ",headerName:"",width:()=>200},{type:Ze.Compute,isVisible:({payload:{permissions:e}})=>e.hasFioPermission,sortable:!1,field:"fio",description:", ,  ",compute:async({contact_id:e})=>{const t=await Dr.contactViewService.tryRead(e);return t?t.fio:"Unset"},headerName:"... ",width:()=>200},{type:Ze.Compute,isVisible:({payload:{permissions:e}})=>e.hasPreviewModeDisabled,sortable:!1,field:"telefon",description:"  ",element:({id:e,contact_id:t})=>ae(Qe,{payload:e,condition:e=>Dr.permissionRequestService.getOwnerContactPermissionByBidId(e),Loading:"",Else:"",children:ae(Ue,{payload:t,children:async e=>{const t=await Dr.contactViewService.tryRead(e);return t?t.telefon:"Unset"}})}),headerName:" ",width:()=>200},{type:Ze.Compute,field:"kategoriya_obekta",description:" ",sortable:!0,compute:e=>e.kategoriya_obekta||"Unset",headerName:"",width:()=>200},{type:Ze.Compute,field:"podkategoriya_obekta",description:" ",sortable:!0,compute:e=>e.podkategoriya_obekta||"Unset",headerName:"",width:()=>200},{type:Ze.Compute,sortable:!0,field:"prodazha_arenda",description:"/",headerName:" ",element:({prodazha:e,arenda:t})=>{const a=[...e||[],...t||[]];return ae(he,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",gap:1},children:[!a.length&&"Unset",a.map((e=>ae(Jt,{label:e})))]})},width:()=>300},{type:Ze.Compute,field:"czena_prodazha",description:"",isVisible:({payload:e})=>e.permissions.hasOwnerPricePermission,sortable:!0,compute:async({prod_startovaya_czena_ot:e,prod_startovaya_czena_do:t,prod_startovaya_czena_valyuta:a,prod_startovaya_czena_for:i,prod_kom_startovaya_czena_ot:o,prod_kom_startovaya_czena_do:l,prod_kom_startovaya_czena_valyuta:r,prod_kom_startovaya_czena_for:n})=>e&&t?" ".concat(e,"  ").concat(t," ").concat("uzs"===a?"UZS":"USD"," (").concat((null==i?void 0:i.join(""))||"",")"):o&&l?" ".concat(o,"  ").concat(l," ").concat("uzs"===r?"UZS":"USD"," (").concat((null==n?void 0:n.join(""))||"",")"):"Unset",headerName:" ()",width:()=>300},{type:Ze.Compute,field:"czena_arenda",description:"",isVisible:({payload:e})=>e.permissions.hasOwnerPricePermission,sortable:!0,compute:async({rent_startovaya_czena_ot:e,rent_startovaya_czena_do:t,rent_startovaya_czena_valyuta:a,rent_startovaya_czena_for:i,rent_kom_startovaya_czena_ot:o,rent_kom_startovaya_czena_do:l,rent_kom_startovaya_czena_valyuta:r,rent_kom_startovaya_czena_for:n})=>e&&t?" ".concat(e,"  ").concat(t," ").concat("uzs"===a?"UZS":"USD"," (").concat((null==i?void 0:i.join(""))||"",")"):o&&l?" ".concat(o,"  ").concat(l," ").concat("uzs"===r?"UZS":"USD"," (").concat((null==n?void 0:n.join(""))||"",")"):"Unset",headerName:" ()",width:()=>300},{type:Ze.Compute,sortable:!1,description:" ",field:"status",headerName:"",compute:async({id:e})=>await Dr.dealViewService.readStatusByBidId(e),width:()=>150},{type:Ze.Compute,headerName:" ",description:"  ",compute:({$createdAt:e})=>r(e).format("DD/MM/YYYY"),sortable:!0,field:"$createdAt",width:()=>200},{type:Ze.Compute,headerName:" ",description:"  ",compute:({$updatedAt:e})=>r(e).format("DD/MM/YYYY"),sortable:!0,field:"$updatedAt",width:()=>200},{type:Ze.Action,headerName:"",sortable:!1,width:()=>100}],ss=[{label:"",isDisabled:(e,{permissions:t})=>!t.hasBidUpdatePermission,action:"edit-action",icon:et},{label:" ",action:"toggle-archive",icon:tt,isVisible:({system_is_archive:e})=>!e},{label:" ",action:"toggle-archive",icon:at,isVisible:({system_is_archive:e})=>!!e},{label:" ",isVisible:({accessLevel:e})=>5===e,action:"copy-action",icon:it},{label:"",action:"remove-action",isVisible:({accessLevel:e})=>5===e,icon:ot}],ds=[{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,"/"),t},fields:[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ( )"})},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"   "}]}]},{type:i.Fragment,isVisible:e=>!lt(e.kategoriya_obekta,"")&&lt(e.podkategoriya_obekta,"/"),fields:[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    (/)"})},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"   "}]}]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&!lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,""),t},fields:[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ()"})},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"  "}]}]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&!lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,""),t},fields:[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ()"})},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"   "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostevogo_doma",title:"   "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_dopolnitelnoj_pristrojki",title:"   "}]}]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,""),t},fields:[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ( )"})},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"  "}]}]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,""),t},fields:[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ( )"})},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"   "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostevogo_doma",title:"   "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_dopolnitelnoj_pristrojki",title:"   "}]}]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,"/"),t},fields:[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ( /)"})},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"   "}]}]}],ms=[{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,"/"),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Group,fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ( )"})},{type:i.Items,columns:"6",outlined:!1,name:"vnutri_est",title:" :",itemList:["","",""," ",""," ","","","",""," ","","","",""," "," ","","","  "," ","",""," "]},{type:i.Items,columns:"6",outlined:!1,name:"ryadom_est",title:" :",itemList:[" ",""," ",""," "," ",""," ","","","","/","","","","",""," ","/ "]}]}]}},{type:i.Fragment,isVisible:e=>{let t=!1;return t=t||lt(e.podkategoriya_obekta,"/"),t=t&&!lt(e.kategoriya_obekta,""),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Group,fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    (/)"})},{type:i.Items,columns:"6",outlined:!1,name:"vnutri_est",title:" :",itemList:["","","","","","",""," ","",""," "]},{type:i.Items,columns:"6",outlined:!1,name:"ryadom_est",title:" :",itemList:[" ",""," ",""," "," ",""," ","","","","/","","","","",""," ","/ "]}]}]}},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,""),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Group,fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ( )"})},{type:i.Items,columns:"6",outlined:!1,name:"vnutri_est",title:" :",itemList:["","",""," ",""," ","","","",""," "," "," "," ","2   ","","",""," "," ","","","","",""," ","  "," ","",""]},{type:i.Items,columns:"6",outlined:!1,name:"ryadom_est",title:" :",itemList:[" ",""," ",""," "," ",""," ","","","","/","","","","",""," ","/ "]}]}]}}],cs=[{type:i.Fragment,isVisible:e=>(!lt(e.podkategoriya_obekta,"/")||!lt(e.kategoriya_obekta,""))&&((!lt(e.podkategoriya_obekta,"")||!lt(e.kategoriya_obekta,""))&&((!lt(e.podkategoriya_obekta,"")||!lt(e.kategoriya_obekta,""))&&lt(e.kategoriya_obekta,""))),child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"  ( )"})},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:" "},{type:i.Component,sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>ae(rt,{variant:"standard",label:" ",items:[{label:"",value:""},{label:"",value:""},{label:"/",value:"/"},{label:". ",value:". "},{label:" ",value:" "},{label:"  ",value:"  "},{label:"/",value:"/"},{label:"",value:""},{label:" ",value:" "},{label:"//",value:"//"},{label:" ",value:" "},{label:"  ",value:"  ",child:[{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""}]},{label:" ",value:" ",child:[{label:"",value:""},{label:" ",value:" "},{label:" ",value:" "}]},{label:" ",value:" "},{label:" ",value:" "}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},{type:i.Combo,columns:"3",outlined:!1,name:"sostoyanie_obekta",title:" ",itemList:[" ",""," ",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:""},{type:i.Combo,columns:"3",outlined:!1,name:"sostoyanie_remonta",title:" ",itemList:["","","",""," "," ",""," "]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"-"},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:" "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:""},{type:i.Combo,columns:"3",outlined:!1,name:"tip_stroeniya",title:" ",itemList:["","","-","","","",""]},{type:i.Items,columns:"3",outlined:!1,name:"parkovka",title:"",itemList:["","","","",""]},{type:i.Items,columns:"3",outlined:!1,name:"sanuzel",title:"",itemList:["","","2  "," "]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"  "},{type:i.Items,columns:"3",outlined:!1,name:"balkon",title:"",itemList:["",""," ","2x6","2  ",""]},{type:i.Items,columns:"3",outlined:!1,name:"voda",title:"",itemList:[" ","","  "," "," "," "]},{type:i.Combo,columns:"3",outlined:!1,name:"kanalizacziya",title:"",itemList:["",""]},{type:i.Combo,columns:"3",outlined:!1,name:"lift_kommercziya",title:"",itemList:["",""]},{type:i.Items,columns:"3",outlined:!1,name:"sistema_otopleniya",title:" ",itemList:[""," ","",""," ","  ","  "]},{type:i.Items,columns:"3",outlined:!1,name:"gaz",title:"",itemList:["","","  ",""]},{type:i.Combo,columns:"3",outlined:!1,name:"mebel",title:"",itemList:["","",""," + "]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"   ()"},{type:i.Combo,columns:"3",outlined:!1,name:"elektrichestvo",title:"",itemList:["","  ",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:" "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:" "},{type:i.Items,columns:"3",outlined:!1,name:"mestopolozhenie_obekta",title:" ",itemList:[" "," ","  "," "," /"," ","  ","  "]},{type:i.Items,columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:" ",itemList:["","",""]}]}},{type:i.Fragment,isVisible:e=>{if(lt(e.podkategoriya_obekta,"")&&lt(e.kategoriya_obekta,""))return!1;let t=!1;return t=t||lt(e.podkategoriya_obekta,""),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"  ()"})},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:" "},{type:i.Combo,columns:"3",outlined:!1,name:"sostoyanie_remonta-kvartiry",title:" ",itemList:["","","",""," "," ",""," "]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:" "},{type:i.Combo,columns:"3",outlined:!1,name:"tip-stroeniya_kvartiry",title:" ",itemList:["","","","","","","-"]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:""},{type:i.Items,columns:"3",outlined:!1,name:"balkon_kvartira",title:"",itemList:["",""," ","2x6","2  ",""]},{type:i.Items,columns:"3",outlined:!1,name:"tip_planirovki",title:" ",itemList:["","","-","","","","","","","",""]},{type:i.Combo,columns:"3",outlined:!1,name:"lift_kvartira",title:"",itemList:["","",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:""},{type:i.Items,columns:"3",outlined:!1,name:"sanuzel_kvartira",title:"",itemList:["","","2  "]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"zhilaya_ploshhad",title:"  "},{type:i.Combo,columns:"3",outlined:!1,name:"mebel_kvartira",title:"",itemList:["","",""," + "]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:" "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:" "},{type:i.Items,columns:"3",outlined:!1,name:"sistema-otopleniya_kvartiry",title:" ",itemList:["","2  "," "]},{type:i.Text,columns:"3",outlined:!1,name:"kod_domofona",title:" "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:" + "},{type:i.Items,columns:"3",outlined:!1,name:"energonositel_obekta",title:" ",itemList:["",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"podezd_nomer",title:" "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"   ()"},{type:i.Items,columns:"3",outlined:!1,name:"vid_iz_okna",title:"  ",itemList:[" "," "," "]},{type:i.Items,columns:"3",outlined:!1,name:"parkovka_kvartira",title:"",itemList:["","",""," ",""]}]}},{type:i.Fragment,isVisible:e=>{if(lt(e.podkategoriya_obekta,"")&&lt(e.kategoriya_obekta,""))return!1;let t=!1;return t=t||lt(e.podkategoriya_obekta,""),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"  ()"})},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:" "},{type:i.Combo,columns:"3",outlined:!1,name:"sostoyanie_doma",title:" ",itemList:[" ",""," ",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:" "},{type:i.Combo,columns:"3",outlined:!1,name:"tip-stroeniya_doma",title:" ",itemList:["","","-","","","",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:""},{type:i.Items,columns:"3",outlined:!1,name:"balkon_doma",title:"",itemList:["",""," ","2x6","2  ",""]},{type:i.Items,columns:"3",outlined:!1,name:"tip_planirovki",title:" ",itemList:["","","-","","","",""]},{type:i.Items,columns:"3",outlined:!1,name:"bassejn",title:"",itemList:["","",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_doma",title:"  "},{type:i.Items,columns:"3",outlined:!1,name:"sanuzel_doma",title:"",itemList:["","","2  "," "]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"-"},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:" "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:" "},{type:i.Combo,columns:"3",outlined:!1,name:"sostoyanie_remonta",title:" ",itemList:["","","",""," "," ",""," "]},{type:i.Combo,columns:"3",outlined:!1,name:"lift_dom",title:"",itemList:["",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:" + "},{type:i.Items,columns:"3",outlined:!1,name:"sistema-otopleniya_dom",title:" ",itemList:[""," ","",""," ","  ","  "]},{type:i.Combo,columns:"3",outlined:!1,name:"mebel_dom",title:"",itemList:["","",""," + "]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"   ()"},{type:i.Items,columns:"3",outlined:!1,name:"gaz_dom",title:"",itemList:["","","  ",""]},{type:i.Items,columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_dom",title:" ",itemList:["","",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:" "},{type:i.Combo,columns:"3",outlined:!1,name:"elektrichestvo_dom",title:"",itemList:["","  ",""]},{type:i.Items,columns:"3",outlined:!1,name:"vid_iz_okna_dom",title:"  ",itemList:[" "," "," "]},{type:i.Items,columns:"3",outlined:!1,name:"garazh",title:"",itemList:["",""," ",""]},{type:i.Combo,columns:"3",outlined:!1,name:"kanalizacziya_dom",title:"",itemList:["",""]},{type:i.Combo,columns:"3",outlined:!1,name:"raspolozhenie_doma",title:" ",itemList:[" ","  ","  "]},{type:i.Items,columns:"3",outlined:!1,name:"mestopolozhenie-obekta_dom",title:" ",itemList:[" "," ","  "," "," /"," ","  ","  "]},{type:i.Items,columns:"3",outlined:!1,name:"voda_dom",title:"",itemList:[" ","","  "," "," "," "]}]}},{type:i.Fragment,isVisible:e=>!lt(e.kategoriya_obekta,"")&&lt(e.podkategoriya_obekta,"/"),child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"  (/)"})},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:" "},{type:i.Component,sx:{pr:1,mb:2},columns:"3",name:"naznachenie-obekta-zemlya_uchastok",element:e=>ae(rt,{variant:"standard",label:" ",items:[{label:" ",value:" "},{label:"",value:""},{label:" ",value:" "},{label:" ",value:" "},{label:"",value:""},{label:"/",value:"/"},{label:" ",value:" "},{label:"",value:""},{label:"",value:""},{label:"  ",value:"  "},{label:"",value:""},{label:"",value:""}],value:e["naznachenie-obekta_zemlya"],onChange:t=>e.onChange({"naznachenie-obekta_zemlya":t})})},{type:i.Items,columns:"3",outlined:!1,name:"tip_zemli_uchastka",title:" /",itemList:["",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:""},{type:i.Combo,columns:"3",outlined:!1,name:"sostoyanie-obekta_zemlya",title:" ",itemList:[" /",""," "]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"-"},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:" "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:""},{type:i.Combo,columns:"3",outlined:!1,name:"sostoyanie-remonta_zemlya",title:" ",itemList:["","","",""," "," ",""," "]},{type:i.Items,columns:"3",outlined:!1,name:"parkovka_zemlya",title:"",itemList:["","","","",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"   ()"},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"  "},{type:i.Items,columns:"3",outlined:!1,name:"voda_zemlya",title:"",itemList:[" ","","  "," "," "]},{type:i.Items,columns:"3",outlined:!1,name:"mestopolozhenie-obekta_zemlya",title:" ",itemList:[" "," ","  "," "," /"," ","  ","  "]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_goroda",title:"   ()"},{type:i.Items,columns:"3",outlined:!1,name:"sistema-otopleniya_zemlya",title:" ",itemList:[""," ","",""," ","  ","  "]},{type:i.Combo,columns:"3",outlined:!1,name:"podezdnye_puti",title:" ",itemList:[" "," ",""]},{type:i.Items,columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_zemlya",title:" ",itemList:["","",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:" "},{type:i.Combo,columns:"3",outlined:!1,name:"elektrichestvo_zemlya",title:"",itemList:["","  ",""]},{type:i.Items,columns:"3",outlined:!1,name:"gaz_zemlya",title:"",itemList:["","","  ",""]},{type:i.Combo,columns:"3",outlined:!1,name:"kanalizacziya_zemlya",title:"",itemList:["",""]}]}},{type:i.Fragment,isVisible:e=>!(!lt(e.podkategoriya_obekta,"")||!lt(e.kategoriya_obekta,"")),child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"  ( )"})},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:" "},{type:i.Combo,columns:"3",outlined:!1,name:"sostoyanie_remonta",title:" ",itemList:["","","",""," "," ",""," "]},{type:i.Component,sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>ae(rt,{variant:"standard",label:" ",items:[{label:"",value:""},{label:"",value:""},{label:"/",value:"/"},{label:". ",value:". "},{label:" ",value:" "},{label:"  ",value:"  "},{label:"/",value:"/"},{label:"",value:""},{label:" ",value:" "},{label:"//",value:"//"},{label:" ",value:" "},{label:"  ",value:"  ",child:[{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""}]},{label:" ",value:" ",child:[{label:"",value:""},{label:" ",value:" "},{label:" ",value:" "}]},{label:" ",value:" "},{label:" ",value:" "}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},{type:i.Combo,columns:"3",outlined:!1,name:"tip_stroeniya",title:" ",itemList:["","","-","","","",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:""},{type:i.Items,columns:"3",outlined:!1,name:"balkon",title:"",itemList:["",""," ","2x6","2  ",""]},{type:i.Items,columns:"3",outlined:!1,name:"tip_planirovki",title:" ",itemList:["","","-","","","","","","","",""]},{type:i.Combo,columns:"3",outlined:!1,name:"lift_kvartira",title:"",itemList:["","",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:""},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:" "},{type:i.Complete,columns:"3",outlined:!1,name:"nazvanie_zhk",title:" ",tip:[" ",' "Greenwich"',' "OzMahal"',' "Elysium"',' "Binkat"',' "Brooklyn"',' "Assalom Havo"',' "Istanbul City"']},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"-"},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"  "},{type:i.Items,columns:"3",outlined:!1,name:"sanuzel_kvartira",title:"",itemList:["","","2  "]},{type:i.Items,columns:"3",outlined:!1,name:"parkovka_kvartira",title:"",itemList:["","",""," ",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"zhilaya_ploshhad",title:"  "},{type:i.Combo,columns:"3",outlined:!1,name:"mebel",title:"",itemList:["","",""," + "]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:" "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:" "},{type:i.Items,columns:"3",outlined:!1,name:"sistema_otopleniya",title:" ",itemList:[""," ","",""," ","  ","  "]},{type:i.Text,columns:"3",outlined:!1,name:"kod_domofona",title:" "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:" + "},{type:i.Items,columns:"3",outlined:!1,name:"gaz",title:"",itemList:["","","  ",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"podezd_nomer",title:" "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"   ()"},{type:i.Items,columns:"3",outlined:!1,name:"vid_iz_okna",title:"  ",itemList:[" "," "," "]},{type:i.Items,columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:" ",itemList:["","",""]}]}},{type:i.Fragment,isVisible:e=>!(!lt(e.podkategoriya_obekta,"")||!lt(e.kategoriya_obekta,"")),child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"  ( )"})},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:" "},{type:i.Combo,columns:"3",outlined:!1,name:"sostoyanie_doma",title:" ",itemList:[" ",""," ",""]},{type:i.Items,columns:"3",outlined:!1,name:"mestopolozhenie_obekta",title:" ",itemList:[" "," ","  "," "," /"," ","  ","  "]},{type:i.Component,sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>ae(rt,{variant:"standard",label:" ",items:[{label:"",value:""},{label:"",value:""},{label:"/",value:"/"},{label:". ",value:". "},{label:" ",value:" "},{label:"  ",value:"  "},{label:"/",value:"/"},{label:"",value:""},{label:" ",value:" "},{label:"//",value:"//"},{label:" ",value:" "},{label:"  ",value:"  ",child:[{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""}]},{label:" ",value:" ",child:[{label:"",value:""},{label:" ",value:" "},{label:" ",value:" "}]},{label:" ",value:" "},{label:" ",value:" "}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:""},{type:i.Combo,columns:"3",outlined:!1,name:"sostoyanie_remonta",title:" ",itemList:["","","",""," "," ",""," "]},{type:i.Items,columns:"3",outlined:!1,name:"raspolozhenie_obekta",title:" ",itemList:[" -","  ","  ","  ","  ","  "," "," "]},{type:i.Combo,columns:"3",outlined:!1,name:"tip_stroeniya",title:" ",itemList:["","","-","","","",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_doma",title:"  "},{type:i.Combo,columns:"3",outlined:!1,name:"raspolozhenie_doma",title:" ",itemList:[" ","  ","  "]},{type:i.Items,columns:"3",outlined:!1,name:"tip_planirovki",title:" ",itemList:["","","-","","","","","","","",""]},{type:i.Items,columns:"3",outlined:!1,name:"bassejn",title:"",itemList:["","",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:" "},{type:i.Items,columns:"3",outlined:!1,name:"sanuzel_doma",title:"",itemList:["","","2  "," "]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"-"},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:" "},{type:i.Items,columns:"3",outlined:!1,name:"voda_dom",title:"",itemList:[" ","","  "," "," "," "]},{type:i.Combo,columns:"3",outlined:!1,name:"lift_kvartira",title:"",itemList:["","",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:" + "},{type:i.Items,columns:"3",outlined:!1,name:"sistema_otopleniya",title:" ",itemList:[""," ","",""," ","  ","  "]},{type:i.Combo,columns:"3",outlined:!1,name:"mebel",title:"",itemList:["","",""," + "]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"   ()"},{type:i.Items,columns:"3",outlined:!1,name:"gaz",title:"",itemList:["","","  ",""]},{type:i.Items,columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:" ",itemList:["","",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:" "},{type:i.Combo,columns:"3",outlined:!1,name:"elektrichestvo_dom",title:"",itemList:["","  ",""]},{type:i.Items,columns:"3",outlined:!1,name:"vid_iz_okna",title:"  ",itemList:[" "," "," "]},{type:i.Items,columns:"3",outlined:!1,name:"garazh",title:"",itemList:["",""," ",""]},{type:i.Combo,columns:"3",outlined:!1,name:"kanalizacziya_dom",title:"",itemList:["",""]},{type:i.Items,columns:"3",outlined:!1,name:"balkon",title:"",itemList:["",""," ","2x6","2  ",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:" "}]}},{type:i.Fragment,isVisible:e=>!(!lt(e.podkategoriya_obekta,"/")||!lt(e.kategoriya_obekta,"")),child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"  ( /)"})},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:" "},{type:i.Component,sx:{pr:1,mb:2},columns:"3",name:"naznachenie-obekta-zemlya_uchastok",element:e=>ae(rt,{variant:"standard",label:" ",items:[{label:" ",value:" "},{label:"",value:""},{label:" ",value:" "},{label:" ",value:" "},{label:"",value:""},{label:"/",value:"/"},{label:" ",value:" "},{label:"",value:""},{label:"",value:""},{label:"  ",value:"  "},{label:"",value:""},{label:"",value:""}],value:e["naznachenie-obekta_zemlya"],onChange:t=>e.onChange({"naznachenie-obekta_zemlya":t})})},{type:i.Items,columns:"3",outlined:!1,name:"tip_zemli_uchastka",title:" /",itemList:["",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"  "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:""},{type:i.Combo,columns:"3",outlined:!1,name:"sostoyanie-obekta_zemlya",title:" ",itemList:[" /",""," "]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"-"},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:" "},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:""},{type:i.Combo,columns:"3",outlined:!1,name:"sostoyanie-remonta_zemlya",title:" ",itemList:["","","",""," "," ",""," "]},{type:i.Items,columns:"3",outlined:!1,name:"parkovka_zemlya",title:"",itemList:["","","","",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"   ()"},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"  "},{type:i.Items,columns:"3",outlined:!1,name:"voda_zemlya",title:"",itemList:[" ","","  "," "," "]},{type:i.Items,columns:"3",outlined:!1,name:"mestopolozhenie-obekta_zemlya",title:" ",itemList:[" "," ","  "," "," /"," ","  ","  "]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_goroda",title:"   ()"},{type:i.Items,columns:"3",outlined:!1,name:"sistema-otopleniya_zemlya",title:" ",itemList:[""," ","",""," ","  ","  "]},{type:i.Combo,columns:"3",outlined:!1,name:"podezdnye_puti",title:" ",itemList:[" "," ",""]},{type:i.Items,columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_zemlya",title:" ",itemList:["","",""]},{type:i.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:" "},{type:i.Combo,columns:"3",outlined:!1,name:"elektrichestvo_zemlya",title:"",itemList:["","  ",""]},{type:i.Items,columns:"3",outlined:!1,name:"gaz_zemlya",title:"",itemList:["","","  ",""]},{type:i.Combo,columns:"3",outlined:!1,name:"kanalizacziya_zemlya",title:"",itemList:["",""]}]}}],us=[{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&!lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,""),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Group,fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ()"})},{type:i.Items,columns:"6",outlined:!1,name:"vnutri_est",title:" :",itemList:[""," ","","",""," ",""," ","","","",""," ","","","","","","  ",""]},{type:i.Items,columns:"6",outlined:!1,name:"ryadom_est",title:" :",itemList:[" ",""," "," "," ",""," ",""," ","","","","/","","","","",""," "]}]}]}},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&!lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,""),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Group,fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ()"})},{type:i.Items,columns:"6",outlined:!1,name:"vnutri_est",title:" :",itemList:["","",""," ",""," ","","","",""," ","","","","",""," "," "," "," ","2   ","","",""," "]},{type:i.Items,columns:"6",outlined:!1,name:"ryadom_est",title:" :",itemList:[" ",""," ",""," "," ",""," ","","","","/","","","","",""," "]}]}]}},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,""),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Group,fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ( )"})},{type:i.Items,columns:"6",outlined:!1,name:"vnutri_est",title:" :",itemList:[""," ","","",""," ",""," ","","","",""," ","  "," ","",""," ","","","","","","  ","",""," "]},{type:i.Items,columns:"6",outlined:!1,name:"ryadom_est",title:" :",itemList:[" ",""," "," "," ",""," ",""," ","","","","/","","","","",""," ","/ "]}]}]}},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,"/"),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Group,fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ( /)"})},{type:i.Items,columns:"6",outlined:!1,name:"vnutri_est",title:" :",itemList:["","","","","","",""," ","",""," "]},{type:i.Items,columns:"6",outlined:!1,name:"ryadom_est",title:" :",itemList:[" ",""," ",""," "," ",""," ","","","","/","","","","",""," ","/ "]}]}]}}],ps=[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:" "})},{type:i.Text,outlined:!1,name:"zagolovok",title:"",placeholder:" "},{type:i.Items,outlined:!1,columns:"4",name:"kategoriya_obekta",title:" ",itemList:["","",""]},{type:i.Items,outlined:!1,columns:"4",name:"prodazha",title:"",itemList:[" ",""," ",""]},{type:i.Items,outlined:!1,columns:"4",name:"arenda",title:"",itemList:["","",""]},{type:i.Combo,outlined:!1,columns:"4",name:"podkategoriya_obekta",title:" ",isVisible:e=>lt(e.kategoriya_obekta,""),itemList:()=>["","","/","",""]},{type:i.Combo,outlined:!1,columns:"4",name:"podkategoriya_obekta",title:" ",isVisible:e=>!lt(e.kategoriya_obekta,""),itemList:()=>["","","/"]},{type:i.Combo,columns:"4",outlined:!1,name:"istochnik",title:"",itemList:[" "," "," ",""," ","  ","OLX","Facebook","Instagram","Telegram","",""]},{type:i.Complete,isVisible:e=>!!lt(e.podkategoriya_obekta,"")&&!lt(e.kategoriya_obekta,""),columns:"4",outlined:!1,name:"nazvanie_zhk",title:" ",tip:[" ",' "Greenwich"',' "OzMahal"',' "Elysium"',' "Binkat"',' "Brooklyn"',' "Assalom Havo"',' "Istanbul City"']},{type:i.Combo,isVisible:e=>{let t=!1;return t=t||lt(e.podkategoriya_obekta,""),t},columns:"4",outlined:!1,name:"vid_obekta",title:" ",itemList:["","","",""," ",""]},{type:i.Items,isVisible:e=>{let t=!1;return t=t||lt(e.kategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,"/"),t},columns:"4",outlined:!1,name:"raspolozhenie_obekta",title:" ",itemList:[" -","  ","  ","  ","  ","  "," "," "]},{type:i.Combo,isVisible:e=>{let t=!1;return t=t||lt(e.podkategoriya_obekta,"/"),t},columns:"4",outlined:!1,name:"vid_liczenzii",title:" ",itemList:["",""]}]},...cs,{type:i.Group,columns:"12",fieldRightMargin:"0",fieldBottomMargin:"0",fields:[{type:i.Fragment,isVisible:e=>{let t=!1;return t=t||null!==e.podkategoriya_obekta,t=t||null!==e.kategoriya_obekta,t},child:{type:i.Paper,columns:"6",fieldRightMargin:"1",fieldBottomMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:" "})},{type:i.Complete,outlined:!1,name:"strana",title:"",tip:async()=>[""]},{type:i.Complete,outlined:!1,name:"gorod",title:"",tip:[""]},{type:i.Complete,outlined:!1,name:"oblast",title:"",tip:async()=>[" "]},{type:i.Complete,outlined:!1,name:"rajon",title:"",tip:[" "," "," ","- "," "," "," "," "," "," "," "," "]},{type:i.Complete,tip:Dr.dictService.getMahallya,outlined:!1,name:"mahallya",title:""},{type:i.Complete,tip:Dr.dictService.getUlicza,outlined:!1,name:"ulicza",title:""},{type:i.Text,outlined:!1,name:"orientir",title:""},{type:i.Combo,freeSolo:!0,outlined:!1,name:"metro",title:"",itemList:[". "," "," ","  ","","","","  "," "," ","","","",""," ","",""," "," ","","","","","","","","","","","","",""," "," "," ","","","-","",""," ",""]},{type:i.Fragment,isVisible:e=>{let t=!1;return t=t||lt(e.podkategoriya_obekta,""),t},fields:[{type:i.Text,columns:"6",outlined:!1,name:"nomer_doma",title:" "},{type:i.Text,columns:"6",outlined:!1,name:"nomer_kvartiry",title:" "}]},{type:i.Fragment,isVisible:e=>{let t=!1;return t=t||null!==e.kategoriya_obekta,t=t||null!==e.podkategoriya_obekta,t=t&&!lt(e.podkategoriya_obekta,""),t},fields:[{type:i.Text,outlined:!1,name:"nomer_doma",title:" "}]},{type:i.Component,element:Zn}]}},{type:i.Fragment,isVisible:e=>{let t=!1;return t=t||null!==e.podkategoriya_obekta,t=t||null!==e.kategoriya_obekta,t},child:{type:i.Group,style:{height:"100%"},columns:"6",fieldRightMargin:"0",fieldBottomMargin:"0",fields:[{type:i.Component,style:{height:"calc(100% - 212px)"},fieldRightMargin:"1",fieldBottomMargin:"1",isVisible:e=>{let t=!1;return t=t||null!==e.arenda,t=t||null!==e.prodazha,t},element:({onChange:e,_fieldData:t})=>ae(Gn,{withRentTab:null!==t.arenda,withSellTab:null!==t.prodazha,onChange:e,fieldData:t})},{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:" "})},{type:i.Text,inputRows:3,outlined:!1,name:"opisanie",title:""}]}]}}]},...us,...ms,...ds];window.bid_filters=ps;const ys=()=>nt(Dr.bidViewService.paginate,{onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1),fallback:Dr.errorService.handleGlobalError}),hs=({payload:e,features:t})=>{const a=ys(),i=_t(),{columns:o}=_n({storageKey:"bid_columns",columns:ns}),{pickData:l,render:r,open:n}=ea({withSearch:!0,withLoader:!0,noInitialFilters:!0,fetchDebounce:so,reloadSubject:Dr.userViewService.reloadSubject,selectionMode:gt.Single,onSubmit:e=>(i.next(e),!0),filterLabel:" ",filters:ps,columns:o,handler:a,payload:e,features:t});return{pickData:l,render:r,resultSubject:i,open:n}},bs=[{type:i.Group,style:{minWidth:540},fields:[{type:i.Combo,title:" ",isInvalid:e=>e.deal_type?null:"  ",name:"deal_type",map:(e,t)=>{const{prod_czena:a,prod_startovaya_czena:i=a,prod_kom_czena:o,prod_kom_startovaya_czena:l=o,rent_czena:r,rent_startovaya_czena:n=r,rent_kom_czena:s,rent_kom_startovaya_czena:d=s,prod_czena_valyuta:m="usd",rent_czena_valyuta:c="usd"}=t.data;return e.deal_type&&""===e.deal_type[0]&&(L.set(e,"price",i||l),L.set(e,"unit",[m||"usd"])),e.deal_type&&""===e.deal_type[0]&&(L.set(e,"price",n||d),L.set(e,"unit",[c||"usd"])),e},itemList:()=>[...hl]},{type:i.Box,isVisible:({deal_type:e,price_type:t})=>!!e&&"fixed"===t,style:{display:"grid",gridTemplateColumns:"1fr 125px"},fields:[{type:i.Text,outlined:!1,placeholder:" ",labelShrink:!0,name:"price",title:" ()"},{type:i.Combo,noDeselect:!0,fieldBottomMargin:"0",title:"",placeholder:"USD",itemList:["usd","uzs"],tr:e=>"uzs"===e?"SUM":"USD",defaultValue:"usd",outlined:!1,name:"unit"}]},{type:i.Text,fieldBottomMargin:"1",placeholder:" ",inputRows:3,labelShrink:!0,name:"comment",title:""},{type:i.Radio,fieldBottomMargin:"0",name:"price_type",radioValue:"unset",defaultValue:"unset",title:"  "},{type:i.Radio,fieldBottomMargin:"0",name:"price_type",radioValue:"fixed",title:""}]}],_s=[{type:i.Choose,fieldBottomMargin:"1",isInvalid:e=>e.target_bid_id?null:" ",choose:async(e,t)=>{t.pickBid(e.target_bid_id?[e.target_bid_id]:[]);const a=await t.bidResultSubject.toPromise();if(a&&a.length){const[e]=a;return e}return null},tr:async e=>{const t=await Dr.bidViewService.tryRead(e);return(null==t?void 0:t.zagolovok)||(null==t?void 0:t.$id)||""},name:"target_bid_id",title:" ",placeholder:" "},{type:i.Text,fieldBottomMargin:"1",placeholder:" ",inputRows:3,labelShrink:!0,name:"comment",title:""},{type:i.Radio,fieldBottomMargin:"0",title:" ",name:"status",radioValue:" ",defaultValue:" "},{type:i.Radio,fieldBottomMargin:"0",title:" ",name:"status",radioValue:" "}],vs=[{action:"deal-end-action",label:" ",isDisabled:({activeItem:e})=>!e}],fs=(e,...t)=>{let a=!1;for(const i of t)String(e[i]||"").length&&(a=!0);return a},gs=[{type:i.Paper,features:["hasResponsiblePermission"],fieldBottomMargin:"1",fieldRightMargin:"1",columns:"12",fields:[{type:i.Component,element:({id:e,payload:t,features:a,_fieldData:i})=>{const[o,l]=se.useState(null),[r,n]=se.useState(null),s=se.useMemo((()=>({...o,occupiedBy:r})),[o,r]),{pickData:d,render:m,resultSubject:c}=hs({payload:t,features:a}),{loading:u,execute:p}=Ie((async()=>{const t=Dr.appwriteService.currentUser.$id,a=await Dr.dealHistoryRequestService.readDealStateByApartment(e,t),i=await Dr.dealViewService.findOccupiedByTargetApartmentId(e);l(a),n(i)}),{onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1),fallback:Dr.errorService.handleGlobalError}),{handleLoadStart:y,handleLoadEnd:h}=de({history:Dr.routerService,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1)}),b=wt({title:" ",fields:_s,payload:()=>({...t,pickBid:d,bidResultSubject:c}),features:a}),_=wt({title:" ",fields:bs,payload:()=>({...t,data:i}),features:a});se.useEffect((()=>Dr.dealHistoryViewService.createSubject.subscribe((t=>{t.apartment_id===e&&p()}))),[]),se.useEffect((()=>{p()}),[]);const v=()=>{_().then((async t=>{if(!t)return;const a=t.deal_type?t.deal_type[0]:"";if(!a)return;let i=[],o="usd";"fixed"===t.price_type&&(i=[t.price],o=t.unit?t.unit[0]:"usd"),(async(t,a=[],i="usd",o="")=>{let l=!0;y();try{const l=Dr.appwriteService.currentUser.$id;await Dr.dealHistoryRequestService.commitApartmentDealBegin(e,l,t,a,i,o),await p()}catch(r){Dr.alertService.notify(xr(r)),l=!1}finally{h(l)}})(a,i,o,t.comment)}))},f=async()=>{let t=!0;y();try{const t=Dr.appwriteService.currentUser.$id;await Dr.dealHistoryRequestService.commitApartmentDealReassign(e,t),await p()}catch(a){t=!1}finally{h(t)}},g=t=>{"deal-end-action"===t&&b().then((t=>{t&&(async(t,a,i)=>{let o=!0;y();try{Dr.appwriteService.currentUser.$id,await Dr.dealRequestService.commitApartmentDealEnd(e,t,a,i),await p()}catch(l){o=!1}finally{h(o)}})(t.target_bid_id,t.status,t.comment)}))};return ae(be,{style:{pointerEvents:"all"},direction:"column",children:[ae(le,{variant:"body1",sx:{mt:-.5,mb:1,color:e=>e.palette.action.active,fontWeight:"bold"},children:""}),ae(be,{direction:"column",gap:"16px",children:[ae(be,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[ae(Ue,{loading:u,Loader:()=>ae(be,{direction:"row",gap:"16px",alignItems:"center",children:[ae(He,{variant:"circular",width:40,height:40}),ae(be,{children:[ae(He,{sx:{mb:1},variant:"rectangular",width:210,height:20}),ae(He,{variant:"rectangular",width:210,height:20})]})]}),payload:s,children:async e=>{if(e.occupiedBy)return ae(le,{variant:"body1",children:["  "," ",ae(ta,{href:"#",onClick:()=>Y("/deal"),children:e.occupiedBy.status})]});if(!(null==e?void 0:e.activeItem))return ae(le,{variant:"body1",children:"  "});const{first_name:t=" ",user_role:a,avatar:i=null}=await Dr.userViewService.read(e.activeItem.user_id),o=i?await Dr.appwriteService.getImageURL(i):"",l=await Dr.dictService.getUserRoles();return ae(be,{direction:"row",gap:"16px",alignItems:"center",children:[ae(Oe,{alt:t,src:o}),ae(be,{direction:"column",children:[ae(le,{variant:"body1",children:t}),ae(le,{variant:"caption",style:{fontSize:"14px"},children:(null==a?void 0:a.length)?L.get(l,a[0])||a[0]:" "})]})]})}}),ae(be,{direction:"row",gap:1,alignItems:"center",children:[ae(Ue,{loading:u,Loader:()=>ae(He,{variant:"rectangular",sx:{borderRadius:"4px"},width:100,height:35}),payload:s,children:async t=>{if(t.occupiedBy)return null;if(await Dr.permissionRequestService.hasReassignDelayFlagByApartmentId(e))return ae(_e,{disabled:!0,variant:"contained",children:" "});if(null==t?void 0:t.activeItem){const e=Dr.appwriteService.currentUser.$id,a=t.activeItem.user_id===e;return ae(_e,{disabled:a,onClick:f,variant:"contained",children:a?" ":" "})}return ae(_e,{onClick:v,variant:"contained",children:" "})}}),ae(Ue,{loading:u,Loader:()=>ae(He,{variant:"circular",width:40,height:40}),payload:s,children:async e=>ae(Bt,{transparent:!0,options:vs,payload:e,onAction:g})})]})]}),ae(Ue,{loading:u,Loader:()=>ae(aa,{max:Number.POSITIVE_INFINITY,style:{marginRight:"auto"},children:[ae(He,{variant:"circular",width:28,height:28}),ae(He,{variant:"circular",width:28,height:28}),ae(He,{variant:"circular",width:28,height:28})]}),payload:s,children:async e=>{var t;if(!(null==(t=null==e?void 0:e.reassign)?void 0:t.length))return null;const a=await Promise.all(e.reassign.filter(((e,t,a)=>a.findIndex((({user_id:t})=>t===e.user_id))==t)).map((async({user_id:e})=>{const t=await Dr.userViewService.tryRead(e);let a="";return(null==t?void 0:t.avatar)&&(a=await Dr.appwriteService.getImageURL(t.avatar)),ae(Oe,{style:{height:"28px",width:"28px"},alt:null==t?void 0:t.email,src:a})})));return ae(aa,{max:Number.POSITIVE_INFINITY,style:{marginRight:"auto"},children:a})}})]}),m()]})}}]},{type:i.Paper,features:["hasResponsiblePermission"],fieldBottomMargin:"1",fieldRightMargin:"1",columns:"12",fields:[{type:i.Component,element:({system_created_by:e,system_only_for_owner:t,system_allowance:a})=>ae(be,{style:{pointerEvents:"all"},direction:"column",children:[ae(le,{variant:"body1",sx:{mt:-.5,mb:1,color:e=>e.palette.action.active,fontWeight:"bold"},children:""}),ae(ge,{disablePadding:!0,dense:!0,children:ae(Ue,{deps:[t,a],children:async()=>{const i=[];return e&&i.push(e),a&&a.forEach((e=>i.push(e))),i.length?ae(Le,{children:await Promise.all(i.map((async a=>{var i;const o=await Dr.userViewService.read(a),l=o.avatar?await Dr.appwriteService.getImageURL(o.avatar):"",r=await Dr.dictService.getUserRoles(),n=[o.last_name,o.first_name,o.middle_name].filter((e=>e)).join(" ");return ae(Ee,{disableGutters:!0,disablePadding:!0,children:[ae(Ne,{children:ae(Oe,{src:l})}),ae(xe,{primary:n,secondary:(null==(i=o.user_role)?void 0:i.length)?L.get(r,o.user_role[0])||o.user_role[0]:" "}),a===e&&ae(be,{gap:1,direction:"row",children:[ae(Jt,{label:" ",color:"info"}),!!t&&ae(Jt,{label:"",color:"warning"})]})]})})))}):ae(le,{children:" "})}})})]})}]},{type:i.Group,fieldRightMargin:"0",fieldBottomMargin:"0",columns:"12",fields:[{type:i.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>fs(e,"kategoriya_obekta","podkategoriya_obekta","arenda","prodazha","istochnik"),fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:" "})},{type:i.Text,outlined:!1,name:"zagolovok",title:"",placeholder:" "},{type:i.Text,outlined:!1,placeholder:" ",compute:({kategoriya_obekta:e})=>(null==e?void 0:e.flatMap((e=>e)).join(", "))||" ",title:" "},{type:i.Text,outlined:!1,placeholder:" ",compute:({podkategoriya_obekta:e})=>e||" ",title:" "},{type:i.Text,outlined:!1,compute:({arenda:e,prodazha:t})=>t&&e?", ":t?"":e?"":" ",title:" "},{type:i.Text,outlined:!1,columns:"4",compute:({strana:e})=>e||" ",title:""},{type:i.Text,outlined:!1,columns:"4",compute:({oblast:e})=>e||" ",title:""},{type:i.Text,outlined:!1,columns:"4",compute:({gorod:e})=>e||" ",title:""},{type:i.Text,outlined:!1,compute:({rajon:e,ulicza:t})=>{const a=[e,t?t.toLowerCase().includes("")?t:" ".concat(t):null].filter((e=>e));return a.length?a.flatMap((e=>e)).join(", "):" "},title:""},{type:i.Text,outlined:!1,compute:({mahallya:e})=>e||" ",title:""},{type:i.Text,outlined:!1,placeholder:" ",compute:({orientir:e})=>e||" ",title:""},{type:i.Text,outlined:!1,compute:({metro:e})=>e||" ",title:""},{type:i.Fragment,isVisible:e=>{let t=!1;return t=t||lt(e.podkategoriya_obekta,""),t},fields:[{type:i.Text,features:["hasApartmentHouseNumberPermission"],columns:"6",outlined:!1,name:"nomer_doma",title:" "},{type:i.Text,features:["hasApartmentHouseNumberPermission"],columns:"6",outlined:!1,name:"nomer_kvartiry",title:" "}]},{type:i.Fragment,isVisible:e=>{let t=!1;return t=t||null!==e.kategoriya_obekta,t=t||null!==e.podkategoriya_obekta,t=t&&!lt(e.podkategoriya_obekta,""),t},fields:[{type:i.Text,features:["hasApartmentHouseNumberPermission"],outlined:!1,name:"nomer_doma",title:" "}]},{type:i.Text,outlined:!1,compute:({istochnik:e})=>e||" ",title:""},{type:i.Component,fieldBottomMargin:"2",element:({contact_id:e})=>ae(Ue,{payload:e,Loader:()=>ae(xt,{fullWidth:!0,variant:"standard",label:" ",InputProps:{readOnly:!0},value:""}),children:async()=>{const t=await Dr.contactViewService.tryRead(e),a=(null==t?void 0:t.tip_klienta)||" ";return ae(xt,{fullWidth:!0,variant:"standard",label:" ",InputProps:{readOnly:!0},value:a})}})},{type:i.Text,isVisible:e=>{let t=!0;return t=t&&lt(e.podkategoriya_obekta,""),t=t&&lt(e.kategoriya_obekta,"",""),t},outlined:!1,placeholder:" ",compute:({nazvanie_zhk:e})=>e||" ",title:""}]},{type:i.Group,style:{height:"100%"},columns:"6",fields:[{type:i.Component,style:{height:"100%"},fieldRightMargin:"1",fieldBottomMargin:"1",isVisible:e=>{let t=!1;return t=t||null!==e.arenda,t=t||null!==e.prodazha,t},element:({onChange:e,_fieldData:t,features:a})=>ae(Gn,{withTransparentHeader:!0,features:a,readonly:!0,withRentTab:null!==t.arenda,withSellTab:null!==t.prodazha,onChange:e,fieldData:t})}]}]},{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.podkategoriya_obekta,""),t=t&&lt(e.kategoriya_obekta,""),t=t&&!lt(e.kategoriya_obekta,""),t},fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"   ( )"})},{type:i.Text,columns:"3",outlined:!1,compute:({kolichestvo_komnat:e})=>e||"",isVisible:e=>fs(e,"kolichestvo_komnat"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:" "},{type:i.Text,columns:"3",outlined:!1,compute:({god_postrojki:e})=>e||"",isVisible:e=>fs(e,"god_postrojki"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,placeholder:" ",compute:e=>[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma"),title:" "},{type:i.Text,columns:"3",outlined:!1,compute:({etazh:e})=>e||"",isVisible:e=>fs(e,"etazh"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,placeholder:" ",compute:e=>[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"balkon","balkon_kvartira","balkon_doma"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,placeholder:" ",compute:({tip_planirovki:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"tip_planirovki"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"lift_kommercziya","lift_kvartira","lift_dom"),title:""},{type:i.Text,columns:"3",outlined:!1,compute:({etazhnost:e})=>e||"",isVisible:e=>fs(e,"etazhnost"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,placeholder:" ",compute:e=>[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sanuzel","sanuzel_kvartira","sanuzel_doma"),title:""},{type:i.Text,columns:"3",outlined:!1,placeholder:" ",compute:({zhilaya_ploshhad:e})=>e||"",isVisible:e=>fs(e,"zhilaya_ploshhad"),title:"  "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,placeholder:" ",compute:e=>[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"mebel","mebel_kvartira","mebel_dom"),title:""},{type:i.Text,columns:"3",outlined:!1,placeholder:" ",compute:({obshhaya_ploshhad:e,ploshhad_doma:t})=>[e,t].flatMap((e=>e)).join(" "),isVisible:e=>fs(e,"obshhaya_ploshhad","ploshhad_doma"),title:"  "},{type:i.Text,columns:"3",outlined:!1,placeholder:" ",compute:({vysota_potolkov:e})=>e||"",isVisible:e=>fs(e,"vysota_potolkov"),title:" "},{type:i.Text,columns:"3",outlined:!1,compute:({kolichestvo_spalen:e})=>e||"",isVisible:e=>fs(e,"kolichestvo_spalen"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:" "},{type:i.Text,columns:"3",outlined:!1,compute:({kod_domofona:e})=>e||"",isVisible:e=>fs(e,"kod_domofona"),title:" "},{type:i.Text,columns:"3",outlined:!1,compute:({spalnya_sanuzel:e})=>e||"",isVisible:e=>fs(e,"spalnya_sanuzel"),title:" + "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,placeholder:" ",compute:({energonositel_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"energonositel_obekta"),title:" "},{type:i.Text,columns:"3",outlined:!1,placeholder:" ",compute:({podezd_nomer:e})=>e||"",isVisible:e=>fs(e,"podezd_nomer"),title:" "},{type:i.Text,columns:"3",outlined:!1,placeholder:" ",compute:({rasstoyanie_do_metro:e})=>e||"",isVisible:e=>fs(e,"rasstoyanie_do_metro"),title:"   ()"},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,placeholder:" ",compute:({vid_iz_okna:e,vid_iz_okna_dom:t})=>[...e||[],...t||[]].reduce(((e,t)=>e.includes(t)?e:[...e,t]),[]).filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"vid_iz_okna","vid_iz_okna_dom"),title:"  "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"parkovka","parkovka_kvartira","parkovka_zemlya"),title:""}]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.podkategoriya_obekta,""),t=t&&lt(e.kategoriya_obekta,""),t=t&&!lt(e.kategoriya_obekta,""),t},fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"   ( )"})},{type:i.Text,columns:"3",outlined:!1,placeholder:" ",compute:({kolichestvo_komnat:e})=>e||"",isVisible:e=>fs(e,"kolichestvo_komnat"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,placeholder:" ",compute:({sostoyanie_doma:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sostoyanie_doma"),title:" "},{type:i.Text,columns:"3",outlined:!1,placeholder:" ",compute:({god_postrojki:e})=>e||"",isVisible:e=>fs(e,"god_postrojki"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma"),title:" "},{type:i.Text,columns:"3",outlined:!1,placeholder:" ",compute:({etazhnost:e})=>e||"",isVisible:e=>fs(e,"etazhnost"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"balkon","balkon_kvartira","balkon_doma"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({tip_planirovki:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"tip_planirovki"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({bassejn:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"bassejn"),title:""},{type:i.Text,columns:"3",outlined:!1,compute:({ploshhad_doma:e})=>e||"",isVisible:e=>fs(e,"ploshhad_doma"),title:"  "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sanuzel","sanuzel_kvartira","sanuzel_doma"),title:""},{type:i.Text,columns:"3",outlined:!1,compute:({mashina_mesto:e})=>e||"",isVisible:e=>fs(e,"mashina_mesto"),title:"-"},{type:i.Text,columns:"3",outlined:!1,compute:({kolichestvo_spalen:e})=>e||"",isVisible:e=>fs(e,"kolichestvo_spalen"),title:" "},{type:i.Text,columns:"3",outlined:!1,compute:({kolichestvo_sotok:e})=>e||"",isVisible:e=>fs(e,"kolichestvo_sotok"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"lift_kommercziya","lift_kvartira","lift_dom"),title:""},{type:i.Text,columns:"3",outlined:!1,compute:({spalnya_sanuzel:e})=>e||"",isVisible:e=>fs(e,"spalnya_sanuzel"),title:" + "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"mebel","mebel_kvartira","mebel_dom"),title:""},{type:i.Text,columns:"3",outlined:!1,compute:({rasstoyanie_do_metro:e})=>e||"",isVisible:e=>fs(e,"rasstoyanie_do_metro"),title:"   ()"},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"gaz","gaz_dom","gaz_zemlya"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:" "},{type:i.Text,columns:"3",outlined:!1,compute:({vysota_potolkov:e})=>e||"",isVisible:e=>fs(e,"vysota_potolkov"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({vid_iz_okna:e,vid_iz_okna_dom:t})=>[...e||[],...t||[]].reduce(((e,t)=>e.includes(t)?e:[...e,t]),[]).filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"vid_iz_okna","vid_iz_okna_dom"),title:"  "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({garazh:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"garazh"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({raspolozhenie_doma:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"raspolozhenie_doma"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.voda,e.voda_dom,e.voda_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"voda","voda_dom","voda_zemlya"),title:""}]},{type:i.Fragment,isVisible:e=>(!lt(e.podkategoriya_obekta,"/")||!lt(e.kategoriya_obekta,""))&&((!lt(e.podkategoriya_obekta,"")||!lt(e.kategoriya_obekta,""))&&((!lt(e.podkategoriya_obekta,"")||!lt(e.kategoriya_obekta,""))&&lt(e.kategoriya_obekta,""))),fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"   ( )"})},{type:i.Text,columns:"3",outlined:!1,compute:({kolichestvo_komnat:e})=>e||"",isVisible:e=>fs(e,"kolichestvo_komnat"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_obekta,e["sostoyanie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sostoyanie_obekta","sostoyanie-obekta_zemlya"),title:" "},{type:i.Text,columns:"3",outlined:!1,compute:({poleznaya_ploshhad:e})=>e||"",isVisible:e=>fs(e,"poleznaya_ploshhad"),title:"  "},{type:i.Text,columns:"3",outlined:!1,compute:({etazh:e})=>e||"",isVisible:e=>fs(e,"etazh"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:" "},{type:i.Text,columns:"3",outlined:!1,compute:({mashina_mesto:e})=>e||"",isVisible:e=>fs(e,"mashina_mesto"),title:"-"},{type:i.Text,columns:"3",outlined:!1,compute:({kolichestvo_sotok:e})=>e||"",isVisible:e=>fs(e,"kolichestvo_sotok"),title:" "},{type:i.Text,columns:"3",outlined:!1,compute:({etazhnost:e})=>e||"",isVisible:e=>fs(e,"etazhnost"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"parkovka","parkovka_kvartira","parkovka_zemlya"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sanuzel","sanuzel_kvartira","sanuzel_doma"),title:""},{type:i.Text,columns:"3",outlined:!1,compute:({obshhaya_ploshhad:e,ploshhad_doma:t})=>[e,t].filter((e=>e)).flatMap((e=>e)).join(" "),isVisible:e=>fs(e,"obshhaya_ploshhad","ploshhad_doma"),title:"  "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"balkon","balkon_kvartira","balkon_doma"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.voda,e.voda_dom,e.voda_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"voda","voda_dom","voda_zemlya"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"lift_kommercziya","lift_kvartira","lift_dom"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"gaz","gaz_dom","gaz_zemlya"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"mebel","mebel_kvartira","mebel_dom"),title:""},{type:i.Text,columns:"3",outlined:!1,compute:({rasstoyanie_do_metro:e})=>e||"",isVisible:e=>fs(e,"rasstoyanie_do_metro"),title:"   ()"},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya"),title:""},{type:i.Text,columns:"3",outlined:!1,compute:({god_postrojki:e})=>e||"",isVisible:e=>fs(e,"god_postrojki"),title:" "},{type:i.Text,columns:"3",outlined:!1,compute:({vysota_potolkov:e})=>e||"",isVisible:e=>fs(e,"vysota_potolkov"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({raspolozhenie_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"raspolozhenie_obekta"),title:" "}]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.podkategoriya_obekta,"/"),t=t&&lt(e.kategoriya_obekta,""),t=t&&!lt(e.kategoriya_obekta,""),t},fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"   ( /)"})},{type:i.Text,columns:"3",outlined:!1,compute:({kolichestvo_komnat:e})=>e||"",title:" ",isVisible:e=>fs(e,"kolichestvo_komnat")},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({tip_zemli_uchastka:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"tip_zemli_uchastka"),title:" /"},{type:i.Text,columns:"3",outlined:!1,compute:({poleznaya_ploshhad:e})=>e||"",isVisible:e=>fs(e,"poleznaya_ploshhad"),title:"  "},{type:i.Text,columns:"3",outlined:!1,compute:({etazh:e})=>e||"",isVisible:e=>fs(e,"etazh"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_obekta,e["sostoyanie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sostoyanie_obekta","sostoyanie-obekta_zemlya"),title:" "},{type:i.Text,columns:"3",outlined:!1,compute:({mashina_mesto:e})=>e||"",isVisible:e=>fs(e,"mashina_mesto"),title:"-"},{type:i.Text,columns:"3",outlined:!1,compute:({kolichestvo_sotok:e})=>e||"",isVisible:e=>fs(e,"kolichestvo_sotok"),title:" "},{type:i.Text,columns:"3",outlined:!1,compute:({etazhnost:e})=>e||"",isVisible:e=>fs(e,"etazhnost"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"parkovka","parkovka_kvartira","parkovka_zemlya"),title:""},{type:i.Text,columns:"3",outlined:!1,compute:({rasstoyanie_do_metro:e})=>e||"",isVisible:e=>fs(e,"rasstoyanie_do_metro"),title:"   ()"},{type:i.Text,columns:"3",outlined:!1,compute:({obshhaya_ploshhad:e,ploshhad_doma:t})=>[e,t].filter((e=>e)).flatMap((e=>e)).join(" "),isVisible:e=>fs(e,"obshhaya_ploshhad","ploshhad_doma"),title:"  "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.voda,e.voda_dom,e.voda_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"voda","voda_dom","voda_zemlya"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya"),title:" "},{type:i.Text,columns:"3",outlined:!1,compute:({rasstoyanie_do_goroda:e})=>e||"",isVisible:e=>fs(e,"rasstoyanie_do_goroda"),title:"   ()"},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({podezdnye_puti:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"podezdnye_puti"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:" "},{type:i.Text,columns:"3",outlined:!1,compute:({god_postrojki:e})=>e||"",isVisible:e=>fs(e,"god_postrojki"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"gaz","gaz_dom","gaz_zemlya"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya"),title:""}]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.podkategoriya_obekta,""),t=t&&U(O(lt(e.kategoriya_obekta,""),lt(e.kategoriya_obekta,"")),O(lt(e.kategoriya_obekta,""),!lt(e.kategoriya_obekta,""))),t},fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"   ( )"})},{type:i.Text,columns:"3",outlined:!1,compute:({kolichestvo_komnat:e})=>e||"",isVisible:e=>fs(e,"kolichestvo_komnat"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma"),title:" "},{type:i.Text,columns:"3",outlined:!1,compute:({etazh:e})=>e||"",isVisible:e=>fs(e,"etazh"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"balkon","balkon_kvartira","balkon_doma"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({tip_planirovki:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"tip_planirovki"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"lift_kommercziya","lift_kvartira","lift_dom"),title:""},{type:i.Text,columns:"3",outlined:!1,compute:({etazhnost:e})=>e||"",isVisible:e=>fs(e,"etazhnost"),title:""},{type:i.Text,columns:"3",outlined:!1,compute:({god_postrojki:e})=>e||"",isVisible:e=>fs(e,"god_postrojki"),title:" "},{type:i.Text,columns:"3",outlined:!1,compute:({nazvanie_zhk:e})=>e||"",isVisible:e=>fs(e,"nazvanie_zhk"),title:" "},{type:i.Text,columns:"3",outlined:!1,compute:({mashina_mesto:e})=>e||"",isVisible:e=>fs(e,"mashina_mesto"),title:"-"},{type:i.Text,columns:"3",outlined:!1,compute:({obshhaya_ploshhad:e,ploshhad_doma:t})=>[e,t].filter((e=>e)).flatMap((e=>e)).join(" "),isVisible:e=>fs(e,"obshhaya_ploshhad","ploshhad_doma"),title:"  "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sanuzel","sanuzel_kvartira","sanuzel_doma"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"parkovka","parkovka_kvartira","parkovka_zemlya"),title:""},{type:i.Text,columns:"3",outlined:!1,compute:({zhilaya_ploshhad:e})=>e||"",isVisible:e=>fs(e,"zhilaya_ploshhad"),title:"  "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"mebel","mebel_kvartira","mebel_dom"),title:""},{type:i.Text,columns:"3",outlined:!1,compute:({vysota_potolkov:e})=>e||"",isVisible:e=>fs(e,"vysota_potolkov"),title:" "},{type:i.Text,columns:"3",outlined:!1,compute:({kolichestvo_spalen:e})=>e||"",isVisible:e=>fs(e,"kolichestvo_spalen"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:" "},{type:i.Text,columns:"3",outlined:!1,compute:({kod_domofona:e})=>e||"",isVisible:e=>fs(e,"kod_domofona"),title:" "},{type:i.Text,columns:"3",outlined:!1,compute:({spalnya_sanuzel:e})=>e||"",isVisible:e=>fs(e,"spalnya_sanuzel"),title:" + "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"gaz","gaz_dom","gaz_zemlya"),title:""},{type:i.Text,columns:"3",outlined:!1,compute:({podezd_nomer:e})=>e||"",isVisible:e=>fs(e,"podezd_nomer"),title:" "},{type:i.Text,columns:"3",outlined:!1,compute:({rasstoyanie_do_metro:e})=>e||"",isVisible:e=>fs(e,"rasstoyanie_do_metro"),title:"   ()"},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({vid_iz_okna:e,vid_iz_okna_dom:t})=>[...e||[],...t||[]].reduce(((e,t)=>e.includes(t)?e:[...e,t]),[]).filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"vid_iz_okna","vid_iz_okna_dom"),title:"  "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({raspolozhenie_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"raspolozhenie_obekta"),title:" "}]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.podkategoriya_obekta,""),t=t&&U(O(lt(e.kategoriya_obekta,""),lt(e.kategoriya_obekta,"")),O(lt(e.kategoriya_obekta,""),!lt(e.kategoriya_obekta,""))),t},fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"   ( )"})},{type:i.Text,columns:"3",outlined:!1,compute:({kolichestvo_komnat:e})=>e||"",isVisible:e=>fs(e,"kolichestvo_komnat"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({sostoyanie_doma:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sostoyanie_doma"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:" "},{type:i.Text,columns:"3",outlined:!1,compute:({etazhnost:e})=>e||"",isVisible:e=>fs(e,"etazhnost"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({raspolozhenie_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"raspolozhenie_obekta"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma"),title:" "},{type:i.Text,columns:"3",outlined:!1,compute:({ploshhad_doma:e})=>e||"",isVisible:e=>fs(e,"ploshhad_doma"),title:"  "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({raspolozhenie_doma:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"raspolozhenie_doma"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({tip_planirovki:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"tip_planirovki"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({bassejn:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"bassejn"),title:""},{type:i.Text,columns:"3",outlined:!1,compute:({kolichestvo_sotok:e})=>e||"",isVisible:e=>fs(e,"kolichestvo_sotok"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sanuzel","sanuzel_kvartira","sanuzel_doma"),title:""},{type:i.Text,columns:"3",outlined:!1,compute:({mashina_mesto:e})=>e||"",isVisible:e=>fs(e,"mashina_mesto"),title:"-"},{type:i.Text,columns:"3",outlined:!1,compute:({kolichestvo_spalen:e})=>e||"",isVisible:e=>fs(e,"kolichestvo_spalen"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.voda,e.voda_dom,e.voda_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"voda","voda_dom","voda_zemlya"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"lift_kommercziya","lift_kvartira","lift_dom"),title:""},{type:i.Text,columns:"3",outlined:!1,compute:({spalnya_sanuzel:e})=>e||"",isVisible:e=>fs(e,"spalnya_sanuzel"),title:" + "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"mebel","mebel_kvartira","mebel_dom"),title:""},{type:i.Text,columns:"3",outlined:!1,compute:({rasstoyanie_do_metro:e})=>e||"",isVisible:e=>fs(e,"rasstoyanie_do_metro"),title:"   ()"},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"gaz","gaz_dom","gaz_zemlya"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:" "},{type:i.Text,columns:"3",outlined:!1,compute:({vysota_potolkov:e})=>e||"",isVisible:e=>fs(e,"vysota_potolkov"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({vid_iz_okna:e,vid_iz_okna_dom:t})=>[...e||[],...t||[]].reduce(((e,t)=>e.includes(t)?e:[...e,t]),[]).filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"vid_iz_okna","vid_iz_okna_dom"),title:"  "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({garazh:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"garazh"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"balkon","balkon_kvartira","balkon_doma"),title:""},{type:i.Text,columns:"3",outlined:!1,compute:({god_postrojki:e})=>e||"",isVisible:e=>fs(e,"god_postrojki"),title:" "}]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.podkategoriya_obekta,"/"),t=t&&U(O(lt(e.kategoriya_obekta,""),lt(e.kategoriya_obekta,"")),O(lt(e.kategoriya_obekta,""),!lt(e.kategoriya_obekta,""))),t},fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"   ( /)"})},{type:i.Text,columns:"3",outlined:!1,compute:({kolichestvo_komnat:e})=>e||"",isVisible:e=>fs(e,"kolichestvo_komnat"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({tip_zemli_uchastka:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"tip_zemli_uchastka"),title:" /"},{type:i.Text,columns:"3",outlined:!1,compute:({poleznaya_ploshhad:e})=>e||"",isVisible:e=>fs(e,"poleznaya_ploshhad"),title:"  "},{type:i.Text,columns:"3",outlined:!1,compute:({etazh:e})=>e||"",isVisible:e=>fs(e,"etazh"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_obekta,e["sostoyanie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sostoyanie_obekta","sostoyanie-obekta_zemlya"),title:" "},{type:i.Text,columns:"3",outlined:!1,compute:({mashina_mesto:e})=>e||"",isVisible:e=>fs(e,"mashina_mesto"),title:"-"},{type:i.Text,columns:"3",outlined:!1,compute:({kolichestvo_sotok:e})=>e||"",isVisible:e=>fs(e,"kolichestvo_sotok"),title:" "},{type:i.Text,columns:"3",outlined:!1,compute:({etazhnost:e})=>e||"",isVisible:e=>fs(e,"etazhnost"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"parkovka","parkovka_kvartira","parkovka_zemlya"),title:""},{type:i.Text,columns:"3",outlined:!1,compute:({rasstoyanie_do_metro:e})=>e||"",isVisible:e=>fs(e,"rasstoyanie_do_metro"),title:"   ()"},{type:i.Text,columns:"3",outlined:!1,compute:({obshhaya_ploshhad:e,ploshhad_doma:t})=>[e,t].filter((e=>e)).flatMap((e=>e)).join(" "),isVisible:e=>fs(e,"obshhaya_ploshhad","ploshhad_doma"),title:"  "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.voda,e.voda_dom,e.voda_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"voda","voda_dom","voda_zemlya"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya"),title:" "},{type:i.Text,columns:"3",outlined:!1,compute:({rasstoyanie_do_goroda:e})=>e||"",isVisible:e=>fs(e,"rasstoyanie_do_goroda"),title:"   ()"},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({podezdnye_puti:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"podezdnye_puti"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:" "},{type:i.Text,columns:"3",outlined:!1,compute:({god_postrojki:e})=>e||"",isVisible:e=>fs(e,"god_postrojki"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"gaz","gaz_dom","gaz_zemlya"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya"),title:""}]}]},{type:i.Paper,isVisible:e=>fs(e,"vnutri_est","ryadom_est"),fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"   "})},{type:i.Component,fieldBottomMargin:"1",columns:"6",element:()=>ae(le,{children:" :"})},{type:i.Component,fieldBottomMargin:"1",columns:"6",element:()=>ae(le,{children:" :"})},{type:i.Component,columns:"6",isVisible:({vnutri_est:e})=>!!(null==e?void 0:e.length),element:({vnutri_est:e})=>ae("div",{children:ae(he,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",gap:1},children:null==e?void 0:e.map(((e,t)=>ae(Jt,{label:e},t)))})})},{type:i.Component,columns:"6",isVisible:({ryadom_est:e})=>!!(null==e?void 0:e.length),element:({ryadom_est:e})=>ae("div",{children:ae(he,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",gap:1},children:null==e?void 0:e.map(((e,t)=>ae(Jt,{label:e},t)))})})}]},{type:i.Paper,isVisible:e=>fs(e,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany","ploshhad_gostevogo_doma","ploshhad_dopolnitelnoj_pristrojki"),fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,sx:{mb:2},element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"   "})},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,"",""),t=t&&lt(e.podkategoriya_obekta,""),t},fields:[{type:i.Text,columns:"3",outlined:!1,compute:({ploshhad_gostinnoj:e})=>e||"",isVisible:e=>fs(e,"ploshhad_gostinnoj"),title:"  "},{type:i.Text,columns:"3",outlined:!1,compute:({ploshhad_spalni:e})=>e||"",isVisible:e=>fs(e,"ploshhad_spalni"),title:"  "},{type:i.Text,columns:"3",outlined:!1,compute:({ploshhad_holla:e})=>e||"",isVisible:e=>fs(e,"ploshhad_holla"),title:"  "},{type:i.Text,columns:"3",outlined:!1,compute:({ploshhad_kuhni:e})=>e||"",isVisible:e=>fs(e,"ploshhad_kuhni"),title:"  "},{type:i.Text,columns:"3",outlined:!1,compute:({ploshhad_sanuzla:e})=>e||"",isVisible:e=>fs(e,"ploshhad_sanuzla"),title:"  "},{type:i.Text,columns:"3",outlined:!1,compute:({ploshhad_balkona:e})=>e||"",isVisible:e=>fs(e,"ploshhad_balkona"),title:"  "}]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,"",""),t=t&&lt(e.podkategoriya_obekta,""),t},fields:[{type:i.Text,columns:"3",outlined:!1,compute:({ploshhad_gostinnoj:e})=>e||"",isVisible:e=>fs(e,"ploshhad_gostinnoj"),title:"  "},{type:i.Text,columns:"3",outlined:!1,compute:({ploshhad_spalni:e})=>e||"",isVisible:e=>fs(e,"ploshhad_spalni"),title:"  "},{type:i.Text,columns:"3",outlined:!1,compute:({ploshhad_holla:e})=>e||"",isVisible:e=>fs(e,"ploshhad_holla"),title:"  "},{type:i.Text,columns:"3",outlined:!1,compute:({ploshhad_kuhni:e})=>e||"",isVisible:e=>fs(e,"ploshhad_kuhni"),title:"  "},{type:i.Text,columns:"3",outlined:!1,compute:({ploshhad_sanuzla:e})=>e||"",isVisible:e=>fs(e,"ploshhad_sanuzla"),title:"  "},{type:i.Text,columns:"3",outlined:!1,compute:({ploshhad_balkona:e})=>e||"",isVisible:e=>fs(e,"ploshhad_balkona"),title:"  "},{type:i.Text,columns:"3",outlined:!1,compute:({ploshhad_terrasy:e})=>e||"",isVisible:e=>fs(e,"ploshhad_terrasy"),title:"  "},{type:i.Text,columns:"3",outlined:!1,compute:({ploshhad_komnaty_ohrany:e})=>e||"",isVisible:e=>fs(e,"ploshhad_komnaty_ohrany"),title:"   "},{type:i.Text,columns:"3",outlined:!1,compute:({ploshhad_gostevogo_doma:e})=>e||"",isVisible:e=>fs(e,"ploshhad_gostevogo_doma"),title:"   "},{type:i.Text,columns:"3",outlined:!1,compute:({ploshhad_dopolnitelnoj_pristrojki:e})=>e||"",isVisible:e=>fs(e,"ploshhad_dopolnitelnoj_pristrojki"),title:"   "}]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,"",""),t=t&&lt(e.podkategoriya_obekta,"/"),t},fields:[{type:i.Text,columns:"3",outlined:!1,compute:({ploshhad_gostinnoj:e})=>e||"",isVisible:e=>fs(e,"ploshhad_gostinnoj"),title:"  "},{type:i.Text,columns:"3",outlined:!1,compute:({ploshhad_spalni:e})=>e||"",isVisible:e=>fs(e,"ploshhad_spalni"),title:"  "},{type:i.Text,columns:"3",outlined:!1,compute:({ploshhad_holla:e})=>e||"",isVisible:e=>fs(e,"ploshhad_holla"),title:"  "},{type:i.Text,columns:"3",outlined:!1,compute:({ploshhad_kuhni:e})=>e||"",isVisible:e=>fs(e,"ploshhad_kuhni"),title:"  "},{type:i.Text,columns:"3",outlined:!1,compute:({ploshhad_sanuzla:e})=>e||"",isVisible:e=>fs(e,"ploshhad_sanuzla"),title:"  "},{type:i.Text,columns:"3",outlined:!1,compute:({ploshhad_balkona:e})=>e||"",isVisible:e=>fs(e,"ploshhad_balkona"),title:"  "},{type:i.Text,columns:"3",outlined:!1,compute:({ploshhad_terrasy:e})=>e||"",isVisible:e=>fs(e,"ploshhad_terrasy"),title:"  "},{type:i.Text,columns:"3",outlined:!1,compute:({ploshhad_komnaty_ohrany:e})=>e||"",isVisible:e=>fs(e,"ploshhad_komnaty_ohrany"),title:"   "}]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,"/"),t},fields:[{type:i.Text,columns:"3",outlined:!1,compute:({ploshhad_gostinnoj:e})=>e||"",isVisible:e=>fs(e,"ploshhad_gostinnoj"),title:"  "},{type:i.Text,columns:"3",outlined:!1,compute:({ploshhad_spalni:e})=>e||"",isVisible:e=>fs(e,"ploshhad_spalni"),title:"  "},{type:i.Text,columns:"3",outlined:!1,compute:({ploshhad_holla:e})=>e||"",isVisible:e=>fs(e,"ploshhad_holla"),title:"  "},{type:i.Text,columns:"3",outlined:!1,compute:({ploshhad_kuhni:e})=>e||"",isVisible:e=>fs(e,"ploshhad_kuhni"),title:"  "},{type:i.Text,columns:"3",outlined:!1,compute:({ploshhad_sanuzla:e})=>e||"",isVisible:e=>fs(e,"ploshhad_sanuzla"),title:"  "},{type:i.Text,columns:"3",outlined:!1,compute:({ploshhad_balkona:e})=>e||"",isVisible:e=>fs(e,"ploshhad_balkona"),title:"  "},{type:i.Text,columns:"3",outlined:!1,compute:({ploshhad_terrasy:e})=>e||"",isVisible:e=>fs(e,"ploshhad_terrasy"),title:"  "},{type:i.Text,columns:"3",outlined:!1,compute:({ploshhad_komnaty_ohrany:e})=>e||"",isVisible:e=>fs(e,"ploshhad_komnaty_ohrany"),title:"   "}]}]},{type:i.Paper,isVisible:e=>fs(e,"addon_square_names","addon_square_values"),fieldBottomMargin:"1",fieldRightMargin:"1",tabletHidden:!0,phoneHidden:!0,child:{type:i.Component,element:zn}},{type:i.Paper,features:["hasDescriptionPermission"],fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,sx:{mb:2},element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:" "})},{type:i.Text,sx:{pointerEvents:"all"},inputRows:8,outlined:!1,name:"opisanie",title:""}]},{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>e.apartment_images&&e.apartment_images.length,fields:[{type:i.Component,sx:{mb:2},element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:" "})},{type:i.Component,element:Pn}]},{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",child:{type:i.Component,element:()=>ae(le,{fontWeight:"bold",variant:"h6",children:" "})}},{type:i.Component,fieldBottomMargin:"1",fieldRightMargin:"1",element:({_fieldData:e,payload:t,features:a})=>ae(ls,{payload:t,features:a,fieldData:e})}];window.apartment_card_fields=gs;const ks=()=>nt(Dr.userViewService.findAll,{onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1),fallback:Dr.errorService.handleGlobalError}),ws=Ke.createLoader(28),Ss=[],zs=[{type:Ze.Component,headerName:"",sortable:!1,avatar:!0,width:()=>65,element:({avatar:e,email:t})=>ae(Ue,{Loader:ws,children:async()=>{const a=e?await Dr.appwriteService.getImageURL(e):"";return ae(he,{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:ae(Oe,{src:a||void 0,alt:t})})}})},{type:Ze.Compute,sortable:!1,primary:!0,headerName:"...",compute:({first_name:e="",last_name:t="",middle_name:a=""})=>[e,t,a].filter((e=>e.length)).join(" ")||"Unset",width:()=>200},{type:Ze.Compute,sortable:!1,secondary:!0,compute:async({user_role:e})=>{const t=await Dr.dictService.getUserRoles();return(null==e?void 0:e.length)?L.get(t,e[0])||e[0]:" "},headerName:"",width:()=>200}],xs=[{type:ie.Link,action:"list-action",label:" "},{type:ie.Link,action:"list-action",label:" "},{type:ie.Button,isDisabled:({payload:{permissions:e}})=>!e.hasApartmentUpdatePermission,action:"edit-action",label:""}],Fs=[{action:"pick-allowance-action",isDisabled:({system_created_by:e})=>{const t=Dr.appwriteService.currentUser.$id;return H(U(Promise.resolve(e===t)))},label:" "},{action:"toggle-only-for-owner-action",isVisible:({data:{object:e}})=>!!e.system_only_for_owner,icon:at,label:""},{action:"toggle-only-for-owner-action",isVisible:({data:{object:e}})=>!e.system_only_for_owner,icon:tt,label:""}],Ts=({fieldData:e,onChange:t})=>{const{handleLoadStart:a,handleLoadEnd:i,loading:o}=de({history:Dr.routerService,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1)});return ae(At,{children:ae(_e,{disabled:o,sx:{borderRadius:"20px"},startIcon:ae(Tt,{}),onClick:async()=>{let o=!0;a();try{const a=await Ct("*");if(!a)return;const i=Vt(e.contact_files)||[],o=await Promise.all(a.map((async e=>Dr.appwriteService.uploadFile(e)))),l=[...i,...o];t({contact_files:l})}catch(l){o=!1,Dr.alertService.notify(xr(l))}finally{i(o)}},variant:"contained",children:" "===e.kontakt?"  ":" "})})},As=[{action:"edit-action",label:""},{action:"remove-action",label:""}],Cs=({id:e,name:t,phone:a,sx:o,onChange:l,onRemove:r})=>{const n=St({title:"",msg:"    ?"}),s=wt({title:" ",fields:[{type:i.Text,name:"name",title:"",isInvalid:({name:e})=>e?null:" "},{type:i.Text,name:"phone",title:"",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",isInvalid:({phone:e})=>e?null:" "}]}),d=()=>s({handler:{id:e,name:t,phone:a}}).then((t=>{t&&l({id:e,name:t.name,phone:t.phone})}));return ae(Ee,{sx:o,disablePadding:!0,dense:!0,children:ae(ke,{disableRipple:!0,onClick:d,children:[ae(Ne,{children:ae(Oe,{sx:{"& svg":{color:"#aaa !important"},background:"transparent"},children:ae(la,{})})}),ae(xe,{primary:": ".concat(t),secondary:": ".concat(a)}),ae(Bt,{sx:{mr:1},transparent:!0,options:As,onAction:i=>{"edit-action"===i&&d(),"remove-action"===i&&(async()=>{await n().toPromise()&&r({id:e,name:t,phone:a})})()}})]})})},Vs=({contact_phones:e,contact_names:t})=>{e=e||[],t=t||[];const a=[];for(let i=0;i!==t.length;i++)a.push({id:u(),name:t[i],phone:e[i]});return a},Is=({contact_phones:e,contact_names:t,onChange:a})=>{const[o,l]=se.useState((()=>Vs({contact_phones:e,contact_names:t}))),{resetWatcher:r}=zt((()=>{var e;a({contact_names:(e=o)?e.map((({name:e})=>e)):null,contact_phones:e?e.map((({phone:e})=>e)):null})}),[o]);se.useEffect((()=>{const a=Vs({contact_names:t,contact_phones:e});r(),l(a)}),[t,e]);const n=wt({title:" ",fields:[{type:i.Text,sx:{mt:-2},name:"name",title:"",isInvalid:({name:e})=>e?null:" "},{type:i.Text,name:"phone",title:"",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",isInvalid:({phone:e})=>e?null:" "}]});return ae(he,{style:{display:"flex",flexDirection:"column",overflowY:"auto",marginRight:"1px",minHeight:275},children:[ae(be,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:1},children:[ae(le,{sx:{ml:2,mt:1},variant:"h6",fontWeight:"bold",children:"  "}),ae(pt,{sx:{mr:3,mt:1},onClick:()=>n().then((e=>{e&&l((t=>[...t,{...e,id:u()}]))})),children:ae(ra,{})})]}),ae(ge,{dense:!0,disablePadding:!0,children:o.map(((e,t)=>ae(Cs,{sx:{...t%2==0&&{background:"#ccc2"}},id:e.id,name:e.name,phone:e.phone,onChange:e=>l((t=>t.map((t=>t.id===e.id?e:t)))),onRemove:({id:e})=>l((t=>t.filter((t=>t.id!==e))))})))}),ae(he,{sx:{flex:1}})]})},Ls=" ,    ?",Ms="",Bs=Ke.createLoader(24),Ds=e=>e&&" "!==e?{type:i.Paper,fieldBottomMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:" "})},{type:i.Combo,outlined:!1,name:"kontakt",title:"",itemList:[" "," "]},{type:i.Text,outlined:!1,name:"naimenovanie_organizaczii",title:" "},{type:i.Text,outlined:!1,name:"fio",title:"..."},{type:i.Text,description:"",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon",title:""},{type:i.Combo,outlined:!1,name:"tip_klienta",title:" ",itemList:[""," ","","",""]},{type:i.Combo,outlined:!1,name:"status_klienta",title:" ",itemList:["VIP-",""," "," "," "]},{type:i.Combo,outlined:!1,name:"loyalnost_klienta",title:" ",itemList:["","",""]},{type:i.Date,outlined:!1,name:"data-sozdaniya_klienta",title:"  "},{type:i.Text,outlined:!1,name:"fakticheskij_adres",title:" "},{type:i.Text,outlined:!1,name:"email",title:"Email"},{type:i.Fragment,isVisible:()=>{let e=!0;return e=e&&!Dr.routerService.location.pathname.includes("bid_view"),e=e&&!Dr.routerService.location.pathname.includes("bid_edit"),e},fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"subtitle2",fontWeight:"bold",sx:{textDecoration:"underline",mt:2,mb:1},children:""})},{type:i.Text,outlined:!1,name:"kadastrovyj-nomer_obekta",title:"  "},{type:i.Text,outlined:!1,name:"kadastrovyj-nomer_zemli",title:"  "}]}]}:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"0",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:" "})},{type:i.Combo,outlined:!1,name:"kontakt",title:"",itemList:[" "," "]},{type:i.Text,outlined:!1,name:"fio",title:"..."},{type:i.Text,description:"",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon",title:""},{type:i.Combo,outlined:!1,name:"tip_klienta",title:" ",itemList:[""," ","","",""]},{type:i.Combo,outlined:!1,name:"status_klienta",title:" ",itemList:["VIP-",""," "," "," "]},{type:i.Combo,outlined:!1,name:"loyalnost_klienta",title:" ",itemList:["","",""]},{type:i.Date,outlined:!1,name:"data-sozdaniya_klienta",title:"  "},{type:i.Text,outlined:!1,name:"fakticheskij_adres",title:" "},{type:i.Text,outlined:!1,name:"email",title:"Email"},{type:i.Fragment,isVisible:()=>{let e=!0;return e=e&&!Dr.routerService.location.pathname.includes("bid_view"),e=e&&!Dr.routerService.location.pathname.includes("bid_edit"),e},fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"subtitle2",fontWeight:"bold",sx:{textDecoration:"underline",mt:2,mb:1},children:""})},{type:i.Text,outlined:!1,name:"kadastrovyj-nomer_obekta",title:"  "},{type:i.Text,outlined:!1,name:"kadastrovyj-nomer_zemli",title:"  "}]}]},js=e=>e&&" "!==e?{type:i.Paper,fieldBottomMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:" "})},{type:i.Text,outlined:!1,name:"seriya-i-nomer_pasporta",title:"   "},{type:i.Date,outlined:!1,name:"data_rozhdeniya",title:" "},{type:i.Combo,outlined:!1,name:"pol",title:"",itemList:["",""]},{type:i.Date,outlined:!1,name:"data-vydachi_pasporta",title:"  "},{type:i.Text,outlined:!1,name:"kem_vydan",title:" "},{type:i.Text,outlined:!1,name:"adres_registraczii",title:" "},{type:i.Text,outlined:!1,name:"pinfl",title:""},{type:i.Text,outlined:!1,name:"inn",title:""},{type:i.Text,outlined:!1,name:"dolzhnost_rukovoditelya",title:" "},{type:i.Combo,outlined:!1,name:"osnovanie-deyatelnosti-dannogo_licza",title:"   ",itemList:["  "," "]},{type:i.Text,outlined:!1,name:"yuridicheskij_adres",title:" "},{type:i.Text,outlined:!1,name:"sertifikat_kompanii",title:"  ()"},{type:i.Text,outlined:!1,name:"rekvizity",title:""}]}:{type:i.Paper,fieldBottomMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:" "})},{type:i.Text,outlined:!1,name:"seriya-i-nomer_pasporta",title:"   "},{type:i.Date,outlined:!1,name:"data_rozhdeniya",title:" "},{type:i.Combo,outlined:!1,name:"pol",title:"",itemList:["",""]},{type:i.Date,outlined:!1,name:"data-vydachi_pasporta",title:"  "},{type:i.Text,outlined:!1,name:"kem_vydan",title:" "},{type:i.Text,outlined:!1,name:"adres_registraczii",title:" "},{type:i.Text,outlined:!1,name:"pinfl",title:""},{type:i.Text,outlined:!1,name:"inn",title:""},{type:i.Text,outlined:!1,name:"rekvizity",title:""}]},qs=e=>"desktop"===e?{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"0",innerPadding:"0",tabletHidden:!0,phoneHidden:!0,child:{type:i.Component,element:Is}}:{type:i.Paper,fieldBottomMargin:"1",innerPadding:"0",desktopHidden:!0,child:{type:i.Component,element:Is}},Rs=e=>e&&" "!==e?[{type:i.Paper,fieldBottomMargin:"1",sx:{padding:"0 !important"},isVisible:e=>e.contact_files&&e.contact_files.length,child:{type:i.Component,element:({contact_files:e,onChange:t})=>{const a=St({title:Ms,msg:Ls});return ae(ge,{children:null==e?void 0:e.map(((i,o)=>ae(Ee,{disableGutters:!0,secondaryAction:ae(na,{onClick:()=>{const o=Vt(e)||[];a().then((e=>{e&&t({contact_files:o.filter((e=>e!==i))})}))},children:ae(ot,{})}),children:ae(ke,{onClick:async()=>{const e=await Dr.appwriteService.getFileURL(i),t=await Dr.appwriteService.readFileName(i);je(e,t)},children:ae(Ue,{payload:i,Loader:Bs,children:async e=>{const t=await Dr.appwriteService.readFileName(e);return ae(xe,{primary:t})}})})},"".concat(i,"-").concat(o))))})}}},{type:i.Paper,fieldBottomMargin:"0",fields:[{type:i.Component,element:({_fieldData:e,onChange:t})=>ae(Ts,{fieldData:e,onChange:t})}]}]:[{type:i.Paper,fieldBottomMargin:"1",sx:{padding:"0 !important"},isVisible:e=>e.contact_files&&e.contact_files.length,child:{type:i.Component,element:({contact_files:e,onChange:t})=>{const a=St({title:Ms,msg:Ls});return ae(ge,{children:null==e?void 0:e.map(((i,o)=>ae(Ee,{disableGutters:!0,secondaryAction:ae(na,{onClick:()=>{const o=Vt(e)||[];a().then((e=>{e&&t({contact_files:o.filter((e=>e!==i))})}))},children:ae(ot,{})}),children:ae(ke,{onClick:async()=>{const e=await Dr.appwriteService.getFileURL(i),t=await Dr.appwriteService.readFileName(i);je(e,t)},children:ae(Ue,{payload:i,Loader:Bs,children:async e=>{const t=await Dr.appwriteService.readFileName(e);return ae(xe,{primary:t})}})})},"".concat(i,"-").concat(o))))})}}},{type:i.Paper,fieldBottomMargin:"0",fields:[{type:i.Component,element:({_fieldData:e,onChange:t})=>ae(Ts,{fieldData:e,onChange:t})}]}],Ps=[{type:i.Init,name:"contact_phones",defaultValue:null},{type:i.Init,name:"contact_names",defaultValue:null},{type:i.Fragment,isVisible:e=>!e.kontakt||!!lt(e.kontakt," "),fields:[{type:i.Group,fieldBottomMargin:"0",fieldRightMargin:"1",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",phoneHidden:!0,tabletHidden:!0,fields:[Ds(" "),qs("desktop")]},{type:i.Group,fieldBottomMargin:"0",fieldRightMargin:"0",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",desktopHidden:!0,fields:[Ds(" "),qs("desktop")]},{type:i.Group,fieldBottomMargin:"1",fieldRightMargin:"0",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",fields:[js(" "),qs("mobile"),...Rs(" ")]}]},{type:i.Fragment,isVisible:e=>!!lt(e.kontakt," "),fields:[{type:i.Group,fieldBottomMargin:"0",fieldRightMargin:"1",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",phoneHidden:!0,tabletHidden:!0,fields:[Ds(" "),qs("desktop")]},{type:i.Group,fieldBottomMargin:"0",fieldRightMargin:"0",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",desktopHidden:!0,fields:[Ds(" "),qs("desktop")]},{type:i.Group,fieldBottomMargin:"1",fieldRightMargin:"0",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",fields:[js(" "),qs("mobile"),...Rs(" ")]}]},{type:i.Component,features:["withBottomSaveButton"],watchOneContext:!0,element:Fn}];window.contact_fields=Ps;const Es=[{type:ie.Link,action:"list-action",label:" "},{type:ie.Link,action:"list-action",isVisible:({id:e})=>"create"!==e,label:" "},{type:ie.Link,action:"list-action",isVisible:({id:e})=>"create"===e,label:" "},{type:ie.Button,isDisabled:({hasChanged:e})=>!e,action:"save-action",label:""}],Ns=" ,    ?",Us="",Hs=Ke.createLoader(24),Os=e=>e&&" "!==e?{type:i.Paper,fieldBottomMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:" "})},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"kontakt"),name:"kontakt",title:""},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"naimenovanie_organizaczii"),name:"naimenovanie_organizaczii",title:" "},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"fio"),name:"fio",title:"..."},{type:i.Text,description:"",features:["hasContactNumberPermission"],outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",isVisible:e=>fs(e,"telefon"),name:"telefon",title:""},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"tip_klienta"),name:"tip_klienta",title:" "},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"status_klienta"),name:"status_klienta",title:" "},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"loyalnost_klienta"),name:"loyalnost_klienta",title:" "},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"data-sozdaniya_klienta"),name:"data-sozdaniya_klienta",title:"  "},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"fakticheskij_adres"),name:"fakticheskij_adres",title:" "},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"email"),name:"email",title:"Email"},{type:i.Fragment,isVisible:()=>{let e=!0;return e=e&&!Dr.routerService.location.pathname.includes("bid_view"),e=e&&!Dr.routerService.location.pathname.includes("bid_edit"),e},fields:[{type:i.Component,fieldBottomMargin:"1",isVisible:e=>fs(e,"kadastrovyj-nomer_obekta","kadastrovyj-nomer_zemli"),element:()=>ae(le,{variant:"subtitle2",fontWeight:"bold",sx:{textDecoration:"underline",mt:2,mb:1},children:""})},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"kadastrovyj-nomer_obekta"),name:"kadastrovyj-nomer_obekta",title:"  "},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"kadastrovyj-nomer_zemli"),name:"kadastrovyj-nomer_zemli",title:"  "}]}]}:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"0",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:" "})},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"kontakt"),name:"kontakt",title:""},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"fio"),name:"fio",title:"..."},{type:i.Text,description:"",features:["hasContactNumberPermission"],outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",isVisible:e=>fs(e,"telefon"),name:"telefon",title:""},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"tip_klienta"),name:"tip_klienta",title:" "},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"status_klienta"),name:"status_klienta",title:" "},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"loyalnost_klienta"),name:"loyalnost_klienta",title:" "},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"data-sozdaniya_klienta"),name:"data-sozdaniya_klienta",title:"  "},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"fakticheskij_adres"),name:"fakticheskij_adres",title:" "},{type:i.Text,isVisible:e=>fs(e,"email"),outlined:!1,name:"email",title:"Email"},{type:i.Fragment,isVisible:()=>{let e=!0;return e=e&&!Dr.routerService.location.pathname.includes("bid_view"),e=e&&!Dr.routerService.location.pathname.includes("bid_edit"),e},fields:[{type:i.Component,fieldBottomMargin:"1",isVisible:e=>fs(e,"kadastrovyj-nomer_obekta","kadastrovyj-nomer_zemli"),element:()=>ae(le,{variant:"subtitle2",fontWeight:"bold",sx:{textDecoration:"underline",mt:2,mb:1},children:""})},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"kadastrovyj-nomer_obekta"),name:"kadastrovyj-nomer_obekta",title:"  "},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"kadastrovyj-nomer_zemli"),name:"kadastrovyj-nomer_zemli",title:"  "}]}]},Ws=e=>e&&" "!==e?{type:i.Paper,isVisible:e=>fs(e,"seriya-i-nomer_pasporta","data_rozhdeniya","pol","data-vydachi_pasporta","kem_vydan","adres_registraczii","pinfl","inn","dolzhnost_rukovoditelya","osnovanie-deyatelnosti-dannogo_licza","yuridicheskij_adres","sertifikat_kompanii","rekvizity"),fieldBottomMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:" "})},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"seriya-i-nomer_pasporta"),name:"seriya-i-nomer_pasporta",title:"   "},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"data_rozhdeniya"),name:"data_rozhdeniya",title:" "},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"pol"),name:"pol",title:""},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"data-vydachi_pasporta"),name:"data-vydachi_pasporta",title:"  "},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"kem_vydan"),name:"kem_vydan",title:" "},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"adres_registraczii"),name:"adres_registraczii",title:" "},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"pinfl"),name:"pinfl",title:""},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"inn"),name:"inn",title:""},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"dolzhnost_rukovoditelya"),name:"dolzhnost_rukovoditelya",title:" "},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"osnovanie-deyatelnosti-dannogo_licza"),name:"osnovanie-deyatelnosti-dannogo_licza",title:"   "},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"yuridicheskij_adres"),name:"yuridicheskij_adres",title:" "},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"sertifikat_kompanii"),name:"sertifikat_kompanii",title:"  ()"},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"rekvizity"),name:"rekvizity",title:""}]}:{type:i.Paper,isVisible:e=>fs(e,"seriya-i-nomer_pasporta","data_rozhdeniya","pol","data-vydachi_pasporta","kem_vydan","adres_registraczii","pinfl","inn","rekvizity"),fieldBottomMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:" "})},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"seriya-i-nomer_pasporta"),name:"seriya-i-nomer_pasporta",title:"   "},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"data_rozhdeniya"),name:"data_rozhdeniya",title:" "},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"pol"),name:"pol",title:""},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"data-vydachi_pasporta"),name:"data-vydachi_pasporta",title:"  "},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"kem_vydan"),name:"kem_vydan",title:" "},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"adres_registraczii"),name:"adres_registraczii",title:" "},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"pinfl"),name:"pinfl",title:""},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"inn"),name:"inn",title:""},{type:i.Text,outlined:!1,isVisible:e=>fs(e,"rekvizity"),name:"rekvizity",title:""}]},$s=e=>"desktop"===e?{type:i.Paper,features:["hasContactNumberPermission"],fieldRightMargin:"0",innerPadding:"0",tabletHidden:!0,phoneHidden:!0,child:{type:i.Component,isVisible:e=>fs(e,"contact_phones","contact_names"),element:Is}}:{type:i.Paper,features:["hasContactNumberPermission"],fieldBottomMargin:"1",innerPadding:"0",desktopHidden:!0,child:{type:i.Component,isVisible:e=>fs(e,"contact_phones","contact_names"),element:Is}},Gs=e=>e&&" "!==e?[{type:i.Paper,fieldBottomMargin:"1",sx:{padding:"0 !important"},isVisible:e=>e.contact_files&&e.contact_files.length,child:{type:i.Component,element:({contact_files:e,onChange:t,readonly:a})=>{const i=St({title:Us,msg:Ns});return ae(ge,{sx:{pointerEvents:"all"},children:null==e?void 0:e.map(((o,l)=>ae(Ee,{disableGutters:!0,secondaryAction:ae(na,{disabled:a,onClick:()=>{const a=Vt(e)||[];i().then((e=>{e&&t({contact_files:a.filter((e=>e!==o))})}))},children:ae(ot,{})}),children:ae(ke,{onClick:async()=>{const e=await Dr.appwriteService.getFileURL(o),t=await Dr.appwriteService.readFileName(o);je(e,t)},children:ae(Ue,{payload:o,Loader:Hs,children:async e=>{const t=await Dr.appwriteService.readFileName(e);return ae(xe,{primary:t})}})})},"".concat(o,"-").concat(l))))})}}}]:[{type:i.Paper,fieldBottomMargin:"1",sx:{padding:"0 !important"},isVisible:e=>e.contact_files&&e.contact_files.length,child:{type:i.Component,element:({contact_files:e,onChange:t,readonly:a})=>{const i=St({title:Us,msg:Ns});return ae(ge,{sx:{pointerEvents:"all"},children:null==e?void 0:e.map(((o,l)=>ae(Ee,{disableGutters:!0,secondaryAction:ae(na,{disabled:a,onClick:()=>{const a=Vt(e)||[];i().then((e=>{e&&t({contact_files:a.filter((e=>e!==o))})}))},children:ae(ot,{})}),children:ae(ke,{onClick:async()=>{const e=await Dr.appwriteService.getFileURL(o),t=await Dr.appwriteService.readFileName(o);je(e,t)},children:ae(Ue,{payload:o,Loader:Hs,children:async e=>{const t=await Dr.appwriteService.readFileName(e);return ae(xe,{primary:t})}})})},"".concat(o,"-").concat(l))))})}}}],Ys=[{type:i.Init,name:"contact_phones",defaultValue:null},{type:i.Init,name:"contact_names",defaultValue:null},{type:i.Fragment,isVisible:e=>!e.kontakt||!!lt(e.kontakt," "),fields:[{type:i.Group,fieldBottomMargin:"0",fieldRightMargin:"1",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",phoneHidden:!0,tabletHidden:!0,fields:[Os(" "),$s("desktop")]},{type:i.Group,fieldBottomMargin:"0",fieldRightMargin:"0",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",desktopHidden:!0,fields:[Os(" "),$s("desktop")]},{type:i.Group,fieldBottomMargin:"0",fieldRightMargin:"0",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",fields:[Ws(" "),$s("mobile"),...Gs(" ")]}]},{type:i.Fragment,isVisible:e=>!!lt(e.kontakt," "),fields:[{type:i.Group,fieldBottomMargin:"0",fieldRightMargin:"1",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",phoneHidden:!0,tabletHidden:!0,fields:[Os(" "),$s("desktop")]},{type:i.Group,fieldBottomMargin:"0",fieldRightMargin:"0",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",desktopHidden:!0,fields:[Os(" "),$s("desktop")]},{type:i.Group,fieldBottomMargin:"0",fieldRightMargin:"0",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",fields:[Ws(" "),$s("mobile"),...Gs(" ")]}]}];window.contact_fields=Ys;const Ks=[{type:ie.Link,action:"list-action",label:" "},{type:ie.Link,action:"list-action",label:" "},{type:ie.Button,isDisabled:({payload:{permissions:e}})=>!e.hasApartmentUpdatePermission,action:"edit-action",label:""}],Zs=async e=>{const{contact_id:t}=await Dr.apartmentViewService.read(e);return t},Xs=Ke.createLoader(28),Js=[{type:i.Text,outlined:!0,name:"email",title:"Email"},{type:i.Text,outlined:!0,name:"phone",title:""}],Qs=[{type:Ze.Component,sortable:!1,headerName:"",width:()=>65,element:({avatar:e,email:t})=>ae(Ue,{Loader:Xs,children:async()=>{const a=e?await Dr.appwriteService.getImageURL(e):"";return ae(he,{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:ae(Oe,{src:a||void 0,alt:t})})}})},{type:Ze.Compute,sortable:!1,headerName:"",compute:({first_name:e="",last_name:t="",middle_name:a=""})=>[e,t,a].filter((e=>e.length)).join(" ")||"Unset",width:e=>Math.max(e/3-65,200)},{type:Ze.Compute,sortable:!1,compute:({phone:e})=>e||"Unset",field:"phone",headerName:"",width:e=>Math.max(e/3-65,200)},{type:Ze.Compute,sortable:!1,compute:({email:e})=>e||"Unset",field:"email",headerName:"Email",width:e=>Math.max(e/3-65,200)}],ed=({payload:e})=>{const t=ks(),a=_t(),{pickData:i,render:o,open:l}=ea({withSearch:!0,withLoader:!0,slots:{FilterListSlot:sa},noInitialFilters:!0,fetchDebounce:so,reloadSubject:Dr.userViewService.reloadSubject,selectionMode:gt.Single,onSubmit:e=>(a.next(e),!0),filterLabel:" ",filters:Js,columns:Qs,handler:t,payload:e});return{pickData:i,render:o,resultSubject:a,open:l}},td=jr()({container:{alignItems:"center",backgroundColor:"#F7F7F7",border:"1px solid #ECECEC",boxShadow:"0 4px 16px 0px rgba(0,0,0,0.2)",display:"flex",gap:8,justifyContent:"stretch",minHeight:"72px",padding:"10px 24px",borderRadius:"0 0 8px 8px"},textInput:{flex:1,"& textarea::-webkit-scrollbar":{display:"none"}},contained:{color:"#FFFFFF",backgroundColor:"#3578E5","&:hover":{backgroundColor:"#3578E5"}}}),ad=[{type:i.Choose,fieldBottomMargin:"3",fieldRightMargin:"0",choose:async(e,t)=>{t.pickData(e.user_id?[e.user_id]:[]);const a=await t.resultSubject.toPromise();if(a&&a.length){const[e]=a;return e}return null},tr:async e=>{const t=await Dr.userViewService.tryRead(e);return[null==t?void 0:t.last_name,null==t?void 0:t.first_name,null==t?void 0:t.middle_name].filter((e=>e)).join(" ")||(null==t?void 0:t.$id)||""},name:"user_id",title:"",placeholder:""},{type:i.Text,fieldBottomMargin:"0",fieldRightMargin:"0",placeholder:" ",inputRows:3,labelShrink:!0,name:"comment",title:""}],id=()=>{const e=Yu(),t=Vl("id");if(e&&t){if(e.path.includes("apartment"))return"/apartment_view/".concat(t,"/service_comment");if(e.path.includes("bid"))return"/bid_view/".concat(t,"/service_comment")}return""},od=({addMessage:e=(()=>null),addFile:t=(()=>null),payload:a})=>{const{classes:i}=td(),[o,l]=se.useState(""),{pickData:r,render:n,resultSubject:s}=ed({payload:a}),{handleLoadStart:d,handleLoadEnd:m,loading:c}=de({history:Dr.routerService,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1)}),u=wt({title:" ",fields:ad,payload:{pickData:r,resultSubject:s}});return ae("div",{className:i.container,children:[ae(da,{className:i.textInput,readOnly:c,value:o,onChange:({target:e})=>l(e.value),placeholder:" ",multiline:!0,maxRows:5}),ae(Qe,{condition:async()=>(await Dr.permissionService.getPermissions()).hasUserServiceCommentMentionPermission,children:ae(na,{disabled:c,onClick:async()=>{const t=await u().toPromise();if(!t)return;if(!t.user_id||!t.comment)return void Dr.alertService.notify("   ");const{user_id:a,comment:i}=t,{first_name:o}=await Dr.userViewService.read(a),r=['<blank-link href="/user_view/'.concat(a,'">@').concat(o,"</blank-link>"),i].join("\n");await Dr.notifyViewService.create({title:"    ",user_id:a,url:id()}),await e(r),l("")},onLoadStart:d,onLoadEnd:m,children:ae(ma,{})})}),ae(Qe,{condition:async()=>(await Dr.permissionService.getPermissions()).hasUserServiceCommentAddingFilePermission,children:ae(na,{disabled:c,onClick:async()=>{const a=await Ct();if(a){for(const e of a){const a=await Dr.appwriteService.uploadFile(e);await t(o,a)}o&&await e(o),l("")}},onLoadStart:d,onLoadEnd:m,children:ae(ca,{})})}),ae(_e,{disabled:c,className:i.contained,onClick:async()=>{o&&(await e(o),l(""))},onLoadStart:d,onLoadEnd:m,variant:"contained",size:"large",children:ae(At,{children:ae(ua,{})})}),n()]})},ld=jr()(((e,t,a)=>({newMessage:{backgroundColor:"#3578E5",borderRadius:"8px",color:"#FFFFFF",display:"flex",fontFamily:"Roboto, sans-serif",padding:12,paddingRight:0,width:"65%","& pre":{margin:0}},newFile:{backgroundColor:"#3578E5",overflow:"hidden",borderRadius:"8px",color:"#FFFFFF",display:"flex",fontFamily:"Roboto, sans-serif",width:"65%"},newMessageContainer:{display:"flex",flex:"0 0 auto",justifyContent:"flex-end",width:"100%",paddingBottom:"12px"},receivedMessage:{backgroundColor:"#FFFFFF",borderRadius:"8px",display:"flex",padding:12,paddingRight:0,fontFamily:"Roboto, sans-serif",width:"65%"},recievedFile:{backgroundColor:"#FFFFFF",overflow:"hidden",borderRadius:"8px",display:"flex",fontFamily:"Roboto, sans-serif",width:"65%"},receivedMessageContainer:{display:"flex",flex:"0 0 auto",justifyContent:"flex-start",flexDirection:"row-reverse",width:"100%",paddingBottom:"12px","& pre":{margin:0}},receivedMessageSender:{paddingRight:10,paddingTop:5},stretch:{flex:1},copy:{width:"100%",alignItems:"flex-start !important"}}))),rd=({sessionData:e})=>{const{classes:t}=ld(),{handleLoadStart:a,handleLoadEnd:i}=de({history:Dr.routerService,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1)}),{execute:o}=Ie((async()=>{if(e.fileId){const t=await Dr.appwriteService.getFileURL(e.fileId),a=await Dr.appwriteService.readFileName(e.fileId);je(t,a)}}),{onLoadStart:a,onLoadEnd:i});return ae("div",{children:e.userId===Dr.appwriteService.currentUser.$id?ae("div",{className:t.newMessageContainer,children:e.fileId?ae(Ee,{disablePadding:!0,className:t.newFile,onClick:()=>o(),children:ae(ke,{children:[ae(Ne,{children:ae(Oe,{children:ae(pa,{})})}),ae(xe,{primary:e.fileName||""})]})}):ae("div",{className:t.newMessage,children:ae(Xe,{onCopyClick:()=>Dr.alertService.notify("    "),className:t.copy,sx:{"& svg":{color:"white"}},content:We.sanitize(e.message),children:ae("pre",{children:ae(We,{config:Jr,handler:()=>e.message})})})})}):ae("div",{className:t.receivedMessageContainer,children:[ae("div",{className:t.stretch}),e.fileId?ae(Ee,{disablePadding:!0,className:t.recievedFile,onClick:()=>o(),children:ae(ke,{children:[ae(Ne,{children:ae(Oe,{children:ae(pa,{})})}),ae(xe,{primary:e.fileName||""})]})}):ae("div",{className:t.receivedMessage,children:ae(Xe,{onCopyClick:()=>Dr.alertService.notify("    "),className:t.copy,content:We.sanitize(e.message),children:ae("pre",{children:ae(We,{config:Jr,handler:()=>e.message})})})}),ae("div",{className:t.receivedMessageSender,children:ae(ya,{title:e.displayName,children:ae(Oe,{src:e.avatar,style:{height:28,width:28}})})})]})})},nd=jr()({container:{backgroundColor:"#F0F0F0",borderRadius:"8px",overflow:"hidden",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"stretch",height:"100%",width:"100%"},content:{padding:"8px",flex:1}}),sd=({className:e,style:t,messages:a,payload:i,onText:o,onFile:l})=>{const{classes:r,cx:n}=nd(),s=se.useMemo((()=>(null==a?void 0:a.length)?a[(null==a?void 0:a.length)-1]:null),[a]),d=se.useCallback(((e=!1)=>{const t=Dr.appwriteService.currentUser.$id;return!(!e&&(null==s?void 0:s.userId)!==t)&&"auto"}),[s]),m=se.useCallback(((e,t)=>ae(rd,{sessionData:t},"".concat(t.id,"-").concat(e))),[]);return ae("div",{className:n(r.container,e),style:t,children:[ae("div",{className:r.content,children:ae(ha,{data:a,followOutput:d,initialTopMostItemIndex:null==a?void 0:a.length,itemContent:m,computeItemKey:e=>{const t=a[e];return(null==t?void 0:t.id)||u()}})}),ae(od,{payload:i,addMessage:o,addFile:l})]})},dd="real-estate__headerRoot",md=[{type:ie.Link,action:"list-action",label:" "},{type:ie.Link,action:"list-action",label:" "}],cd=se.forwardRef((({item:e,loading:t,className:a,style:i},o)=>ae("div",{className:a,style:i,ref:o,children:ae(ce,{sx:{position:"relative",overflow:"hidden"},children:[ae(Ee,{children:[ae(Ne,{children:ae(Ue,{loading:t,payload:e,Loader:()=>ae(He,{variant:"circular",width:40,height:40}),children:async({user_id:e})=>{const t=await Dr.userViewService.tryRead(e),a=(null==t?void 0:t.avatar)?await Dr.appwriteService.getImageURL(t.avatar):void 0;return ae(Oe,{alt:null==t?void 0:t.email,src:a,sx:{height:40,mr:2,width:40}})}})}),ae(Ue,{loading:t,payload:e,Loader:()=>ae(be,{flex:1,children:[ae(He,{sx:{mb:1},variant:"rectangular",width:210,height:22}),ae(He,{variant:"rectangular",width:170,height:22})]}),children:async({user_id:e})=>{const t=await Dr.userViewService.tryRead(e),a=[null==t?void 0:t.first_name,null==t?void 0:t.last_name,null==t?void 0:t.middle_name].filter((e=>e)).join(" "),i=await(async()=>{var e;if(null==(e=null==t?void 0:t.user_role)?void 0:e.length){const e=await Dr.roleViewService.tryRead(t.user_role[0]);return(null==e?void 0:e.title)||""}return""})();return ae(xe,{primary:a,secondary:i})}}),ae(le,{children:r(e.$createdAt).format("HH:mm DD/MM/YYYY")})]}),!!e.comment&&ae(he,{component:"pre",sx:{ml:1,mr:1,mb:1},children:ae(We,{config:Jr,handler:()=>e.comment})}),ae(he,{sx:{position:"absolute",top:0,left:0,bottom:0,width:6,zIndex:1,background:"skyblue"}})]})}))),ud="real-estate__headerRoot",pd=[{type:ie.Link,action:"list-action",label:" "},{type:ie.Link,action:"list-action",label:" "}],yd=[{id:"list",element:({payload:e})=>ae(kt,{history:Dr.routerService,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1),routes:wn,payload:e}),isActive:e=>Ur(["/apartment","/apartment_rent","/apartment_sell","/apartment_archive"],e),isAvailable:()=>!1},{id:"create",element:()=>{const{elementRef:e,size:t}=ne(),[a,i]=se.useState((()=>({activeStep:0,contact_id:null,fio:"",telefon:""}))),[o,l]=se.useState([]),[r,n]=se.useState(!1),[s,d]=se.useState(!1),m=se.useMemo((()=>new Date(Date.now()+1e4)),[a.activeStep]);se.useEffect((()=>{d(!1)}),[a.activeStep]);const c=e=>i((t=>({...t,activeStep:e}))),{activeStep:u}=a,{classes:p}=Pr(),{handleLoadStart:y,handleLoadEnd:h,loading:b,unblock:_}=de({history:Dr.routerService,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1)}),v=async()=>{if(n(!0),a.fio||a.telefon){if(0===u){const{rows:e,total:t}=await Dr.contactRequestService.findDuplicates(a);l(e),c(0===t?2:1)}1===u&&c(2),2===u&&await(async()=>{try{let{contact_id:e,fio:t,telefon:i}=a;e||(e=(await Dr.contactViewService.create({fio:t,telefon:i,"data-sozdaniya_klienta":Ae.currentDate()})).$id);const{id:o}=await Dr.apartmentViewService.create({contact_id:e});_(),Dr.routerService.push("/apartment_edit/".concat(o),{viewRedirectFlag:!0})}catch(e){Dr.alertService.notify(xr(e))}})()}},f=()=>{let e=!1;return 1===u&&(e=e||!s),e=e||b,e=e||3===u,e};return ae(ve,{children:[ae(me,{items:Rr}),ae(ce,{className:p.root,children:[ae(ue,{className:p.header,activeStep:u,children:[ae(pe,{completed:u>0,children:ae(ye,{children:" "})},0),ae(pe,{completed:u>1,children:ae(ye,{children:" "})},1),ae(pe,{completed:u>2,children:ae(ye,{children:" "})},2)]}),ae("div",{className:p.adjust}),ae(he,{ref:e,className:p.content,children:0===u?ae(fe,{sx:{pl:1,pr:1,pt:2,pb:3},handler:a,onChange:i,dirty:r,fields:qr}):1===u?ae(Fe,{sx:{height:t.height},component:ge,minRowHeight:54,children:o.map((({fio:e,telefon:t,$id:o,tip_klienta:l},r)=>ae(ke,{className:we({[p.listItemBackground]:r%2==1}),onClick:()=>{i((e=>({...e,contact_id:o,activeStep:2})))},dense:!0,children:[ae(Se,{children:ae(ze,{edge:"start",checked:a.contact_id===o,sx:{marginLeft:"0 !important"},disableRipple:!0})}),ae(xe,{primary:e,secondary:l}),ae(le,{children:t})]},r)))}):2===u?ae(fe,{sx:{pl:1,pr:1,pt:2,pb:3},handler:a,dirty:r,fields:qr}):null}),ae(be,{sx:{pl:1,pr:1,pb:1},justifyContent:"space-between",flexDirection:"row",children:[ae(_e,{disabled:b||0===u,fallback:Dr.errorService.handleGlobalError,onClick:()=>{i((e=>({...e,contact_id:null}))),0===o.length?c(0):c(u-1)},sx:{mt:1},variant:"contained",onLoadStart:y,onLoadEnd:h,children:""}),ae(_e,1===u?{disabled:f(),fallback:Dr.errorService.handleGlobalError,onClick:v,sx:{mt:1},variant:"contained",onLoadStart:y,onLoadEnd:h,children:ae(Te,{expireAt:m,onExpire:()=>d(!0),children:"  "})}:2===u?{disabled:f(),fallback:Dr.errorService.handleGlobalError,onClick:v,sx:{mt:1},variant:"contained",onLoadStart:y,onLoadEnd:h,children:" "}:{disabled:f(),fallback:Dr.errorService.handleGlobalError,onClick:v,sx:{mt:1},variant:"contained",onLoadStart:y,onLoadEnd:h,children:""})]})]})]})},isActive:e=>Ur(["/apartment/create"],e),isAvailable:()=>!1},{id:"object",element:({beginSave:e,onChange:t,payload:a,data:i,formState:o})=>{const l=$t(i);return ae(Le,{children:[ae(me,{items:as,payload:o,onAction:t=>{"list-action"===t&&Dr.routerService.push("/apartment"),"save-action"===t&&e()}}),ae(Er,{}),ae(Wr,{payload:a,mode:a.menuMode,children:[ae(fe,{fields:ts,changeSubject:l,features:()=>({...a.permissions,withBottomSaveButton:!0}),payload:()=>({...a,beginSave:e}),context:o,onChange:t,handler:()=>i}),ae(qe,{}),ae(Re,{})]})]})},isActive:e=>Ur(["/apartment_edit/:id","/apartment_edit/:id/object"],e)},{id:"documents",element:({onChange:e,payload:t,beginSave:a,formState:i,data:o})=>{const{handleLoadStart:l,handleLoadEnd:r,loading:n}=de({history:Dr.routerService,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1)});return ae(Le,{children:[ae(me,{items:$r,payload:i,onAction:e=>{"list-action"===e&&Dr.routerService.push("/apartment"),"save-action"===e&&a()}}),ae(Er,{}),ae(Wr,{payload:t,mode:t.menuMode,children:[ae(ce,{sx:{p:1},children:ae(De,{disabled:n,accept:"*",multiple:!0,items:o,tr:async e=>await Dr.appwriteService.tryReadFileName(e)||e,fallback:Dr.errorService.handleGlobalError,onClick:async e=>{const t=await Dr.appwriteService.getFileURL(e),a=await Dr.appwriteService.readFileName(e);je(t,a)},onUpload:e=>Dr.appwriteService.uploadFile(e),onChange:async t=>{e(t)},onLoadStart:l,onLoadEnd:r})}),ae(qe,{}),ae(Re,{})]})]})},isActive:e=>Ur(["/apartment_edit/:id/documents"],e)},{id:"owner_contact",element:({data:e,payload:t,formState:a,onChange:i,beginSave:o})=>{const l=$t(e);return ae(Le,{children:[ae(me,{items:Es,onAction:e=>{"list-action"===e&&Dr.routerService.push("/apartment"),"save-action"===e&&o()},payload:a}),ae(Er,{}),ae(Wr,{payload:t,mode:t.menuMode,children:[ae(fe,{handler:()=>e,onChange:i,features:()=>({...t.permissions,withBottomSaveButton:!0}),payload:()=>({...t,beginSave:o}),context:a,changeSubject:l,fields:Ps}),ae(qe,{}),ae(Re,{})]})]})},isActive:e=>Ur(["/apartment_edit/:id/owner_contact"],e)},{id:"object",element:({params:{id:e},formState:t,payload:a,data:i})=>{const{pickData:o,render:l}=oa({fields:ts,payload:a,features:a.permissions,outlinePaper:!0,handler:async()=>await Dr.apartmentViewService.tryRead(e),fullScreen:!0,title:"",onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1),onSubmit:async t=>{let a=!0;try{t&&await Dr.apartmentViewService.update(e,t)}catch(i){a=!1;const e=xr(i);return Dr.alertService.notify(e),!1}finally{return a}},submitLabel:""});console.log({formState:t});const r=(({title:e,payload:t,features:a,selectedRows:i=Ss,selectionMode:o=gt.Multiple})=>{const l=ks(),r=ia({title:e,selectedRows:i,columns:zs,handler:l,payload:t,features:a,selectionMode:o}),{handleLoadStart:n,handleLoadEnd:s}=de({history:Dr.routerService,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1)}),{execute:d}=Ie((async()=>await r().toPromise()),{onLoadStart:n,onLoadEnd:s,fallback:Dr.errorService.handleGlobalError});return d})({title:" ",payload:a,features:a.permissions,selectedRows:i.system_allowance||[]}),n=$t(i);return ae(Le,{children:[ae(me,{payload:t,items:xs,actions:Fs,onAction:async t=>{"list-action"===t&&Dr.routerService.push("/apartment"),"edit-action"===t&&o(),"toggle-only-for-owner-action"===t&&await Dr.apartmentViewService.toggleOnlyForOwner(e),"pick-allowance-action"===t&&r().then(console.log)}}),ae(Er,{}),ae(Kr,{payload:a,mode:a.menuMode,children:[ae(fe,{dirty:!0,readonly:!0,changeSubject:n,features:a.permissions,payload:a,fields:gs,handler:()=>i}),ae(qe,{}),ae(Re,{})]}),l()]})},isActive:e=>Ur(["/apartment_view/:id","/apartment_view/:id/object"],e)},{id:"owner_contact",element:({params:{id:e},payload:t,formState:a,data:i})=>{const o=$t(i),{pickData:l,render:r}=oa({fields:Ps,payload:t,features:t.permissions,outlinePaper:!0,handler:async()=>{const t=await Zs(e);return await Dr.contactViewService.tryRead(t)},fullScreen:!0,title:"",onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1),onSubmit:async t=>{let a=!0;try{if(t){const a=await Zs(e);await Dr.contactViewService.update(a,t)}}catch(i){a=!1;const e=xr(i);return Dr.alertService.notify(e),!1}finally{return a}},submitLabel:""});return ae(Le,{children:[ae(me,{items:Ks,payload:a,onAction:async e=>{"list-action"===e&&Dr.routerService.push("/apartment"),"edit-action"===e&&l()}}),ae(Er,{}),ae(Kr,{payload:t,mode:t.menuMode,children:[ae(fe,{changeSubject:o,readonly:!0,handler:()=>i,features:t.permissions,fields:Ys,payload:t}),ae(qe,{}),ae(Re,{})]}),r()]})},isActive:e=>Ur(["/apartment_view/:id/owner_contact"],e)},{id:"documents",element:({params:{id:e},data:t,payload:a,formState:i})=>{const{render:o,pickFiles:l}=Zr({data:t,onSubmit:async t=>{await Dr.apartmentViewService.update(e,{apartment_files:t})}});return ae(Le,{children:[ae(me,{items:Xr,payload:i,onAction:e=>{"list-action"===e&&Dr.routerService.push("/apartment"),"edit-action"===e&&l()}}),ae(Er,{}),ae(Kr,{payload:a,mode:a.menuMode,children:[ae(ce,{sx:{p:1},children:ae(De,{disabled:!0,accept:"*",multiple:!0,items:t,tr:async e=>await Dr.appwriteService.tryReadFileName(e)||e,fallback:Dr.errorService.handleGlobalError,onClick:async e=>{const t=await Dr.appwriteService.getFileURL(e),a=await Dr.appwriteService.readFileName(e);je(t,a)},onUpload:e=>Dr.appwriteService.uploadFile(e)})}),ae(qe,{}),ae(Re,{})]}),o()]})},isActive:e=>Ur(["/apartment_view/:id/documents"],e)},{id:"tasks",element:({payload:e})=>{const[t,a]=se.useState([]),{size:i}=ne({target:document.body,selector:"main",compute:t=>{var a;let{height:i,width:o}=t;if(e.menuMode===C.Tabs){const e=document.querySelector(".".concat($e));i-=(null==e?void 0:e.offsetHeight)||0}return i-=(null==(a=document.querySelector(".".concat(ud)))?void 0:a.offsetHeight)||0,i-=50,i=Math.min(window.innerHeight-50,i),{width:o,height:i}}}),{loading:o,execute:l}=Ie((async e=>{if(e){const e=Vl("id")||"unknown",{contact_id:t}=await Dr.apartmentViewService.read(e),i=await Dr.taskHistoryViewService.findAllByContactId(t);a(i)}}),{fallback:Dr.errorService.handleGlobalError,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1)});return ae(Le,{children:[ae("div",{className:ud,children:[ae(me,{className:"",items:pd,onAction:e=>{"list-action"===e&&Dr.routerService.replace("/apartment")}}),ae(Er,{})]}),ae(Kr,{payload:e,mode:e.menuMode,children:ae(Fe,{sx:{height:i.height},minHeight:72,loading:o,onDataRequest:e=>{l(e)},children:ae(be,{spacing:1,children:t.map((e=>ae(cd,{loading:o,status:"info",item:e},e.$id)))})})})]})},isActive:e=>Ur(["/apartment_view/:id/tasks"],e)},{id:"history",element:({payload:e})=>{const[t,a]=se.useState([]),{size:i}=ne({target:document.body,selector:"main",compute:t=>{var a;let{height:i,width:o}=t;if(e.menuMode===C.Tabs){const e=document.querySelector(".".concat($e));i-=(null==e?void 0:e.offsetHeight)||0}return i-=(null==(a=document.querySelector(".".concat(en)))?void 0:a.offsetHeight)||0,i-=50,i=Math.min(window.innerHeight-50,i),{width:o,height:i}}}),{loading:o,execute:l}=Ie((async e=>{if(e){const e=Vl("id"),t=await Dr.dealHistoryViewService.findAllByApartmentId(e);a(t)}}),{fallback:Dr.errorService.handleGlobalError,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1)});return ae(Le,{children:[ae("div",{className:en,children:[ae(me,{className:"",items:tn,onAction:e=>{"list-action"===e&&Dr.routerService.replace("/apartment")}}),ae(Er,{})]}),ae(Kr,{payload:e,mode:e.menuMode,children:ae(Fe,{sx:{height:i.height},minHeight:72,loading:o,onDataRequest:e=>{l(e)},children:ae(be,{spacing:1,children:t.map((e=>ae(Qr,{loading:o,status:"info",item:e},e.$id)))})})})]})},isActive:e=>Ur(["/apartment_view/:id/history"],e)},{id:"service_comment",element:({payload:e,formState:t})=>{const[a,i]=se.useState([]),{size:o}=ne({target:document.body,selector:"main",compute:t=>{var a;let{height:i,width:o}=t;if(e.menuMode===C.Tabs){const e=document.querySelector(".".concat($e));i-=(null==e?void 0:e.offsetHeight)||0}return i-=(null==(a=document.querySelector(".".concat(dd)))?void 0:a.offsetHeight)||0,i-=50,i=Math.min(window.innerHeight-50,i),{width:o,height:i}}}),{execute:l}=Ie((async()=>{const e=Vl("id"),t=await Dr.serviceCommentViewService.findAllByApartmentId(e);i(await Promise.all(t.map((async({$id:e,user_id:t,file_id:a,comment:i,$createdAt:o})=>{const l=await Dr.userViewService.tryRead(t);if(!l)return null;const n=l.avatar?await Dr.appwriteService.getImageURL(l.avatar):"",s=a?await Dr.appwriteService.tryReadFileName(a):"";return{id:e,message:i,fileId:a,userId:t,displayName:[l.last_name,l.first_name,l.middle_name,r(o).format("DD.MM.YYYY / HH:mm")].join(" "),fileName:s,avatar:n}})).filter((e=>!!e)).reverse()))}),{fallback:Dr.errorService.handleGlobalError,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1)});se.useEffect((()=>{l()}),[]),se.useEffect((()=>Dr.serviceCommentViewService.createSubject.subscribe((e=>{const t=Vl("id");e.apartment_id===t&&l()}))),[]);return ae(Le,{children:[ae("div",{className:dd,children:[ae(me,{payload:t,items:md,onAction:e=>{"list-action"===e&&Dr.routerService.replace("/apartment")}}),ae(Er,{})]}),ae(Kr,{payload:e,mode:e.menuMode,children:ae(sd,{payload:e,style:{height:o.height},messages:a,onText:async e=>{const t=Dr.appwriteService.currentUser.$id,a=Vl("id");await Dr.serviceCommentViewService.create({user_id:t,comment:e,apartment_id:a,bid_id:null,contact_id:null,file_id:null}),await l()},onFile:async(e,t)=>{const a=Dr.appwriteService.currentUser.$id,i=Vl("id");await Dr.serviceCommentViewService.create({user_id:a,comment:e,apartment_id:i,bid_id:null,contact_id:null,file_id:t}),await l()}})})]})},isActive:e=>Ur(["/apartment_view/:id/service_comment"],e)}],hd=async e=>{if("create"===e)return{"data-sozdaniya_klienta":Ae.currentDate()};const{contact_id:t}=await Dr.apartmentViewService.read(e);return await Dr.contactViewService.tryRead(t)},bd=({id:e="create"})=>{const t=async(t,{afterSave:a})=>{let i=!0;try{const i=L.get(t,"object")||{},o=L.get(t,"owner_contact")||{},l=L.get(t,"documents")||[];let r=L.get(t,"object.contact_id");L.set(t,"object.apartment_files",l);const n=!!r&&await Dr.contactViewService.tryRead(r);if(r&&n)await Dr.contactViewService.update(r,o);else{const{id:e}=await Dr.contactViewService.create(o);r=e}if(L.set(t,"object.contact_id",r),"create"===e){const{id:e}=await Dr.apartmentViewService.create(i);await a(),Dr.routerService.push("/apartment_edit/".concat(e))}else await Dr.apartmentViewService.update(e,i);Dr.routerService.hasViewRedirectFlag()&&(await a(),Dr.routerService.push("/apartment_view/".concat(e))),Dr.alertService.notify(" ")}catch(o){i=!1;const e=xr(o);Dr.alertService.notify(e)}finally{return i}},a=_t();return se.useEffect((()=>Dr.contactViewService.updateSubject.subscribe((async([t,i])=>{const o=await Dr.apartmentViewService.tryRead(e);t===(null==o?void 0:o.contact_id)&&a.next(["owner_contact",i])}))),[]),se.useEffect((()=>Dr.apartmentViewService.updateSubject.subscribe((([t,i])=>{e===t&&(a.next(["object",i]),a.next(["documents",(null==i?void 0:i.apartment_files)||[]]))}))),[]),ae(ba,{state:async()=>[await hd(e),await Dr.apartmentViewService.tryRead(e),await Dr.settingsViewService.getMasterDetailMode(),await Dr.permissionService.getPermissions(),await Dr.featureService.getAccessLevel()],reloadSubject:Dr.layoutService.reloadOutletSubject,fallback:Dr.errorService.handleGlobalError,children:async([i,o,l,r,n])=>ae(kt,{changeSubject:a,history:Dr.routerService,waitForChangesDelay:mo,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1),routes:yd,params:{id:e},initialData:{owner_contact:i,object:o,documents:(null==o?void 0:o.apartment_files)||[]},payload:()=>({menuMode:l,permissions:r,accessLevel:n}),onChange:console.log,onSubmit:t})})},_d=()=>window.innerHeight-70,vd=()=>window.innerHeight-70,fd=()=>window.innerHeight-70,gd=()=>window.innerHeight-70,kd=[{id:"common",element:({payload:e})=>{const t=_t(Dr.bidViewService.reloadSubject),{render:a,pickColumns:i,columns:o}=_n({columns:ns,storageKey:"bid_columns"}),{listProps:l}=vt(Dr.routerService.locationState,{fallback:Dr.errorService.handleGlobalError}),r=ys();return ae(Le,{children:[ae(ft,{withSearch:!0,withSingleSort:!0,noInitialFilters:!0,fetchDebounce:so,reloadSubject:t,title:"",filterLabel:"",heightRequest:vd,rowActions:ss,actions:rs,filters:ps,columns:o,handler:r,onRowAction:async(e,a)=>{Dr.layoutService.setAppbarLoader(!0);try{if("edit-action"===e&&Dr.routerService.push("/bid_edit/".concat(a.id)),"remove-action"===e&&(await Dr.bidViewService.remove(a.id),t.next()),"copy-action"===e){const e=await Dr.bidViewService.read(a.id);await Dr.bidViewService.create(e),t.next()}"toggle-archive"===e&&(await Dr.bidViewService.toggleArchive(a.id),t.next())}finally{Dr.layoutService.setAppbarLoader(!1)}},onRowClick:async e=>{(await Dr.permissionService.getPermissions()).hasBidViewPermission&&Dr.routerService.push("/bid_view/".concat(e.id))},onAction:e=>{"add-action"===e&&Dr.routerService.push("/bid/create"),"column-setup-action"===e&&i()},selectionMode:gt.Multiple,payload:e,...l}),a()]})},isActive:e=>Ur(["/bid"],e),isAvailable:()=>!1},{id:"rent",element:({payload:e})=>{const t=_t(Dr.bidViewService.reloadSubject),{render:a,pickColumns:i,columns:o}=_n({columns:ns,storageKey:"bid_columns"}),{listProps:l}=vt(Dr.routerService.locationState,{fallback:Dr.errorService.handleGlobalError}),r=ys();return ae(Le,{children:[ae(ft,{withSearch:!0,withSingleSort:!0,noInitialFilters:!0,fetchDebounce:so,reloadSubject:t,title:"",filterLabel:"",heightRequest:fd,rowActions:ss,actions:rs,filters:ps,columns:o,handler:r,onRowAction:async(e,a)=>{Dr.layoutService.setAppbarLoader(!0);try{if("edit-action"===e&&Dr.routerService.push("/bid_edit/".concat(a.id)),"remove-action"===e&&(await Dr.bidViewService.remove(a.id),t.next()),"copy-action"===e){const e=await Dr.bidViewService.read(a.id);await Dr.bidViewService.create(e),t.next()}"toggle-archive"===e&&(await Dr.bidViewService.toggleArchive(a.id),t.next())}finally{Dr.layoutService.setAppbarLoader(!1)}},onRowClick:async e=>{(await Dr.permissionService.getPermissions()).hasBidViewPermission&&Dr.routerService.push("/bid_view/".concat(e.id))},onAction:e=>{"add-action"===e&&Dr.routerService.push("/bid/create"),"column-setup-action"===e&&i()},selectionMode:gt.Multiple,payload:{...e,_rent:!0},...l}),a()]})},isActive:e=>Ur(["/bid_rent"],e),isAvailable:()=>!1},{id:"sell",element:({payload:e})=>{const t=_t(Dr.bidViewService.reloadSubject),{render:a,pickColumns:i,columns:o}=_n({columns:ns,storageKey:"bid_columns"}),{listProps:l}=vt(Dr.routerService.locationState,{fallback:Dr.errorService.handleGlobalError}),r=ys();return ae(Le,{children:[ae(ft,{withSearch:!0,withSingleSort:!0,noInitialFilters:!0,fetchDebounce:so,reloadSubject:t,title:"",filterLabel:"",heightRequest:gd,rowActions:ss,actions:rs,filters:ps,columns:o,handler:r,onRowAction:async(e,a)=>{Dr.layoutService.setAppbarLoader(!0);try{if("edit-action"===e&&Dr.routerService.push("/bid_edit/".concat(a.id)),"remove-action"===e&&(await Dr.bidViewService.remove(a.id),t.next()),"copy-action"===e){const e=await Dr.bidViewService.read(a.id);await Dr.bidViewService.create(e),t.next()}"toggle-archive"===e&&(await Dr.bidViewService.toggleArchive(a.id),t.next())}finally{Dr.layoutService.setAppbarLoader(!1)}},onRowClick:async e=>{(await Dr.permissionService.getPermissions()).hasBidViewPermission&&Dr.routerService.push("/bid_view/".concat(e.id))},onAction:e=>{"add-action"===e&&Dr.routerService.push("/bid/create"),"column-setup-action"===e&&i()},selectionMode:gt.Multiple,payload:{...e,_sell:!0},...l}),a()]})},isActive:e=>Ur(["/bid_sell"],e),isAvailable:()=>!1},{id:"archive",element:({payload:e})=>{const t=_t(Dr.bidViewService.reloadSubject),{render:a,pickColumns:i,columns:o}=_n({columns:ns,storageKey:"bid_columns"}),{listProps:l}=vt(Dr.routerService.locationState,{fallback:Dr.errorService.handleGlobalError}),r=ys();return ae(Le,{children:[ae(ft,{withSearch:!0,withSingleSort:!0,noInitialFilters:!0,fetchDebounce:so,reloadSubject:t,title:"",filterLabel:"",heightRequest:_d,rowActions:ss,actions:rs,filters:ps,columns:o,handler:r,onRowAction:async(e,a)=>{Dr.layoutService.setAppbarLoader(!0);try{if("edit-action"===e&&Dr.routerService.push("/bid_edit/".concat(a.id)),"remove-action"===e&&(await Dr.bidViewService.remove(a.id),t.next()),"copy-action"===e){const e=await Dr.bidViewService.read(a.id);await Dr.bidViewService.create(e),t.next()}"toggle-archive"===e&&(await Dr.bidViewService.toggleArchive(a.id),t.next())}finally{Dr.layoutService.setAppbarLoader(!1)}},onRowClick:async e=>{(await Dr.permissionService.getPermissions()).hasBidViewPermission&&Dr.routerService.push("/bid_view/".concat(e.id))},onAction:e=>{"add-action"===e&&Dr.routerService.push("/bid/create"),"column-setup-action"===e&&i()},selectionMode:gt.Multiple,payload:{...e,_archive:!0},...l}),a()]})},isActive:e=>Ur(["/bid_archive"],e),isAvailable:()=>!1}],wd=[{id:"contact",label:"",isActive:()=>Ur(["/bid_edit/:id/contact"])},{id:"parameter",label:" ",isActive:()=>Ur(["/bid_edit/:id","/bid_edit/:id/parameter"])},{id:"tasks",label:"",isDisabled:()=>!0,isActive:()=>Ur(["/bid_edit/:id/tasks"])},{id:"service_comment",label:" ",isDisabled:()=>!0,isActive:()=>Ur(["/bid_edit/:id/service_comment"])},{id:"history",label:"",isDisabled:()=>!0,isActive:()=>Ur(["/bid_edit/:id/history"])},{id:"documents",label:"",isActive:()=>Ur(["/bid_edit/:id/documents"])},{id:"commission_and_status",label:"  ",isDisabled:()=>!0,isActive:()=>Ur(["/bid_edit/:id/commission_and_status"])}],Sd=(e,t)=>{if(t)return;const a=Vl("id","create");"contact"===e&&Dr.routerService.replace("/bid_edit/".concat(a,"/contact")),"parameter"===e&&Dr.routerService.replace("/bid_edit/".concat(a,"/parameter")),"tasks"===e&&Dr.routerService.replace("/bid_edit/".concat(a,"/tasks")),"service_comment"===e&&Dr.routerService.replace("/bid_edit/".concat(a,"/service_comment")),"history"===e&&Dr.routerService.replace("/bid_edit/".concat(a,"/history")),"documents"===e&&Dr.routerService.replace("/bid_edit/".concat(a,"/documents")),"commission_and_status"===e&&Dr.routerService.replace("/bid_edit/".concat(a,"/commission_and_status"))},zd=({payload:e,children:t,mode:a=C.Paper})=>{const i=se.useMemo((()=>"tabs"===a?C.Tabs:C.Paper),[a]);return ae(Be,{withFixedPos:!0,payload:e,fixedPosHeaderAdjust:a===C.Paper?85:64,mode:i,options:wd,onActiveOptionChange:Sd,children:t})},xd=[{type:ie.Link,action:"list-action",label:""},{type:ie.Link,action:"list-action",isVisible:({id:e})=>"create"!==e,label:" "},{type:ie.Link,action:"list-action",isVisible:({id:e})=>"create"===e,label:" "},{type:ie.Button,isDisabled:({hasChanged:e})=>!e,action:"save-action",label:""}],Fd=[{id:"contact",label:"",isActive:()=>Ur(["/bid_view/:id/contact"])},{id:"parameter",label:" ",isActive:()=>Ur(["/bid_view/:id","/bid_view/:id/parameter"])},{id:"tasks",label:"",isActive:()=>Ur(["/bid_view/:id/tasks"])},{id:"service_comment",isVisible:({permissions:e})=>e.hasMasterDetailPermission,label:" ",isActive:()=>Ur(["/bid_view/:id/service_comment"])},{id:"history",label:"",isActive:()=>Ur(["/bid_view/:id/history"])},{id:"documents",label:"",isActive:()=>Ur(["/bid_view/:id/documents"])},{id:"commission_and_status",label:"  ",isDisabled:()=>!0,isActive:()=>Ur(["/bid_view/:id/commission_and_status"])}],Td=(e,t)=>{if(t)return;const a=Vl("id","create");"contact"===e&&Dr.routerService.replace("/bid_view/".concat(a,"/contact")),"parameter"===e&&Dr.routerService.replace("/bid_view/".concat(a,"/parameter")),"tasks"===e&&Dr.routerService.replace("/bid_view/".concat(a,"/tasks")),"service_comment"===e&&Dr.routerService.replace("/bid_view/".concat(a,"/service_comment")),"history"===e&&Dr.routerService.replace("/bid_view/".concat(a,"/history")),"documents"===e&&Dr.routerService.replace("/bid_view/".concat(a,"/documents")),"commission_and_status"===e&&Dr.routerService.replace("/bid_view/".concat(a,"/commission_and_status"))},Ad=({children:e,payload:t,mode:a=C.Paper})=>{const i=se.useMemo((()=>"tabs"===a?C.Tabs:C.Paper),[a]);return ae(Be,{payload:t,withFixedPos:!0,fixedPosHeaderAdjust:a===C.Paper?85:64,mode:i,options:Fd,onActiveOptionChange:Td,children:e})},Cd=[{type:ie.Link,action:"list-action",label:""},{type:ie.Link,action:"list-action",label:" "},{type:ie.Button,isDisabled:({payload:{permissions:e}})=>!e.hasBidUpdatePermission,action:"edit-action",label:""}],Vd=async e=>{const{contact_id:t}=await Dr.bidViewService.read(e);return t},Id=[{type:i.Fragment,isVisible:({activeStep:e})=>0===e,fields:[{type:i.Component,element:()=>ae(le,{variant:"h6",fontWeight:"bold",mb:2,children:" "})},{type:i.Text,outlined:!0,title:"..",isInvalid:({fio:e})=>e?null:"  ",description:"   ",name:"fio"},{type:i.Text,outlined:!0,title:"",isInvalid:({telefon:e})=>e?null:"  ",description:" ",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon"}]},{type:i.Fragment,isVisible:({activeStep:e})=>2===e,fields:[{type:i.Component,element:()=>ae(le,{variant:"h6",fontWeight:"bold",mb:1,children:""})},{type:i.Component,isVisible:({contact_id:e})=>!e,element:()=>ae(re,{variant:"outlined",color:"warning",sx:{mb:2},children:"  , ,    "})},{type:i.Component,isVisible:({contact_id:e})=>!!e,element:()=>ae(re,{variant:"outlined",color:"info",sx:{mb:2},children:",     "})},{type:i.Text,isVisible:({contact_id:e})=>!!e,compute:async({contact_id:e})=>{const{fio:t=""}=await Dr.contactViewService.tryRead(e)||{};return t},disabled:!0,outlined:!0,title:".."},{type:i.Text,isVisible:({contact_id:e})=>!!e,compute:async({contact_id:e})=>{const{telefon:t=""}=await Dr.contactViewService.tryRead(e)||{};return t},fieldBottomMargin:"0",disabled:!0,outlined:!0,title:"",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000"},{type:i.Text,isVisible:({contact_id:e})=>!e,outlined:!0,title:"..",isInvalid:({fio:e})=>e?null:"  ",description:"   ",name:"fio"},{type:i.Text,isVisible:({contact_id:e})=>!e,outlined:!0,title:"",isInvalid:({telefon:e})=>e?null:"  ",description:" ",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon"}]}],Ld=[{type:ie.Link,action:"list-action",label:" "},{type:ie.Link,action:"list-action",label:" "}],Md=jr()((e=>({root:{position:"relative",overflow:"hidden"},header:{position:"absolute",top:0,left:0,height:65,paddingLeft:e.spacing(2),paddingRight:e.spacing(2),background:"whitesmoke",width:"100%"},content:{minHeight:300},adjust:{paddingBottom:65},listItemBackground:{background:oe(e.palette.primary.main,.05)}}))),Bd=[{type:ie.Link,action:"list-action",label:""},{type:ie.Link,action:"list-action",isVisible:({id:e})=>"create"!==e,label:" "},{type:ie.Link,action:"list-action",isVisible:({id:e})=>"create"===e,label:" "},{type:ie.Button,isDisabled:({hasChanged:e})=>!e,action:"save-action",label:""}],Dd=[{type:ie.Link,action:"list-action",label:""},{type:ie.Link,action:"list-action",label:" "},{type:ie.Button,isDisabled:({payload:{permissions:e}})=>!e.hasBidUpdatePermission,action:"edit-action",label:""}],jd="real-estate__headerRoot",qd=[{type:ie.Link,action:"list-action",label:" "},{type:ie.Link,action:"list-action",label:" "}],Rd=[{type:i.Complete,fieldRightMargin:"0",outlined:!1,name:"strana",title:"",tip:async()=>[""]},{type:i.Complete,fieldRightMargin:"0",outlined:!1,name:"gorod",title:"",tip:[""]},{type:i.Complete,fieldRightMargin:"0",outlined:!1,name:"oblast",title:"",tip:async()=>[" "]},{type:i.Complete,fieldRightMargin:"0",outlined:!1,name:"rajon",title:"",tip:[" "," "," ","- "," "," "," "," "," "," "," "," "]},{type:i.Complete,fieldRightMargin:"0",tip:Dr.dictService.getMahallya,outlined:!1,name:"mahallya",title:""},{type:i.Complete,fieldRightMargin:"0",tip:Dr.dictService.getUlicza,outlined:!1,name:"ulicza",title:""},{type:i.Text,fieldRightMargin:"0",outlined:!1,name:"orientir",title:""},{type:i.Combo,fieldRightMargin:"0",freeSolo:!0,outlined:!1,name:"metro",title:"",itemList:[". "," "," ","  ","","","","  "," "," ","","","",""," ","",""," "," ","","","","","","","","","","","","",""," "," "," ","","","-","",""," ",""]},{type:i.Fragment,isVisible:e=>{let t=!1;return t=t||lt(e.podkategoriya_obekta,""),t},fields:[{type:i.Text,columns:"6",outlined:!1,name:"nomer_doma",title:" "},{type:i.Text,fieldRightMargin:"0",columns:"6",outlined:!1,name:"nomer_kvartiry",title:" "}]},{type:i.Fragment,isVisible:e=>{let t=!1;return t=t||null!==e.kategoriya_obekta,t=t||null!==e.podkategoriya_obekta,t=t&&!lt(e.podkategoriya_obekta,""),t},fields:[{type:i.Text,fieldRightMargin:"0",outlined:!1,name:"nomer_doma",title:" "}]},{type:i.Component,element:Zn}];window.address_fields=Rd;const Pd=[{type:i.Items,labelShrink:!0,placeholder:" ",freeSolo:!0,outlined:!1,name:"metro_list",title:"",itemList:[". "," "," ","  ","","","","  "," "," ","","","",""," ","",""," "," ","","","","","","","","","","","","",""," "," "," ","","","-","",""," ",""]},{type:i.Items,labelShrink:!0,freeSolo:!0,placeholder:" ",fieldRightMargin:"0",outlined:!1,name:"rajon_list",title:"",itemList:[" "," "," ","- "," "," "," "," "," "," "," "," "]},{type:i.Items,labelShrink:!0,freeSolo:!0,placeholder:" ",fieldRightMargin:"0",itemList:Dr.dictService.getMahallya,outlined:!1,name:"mahallya_list",title:""}];window.area_fields=Pd;const Ed=54,Nd=jr()((e=>({root:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",overflow:"hidden",height:775},container:{overflow:"hidden",padding:e.spacing(1),flex:1},appBarRoot:{background:e.palette.primary.main,maxHeight:Ed,height:Ed,boxShadow:"unset",color:"#000"},tabsRoot:{minHeight:Ed,height:Ed,marginLeft:"0 !important",marginRight:"0 !important"},tabRoot:{minHeight:Ed,height:Ed,color:"#fff"},tabRootTransparent:{minHeight:Ed,height:Ed},tabSelected:{color:"#fff !important"},indicator:{height:6,background:"#0288d1"},indicatorTransparent:{height:6,background:e.palette.primary.main}}))),Ud={},Hd=({title:e,name:t,sx:a,features:o})=>[{type:i.Group,features:o,fields:[{type:i.Component,sx:a,element:()=>ae(le,{variant:"caption",sx:{opacity:.8},children:e})},{type:i.Box,sx:{display:"grid",gridTemplateColumns:"1fr 1fr 125px 125px",mt:-1},fields:[{type:i.Text,sx:{"& .MuiIconButton-root":{pointerEvents:"none"}},isInvalid:e=>e["".concat(t,"_ot")]&&e["".concat(t,"_do")]&&parseInt(e["".concat(t,"_ot")])>parseInt(e["".concat(t,"_do")])?"    ":null,fieldBottomMargin:"0",outlined:!1,name:"".concat(t,"_ot"),title:"",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",defaultValue:"",leadingIcon:()=>ae(he,{sx:{height:20,width:20,display:"flex",alignItems:"center",justifyContent:"center"},children:ae(le,{textTransform:"lowercase",variant:"caption",children:""})})},{type:i.Text,sx:{"& .MuiIconButton-root":{pointerEvents:"none"}},isInvalid:e=>e["".concat(t,"_ot")]&&e["".concat(t,"_do")]&&parseInt(e["".concat(t,"_ot")])>parseInt(e["".concat(t,"_do")])?"    ":null,fieldBottomMargin:"0",outlined:!1,name:"".concat(t,"_do"),title:"",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",defaultValue:"",leadingIcon:()=>ae(he,{sx:{height:20,width:20,display:"flex",alignItems:"center",justifyContent:"center"},children:ae(le,{textTransform:"lowercase",variant:"caption",children:""})})},{type:i.Combo,noDeselect:!0,fieldBottomMargin:"0",title:"",placeholder:"USD",itemList:["usd","uzs"],tr:e=>"uzs"===e?"SUM":"USD",defaultValue:"usd",outlined:!1,name:"".concat(t,"_valyuta")},{type:i.Combo,noDeselect:!0,title:"",fieldBottomMargin:"1",name:"".concat(t,"_for"),itemList:["2",""],tr:e=>"2"===e?"":e,placeholder:"",defaultValue:""}]}]}],Od=({title:e,sx:t,name:{value:a="rent_kom_komissiya_agenstva",percent:o="rent_kom_komissiya_agenstva_unit"}})=>[{type:i.Text,hidden:!0,name:a,defaultValue:""},{type:i.Text,hidden:!0,name:o,defaultValue:""},{type:i.Component,sx:t,fieldBottomMargin:"1",fieldRightMargin:"1",columns:"6",element:t=>{const{_fieldData:i,onChange:l}=t,[r,n]=se.useState(i[a]||""),s="1"===i[o]?"1":"%",d=L.debounce((e=>{l({[a]:e})}),300);return se.useEffect((()=>()=>{d.flush()}),[]),ae(xt,{label:e,defaultValue:i[a]||"",onChange:({target:e})=>{const t=isNaN(e.value)?r:e.value;e.value=t,d(t),n(t)},onBlur:()=>d.flush(),variant:"standard",fullWidth:!0,InputProps:{startAdornment:ae(Ft,{sx:{userSelect:"none",cursor:"pointer"},onClick:()=>{"1"===s&&l({[o]:"%"}),"%"===s&&l({[o]:"1"})},position:"start",children:["%"===s&&ae(Ht,{}),"1"===s&&ae(Ot,{})]})}})}}],Wd=[{type:i.Fragment,isVisible:({kategoriya_obekta:e})=>lt(e,"",""),fields:[{type:i.Component,fieldBottomMargin:"0",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:" "})},...Hd({title:" ",features:["hasOwnerPricePermission"],name:"rent_czena"}),...Hd({title:" ",name:"rent_startovaya_czena"}),{type:i.Fragment,features:["hasCommissionPermission"],fields:[{type:i.Checkbox,isDisabled:(e,{readonly:t})=>t,fieldBottomMargin:"1",name:"rent_torg",title:""},...Od({title:" ",sx:{marginTop:"3px"},name:{percent:"rent_komissiya_agenstva_unit",value:"rent_komissiya_agenstva"}}),...Od({title:" ",sx:{marginTop:"3px"},name:{percent:"rent_komissiya_menedzhera_unit",value:"rent_komissiya_menedzhera"}})]}]},{type:i.Fragment,isVisible:({kategoriya_obekta:e})=>lt(e,""),fields:[{type:i.Component,fieldBottomMargin:"0",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"  ."})},...Hd({title:" ",features:["hasOwnerPricePermission"],name:"rent_kom_czena_sobstvennika"}),...Hd({title:" ",name:"rent_kom_startovaya_czena"}),{type:i.Fragment,features:["hasCommissionPermission"],fields:[{type:i.Checkbox,isVisible:(e,{readonly:t})=>!t,fieldBottomMargin:"0",name:"rent_kom_torg",title:""},...Od({title:" ",sx:{marginTop:"3px"},name:{value:"rent_kom_komissiya_agenstva",percent:"rent_kom_komissiya_agenstva_unit"}}),...Od({title:" ",sx:{marginTop:"3px"},name:{value:"rent_kom_komissiya_menedzhera",percent:"rent_kom_komissiya_menedzhera_unit"}})]}]}];window.price_range_rent_fields=Wd;const $d=[{type:i.Fragment,isVisible:({kategoriya_obekta:e})=>lt(e,"",""),fields:[{type:i.Component,fieldBottomMargin:"0",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:" "})},...Hd({title:" ",features:["hasOwnerPricePermission"],name:"prod_czena"}),...Hd({title:" ",name:"prod_startovaya_czena"}),{type:i.Fragment,features:["hasCommissionPermission"],fields:[{type:i.Checkbox,isDisabled:(e,{readonly:t})=>t,fieldBottomMargin:"0",name:"prod_torg",title:""},...Od({title:" ",sx:{marginTop:"3px"},name:{percent:"prod_komissiya_agenstva_unit",value:"prod_komissiya_agenstva"}}),...Od({title:" ",sx:{marginTop:"3px"},name:{percent:"prod_komissiya_menedzhera_unit",value:"prod_komissiya_menedzhera"}})]}]},{type:i.Fragment,isVisible:({kategoriya_obekta:e})=>lt(e,""),fields:[{type:i.Component,fieldBottomMargin:"0",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"  ."})},...Hd({title:" ",features:["hasOwnerPricePermission"],name:"prod_kom_czena_sobstvennika"}),...Hd({title:" ",name:"prod_kom_startovaya_czena"}),{type:i.Fragment,features:["hasCommissionPermission"],fields:[{type:i.Checkbox,isDisabled:(e,{readonly:t})=>t,fieldBottomMargin:"0",name:"prod_kom_torg",title:""},...Od({sx:{marginTop:"3px"},title:" ",name:{value:"prod_kom_komissiya_agenstva",percent:"prod_kom_komissiya_agenstva_unit"}}),...Od({sx:{marginTop:"3px"},title:" ",name:{value:"prod_kom_komissiya_menedzhera",percent:"prod_kom_komissiya_menedzhera_unit"}})]}]}];window.price_range_sell_fields=$d;const Gd=54,Yd=jr()((e=>({root:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",overflow:"hidden",pointerEvents:"all"},container:{overflowX:"hidden",overflowY:"scroll",paddingTop:0,paddingBottom:0,paddingLeft:e.spacing(1),paddingRight:e.spacing(1),flex:1},appBarRoot:{background:e.palette.primary.main,maxHeight:Gd,height:Gd,boxShadow:"unset",color:"#000"},tabsRoot:{minHeight:Gd,height:Gd,marginLeft:"0 !important",marginRight:"0 !important"},tabRoot:{minHeight:Gd,height:Gd,color:"#fff"},tabRootTransparent:{minHeight:Gd,height:Gd},tabSelected:{color:"#fff !important"},indicator:{height:6,background:"#0288d1"},indicatorTransparent:{height:6,background:e.palette.primary.main}}))),Kd={},Zd=({sx:e,features:t,withTransparentHeader:a=!1,withRentTab:i=!1,withSellTab:o=!1,readonly:l=!1,fieldData:r=Kd,onChange:n})=>{const{reloadTrigger:s,doReload:d}=Wt(),{classes:m}=Yd(),[c,u]=se.useState("rent");se.useEffect((()=>{o?u("sell"):i&&u("rent")}),[i,o]);const p=$t(r);return se.useEffect((()=>p.subscribe((()=>{l&&d()}))),[l]),ae(ce,{className:m.root,sx:{...e,height:"100%"},children:ae(Gt,{value:c,children:[a&&ae(he,{sx:{borderBottom:1,borderColor:"divider"},children:ae(Yt,{variant:"fullWidth",classes:{root:m.tabsRoot,indicator:m.indicatorTransparent},onChange:(e,t)=>u(t),children:[o&&ae(Kt,{classes:{root:m.tabRootTransparent},label:"",value:"sell"}),i&&ae(Kt,{classes:{root:m.tabRootTransparent},label:"",value:"rent"})]})}),!a&&ae(Zt,{classes:{root:m.appBarRoot},position:"static",sx:{borderBottom:1,borderColor:"divider"},children:ae(Yt,{variant:"fullWidth",classes:{root:m.tabsRoot,indicator:m.indicator},onChange:(e,t)=>u(t),children:[o&&ae(Kt,{classes:{root:m.tabRoot,selected:m.tabSelected},label:"",value:"sell"}),i&&ae(Kt,{classes:{root:m.tabRoot,selected:m.tabSelected},label:"",value:"rent"})]})}),o&&ae(Xt,{className:m.container,value:"sell",children:ae(fe,{readonly:l,features:t,payload:()=>({readonly:l}),handler:r,fields:$d,onChange:n},s)}),i&&ae(Xt,{className:m.container,value:"rent",children:ae(fe,{readonly:l,features:t,payload:()=>({readonly:l}),handler:r,fields:Wd,onChange:n},s)})]})})},Xd=[{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,"/"),t},fields:[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ( )"})},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"   "})]}]},{type:i.Fragment,isVisible:e=>!lt(e.kategoriya_obekta,"")&&lt(e.podkategoriya_obekta,"/"),fields:[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    (/)"})},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"   "})]}]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&!lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,""),t},fields:[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ()"})},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"  "})]}]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&!lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,""),t},fields:[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ()"})},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"   "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostevogo_doma",title:"   "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_dopolnitelnoj_pristrojki",title:"   "})]}]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,""),t},fields:[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ( )"})},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"  "})]}]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,""),t},fields:[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ( )"})},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"   "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostevogo_doma",title:"   "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_dopolnitelnoj_pristrojki",title:"   "})]}]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,"/"),t},fields:[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ( /)"})},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"   "})]}]}],Jd=[{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,"/"),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Group,fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ( )"})},{type:i.Items,columns:"6",outlined:!1,name:"vnutri_est",title:" :",itemList:["","",""," ",""," ","","","",""," ","","","",""," "," ","","","  "," ","",""," "]},{type:i.Items,columns:"6",outlined:!1,name:"ryadom_est",title:" :",itemList:[" ",""," ",""," "," ",""," ","","","","/","","","","",""," ","/ "]}]}]}},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,""),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Group,fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ( )"})},{type:i.Items,columns:"6",outlined:!1,name:"vnutri_est",title:" :",itemList:[""," ","","",""," ",""," ","","","",""," ","  "," ","",""," ","","","","","","  ","",""," "]},{type:i.Items,columns:"6",outlined:!1,name:"ryadom_est",title:" :",itemList:[" ",""," "," "," ",""," ",""," ","","","","/","","","","",""," ","/ "]}]}]}},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,""),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Group,fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ( )"})},{type:i.Items,columns:"6",outlined:!1,name:"vnutri_est",title:" :",itemList:["","",""," ",""," ","","","",""," "," "," "," ","2   ","","",""," "," ","","","","",""," ","  "," ","",""]},{type:i.Items,columns:"6",outlined:!1,name:"ryadom_est",title:" :",itemList:[" ",""," ",""," "," ",""," ","","","","/","","","","",""," ","/ "]}]}]}},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,"/"),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Group,fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ( /)"})},{type:i.Items,columns:"6",outlined:!1,name:"vnutri_est",title:" :",itemList:["","","","","","",""," ","",""," "]},{type:i.Items,columns:"6",outlined:!1,name:"ryadom_est",title:" :",itemList:[" ",""," ",""," "," ",""," ","","","","/","","","","",""," ","/ "]}]}]}}],Qd=[{type:i.Fragment,isVisible:e=>(!lt(e.podkategoriya_obekta,"/")||!lt(e.kategoriya_obekta,""))&&((!lt(e.podkategoriya_obekta,"")||!lt(e.kategoriya_obekta,""))&&((!lt(e.podkategoriya_obekta,"")||!lt(e.kategoriya_obekta,""))&&lt(e.kategoriya_obekta,""))),child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"  ( )"})},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:" "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_obekta",title:" ",itemList:[" ",""," ",""," /"]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_remonta",title:" ",itemList:["","","",""," "," ",""," "]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:""}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip_stroeniya",title:" ",itemList:["","","-","","","",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"-"}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:" "}),nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:""}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"balkon",title:"",itemList:["",""," ","2x6","2  ",""]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"parkovka",title:"",itemList:["","","","",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:" "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"  "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel",title:"",itemList:["","","2  "," "]},{type:i.Combo,sx:{mt:2},columns:"3",outlined:!1,name:"mebel",title:"",itemList:["","",""," + "]},{type:i.Items,columns:"3",outlined:!1,name:"voda",title:"",itemList:[" ","","  "," "," "," "]},{type:i.Items,columns:"3",outlined:!1,name:"gaz",title:"",itemList:["","","  ",""]},{type:i.Combo,columns:"3",outlined:!1,name:"lift_kommercziya",title:"",itemList:["",""]},{type:i.Items,columns:"3",outlined:!1,name:"sistema_otopleniya",title:" ",itemList:[""," ","",""," ","  ","  "]},{type:i.Combo,columns:"3",outlined:!1,name:"elektrichestvo",title:"",itemList:["","  ",""]},{type:i.Combo,columns:"3",outlined:!1,name:"kanalizacziya",title:"",itemList:["",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"   ()"}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"mestopolozhenie_obekta",title:" ",itemList:[" "," ","  "," "," /"," ","  ","  "]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:" "}),{type:i.Items,columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:" ",itemList:["","",""]},{type:i.Items,columns:"3",outlined:!1,name:"vid_liczenzii",title:" ",itemList:["",""]},{type:i.Component,sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>ae(rt,{variant:"standard",label:" ",items:[{label:"",value:""},{label:"",value:""},{label:"/",value:"/"},{label:". ",value:". "},{label:" ",value:" "},{label:"  ",value:"  "},{label:"/",value:"/"},{label:"",value:""},{label:" ",value:" "},{label:"//",value:"//"},{label:" ",value:" "},{label:"  ",value:"  ",child:[{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""}]},{label:" ",value:" ",child:[{label:"",value:""},{label:" ",value:" "},{label:" ",value:" "}]},{label:" ",value:" "},{label:" ",value:" "}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})}]}},{type:i.Fragment,isVisible:e=>{if(lt(e.podkategoriya_obekta,"")&&lt(e.kategoriya_obekta,""))return!1;let t=!1;return t=t||lt(e.podkategoriya_obekta,""),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"  ()"})},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:" "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_remonta-kvartiry",title:" ",itemList:["","","",""," "," ",""," "]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:" "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip-stroeniya_kvartiry",title:" ",itemList:["","","","","","","-"]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:""}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"balkon_kvartira",title:"",itemList:["",""," ","2x6","2  ",""]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip_planirovki",title:" ",itemList:["","","-","","","","","","","",""]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"lift_kvartira",title:"",itemList:["","",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:""}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel_kvartira",title:"",itemList:["","","2  "]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"zhilaya_ploshhad",title:"  "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"mebel_kvartira",title:"",itemList:["","",""," + "]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:" "}),nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:" "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_kvartiry",title:" ",itemList:["","2  "," "]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:" + "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"gaz",title:"",itemList:["","","  ",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"   ()"}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"vid_iz_okna",title:"  ",itemList:[" "," "," "]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"parkovka_kvartira",title:"",itemList:["","",""," ",""]}]}},{type:i.Fragment,isVisible:e=>{if(lt(e.podkategoriya_obekta,"")&&lt(e.kategoriya_obekta,""))return!1;let t=!1;return t=t||lt(e.podkategoriya_obekta,""),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"  ()"})},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:" "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_doma",title:" ",itemList:[" ",""," ",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:" "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip-stroeniya_doma",title:" ",itemList:["","","-","","","",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:""}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"balkon_doma",title:"",itemList:["",""," ","2x6","2  ",""]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip_planirovki",title:" ",itemList:["","","-","","","",""]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"bassejn",title:"",itemList:["","",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_doma",title:"  "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel_doma",title:"",itemList:["","","2  "," "]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"-"}),nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:" "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:" "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"voda_dom",title:"",itemList:[" ","","  "," "," "," "]},{type:i.Combo,sx:{mt:2},columns:"3",outlined:!1,name:"lift_dom",title:"",itemList:["",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:" + "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_dom",title:" ",itemList:[""," ","",""," ","  ","  "]},{type:i.Combo,sx:{mt:2},columns:"3",outlined:!1,name:"mebel_dom",title:"",itemList:["","",""," + "]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"   ()"}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"gaz_dom",title:"",itemList:["","","  ",""]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_dom",title:" ",itemList:["","",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:" "}),{type:i.Combo,sx:{mt:2},columns:"3",outlined:!1,name:"elektrichestvo_dom",title:"",itemList:["","  ",""]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"vid_iz_okna_dom",title:"  ",itemList:[" "," "," "]},{type:i.Items,columns:"3",outlined:!1,name:"garazh",title:"",itemList:["",""," ",""]},{type:i.Combo,columns:"3",outlined:!1,name:"kanalizacziya_dom",title:"",itemList:["",""]},{type:i.Items,columns:"3",outlined:!1,name:"raspolozhenie_doma",title:" ",itemList:[" ","  ","  "]},{type:i.Items,outlined:!1,columns:"3",name:"mestopolozhenie-obekta_dom",title:" ",itemList:[" "," ","  "," "," /"," ","  ","  "]}]}},{type:i.Fragment,isVisible:e=>!lt(e.kategoriya_obekta,"")&&lt(e.podkategoriya_obekta,"/"),child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"  (/)"})},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:" "}),{type:i.Component,sx:{mb:2,pr:1},columns:"3",name:"naznachenie-obekta-zemlya_uchastok",element:e=>ae(rt,{variant:"standard",label:" ",items:[{label:" ",value:" "},{label:"",value:""},{label:" ",value:" "},{label:" ",value:" "},{label:"",value:""},{label:"/",value:"/"},{label:" ",value:" "},{label:"",value:""},{label:"",value:""},{label:"  ",value:"  "},{label:"",value:""},{label:"",value:""}],value:e["naznachenie-obekta_zemlya"],onChange:t=>e.onChange({"naznachenie-obekta_zemlya":t})})},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip_zemli_uchastka",title:" /",itemList:["",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:""}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie-obekta_zemlya",title:" ",itemList:[" /",""," "]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"-"}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:" "}),nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:""}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie-remonta_zemlya",title:" ",itemList:["","","",""," "," ",""," "]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"parkovka_zemlya",title:"",itemList:["","","","",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"   ()"}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"  "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"voda_zemlya",title:"",itemList:[" ","","  "," "," "]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"mestopolozhenie-obekta_zemlya",title:" ",itemList:[" "," ","  "," "," /"," ","  ","  "]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_goroda",title:"   ()"}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_zemlya",title:" ",itemList:[""," ","",""," ","  ","  "]},{type:i.Items,columns:"3",outlined:!1,name:"podezdnye_puti",title:" ",itemList:[" "," ",""]},{type:i.Items,columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_zemlya",title:" ",itemList:["","",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:" "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"elektrichestvo_zemlya",title:"",itemList:["","  ",""]},{type:i.Items,columns:"3",outlined:!1,name:"gaz_zemlya",title:"",itemList:["","","  ",""]},{type:i.Combo,columns:"3",outlined:!1,name:"kanalizacziya_zemlya",title:"",itemList:["",""]}]}},{type:i.Fragment,isVisible:e=>!(!lt(e.kategoriya_obekta,"")||!lt(e.podkategoriya_obekta,"")),child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"  ( )"})},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:" "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_remonta-kvartiry",title:" ",itemList:["","","",""," "," ",""," "]},{type:i.Component,sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>ae(rt,{variant:"standard",label:" ",items:[{label:"",value:""},{label:"",value:""},{label:"/",value:"/"},{label:". ",value:". "},{label:" ",value:" "},{label:"  ",value:"  "},{label:"/",value:"/"},{label:"",value:""},{label:" ",value:" "},{label:"//",value:"//"},{label:" ",value:" "},{label:"  ",value:"  ",child:[{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""}]},{label:" ",value:" ",child:[{label:"",value:""},{label:" ",value:" "},{label:" ",value:" "}]},{label:" ",value:" "},{label:" ",value:" "}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip-stroeniya_kvartiry",title:" ",itemList:["","","","","","","-"]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:""}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"balkon_kvartira",title:"",itemList:["",""," ","2x6","2  ",""]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip_planirovki",title:" ",itemList:["","","-","","","","","","","",""]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"lift_kvartira",title:"",itemList:["","",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:""}),nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:" "}),{type:i.Complete,columns:"3",outlined:!1,name:"nazvanie_zhk",title:" ",tip:[" ",' "Greenwich"',' "OzMahal"',' "Elysium"',' "Binkat"',' "Brooklyn"',' "Assalom Havo"',' "Istanbul City"']},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"-"}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"  "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel_kvartira",title:"",itemList:["","","2  "]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"parkovka_kvartira",title:"",itemList:["","",""," ",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"zhilaya_ploshhad",title:"  "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"mebel_kvartira",title:"",itemList:["","",""," + "]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:" "}),nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:" "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_kvartiry",title:" ",itemList:["","2  "," "]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"vid_iz_okna",title:"  ",itemList:[" "," "," "]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:" + "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"gaz",title:"",itemList:["","","  ",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"   ()"}),{type:i.Items,columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:" ",itemList:["","",""]}]}},{type:i.Fragment,isVisible:e=>!(!lt(e.kategoriya_obekta,"")||!lt(e.podkategoriya_obekta,"")),child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"  ( )"})},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:" "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_doma",title:" ",itemList:[" ",""," ",""]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"mestopolozhenie-obekta_dom",title:" ",itemList:[" "," ","  "," "," /"," ","  ","  "]},{type:i.Component,sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>ae(rt,{variant:"standard",label:" ",items:[{label:"",value:""},{label:"",value:""},{label:"/",value:"/"},{label:". ",value:". "},{label:" ",value:" "},{label:"  ",value:"  "},{label:"/",value:"/"},{label:"",value:""},{label:" ",value:" "},{label:"//",value:"//"},{label:" ",value:" "},{label:"  ",value:"  ",child:[{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""}]},{label:" ",value:" ",child:[{label:"",value:""},{label:" ",value:" "},{label:" ",value:" "}]},{label:" ",value:" "},{label:" ",value:" "}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:""}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_remonta",title:" ",itemList:["","","",""," "," ",""," "]},{type:i.Items,columns:"3",outlined:!1,name:"raspolozhenie_obekta",title:" ",itemList:[" -","  ","  ","  ","  ","  "," "," "]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip-stroeniya_doma",title:" ",itemList:["","","-","","","",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_doma",title:"  "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"raspolozhenie_doma",title:" ",itemList:[" ","  ","  "]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip_planirovki",title:" ",itemList:["","","-","","","",""]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"bassejn",title:"",itemList:["","",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:" "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel_doma",title:"",itemList:["","","2  "," "]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"-"}),nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:" "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"voda_dom",title:"",itemList:[" ","","  "," "," "," "]},{type:i.Combo,sx:{mt:2},columns:"3",outlined:!1,name:"lift_dom",title:"",itemList:["",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:" + "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_dom",title:" ",itemList:[""," ","",""," ","  ","  "]},{type:i.Combo,sx:{mt:2},columns:"3",outlined:!1,name:"mebel_dom",title:"",itemList:["","",""," + "]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"   ()"}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"gaz_dom",title:"",itemList:["","","  ",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:" "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:" "}),{type:i.Combo,sx:{mt:2},columns:"3",outlined:!1,name:"elektrichestvo_dom",title:"",itemList:["","  ",""]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"vid_iz_okna_dom",title:"  ",itemList:[" "," "," "]},{type:i.Items,columns:"3",outlined:!1,name:"garazh",title:"",itemList:["",""," ",""]},{type:i.Combo,columns:"3",outlined:!1,name:"kanalizacziya_dom",title:"",itemList:["",""]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"balkon_doma",title:"",itemList:["",""," ","2x6","2  ",""]},{type:i.Items,columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_dom",title:" ",itemList:["","",""]}]}},{type:i.Fragment,isVisible:e=>!(!lt(e.kategoriya_obekta,"")||!lt(e.podkategoriya_obekta,"/")),child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"  ( /)"})},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:" "}),{type:i.Component,sx:{mt:2,mb:2,pr:1},columns:"3",name:"naznachenie-obekta-zemlya_uchastok",element:e=>ae(rt,{variant:"standard",label:" ",items:[{label:" ",value:" "},{label:"",value:""},{label:" ",value:" "},{label:" ",value:" "},{label:"",value:""},{label:"/",value:"/"},{label:" ",value:" "},{label:"",value:""},{label:"",value:""},{label:"  ",value:"  "},{label:"",value:""},{label:"",value:""}],value:e["naznachenie-obekta_zemlya"],onChange:t=>e.onChange({"naznachenie-obekta_zemlya":t})})},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip_zemli_uchastka",title:" /",itemList:["",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:""}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie-obekta_zemlya",title:" ",itemList:[" /",""," "]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"-"}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:" "}),nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:""}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie-remonta_zemlya",title:" ",itemList:["","","",""," "," ",""," "]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"parkovka_zemlya",title:"",itemList:["","","","",""]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"   ()"}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"  "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"voda_zemlya",title:"",itemList:[" ","","  "," "," "]},{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"mestopolozhenie-obekta_zemlya",title:" ",itemList:[" "," ","  "," "," /"," ","  ","  "]},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_goroda",title:"   ()"}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_zemlya",title:" ",itemList:[""," ","",""," ","  ","  "]},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:" "}),{type:i.Items,sx:{mt:2},columns:"3",outlined:!1,name:"elektrichestvo_zemlya",title:"",itemList:["","  ",""]},{type:i.Items,columns:"3",outlined:!1,name:"podezdnye_puti",title:" ",itemList:[" "," ",""]},{type:i.Items,columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_zemlya",title:" ",itemList:["","",""]},{type:i.Items,columns:"3",outlined:!1,name:"gaz_zemlya",title:"",itemList:["","","  ",""]},{type:i.Combo,columns:"3",outlined:!1,name:"kanalizacziya_zemlya",title:"",itemList:["",""]}]}}],em=[{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&!lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,""),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Group,fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ()"})},{type:i.Items,columns:"6",outlined:!1,name:"vnutri_est",title:" :",itemList:[""," ","","",""," ",""," ","","","",""," ","","","","","","  ",""]},{type:i.Items,columns:"6",outlined:!1,name:"ryadom_est",title:" :",itemList:[" ",""," "," "," ",""," ",""," ","","","","/","","","","",""," "]}]}]}},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&!lt(e.kategoriya_obekta,""),t=t&&lt(e.podkategoriya_obekta,""),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Group,fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    ()"})},{type:i.Items,columns:"6",outlined:!1,name:"vnutri_est",title:" :",itemList:["","",""," ",""," ","","","",""," ","","","","",""," "," "," "," ","2   ","","",""," "]},{type:i.Items,columns:"6",outlined:!1,name:"ryadom_est",title:" :",itemList:[" ",""," ",""," "," ",""," ","","","","/","","","","",""," "]}]}]}},{type:i.Fragment,isVisible:e=>{let t=!1;return t=t||lt(e.podkategoriya_obekta,"/"),t=t&&!lt(e.kategoriya_obekta,""),t},child:{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Group,fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"    (/)"})},{type:i.Items,columns:"6",outlined:!1,name:"vnutri_est",title:" :",itemList:["","","","","","",""," ","",""," "]},{type:i.Items,columns:"6",outlined:!1,name:"ryadom_est",title:" :",itemList:[" ",""," ",""," "," ",""," ","","","","/","","","","",""," ","/ "]}]}]}}],tm=[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:" "})},{type:i.Text,outlined:!1,name:"zagolovok",title:"",placeholder:" "},{type:i.Fragment,isVisible:e=>lt(e.kategoriya_obekta,""),fields:[{type:i.Combo,outlined:!1,columns:"4",name:"kategoriya_obekta",title:" ",itemList:["","",""]},{type:i.Items,outlined:!1,columns:"4",name:"prodazha",title:"",itemList:[" ",""," ",""]},{type:i.Items,outlined:!1,columns:"4",name:"arenda",title:"",itemList:["","",""]},{type:i.Combo,outlined:!1,columns:"4",name:"podkategoriya_obekta",title:" ",isVisible:e=>lt(e.kategoriya_obekta,""),itemList:()=>["","","/","",""]},{type:i.Items,isVisible:e=>{if(lt(e.kategoriya_obekta,"")){if(lt(e.podkategoriya_obekta,""))return!1;if(lt(e.podkategoriya_obekta,"/"))return!1}return!0},columns:"4",outlined:!1,name:"raspolozhenie_obekta",title:" ",itemList:[" -","  ","  ","  ","  ","  "," "," "]},{type:i.Combo,isVisible:e=>!(!lt(e.kategoriya_obekta,"")||!lt(e.podkategoriya_obekta,""))||!lt(e.podkategoriya_obekta,""),columns:"4",outlined:!1,name:"istochnik",title:"",itemList:[" "," "," ",""," ","  ","OLX","Facebook","Instagram","Telegram","",""]},{type:i.Combo,isVisible:e=>{let t=!1;return t=t||lt(e.podkategoriya_obekta,""),t},columns:"4",outlined:!1,name:"vid_obekta",title:" ",itemList:["","","",""," ",""]},{type:i.Items,isVisible:e=>!(!lt(e.kategoriya_obekta,"")||!lt(e.podkategoriya_obekta,"/")),columns:"4",outlined:!1,name:"vid_liczenzii",title:" ",itemList:["",""]}]},{type:i.Fragment,isVisible:e=>!lt(e.kategoriya_obekta,""),fields:[{type:i.Combo,outlined:!1,columns:"4",name:"kategoriya_obekta",title:" ",itemList:["","",""]},{type:i.Items,outlined:!1,columns:"4",name:"prodazha",title:"",itemList:[" ",""," ",""]},{type:i.Items,outlined:!1,columns:"4",name:"arenda",title:"",itemList:["","",""]},{type:i.Combo,outlined:!1,columns:"4",name:"podkategoriya_obekta",title:" ",isVisible:e=>!lt(e.kategoriya_obekta,""),itemList:()=>["","","/"]},{type:i.Combo,columns:"4",outlined:!1,name:"istochnik",title:"",itemList:[" "," "," ",""," ","  ","OLX","Facebook","Instagram","Telegram","",""]},{type:i.Complete,isVisible:e=>!!lt(e.podkategoriya_obekta,"")&&!lt(e.kategoriya_obekta,""),columns:"4",outlined:!1,name:"nazvanie_zhk",title:" ",tip:[" ",' "Greenwich"',' "OzMahal"',' "Elysium"',' "Binkat"',' "Brooklyn"',' "Assalom Havo"',' "Istanbul City"']},{type:i.Combo,isVisible:e=>{let t=!1;return t=t||lt(e.podkategoriya_obekta,""),t},columns:"4",outlined:!1,name:"vid_obekta",title:" ",itemList:["","","",""," ",""]},{type:i.Items,isVisible:e=>{let t=!1;return t=t||lt(e.kategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,"/"),t},columns:"4",outlined:!1,name:"raspolozhenie_obekta",title:" ",itemList:[" -","  ","  ","  ","  ","  "," "," "]},{type:i.Items,isVisible:e=>{let t=!1;return t=t||lt(e.podkategoriya_obekta,"/"),t},columns:"4",outlined:!1,name:"vid_liczenzii",title:" ",itemList:["",""]}]}]},...Qd,{type:i.Group,columns:"12",fieldRightMargin:"0",fieldBottomMargin:"0",fields:[{type:i.Fragment,isVisible:e=>{let t=!1;return t=t||null!==e.podkategoriya_obekta,t=t||null!==e.kategoriya_obekta,t},child:{type:i.Component,columns:"6",fieldRightMargin:"1",fieldBottomMargin:"1",element:({sx:e,withTransparentHeader:t=!1,readonly:a=!1,_fieldData:i=Ud,onChange:o})=>{const{classes:l}=Nd(),[r,n]=se.useState("address"),{reloadTrigger:s,doReload:d}=Wt(),m=$t(i);return se.useEffect((()=>m.subscribe((()=>{a&&d()}))),[a]),ae(ce,{className:l.root,sx:{...e,height:"100%"},children:ae(Gt,{value:r,children:[t&&ae(he,{sx:{borderBottom:1,borderColor:"divider",pointerEvents:"all"},children:ae(Yt,{variant:"fullWidth",classes:{root:l.tabsRoot,indicator:l.indicatorTransparent},onChange:(e,t)=>n(t),children:[ae(Kt,{classes:{root:l.tabRootTransparent},label:"",value:"address"}),ae(Kt,{classes:{root:l.tabRootTransparent},label:"",value:"area"})]})}),!t&&ae(Zt,{classes:{root:l.appBarRoot},position:"static",sx:{borderBottom:1,borderColor:"divider",pointerEvents:"all"},children:ae(Yt,{variant:"fullWidth",classes:{root:l.tabsRoot,indicator:l.indicator},onChange:(e,t)=>n(t),children:[ae(Kt,{classes:{root:l.tabRoot,selected:l.tabSelected},label:"",value:"address"}),ae(Kt,{classes:{root:l.tabRoot,selected:l.tabSelected},label:"",value:"area"})]})}),ae(Xt,{className:l.container,value:"address",children:ae(fe,{readonly:a,sx:{marginRight:-8},payload:()=>({readonly:a}),handler:i,fields:Rd,onChange:o},s)}),ae(Xt,{className:l.container,value:"area",children:ae(fe,{readonly:a,payload:()=>({readonly:a}),handler:i,fields:Pd,onChange:o},s)})]})})}}},{type:i.Fragment,isVisible:e=>{let t=!1;return t=t||null!==e.podkategoriya_obekta,t=t||null!==e.kategoriya_obekta,t},child:{type:i.Group,style:{height:"100%"},columns:"6",fieldRightMargin:"0",fieldBottomMargin:"0",fields:[{type:i.Component,style:{height:"calc(100% - 212px)"},fieldRightMargin:"1",fieldBottomMargin:"1",isVisible:e=>{let t=!1;return t=t||null!==e.arenda,t=t||null!==e.prodazha,t},element:({onChange:e,_fieldData:t})=>ae(Zd,{withRentTab:null!==t.arenda,withSellTab:null!==t.prodazha,onChange:e,fieldData:t})},{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:" "})},{type:i.Text,inputRows:3,outlined:!1,name:"opisanie",title:""}]}]}}]},...em,...Jd,...Xd,{type:i.Component,features:["withBottomSaveButton"],watchOneContext:!0,element:Fn}];window.bid_fields=tm;const am=[{type:ie.Link,action:"list-action",label:""},{type:ie.Link,action:"list-action",label:" "},{type:ie.Button,isDisabled:({hasChanged:e})=>!e,action:"save-action",label:""}],im=Ke.createLoader(28),om=[{type:Ze.Compute,sortable:!1,field:"index",headerName:"",element:({index:e})=>ae(Xe,{content:String(e)}),width:()=>100},{type:Ze.Compute,sortable:!1,headerName:"",width:()=>150,element:({apartment_images:e})=>ae(he,{style:{height:64,width:128,display:"flex",alignItems:"center",background:"#ccc",justifyContent:"center"},children:ae(Ue,{Loader:im,children:async()=>{const t=e?e[0]:null,a=t?await Dr.appwriteService.getImageURL(t):"";return ae(Le,{children:a?ae("img",{crossOrigin:"anonymous",loading:"lazy",alt:"apartment",src:a,style:{objectFit:"cover",height:"100%",width:"100%"}}):ae(Je,{sx:{color:"white",fontSize:28}})})}})})},{type:Ze.Text,sortable:!0,field:"zagolovok",headerName:"",width:()=>200},{type:Ze.Text,sortable:!0,field:"kolichestvo_komnat",headerName:"",width:()=>100},{type:Ze.Text,sortable:!0,field:"etazh",headerName:"",width:()=>100},{type:Ze.Text,sortable:!0,field:"etazhnost",headerName:"",width:()=>100},{type:Ze.Compute,sortable:!0,field:"ploshhad",compute:e=>[e.obshhaya_ploshhad,e.ploshhad_doma].filter((e=>!!e)).join(", "),headerName:" ",width:()=>200},{type:Ze.Compute,sortable:!0,field:"adres",compute:e=>[e.strana,e.gorod,e.oblast,e.rajon,e.mahallya,e.ulicza,e.orientir].filter((e=>!!e)).join(", "),headerName:"",width:()=>250},{type:Ze.Compute,field:"kategoriya_obekta",sortable:!0,compute:e=>{var t;return(null==(t=e.kategoriya_obekta)?void 0:t.join(", "))||"Unset"},headerName:"",width:()=>200},{type:Ze.Compute,isVisible:({payload:e})=>e.permissions.hasOwnerPricePermission,field:"czena_prodazha",sortable:!0,compute:async({prod_startovaya_czena:e,prod_startovaya_czena_valyuta:t,prod_startovaya_czena_for:a,prod_kom_startovaya_czena:i,prod_kom_startovaya_czena_valyuta:o,prod_kom_startovaya_czena_for:l})=>e?"".concat(e," ").concat("uzs"===t?"UZS":"USD"," (").concat((null==a?void 0:a.join(""))||"",")"):i?"".concat(i," ").concat("uzs"===o?"UZS":"USD"," (").concat((null==l?void 0:l.join(""))||"",")"):"Unset",headerName:" ()",width:()=>200},{type:Ze.Compute,field:"czena_arenda",isVisible:({payload:e})=>e.permissions.hasOwnerPricePermission,sortable:!0,compute:async({rent_startovaya_czena:e,rent_startovaya_czena_valyuta:t,rent_startovaya_czena_for:a,rent_kom_startovaya_czena:i,rent_kom_startovaya_czena_valyuta:o,rent_kom_startovaya_czena_for:l})=>e?"".concat(e," ").concat("uzs"===t?"UZS":"USD"," (").concat((null==a?void 0:a.join(""))||"",")"):i?"".concat(i," ").concat("uzs"===o?"UZS":"USD"," (").concat((null==l?void 0:l.join(""))||"",")"):"Unset",headerName:" ()",width:()=>200},{type:Ze.Compute,sortable:!0,field:"istochnik",compute:e=>e.istochnik||"Unset",headerName:"",width:()=>150},{type:Ze.Compute,sortable:!1,field:"status",headerName:"",compute:async({id:e})=>await Dr.dealViewService.readStatusByApartmentId(e),width:()=>150},{type:Ze.Compute,isVisible:({payload:{permissions:e}})=>e.hasFioPermission,sortable:!1,field:"fio",compute:async({contact_id:e})=>{const t=await Dr.contactViewService.tryRead(e);return t?t.fio:"Unset"},headerName:".. ",width:()=>200},{type:Ze.Compute,isVisible:({payload:{permissions:e}})=>e.hasPreviewModeDisabled,sortable:!1,field:"telefon",element:({id:e,contact_id:t})=>ae(Qe,{payload:e,condition:e=>Dr.permissionRequestService.getOwnerContactPermissionByApartmentId(e),Loading:"",Else:"",children:ae(Ue,{payload:t,children:async e=>{const t=await Dr.contactViewService.tryRead(e);return t?t.telefon:"Unset"}})}),headerName:" ",width:()=>200},{type:Ze.Compute,field:"$createdAt",headerName:" ",compute:({$createdAt:e})=>r(e).format("DD/MM/YYYY"),sortable:!0,width:()=>200},{type:Ze.Compute,field:"$updatedAt",sortable:!0,headerName:" ",compute:({$updatedAt:e})=>r(e).format("DD/MM/YYYY"),width:()=>200}];Ke.createLoader(28);const lm=({fieldData:e,payload:t})=>{const a=$t(e),{columns:i}=_n({storageKey:"apartment_columns",columns:om}),o=se.useMemo((()=>os(e)),[e]);return ae(he,{sx:{pointerEvents:"all",height:"max(60vh, 350px)",mb:5},children:ae(ft,{withLoader:!0,withInitialLoader:!0,reloadSubject:a,handler:(e,...t)=>Dr.apartmentViewService.paginate({...o,_accessLevel:5,_mode:"audit"},...t),isRowDisabled:({system_access_level:e})=>e>t.accessLevel,columns:i,payload:t})})},rm=({payload:e,features:t})=>{const a=pn(),i=_t(),{columns:o}=_n({storageKey:"apartment_columns",columns:ln}),{pickData:l,render:r,open:n}=ea({withSearch:!0,withLoader:!0,noInitialFilters:!0,fetchDebounce:so,reloadSubject:Dr.userViewService.reloadSubject,selectionMode:gt.Single,onSubmit:e=>(i.next(e),!0),filterLabel:"  ",filters:un,columns:o,handler:a,payload:e,features:t});return{pickData:l,render:r,resultSubject:i,open:n}},nm=[{type:i.Group,style:{minWidth:540},fields:[{type:i.Combo,title:" ",isInvalid:e=>e.deal_type?null:"  ",name:"deal_type",map:(e,t)=>{const{prod_czena_ot:a,prod_startovaya_czena_ot:i=a,prod_czena_do:o,prod_startovaya_czena_do:l=o,prod_kom_czena_ot:r,prod_kom_startovaya_czena_ot:n=r,prod_kom_czena_do:s,prod_kom_startovaya_czena_do:d=s,rent_czena_ot:m,rent_startovaya_czena_ot:c=m,rent_czena_do:u,rent_startovaya_czena_do:p=u,rent_kom_czena_ot:y,rent_kom_startovaya_czena_ot:h=y,rent_kom_czena_do:b,rent_kom_startovaya_czena_do:_=b,prod_czena_valyuta:v="usd",rent_czena_valyuta:f="usd"}=t.data;return e.deal_type&&""===e.deal_type[0]&&(L.set(e,"price_ot",i||n),L.set(e,"price_do",l||d),L.set(e,"unit",[v||"usd"])),e.deal_type&&""===e.deal_type[0]&&(L.set(e,"price_ot",c||h),L.set(e,"price_do",p||_),L.set(e,"unit",[f||"usd"])),e},itemList:()=>[...hl]},{type:i.Box,isVisible:({deal_type:e,price_type:t})=>!!e&&"range"===t,style:{display:"grid",gridTemplateColumns:"1fr 1fr 125px"},fields:[{type:i.Text,outlined:!1,placeholder:" ",labelShrink:!0,name:"price_ot",title:"  ()"},{type:i.Text,outlined:!1,placeholder:" ",labelShrink:!0,name:"price_do",title:"  ()"},{type:i.Combo,noDeselect:!0,fieldBottomMargin:"0",title:"",placeholder:"USD",itemList:["usd","uzs"],tr:e=>"uzs"===e?"SUM":"USD",defaultValue:"usd",outlined:!1,name:"unit"}]},{type:i.Text,fieldBottomMargin:"1",placeholder:" ",inputRows:3,labelShrink:!0,name:"comment",title:""},{type:i.Radio,fieldBottomMargin:"0",name:"price_type",radioValue:"unset",defaultValue:"unset",title:"  "},{type:i.Radio,fieldBottomMargin:"0",name:"price_type",radioValue:"range",title:""}]}],sm=[{type:i.Choose,fieldBottomMargin:"1",isInvalid:e=>e.target_apartment_id?null:"  ",choose:async(e,t)=>{t.pickApartment(e.target_apartment_id?[e.target_apartment_id]:[]);const a=await t.apartmentResultSubject.toPromise();if(a&&a.length){const[e]=a;return e}return null},tr:async e=>{const t=await Dr.apartmentViewService.tryRead(e);return(null==t?void 0:t.zagolovok)||(null==t?void 0:t.$id)||""},name:"target_apartment_id",title:" ",placeholder:" "},{type:i.Text,fieldBottomMargin:"1",placeholder:" ",inputRows:3,labelShrink:!0,name:"comment",title:""},{type:i.Radio,fieldBottomMargin:"0",title:" ",name:"status",radioValue:" ",defaultValue:" "},{type:i.Radio,fieldBottomMargin:"0",title:" ",name:"status",radioValue:" "}],dm=[{action:"deal-end-action",isDisabled:({activeItem:e})=>!e,label:" "}],mm=[{type:i.Paper,features:["hasResponsiblePermission"],fieldBottomMargin:"1",fieldRightMargin:"1",columns:"12",fields:[{type:i.Component,element:({id:e,payload:t,features:a,_fieldData:i})=>{const[o,l]=se.useState(null),[r,n]=se.useState(null),s=se.useMemo((()=>({...o,occupiedBy:r})),[o,r]),{pickData:d,render:m,resultSubject:c}=rm({payload:t,features:a}),{loading:u,execute:p}=Ie((async()=>{const t=Dr.appwriteService.currentUser.$id,a=await Dr.dealHistoryRequestService.readDealStateByBid(e,t),i=await Dr.dealViewService.findOccupiedByTagetBidId(e);l(a),n(i)}),{onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1),fallback:Dr.errorService.handleGlobalError}),{handleLoadStart:y,handleLoadEnd:h}=de({history:Dr.routerService,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1)}),b=wt({title:" ",fields:sm,payload:()=>({...t,pickApartment:d,apartmentResultSubject:c}),features:a}),_=wt({title:" ",fields:nm,payload:{data:i,...t},features:a});se.useEffect((()=>Dr.dealHistoryViewService.createSubject.subscribe((t=>{t.bid_id===e&&p()}))),[]),se.useEffect((()=>{p()}),[]);const v=()=>{_().then((async t=>{if(!t)return;const a=t.deal_type?t.deal_type[0]:"";if(!a)return;let i=[],o="";"range"===t.price_type&&(i=[t.price_ot,t.price_do].filter((e=>e)),o=t.unit?t.unit[0]:"usd"),(async(t,a=[],i="usd",o="")=>{let l=!0;y();try{const l=Dr.appwriteService.currentUser.$id;await Dr.dealHistoryRequestService.commitBidDealBegin(e,l,t,a,i,o),await p()}catch(r){Dr.alertService.notify(xr(r)),l=!1}finally{h(l)}})(a,i,o,t.comment)}))},f=async()=>{let t=!0;y();try{const t=Dr.appwriteService.currentUser.$id;await Dr.dealHistoryRequestService.commitBidDealReassign(e,t),await p()}catch(a){t=!1}finally{h(t)}},g=t=>{"deal-end-action"===t&&b().then((t=>{t&&(async(t,a,i)=>{let o=!0;y();try{await Dr.dealRequestService.commitBidDealEnd(e,t,a,i),await p()}catch(l){o=!1}finally{h(o)}})(t.target_apartment_id,t.status,t.comment)}))};return ae(be,{style:{pointerEvents:"all"},direction:"column",children:[ae(le,{variant:"body1",sx:{mt:-.5,mb:1,color:e=>e.palette.action.active,fontWeight:"bold"},children:""}),ae(be,{direction:"column",gap:"16px",children:[ae(be,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[ae(Ue,{loading:u,Loader:()=>ae(be,{direction:"row",gap:"16px",alignItems:"center",children:[ae(He,{variant:"circular",width:40,height:40}),ae(be,{children:[ae(He,{sx:{mb:1},variant:"rectangular",width:210,height:20}),ae(He,{variant:"rectangular",width:210,height:20})]})]}),payload:s,children:async e=>{if(e.occupiedBy)return ae(le,{variant:"body1",children:["  "," ",ae(ta,{href:"#",onClick:()=>Y("/deal"),children:e.occupiedBy.status})]});if(!(null==e?void 0:e.activeItem))return ae(le,{variant:"body1",children:"  "});const{first_name:t=" ",user_role:a,avatar:i=null}=await Dr.userViewService.read(e.activeItem.user_id),o=i?await Dr.appwriteService.getImageURL(i):"",l=await Dr.dictService.getUserRoles();return ae(be,{direction:"row",gap:"16px",alignItems:"center",children:[ae(Oe,{alt:t,src:o}),ae(be,{direction:"column",children:[ae(le,{variant:"body1",children:t}),ae(le,{variant:"caption",style:{fontSize:"14px"},children:(null==a?void 0:a.length)?L.get(l,a[0])||a[0]:" "})]})]})}}),ae(be,{direction:"row",gap:1,alignItems:"center",children:[ae(Ue,{loading:u,Loader:()=>ae(He,{variant:"rectangular",sx:{borderRadius:"4px"},width:100,height:35}),payload:s,children:async t=>{if(t.occupiedBy)return null;if(await Dr.permissionRequestService.hasReassignDelayFlagByBidId(e))return ae(_e,{disabled:!0,variant:"contained",children:" "});if(null==t?void 0:t.activeItem){const e=Dr.appwriteService.currentUser.$id,a=t.activeItem.user_id===e;return ae(_e,{disabled:a,onClick:f,variant:"contained",children:a?" ":" "})}return ae(_e,{onClick:v,variant:"contained",children:" "})}}),ae(Ue,{loading:u,Loader:()=>ae(He,{variant:"circular",width:40,height:40}),payload:s,children:async e=>ae(Bt,{transparent:!0,options:dm,payload:e,onAction:g})})]})]}),ae(Ue,{loading:u,Loader:()=>ae(aa,{max:Number.POSITIVE_INFINITY,style:{marginRight:"auto"},children:[ae(He,{variant:"circular",width:28,height:28}),ae(He,{variant:"circular",width:28,height:28}),ae(He,{variant:"circular",width:28,height:28})]}),payload:s,children:async e=>{var t;if(!(null==(t=null==e?void 0:e.reassign)?void 0:t.length))return null;const a=await Promise.all(e.reassign.filter(((e,t,a)=>a.findIndex((({user_id:t})=>t===e.user_id))==t)).map((async({user_id:e})=>{const t=await Dr.userViewService.tryRead(e);let a="";return(null==t?void 0:t.avatar)&&(a=await Dr.appwriteService.getImageURL(t.avatar)),ae(Oe,{style:{height:"28px",width:"28px"},alt:null==t?void 0:t.email,src:a})})));return ae(aa,{max:Number.POSITIVE_INFINITY,style:{marginRight:"auto"},children:a})}})]}),m()]})}}]},{type:i.Paper,features:["hasResponsiblePermission"],fieldBottomMargin:"1",fieldRightMargin:"1",columns:"12",fields:[{type:i.Component,element:({system_created_by:e,system_only_for_owner:t,system_allowance:a})=>ae(be,{style:{pointerEvents:"all"},direction:"column",children:[ae(le,{variant:"body1",sx:{mt:-.5,mb:1,color:e=>e.palette.action.active,fontWeight:"bold"},children:""}),ae(ge,{disablePadding:!0,dense:!0,children:ae(Ue,{deps:[t,a],children:async()=>{const i=[];return e&&i.push(e),a&&a.forEach((e=>i.push(e))),i.length?ae(Le,{children:await Promise.all(i.map((async a=>{var i;const o=await Dr.userViewService.read(a),l=o.avatar?await Dr.appwriteService.getImageURL(o.avatar):"",r=await Dr.dictService.getUserRoles(),n=[o.last_name,o.first_name,o.middle_name].filter((e=>e)).join(" ");return ae(Ee,{disableGutters:!0,disablePadding:!0,children:[ae(Ne,{children:ae(Oe,{src:l})}),ae(xe,{primary:n,secondary:(null==(i=o.user_role)?void 0:i.length)?L.get(r,o.user_role[0])||o.user_role[0]:" "}),a===e&&ae(be,{gap:1,direction:"row",children:[ae(Jt,{label:" ",color:"info"}),!!t&&ae(Jt,{label:"",color:"warning"})]})]})})))}):ae(le,{children:" "})}})})]})}]},{type:i.Group,columns:"12",fieldRightMargin:"0",fieldBottomMargin:"0",isVisible:e=>fs(e,"kategoriya_obekta","podkategoriya_obekta","arenda","prodazha","istochnik"),fields:[{type:i.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:" "})},{type:i.Text,outlined:!1,name:"zagolovok",title:"",placeholder:" "},{type:i.Text,outlined:!1,compute:({kategoriya_obekta:e})=>e||" ",title:" "},{type:i.Text,isVisible:e=>!!lt(e.kategoriya_obekta,"")||!!lt(e.kategoriya_obekta,""),outlined:!1,compute:({podkategoriya_obekta:e})=>e||" ",title:" "},{type:i.Text,outlined:!1,compute:({arenda:e,prodazha:t})=>t&&e?", ":t?"":e?"":" ",title:" "},{type:i.Text,outlined:!1,columns:"4",compute:({strana:e})=>e||" ",title:""},{type:i.Text,outlined:!1,columns:"4",compute:({oblast:e})=>e||" ",title:""},{type:i.Text,outlined:!1,columns:"4",compute:({gorod:e})=>e||" ",title:""},{type:i.Text,outlined:!1,compute:({rajon:e,ulicza:t})=>{const a=[e,t?t.toLowerCase().includes("")?t:" ".concat(t):null].filter((e=>e));return a.length?a.flatMap((e=>e)).join(", "):" "},title:""},{type:i.Text,outlined:!1,compute:({mahallya:e})=>e||" ",title:""},{type:i.Text,outlined:!1,compute:({orientir:e})=>e||" ",title:""},{type:i.Text,outlined:!1,compute:({metro:e})=>e||" ",title:""},{type:i.Fragment,isVisible:e=>{let t=!1;return t=t||lt(e.podkategoriya_obekta,""),t},fields:[{type:i.Text,features:["hasBidHouseNumberPermission"],columns:"6",outlined:!1,name:"nomer_doma",title:" "},{type:i.Text,features:["hasBidHouseNumberPermission"],columns:"6",outlined:!1,name:"nomer_kvartiry",title:" "}]},{type:i.Fragment,isVisible:e=>{let t=!1;return t=t||null!==e.kategoriya_obekta,t=t||null!==e.podkategoriya_obekta,t=t&&!lt(e.podkategoriya_obekta,""),t},fields:[{type:i.Text,features:["hasBidHouseNumberPermission"],outlined:!1,name:"nomer_doma",title:" "}]},{type:i.Text,outlined:!1,compute:({istochnik:e})=>e||" ",title:""},{type:i.Component,fieldBottomMargin:"2",element:({contact_id:e})=>ae(Ue,{payload:e,Loader:()=>ae(xt,{fullWidth:!0,variant:"standard",label:" ",InputProps:{readOnly:!0},value:""}),children:async()=>{const t=await Dr.contactViewService.tryRead(e),a=(null==t?void 0:t.tip_klienta)||" ";return ae(xt,{fullWidth:!0,variant:"standard",label:" ",InputProps:{readOnly:!0},value:a})}})}]},{type:i.Component,style:{height:"100%"},columns:"6",fieldRightMargin:"1",fieldBottomMargin:"1",isVisible:e=>{let t=!1;return t=t||null!==e.arenda,t=t||null!==e.prodazha,t},element:({onChange:e,_fieldData:t,features:a})=>ae(Zd,{withTransparentHeader:!0,features:a,readonly:!0,withRentTab:null!==t.arenda,withSellTab:null!==t.prodazha,onChange:e,fieldData:t})}]},{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.podkategoriya_obekta,""),t=t&&lt(e.kategoriya_obekta,""),t=t&&!lt(e.kategoriya_obekta,""),t},fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"   ( )"})},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"kolichestvo_komnat_ot","kolichestvo_komnat_do"),name:"kolichestvo_komnat",title:" "}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:" "},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",isVisible:e=>fs(e,"god_postrojki_ot","god_postrojki_do"),name:"god_postrojki",title:" "}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma"),title:" "},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"etazh_ot","etazh_do"),name:"etazh",title:""}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"balkon","balkon_kvartira","balkon_doma"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({tip_planirovki:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"tip_planirovki"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"lift_kommercziya","lift_kvartira","lift_dom"),title:""},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"etazhnost_ot","etazhnost_do"),name:"etazhnost",title:""}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sanuzel","sanuzel_kvartira","sanuzel_doma"),title:""},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"zhilaya_ploshhad_ot","zhilaya_ploshhad_do"),name:"zhilaya_ploshhad",title:"  "}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"mebel","mebel_kvartira","mebel_dom"),title:""},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"obshhaya_ploshhad_ot","obshhaya_ploshhad_do"),name:"obshhaya_ploshhad",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"vysota_potolkov_ot","vysota_potolkov_do"),name:"vysota_potolkov",title:" "}),nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"kolichestvo_spalen_ot","kolichestvo_spalen_do"),name:"kolichestvo_spalen",title:" "}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:" "},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"spalnya_sanuzel_ot","spalnya_sanuzel_do"),name:"spalnya_sanuzel",title:" + "}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"gaz","gaz_dom","gaz_zemlya"),title:""},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"rasstoyanie_do_metro_ot","rasstoyanie_do_metro_do"),name:"rasstoyanie_do_metro",title:"   ()"}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({vid_iz_okna:e,vid_iz_okna_dom:t})=>[...e||[],...t||[]].reduce(((e,t)=>e.includes(t)?e:[...e,t]),[]).filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"vid_iz_okna","vid_iz_okna_dom"),title:"  "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"parkovka","parkovka_kvartira","parkovka_zemlya"),title:""}]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.podkategoriya_obekta,""),t=t&&lt(e.kategoriya_obekta,""),t=t&&!lt(e.kategoriya_obekta,""),t},fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"   ( )"})},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"kolichestvo_komnat_ot","kolichestvo_komnat_do"),name:"kolichestvo_komnat",title:" "}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({sostoyanie_doma:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sostoyanie_doma"),title:" "},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",isVisible:e=>fs(e,"god_postrojki_ot","god_postrojki_do"),name:"god_postrojki",title:" "}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma"),title:" "},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"etazhnost_ot","etazhnost_do"),name:"etazhnost",title:""}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"balkon","balkon_kvartira","balkon_doma"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({tip_planirovki:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"tip_planirovki"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({bassejn:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"bassejn"),title:""},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"ploshhad_doma_ot","ploshhad_doma_do"),name:"ploshhad_doma",title:"  "}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sanuzel","sanuzel_kvartira","sanuzel_doma"),title:""},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"mashina_mesto_ot","mashina_mesto_do"),name:"mashina_mesto",title:"-"}),nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"kolichestvo_spalen_ot","kolichestvo_spalen_do"),name:"kolichestvo_spalen",title:" "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"kolichestvo_sotok_ot","kolichestvo_sotok_do"),name:"kolichestvo_sotok",title:" "}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.voda,e.voda_dom,e.voda_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"voda","voda_dom","voda_zemlya"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"lift_kommercziya","lift_kvartira","lift_dom"),title:""},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"spalnya_sanuzel_ot","spalnya_sanuzel_do"),name:"spalnya_sanuzel",title:" + "}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"mebel","mebel_kvartira","mebel_dom"),title:""},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"rasstoyanie_do_metro_ot","rasstoyanie_do_metro_do"),name:"rasstoyanie_do_metro",title:"   ()"}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"gaz","gaz_dom","gaz_zemlya"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:" "},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"vysota_potolkov_ot","vysota_potolkov_do"),name:"vysota_potolkov",title:" "}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({vid_iz_okna:e,vid_iz_okna_dom:t})=>[...e||[],...t||[]].reduce(((e,t)=>e.includes(t)?e:[...e,t]),[]).filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"vid_iz_okna","vid_iz_okna_dom"),title:"  "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({garazh:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"garazh"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({raspolozhenie_doma:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"raspolozhenie_doma"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya"),title:" "}]},{type:i.Fragment,isVisible:e=>(!lt(e.podkategoriya_obekta,"/")||!lt(e.kategoriya_obekta,""))&&((!lt(e.podkategoriya_obekta,"")||!lt(e.kategoriya_obekta,""))&&((!lt(e.podkategoriya_obekta,"")||!lt(e.kategoriya_obekta,""))&&lt(e.kategoriya_obekta,""))),fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"   ( )"})},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"kolichestvo_komnat_ot","kolichestvo_komnat_do"),name:"kolichestvo_komnat",title:" "}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_obekta,e["sostoyanie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sostoyanie_obekta","sostoyanie-obekta_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:" "},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"poleznaya_ploshhad_ot","poleznaya_ploshhad_do"),name:"poleznaya_ploshhad",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"etazh_ot","etazh_do"),name:"etazh",title:""}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma"),title:" "},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"mashina_mesto_ot","mashina_mesto_do"),name:"mashina_mesto",title:"-"}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"kolichestvo_sotok_ot","kolichestvo_sotok_do"),name:"kolichestvo_sotok",title:" "}),nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"etazhnost_ot","etazhnost_do"),name:"etazhnost",title:""}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"balkon","balkon_kvartira","balkon_doma"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"parkovka","parkovka_kvartira","parkovka_zemlya"),title:""},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"vysota_potolkov_ot","vysota_potolkov_do"),name:"vysota_potolkov",title:" "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"obshhaya_ploshhad_ot","obshhaya_ploshhad_do"),name:"obshhaya_ploshhad",title:"  "}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sanuzel","sanuzel_kvartira","sanuzel_doma"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"mebel","mebel_kvartira","mebel_dom"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.voda,e.voda_dom,e.voda_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"voda","voda_dom","voda_zemlya"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"gaz","gaz_dom","gaz_zemlya"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"lift_kommercziya","lift_kvartira","lift_dom"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya"),title:""},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"rasstoyanie_do_metro_ot","rasstoyanie_do_metro_do"),name:"rasstoyanie_do_metro",title:"   ()"}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya"),title:" "},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",isVisible:e=>fs(e,"god_postrojki_ot","god_postrojki_do"),name:"god_postrojki",title:" "}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({vid_liczenzii:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"vid_liczenzii"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({raspolozhenie_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"raspolozhenie_obekta"),title:" "}]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.podkategoriya_obekta,"/"),t=t&&lt(e.kategoriya_obekta,""),t=t&&!lt(e.kategoriya_obekta,""),t},fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"   ( /)"})},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"kolichestvo_komnat_ot","kolichestvo_komnat_do"),name:"kolichestvo_komnat",title:" "}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({tip_zemli_uchastka:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"tip_zemli_uchastka"),title:" /"},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"poleznaya_ploshhad_ot","poleznaya_ploshhad_do"),name:"poleznaya_ploshhad",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"etazh_ot","etazh_do"),name:"etazh",title:""}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_obekta,e["sostoyanie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sostoyanie_obekta","sostoyanie-obekta_zemlya"),title:" "},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"mashina_mesto_ot","mashina_mesto_do"),name:"mashina_mesto",title:"-"}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"kolichestvo_sotok_ot","kolichestvo_sotok_do"),name:"kolichestvo_sotok",title:" "}),nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"etazhnost_ot","etazhnost_do"),name:"etazhnost",title:""}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"parkovka","parkovka_kvartira","parkovka_zemlya"),title:""},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"rasstoyanie_do_metro_ot","rasstoyanie_do_metro_do"),name:"rasstoyanie_do_metro",title:"   ()"}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"obshhaya_ploshhad_ot","obshhaya_ploshhad_do"),name:"obshhaya_ploshhad",title:"  "}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.voda,e.voda_dom,e.voda_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"voda","voda_dom","voda_zemlya"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya"),title:" "},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"rasstoyanie_do_goroda_ot","rasstoyanie_do_goroda_do"),name:"rasstoyanie_do_goroda",title:"   ()"}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({podezdnye_puti:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"podezdnye_puti"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:" "},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",isVisible:e=>fs(e,"god_postrojki_ot","god_postrojki_do"),name:"god_postrojki",title:" "}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"gaz","gaz_dom","gaz_zemlya"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya"),title:""}]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.podkategoriya_obekta,""),t=t&&U(O(lt(e.kategoriya_obekta,""),lt(e.kategoriya_obekta,"")),O(lt(e.kategoriya_obekta,""),!lt(e.kategoriya_obekta,""))),t},fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"   ( )"})},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"kolichestvo_komnat_ot","kolichestvo_komnat_do"),name:"kolichestvo_komnat",title:" "}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma"),title:" "},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"etazh_ot","etazh_do"),name:"etazh",title:""}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"balkon","balkon_kvartira","balkon_doma"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({tip_planirovki:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"tip_planirovki"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"lift_kommercziya","lift_kvartira","lift_dom"),title:""},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"etazhnost_ot","etazhnost_do"),name:"etazhnost",title:""}),nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",isVisible:e=>fs(e,"god_postrojki_ot","god_postrojki_do"),name:"god_postrojki",title:" "}),{type:i.Text,columns:"3",outlined:!1,isVisible:e=>fs(e,"nazvanie_zhk"),name:"nazvanie_zhk",title:" "},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"mashina_mesto_ot","mashina_mesto_do"),name:"mashina_mesto",title:"-"}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"obshhaya_ploshhad_ot","obshhaya_ploshhad_do"),name:"obshhaya_ploshhad",title:"  "}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sanuzel","sanuzel_kvartira","sanuzel_doma"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"parkovka","parkovka_kvartira","parkovka_zemlya"),title:""},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"zhilaya_ploshhad_ot","zhilaya_ploshhad_do"),name:"zhilaya_ploshhad",title:"  "}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"mebel","mebel_kvartira","mebel_dom"),title:""},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"vysota_potolkov_ot","vysota_potolkov_do"),name:"vysota_potolkov",title:" "}),nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"kolichestvo_spalen_ot","kolichestvo_spalen_do"),name:"kolichestvo_spalen",title:" "}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({vid_iz_okna:e,vid_iz_okna_dom:t})=>[...e||[],...t||[]].reduce(((e,t)=>e.includes(t)?e:[...e,t]),[]).filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"vid_iz_okna","vid_iz_okna_dom"),title:"  "},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"spalnya_sanuzel_ot","spalnya_sanuzel_do"),name:"spalnya_sanuzel",title:" + "}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"gaz","gaz_dom","gaz_zemlya"),title:""},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"rasstoyanie_do_metro_ot","rasstoyanie_do_metro_do"),name:"rasstoyanie_do_metro",title:"   ()"}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({raspolozhenie_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"raspolozhenie_obekta"),title:" "}]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.podkategoriya_obekta,""),t=t&&U(O(lt(e.kategoriya_obekta,""),lt(e.kategoriya_obekta,"")),O(lt(e.kategoriya_obekta,""),!lt(e.kategoriya_obekta,""))),t},fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"   ( )"})},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"kolichestvo_komnat_ot","kolichestvo_komnat_do"),name:"kolichestvo_komnat",title:" "}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({sostoyanie_doma:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sostoyanie_doma"),title:" "},{type:i.Items,columns:"3",freeSolo:!0,outlined:!1,compute:e=>[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:" "},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"etazhnost_ot","etazhnost_do"),name:"etazhnost",title:""}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({raspolozhenie_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"raspolozhenie_obekta"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma"),title:" "},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"ploshhad_doma_ot","ploshhad_doma_do"),name:"ploshhad_doma",title:"  "}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({raspolozhenie_doma:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"raspolozhenie_doma"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({tip_planirovki:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"tip_planirovki"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({bassejn:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"bassejn"),title:""},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"kolichestvo_sotok_ot","kolichestvo_sotok_do"),name:"kolichestvo_sotok",title:" "}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sanuzel","sanuzel_kvartira","sanuzel_doma"),title:""},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"mashina_mesto_ot","mashina_mesto_do"),name:"mashina_mesto",title:"-"}),nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"kolichestvo_spalen_ot","kolichestvo_spalen_do"),name:"kolichestvo_spalen",title:" "}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.voda,e.voda_dom,e.voda_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"voda","voda_dom","voda_zemlya"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"lift_kommercziya","lift_kvartira","lift_dom"),title:""},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"spalnya_sanuzel_ot","spalnya_sanuzel_do"),name:"spalnya_sanuzel",title:" + "}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"mebel","mebel_kvartira","mebel_dom"),title:""},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"rasstoyanie_do_metro_ot","rasstoyanie_do_metro_do"),name:"rasstoyanie_do_metro",title:"   ()"}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"gaz","gaz_dom","gaz_zemlya"),title:""},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",isVisible:e=>fs(e,"god_postrojki_ot","god_postrojki_do"),name:"god_postrojki",title:" "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"vysota_potolkov_ot","vysota_potolkov_do"),name:"vysota_potolkov",title:" "}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({vid_iz_okna:e,vid_iz_okna_dom:t})=>[...e||[],...t||[]].reduce(((e,t)=>e.includes(t)?e:[...e,t]),[]).filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"vid_iz_okna","vid_iz_okna_dom"),title:"  "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({garazh:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"garazh"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"balkon","balkon_kvartira","balkon_doma"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:" "}]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&lt(e.podkategoriya_obekta,"/"),t=t&&U(O(lt(e.kategoriya_obekta,""),lt(e.kategoriya_obekta,"")),O(lt(e.kategoriya_obekta,""),!lt(e.kategoriya_obekta,""))),t},fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"   ( /)"})},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"kolichestvo_komnat_ot","kolichestvo_komnat_do"),name:"kolichestvo_komnat",title:" "}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({tip_zemli_uchastka:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"tip_zemli_uchastka"),title:" /"},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"poleznaya_ploshhad_ot","poleznaya_ploshhad_do"),name:"poleznaya_ploshhad",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"etazh_ot","etazh_do"),name:"etazh",title:""}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_obekta,e["sostoyanie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"sostoyanie_obekta","sostoyanie-obekta_zemlya"),title:" "},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"mashina_mesto_ot","mashina_mesto_do"),name:"mashina_mesto",title:"-"}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"kolichestvo_sotok_ot","kolichestvo_sotok_do"),name:"kolichestvo_sotok",title:" "}),nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"etazhnost_ot","etazhnost_do"),name:"etazhnost",title:""}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"parkovka","parkovka_kvartira","parkovka_zemlya"),title:""},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"rasstoyanie_do_metro_ot","rasstoyanie_do_metro_do"),name:"rasstoyanie_do_metro",title:"   ()"}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"obshhaya_ploshhad_ot","obshhaya_ploshhad_do"),name:"obshhaya_ploshhad",title:"  "}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.voda,e.voda_dom,e.voda_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"voda","voda_dom","voda_zemlya"),title:""},{type:i.Items,columns:"3",freeSolo:!0,outlined:!1,compute:e=>[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya"),title:" "},nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"rasstoyanie_do_goroda_ot","rasstoyanie_do_goroda_do"),name:"rasstoyanie_do_goroda",title:"   ()"}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:" "},nn({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",isVisible:e=>fs(e,"god_postrojki_ot","god_postrojki_do"),name:"god_postrojki",title:" "}),{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({podezdnye_puti:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>fs(e,"podezdnye_puti"),title:" "},{type:i.Items,columns:"3",freeSolo:!0,outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:" "},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"gaz","gaz_dom","gaz_zemlya"),title:""},{type:i.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>fs(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya"),title:""}]}]},{type:i.Paper,isVisible:e=>fs(e,"vnutri_est","ryadom_est"),fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"   "})},{type:i.Component,fieldBottomMargin:"1",columns:"6",element:()=>ae(le,{children:" :"})},{type:i.Component,fieldBottomMargin:"1",columns:"6",element:()=>ae(le,{children:" :"})},{type:i.Component,columns:"6",isVisible:({vnutri_est:e})=>!!(null==e?void 0:e.length),element:({vnutri_est:e})=>ae("div",{children:ae(he,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",gap:1},children:null==e?void 0:e.map(((e,t)=>ae(Jt,{label:e},t)))})})},{type:i.Component,columns:"6",isVisible:({ryadom_est:e})=>!!(null==e?void 0:e.length),element:({ryadom_est:e})=>ae("div",{children:ae(he,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",gap:1},children:null==e?void 0:e.map(((e,t)=>ae(Jt,{label:e},t)))})})}]},{type:i.Paper,isVisible:e=>fs(e,"ploshhad_gostinnoj_ot","ploshhad_gostinnoj_do","ploshhad_spalni_ot","ploshhad_spalni_do","ploshhad_holla_ot","ploshhad_holla_do","ploshhad_kuhni_ot","ploshhad_kuhni_do","ploshhad_sanuzla_ot","ploshhad_sanuzla_do","ploshhad_balkona_ot","ploshhad_balkona_do","ploshhad_terrasy_ot","ploshhad_terrasy_do","ploshhad_komnaty_ohrany_ot","ploshhad_komnaty_ohrany_do","ploshhad_gostevogo_doma_ot","ploshhad_gostevogo_doma_do","ploshhad_dopolnitelnoj_pristrojki_ot","ploshhad_dopolnitelnoj_pristrojki_do"),fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,sx:{mb:2},element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:"   "})},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&U(lt(e.kategoriya_obekta,""),lt(e.kategoriya_obekta,"")),t=t&&lt(e.podkategoriya_obekta,""),t},fields:[nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"ploshhad_gostinnoj_ot","ploshhad_gostinnoj_do"),name:"ploshhad_gostinnoj",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"ploshhad_spalni_ot","ploshhad_spalni_do"),name:"ploshhad_spalni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"ploshhad_holla_ot","ploshhad_holla_do"),name:"ploshhad_holla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"ploshhad_kuhni_ot","ploshhad_kuhni_do"),name:"ploshhad_kuhni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"ploshhad_sanuzla_ot","ploshhad_sanuzla_do"),name:"ploshhad_sanuzla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"ploshhad_balkona_ot","ploshhad_balkona_do"),name:"ploshhad_balkona",title:"  "})]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&U(lt(e.kategoriya_obekta,""),lt(e.kategoriya_obekta,"")),t=t&&lt(e.podkategoriya_obekta,""),t},fields:[nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"ploshhad_gostinnoj_ot","ploshhad_gostinnoj_do"),name:"ploshhad_gostinnoj",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"ploshhad_spalni_ot","ploshhad_spalni_do"),name:"ploshhad_spalni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"ploshhad_holla_ot","ploshhad_holla_do"),name:"ploshhad_holla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"ploshhad_kuhni_ot","ploshhad_kuhni_do"),name:"ploshhad_kuhni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"ploshhad_sanuzla_ot","ploshhad_sanuzla_do"),name:"ploshhad_sanuzla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"ploshhad_balkona_ot","ploshhad_balkona_do"),name:"ploshhad_balkona",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"ploshhad_terrasy_ot","ploshhad_terrasy_do"),name:"ploshhad_terrasy",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"ploshhad_komnaty_ohrany_ot","ploshhad_komnaty_ohrany_do"),name:"ploshhad_komnaty_ohrany",title:"   "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"ploshhad_gostevogo_doma_ot","ploshhad_gostevogo_doma_do"),name:"ploshhad_gostevogo_doma",title:"   "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"ploshhad_dopolnitelnoj_pristrojki_ot","ploshhad_dopolnitelnoj_pristrojki_do"),name:"ploshhad_dopolnitelnoj_pristrojki",title:"   "})]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&U(lt(e.kategoriya_obekta,""),lt(e.kategoriya_obekta,"")),t=t&&lt(e.podkategoriya_obekta,"/"),t},fields:[nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"ploshhad_gostinnoj_ot","ploshhad_gostinnoj_do"),name:"ploshhad_gostinnoj",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"ploshhad_spalni_ot","ploshhad_spalni_do"),name:"ploshhad_spalni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"ploshhad_holla_ot","ploshhad_holla_do"),name:"ploshhad_holla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"ploshhad_kuhni_ot","ploshhad_kuhni_do"),name:"ploshhad_kuhni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"ploshhad_sanuzla_ot","ploshhad_sanuzla_do"),name:"ploshhad_sanuzla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"ploshhad_balkona_ot","ploshhad_balkona_do"),name:"ploshhad_balkona",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"ploshhad_terrasy_ot","ploshhad_terrasy_do"),name:"ploshhad_terrasy",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"ploshhad_komnaty_ohrany_ot","ploshhad_komnaty_ohrany_do"),name:"ploshhad_komnaty_ohrany",title:"   "})]},{type:i.Fragment,isVisible:e=>{let t=!0;return t=t&&U(lt(e.kategoriya_obekta,"")),t=t&&!lt(e.podkategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,""),t=t&&!lt(e.podkategoriya_obekta,"/"),t},fields:[nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"ploshhad_gostinnoj_ot","ploshhad_gostinnoj_do"),name:"ploshhad_gostinnoj",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"ploshhad_spalni_ot","ploshhad_spalni_do"),name:"ploshhad_spalni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"ploshhad_holla_ot","ploshhad_holla_do"),name:"ploshhad_holla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"ploshhad_kuhni_ot","ploshhad_kuhni_do"),name:"ploshhad_kuhni",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"ploshhad_sanuzla_ot","ploshhad_sanuzla_do"),name:"ploshhad_sanuzla",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"ploshhad_balkona_ot","ploshhad_balkona_do"),name:"ploshhad_balkona",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"ploshhad_terrasy_ot","ploshhad_terrasy_do"),name:"ploshhad_terrasy",title:"  "}),nn({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>fs(e,"ploshhad_komnaty_ohrany_ot","ploshhad_komnaty_ohrany_do"),name:"ploshhad_komnaty_ohrany",title:"   "})]}]},{type:i.Paper,features:["hasDescriptionPermission"],fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:i.Component,sx:{mb:2},element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:" "})},{type:i.Text,sx:{pointerEvents:"all"},inputRows:8,outlined:!1,name:"opisanie",title:""}]},{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",child:{type:i.Component,element:()=>ae(le,{fontWeight:"bold",variant:"h6",children:" "})}},{type:i.Component,fieldBottomMargin:"1",fieldRightMargin:"1",element:({_fieldData:e,payload:t,features:a})=>ae(lm,{payload:t,features:a,fieldData:e})}],cm=[{type:ie.Link,action:"list-action",label:""},{type:ie.Link,action:"list-action",label:" "},{type:ie.Button,isDisabled:({payload:{permissions:e}})=>!e.hasBidUpdatePermission,action:"edit-action",label:""}],um="real-estate__headerRoot",pm=[{type:ie.Link,action:"list-action",label:" "},{type:ie.Link,action:"list-action",label:" "}],ym="real-estate__headerRoot",hm=[{type:ie.Link,action:"list-action",label:" "},{type:ie.Link,action:"list-action",label:" "}],bm=[{id:"list",element:({payload:e})=>ae(kt,{history:Dr.routerService,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1),routes:kd,payload:e}),isActive:e=>Ur(["/bid","/bid_rent","/bid_sell","/bid_archive"],e),isAvailable:()=>!1},{id:"create",element:()=>{const{elementRef:e,size:t}=ne(),[a,i]=se.useState((()=>({activeStep:0,contact_id:null,fio:"",telefon:""}))),[o,l]=se.useState([]),[r,n]=se.useState(!1),[s,d]=se.useState(!1),m=se.useMemo((()=>new Date(Date.now()+1e4)),[a.activeStep]);se.useEffect((()=>{d(!1)}),[a.activeStep]);const c=e=>i((t=>({...t,activeStep:e}))),{activeStep:u}=a,{classes:p}=Md(),{handleLoadStart:y,handleLoadEnd:h,loading:b,unblock:_}=de({history:Dr.routerService,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1)}),v=async()=>{if(n(!0),a.fio||a.telefon){if(0===u){const{rows:e,total:t}=await Dr.contactRequestService.findDuplicates(a);l(e),c(0===t?2:1)}1===u&&c(2),2===u&&await(async()=>{try{let{contact_id:e,fio:t,telefon:i}=a;e||(e=(await Dr.contactViewService.create({fio:t,telefon:i,"data-sozdaniya_klienta":Ae.currentDate()})).$id);const{id:o}=await Dr.bidViewService.create({contact_id:e});_(),Dr.routerService.push("/bid_edit/".concat(o),{viewRedirectFlag:!0})}catch(e){Dr.alertService.notify(xr(e))}})()}},f=()=>{let e=!1;return 1===u&&(e=e||!s),e=e||b,e=e||3===u,e};return ae(ve,{children:[ae(me,{items:Ld}),ae(ce,{className:p.root,children:[ae(ue,{className:p.header,activeStep:u,children:[ae(pe,{completed:u>0,children:ae(ye,{children:" "})},0),ae(pe,{completed:u>1,children:ae(ye,{children:" "})},1),ae(pe,{completed:u>2,children:ae(ye,{children:" "})},2)]}),ae("div",{className:p.adjust}),ae(he,{ref:e,className:p.content,children:0===u?ae(fe,{sx:{pl:1,pr:1,pt:2,pb:3},handler:a,onChange:i,dirty:r,fields:Id}):1===u?ae(Fe,{sx:{height:t.height},component:ge,minRowHeight:54,children:o.map((({fio:e,telefon:t,$id:o,tip_klienta:l},r)=>ae(ke,{className:we({[p.listItemBackground]:r%2==1}),onClick:()=>{i((e=>({...e,contact_id:o,activeStep:2})))},dense:!0,children:[ae(Se,{children:ae(ze,{edge:"start",checked:a.contact_id===o,sx:{marginLeft:"0 !important"},disableRipple:!0})}),ae(xe,{primary:e,secondary:l}),ae(le,{children:t})]},r)))}):2===u?ae(fe,{sx:{pl:1,pr:1,pt:2,pb:3},handler:a,dirty:r,fields:Id}):null}),ae(be,{sx:{pl:1,pr:1,pb:1},justifyContent:"space-between",flexDirection:"row",children:[ae(_e,{disabled:b||0===u,fallback:Dr.errorService.handleGlobalError,onClick:()=>{i((e=>({...e,contact_id:null}))),0===o.length?c(0):c(u-1)},sx:{mt:1},variant:"contained",onLoadStart:y,onLoadEnd:h,children:""}),ae(_e,1===u?{disabled:f(),fallback:Dr.errorService.handleGlobalError,onClick:v,sx:{mt:1},variant:"contained",onLoadStart:y,onLoadEnd:h,children:ae(Te,{expireAt:m,onExpire:()=>d(!0),children:"  "})}:2===u?{disabled:f(),fallback:Dr.errorService.handleGlobalError,onClick:v,sx:{mt:1},variant:"contained",onLoadStart:y,onLoadEnd:h,children:" "}:{disabled:f(),fallback:Dr.errorService.handleGlobalError,onClick:v,sx:{mt:1},variant:"contained",onLoadStart:y,onLoadEnd:h,children:""})]})]})]})},isActive:e=>Ur(["/bid/create"],e),isAvailable:()=>!1},{id:"contact",element:({formState:e,payload:t,data:a,beginSave:i,onChange:o})=>{const l=$t(a);return ae(Le,{children:[ae(me,{items:xd,onAction:e=>{"save-action"===e&&i()},payload:e}),ae(Er,{}),ae(zd,{payload:t,mode:t.menuMode,children:[ae(fe,{changeSubject:l,features:()=>({...t.permissions,withBottomSaveButton:!0}),handler:()=>a,payload:()=>({...t,beginSave:i}),context:e,fields:Ps,onChange:o}),ae(qe,{}),ae(Re,{})]})]})},isActive:e=>Ur(["/bid_edit/:id/contact"],e)},{id:"parameter",element:({payload:e,formState:t,beginSave:a,data:i,onChange:o})=>{const l=$t(i);return ae(Le,{children:[ae(me,{items:am,onAction:e=>{"save-action"===e&&a()},payload:t}),ae(Er,{}),ae(zd,{payload:e,mode:e.menuMode,children:[ae(fe,{changeSubject:l,features:()=>({...e.permissions,withBottomSaveButton:!0}),fields:tm,payload:()=>({...e,beginSave:a}),context:t,handler:()=>i,onChange:o}),ae(qe,{}),ae(Re,{})]})]})},isActive:e=>Ur(["/bid_edit/:id","/bid_edit/:id/parameter"],e)},{id:"documents",element:({data:e,onChange:t,payload:a,beginSave:i,formState:o})=>{const{handleLoadStart:l,handleLoadEnd:r,loading:n}=de({history:Dr.routerService,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1)});return ae(Le,{children:[ae(me,{items:Bd,payload:o,onAction:e=>{"list-action"===e&&Dr.routerService.replace("/apartment"),"save-action"===e&&i()}}),ae(Er,{}),ae(zd,{payload:a,mode:a.menuMode,children:[ae(ce,{sx:{p:1},children:ae(De,{disabled:n,accept:"*",multiple:!0,items:e,tr:async e=>await Dr.appwriteService.tryReadFileName(e)||e,fallback:Dr.errorService.handleGlobalError,onClick:async e=>{const t=await Dr.appwriteService.getFileURL(e),a=await Dr.appwriteService.readFileName(e);je(t,a)},onUpload:e=>Dr.appwriteService.uploadFile(e),onChange:async e=>{t(e)},onLoadStart:l,onLoadEnd:r})}),ae(qe,{}),ae(Re,{})]})]})},isActive:e=>Ur(["/bid_edit/:id/documents"],e)},{id:"contact",element:({params:{id:e},formState:t,payload:a,data:i,beginSave:o,onChange:l})=>{const{pickData:r,render:n}=oa({fields:Ps,payload:a,features:a.permissions,outlinePaper:!0,handler:async()=>{const t=await Vd(e);return await Dr.contactViewService.tryRead(t)},fullScreen:!0,title:"",onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1),onSubmit:async t=>{let a=!0;try{if(t){const a=await Vd(e);await Dr.contactViewService.update(a,t)}}catch(i){a=!1;const e=xr(i);return Dr.alertService.notify(e),!1}finally{return a}},submitLabel:""}),s=$t(i);return ae(Le,{children:[ae(me,{items:Cd,onAction:e=>{"save-action"===e&&o(),"edit-action"===e&&r()},payload:t}),ae(Er,{}),ae(Ad,{payload:a,mode:a.menuMode,children:[ae(fe,{readonly:!0,handler:()=>i,fields:Ys,features:a.permissions,changeSubject:s,payload:a,onChange:l}),ae(qe,{}),ae(Re,{})]}),n()]})},isActive:e=>Ur(["/bid_view/:id/contact"],e)},{id:"parameter",element:({params:{id:e="create"},payload:t,formState:a,beginSave:i,data:o,onChange:l})=>{const{pickData:r,render:n}=oa({fields:tm,payload:t,features:t.permissions,outlinePaper:!0,handler:async()=>await Dr.bidViewService.tryRead(e),fullScreen:!0,title:"",onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1),onSubmit:async t=>{let a=!0;try{t&&await Dr.bidViewService.update(e,t)}catch(i){a=!1;const e=xr(i);return Dr.alertService.notify(e),!1}finally{return a}},submitLabel:""}),s=$t(o);return ae(Le,{children:[ae(me,{items:cm,onAction:e=>{"list-action"===e&&Dr.routerService.push("/bid"),"edit-action"===e&&r()},payload:a}),ae(Er,{}),ae(Ad,{payload:t,mode:t.menuMode,children:[ae(fe,{readonly:!0,changeSubject:s,features:t.permissions,fields:mm,handler:()=>o,payload:t,onChange:l}),ae(qe,{}),ae(Re,{})]}),n()]})},isActive:e=>Ur(["/bid_view/:id","/bid_view/:id/parameter"],e)},{id:"history",element:({payload:e})=>{const[t,a]=se.useState([]),{size:i}=ne({target:document.body,selector:"main",compute:t=>{var a;let{height:i,width:o}=t;if(e.menuMode===C.Tabs){const e=document.querySelector(".".concat($e));i-=(null==e?void 0:e.offsetHeight)||0}return i-=(null==(a=document.querySelector(".".concat(jd)))?void 0:a.offsetHeight)||0,i-=50,i=Math.min(window.innerHeight-50,i),{width:o,height:i}}}),{loading:o,execute:l}=Ie((async e=>{if(e){const e=Vl("id"),t=await Dr.dealHistoryViewService.findAllByBidId(e);a(t)}}),{fallback:Dr.errorService.handleGlobalError,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1)});return ae(Le,{children:[ae("div",{className:jd,children:[ae(me,{className:"",items:qd,onAction:e=>{"list-action"===e&&Dr.routerService.replace("/bid")}}),ae(Er,{})]}),ae(Ad,{payload:e,mode:e.menuMode,children:ae(Fe,{sx:{height:i.height},minHeight:72,loading:o,onDataRequest:e=>{l(e)},children:ae(be,{spacing:1,children:t.map((e=>ae(Qr,{loading:o,status:"info",item:e},e.$id)))})})})]})},isActive:e=>Ur(["/bid_view/:id/history"],e)},{id:"tasks",element:({payload:e})=>{const[t,a]=se.useState([]),{size:i}=ne({target:document.body,selector:"main",compute:t=>{var a;let{height:i,width:o}=t;if(e.menuMode===C.Tabs){const e=document.querySelector(".".concat($e));i-=(null==e?void 0:e.offsetHeight)||0}return i-=(null==(a=document.querySelector(".".concat(ym)))?void 0:a.offsetHeight)||0,i-=50,i=Math.min(window.innerHeight-50,i),{width:o,height:i}}}),{loading:o,execute:l}=Ie((async e=>{if(e){const e=Vl("id")||"unknown",{contact_id:t}=await Dr.bidViewService.read(e),i=await Dr.taskHistoryViewService.findAllByContactId(t);a(i)}}),{fallback:Dr.errorService.handleGlobalError,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1)});return ae(Le,{children:[ae("div",{className:ym,children:[ae(me,{className:"",items:hm,onAction:e=>{"list-action"===e&&Dr.routerService.replace("/apartment")}}),ae(Er,{})]}),ae(Ad,{payload:e,mode:e.menuMode,children:ae(Fe,{sx:{height:i.height},minHeight:72,loading:o,onDataRequest:e=>{l(e)},children:ae(be,{spacing:1,children:t.map((e=>ae(cd,{loading:o,status:"info",item:e},e.$id)))})})})]})},isActive:e=>Ur(["/bid_view/:id/tasks"],e)},{id:"documents",element:({params:{id:e},data:t,payload:a,formState:i})=>{const{render:o,pickFiles:l}=Zr({data:t,onSubmit:async t=>{await Dr.bidViewService.update(e,{bid_files:t})}});return ae(Le,{children:[ae(me,{items:Dd,payload:i,onAction:e=>{"list-action"===e&&Dr.routerService.replace("/apartment"),"edit-action"===e&&l()}}),ae(Er,{}),ae(Ad,{payload:a,mode:a.menuMode,children:[ae(ce,{sx:{p:1},children:ae(De,{disabled:!0,accept:"*",multiple:!0,items:t,tr:async e=>await Dr.appwriteService.tryReadFileName(e)||e,fallback:Dr.errorService.handleGlobalError,onClick:async e=>{const t=await Dr.appwriteService.getFileURL(e),a=await Dr.appwriteService.readFileName(e);je(t,a)},onUpload:e=>Dr.appwriteService.uploadFile(e)})}),ae(qe,{}),ae(Re,{})]}),o()]})},isActive:e=>Ur(["/bid_view/:id/documents"],e)},{id:"service_comment",element:({formState:e,payload:t})=>{const[a,i]=se.useState([]),{size:o}=ne({target:document.body,selector:"main",compute:e=>{var a;let{height:i,width:o}=e;if(t.menuMode===C.Tabs){const e=document.querySelector(".".concat($e));i-=(null==e?void 0:e.offsetHeight)||0}return i-=(null==(a=document.querySelector(".".concat(um)))?void 0:a.offsetHeight)||0,i-=50,i=Math.min(window.innerHeight-50,i),{width:o,height:i}}}),{execute:l}=Ie((async()=>{const e=Vl("id"),t=await Dr.serviceCommentViewService.findByBidId(e);i(await Promise.all(t.map((async({$id:e,user_id:t,file_id:a,comment:i,$createdAt:o})=>{const l=await Dr.userViewService.tryRead(t);if(!l)return null;const n=a?await Dr.appwriteService.tryReadFileName(a):"";return{id:e,message:i,fileId:a,userId:t,displayName:[l.last_name,l.first_name,l.middle_name,r(o).format("DD.MM.YYYY / HH:mm")].join(" "),fileName:n,avatar:l.avatar||""}})).filter((e=>!!e)).reverse()))}),{fallback:Dr.errorService.handleGlobalError,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1)});se.useEffect((()=>{l()}),[]),se.useEffect((()=>Dr.serviceCommentViewService.createSubject.subscribe((e=>{const t=Vl("id");e.bid_id===t&&l()}))),[]);return ae(Le,{children:[ae("div",{className:um,children:[ae(me,{payload:e,items:pm,onAction:e=>{"list-action"===e&&Dr.routerService.replace("/apartment")}}),ae(Er,{})]}),ae(Ad,{payload:t,mode:t.menuMode,children:ae(sd,{payload:t,style:{height:o.height},messages:a,onText:async e=>{const t=Dr.appwriteService.currentUser.$id,a=Vl("id");await Dr.serviceCommentViewService.create({user_id:t,comment:e,bid_id:a,apartment_id:null,contact_id:null,file_id:null}),await l()},onFile:async(e,t)=>{const a=Dr.appwriteService.currentUser.$id,i=Vl("id");await Dr.serviceCommentViewService.create({user_id:a,comment:e,apartment_id:i,bid_id:null,contact_id:null,file_id:t}),await l()}})})]})},isActive:e=>Ur(["/bid_view/:id/service_comment"],e)}],_m=async e=>{if("create"===e)return{"data-sozdaniya_klienta":Ae.currentDate()};const{contact_id:t}=await Dr.bidViewService.read(e);return await Dr.contactViewService.tryRead(t)},vm=({id:e="create"})=>{const t=async(t,{afterSave:a})=>{let i=!0;try{const i=L.get(t,"parameter")||{},o=L.get(t,"contact")||{},l=L.get(t,"documents")||[];let r=L.get(t,"parameter.contact_id");L.set(t,"parameter.bid_files",l);const n=!!r&&await Dr.contactViewService.tryRead(r);if(r&&n)await Dr.contactViewService.update(r,o);else{const{id:e}=await Dr.contactViewService.create(o);r=e}if(L.set(t,"parameter.contact_id",r),"create"===e){const{id:e}=await Dr.bidViewService.create(i);await a(),Dr.routerService.push("/bid_edit/".concat(e))}else await Dr.bidViewService.update(e,i);Dr.routerService.hasViewRedirectFlag()&&(await a(),Dr.routerService.push("/bid_view/".concat(e))),Dr.alertService.notify(" ")}catch(o){i=!1;const e=xr(o);Dr.alertService.notify(e)}finally{return i}},a=_t();return se.useEffect((()=>Dr.contactViewService.updateSubject.subscribe((async([t,i])=>{const o=await Dr.bidViewService.read(e);t===(null==o?void 0:o.contact_id)&&a.next(["contact",i])}))),[]),se.useEffect((()=>Dr.bidViewService.updateSubject.subscribe((([t,i])=>{e===t&&(a.next(["parameter",i]),a.next(["documents",(null==i?void 0:i.bid_files)||[]]))}))),[]),ae(ba,{state:async()=>[await _m(e),await Dr.bidViewService.tryRead(e),await Dr.settingsViewService.getMasterDetailMode(),await Dr.permissionService.getPermissions(),await Dr.featureService.getAccessLevel()],reloadSubject:Dr.layoutService.reloadOutletSubject,fallback:Dr.errorService.handleGlobalError,children:async([i,o,l,r,n])=>ae(kt,{history:Dr.routerService,waitForChangesDelay:mo,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1),routes:bm,params:{id:e},initialData:{contact:i,parameter:o,documents:(null==o?void 0:o.bid_files)||[]},payload:()=>({menuMode:l,permissions:r,accessLevel:n}),changeSubject:a,onChange:console.log,onSubmit:t})})},fm=[{id:"contact",label:"",isActive:()=>Ur(["/contact_edit/:id/contact"])},{id:"tasks",isDisabled:()=>!0,label:"",isActive:()=>Ur(["/contact_edit/:id/tasks"])},{id:"history",isDisabled:()=>!0,label:"",isActive:()=>Ur(["/contact_edit/:id/history"])}],gm=(e,t)=>{if(t)return;const a=Vl("id","create");"contact"===e&&Dr.routerService.replace("/contact_edit/".concat(a,"/contact")),"tasks"===e&&Dr.routerService.replace("/contact_edit/".concat(a,"/tasks")),"history"===e&&Dr.routerService.replace("/contact_edit/".concat(a,"/history"))},km=({payload:e,children:t,mode:a=C.Paper})=>{const i=se.useMemo((()=>"tabs"===a?C.Tabs:C.Paper),[a]);return ae(Be,{withFixedPos:!0,fixedPosHeaderAdjust:a===C.Paper?85:64,mode:i,options:fm,payload:e,onActiveOptionChange:gm,children:t})},wm=[{type:ie.Link,action:"list-action",label:" "},{type:ie.Link,action:"user-list-action",label:" "},{type:ie.Button,isDisabled:({hasChanged:e})=>!e,action:"save-action",label:""}],Sm=[{id:"contact",label:"",isActive:()=>Ur(["/contact_view/:id","/contact_view/:id/contact"])},{id:"tasks",label:"",isActive:()=>Ur(["/contact_view/:id/tasks"])},{id:"history",label:"",isActive:()=>Ur(["/contact_view/:id/history"])}],zm=(e,t)=>{if(t)return;const a=Vl("id","create");"contact"===e&&Dr.routerService.replace("/contact_view/".concat(a,"/contact")),"tasks"===e&&Dr.routerService.replace("/contact_view/".concat(a,"/tasks")),"history"===e&&Dr.routerService.replace("/contact_view/".concat(a,"/history"))},xm=({children:e,payload:t,mode:a=C.Paper})=>{const i=se.useMemo((()=>"tabs"===a?C.Tabs:C.Paper),[a]);return ae(Be,{withFixedPos:!0,payload:t,fixedPosHeaderAdjust:a===C.Paper?85:64,mode:i,options:Sm,onActiveOptionChange:zm,children:e})},Fm=[{type:ie.Link,action:"list-action",label:" "},{type:ie.Link,action:"user-list-action",label:" "},{type:ie.Button,isDisabled:({payload:{permissions:e}})=>!e.hasContactUpdatePermission,action:"edit-action",label:""}],Tm=[{type:i.Fragment,isVisible:({activeStep:e})=>0===e,fields:[{type:i.Component,element:()=>ae(le,{variant:"h6",fontWeight:"bold",mb:2,children:" "})},{type:i.Text,outlined:!0,title:"..",isInvalid:({fio:e})=>e?null:"  ",description:"   ",name:"fio"},{type:i.Text,outlined:!0,title:"",isInvalid:({telefon:e})=>e?null:"  ",description:" ",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon"}]},{type:i.Fragment,isVisible:({activeStep:e})=>2===e,fields:[{type:i.Component,element:()=>ae(le,{variant:"h6",fontWeight:"bold",mb:1,children:""})},{type:i.Component,isVisible:({contact_id:e})=>!e,element:()=>ae(re,{variant:"outlined",color:"warning",sx:{mb:2},children:"  , ,   "})},{type:i.Component,isVisible:({contact_id:e})=>!!e,element:()=>ae(re,{variant:"outlined",color:"info",sx:{mb:2},children:",     "})},{type:i.Text,isVisible:({contact_id:e})=>!!e,compute:async({contact_id:e})=>{const{fio:t=""}=await Dr.contactViewService.tryRead(e)||{};return t},disabled:!0,outlined:!0,title:".."},{type:i.Text,isVisible:({contact_id:e})=>!!e,compute:async({contact_id:e})=>{const{telefon:t=""}=await Dr.contactViewService.tryRead(e)||{};return t},fieldBottomMargin:"0",disabled:!0,outlined:!0,title:"",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000"},{type:i.Text,isVisible:({contact_id:e})=>!e,outlined:!0,title:"..",isInvalid:({fio:e})=>e?null:"  ",description:"   ",name:"fio"},{type:i.Text,isVisible:({contact_id:e})=>!e,outlined:!0,title:"",isInvalid:({telefon:e})=>e?null:"  ",description:" ",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon"}]}],Am=[{type:ie.Link,action:"list-action",label:" "},{type:ie.Link,action:"list-action",label:" "}],Cm=jr()((e=>({root:{position:"relative",overflow:"hidden"},header:{position:"absolute",top:0,left:0,height:65,paddingLeft:e.spacing(2),paddingRight:e.spacing(2),background:"whitesmoke",width:"100%"},content:{minHeight:300},adjust:{paddingBottom:65},listItemBackground:{background:oe(e.palette.primary.main,.05)}}))),Vm="real-estate__headerRoot",Im=[{type:ie.Link,action:"list-action",label:" "},{type:ie.Link,action:"list-action",label:" "}];Ke.createLoader(24);const Lm=[{type:i.Fragment,isVisible:e=>!e.kontakt||!!lt(e.kontakt," "),fields:[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",columns:"6",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:" "})},{type:i.Combo,outlined:!1,name:"kontakt",title:"",itemList:[" "," "]},{type:i.Text,outlined:!1,name:"fio",title:"..."},{type:i.Text,description:"",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon",title:""},{type:i.Combo,outlined:!1,name:"tip_klienta",title:" ",itemList:[""," ","","",""]},{type:i.Combo,outlined:!1,name:"status_klienta",title:" ",itemList:["VIP-",""," "," "," "]},{type:i.Combo,outlined:!1,name:"loyalnost_klienta",title:" ",itemList:["","",""]},{type:i.Text,outlined:!1,name:"email",title:"Email"},{type:i.Fragment,isVisible:()=>{let e=!0;return e=e&&!Dr.routerService.location.pathname.includes("bid_view"),e=e&&!Dr.routerService.location.pathname.includes("bid_edit"),e},fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"subtitle2",fontWeight:"bold",sx:{textDecoration:"underline",mt:2,mb:1},children:""})},{type:i.Text,outlined:!1,name:"kadastrovyj-nomer_obekta",title:"  "},{type:i.Text,outlined:!1,name:"kadastrovyj-nomer_zemli",title:"  "}]}]},{type:i.Group,fieldBottomMargin:"0",fieldRightMargin:"0",columns:"6",fields:[{type:i.Paper,fieldBottomMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:" "})},{type:i.Text,outlined:!1,name:"seriya-i-nomer_pasporta",title:"   "},{type:i.Combo,outlined:!1,name:"pol",title:"",itemList:["",""]},{type:i.Text,outlined:!1,name:"pinfl",title:""},{type:i.Text,outlined:!1,name:"inn",title:""}]}]}]},{type:i.Fragment,isVisible:e=>!!lt(e.kontakt," "),fields:[{type:i.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",columns:"6",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:" "})},{type:i.Combo,outlined:!1,name:"kontakt",title:"",itemList:[" "," "]},{type:i.Text,outlined:!1,name:"naimenovanie_organizaczii",title:" "},{type:i.Text,outlined:!1,name:"fio",title:"..."},{type:i.Text,description:"",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon",title:""},{type:i.Combo,outlined:!1,name:"tip_klienta",title:" ",itemList:[""," ","","",""]},{type:i.Combo,outlined:!1,name:"status_klienta",title:" ",itemList:["VIP-",""," "," "," "]},{type:i.Combo,outlined:!1,name:"loyalnost_klienta",title:" ",itemList:["","",""]},{type:i.Text,outlined:!1,name:"email",title:"Email"},{type:i.Fragment,isVisible:()=>{let e=!0;return e=e&&!Dr.routerService.location.pathname.includes("bid_view"),e=e&&!Dr.routerService.location.pathname.includes("bid_edit"),e},fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"subtitle2",fontWeight:"bold",sx:{textDecoration:"underline",mt:2,mb:1},children:""})},{type:i.Text,outlined:!1,name:"kadastrovyj-nomer_obekta",title:"  "},{type:i.Text,outlined:!1,name:"kadastrovyj-nomer_zemli",title:"  "}]}]},{type:i.Group,fieldBottomMargin:"0",fieldRightMargin:"0",columns:"6",fields:[{type:i.Paper,fieldBottomMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:" "})},{type:i.Text,outlined:!1,name:"seriya-i-nomer_pasporta",title:"   "},{type:i.Combo,outlined:!1,name:"pol",title:"",itemList:["",""]},{type:i.Text,outlined:!1,name:"kem_vydan",title:" "},{type:i.Text,outlined:!1,name:"pinfl",title:""},{type:i.Text,outlined:!1,name:"inn",title:""},{type:i.Combo,outlined:!1,name:"osnovanie-deyatelnosti-dannogo_licza",title:"   ",itemList:["  "," "]}]}]}]}];window.contact_filters=Lm;const Mm=()=>nt(Dr.contactViewService.paginate,{onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1),fallback:Dr.errorService.handleGlobalError}),Bm=[{type:Ze.Compute,sortable:!1,field:"index",headerName:"",element:({index:e})=>ae(Xe,{content:e}),width:()=>100},{type:Ze.Compute,sortable:!0,field:"fio",compute:e=>e.fio||"Unset",headerName:"... ",width:()=>200},{type:Ze.Compute,isVisible:({payload:{permissions:e}})=>e.hasPreviewModeDisabled,sortable:!0,field:"phone",element:e=>ae(Qe,{payload:e.id,condition:e=>Dr.permissionRequestService.getOwnerContactPermissionByContactId(e),Loading:"",Else:"",children:e.telefon||"Unset"}),headerName:" ",width:()=>200},{type:Ze.Compute,sortable:!0,field:"tip_klienta",compute:e=>e.tip_klienta||"Unset",headerName:" ",width:()=>200},{type:Ze.Compute,sortable:!0,field:"status_klienta",compute:e=>e.status_klienta||"Unset",headerName:" ",width:()=>200},{type:Ze.Compute,sortable:!1,field:"status",headerName:" ",compute:async({id:e})=>await Dr.dealViewService.readStatusByContactId(e),width:()=>150},{type:Ze.Action,headerName:"",sortable:!1,width:()=>100}],Dm=[{type:Ge.Add,isDisabled:(e,{permissions:t})=>!t.hasContactCreatePermission,label:""},{type:Ge.Menu,options:[{action:"add-action",isDisabled:(e,{permissions:t})=>!t.hasContactCreatePermission},{action:"update-now"},{action:"resort-action"},{action:"drop-filters"}]}],jm=[{label:" ",action:"copy-action",icon:it},{label:"",action:"remove-action",icon:ot}],qm=()=>window.innerHeight-70,Rm="real-estate__headerRoot",Pm=[{type:ie.Link,action:"list-action",label:" "},{type:ie.Link,action:"list-action",label:" "}],Em=e=>()=>ae(Ke,{handler:async()=>{Dr.appwriteService.isAuthorized?await e():Dr.routerService.push("/login_page")},height:"calc(100vh - 80px)"}),Nm=[{id:"list",element:({payload:e})=>{const t=_t(Dr.contactViewService.reloadSubject),{listProps:a}=vt(Dr.routerService.locationState,{fallback:Dr.errorService.handleGlobalError}),i=Mm();return ae(Le,{children:ae(ft,{withSearch:!0,withSingleSort:!0,noInitialFilters:!0,fetchDebounce:so,reloadSubject:t,title:"",filterLabel:"",heightRequest:qm,rowActions:jm,actions:Dm,columns:Bm,handler:i,filters:Lm,onRowAction:async(e,a)=>{Dr.layoutService.setAppbarLoader(!0);try{if("remove-action"===e&&(await Dr.contactViewService.remove(a.id),t.next()),"copy-action"===e){const e=await Dr.contactViewService.read(a.id);await Dr.contactViewService.create(e),t.next()}}finally{Dr.layoutService.setAppbarLoader(!1)}},onRowClick:async e=>{(await Dr.permissionService.getPermissions()).hasContactViewPermission&&Dr.routerService.push("/contact_view/".concat(e.id))},onAction:e=>{"add-action"===e&&Dr.routerService.push("/contact/create")},selectionMode:gt.Multiple,payload:e,...a})})},isActive:e=>Ur(["/contact"],e),isAvailable:()=>!1},{id:"create",element:()=>{const{elementRef:e,size:t}=ne(),[a,i]=se.useState((()=>({activeStep:0,contact_id:null,fio:"",telefon:""}))),[o,l]=se.useState([]),[r,n]=se.useState(!1),[s,d]=se.useState(!1),m=se.useMemo((()=>new Date(Date.now()+1e4)),[a.activeStep]);se.useEffect((()=>{d(!1)}),[a.activeStep]);const c=e=>i((t=>({...t,activeStep:e}))),{activeStep:u}=a,{classes:p}=Cm(),{handleLoadStart:y,handleLoadEnd:h,loading:b,unblock:_}=de({history:Dr.routerService,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1)}),v=async()=>{if(n(!0),a.fio||a.telefon){if(0===u){const{rows:e,total:t}=await Dr.contactRequestService.findDuplicates(a);l(e),c(0===t?2:1)}1===u&&c(2),2===u&&await(async()=>{try{let{contact_id:e,fio:t,telefon:i}=a;e||(e=(await Dr.contactViewService.create({fio:t,telefon:i,"data-sozdaniya_klienta":Ae.currentDate()})).$id),_(),Dr.routerService.push("/contact_view/".concat(e))}catch(e){Dr.alertService.notify(xr(e))}})()}},f=()=>{let e=!1;return 1===u&&(e=e||!s),e=e||b,e=e||3===u,e};return ae(ve,{children:[ae(me,{items:Am}),ae(ce,{className:p.root,children:[ae(ue,{className:p.header,activeStep:u,children:[ae(pe,{completed:u>0,children:ae(ye,{children:" "})},0),ae(pe,{completed:u>1,children:ae(ye,{children:" "})},1),ae(pe,{completed:u>2,children:ae(ye,{children:" "})},2)]}),ae("div",{className:p.adjust}),ae(he,{ref:e,className:p.content,children:0===u?ae(fe,{sx:{pl:1,pr:1,pt:2,pb:3},handler:a,onChange:i,dirty:r,fields:Tm}):1===u?ae(Fe,{sx:{height:t.height},component:ge,minRowHeight:54,children:o.map((({fio:e,telefon:t,$id:o,tip_klienta:l},r)=>ae(ke,{className:we({[p.listItemBackground]:r%2==1}),onClick:()=>{i((e=>({...e,contact_id:o,activeStep:2})))},dense:!0,children:[ae(Se,{children:ae(ze,{edge:"start",checked:a.contact_id===o,sx:{marginLeft:"0 !important"},disableRipple:!0})}),ae(xe,{primary:e,secondary:l}),ae(le,{children:t})]},r)))}):2===u?ae(fe,{sx:{pl:1,pr:1,pt:2,pb:3},handler:a,dirty:r,fields:Tm}):null}),ae(be,{sx:{pl:1,pr:1,pb:1},justifyContent:"space-between",flexDirection:"row",children:[ae(_e,{disabled:b||0===u,fallback:Dr.errorService.handleGlobalError,onClick:()=>{i((e=>({...e,contact_id:null}))),0===o.length?c(0):c(u-1)},sx:{mt:1},variant:"contained",onLoadStart:y,onLoadEnd:h,children:""}),ae(_e,1===u?{disabled:f(),fallback:Dr.errorService.handleGlobalError,onClick:v,sx:{mt:1},variant:"contained",onLoadStart:y,onLoadEnd:h,children:ae(Te,{expireAt:m,onExpire:()=>d(!0),children:"  "})}:2===u?{disabled:f(),fallback:Dr.errorService.handleGlobalError,onClick:v,sx:{mt:1},variant:"contained",onLoadStart:y,onLoadEnd:h,children:""}:{disabled:f(),fallback:Dr.errorService.handleGlobalError,onClick:v,sx:{mt:1},variant:"contained",onLoadStart:y,onLoadEnd:h,children:""})]})]})]})},isActive:e=>Ur(["/contact/create"],e),isAvailable:()=>!1},{id:"contact",element:Em((()=>{const e=Vl("id");Dr.routerService.push("/contact_edit/".concat(e,"/contact"))})),isActive:e=>Ur(["/contact_edit/:id"],e)},{id:"contact",element:({params:{id:e="create"},payload:t,formState:a,beginSave:i,data:o})=>ae(Le,{children:[ae(me,{items:wm,onAction:e=>{"save-action"===e&&i()},payload:a}),ae(Er,{}),ae(km,{mode:t.menuMode,payload:t,children:[ae(fe,{dirty:"create"===e,handler:()=>o,fields:Ps,features:()=>({...t.permissions,withBottomSaveButton:!0}),payload:()=>({...t,beginSave:i}),context:a}),ae(Re,{})]})]}),isActive:e=>Ur(["/contact_edit/:id/contact"],e)},{id:"contact",element:Em((()=>{const e=Vl("id");Dr.routerService.push("/contact_view/".concat(e,"/contact"))})),isActive:e=>Ur(["/contact_view/:id"],e)},{id:"contact",element:({params:{id:e="create"},formState:t,payload:a,data:i})=>{const o=$t(i),{pickData:l,render:r}=oa({fields:Ps,payload:a,features:a.permissions,outlinePaper:!0,handler:async()=>await Dr.contactViewService.tryRead(e),fullScreen:!0,title:"",onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1),onSubmit:async t=>{let a=!0;try{t&&await Dr.contactViewService.update(e,t)}catch(i){a=!1;const e=xr(i);return Dr.alertService.notify(e),!1}finally{return a}},submitLabel:""});return ae(Le,{children:[ae(me,{items:Fm,onAction:e=>{"edit-action"===e&&l()},payload:t}),ae(Er,{}),ae(xm,{mode:a.menuMode,payload:a,children:[ae(fe,{readonly:!0,dirty:"create"===e,handler:()=>i,fields:Ys,features:a.permissions,changeSubject:o,payload:a}),ae(Re,{}),r()]})]})},isActive:e=>Ur(["/contact_view/:id/contact"],e)},{id:"tasks",element:({payload:e})=>{const[t,a]=se.useState([]),{size:i}=ne({target:document.body,selector:"main",compute:t=>{var a;let{height:i,width:o}=t;if(e.menuMode===C.Tabs){const e=document.querySelector(".".concat($e));i-=(null==e?void 0:e.offsetHeight)||0}return i-=(null==(a=document.querySelector(".".concat(Rm)))?void 0:a.offsetHeight)||0,i-=50,i=Math.min(window.innerHeight-50,i),{width:o,height:i}}}),{loading:o,execute:l}=Ie((async e=>{if(e){const e=Vl("id")||"unknown",t=await Dr.taskHistoryViewService.findAllByContactId(e);a(t)}}),{fallback:Dr.errorService.handleGlobalError,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1)});return ae(Le,{children:[ae("div",{className:Rm,children:[ae(me,{className:"",items:Pm,onAction:e=>{"list-action"===e&&Dr.routerService.replace("/apartment")}}),ae(Er,{})]}),ae(xm,{payload:e,mode:e.menuMode,children:ae(Fe,{sx:{height:i.height},minHeight:72,loading:o,onDataRequest:e=>{l(e)},children:ae(be,{spacing:1,children:t.map((e=>ae(cd,{loading:o,status:"info",item:e},e.$id)))})})})]})},isActive:e=>Ur(["/contact_view/:id/tasks"],e)},{id:"history",element:({payload:e})=>{const[t,a]=se.useState([]),{size:i}=ne({target:document.body,selector:"main",compute:t=>{var a;let{height:i,width:o}=t;if(e.menuMode===C.Tabs){const e=document.querySelector(".".concat($e));i-=(null==e?void 0:e.offsetHeight)||0}return i-=(null==(a=document.querySelector(".".concat(Vm)))?void 0:a.offsetHeight)||0,i-=50,i=Math.min(window.innerHeight-50,i),{width:o,height:i}}}),{loading:o,execute:l}=Ie((async e=>{if(e){const e=Vl("id"),t=await Dr.dealHistoryViewService.findAllByContactId(e);a(t)}}),{fallback:Dr.errorService.handleGlobalError,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1)});return ae(Le,{children:[ae("div",{className:Vm,children:[ae(me,{className:"",items:Im,onAction:e=>{"list-action"===e&&Dr.routerService.replace("/apartment")}}),ae(Er,{})]}),ae(xm,{payload:e,mode:e.menuMode,children:ae(Fe,{sx:{height:i.height},minHeight:72,loading:o,onDataRequest:e=>{l(e)},children:ae(be,{spacing:1,children:t.map((e=>ae(Qr,{loading:o,status:"info",item:e},e.$id)))})})})]})},isActive:e=>Ur(["/contact_view/:id/history"],e)}],Um=async e=>"create"===e?{"data-sozdaniya_klienta":Ae.currentDate()}:await Dr.contactViewService.tryRead(e),Hm=({id:e="create"})=>{const t=async(t,{afterSave:a})=>{let i=!0;try{const i=L.get(t,"contact")||{};if("create"===e){const{id:e}=await Dr.contactViewService.create(i);await a(),Dr.routerService.push("/contact_edit/".concat(e))}else await Dr.contactViewService.update(e,i);Dr.routerService.hasViewRedirectFlag()&&(await a(),Dr.routerService.push("/contact_view/".concat(e))),Dr.alertService.notify(" ")}catch(o){i=!1;const e=xr(o);Dr.alertService.notify(e)}finally{return i}},a=_t();return se.useEffect((()=>Dr.contactViewService.updateSubject.subscribe((([t,i])=>{e===t&&a.next(["contact",i])}))),[]),ae(ba,{state:async()=>[await Um(e),await Dr.settingsViewService.getMasterDetailMode(),await Dr.permissionService.getPermissions(),await Dr.featureService.getAccessLevel()],reloadSubject:Dr.layoutService.reloadOutletSubject,fallback:Dr.errorService.handleGlobalError,children:async([i,o,l,r])=>ae(kt,{changeSubject:a,history:Dr.routerService,waitForChangesDelay:mo,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1),routes:Nm,params:{id:e},initialData:{contact:i},payload:()=>({menuMode:o,permissions:l,accessLevel:r}),onChange:console.log,onSubmit:t})})},Om=jr()((e=>({container:{padding:"16px",height:"100%"},icoContainer:{display:"flex",alignContent:"center",justifyContent:"center",width:"100%",marginBottom:"12px"},ico:{color:e.palette.text.primary,width:"48px",height:"48px"},btn:{borderRadius:"100px",marginLeft:"10%",marginRight:"10%",maxWidth:"225px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:"#000000DE",background:"#E0E0E0",fontWeight:"500",width:"100%","&:hover":{color:"white"}},content:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",height:"100%"}}))),Wm=({text:e,iconNumber:t,onClick:a})=>{const{classes:i}=Om(),o=[ae(_a,{className:i.ico}),ae(va,{className:i.ico}),ae(fa,{className:i.ico})];return ae("div",{className:i.container,children:ae(he,{className:i.content,children:[ae("div",{className:i.icoContainer,children:ae(na,{onClick:()=>{a&&a()},disableRipple:!0,children:t?o[t-1]:ae(ga,{})})}),ae(_e,{onClick:a,endIcon:ae(ka,{}),className:i.btn,variant:"contained",children:e})]})})},$m=()=>{const e=r.localeData(),t=e.weekdays(),a=e.weekdaysShort(),{weekStart:i=0}=r.Ls[r.locale()],o=a||t;return[...o.slice(i,7),...o.slice(0,i)].map((e=>"".concat(e.slice(0,1).toUpperCase()).concat(e.slice(1,3))))},Gm=jr()((e=>({switchHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",margin:"5px 0 10px"},daysHeader:{display:"flex",justifyContent:"stretch",alignItems:"stretch",height:"35px"},monthName:{display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",button:{padding:"5px",color:e.palette.text.primary}},dayLabel:{flex:1,textAlign:"center",opacity:.5},dayLabelStart:{textAlign:"center"},dayLabelEnd:{textAlign:"center"},noBorder:{border:"0"}}))),Ym=({currentMonth:e,onMonthChange:t,onHeaderMonthClick:a,onHeaderYearClick:i})=>{const{classes:o}=Gm();return ae("div",{children:[ae("div",{className:o.switchHeader,children:[ae(pt,{onClick:()=>t(e.clone().subtract(1,"months")),children:ae(wa,{})}),ae(le,{className:o.monthName,children:[ae(mt,{onClick:a,className:we(o.noBorder),children:e.format("MMMM")}),ae(mt,{onClick:i,className:we(o.noBorder),children:e.format("YYYY")})]}),ae(pt,{className:o.noBorder,onClick:()=>t(e.clone().add(1,"months")),children:ae(Sa,{})})]}),ae("div",{className:o.daysHeader,children:$m().map(((e,t)=>ae(le,{className:we(o.dayLabel,{[o.dayLabelStart]:0===t,[o.dayLabelEnd]:6===t}),children:e},t)))})]})},[Km,Zm]=It(),Xm=jr()((e=>({listItemAccient:{background:oe(e.palette.getContrastText(e.palette.background.paper),.018)}}))),Jm=({onChange:e,day:t})=>{const{classes:a}=Xm(),[i]=Zm(),[o,l]=se.useState([]),[n,s]=se.useState(null),d=o.length,{execute:m}=Ie((async()=>{if(l([]),!i)return;const e=ll(t),a=(await i.promise).filter((({moment_stamp:t})=>t===e)).filter((({is_complete:e})=>!e));l(a)}),{onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1),fallback:Dr.errorService.handleGlobalError});se.useEffect((()=>{m()}),[i]);return ae(Le,{children:[ae(mt,{onClick:({currentTarget:e})=>s(e),sx:{...t.isToday()&&{background:"#132e5511","&:hover":{background:"#132e5533"}}},children:ae(At,{sx:{flexDirection:"column",gap:"5px"},children:[t.format("DD"),!!d&&ae(za,{sx:{mt:"-2.5px"},side:5,color:t.isBefore(r().add(-1,"days"))?"red":d>3?"orange":"green"})]})}),ae(xa,{open:!!n,anchorEl:n,onClose:()=>s(null),anchorOrigin:{vertical:"bottom",horizontal:"left"},children:0===o.length?ae(le,{sx:{p:2},children:"     "}):ae(he,{sx:{height:356,width:356},children:ae(ge,{disablePadding:!0,subheader:ae(Fa,{component:le,sx:{fontWeight:"bold"},children:["  ",t.format("DD/MM/YYYY")]}),children:ae(Fe,{sx:{height:308,width:356},children:o.map((({id:e,title:t,contact_fio:i,to_user_fio:o,type:l,is_call:r,is_meet:n},s)=>ae(ke,{className:we({[a.listItemAccient]:s%2==0}),onClick:()=>Dr.routerService.push("/task"),children:ae(xe,{primary:""===l?": ".concat(t):": ".concat(i," ").concat([r&&"",n&&""].filter((e=>e)).join(", ")),secondary:": ".concat(o)})},e)))})})})})]})},Qm=jr()((e=>({container:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},calendar:{flex:1,display:"grid",background:e.palette.background.paper,gridTemplateColumns:"repeat(7, 2fr)",gridRowGap:"2px"},inactiveDay:{opacity:.5,pointerEvents:"none"},day:{"& button":{border:"0",color:e.palette.text.primary}},cell:{display:"flex",alignItems:"center",justifyContent:"center","&:nth-of-type(7n)":{justifyContent:'"flex-end"'},"&:nth-of-type(7n + 1)":{justifyContent:'"flex-start"'}}}))),ec=({onChange:e,onHeaderMonthClick:t,onHeaderYearClick:a,minDate:i,maxDate:o,date:l})=>{const[r,n]=se.useState(l.clone().startOf("month")),[,s]=Zm();se.useEffect((()=>{const e=ll(r.clone().startOf("week")),t=ll(r.clone().endOf("month").endOf("week"));s({fromStamp:e,toStamp:t,promise:Dr.dashboardRequestService.getTasksByStamp(e,t)})}),[r]);const d=se.useCallback((t=>{const a=t.clone().endOf("week"),n=r.get("month");return((e,t)=>{const a=t.diff(e,"days")+1,i=[];for(let o=0;o!==a;o++)i.push(e.clone().add(o,"days"));return i})(t,a).map((t=>{const a=l.isSame(t,"date"),r=t.get("month")!==n||o.isBefore(t)||i.isAfter(t);return ae("div",{className:we(c.day,c.cell,{[c.inactiveDay]:r}),children:ae(Jm,{day:t,isActive:a,onChange:e})},t.toString())}))}),[r,l,o,i,e]),m=se.useCallback((()=>((e,t)=>{const a=t.diff(e,"weeks")+1,i=[];for(let o=0;o!==a;o++)i.push(e.clone().add(o,"weeks"));return i})(r.clone().startOf("week"),r.clone().endOf("month").endOf("week")).map((e=>ae(se.Fragment,{children:d(e)},"week-".concat(e.toString()))))),[r,d]),{classes:c}=Qm();return ae("div",{className:c.container,children:[ae(Ym,{currentMonth:r,onMonthChange:e=>n(e),onHeaderMonthClick:t,onHeaderYearClick:a}),ae("div",{className:c.calendar,children:m()})]})},tc=jr()((e=>({container:{height:"100%",width:"100%",display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column"},stretch:{flex:1},disabled:{pointerEvents:"none",opacity:.5},monthLabel:{textAlign:"center"},noBorder:{border:"0"},arrows:{padding:"5px",color:e.palette.text.secondary},header:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"5px"},content:{flex:1,display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gridGap:"15px",button:{color:e.palette.text.primary}}}))),ac=({date:e,minDate:t,maxDate:a,onChange:i})=>{e.get("month");const[o,l]=se.useState(e.get("year")),n=(()=>{const e=[],t=r().startOf("year");for(let a=0;12!==a;a++)e.push(t.clone().add(a,"months"));return e})().map((e=>e.get("month"))),s=(()=>{const e=r.localeData(),t=e.months();return(e.monthsShort()||t).map((e=>"".concat(e.slice(0,1).toUpperCase()).concat(e.slice(1,3))))})(),{classes:d}=tc(),m=se.useCallback((l=>{let r=e.clone().set("month",l);r=r.set("year",o),e&&a.isBefore(e)?i(a.clone()):e&&t.isAfter(e)?i(t.clone()):i(r)}),[o,e,a,t,i]);return ae("div",{className:d.container,children:[ae("div",{className:d.header,children:[ae(pt,{className:d.noBorder,onClick:()=>{const e=o-1;e>=t.get("year")&&l(e)},children:ae(Ta,{className:d.arrows})}),ae(le,{className:we(d.monthLabel,d.stretch),children:o}),ae(pt,{className:d.noBorder,onClick:()=>{const e=o+1;e<=a.get("year")&&l(e)},children:ae(Aa,{className:d.arrows})})]}),ae("div",{className:d.content,children:n.map((e=>{const i=a.get("month")<e&&a.get("year")===o||t.get("month")>e&&t.get("year")===o;return ae(mt,{className:we({[d.disabled]:i}),onClick:()=>m(e),children:s[e]},e)}))})]})},ic=jr()((e=>({container:{height:"100%",width:"100%",display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column"},stretch:{flex:1},yearLabel:{textAlign:"center"},noBorder:{border:"0"},arrows:{padding:"5px",border:"0",color:e.palette.text.disabled},header:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"5px"},content:{flex:1,display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gridGap:"15px",button:{color:e.palette.text.primary}}}))),oc=({date:e,minDate:t,maxDate:a,onChange:i})=>{const o=e.get("year"),l=se.useMemo((()=>((e,t)=>{const a=t.diff(e,"years")+1,i=[];for(let o=0;o!==a;o++)i.push(e.clone().add(o,"years"));return i})(t,a).map((e=>e.get("year"))).reduce(((e,t)=>{const[a]=e.slice().reverse();return a.push(t),12===a.length?[...e,[]]:e}),[[]])),[t,a]),[r,n]=se.useState(l.findIndex((e=>e.includes(o)))),s=se.useCallback((o=>{const l=e.clone().set("year",o);e&&a.isBefore(e)?i(a.clone()):e&&t.isAfter(e)?i(t.clone()):i(l)}),[e,a,t,i]),d=l[r]||[],{classes:m}=ic();return ae("div",{className:m.container,children:[ae("div",{className:m.header,children:[ae(mt,{className:m.noBorder,variant:"text",onClick:()=>{n(Math.max(r-1,0))},children:ae(Ta,{className:m.arrows})}),ae(le,{className:we(m.yearLabel,m.stretch),children:e.format("YYYY")}),ae(mt,{className:m.noBorder,variant:"text",onClick:()=>{const e=r+1;e<l.length&&n(e)},children:ae(Aa,{className:m.arrows})})]}),ae("div",{className:m.content,children:d.map((e=>ae(mt,{color:e===o?"primary":"secondary",onClick:()=>s(e),children:e},e)))})]})},lc=jr()((e=>({container:{width:"100%",height:"100%",padding:e.spacing(1)}}))),rc=({date:e=r(),minDate:t=r("1900-01-01"),maxDate:a=r("2100-01-01"),onChange:i})=>{const[o,l]=se.useState((()=>e.isBefore(t)?t:e)),[n,s]=se.useState(!1),[d,m]=se.useState(!1),c=()=>s(!0),u=()=>m(!0),p=o.startOf("day"),y=e=>{s(!1),l(e.clone().set("year",e.get("year")))},h=e=>{m(!1),l(e.clone().set("month",e.get("month")))},{classes:b}=lc();return ae(ce,{className:b.container,children:n?ae(oc,{date:p,onChange:y,minDate:t,maxDate:a}):d?ae(ac,{date:p,onChange:h,minDate:t,maxDate:a}):ae(Km,{initialState:null,children:ae(ec,{date:p,onChange:i,minDate:t,maxDate:a,onHeaderMonthClick:u,onHeaderYearClick:c})})})},nc=jr()((e=>({container:{padding:"24px",position:"relative"},text:{fontSize:"16px",p:{fontSize:"12px",margin:"0"}},heading:{display:"flex",gap:"12px",alignItems:"center",padding:"0 0 12px 0 ",marginBottom:"12px",borderBottom:"1px solid #0000001F",button:{color:e.palette.text.primary}},amount:{fontSize:"24px",textAlign:"right"},options:{position:"absolute",top:"4px",right:"4px"}}))),sc=[ae(Va,{}),ae(Ia,{}),ae(La,{}),ae(Ma,{}),ae(Ba,{})],dc=({text:e,amount:t,iconNumber:a})=>{const{classes:i}=nc();return ae("div",{className:i.container,children:[ae(pt,{disableRipple:!0,className:i.options,children:ae(Ca,{})}),ae("div",{className:i.heading,children:[ae(pt,{children:a?sc[a-1]:ae(ga,{})}),ae("div",{className:i.text,children:e})]}),ae("p",{className:i.amount,children:t})]})},mc=jr()({funnelContainer:{padding:"10px 24px",position:"relative",height:"100%"},funnelTitle:{fontSize:"16px"},center:{height:"calc(100% - 100px)",marginTop:"65px"},funnel:{maxWidth:"452px",margin:"0 auto",width:"100%",paddingTop:"10px",display:"flex",flexDirection:"column",alignItems:"center",marginTop:"-10%",gap:"10px"},row:{background:"#D9D9D9",clipPath:"polygon(0 0, 100% 0, 97% 100%, 3% 100%)",textAlign:"center",fontSize:"14px",height:"20px"},options:{position:"absolute",top:"4px",right:"4px"}}),cc=({valueMap:e})=>{const{classes:t}=mc();return ae(he,{className:t.funnelContainer,children:[ae(pt,{className:t.options,children:ae(Ca,{})}),ae(he,{className:t.funnelTitle,children:" "}),ae(At,{className:t.center,children:ae(he,{className:t.funnel,children:yl.map(((a,i)=>ae(he,{sx:{width:100-5*i+"%"},className:t.row,children:[a," ",e[a]]},a)))})})]})},uc=()=>ae(Ke,{sx:{height:"100%",width:"100%"}}),pc=jr()({title:{fontSize:"16px",marginBottom:"18px"},container:{padding:"10px 24px",position:"relative",height:"100%"},options:{position:"absolute",top:"4px",right:"4px"},list:{display:"flex",flexDirection:"column",gap:"13px",margin:"0",padding:"0"},statRow:{display:"flex",width:"100%",alignItems:"center",gap:"7px",color:"00000099",fontSize:"14px",letterSpacing:"0.17px"},stats:{height:"4px",width:"200px"},managersList:{listStyle:"none",display:"flex",flexDirection:"column",fontSize:"12px",gap:"5px",padding:"0 !important"},managerRow:{display:"flex",alignItems:"center",gap:"8px"},managerDot:{width:"12px",height:"12px",background:"#000000DE",borderRadius:"100%"}}),yc=()=>{const{classes:e}=pc();return ae("div",{className:e.container,children:[ae(pt,{className:e.options,children:ae(Ca,{})}),ae("div",{className:e.title,children:" "}),ae(Ue,{Loader:uc,children:async()=>{const t=await Dr.userViewService.findAll(),a=await Promise.all(t.map((async({id:e})=>await Dr.dashboardRequestService.getDoneDealsByUserCount("last-month",e)))),i=a.map(((e,a)=>{var i,o,l,r,n;const s=[null==(i=t[a])?void 0:i.last_name,null==(o=t[a])?void 0:o.first_name,null==(l=t[a])?void 0:l.middle_name].filter((e=>e)).join(" ");return{id:(null==(r=t[a])?void 0:r.id)||"unknown",label:s,color:Da.getColor({shades:["500"],text:"".concat(s,"+").concat(null==(n=t[a])?void 0:n.id,"+").concat(a)}),value:e}})).sort((({value:e},{value:t})=>t-e)),o=a.reduce(((e,t)=>Math.max(e,t)));return ae(ja,{sx:{maxHeight:"calc(100% - 60px)",paddingLeft:"8px",overflowY:"auto"},children:[ae("div",{className:e.list,children:i.map((({id:t,value:a,color:i})=>{const l=Math.round(100/o*a);return ae("div",{className:e.statRow,children:[ae(qa,{className:e.stats,sx:{backgroundColor:"#ccc","& .MuiLinearProgress-bar":{backgroundColor:i}},variant:"determinate",value:Math.max(l,3)}),a," "]},t)}))}),ae("ul",{className:e.managersList,children:i.map((({id:t,label:a,color:i})=>ae("li",{className:e.managerRow,children:[ae(za,{color:i,side:12})," ",a]},t)))})]})}})]})},hc=jr()({root:{position:"relative",height:"100%",width:"100%",overflow:"hidden"},container:{position:"absolute",top:0,left:0,height:"100%",width:"100%"}}),bc=({children:e=null,className:t,style:a})=>{const{classes:i}=hc();return ae(ce,{className:we(i.root,t),style:a,children:ae(he,{className:i.container,children:e})})},_c=(e,...t)=>{let a=!0;for(const i of t)a=a&&!!String(e[i]||"").length;return a},vc=[{type:Ze.Compute,sortable:!0,field:"fio",compute:e=>e.fio||"Unset",headerName:"... ",width:()=>200},{type:Ze.Compute,sortable:!0,field:"tip_klienta",compute:e=>e.tip_klienta||"Unset",headerName:" ",width:()=>200},{type:Ze.Compute,sortable:!0,field:"status_klienta",compute:e=>e.status_klienta||"Unset",headerName:" ",width:()=>200},{type:Ze.Compute,sortable:!1,field:"status",headerName:" ",compute:async({id:e})=>await Dr.dealViewService.readStatusByContactId(e),width:()=>150}],fc=[{type:i.Text,columns:"6",fieldBottomMargin:"1",shouldRecompute:()=>!1,compute:async()=>{const e=Dr.appwriteService.currentUser.$id,t=await Dr.userViewService.tryRead(e);return[null==t?void 0:t.last_name,null==t?void 0:t.first_name,null==t?void 0:t.middle_name].filter((e=>e)).join(" ")},name:"from_user_id",title:" "},{type:i.Choose,columns:"6",fieldBottomMargin:"1",choose:async(e,t)=>{t.pickUser(e.to_user_id?[e.to_user_id]:[]);const a=await t.userResultSubject.toPromise();if(a&&a.length){const[e]=a;return e}return null},tr:async e=>{const t=await Dr.userViewService.tryRead(e);return[null==t?void 0:t.last_name,null==t?void 0:t.first_name,null==t?void 0:t.middle_name].filter((e=>e)).join(" ")||(null==t?void 0:t.$id)||""},name:"to_user_id",title:"",placeholder:" "},{type:i.Date,columns:"6",fieldBottomMargin:"1",name:"date",title:" ",labelShrink:!0,placeholder:" "},{type:i.Time,columns:"6",fieldBottomMargin:"1",name:"time",title:"",labelShrink:!0,placeholder:" "},{type:i.Box,noBaseline:!0,isVisible:e=>""===e.type,sx:{display:"grid",gridTemplateColumns:"1fr auto auto"},fields:[{type:i.Choose,sx:{minWidth:"100% !important"},fieldBottomMargin:"0",fieldRightMargin:"3",columns:"4",choose:async(e,t)=>{t.pickContact(e.contact_id?[e.contact_id]:[]);const a=await t.contactResultSubject.toPromise();if(a&&a.length){const[e]=a;return e}return null},tr:async e=>{const t=await Dr.contactViewService.tryRead(e);return(null==t?void 0:t.fio)||(null==t?void 0:t.id)||""},name:"contact_id",title:"",placeholder:""},{type:i.Checkbox,fieldBottomMargin:"0",name:"is_call",title:""},{type:i.Checkbox,fieldBottomMargin:"0",name:"is_meet",title:""}]},{type:i.Text,isVisible:e=>""!==e.type,fieldBottomMargin:"1",title:"",placeholder:"",name:"title"},{type:i.Text,fieldBottomMargin:"1",title:"",placeholder:"",inputRows:3,name:"comment"},{type:i.Radio,fieldBottomMargin:"0",name:"type",radioValue:"",defaultValue:"",title:""},{type:i.Radio,fieldBottomMargin:"0",name:"type",radioValue:"",title:""}],gc=({payload:e})=>{const{handleLoadStart:t,handleLoadEnd:a}=de({history:Dr.routerService,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1)}),{pickData:i,render:o,resultSubject:l}=ed({payload:e}),{pickData:r,render:n,resultSubject:s}=(({payload:e})=>{const t=Mm(),a=_t(),{pickData:i,render:o,open:l}=ea({withSearch:!0,slots:{FilterListSlot:Ra},noInitialFilters:!0,withLoader:!0,fetchDebounce:so,reloadSubject:Dr.userViewService.reloadSubject,selectionMode:gt.Single,onSubmit:e=>(a.next(e),!0),filterLabel:" ",filters:Lm,payload:e,columns:vc,handler:t});return{pickData:i,render:o,resultSubject:a,open:l}})({payload:e}),d=wt({fields:fc,title:" ",payload:{...e,pickUser:i,userResultSubject:l,pickContact:r,contactResultSubject:s},handler:()=>({from_user_id:Dr.appwriteService.currentUser.$id})}),{execute:m}=Ie((async()=>{const e=await d().toPromise();if(e&&""===e.type){const{to_user_id:t,comment:a,date:i,time:o,title:l}=e,r=i?Ae.dateStamp(i):null,n=o?Ae.timeStamp(o):null;if(!_c(e,"to_user_id","title"))return void Dr.alertService.notify("  ");await Dr.taskRequestService.createTodoTask(t,r,n,l,a)}if(e&&""===e.type){const{to_user_id:t,comment:a,date:i,time:o,contact_id:l,title:r,is_meet:n,is_call:s}=e;if(!_c(e,"to_user_id","contact_id"))return void Dr.alertService.notify("  ");const d=i?Ae.dateStamp(i):null,m=o?Ae.timeStamp(o):null;await Dr.taskRequestService.createClientTask(t,l,d,m,r,!!s,!!n,a)}}),{onLoadStart:t,onLoadEnd:a,fallback:Dr.errorService.handleGlobalError});return{execute:m,render:()=>ae(Le,{children:[n(),o()]})}},kc="7px",wc=()=>ae(Ke,{size:24,sx:{justifyContent:"flex-end",width:"100%"}}),Sc=()=>ae(Ke,{sx:{height:"100%",width:"100%",marginTop:"-2.5%"}}),zc=[{type:i.Group,columns:"14",tabletColumns:"12",phoneColumns:"12",fieldRightMargin:kc,fieldBottomMargin:kc,fields:[{type:i.Hero,height:"max(calc(100vh * 0.2), 150px)",columns:"3",tabletColumns:"6",phoneColumns:"12",bottom:kc,right:kc,child:{type:i.Component,element:()=>ae(bc,{style:{background:"#fff",boxShadow:"0px 5px 5px -3px #00000033"},children:ae(dc,{amount:ae(Ue,{Loader:wc,children:async()=>await Dr.dashboardRequestService.getNewBidsCount("last-month")}),text:" ",iconNumber:1})})}},{type:i.Hero,columns:"3",tabletColumns:"6",phoneColumns:"12",right:kc,bottom:kc,height:"max(calc(100vh * 0.2), 150px)",child:{type:i.Component,element:()=>ae(bc,{style:{background:"#fff",boxShadow:"0px 5px 5px -3px #00000033"},children:ae(dc,{amount:ae(Ue,{Loader:wc,children:async()=>await Dr.dashboardRequestService.getNewApartmentCount("last-month")}),text:" ",iconNumber:2})})}},{type:i.Hero,columns:"3",tabletColumns:"6",phoneColumns:"12",height:"max(calc(100vh * 0.2), 150px)",bottom:kc,right:kc,child:{type:i.Component,element:()=>ae(bc,{style:{background:"#fff",boxShadow:"0px 5px 5px -3px #00000033"},children:ae(dc,{amount:ae(Ue,{Loader:wc,children:async()=>await Dr.dashboardRequestService.getDealsInProgressCount("last-month")}),text:" ",iconNumber:3})})}},{type:i.Hero,columns:"3",tabletColumns:"6",phoneColumns:"12",bottom:kc,right:kc,height:"max(calc(100vh * 0.2), 150px)",child:{type:i.Component,element:()=>ae(bc,{style:{background:"#fff",boxShadow:"0px 5px 5px -3px #00000033",opacity:"0.5"},children:ae(dc,{amount:null,text:ae(Le,{children:[" ",ae("p",{children:" "})]}),iconNumber:4})})}}]},{type:i.Group,columns:"12",tabletColumns:"12",phoneColumns:"12",fields:[{type:i.Hero,height:"min(calc(100vh * 0.5), 700px)",right:kc,bottom:kc,columns:"6",phoneColumns:"12",child:{type:i.Component,element:()=>ae(bc,{children:ae(rc,{onChange:console.log})})}},{type:i.Hero,columns:"6",phoneColumns:"12",right:kc,bottom:kc,height:"min(calc(100vh * 0.5), 700px)",child:{type:i.Component,element:()=>ae(bc,{style:{background:"#fff",boxShadow:"0px 5px 5px -3px #00000033"},children:ae(Ue,{Loader:Sc,children:async()=>{const e=await Promise.all(yl.map((async e=>await Dr.dashboardRequestService.getDealsByStatusCount("last-month",e)))),t=yl.reduce(((t,a,i)=>({...t,[a]:e[i]})),{});return ae(cc,{valueMap:t})}})})}}]},{type:i.Group,columns:"12",tabletColumns:"12",phoneColumns:"12",fields:[{type:i.Hero,minHeight:"min(calc(100vh * 0.5), 700px)",columns:"6",phoneColumns:"12",right:kc,bottom:kc,child:{type:i.Component,element:()=>ae(bc,{style:{background:"#fff",boxShadow:"0px 5px 5px -3px #00000033"},children:ae(yc,{})})}},{type:i.Group,columns:"6",phoneColumns:"12",fields:[{type:i.Hero,desktopColumns:"6",tabletColumns:"6",phoneColumns:"12",right:kc,bottom:kc,minHeight:"min(calc(100vh * 0.25), 350px)",child:{type:i.Component,element:()=>ae(bc,{style:{background:"#fff",boxShadow:"0px 5px 5px -3px #00000033"},children:ae(Wm,{onClick:()=>Dr.routerService.push("/apartment/create"),text:" ",iconNumber:1})})}},{type:i.Hero,desktopColumns:"6",tabletColumns:"6",phoneColumns:"12",right:kc,bottom:kc,minHeight:"min(calc(100vh * 0.25), 350px)",child:{type:i.Component,element:()=>ae(bc,{style:{background:"#fff",boxShadow:"0px 5px 5px -3px #00000033"},children:ae(Wm,{onClick:()=>Dr.routerService.push("/bid/create"),text:" ",iconNumber:2})})}},{type:i.Hero,desktopColumns:"6",tabletColumns:"6",phoneColumns:"12",right:kc,bottom:kc,minHeight:"min(calc(100vh * 0.25), 350px)",child:{type:i.Component,element:({payload:e})=>{const{execute:t,render:a}=gc({payload:e});return ae(bc,{style:{background:"#fff",boxShadow:"0px 5px 5px -3px #00000033"},children:[ae(Wm,{onClick:t,text:" ",iconNumber:3}),a()]})}}}]}]}],xc=[{id:"common",element:({payload:e})=>ae(fe,{fields:zc,payload:e,features:e.permissions}),isActive:e=>Ur(["/dashboard"],e),isAvailable:()=>!1}],Fc=jr()((e=>({root:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",minHeight:150},container:{position:"relative",display:"flex",alignItems:"stretch",justifyContent:"stretch",flex:1},content:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",paddingTop:6,paddingBottom:6,gap:6,flex:1},header:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",paddingLeft:e.spacing(.5),paddingRight:e.spacing(.5)},row:{display:"flex",alignItems:"center",justifyContent:"space-between"},noBorder:{border:"none !important"},bold:{fontWeight:"bold !important"},adjust:{maxHeight:10,minHeight:10,flex:1},button:{backgroundColor:"#3F51B5",color:"#ffffff",fontSize:12,marginLeft:"auto",marginRight:"auto","&:hover":{color:"#3F51B5"}},fieldContainer:{display:"flex",justifyContent:"space-between"},fieldDesc:{fontSize:10,opacity:.6,marginLeft:4},dateFieldDesc:{fontSize:8,opacity:.6,marginLeft:8},field:{fontSize:12,marginRight:4,fontWeight:500},dateField:{fontSize:8}}))),Tc=se.forwardRef((({className:e,style:t,contactDisplayName:a,contactType:i,contactNumber:o,responsible:l,requestType:n,dealIndex:s,dealType:d,dealStatus:m,price:c,currency:u,createdAt:p,updatedAt:y,apartmentId:h,targetApartmentId:b,targetBidId:_,bidId:v,id:f,onChangeStatus:g,onDrag:k},w)=>{const{classes:S}=Fc(),[z,x]=se.useState(null),[F,T]=se.useState(null),{execute:A,loading:C}=Ie((async e=>{await g(e)}),{onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1),fallback:Dr.errorService.handleGlobalError}),V=se.useMemo((()=>{const e=yl.findIndex((e=>e===m));return yl.filter(((t,a)=>a<e)).reverse()}),[m]),I=se.useMemo((()=>{const e=yl.findIndex((e=>e===m));return yl.filter(((t,a)=>a>e))}),[m]),L=se.useMemo((()=>r(p).format("DD.MM.YYYY / HH:mm")),[p]),M=se.useMemo((()=>r(y).format("DD.MM.YYYY / HH:mm")),[y]),B=se.useMemo((()=>" "===m||" "===m),[m]),D=se.useCallback((()=>{h?Dr.routerService.push("/apartment_view/".concat(h,"/history")):v&&Dr.routerService.push("/bid_view/".concat(v,"/history"))}),[]);return ae("div",{"data-dealid":f,className:we(S.root,e),onDrag:()=>k(f),style:t,ref:w,draggable:!B,children:[ae(ce,{className:S.container,children:ae(he,{className:S.content,children:[ae(he,{className:S.row,children:[ae(pt,{onClick:({currentTarget:e})=>{x(e),T(null)},disabled:!V.length||C||B,size:"small",children:ae(wa,{})}),ae(Pa,{anchorEl:z,open:!!z,onClose:()=>x(null),children:V.map(((e,t)=>ae(Ea,{onClick:()=>{A(e),x(null)},children:e},"".concat(e,"-").concat(t))))}),ae(Qt,{label:l,variant:"filled",color:"#2196F3",sx:{fontWeight:500,fontSize:10,maxWidth:175}}),ae(pt,{onClick:({currentTarget:e})=>{x(null),T(e)},disabled:!I.length||C||B,size:"small",children:ae(Sa,{})}),ae(Pa,{anchorEl:F,open:!!F,onClose:()=>T(null),children:I.map(((e,t)=>ae(Ea,{onClick:()=>{A(e),T(null)},children:e},"".concat(e,"-").concat(t))))})]}),ae(At,{sx:{minHeight:50},children:ae(le,{fontSize:12,textAlign:"center",maxWidth:"80%",paddingBottom:"6px",children:a})}),o&&ae(he,{className:S.content,children:[ae(he,{className:S.fieldContainer,sx:{borderBottom:1,borderColor:"#E0E0E0"},children:[ae(le,{className:S.fieldDesc,children:" "}),ae(le,{className:S.field,children:i})]}),ae(he,{className:S.fieldContainer,sx:{borderBottom:1,borderColor:"#E0E0E0"},children:[ae(le,{className:S.fieldDesc,children:" "}),ae(le,{className:S.field,children:o})]}),b&&ae(Ue,{payload:b,children:async e=>{const{zagolovok:t}=await Dr.apartmentViewService.read(e);return ae(he,{className:S.fieldContainer,sx:{borderBottom:1,borderColor:"#E0E0E0"},children:[ae(le,{className:S.fieldDesc,children:" "}),ae(le,{className:S.field,children:ae(ta,{href:"#",onClick:()=>Y("/apartment_view/".concat(e)),children:t})})]})}}),_&&ae(Ue,{payload:_,children:async e=>{const{zagolovok:t}=await Dr.bidViewService.read(e);return ae(he,{className:S.fieldContainer,sx:{borderBottom:1,borderColor:"#E0E0E0"},children:[ae(le,{className:S.fieldDesc,children:""}),ae(le,{className:S.field,children:ae(ta,{href:"#",onClick:()=>Y("/bid_view/".concat(e)),children:t})})]})}})]}),ae(At,{children:ae(he,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center",maxWidth:"90%",gap:1},children:[ae(Qt,{label:" ".concat(s),variant:"filled",color:"#E0E0E0"}),ae(Qt,""==d?{label:"",variant:"filled",color:"#AF4C5E",sx:{color:"white"}}:{label:"",variant:"filled",color:"#4CAFAF",sx:{color:"white"}}),ae(Qt,""===n?{label:"",variant:"filled",color:"#AFAB4C",sx:{color:"white"}}:{label:"",variant:"filled",color:"#4CAF50",sx:{color:"white"}})]})}),c&&ae(he,{className:S.content,children:ae(he,{className:S.fieldContainer,children:[ae(le,{className:S.fieldDesc,children:[" ","(".concat("uzs"===u?"SUM":"$",")")]}),ae(le,{className:S.field,children:c})]})}),ae(he,{className:S.container,sx:{borderTop:1,pl:1,borderColor:"#E0E0E0"},children:[ae(At,{className:S.content,children:[ae(le,{className:S.dateFieldDesc,children:" :"}),ae(le,{className:S.dateField,children:L})]}),ae(At,{className:S.content,children:[ae(le,{className:S.dateFieldDesc,children:" :"}),ae(le,{className:S.dateField,children:M})]})]}),ae(mt,{onClick:D,variant:"outlined",sx:{ml:1,mr:1},children:" "})]})}),ae("div",{className:S.adjust})]})})),Ac=[{type:i.Box,sx:{display:"grid",gridTemplateColumns:"auto auto 1fr auto","& > .MuiGrid-root":{minWidth:"275px"},mt:-1},fields:[{type:i.Choose,fieldBottomMargin:"0",fieldRightMargin:"2",choose:async(e,t)=>{t.pickData(e.user_id?[e.user_id]:[]);const a=await t.resultSubject.toPromise();if(a&&a.length){const[e]=a;return e}return null},tr:async e=>{const t=await Dr.userViewService.tryRead(e);return[null==t?void 0:t.last_name,null==t?void 0:t.first_name,null==t?void 0:t.middle_name].filter((e=>e)).join(" ")||(null==t?void 0:t.$id)||""},name:"user_id",placeholder:"",title:""},{type:i.Combo,fieldBottomMargin:"0",name:"tip_klienta",title:"",placeholder:" ",itemList:[""," ","","",""]},{type:i.Div},{type:i.Text,fieldBottomMargin:"0",name:"search",title:"",placeholder:"",leadingIcon:Na,trailingIcon:()=>ae(Ua,{sx:{opacity:.5}}),trailingIconClick(e,t,a){e&&a("")}}]}],Cc=({onChange:e,className:t,style:a,data:i,payload:o})=>{const{pickData:l,render:r,resultSubject:n}=ed({payload:o});return ae(ce,{className:t,style:a,sx:{mb:1,minHeight:48},children:[ae(Ha,{sx:{height:"100%"},hideOverflowY:!0,children:ae(he,{sx:{p:1,display:"flex",alignItems:"center",justifyContent:"stretch"},children:ae(fe,{fields:Ac,handler:()=>i,onChange:(t,a)=>{a||e(t)},payload:()=>({...o,pickData:l,resultSubject:n}),fieldDebounce:so})})}),r()]})},Vc=async e=>{let t,a;await(async()=>{e.apartment_id?t="":e.bid_id&&(t="")})();const{first_name:i,last_name:o,middle_name:l}=await Dr.userViewService.read(e.user_id),n=[o,i,l].filter((e=>e)).join(" ");return e.price&&1===e.price.length&&(a=e.price[0]),e.price&&2===e.price.length&&(a=" ".concat(e.price[0],"  ").concat(e.price[1])),{id:e.id,contactType:e.tip_klienta,contactNumber:e.telefon,contactDisplayName:e.fio,createdAt:e.$createdAt,updatedAt:e.$updatedAt,dealIndex:e.index,requestType:t,currency:e.price_unit,metadata_created_at:r(e.$createdAt).format("DD/MM/YYYY"),metadata_updated_at:r(e.$updatedAt).format("DD/MM/YYYY"),price:a,apartmentId:e.apartment_id,bidId:e.bid_id,targetApartmentId:e.target_apartment_id,targetBidId:e.target_bid_id,userId:e.user_id,responsible:n,dealStatus:e.status,dealType:e.type}},Ic=yl.indexOf("/"),Lc=[{type:i.Choose,fieldBottomMargin:"1",isVisible:e=>_c(e,"bid_id","occupation"),isInvalid:e=>e.occupation&&e.bid_id?e.target_apartment_id?null:"  ":null,choose:async(e,t)=>{t.pickApartment(e.target_apartment_id?[e.target_apartment_id]:[]);const a=await t.apartmentResultSubject.toPromise();if(a&&a.length){const[e]=a;return e}return null},tr:async e=>{const t=await Dr.apartmentViewService.tryRead(e);return(null==t?void 0:t.zagolovok)||(null==t?void 0:t.$id)||""},name:"target_apartment_id",title:" ",placeholder:" "},{type:i.Choose,fieldBottomMargin:"1",isVisible:e=>_c(e,"apartment_id","occupation"),isInvalid:e=>e.occupation&&e.apartment_id?e.target_bid_id?null:" ":null,choose:async(e,t)=>{t.pickBid(e.target_bid_id?[e.target_bid_id]:[]);const a=await t.bidResultSubject.toPromise();if(a&&a.length){const[e]=a;return e}return null},tr:async e=>{const t=await Dr.bidViewService.tryRead(e);return(null==t?void 0:t.zagolovok)||(null==t?void 0:t.$id)||""},name:"target_bid_id",title:" ",placeholder:" "},{type:i.Text,sx:{minWidth:470},title:"",placeholder:"",name:"comment",inputRows:3}],Mc=jr()((e=>({root:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",height:"calc(100vh - 85px)",width:"100%",["& .".concat("react-declarative__scrollViewTarget")]:{transform:"rotateX(180deg)","& > div > div":{marginBottom:"25px",transform:"rotateX(180deg)"}}},container:{position:"relative",flex:1,display:"flex",alignItems:"stretch",justifyContent:"stretch"},content:{flex:1,display:"flex"},group:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",maxWidth:"276px",minWidth:"276px",gap:10,padding:10,marginRight:10},inactiveGroup:{background:oe("#000",.03)},activeGroup:{background:oe(e.palette.primary.main,.5)},list:{flex:1,minWidth:"256px",height:"100%"},loading:{pointerEvents:"none"}}))),Bc=["contactDisplayName","contactType","contactNumber","responsible","requestType","dealType","metadata_created_at","metadata_updated_at"],Dc={user_id:"",tip_klienta:null,search:""},jc=[{id:"list",element:({params:{dealCardMap:e},payload:t})=>{const{classes:a}=Mc(),[i,o]=Oa(Dc),[l,n]=Wa((()=>({user_id:i.user_id,tip_klienta:JSON.parse(i.tip_klienta),search:i.search})));zt((()=>{o(l.current)}),[l.current]);const[s,d]=se.useState((()=>new Map(e))),m=se.useMemo((()=>[...s.values()].flatMap((e=>e))),[s]),c=Nt(s),u=se.useRef(null),[p,y]=se.useState(null),{handleMoveDeal:h,render:b}=(({payload:e,features:t})=>{const{pickData:a,render:i,resultSubject:o}=rm({payload:e,features:t}),{pickData:l,render:r,resultSubject:n}=hs({payload:e,features:t}),{handleLoadStart:s,handleLoadEnd:d}=de({history:Dr.routerService,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1)}),m=wt({title:" ",fields:Lc,payload:()=>({...e,apartmentResultSubject:o,pickApartment:a,bidResultSubject:n,pickBid:l})}),{execute:c}=Ie((async({id:e,fromStatus:t,toStatus:a,apartment_id:i,bid_id:o,target_apartment_id:l,target_bid_id:r})=>{const n=yl.indexOf(a)>=Ic,s=await m({handler:()=>({fromStatus:t,toStatus:a,occupation:n,apartment_id:i,bid_id:o,target_apartment_id:n?l:null,target_bid_id:n?r:null})}).toPromise();if(s){if(s.target_bid_id){const t=await Dr.dealViewService.findOccupiedByBidId(s.target_bid_id),a=await Dr.dealViewService.findOccupiedByTagetBidId(s.target_bid_id);if(t&&t.id!==e)return void Dr.alertService.notify("     ");if(a&&a.id!==e)return void Dr.alertService.notify("     ")}if(s.target_apartment_id){const t=await Dr.dealViewService.findOccupiedByApartmentId(s.target_apartment_id),a=await Dr.dealViewService.findOccupiedByTargetApartmentId(s.target_apartment_id);if(t&&t.id!==e)return void Dr.alertService.notify("     ");if(a&&a.id!==e)return void Dr.alertService.notify("     ")}await Dr.dealRequestService.commitDealStatusChange(e,i,o,s.target_apartment_id,s.target_bid_id,t,a,s.comment)}}),{onLoadStart:s,onLoadEnd:d,fallback:Dr.errorService.handleGlobalError});return{handleMoveDeal:c,render:()=>ae(Le,{children:[i(),r()]})}})({payload:t,features:t.permissions}),_=async(e,t)=>{const a=m.find((t=>t.id===e));if(!a)throw new Error("DealPages BoardView handleChangeStatus dealCard not found");const{dealStatus:i,apartmentId:o,bidId:l}=a;await h({id:e,apartment_id:o||null,bid_id:l||null,fromStatus:i,toStatus:t,target_apartment_id:a.targetApartmentId,target_bid_id:a.targetBidId})},{loading:v,execute:f}=Ie((async([e])=>{y(null),await _(u.current,e)}),{onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1),fallback:Dr.errorService.handleGlobalError});se.useEffect((()=>Dr.dealViewService.updateSubject.subscribe(B((async([e,t])=>{const a=new Map(c.current);for(const i of yl){const t=a.get(i)||[];a.set(i,t.filter((t=>t.id!==e)))}for(const i of yl)if(i===t.status){const e=a.get(i)||[];e.unshift(await Vc(t)),a.set(i,e)}d(a)})))),[]),se.useEffect((()=>Dr.dealViewService.removeSubject.subscribe(B((async e=>{const t=new Map(c.current);for(const a of yl){const i=t.get(a)||[];t.set(a,i.filter((t=>t.id!==e)))}d(t)})))),[]),se.useEffect((()=>Dr.dealViewService.createSubject.subscribe(B((async e=>{const t=new Map(c.current);for(const a of yl)if(a===e.status){let i=t.get(a)||[];i=i.filter((t=>t.id!==e.$id)),i.unshift(await Vc(e)),t.set(a,i)}d(t)})))),[]);const g=v;return ae(he,{className:we(a.root,{[a.loading]:g}),children:[ae(Cc,{data:l.current,payload:t,onChange:n}),ae(he,{className:a.container,children:ae(Ha,{withScrollbar:!0,hideOverflowY:!0,className:a.content,children:yl.map((e=>{const t=c.current.get(e)||[];return ae(he,{onDrop:({currentTarget:t})=>f([e,t]),onDragEnd:()=>{y(null)},onDragOver:t=>{y(e),t.preventDefault()},className:we(a.group,{[a.activeGroup]:p===e,[a.inactiveGroup]:p!==e}),children:[ae(le,{variant:"h6",fontWeight:"bold",children:e}),ae(Fe,{className:a.list,minRowHeight:150,children:t.sort((({updatedAt:e},{updatedAt:t})=>r(e).isBefore(t)?1:-1)).filter((e=>{const{user_id:t}=l.current;return!t||e.userId===t})).filter((e=>{const{tip_klienta:t}=l.current;return!(null==t?void 0:t.length)||e.contactType===t[0]})).filter((e=>{const{search:t}=l.current;return!t||$a(e,t,...Bc)})).map((e=>ae(Tc,{onChangeStatus:async t=>{await _(e.id,t)},onDrag:()=>{u.current=e.id},...e},e.id)))})]})}))})}),b()]})},isActive:e=>Ur(["/deal"],e),isAvailable:()=>!1}],qc=async()=>{const e=new Map;return await Promise.all(yl.map((async t=>{const a=await Dr.dealViewService.findByDealStatus(t),i=await Promise.all(a.map((async e=>await Vc(e))));e.set(t,i)}))),e},Rc=()=>ae(le,{variant:"h2",color:"primary",width:"100%",textAlign:"center",fontWeight:"bold",sx:{textStroke:"2px #fff",WebkitTextStroke:"2px #fff"},children:no}),Pc=jr()((e=>({root:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,background:e.palette.background.default,height:"100%",width:"100%",display:"flex",alignItems:"center",flexDirection:"column",gap:20,padding:15},container:{position:"relative",overflow:"hidden",minWidth:375,maxWidth:375,padding:15},reveal:{width:"unset"}}))),Ec=jr()((e=>({root:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,background:e.palette.background.default,height:"100%",width:"100%",display:"flex",alignItems:"center",flexDirection:"column",gap:20,padding:15},container:{position:"relative",overflow:"hidden",minWidth:375,maxWidth:375,padding:15},reveal:{width:"unset"}}))),Nc=["Control","S"],Uc={overrideSystem:!0,ignoreInputFields:!1,repeatOnHold:!1},Hc=[{type:i.Paper,fieldBottomMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:" "})},{type:i.Group,fieldRightMargin:"0",fieldBottomMargin:"0",fields:[{type:i.Text,desktopColumns:"3",tabletColumns:"6",phoneColumns:"12",outlined:!1,name:"usd_eur",title:" USD-EUR",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000"}]},{type:i.Group,fieldRightMargin:"0",fieldBottomMargin:"0",fields:[{type:i.Text,desktopColumns:"3",tabletColumns:"6",phoneColumns:"12",outlined:!1,name:"usd_uzs",title:" USD-UZS",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000"}]}]},{type:i.Paper,fieldBottomMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:" "})},{type:i.Combo,desktopColumns:"3",tabletColumns:"6",phoneColumns:"12",outlined:!1,name:"masterdetail_mode",title:" ",itemList:async()=>{const e=await Dr.dictService.getMasterDetailMode();return Object.keys(e)},tr:async e=>{const t=await Dr.dictService.getMasterDetailMode();return L.get(t,e)}}]},{type:i.Paper,fieldBottomMargin:"1",fields:[{type:i.Component,fieldBottomMargin:"1",element:()=>ae(le,{variant:"h6",fontWeight:"bold",children:" "})},{type:i.Choose,name:"watermark_file_id",title:"  ",choose:async()=>{const e=await Xa("*.png");return e?await Dr.appwriteService.uploadFile(e):null},tr:async e=>{try{return await Dr.appwriteService.readFileName(e)}catch(t){return" "}},desktopColumns:"3",tabletColumns:"6",phoneColumns:"12",outlined:!1}]}],Oc=[{type:ie.Link,action:"breadcrumbs-action",label:"RealEstate"},{type:ie.Link,action:"breadcrumbs-action",label:" "},{type:ie.Button,isDisabled:({hasChanged:e})=>!e,action:"save-action",label:""}],Wc=[{type:i.Text,outlined:!0,name:"title",title:"",isInvalid:({title:e})=>e?null:"    "},{type:i.Text,outlined:!0,title:"",name:"comment",inputRows:3}],$c=[{title:" ",children:[{name:"sozdanie_obekta",label:" ",description:"  "},{name:"redaktirovanie_obekta",label:" ",description:"  "},{name:"prosmotr_obekta",label:" ",description:"  "}]},{title:"",children:[{name:"sozdanie_zayavki",label:" ",description:"  "},{name:"redaktirovanie_zayavki",label:" ",description:"  "},{name:"prosmotr_zayavki",label:" ",description:"  "}]},{title:"",children:[{name:"sozdanie_kontakta",label:" ",description:"  "},{name:"redaktirovanie_kontakta",label:" ",description:"   "},{name:"prosmotr_kontakta",label:" ",description:"   "}]},{title:" ",children:[{name:"upominanie_polzovatelya",label:" ",description:"    "},{name:"dobavlenie_fajla",label:" ",description:"    "}]},{title:"",children:[{name:"redaktirovanie_sotrudnika",label:" ",description:"   "},{name:"prosmotr_nomera_telefona_i_email",label:"    email",description:"     email "},{name:"nastrojka_urovnej_dostupa",label:"  ",description:"   "}]},(({title:e,levels:t})=>({title:e,children:t.map((({label:e,description:a},i)=>{const o="level-".concat(i+1);return{name:o,label:e,description:a,map:e=>{if(!e[o])return e;for(let a=0;a!==t.length;a++){const t="level-".concat(a+1);t!==o&&(e[t]=!1)}return e}}}))}))({title:" ",levels:[{label:"",description:"   "},{label:"",description:"     "},{label:"",description:"     , "},{label:"",description:"     , , "},{label:"",description:"       "}]}),{title:"",children:[{name:"ne_vizhu_nomera_telefonov_chuzhih_kontaktov",label:"      ()",description:"           "},{name:"vse_obekty_eksklyuzivny",label:"   ()",description:"     "},{name:"vizhu_vse_urovni",label:"  ",description:"      "},{name:"vizhu_kontakty_pod_bronyu",label:"    ()",description:" ,    "},{name:"zaderzhka_perenaznacheniya_otvetstvennogo",label:"  ",description:"       "}]},{title:"",children:[{name:"dostup_k_nastrojkam",label:"  ",description:"   "},{name:"sozdanie_roli",label:" ",description:"  "},{name:"redaktirovanie_roli",label:" ",description:"  "}]}],Gc=jr()((e=>({root:{position:"absolute",padding:20,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"stretch",transform:"translate(-50%, -50%)",outline:"none",backgroundColor:e.palette.background.paper,borderRadius:5,gap:5},content:{overflow:"hidden",overflowY:"auto",flex:1},small:{top:"40%",left:"50%",maxHeight:"80%",width:500},large:{top:"50%",left:"50%",width:"calc(100vw - 50px)",height:"calc(100vh - 50px)"},container:{flex:1,overflow:"hidden"},title:{display:"flex",justifyContent:"space-between",alignItems:"center",height:65,color:e.palette.text.primary},submit:{marginTop:15},disabled:{opacity:.5,pointerEvents:"none"},indicatorTransparent:{height:6,background:e.palette.primary.main},tabRootTransparent:{minHeight:54,height:54},tabsRoot:{minHeight:54,height:54,marginLeft:"0 !important",marginRight:"0 !important"}}))),Yc=[{type:Ze.Compute,compute:({title:e})=>e||" ",field:"title",headerName:"",width:()=>200},{type:Ze.Compute,compute:({comment:e})=>e||" ",field:"comment",headerName:"",width:e=>Math.max(e-300,200)},{type:Ze.Action,headerName:"",sortable:!1,width:()=>100}],Kc=[{type:Ge.Add,isDisabled:(e,{permissions:t})=>!t.hasSettingsCreateRolePermission},{type:Ge.Menu,options:[{action:"add-action",isDisabled:(e,{permissions:t})=>!t.hasSettingsCreateRolePermission},{action:"update-now"},{action:"resort-action"},{action:"drop-filters"}]}],Zc=[{label:"",action:"remove-action",icon:ot}],Xc=()=>window.innerHeight-160,Jc=[{id:"common",element:({payload:e})=>{const t=t=>{const{data:a,oneProps:i,beginSave:o,waitForChanges:l}=Ja({waitForChangesDelay:mo,history:Dr.routerService,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1),updateSubject:Dr.settingsViewService.updateSubject,checkUpdate:()=>!0,shouldAutoSave:()=>!0,onSave:async e=>{let t=!0;try{await Dr.settingsViewService.setValue(e),Dr.alertService.notify(" ")}catch(a){t=!1;const e=xr(a);Dr.alertService.notify(e)}return t},fallback:Dr.errorService.handleGlobalError});(e=>{const t=Ka(e);Za(Nc,t,Uc)})((async()=>{await l(),o()}));return ae(ve,{children:[ae(me,{items:Oc,onAction:e=>{"save-action"===e&&o()},payload:{hasChanged:!!a,payload:e}}),ae(fe,{dirty:!0,handler:()=>t.data,payload:e,fields:Hc,...i}),ae(Re,{})]})};return ae(ba,{state:async()=>[await Dr.settingsViewService.getValue()],fallback:Dr.errorService.handleGlobalError,children:([e])=>ae(t,{data:e})})},isActive:e=>Ur(["/settings","/settings/common"],e),isAvailable:()=>!1},{id:"roles",element:({payload:e})=>{const{handleLoadStart:t,handleLoadEnd:a}=de({history:Dr.routerService,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1)}),{pickRole:i,render:o}=(({fullScreen:e,onChange:t,onSubmit:a,fallback:i,onLoadStart:o,onLoadEnd:l})=>{const[r,n]=se.useState("common"),[s,d]=se.useState({}),[m,c]=se.useState(!1),[u,p]=se.useState(!1),[y,h]=se.useState(!1),[b,_]=se.useState(0),{classes:v,cx:f}=Gc();zt((()=>{t&&t(s)}),[s]);const g=(e,t)=>{t||(d(e),h(!0),c(!1))},k=()=>{d({}),p(!1),h(!1)},w=async()=>{a&&await a(s),p(!1),h(!1)},S=()=>{_((e=>e+1)),o&&o()},z=e=>{_((e=>e-1)),l&&l(e)};return{render:()=>ae(Et,{open:u,onClose:k,children:ae(he,{className:f(v.root,{[v.small]:!e,[v.large]:e}),children:[ae(he,{className:v.content,children:[ae(he,{className:v.title,sx:{position:"sticky",top:0,zIndex:1,background:"white"},children:ae(le,{variant:"h6",component:"h2",children:s.id?" ":" "})}),ae(Gt,{value:r,children:[ae(he,{className:v.container,sx:{borderBottom:1,borderColor:"divider",pointerEvents:"all",position:"sticky",top:"65px",zIndex:1,background:"white"},children:ae(Yt,{variant:"fullWidth",classes:{root:v.tabsRoot,indicator:v.indicatorTransparent},onChange:(e,t)=>{n(t),c(!1)},children:[ae(Kt,{classes:{root:v.tabRootTransparent},label:" ",value:"common"}),ae(Kt,{classes:{root:v.tabRootTransparent},label:" ",value:"features"})]})}),ae(Xt,{className:v.content,value:"common",children:ae(fe,{sx:{pt:2},handler:s,fields:Wc,change:g,invalidity:()=>c(!0)})}),ae(Xt,{className:v.content,value:"features",children:ae(Qa,{sx:{pt:2},readonly:m,features:$c,outlinePaper:!0,handler:()=>s.role_features?s.role_features.reduce(((e,t)=>({...e,[t]:!0})),{}):{},change:(e,t)=>{if(e&&!t){const t=Object.entries(e).filter((([e,t])=>!!t)).map((([e])=>e));d((e=>({...e,role_features:t}))),h(!0)}}})})]})]}),ae(_e,{className:v.submit,disabled:!!b||!y||m,fallback:i,onLoadStart:S,onLoadEnd:z,size:"large",variant:"contained",color:"info",fullWidth:!0,onClick:w,children:s.id?"":""})]})}),pickRole:e=>{d(e),p(!0)}}})({onLoadStart:t,onLoadEnd:a,onSubmit:async e=>{if(e.id)return await Dr.roleViewService.update(e.id,e),Dr.alertService.notify(" "),void l.next();await Dr.roleViewService.create(e),Dr.alertService.notify(" "),l.next()},fullScreen:!0}),l=_t(Dr.roleViewService.reloadSubject),{listProps:r}=vt(Dr.routerService.locationState,{fallback:Dr.errorService.handleGlobalError}),n=nt(Dr.roleViewService.findAll,{onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1),fallback:Dr.errorService.handleGlobalError,searchEntries:["title","comment"]});return ae(Le,{children:[ae(ft,{withSingleSort:!0,withSearch:!0,fetchDebounce:so,reloadSubject:l,title:"",heightRequest:Xc,rowActions:Zc,actions:Kc,columns:Yc,handler:n,payload:e,onRowClick:async e=>{(await Dr.permissionService.getPermissions()).hasSettingsEditRolePermission&&i(e)},onAction:async e=>{"add-action"===e&&i({})},onRowAction:async(e,t)=>{"remove-action"===e&&await Dr.roleViewService.remove(t.id)},selectionMode:gt.Multiple,...r}),o()]})},isActive:e=>Ur(["/settings/roles"],e),isAvailable:()=>!1}],Qc=()=>ae(ba,{state:async()=>[await Dr.settingsViewService.getMasterDetailMode(),await Dr.permissionService.getPermissions(),await Dr.featureService.getAccessLevel()],reloadSubject:Dr.layoutService.reloadOutletSubject,fallback:Dr.errorService.handleGlobalError,children:async([e,t,a])=>ae(kt,{history:Dr.routerService,routes:Jc,payload:()=>({menuMode:e,permissions:t,accessLevel:a})})}),eu=jr()((e=>({root:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",minHeight:150},box:{display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(1),flex:1},box_list:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 0",borderBottom:"1px solid gray",width:"100%",gap:"10px"},created_time:{alignSelf:"flex-start"},key:{color:"grey",fontSize:"14px"},value:{textAlign:"end",fontSize:"15px"},btn:{borderRadius:"25px"},adjust:{maxHeight:10,minHeight:10,flex:1}}))),tu=se.forwardRef((({id:e,className:t,style:a,completionTime:i,fromWhom:o,toWhom:l,task:r,createdDate:n,contact:s,type:d,status:m,isCall:c,isMeet:u,contact_id:p,onChangeStatus:y,onDrag:h},b)=>{const{classes:_}=eu(),[v,f]=se.useState(null),[g,k]=se.useState(null),{execute:w,loading:S}=Ie((async e=>{await y(e)}),{onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1),fallback:Dr.errorService.handleGlobalError}),z=se.useMemo((()=>{const e=cr.findIndex((e=>e===m)),t=cr.filter(((t,a)=>a<e)).filter((e=>""!==e)).filter((e=>" "!==e)).reverse();return t.push(""),t.push(" "),t}),[m]),x=se.useMemo((()=>{const e=cr.findIndex((e=>e===m)),t=cr.filter(((t,a)=>a>e)).filter((e=>""!==e)).filter((e=>" "!==e));return t.push(""),t.push(" "),t}),[m]),F=se.useMemo((()=>" "===m||""===m),[m]);return ae("div",{"data-dealid":e,className:we(_.root,t),onDrag:()=>h(e),style:a,ref:b,draggable:!F,children:[ae(ce,""===d?{className:_.box,children:[ae(be,{justifyContent:"space-between",alignItems:"center",direction:"row",width:"100%",children:[ae(pt,{onClick:({currentTarget:e})=>{f(e),k(null)},disabled:!z.length||S||F,size:"small",children:ae(Pt,{})}),ae(Pa,{anchorEl:v,open:!!v,onClose:()=>f(null),children:z.map(((e,t)=>ae(Ea,{onClick:()=>{w(e),f(null)},children:e},"".concat(e,"-").concat(t))))}),ae(Jt,{label:i,variant:"filled",color:"primary"}),ae(pt,{onClick:({currentTarget:e})=>{f(null),k(e)},disabled:!x.length||S||F,size:"small",children:ae(Rt,{})}),ae(Pa,{anchorEl:g,open:!!g,onClose:()=>k(null),children:x.map(((e,t)=>ae(Ea,{onClick:()=>{w(e),k(null)},children:e},"".concat(e,"-").concat(t))))})]}),ae(he,{className:_.box_list,children:[ae(le,{className:_.key,children:":"}),ae(le,{className:_.value,children:l})]}),ae(he,{className:_.box_list,children:[ae(le,{className:_.key,children:":"}),ae(le,{className:_.value,children:ae(ta,{href:"#",onClick:()=>Y("/contact_view/".concat(p,"/contact")),children:s})})]}),ae(he,{sx:{display:u||u?"flex":"none",justifyContent:"space-around",gap:"10px",margin:"10px 0",width:"100%"},children:[ae(Jt,{label:"",color:"info",sx:{opacity:u?1:0}}),ae(Jt,{label:"",color:"warning",sx:{opacity:c?1:0}})]}),ae(he,{className:_.created_time,children:[ae(le,{className:_.key,children:" :"}),ae(le,{className:_.value,children:n})]})]}:{className:_.box,children:[ae(be,{justifyContent:"space-between",alignItems:"center",direction:"row",width:"100%",children:[ae(pt,{onClick:({currentTarget:e})=>{f(e),k(null)},disabled:!z.length||S||F,size:"small",children:ae(Pt,{})}),ae(Pa,{anchorEl:v,open:!!v,onClose:()=>f(null),children:z.map(((e,t)=>ae(Ea,{onClick:()=>{w(e),f(null)},children:e},"".concat(e,"-").concat(t))))}),ae(Jt,{label:i,variant:"filled",color:"primary"}),ae(pt,{onClick:({currentTarget:e})=>{f(null),k(e)},disabled:!x.length||S||F,size:"small",children:ae(Rt,{})}),ae(Pa,{anchorEl:g,open:!!g,onClose:()=>k(null),children:x.map(((e,t)=>ae(Ea,{onClick:()=>{w(e),k(null)},children:e},"".concat(e,"-").concat(t))))})]}),ae(he,{className:_.box_list,children:[ae(le,{className:_.key,children:" :"}),ae(le,{className:_.value,children:o})]}),ae(he,{className:_.box_list,children:[ae(le,{className:_.key,children:":"}),ae(le,{className:_.value,children:l})]}),ae(he,{className:_.box_list,children:[ae(le,{className:_.key,children:":"}),ae(le,{className:_.value,children:r})]}),ae(he,{className:_.created_time,children:[ae(le,{className:_.key,children:" :"}),ae(le,{className:_.value,children:n})]})]}),ae("div",{className:_.adjust})]})})),au=[{type:i.Box,sx:{display:"grid",gridTemplateColumns:"auto auto 1fr auto auto","& > .MuiGrid-root":{minWidth:"275px"},mt:-1},fields:[{type:i.Choose,fieldBottomMargin:"0",fieldRightMargin:"2",choose:async(e,t)=>{t.pickData(e.user_id?[e.user_id]:[]);const a=await t.resultSubject.toPromise();if(a&&a.length){const[e]=a;return e}return null},tr:async e=>{const t=await Dr.userViewService.tryRead(e);return[null==t?void 0:t.last_name,null==t?void 0:t.first_name,null==t?void 0:t.middle_name].filter((e=>e)).join(" ")||(null==t?void 0:t.$id)||""},name:"user_id",placeholder:"",title:""},{type:i.Combo,fieldBottomMargin:"0",fieldRightMargin:"5",name:"task_type",title:"",placeholder:" ",itemList:["",""]},{type:i.Div},{type:i.Component,fieldRightMargin:"2",sx:{maxWidth:"185px 1important",minWidth:"185px !important"},element:({payload:{onCreateTask:e}})=>ae(_e,{sx:{mt:1,mr:1,whiteSpace:"nowrap"},onClick:e,size:"small",variant:"contained",children:" "})},{type:i.Text,fieldBottomMargin:"0",name:"search",title:"",placeholder:"",leadingIcon:Na,trailingIcon:()=>ae(Ua,{sx:{opacity:.5}}),trailingIconClick(e,t,a){e&&a("")}}]}],iu=({onChange:e,onCreateTask:t,className:a,style:i,data:o,payload:l})=>{const{pickData:r,render:n,resultSubject:s}=ed({payload:l});return ae(ce,{className:a,style:i,sx:{mb:1,minHeight:48},children:[ae(Ha,{sx:{height:"100%"},hideOverflowY:!0,children:ae(he,{sx:{p:1,display:"flex",alignItems:"center",justifyContent:"stretch"},children:ae(fe,{fields:au,handler:()=>o,onChange:(t,a)=>{a||e(t)},payload:()=>({...l,pickData:r,resultSubject:s,onCreateTask:t}),fieldDebounce:so})})}),n()]})},ou=async e=>{const{moment_stamp:t,from_user_id:a,to_user_id:i,contact_id:o,from_user_fio:l,to_user_fio:n,contact_fio:s,title:d,$createdAt:m,$updatedAt:c,is_call:u,is_meet:p,time_stamp:y,$id:h,type:b}=e,_=r(m).format("HH:mm DD/MM/YYYY");let v=l||" ",f=n||" ",g=" ",k=s||" ",w=" ";const S=await yr(e);return null===S?null:(t&&(w=nl(t).format("DD/MM/YYYY")),t&&"number"==typeof y&&(w+=" ",w+=sl(y).format("HH:mm")),d&&(g=d),{id:h,type:b,completionTime:w,fromWhom:v,toWhom:f,task:g,metadata_task:g,createdDate:_,updatedAt:c,metadata_created_at:r(m).format("DD/MM/YYYY"),metadata_updated_at:r(c).format("DD/MM/YYYY"),moment_stamp:t,toUserId:i,isCall:u,isMeet:p,contact_id:o,time_stamp:y,status:S,contact:k})},lu=[{type:i.Group,fieldBottomMargin:"0",fieldRightMargin:"0",noBaseline:!0,fields:[{type:i.Component,sx:{mb:-1},element:()=>ae(le,{variant:"caption",sx:{opacity:.8},children:" "})},{type:i.Group,fieldRightMargin:"0",fieldBottomMargin:"1",fields:[{type:i.Text,fieldBottomMargin:"0",columns:"6",compute:e=>{const t=e.fromStatus;return" "===t||""===t||" "===t?t:nl(e.fromStamp||ll()).format("DD/MM/YYYY")}},{type:i.Time,sx:{pointerEvents:"none",opacity:.5},fieldBottomMargin:"0",columns:"6",compute:({fromTimeStamp:e})=>"number"==typeof e?sl(e).format("HH:mm"):null,title:"",placeholder:" "}]},{type:i.Component,sx:{mb:-1},element:()=>ae(le,{variant:"caption",sx:{opacity:.8},children:" "})},{type:i.Group,fieldRightMargin:"0",fieldBottomMargin:"1",fields:[{type:i.Text,fieldBottomMargin:"0",columns:"6",compute:e=>{const t=e.toStatus;return" "===t||""===t||" "===t?t:nl(L.get(ur,t)||ll()).format("DD/MM/YYYY")}},{type:i.Time,fieldBottomMargin:"0",columns:"6",name:"time_stamp",title:"",placeholder:" "}]}]},{type:i.Text,name:"comment",title:"",placeholder:"",inputRows:3}],ru=jr()((e=>({root:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",height:"calc(100vh - 85px)",width:"100%",["& .".concat("react-declarative__scrollViewTarget")]:{transform:"rotateX(180deg)","& > div > div":{marginBottom:"25px",transform:"rotateX(180deg)"}}},container:{position:"relative",flex:1,display:"flex",alignItems:"stretch",justifyContent:"stretch"},content:{flex:1,display:"flex"},group:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",maxWidth:"276px",minWidth:"276px",gap:10,padding:10,marginRight:10},inactiveGroup:{background:oe("#000",.03)},activeGroup:{background:oe(e.palette.primary.main,.5)},list:{flex:1,minWidth:"256px",height:"100%"},loading:{pointerEvents:"none"}}))),nu=["fromWhom","toWhom","task","contact","type","metadata_created_at","metadata_updated_at","metadata_task"],su={user_id:"",tip_klienta:null,search:""},du=[{id:"list",element:({params:{dealCardMap:e},payload:t})=>{const{classes:a}=ru(),[i,o]=Oa(su),[l,n]=Wa((()=>({user_id:i.user_id,tip_klienta:JSON.parse(i.tip_klienta),search:i.search})));zt((()=>{o(l.current)}),[l.current]);const[s,d]=se.useState((()=>new Map(e))),m=(({payload:e})=>{const{handleLoadStart:t,handleLoadEnd:a}=de({history:Dr.routerService,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1)}),i=wt({payload:e,fields:lu}),{execute:o}=Ie((async({fromStamp:e,toStatus:t,fromStatus:a,fromTimeStamp:o,type:l,id:r,call:n,meet:s})=>{var d;const m=await i({title:" ",handler:()=>({fromStamp:e,toStatus:t,fromStatus:a,fromTimeStamp:o,time_stamp:"number"==typeof o?sl(o).format("HH:mm"):null})}).toPromise();if(m){const{to_user_id:e,title:i,contact_id:o}=await Dr.taskViewService.read(r),c=L.get(ur,t)||null,u=null==(d=Ae.parseTime(m.time_stamp))?void 0:d.toStamp();""===l&&await Dr.taskRequestService.updateTodoTask(r,e,a,c,"number"==typeof u?u:null," "===t,i,m.comment),""===l&&await Dr.taskRequestService.updateClientTask(r,e,a,o,c,"number"==typeof u?u:null," "===t,n,s,i,m.comment)}}),{onLoadStart:t,onLoadEnd:a,fallback:Dr.errorService.handleGlobalError});return async e=>await o(e)})({payload:t}),{execute:c,render:u}=gc({payload:t}),p=se.useMemo((()=>{const e=[];for(const t of s.values())e.push(t);return e.flatMap((e=>e))}),[s]),y=Nt(s),h=se.useRef(null),[b,_]=se.useState(null),v=async(e,t)=>{const a=p.find((t=>t.id===e));if(!a)return;const{status:i,type:o,moment_stamp:l,time_stamp:r,isCall:n,isMeet:s}=a;i!==t&&await m({id:e,type:o,fromStamp:l,toStatus:t,fromTimeStamp:r,fromStatus:i,call:!!n,meet:!!s})},{loading:f,execute:g}=Ie((async([e])=>{_(null),await v(h.current,e)}),{onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1),fallback:Dr.errorService.handleGlobalError});se.useEffect((()=>Dr.taskViewService.updateSubject.subscribe(B((async([e,t])=>{const a=new Map(y.current);for(const o of cr){const t=a.get(o)||[];a.set(o,t.filter((t=>t.id!==e)))}const i=await yr(t);for(const o of cr)if(o===i){const e=a.get(o)||[],i=await ou(t);i&&e.unshift(i),a.set(o,e)}d(a)})))),[]),se.useEffect((()=>Dr.taskViewService.removeSubject.subscribe(B((async e=>{const t=new Map(y.current);for(const a of cr){const i=t.get(a)||[];t.set(a,i.filter((t=>t.id!==e)))}d(t)})))),[]),se.useEffect((()=>Dr.taskViewService.createSubject.subscribe(B((async e=>{const t=new Map(y.current),a=await yr(e);for(const i of cr)if(i===a){let a=t.get(i)||[];a=a.filter((t=>t.id!==e.$id));const o=await ou(e);null!==o&&a.unshift(o),t.set(i,a)}d(t)})))),[]);const k=f;return ae(he,{className:we(a.root,{[a.loading]:k}),children:[ae(iu,{data:l.current,payload:t,onChange:n,onCreateTask:c}),ae(he,{className:a.container,children:[ae(Ha,{withScrollbar:!0,hideOverflowY:!0,className:a.content,children:cr.map((e=>{const t=y.current.get(e)||[];return ae(he,{onDrop:({currentTarget:t})=>g([e,t]),onDragEnd:()=>{_(null)},onDragOver:t=>{_(e),t.preventDefault()},className:we(a.group,{[a.activeGroup]:b===e,[a.inactiveGroup]:b!==e}),children:[ae(le,{variant:"h6",fontWeight:"bold",children:e}),ae(Fe,{className:a.list,minRowHeight:150,children:t.sort((({updatedAt:e},{updatedAt:t})=>r(e).isBefore(t)?1:-1)).filter((e=>{const{user_id:t}=l.current;return!t||e.toUserId===t})).filter((e=>{const{task_type:t}=l.current;return!(null==t?void 0:t.length)||e.type===t[0]})).filter((e=>{const{search:t}=l.current;return console.log({search:t}),!t||$a(e,t,...nu)})).map((e=>ae(tu,{onChangeStatus:async t=>{await v(e.id,t)},onDrag:()=>{h.current=e.id},...e},e.id)))})]})}))}),u()]})]})},isActive:e=>Ur(["/task"],e),isAvailable:()=>!1}],mu=async()=>{const e=new Map;return await Promise.all(cr.map((async t=>{const a=await Dr.taskViewService.findByTaskStatus(t),i=await Promise.all(a.map((async e=>await ou(e))));e.set(t,i.filter((e=>null!==e)))}))),e},cu=[{id:"user",label:" ",isActive:()=>Ur(["/user_edit/:id","/user_edit/:id/user"])},{id:"additional_info",label:" ",isActive:()=>Ur(["/user_edit/:id","/user_edit/:id/additional_info"])},{id:"features",label:" ",isActive:()=>Ur(["/user_edit/:id/features"])},{id:"files",label:"",isActive:()=>Ur(["/user_edit/:id/files"])}],uu=(e,t)=>{if(t)return;const a=Vl("id");"user"===e&&Dr.routerService.replace("/user_edit/".concat(a,"/user")),"additional_info"===e&&Dr.routerService.replace("/user_edit/".concat(a,"/additional_info")),"files"===e&&Dr.routerService.replace("/user_edit/".concat(a,"/files")),"features"===e&&Dr.routerService.replace("/user_edit/".concat(a,"/features"))},pu=({children:e,payload:t,mode:a=C.Paper})=>{const i=se.useMemo((()=>"tabs"===a?C.Tabs:C.Paper),[a]);return ae(Be,{withFixedPos:!0,payload:t,fixedPosHeaderAdjust:a===C.Paper?85:64,mode:i,options:cu,onActiveOptionChange:uu,children:e})},yu=[{type:i.Paper,fieldBottomMargin:"1",fields:[{type:i.Typography,typoVariant:"h6",placeholder:" "},{type:i.Text,columns:"6",outlined:!1,name:"seriya-i-nomer_pasporta",title:"   "},{type:i.Date,columns:"6",outlined:!1,name:"data-vydachi_pasporta",title:"  "},{type:i.Text,columns:"6",outlined:!1,name:"kem_vydan",title:" "},{type:i.Text,columns:"6",outlined:!1,name:"adres_propiski",title:" "},{type:i.Text,columns:"6",outlined:!1,name:"adres_prozhivaniya",title:" "}]},{type:i.Paper,fieldBottomMargin:"1",fields:[{type:i.Typography,typoVariant:"h6",placeholder:""},{type:i.Text,columns:"6",outlined:!1,inputRows:3,name:"o_sebe",title:" "},{type:i.Text,columns:"6",outlined:!1,inputRows:3,name:"hobbi",title:""}]},{type:i.Paper,fieldBottomMargin:"1",fields:[{type:i.Typography,typoVariant:"h6",placeholder:" "},{type:i.Text,columns:"6",outlined:!1,name:"telegram",title:"Telegram"},{type:i.Text,columns:"6",outlined:!1,name:"fejsbuk",title:"Facebook"},{type:i.Text,columns:"6",outlined:!1,name:"instagram",title:"Instagram"},{type:i.Text,columns:"6",outlined:!1,name:"vatsap",title:"WhatsApp"},{type:i.Text,columns:"6",outlined:!1,name:"v_kontakte",title:"VK"},{type:i.Text,columns:"6",outlined:!1,name:"zum",title:"ZOOM"}]},{type:i.Paper,fieldBottomMargin:"1",fields:[{type:i.Typography,typoVariant:"h6",placeholder:" "},{type:i.Group,fields:[{type:i.Group,columns:"6",fields:[{type:i.Component,element:()=>ae(le,{children:""})},{type:i.Group,child:{type:i.Box,sx:{display:"grid",gridTemplateColumns:"auto auto 1fr"},fields:[{type:i.Radio,name:"deti",radioValue:"",title:""},{type:i.Radio,name:"deti",radioValue:"",title:""}]}},{type:i.Group,columns:"12",fields:[{type:i.Combo,fieldRightMargin:"4",columns:"6",outlined:!1,name:"semejnoe_polozhenie",title:" ",itemList:[" ","/ ","/"," ","()"]},{type:i.Date,fieldRightMargin:"4",columns:"6",outlined:!1,name:"data_priema_rezyume",title:"  "},{type:i.Date,fieldRightMargin:"4",columns:"6",outlined:!1,name:"sertifikat",title:""},{type:i.Date,fieldRightMargin:"4",columns:"6",outlined:!1,name:"nachalo_opyta_raboty",title:"  "},{type:i.Date,fieldRightMargin:"4",columns:"6",outlined:!1,name:"data_uvolneniya",title:" "},{type:i.Text,outlined:!1,inputRows:3,name:"prichina_uvolneniya",title:" "}]}]}]}]}];window.user_additional_info_fields=yu;const hu=[{type:ie.Link,action:"user-list-action",label:" "},{type:ie.Link,action:"user-list-action",label:" "},{type:ie.Button,isDisabled:({hasChanged:e})=>!e,action:"user-save-action",label:""}],bu=[{id:"user",label:" ",isActive:()=>Ur(["/user_view/:id","/user_view/:id/user"])},{id:"additional_info",label:" ",isActive:()=>Ur(["/user_view/:id","/user_view/:id/additional_info"])},{id:"features",isDisabled:({permissions:e})=>!e.hasUsersAccessLevelsPermission,label:" ",isActive:()=>Ur(["/user_view/:id/features"])},{id:"files",label:"",isActive:()=>Ur(["/user_view/:id/files"])}],_u=(e,t)=>{if(t)return;const a=Vl("id");"user"===e&&Dr.routerService.replace("/user_view/".concat(a,"/user")),"additional_info"===e&&Dr.routerService.replace("/user_view/".concat(a,"/additional_info")),"features"===e&&Dr.routerService.replace("/user_view/".concat(a,"/features")),"files"===e&&Dr.routerService.replace("/user_view/".concat(a,"/files"))},vu=({children:e,payload:t,mode:a=C.Paper})=>{const i=se.useMemo((()=>"tabs"===a?C.Tabs:C.Paper),[a]);return ae(Be,{withFixedPos:!0,payload:t,fixedPosHeaderAdjust:a===C.Paper?85:64,mode:i,options:bu,onActiveOptionChange:_u,children:e})},fu=[{type:i.Paper,isVisible:e=>fs(e,"seriya-i-nomer_pasporta","data-vydachi_pasporta","kem_vydan","adres_propiski","adres_prozhivaniya"),fieldBottomMargin:"1",fields:[{type:i.Typography,typoVariant:"h6",placeholder:" "},{type:i.Text,isVisible:e=>fs(e,"seriya-i-nomer_pasporta"),columns:"6",outlined:!1,name:"seriya-i-nomer_pasporta",title:"   "},{type:i.Text,isVisible:e=>fs(e,"data-vydachi_pasporta"),columns:"6",outlined:!1,name:"data-vydachi_pasporta",title:"  "},{type:i.Text,isVisible:e=>fs(e,"kem_vydan"),columns:"6",outlined:!1,name:"kem_vydan",title:" "},{type:i.Text,isVisible:e=>fs(e,"adres_propiski"),columns:"6",outlined:!1,name:"adres_propiski",title:" "},{type:i.Text,isVisible:e=>fs(e,"adres_prozhivaniya"),columns:"6",outlined:!1,name:"adres_prozhivaniya",title:" "}]},{type:i.Paper,isVisible:e=>fs(e,"o_sebe","hobbi"),fieldBottomMargin:"1",fields:[{type:i.Typography,typoVariant:"h6",placeholder:""},{type:i.Text,isVisible:e=>fs(e,"o_sebe"),columns:"6",outlined:!1,inputRows:3,name:"o_sebe",title:" "},{type:i.Text,isVisible:e=>fs(e,"hobbi"),columns:"6",outlined:!1,inputRows:3,name:"hobbi",title:""}]},{type:i.Paper,isVisible:e=>fs(e,"telegram","fejsbuk","instagram","vatsap","v_kontakte","zum"),fieldBottomMargin:"1",fields:[{type:i.Typography,typoVariant:"h6",placeholder:" "},{type:i.Text,isVisible:e=>fs(e,"telegram"),columns:"6",outlined:!1,name:"telegram",title:"Telegram"},{type:i.Text,isVisible:e=>fs(e,"fejsbuk"),columns:"6",outlined:!1,name:"fejsbuk",title:"Facebook"},{type:i.Text,isVisible:e=>fs(e,"instagram"),columns:"6",outlined:!1,name:"instagram",title:"Instagram"},{type:i.Text,isVisible:e=>fs(e,"vatsap"),columns:"6",outlined:!1,name:"vatsap",title:"WhatsApp"},{type:i.Text,isVisible:e=>fs(e,"v_kontakte"),columns:"6",outlined:!1,name:"v_kontakte",title:"VK"},{type:i.Text,isVisible:e=>fs(e,"zum"),columns:"6",outlined:!1,name:"zum",title:"ZOOM"}]},{type:i.Paper,isVisible:e=>fs(e,"deti","semejnoe_polozhenie","data_priema_rezyume","sertifikat","nachalo_opyta_raboty","data_uvolneniya","prichina_uvolneniya"),fieldBottomMargin:"1",fields:[{type:i.Typography,typoVariant:"h6",placeholder:" "},{type:i.Group,fields:[{type:i.Group,isVisible:e=>fs(e,"deti"),columns:"6",fields:[{type:i.Component,element:()=>ae(le,{children:""})},{type:i.Group,child:{type:i.Box,sx:{display:"grid",gridTemplateColumns:"auto auto 1fr"},fields:[{type:i.Radio,isVisible:e=>fs(e,"deti"),name:"deti",radioValue:"",title:""},{type:i.Radio,isVisible:e=>fs(e,"deti"),name:"deti",radioValue:"",title:""}]}},{type:i.Group,columns:"12",fields:[{type:i.Text,isVisible:e=>fs(e,"semejnoe_polozhenie"),fieldRightMargin:"4",columns:"6",outlined:!1,name:"semejnoe_polozhenie",title:" "},{type:i.Text,isVisible:e=>fs(e,"data_priema_rezyume"),fieldRightMargin:"4",columns:"6",outlined:!1,name:"data_priema_rezyume",title:"  "},{type:i.Text,isVisible:e=>fs(e,"sertifikat"),fieldRightMargin:"4",columns:"6",outlined:!1,name:"sertifikat",title:""},{type:i.Text,isVisible:e=>fs(e,"nachalo_opyta_raboty"),fieldRightMargin:"4",columns:"6",outlined:!1,name:"nachalo_opyta_raboty",title:"  "},{type:i.Text,isVisible:e=>fs(e,"data_uvolneniya"),fieldRightMargin:"4",columns:"6",outlined:!1,name:"data_uvolneniya",title:" "},{type:i.Text,isVisible:e=>fs(e,"prichina_uvolneniya"),outlined:!1,inputRows:3,name:"prichina_uvolneniya",title:" "}]}]}]}]}],gu=[{type:ie.Link,action:"user-list-action",label:" "},{type:ie.Link,action:"user-list-action",label:"  "},{type:ie.Button,isDisabled:({payload:{permissions:e}})=>!e.hasUsersUpdatePermission,action:"user-edit-action",label:""}],ku=[{type:ie.Link,action:"user-list-action",label:" "},{type:ie.Link,action:"user-list-action",label:" "},{type:ie.Button,isDisabled:({hasChanged:e})=>!e,action:"user-save-action",label:""}],wu=[{type:ie.Link,action:"user-list-action",label:" "},{type:ie.Link,action:"user-list-action",label:" "},{type:ie.Button,action:"user-edit-action",label:""}],Su=[{type:ie.Link,action:"user-list-action",label:" "},{type:ie.Link,action:"user-list-action",label:" "},{type:ie.Button,isDisabled:({hasChanged:e})=>!e,action:"user-save-action",label:""}],zu=[{type:ie.Link,action:"user-list-action",label:" "},{type:ie.Link,action:"user-list-action",label:" "},{type:ie.Button,isDisabled:({payload:{permissions:e}})=>!e.hasUsersUpdatePermission,action:"user-edit-action",label:""}],xu=Ke.createLoader(28),Fu=[{type:i.Text,outlined:!0,name:"email",title:"Email"},{type:i.Text,outlined:!0,name:"phone",title:""}],Tu=[{type:Ze.Component,headerName:"",sortable:!1,width:()=>65,element:({avatar:e,email:t})=>ae(Ue,{Loader:xu,children:async()=>{const a=e?await Dr.appwriteService.getImageURL(e):"";return ae(he,{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:ae(Oe,{src:a||void 0,alt:t})})}})},{type:Ze.Compute,sortable:!1,field:"index",headerName:"",element:({index:e})=>ae(Xe,{content:e}),width:()=>100},{type:Ze.Compute,sortable:!1,headerName:"",compute:({last_name:e="",first_name:t="",middle_name:a=""})=>[e,t,a].filter((e=>e.length)).join(" ")||" ",width:e=>Math.max((e-265)/3,200)},{type:Ze.Compute,isVisible:({payload:{permissions:e}})=>O(e.hasContactNumberPermission,e.hasUsersViewPhoneAndEmailPermission),sortable:!1,compute:({phone:e})=>e||" ",field:"phone",headerName:"",width:e=>Math.max((e-265)/3,200)},{type:Ze.Compute,sortable:!1,compute:({email:e})=>e||" ",isVisible:({payload:{permissions:e}})=>O(e.hasContactEmailPermission,e.hasUsersViewPhoneAndEmailPermission),field:"email",headerName:"Email",width:e=>Math.max((e-265)/3,200)},{type:Ze.Action,headerName:"",sortable:!1,width:()=>100}],Au=[{type:Ge.Menu,options:[{action:"update-now"},{action:"resort-action"},{action:"drop-filters"}]}],Cu=[{label:"",isDisabled:(e,{permissions:t})=>!t.hasUsersUpdatePermission,action:"edit-action"}],Vu=()=>window.innerHeight-70,Iu=jr()((e=>({root:{alignItems:"center",display:"flex"},avatar:{height:64,marginRight:e.spacing(2),width:64},avatarWrapper:{height:"100%",minWidth:60},content:{width:"100%"}}))),Lu=Ke.createLoader(24),Mu=({readonly:e,avatar:t,email:a,onChange:i})=>{const{classes:o}=Iu();return ae(he,{className:o.root,children:[ae(he,{className:o.avatarWrapper,children:ae(Ue,{payload:t,Loader:Lu,children:async e=>{const t=e?await Dr.appwriteService.getImageURL(e):void 0;return ae(Oe,{alt:a,src:t,className:o.avatar})}})}),ae("div",{className:o.content,children:[ae(ti,{container:!0,spacing:1,children:[ae(ti,{item:!0,children:ae(_e,{disabled:e,color:"primary",onClick:async()=>{const e=await Xa("image/jpeg, image/png");if(e){const t=await Dr.appwriteService.uploadFile(e);i(t)}},size:"small",type:"button",variant:"outlined",children:" "})}),ae(ti,{item:!0,children:ae(mt,{disabled:!t||e,onClick:()=>i(null),color:"primary",size:"small",type:"button",variant:"text",children:""})}),ae(ti,{item:!0,xs:!0})]}),ae(le,{color:"textSecondary",variant:"caption",children:": 200x200,   : 5"})]})]})},Bu=[{type:i.Paper,fieldBottomMargin:"1",fields:[{type:i.Box,sx:{display:"grid",gridTemplateColumns:"1fr auto"},fields:[{type:i.Component,element:({readonly:e,avatar:t,email:a,onChange:i})=>ae(Mu,{avatar:t,email:a,readonly:e,onChange:e=>i({avatar:e})})},{type:i.Switch,fieldBottomMargin:"0",name:"active",title:""}]}]},{type:i.Paper,fieldBottomMargin:"1",fields:[{type:i.Typography,typoVariant:"h6",placeholder:" "},{type:i.Text,name:"last_name",title:"",outlined:!1,isInvalid:({last_name:e})=>e?null:"  "},{type:i.Text,name:"first_name",title:"",outlined:!1,isInvalid:({first_name:e})=>e?null:"  "},{type:i.Text,name:"middle_name",title:"",outlined:!1},{type:i.Group,fields:[{type:i.Group,columns:"6",fields:[{type:i.Component,element:()=>ae(le,{children:""})},{type:i.Group,child:{type:i.Box,sx:{display:"grid",gridTemplateColumns:"auto auto 1fr"},fields:[{type:i.Radio,name:"pol",radioValue:"",title:""},{type:i.Radio,name:"pol",radioValue:"",title:""}]}},{type:i.Group,columns:"12",fields:[{type:i.Date,fieldRightMargin:"4",columns:"6",outlined:!1,name:"data_rozhdeniya",title:" "},{type:i.Date,fieldRightMargin:"4",columns:"6",outlined:!1,name:"data_trudoustrojstva",title:" "},{type:i.Text,fieldRightMargin:"4",columns:"6",outlined:!1,name:"email",title:"Email",placeholder:"  email"},{type:i.Text,fieldRightMargin:"4",columns:"6",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"rabochij_telefon",title:" ",placeholder:" "}]}]}]}]},{type:i.Paper,fieldBottomMargin:"1",fields:[{type:i.Typography,typoVariant:"h6",placeholder:" "},{type:i.Text,columns:"6",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"lichnyj_nomer",title:" "}]},{type:i.Paper,fieldBottomMargin:"1",fields:[{type:i.Typography,typoVariant:"h6",placeholder:""},{type:i.Combo,columns:"6",outlined:!1,name:"ofis",title:"",itemList:[]},{type:i.Combo,isDisabled:(e,{permissions:t})=>!t.hasUsersAccessLevelsPermission,columns:"6",outlined:!1,isInvalid:({user_role:e})=>e?null:"  ",itemList:async()=>{const e=await Dr.dictService.getUserRoles();return Object.keys(e)},tr:async e=>{const t=await Dr.dictService.getUserRoles();return L.get(t,e)||e},name:"user_role",title:""},{type:i.Combo,columns:"6",outlined:!1,name:"filial",title:"",itemList:[]},{type:i.Text,columns:"6",outlined:!1,name:"dolzhnost",title:""},{type:i.Combo,columns:"6",outlined:!1,name:"otdel",title:"",itemList:[]},{type:i.Combo,columns:"6",outlined:!1,name:"status_sotrudnika",title:" ",itemList:[""," "," "," ",""]},{type:i.Group,columns:"6",fieldRightMargin:"0",fieldBottomMargin:"0",child:{type:i.Div,style:{display:"grid",gridTemplateColumns:"auto auto 1fr"},fields:[{type:i.Checkbox,name:"nachalnik_otdela",title:" "}]}}]}];window.user_fields=Bu;const Du=[{type:ie.Link,action:"user-list-action",label:" "},{type:ie.Link,action:"user-list-action",label:" "},{type:ie.Button,isDisabled:({hasChanged:e})=>!e,action:"user-save-action",label:""}],ju=jr()((e=>({root:{alignItems:"center",display:"flex"},avatar:{height:64,marginRight:e.spacing(2),width:64},avatarWrapper:{height:"100%",minWidth:60},content:{width:"100%"}}))),qu=Ke.createLoader(24),Ru=({readonly:e,avatar:t,email:a,onChange:i})=>{const{classes:o}=ju();return ae(he,{className:o.root,children:[ae(he,{className:o.avatarWrapper,children:ae(Ue,{payload:t,Loader:qu,children:async e=>{const t=e?await Dr.appwriteService.getImageURL(e):void 0;return ae(Oe,{alt:a,src:t,className:o.avatar})}})}),ae("div",{className:o.content,children:[ae(ti,{container:!0,spacing:1,children:[ae(ti,{item:!0,children:ae(_e,{disabled:e,color:"primary",onClick:async()=>{const e=await Xa("image/jpeg, image/png");if(e){const t=await Dr.appwriteService.uploadFile(e);i(t)}},size:"small",type:"button",variant:"outlined",children:" "})}),ae(ti,{item:!0,children:ae(mt,{disabled:!t||e,onClick:()=>i(null),color:"primary",size:"small",type:"button",variant:"text",children:""})}),ae(ti,{item:!0,xs:!0})]}),ae(le,{color:"textSecondary",variant:"caption",children:": 200x200,   : 5"})]})]})},Pu=[{type:i.Paper,fieldBottomMargin:"1",fields:[{type:i.Box,sx:{display:"grid",gridTemplateColumns:"1fr auto"},fields:[{type:i.Component,element:({readonly:e,avatar:t,email:a,onChange:i})=>ae(Ru,{avatar:t,email:a,readonly:e,onChange:e=>i({avatar:e})})},{type:i.Switch,fieldBottomMargin:"0",name:"active",title:""}]}]},{type:i.Paper,isVisible:e=>fs(e,"first_name","last_name","middle_name"),fieldBottomMargin:"1",fields:[{type:i.Typography,typoVariant:"h6",placeholder:" "},{type:i.Text,isVisible:e=>fs(e,"last_name"),name:"last_name",title:"",outlined:!1,isInvalid:({last_name:e})=>e?null:"  "},{type:i.Text,isVisible:e=>fs(e,"first_name"),name:"first_name",title:"",outlined:!1,isInvalid:({first_name:e})=>e?null:"  "},{type:i.Text,isVisible:e=>fs(e,"middle_name"),name:"middle_name",title:"",outlined:!1},{type:i.Group,isVisible:e=>fs(e,"pol","data_rozhdeniya","data_trudoustrojstva","email","rabochij_telefon"),fields:[{type:i.Group,isVisible:e=>fs(e,"pol"),columns:"6",fields:[{type:i.Component,element:()=>ae(le,{children:""})},{type:i.Group,child:{type:i.Box,sx:{display:"grid",gridTemplateColumns:"auto auto 1fr"},fields:[{type:i.Radio,isVisible:e=>fs(e,"pol"),name:"pol",radioValue:"",title:""},{type:i.Radio,isVisible:e=>fs(e,"pol"),name:"pol",radioValue:"",title:""}]}},{type:i.Group,columns:"12",fields:[{type:i.Text,isVisible:e=>fs(e,"data_rozhdeniya"),fieldRightMargin:"4",columns:"6",outlined:!1,name:"data_rozhdeniya",title:" "},{type:i.Text,isVisible:e=>fs(e,"data_trudoustrojstva"),fieldRightMargin:"4",columns:"6",outlined:!1,name:"data_trudoustrojstva",title:" "},{type:i.Text,features:["hasUsersViewPhoneAndEmailPermission"],isVisible:e=>fs(e,"email"),fieldRightMargin:"4",columns:"6",outlined:!1,name:"email",title:"Email",placeholder:"  email"},{type:i.Text,features:["hasUsersViewPhoneAndEmailPermission"],isVisible:e=>fs(e,"rabochij_telefon"),fieldRightMargin:"4",columns:"6",outlined:!1,name:"rabochij_telefon",title:" ",placeholder:" "}]}]}]}]},{type:i.Paper,features:["hasUsersViewPhoneAndEmailPermission"],isVisible:e=>fs(e,"lichnyj_nomer"),fieldBottomMargin:"1",fields:[{type:i.Typography,typoVariant:"h6",placeholder:" "},{type:i.Text,isVisible:e=>fs(e,"lichnyj_nomer"),columns:"6",outlined:!1,name:"lichnyj_nomer",title:" "}]},{type:i.Paper,isVisible:e=>fs(e,"ofis","user_role","filial","dolzhnost","otdel","status_sotrudnika","nachalnik_otdela"),fieldBottomMargin:"1",fields:[{type:i.Typography,typoVariant:"h6",placeholder:""},{type:i.Text,isVisible:e=>fs(e,"ofis"),columns:"6",outlined:!1,name:"ofis",title:""},{type:i.Combo,isVisible:e=>fs(e,"user_role"),columns:"6",outlined:!1,isInvalid:({user_role:e})=>e?null:"  ",itemList:async()=>{const e=await Dr.dictService.getUserRoles();return Object.keys(e)},tr:async e=>{const t=await Dr.dictService.getUserRoles();return L.get(t,e)||e},name:"user_role",title:""},{type:i.Text,isVisible:e=>fs(e,"filial"),columns:"6",outlined:!1,name:"filial",title:""},{type:i.Text,isVisible:e=>fs(e,"dolzhnost"),columns:"6",outlined:!1,name:"dolzhnost",title:""},{type:i.Text,isVisible:e=>fs(e,"otdel"),columns:"6",outlined:!1,name:"otdel",title:""},{type:i.Text,isVisible:e=>fs(e,"status_sotrudnika"),columns:"6",outlined:!1,name:"status_sotrudnika",title:" "},{type:i.Component,element:({nachalnik_otdela:e})=>ae("div",{children:ae(he,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",gap:1},children:e&&ae(Jt,{label:" "})})})}]}],Eu=[{type:ie.Link,action:"user-list-action",label:" "},{type:ie.Link,action:"user-list-action",label:"  "},{type:ie.Button,isDisabled:({payload:{permissions:e}})=>!e.hasUsersUpdatePermission,action:"user-edit-action",label:""}],Nu=[{id:"list",element:({payload:e})=>{const t=_t(Dr.userViewService.reloadSubject),{listProps:a}=vt(Dr.routerService.locationState,{fallback:Dr.errorService.handleGlobalError}),i=ks();return ae(Le,{children:ae(ft,{withSearch:!0,withSingleSort:!0,noInitialFilters:!0,fetchDebounce:so,title:"",filterLabel:"",reloadSubject:t,heightRequest:Vu,rowActions:Cu,actions:Au,filters:Fu,columns:Tu,handler:i,onRowAction:async(e,a)=>{"edit-action"===e&&Dr.routerService.push("/user_edit/".concat(a.id)),"remove-action"===e&&(await Dr.userViewService.remove(a.id),t.next())},onRowClick:e=>{Dr.routerService.push("/user_view/".concat(e.id))},selectionMode:gt.Multiple,slots:{FilterListSlot:sa},payload:e,...a})})},isActive:e=>Ur(["/user"],e),isAvailable:()=>!1},{id:"user",element:Em((()=>{const e=Vl("id");Dr.routerService.push("/user_edit/".concat(e,"/user"))})),isActive:e=>Ur(["/user_edit/:id"],e)},{id:"user",element:({payload:e,onChange:t,formState:a,data:i,beginSave:o})=>ae(Le,{children:[ae(me,{onAction:e=>{"user-list-action"===e&&Dr.routerService.push("/user"),"user-save-action"===e&&o()},items:Du,payload:a}),ae(Er,{}),ae(pu,{payload:e,mode:e.menuMode,children:ae(fe,{dirty:!0,handler:()=>i,fields:Bu,features:e.permissions,onChange:t})}),ae(Re,{})]}),isActive:e=>Ur(["/user_edit/:id/user"],e)},{id:"files",element:({formState:e,onChange:t,beginSave:a,data:i,payload:o})=>{const{handleLoadStart:l,handleLoadEnd:r}=de({history:Dr.routerService,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1)});return ae(Le,{children:[ae(me,{items:Su,onAction:e=>{"user-list-action"===e&&Dr.routerService.push("/user"),"user-save-action"===e&&a()},payload:e}),ae(Er,{}),ae(pu,{payload:o,mode:o.menuMode,children:[ae(ce,{sx:{p:1},children:ae(De,{accept:"*",multiple:!0,items:i,tr:async e=>await Dr.appwriteService.tryReadFileName(e)||e,fallback:Dr.errorService.handleGlobalError,onClick:async e=>{const t=await Dr.appwriteService.getFileURL(e),a=await Dr.appwriteService.readFileName(e);je(t,a)},onUpload:e=>Dr.appwriteService.uploadFile(e),onChange:async e=>{t(e)},onLoadStart:l,onLoadEnd:r})}),ae(Re,{})]})]})},isActive:e=>Ur(["/user_edit/:id/files"],e)},{id:"additional_info",element:({payload:e,onChange:t,formState:a,data:i,beginSave:o})=>ae(Le,{children:[ae(me,{onAction:e=>{"user-list-action"===e&&Dr.routerService.push("/user"),"user-save-action"===e&&o()},items:hu,payload:a}),ae(Er,{}),ae(pu,{payload:e,mode:e.menuMode,children:ae(fe,{dirty:!0,handler:()=>i,fields:yu,features:e.permissions,onChange:t})}),ae(Re,{})]}),isActive:e=>Ur(["/user_edit/:id/additional_info"],e)},{id:"features",element:({beginSave:e,data:t,formState:a,payload:i,onChange:o})=>ae(Le,{children:[ae(me,{items:ku,onAction:t=>{"user-list-action"===t&&Dr.routerService.push("/user"),"user-save-action"===t&&e()},payload:a}),ae(Er,{}),ae(pu,{payload:i,mode:i.menuMode,children:[ae(Qa,{expandAll:!0,handler:()=>t.reduce(((e,t)=>({...e,[t]:!0})),{}),features:$c,change:(e,t)=>{if(e&&!t){const t=Object.entries(e).filter((([e,t])=>!!t)).map((([e])=>e));o(t)}}}),ae(Re,{})]})]}),isActive:e=>Ur(["/user_edit/:id/features"],e)},{id:"user",element:Em((()=>{const e=Vl("id");Dr.routerService.push("/user_view/".concat(e,"/user"))})),isActive:e=>Ur(["/user_view/:id"],e)},{id:"user",element:({params:{id:e},payload:t,onChange:a,formState:i,data:o})=>{const l=$t(o),{pickData:r,render:n}=oa({fields:Bu,payload:t,features:t.permissions,outlinePaper:!0,handler:async()=>await Dr.userViewService.tryRead(e),fullScreen:!0,title:"",onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1),onSubmit:async t=>{let a=!0;try{t&&await Dr.userViewService.update(e,t)}catch(i){a=!1;const e=xr(i);return Dr.alertService.notify(e),!1}finally{return a}},submitLabel:""});return ae(Le,{children:[ae(me,{onAction:e=>{"user-list-action"===e&&Dr.routerService.push("/user"),"user-edit-action"===e&&r()},items:Eu,payload:i}),ae(Er,{}),ae(vu,{payload:t,mode:t.menuMode,children:ae(fe,{dirty:!0,readonly:!0,handler:()=>o,fields:Pu,features:t.permissions,onChange:a,payload:t,changeSubject:l})}),ae(Re,{}),n()]})},isActive:e=>Ur(["/user_view/:id/user"],e)},{id:"additional_info",element:({params:{id:e},payload:t,onChange:a,formState:i,data:o})=>{const l=$t(o),{pickData:r,render:n}=oa({fields:yu,payload:t,features:t.permissions,outlinePaper:!0,handler:async()=>await Dr.userViewService.tryRead(e),fullScreen:!0,title:"",onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1),onSubmit:async t=>{let a=!0;try{if(t){if(t.user_role){const e=new Set(t.user_features||[]);await Promise.all(t.user_role.map((async t=>{const a=await Dr.roleViewService.tryRead(t);if(!a)return;const{role_features:i}=a;i&&i.forEach((t=>e.add(t)))}))),t.user_features=[...e]}await Dr.userViewService.update(e,t)}}catch(i){a=!1;const e=xr(i);return Dr.alertService.notify(e),!1}finally{return a}},submitLabel:""});return ae(Le,{children:[ae(me,{onAction:e=>{"user-list-action"===e&&Dr.routerService.push("/user"),"user-edit-action"===e&&r()},items:gu,payload:i}),ae(Er,{}),ae(vu,{payload:t,mode:t.menuMode,children:ae(fe,{dirty:!0,readonly:!0,handler:()=>o,fields:fu,features:t.permissions,onChange:a,payload:t,changeSubject:l})}),ae(Re,{}),n()]})},isActive:e=>O(Ur(["/user_view/:id/additional_info"],e))},{id:"files",element:({params:{id:e},formState:t,onChange:a,data:i,payload:o})=>{const{render:l,pickFiles:r}=Zr({data:i,onSubmit:async t=>{await Dr.userViewService.update(e,{user_files:t})}});return ae(Le,{children:[ae(me,{items:zu,onAction:e=>{"user-list-action"===e&&Dr.routerService.push("/user"),"user-edit-action"===e&&r()},payload:t}),ae(Er,{}),ae(vu,{payload:o,mode:o.menuMode,children:[ae(ce,{sx:{p:1},children:ae(De,{accept:"*",multiple:!0,disabled:!0,items:i,tr:async e=>await Dr.appwriteService.tryReadFileName(e)||e,fallback:Dr.errorService.handleGlobalError,onClick:async e=>{const t=await Dr.appwriteService.getFileURL(e),a=await Dr.appwriteService.readFileName(e);je(t,a)},onUpload:e=>Dr.appwriteService.uploadFile(e),onChange:async e=>{a(e)}})}),ae(Re,{})]}),l()]})},isActive:e=>Ur(["/user_view/:id/files"],e)},{id:"features",element:({params:{id:e},data:t,formState:a,payload:i})=>{const o=$t(t),l=_t();se.useEffect((()=>o.subscribe((e=>{var t;const a=e.reduce(((e,t)=>({...e,[t]:!0})),{});$c.forEach((({children:e})=>e.forEach((({name:e})=>{a[e]||(a[e]=!1)})))),null==(t=i.features)||t.forEach((e=>{a[e]=!0})),l.next(a)}))),[]);const{render:r,pickData:n}=((e,{data:t,onSubmit:a,onChange:i,fullScreen:o,expandAll:l})=>{const{handleLoadStart:r,handleLoadEnd:n}=de({history:Dr.routerService,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1)});return ei({expandAll:l,features:e,handler:()=>t.reduce(((e,t)=>({...e,[t]:!0})),{}),fullScreen:o,fallback:Dr.errorService.handleGlobalError,onLoadStart:r,onLoadEnd:n,onSubmit:async(e,t)=>{if(e&&!t){const t=Object.entries(e).filter((([e,t])=>!!t)).map((([e])=>e));await(a&&a(t))}return!0},onChange:(e,t)=>{if(e&&!t){const t=Object.entries(e).filter((([e,t])=>!!t)).map((([e])=>e));i&&i(t)}},submitLabel:""})})($c,{expandAll:!0,data:t,fullScreen:!0,onSubmit:async t=>{await Dr.userViewService.update(e,{user_features:t})}});return ae(Le,{children:[ae(me,{items:wu,onAction:e=>{"user-list-action"===e&&Dr.routerService.push("/user"),"user-edit-action"===e&&n()},payload:a}),ae(Er,{}),ae(vu,{payload:i,mode:i.menuMode,children:[ae(Ue,{payload:e,children:async e=>{const{user_role:t}=await Dr.userViewService.read(e);if(!(null==t?void 0:t.length))return null;const{title:a}=await Dr.roleViewService.read(t[0]);return ae(ce,{sx:{width:"100%",p:1,pt:2,pb:2,mb:1},children:ae(le,{variant:"subtitle2",children:[" -   "," ",ae(ta,{href:"#",onClick:()=>Y("/settings/roles"),children:a})]})})}}),ae(Qa,{readonly:!0,expandAll:!0,handler:()=>i.features.reduce(((e,t)=>({...e,[t]:!0})),{}),changeSubject:l,features:$c}),ae(Re,{})]}),r()]})},isActive:e=>Ur(["/user_view/:id/features"],e)}],Uu=({id:e=""})=>{const t=async t=>{let a=!0;try{const a=L.get(t,"user")||{},i=L.get(t,"features")||[],o=L.get(t,"files")||[];L.set(a,"user_files",o),L.set(a,"user_features",i),await Dr.userViewService.update(e,a),Dr.alertService.notify(" ")}catch(i){a=!1;const e=xr(i);Dr.alertService.notify(e)}finally{return a}},a=_t();return se.useEffect((()=>Dr.userViewService.updateSubject.subscribe((([t,i])=>{e===t&&(a.next(["user",i]),a.next(["files",(null==i?void 0:i.user_files)||[]]),a.next(["features",(null==i?void 0:i.user_features)||[]]),a.next(["additional_info",i]))}))),[]),ae(ba,{state:async()=>[await Dr.userViewService.tryRead(e),await Dr.settingsViewService.getMasterDetailMode(),await Dr.permissionService.getPermissions(),await Dr.featureService.getFeaturesByUserId(e),await Dr.featureService.getAccessLevel()],reloadSubject:Dr.layoutService.reloadOutletSubject,fallback:Dr.errorService.handleGlobalError,children:async([i,o,l,r,n])=>ae(kt,{changeSubject:a,history:Dr.routerService,waitForChangesDelay:mo,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1),routes:Nu,params:{id:e},initialData:{user:i,files:(null==i?void 0:i.user_files)||[],features:(null==i?void 0:i.user_features)||[],additional_info:i},payload:()=>({menuMode:o,permissions:l,features:r,accessLevel:n}),onChange:(e,t,i)=>{var o,l;t||"user"===i&&(a.next(["files",(null==(o=e.user)?void 0:o.user_files)||[]]),a.next(["features",(null==(l=e.user)?void 0:l.user_features)||[]]))},onSubmit:t})})},Hu=[{path:"/error_page",element:()=>{const{classes:e}=Pc();return ae(Ya,{children:ae(he,{className:e.root,children:ae(Ga,{className:e.reveal,children:ae(ce,{className:e.container,children:ae(be,{direction:"column",gap:"15px",children:[ae(Rc,{}),ae("span",{children:"     .       "}),ae(mt,{variant:"contained",onClick:T,children:" "})]})})})})})}},{path:"/login_page",element:()=>ae(he,{sx:{position:"fixed",top:0,left:0,height:"100vh",width:"100vw",background:"whitesmoke",display:"flex",alignItems:"center",justifyContent:"center",zIndex:99999},children:ae(ce,{component:"form",sx:{p:2,marginTop:"-5vh",maxWidth:"325px",minWidth:"325px"},onSubmit:e=>(e.preventDefault(),!1),children:[ae(le,{variant:"h3",sx:{color:e=>e.palette.primary.main,mb:3,textAlign:"center",fontWeight:"bold"},children:"RealEstate"}),ae(he,{sx:{display:"flex",flexDirection:"column",gap:"15px"},children:[ae(xt,{required:!0,name:"email",fullWidth:!0,label:"Email",placeholder:"Email",helperText:"Email",type:"email"}),ae(xt,{required:!0,fullWidth:!0,name:"password",label:"",placeholder:"",helperText:"",type:"password"})]}),ae(he,{sx:{display:"flex",flexDirection:"row-reverse",mb:2},children:ae(ta,{href:"#",onClick:()=>Dr.routerService.push("/register_page"),children:""})}),ae(_e,{onClick:async({currentTarget:e})=>{await(async e=>{const t=new FormData(e),a=t.get("email"),i=t.get("password");if(!a)return void Dr.alertService.notify(" email");if(!i)return void Dr.alertService.notify(" ");await Dr.authService.login({email:a.toString(),password:i.toString()})&&Dr.routerService.push("/profile")})(e.closest("form"))},variant:"contained",type:"submit",fullWidth:!0,children:""})]})})},{path:"/register_page",element:()=>ae(he,{sx:{position:"fixed",top:0,left:0,height:"100vh",width:"100vw",background:"whitesmoke",display:"flex",alignItems:"center",justifyContent:"center",zIndex:99999},children:ae(ce,{component:"form",sx:{p:2,marginTop:"-5vh",maxWidth:"325px",minWidth:"325px"},onSubmit:e=>(e.preventDefault(),!1),children:[ae(le,{variant:"h3",sx:{color:e=>e.palette.primary.main,mb:3,textAlign:"center",fontWeight:"bold"},children:"RealEstate"}),ae(he,{sx:{display:"flex",flexDirection:"column",gap:"15px"},children:[ae(xt,{required:!0,name:"email",fullWidth:!0,label:"Email",placeholder:"Email",helperText:"Email",type:"email"}),ae(xt,{required:!0,fullWidth:!0,name:"password",label:"",placeholder:"",helperText:"",type:"password"}),ae(xt,{required:!0,fullWidth:!0,name:"confirm",label:" ",placeholder:" ",helperText:" ",type:"password"})]}),ae(he,{sx:{display:"flex",flexDirection:"row-reverse",mb:2},children:ae(ta,{href:"#",onClick:()=>Dr.routerService.push("/login_page"),children:""})}),ae(_e,{onClick:async({currentTarget:e})=>{await(async e=>{const t=new FormData(e),a=t.get("email"),i=t.get("password"),o=t.get("confirm");if(!a)return void Dr.alertService.notify(" email");if(!i)return void Dr.alertService.notify(" ");if(i!==o)return void Dr.alertService.notify("  ");await Dr.authService.register({email:a.toString(),password:i.toString()})&&Dr.routerService.push("/profile")})(e.closest("form"))},variant:"contained",type:"submit",fullWidth:!0,children:""})]})})},{path:"/inactive_page",element:()=>{const{classes:e}=Ec();return ae(Ya,{children:ae(he,{className:e.root,children:ae(Ga,{className:e.reveal,children:ae(ce,{className:e.container,children:ae(be,{direction:"column",gap:"15px",children:[ae(Rc,{}),ae("span",{children:"  .     "}),ae(mt,{variant:"contained",onClick:T,children:" "})]})})})})})}}],Ou=[{path:"/dashboard",sideMenu:"root.global.dashboard",element:()=>ae(ba,{state:async()=>[await Dr.settingsViewService.getMasterDetailMode(),await Dr.permissionService.getPermissions(),await Dr.featureService.getAccessLevel()],reloadSubject:Dr.layoutService.reloadOutletSubject,fallback:Dr.errorService.handleGlobalError,children:async([e,t,a])=>ae(kt,{history:Dr.routerService,routes:xc,payload:()=>({menuMode:e,permissions:t,accessLevel:a})})})},{path:"/apartment",sideMenu:"root.global.apartment",element:bd},{path:"/apartment_rent",sideMenu:"root.global.apartment.rent",element:bd},{path:"/apartment_sell",sideMenu:"root.global.apartment.sell",element:bd},{path:"/apartment_archive",sideMenu:"root.global.apartment.archive",element:bd},{path:"/apartment",sideMenu:"root.global.apartment",element:bd},{path:"/apartment/create",sideMenu:"root.global.apartment",element:bd},{path:"/apartment_edit/:id",sideMenu:"root.global.apartment",element:bd},{path:"/apartment_edit/:id/object",sideMenu:"root.global.apartment",element:bd},{path:"/apartment_edit/:id/owner_contact",sideMenu:"root.global.apartment",element:bd},{path:"/apartment_edit/:id/documents",sideMenu:"root.global.apartment",element:bd},{path:"/apartment_view/:id",sideMenu:"root.global.apartment",element:bd},{path:"/apartment_view/:id/object",sideMenu:"root.global.apartment",element:bd},{path:"/apartment_view/:id/owner_contact",sideMenu:"root.global.apartment",element:bd},{path:"/apartment_view/:id/documents",sideMenu:"root.global.apartment",element:bd},{path:"/apartment_view/:id/history",sideMenu:"root.global.apartment",element:bd},{path:"/apartment_view/:id/tasks",sideMenu:"root.global.apartment",element:bd},{path:"/apartment_view/:id/service_comment",sideMenu:"root.global.apartment",element:bd},{path:"/bid",sideMenu:"root.global.bid",element:vm},{path:"/bid_rent",sideMenu:"root.global.bid.rent",element:vm},{path:"/bid_sell",sideMenu:"root.global.bid.sell",element:vm},{path:"/bid_archive",sideMenu:"root.global.bid.archive",element:vm},{path:"/bid/create",sideMenu:"root.global.bid",element:vm},{path:"/bid_edit/create",sideMenu:"root.global.bid",element:vm},{path:"/bid_edit/create/parameter",sideMenu:"root.global.bid",element:vm},{path:"/bid_edit/create/documents",sideMenu:"root.global.bid",element:vm},{path:"/bid_edit/create/contact",sideMenu:"root.global.bid",element:vm},{path:"/bid_edit/:id",sideMenu:"root.global.bid",element:vm},{path:"/bid_edit/:id/parameter",sideMenu:"root.global.bid",element:vm},{path:"/bid_edit/:id/documents",sideMenu:"root.global.bid",element:vm},{path:"/bid_edit/:id/contact",sideMenu:"root.global.bid",element:vm},{path:"/bid_view/:id",sideMenu:"root.global.bid",element:vm},{path:"/bid_view/:id/parameter",sideMenu:"root.global.bid",element:vm},{path:"/bid_view/:id/history",sideMenu:"root.global.bid",element:vm},{path:"/bid_view/:id/documents",sideMenu:"root.global.bid",element:vm},{path:"/bid_view/:id/contact",sideMenu:"root.global.bid",element:vm},{path:"/bid_view/:id/tasks",sideMenu:"root.global.bid",element:vm},{path:"/bid_view/:id/service_comment",sideMenu:"root.global.bid",element:vm},{path:"/deal",sideMenu:"root.global.deal",element:()=>ae(ba,{state:async()=>[await qc(),await Dr.settingsViewService.getMasterDetailMode(),await Dr.permissionService.getPermissions(),await Dr.featureService.getAccessLevel()],fallback:Dr.errorService.handleGlobalError,children:async([e,t,a,i])=>ae(kt,{history:Dr.routerService,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1),routes:jc,params:{dealCardMap:e},payload:()=>({menuMode:t,permissions:a,accessLevel:i})})})},{path:"/task",sideMenu:"root.global.task",element:()=>ae(ba,{state:async()=>[await mu(),await Dr.settingsViewService.getMasterDetailMode(),await Dr.permissionService.getPermissions(),await Dr.featureService.getAccessLevel()],fallback:Dr.errorService.handleGlobalError,children:async([e,t,a,i])=>ae(kt,{history:Dr.routerService,onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1),routes:du,params:{dealCardMap:e},payload:()=>({menuMode:t,permissions:a,accessLevel:i})})})},{path:"/contact",sideMenu:"root.global.contact",element:Hm},{path:"/contact/create",sideMenu:"root.global.contact",element:Hm},{path:"/contact_edit/create",sideMenu:"root.global.contact",element:Hm},{path:"/contact_edit/:id",sideMenu:"root.global.contact",element:Hm},{path:"/contact_view/:id",sideMenu:"root.global.contact",element:Hm},{path:"/contact_view/:id/contact",sideMenu:"root.global.contact",element:Hm},{path:"/contact_view/:id/tasks",sideMenu:"root.global.contact",element:Hm},{path:"/contact_view/:id/history",sideMenu:"root.global.contact",element:Hm},{path:"/user",sideMenu:"root.global.user",element:Uu},{path:"/user_view/:id",sideMenu:"root.global.user",element:Uu},{path:"/user_view/:id/user",sideMenu:"root.global.user",element:Uu},{path:"/user_view/:id/files",sideMenu:"root.global.user",element:Uu},{path:"/user_view/:id/features",sideMenu:"root.global.user",element:Uu},{path:"/user_view/:id/additional_info",sideMenu:"root.global.user",element:Uu},{path:"/user_edit/:id",sideMenu:"root.global.user",element:Uu},{path:"/user_edit/:id/user",sideMenu:"root.global.user",element:Uu},{path:"/user_edit/:id/files",sideMenu:"root.global.user",element:Uu},{path:"/user_edit/:id/features",sideMenu:"root.global.user",element:Uu},{path:"/settings",sideMenu:"root.global.settings",element:Qc},{path:"/settings/common",sideMenu:"root.global.settings",element:Qc},{path:"/settings/roles",sideMenu:"root.global.settings",element:Qc}],Wu=[{path:"/",sideMenu:"root.global.user",element:Em((()=>{Dr.routerService.push("/dashboard")}))},...Ou,...Hu],$u=e=>{Cl(),console.log({path:e}),"root.global.settings.common"===e&&Dr.routerService.push("/settings/common"),"root.global.settings.roles"===e&&Dr.routerService.push("/settings/roles")},Gu=e=>{"root.global.dashboard"===e&&Dr.routerService.push("/dashboard"),"root.global.user"===e&&Dr.routerService.push("/user"),"root.global.settings"===e&&Dr.routerService.push("/settings"),"root.global.apartment"===e&&Dr.routerService.push("/apartment"),"root.global.apartment.rent"===e&&Dr.routerService.push("/apartment_rent"),"root.global.apartment.sell"===e&&Dr.routerService.push("/apartment_sell"),"root.global.apartment.archive"===e&&Dr.routerService.push("/apartment_archive"),"root.global.bid"===e&&Dr.routerService.push("/bid"),"root.global.bid.rent"===e&&Dr.routerService.push("/bid_rent"),"root.global.bid.sell"===e&&Dr.routerService.push("/bid_sell"),"root.global.bid.archive"===e&&Dr.routerService.push("/bid_archive"),"root.global.deal"===e&&Dr.routerService.push("/deal"),"root.global.task"===e&&Dr.routerService.push("/task"),"root.global.contact"===e&&Dr.routerService.push("/contact")},Yu=(()=>{let e=null,t=null;return()=>{const{pathname:a}=Dr.routerService.location;return e!==a&&(t=Me(Wu,Dr.routerService.location.pathname),e=a),t}})(),Ku={"Refresh manually":"","Create new row":"  ","Change sort order":"  ","Drop filters":" ",Filters:"",Search:"","Loading data":" ","Nothing found":" ","Not found":" ","No options":" ","Drag and drop a file here or click":" ",Choose:"",Deselect:"",Green:"",Skyblue:"",Yellow:"",Red:"",Submit:"",Date:"",Time:"",Loading:"",Required:"","The form contains unsaved changes. Continue?":"   . ?","The form contains invalid data. Continue?":"    . ?","Are you sure you want to delete this file?":" ,    ?",Confirmation:"",Forbidden:" ",Ok:"",Cancel:"",Remove:"",Actions:"",Save:"","Not chosen":" ","Continue?":"",Unset:" ","Select all":"","No tips":" ","Column configuration":" ","Loading...":"","Pick item":""};const Zu={"/login_page":{"Sign in":""},"/register_page":{"Sign in":""}},Xu=(()=>{let e=null,t={};return()=>{const{pathname:a}=Dr.routerService.location;if(e!==a){const i=Yu();t=Zu[(null==i?void 0:i.path)||"unknown"]||{},e=a}return t}})();function Ju(e){return Xu()[e]||function(e){return Ku[e]||e}(e)}const Qu=[()=>{document.querySelectorAll("input").forEach((e=>{e.placeholder&&(e.placeholder=Ju(e.placeholder))}))},()=>{document.querySelectorAll("textarea").forEach((e=>{e.placeholder&&(e.placeholder=Ju(e.placeholder))}))}];document.addEventListener("DOMContentLoaded",(()=>{const e=L.throttle(ai(Qu.map((e=>()=>{e()}))),1,{trailing:!0});new MutationObserver(e).observe(document.body,{childList:!0,subtree:!0})})),ii.install(Ku,Ju),Dr.routerService.listen((()=>{window.Translate.clear()})),window.self!==window.top&&je.override(((e,t)=>{var a;null==(a=window.top)||a.postMessage({type:"download-action",url:e,filename:t},"*")})),window.self!==window.top&&Y.override((e=>{e.startsWith("/")?Dr.routerService.push(e):window.open(e)})),window.getOlxToken=()=>{var e;return null==(e=window.top)||e.postMessage({type:"get-olx-token"},"*"),Q.create((e=>(window.addEventListener("message",e),()=>window.removeEventListener("message",e)))).filter((({data:e})=>"type"in e)).filter((({data:e})=>"get-olx-token"===e.type)).map((({data:e})=>e.result)).toPromise()};const ep=oi((({children:e})=>{const{current:t}=Dr.alertService;return ae(Le,{children:[!!t&&ae(li,{open:!0,anchorOrigin:{vertical:"bottom",horizontal:"center"},autoHideDuration:5e3,onClose:Dr.alertService.hideCurrent,sx:{zIndex:9999999},message:t.message},t.key),e]})})),tp=()=>ae(be,{width:"100%",minHeight:"48px",direction:"row",alignItems:"center",justifyContent:"space-between",children:[ae(le,{sx:{height:42,display:"flex",alignItems:"center",color:"#666",fontWeight:"bold",fontSize:14},variant:"caption",children:"Real Estate APP"}),ae(be,{direction:"row",alignItems:"center",children:[ae(ri,{sx:{fontSize:18,color:Dr.previewModeService.previewMode?"#c2c2c2":"#757575"}}),ae(bt,{checked:Dr.previewModeService.previewMode,onClick:Dr.previewModeService.togglePreviewMode,size:"small"}),ae(ni,{sx:{fontSize:18,color:Dr.previewModeService.previewMode?"#757575":"#c2c2c2"}})]})]}),ap=({loading:e})=>{const[t,a]=se.useState(0),{execute:i}=Ie((async()=>{const e=Dr.appwriteService.currentUser.$id,{length:t}=await Dr.notifyViewService.findAllUnreadByUserId(e);a(t)}),{onLoadStart:()=>Dr.layoutService.setAppbarLoader(!0),onLoadEnd:()=>Dr.layoutService.setAppbarLoader(!1),fallback:Dr.errorService.handleGlobalError});return se.useEffect((()=>Ce((()=>Dr.appwriteService.isAuthorized),(()=>{Dr.appwriteService.isAuthorized&&i()}))),[]),se.useEffect((()=>Dr.notifyViewService.reloadSubject.debounce(1e3).connect((()=>{Dr.appwriteService.isAuthorized&&i()}))),[]),ae(di,{badgeContent:t,color:"info",children:ae(si,{sx:{color:"white !important",opacity:e?.8:1}})})},ip=()=>ae(Ke,{sx:{width:384,height:"calc(100% - 96px)"}}),op=jr()((e=>({list:{pt:1,pb:1,"& > *":{paddingTop:0,paddingBottom:0,"& > *":{paddingTop:0,paddingBottom:0}}},listItemAccient:{background:oe(e.palette.getContrastText(e.palette.background.paper),.018)}}))),lp=()=>{const[e,t]=se.useState(),{classes:a}=op(),[i,o]=se.useState(0);return ae(Le,{children:[ae(na,{onClick:async({currentTarget:e})=>{Dr.appwriteService.isAuthorized&&(await Dr.notifyViewService.toggleReadAllByUserId(Dr.appwriteService.currentUser.$id),t(e))},onLoadStart:()=>o((e=>e+1)),onLoadEnd:()=>o((e=>e-1)),color:"inherit",sx:{ml:2},children:ae(ap,{loading:!!i})}),ae(xa,{open:!!e,anchorEl:e,onClose:()=>t(null),anchorOrigin:{vertical:"bottom",horizontal:"right"},children:ae(ge,{sx:{width:384,height:448},subheader:ae(Fa,{component:le,sx:{fontWeight:"bold"},children:""}),children:ae(Ue,{Loader:ip,children:async()=>{const e=Dr.appwriteService.currentUser.$id,t=await Dr.notifyViewService.findAllByUserId(e);return ae(Fe,{className:a.list,sx:{width:384,height:"calc(100% - 48px)"},children:t.sort((({$createdAt:e},{$createdAt:t})=>r(e).isBefore(t)?1:-1)).map(((e,t)=>ae(Ee,{className:we({[a.listItemAccient]:t%2==0}),disableGutters:!0,children:ae(ke,{onClick:()=>e.url&&Y(e.url),children:[ae(Ne,{children:ae(Oe,{children:ae(mi,{sx:{color:"white",mt:"-2px"}})})}),ae(xe,{primary:ae(We,{config:Jr,handler:()=>e.title}),secondary:r(e.$createdAt).format("HH:mm DD/MM/YYYY")}),ae(pt,{disableRipple:!0,children:ae(ci,{})})]})},e.$id)))})}})})})]})},rp=[{action:"logout-action",icon:ui,label:""}],np=[{id:"global",noHeader:!0,children:[{id:"dashboard",label:"",icon:pi},{id:"apartment",label:" ",icon:yi,lifted:!0,options:[{id:"rent",icon:hi,label:""},{id:"sell",icon:bi,label:""},{id:"archive",icon:_i,label:""}]},{id:"bid",label:"",icon:vi,lifted:!0,options:[{id:"rent",icon:fi,label:""},{id:"sell",icon:gi,label:""},{id:"archive",icon:ki,label:""}]},{id:"deal",label:"",icon:wi},{id:"task",label:"",icon:Si},{id:"contact",label:"",icon:zi},{id:"user",label:"",icon:xi},{id:"settings",isVisible:async()=>!!(await Dr.permissionService.getPermissions()).hasSettingsEditPermission,label:"",icon:Fi,tabs:[{id:"common",isActive:()=>Ur(["/settings","/settings/common"]),label:" "},{id:"roles",isActive:()=>Ur(["/settings","/settings/roles"]),isDisabled:async()=>!(await Dr.permissionService.getPermissions()).hasUsersAccessLevelsPermission,label:" "}]}]}],sp=()=>ae(he,{sx:{position:"fixed",top:0,left:0,right:0,bottom:0,height:"100vh",width:"100vw",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,background:e=>e.palette.background.paper},children:ae(Vi,{})}),dp=()=>ae(Le,{}),mp=v((async()=>{await Ii.prefetch(!0)})),cp=()=>{Dr.layoutService.setAppbarLoader(!0)},up=()=>{Dr.layoutService.setAppbarLoader(!1)},pp=async e=>{"logout-action"===e&&await Dr.authService.logout()},yp=oi((()=>ae(Ee,{children:ae(xe,{primary:Dr.appwriteService.currentUser.email,secondary:Dr.appwriteService.currentUser.$id})}))),hp=oi((()=>ae(he,{sx:{display:{xs:"none",md:"flex"}},children:[ae(Qe,{condition:async()=>(await Dr.permissionService.getPermissions()).hasBidCreatePermission,payload:Dr.appwriteService.isAuthorized,children:ae(mt,{sx:{mr:1},variant:"contained",size:"small",color:"info",onClick:()=>Dr.routerService.push("/bid/create"),children:" "})}),ae(Qe,{condition:async()=>(await Dr.permissionService.getPermissions()).hasApartmentCreatePermission,payload:Dr.appwriteService.isAuthorized,children:ae(mt,{variant:"contained",size:"small",color:"info",onClick:()=>Dr.routerService.push("/apartment/create"),children:" "})}),ae(lp,{})]}))),bp=()=>{const[e,t]=se.useState(Yu()),[a,i]=se.useState(Dr.routerService.location.pathname),[o,l]=se.useState(Dr.layoutService.hasAppbarLoader),[r,n]=se.useState(Dr.layoutService.hasModalLoader),s=se.useMemo((()=>Ur(Hu.map((({path:e})=>e)))),[a]);return se.useEffect((()=>Ce((()=>Dr.routerService.location.pathname),(()=>{t(Yu())}))),[]),se.useEffect((()=>Ti((()=>{i(Dr.routerService.location.pathname)}),{delay:10})),[]),se.useEffect((()=>Ti((()=>{l(Dr.layoutService.hasAppbarLoader)}),{delay:10})),[]),se.useEffect((()=>Ti((()=>{n(Dr.layoutService.hasModalLoader)}))),[]),ae(Le,{children:[ae(Ai,{fixedHeader:!0,noAppName:!0,noSearch:!0,noContent:s,appName:no,deps:[a],activeOptionPath:(null==e?void 0:e.sideMenu)||"",loading:o,options:np,actions:rp,onOptionClick:Gu,onOptionGroupClick:Gu,onTabChange:$u,onLoadStart:cp,onLoadEnd:up,onAction:pp,BeforeSearch:tp,onInit:mp,BeforeMenuContent:yp,BeforeActionMenu:hp,children:ae(Ci,{Loader:dp,history:Dr.routerService,items:Wu,fallback:Dr.errorService.handleGlobalError,onLoadStart:cp,onLoadEnd:up,onInit:mp})}),r&&ae(sp,{})]})},_p=ae(Ei,{fontSize:"small"}),vp=ae(Ni,{fontSize:"small"}),fp=[],gp=Ui({palette:{mode:"light",primary:{main:"#1f497a"},secondary:{main:"#1f497a"},text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)"},background:{default:"#e9e9e9",paper:"#fff"}},components:{MuiAppBar:{styleOverrides:{root:{background:"#132e55"}}}}}),kp=document.getElementById("root"),wp=Hi({key:"mui",prepend:!0}),Sp=Hi({key:"tss"});Oi("bgcolor-red","background: rgb(255, 229, 229); color: rgb(255, 0, 0);"),Oi("bgcolor-green","background: rgb(240, 246, 236); color: rgb(112, 173, 71);"),Oi("text-spacer","display: inline-block; padding: 10px; visibility: hidden;"),Oi("text-underline","display: inline-block; text-decoration: underline;"),Oi("blank-link","display: inline-block; text-decoration: underline;",{onClick:e=>{const t=e.currentTarget.getAttribute("href");t&&Y(t)}});const zp=ae(Qi,{history:Dr.routerService,onError:Dr.errorService.handleGlobalError,children:ae(Wi,{value:wp,children:ae($i,{value:Sp,children:ae(Gi,{theme:gp,children:ae(Yi,{dateAdapter:Ki,children:ae(Nr,{children:ae(Zi,{Combo:({value:e,disabled:t,readonly:a,description:i="",placeholder:o="",outlined:l=!0,itemList:r=[],virtualListBox:n,watchItemList:s,labelShrink:d,noDeselect:m,freeSolo:c,title:u="",dirty:p,invalid:y,tr:h=(e=>e.toString()),onChange:b})=>{const{object:_}=Li(),v=Mi(),[f,g]=se.useState((()=>({options:[],labels:{}}))),k=se.useRef(!1),w=Bi([f],10),S=Nt(f.labels),z=se.useMemo((()=>{if("string"==typeof e)return e;const[t=null]=Object.values(e||{});return t}),[e]),{fallback:x}=Di(),{loading:F,execute:T}=Ie((async e=>{const t={};r=ji(r)||[];const a=[...new Set(Object.values("function"==typeof r?await Promise.resolve(r(e,v)):r))];await Promise.all(a.map((async a=>t[a]=await Promise.resolve(h(a,e,v))))),c&&z&&!a.includes(z)&&a.push(z),g({labels:t,options:a}),k.current=!0,await w()}),{fallback:x}),A=(e=>Object.values(e||{}).sort(((e,t)=>t.localeCompare(e))).join("-"))(z),C=se.useRef(null),V=se.useRef(!0);se.useEffect((()=>{if(!V.current){if(C.current===_)return;if(!s)return}C.current=_,V.current=!1,T(_)}),[A,t,p,y,_,a]);const I=(e,t)=>a=>ae(xt,{...a,sx:{...!l&&{position:"relative",mt:1,"& .MuiFormHelperText-root":{position:"absolute",top:"100%"}}},variant:l?"outlined":"standard",placeholder:e?void 0:o,label:u,helperText:p&&y||i,error:p&&null!==y,InputProps:{...a.InputProps,readOnly:t,endAdornment:ae(Le,{children:[e?ae(Pi,{color:"inherit",size:20}):null,a.InputProps.endAdornment]})},InputLabelProps:{...a.InputLabelProps,...d&&{shrink:!0}}}),L=(e,t,a)=>{const{current:i}=S;return ae("li",{...e,children:[ae(ze,{icon:_p,checkedIcon:vp,style:{marginRight:8},checked:a.selected}),c?t:i[t]||"".concat(t," (unknown)")]})},M=e=>{const{current:t}=S;return c?e:t[e]||"".concat(e," (unknown)")};return F||!k.current?ae(Ri,{disableClearable:m,disabled:!0,loading:!0,value:null,options:fp,onChange:()=>null,freeSolo:c,ListboxComponent:n?qi:void 0,getOptionLabel:M,renderInput:I(!0,!0),renderOption:L}):ae(Ri,{disableClearable:m,loading:F,value:z||null,onChange:({},e)=>{var t;b((t=e)?[t]:null)},getOptionLabel:M,freeSolo:c,options:f.options,disabled:t,readOnly:a,ListboxComponent:n?qi:void 0,renderInput:I(!1,a),renderOption:L})},children:ae(Xi,{FilterListSlot:Ra,children:ae(Ji,{children:ae(ep,{children:ae(bp,{})})})})})})})})})})}),xp=eo(kp);to.setValue({WITH_DIRTY_CLICK_LISTENER:!0,WITH_MOBILE_READONLY_FALLBACK:!0,WITH_WAIT_FOR_MOVE_LISTENER:!0,WITH_WAIT_FOR_TOUCH_LISTENER:!0,WITH_DISMOUNT_LISTENER:!0,WITH_SYNC_COMPUTE:!0,CUSTOM_FIELD_DEBOUNCE:800});(async()=>{for(;!window.Translate;)A(500);xp.render(zp)})();export{a as __vite_legacy_guard};
