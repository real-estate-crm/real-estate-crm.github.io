var e,t=Object.defineProperty,a=(e,a,i)=>(((e,a,i)=>{a in e?t(e,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[a]=i})(e,"symbol"!=typeof a?a+"":a,i),i);function i(){import.meta.url,import("_").catch((()=>1))}import{g as o,i as l,s as r,d as n,l as s,u as d,a as c,r as m,m as u,v as p,b as y,c as h,w as b,p as v,e as _,Q as g,h as f,f as k,I as w,j as S,W as z,o as x,k as A,A as T,D as F,F as C,S as V,n as L,C as I,J as M,Z as B,$ as D,t as R,U as j,q,x as P,y as E,z as N,B as O,E as H,G as U,H as W,K as $,N as G,L as Y,M as K,O as X,R as J,P as Z,T as Q,V as ee,X as te,Y as ae,_ as ie,a0 as oe,a1 as le,a2 as re,a3 as ne,a4 as se,a5 as de,a6 as ce,a7 as me,a8 as ue,a9 as pe,aa as ye,ab as he,ac as be,ad as ve,ae as _e,af as ge,ag as fe,ah as ke,ai as we,aj as Se,ak as ze,al as xe,am as Ae,an as Te,ao as Fe,ap as Ce,aq as Ve,ar as Le,as as Ie,at as Me,au as Be,av as De,aw as Re,ax as je,ay as qe,az as Pe,aA as Ee,aB as Ne,aC as Oe,aD as He,aE as Ue,aF as We,aG as $e,aH as Ge,aI as Ye,aJ as Ke,aK as Xe,aL as Je,aM as Ze,aN as Qe,aO as et,aP as tt,aQ as at,aR as it,aS as ot,aT as lt,aU as rt,aV as nt,aW as st,aX as dt,aY as ct,aZ as mt,a_ as ut,a$ as pt,b0 as yt,b1 as ht,b2 as bt,b3 as vt,b4 as _t,b5 as gt,b6 as ft,b7 as kt,b8 as wt,b9 as St,ba as zt,bb as xt,bc as At,bd as Tt,be as Ft,bf as Ct,bg as Vt,bh as Lt,bi as It,bj as Mt,bk as Bt,bl as Dt,bm as Rt,bn as jt,bo as qt,bp as Pt,bq as Et,br as Nt,bs as Ot,bt as Ht,bu as Ut,bv as Wt,bw as $t,bx as Gt,by as Yt,bz as Kt,bA as Xt,bB as Jt,bC as Zt,bD as Qt,bE as ea,bF as ta,bG as aa,bH as ia,bI as oa,bJ as la,bK as ra,bL as na,bM as sa,bN as da,bO as ca,bP as ma,bQ as ua,bR as pa,bS as ya,bT as ha,bU as ba,bV as va,bW as _a,bX as ga,bY as fa,bZ as ka,b_ as wa,b$ as Sa,c0 as za,c1 as xa,c2 as Aa,c3 as Ta,c4 as Fa,c5 as Ca,c6 as Va,c7 as La,c8 as Ia,c9 as Ma,ca as Ba,cb as Da,cc as Ra,cd as ja,ce as qa,cf as Pa,cg as Ea,ch as Na,ci as Oa,cj as Ha,ck as Ua,cl as Wa,cm as $a,cn as Ga,co as Ya,cp as Ka,cq as Xa,cr as Ja,cs as Za,ct as Qa,cu as ei,cv as ti,cw as ai,cx as ii,cy as oi,cz as li,cA as ri,cB as ni,cC as si,cD as di,cE as ci,cF as mi,cG as ui,cH as pi,cI as yi,cJ as hi,cK as bi,cL as vi,cM as _i,cN as gi,cO as fi,cP as ki,cQ as wi,cR as Si,cS as zi,cT as xi,cU as Ai,cV as Ti,cW as Fi,cX as Ci,cY as Vi,cZ as Li,c_ as Ii,c$ as Mi,d0 as Bi,d1 as Di,d2 as Ri,d3 as ji,d4 as qi,d5 as Pi,d6 as Ei,d7 as Ni,d8 as Oi,d9 as Hi,da as Ui,db as Wi,dc as $i,dd as Gi,de as Yi,df as Ki,dg as Xi,dh as Ji,di as Zi,dj as Qi,dk as eo,dl as to,dm as ao,dn as io,dp as oo,dq as lo,dr as ro,ds as no,dt as so,du as co,dv as mo,dw as uo,dx as po,dy as yo,dz as ho,dA as bo,dB as vo,dC as _o,dD as go,dE as fo,dF as ko,dG as wo,dH as So,dI as zo,dJ as xo,dK as Ao,dL as To,dM as Fo,dN as Co,dO as Vo,dP as Lo,dQ as Io,dR as Mo,dS as Bo,dT as Do,dU as Ro,dV as jo,dW as qo}from"./vendor-c48e4e6b.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const Po=(e=[])=>{const t=[],a=(e=[])=>e.forEach((e=>{const i=e.fields||[],o=e.child?[e.child]:[];a([...i,...o]),t.push(e)}));return a(e),t},Eo=e=>Po(e).filter((({name:e})=>e)).map((({name:e,type:t})=>({name:e,type:t}))).reduce(((e,{name:t,type:a})=>e.some((e=>{const i=e.name===t;return i&&e.type!=a&&console.warn("CONFLICT name=".concat(t," type1=").concat(e.type.toString()," type2=").concat(a.toString())),i}))?e:[...e,{name:t,type:a}]),[]);window.mapSchema=(e,{textFieldSize:t=96,itemFieldSize:a=48,comboFieldSize:i=48,dateFieldSize:l=12,timeFieldSize:r=12}={})=>Eo(e).map((({type:e,name:n})=>e===o.Items?{key:n,type:"string",status:"available",required:!1,array:!0,size:a,default:null}:e===o.Combo?{key:n,type:"string",status:"available",required:!1,array:!0,size:i,default:null}:e===o.Time?{key:n,type:"string",status:"available",required:!1,array:!1,size:r,default:null}:e===o.Radio?{key:n,type:"string",status:"available",required:!1,array:!1,size:radioFieldSize,default:null}:e===o.Date?{key:n,type:"string",status:"available",required:!1,array:!1,size:l,default:null}:e===o.Checkbox||e===o.Switch?{key:n,type:"boolean",status:"available",required:!1,array:!1,default:null}:(e===o.Component&&console.warn("Field name=".concat(n," is a component field. By default we are using nvarchar[").concat(t,"]. Double check manually for an array field")),{key:n,type:"string",status:"available",required:!1,array:!1,size:t,default:null}))).map((e=>JSON.stringify(e,null,2))).join(",\n"),window.mapFields=Eo,window.mapTypes=e=>Eo(e).map((({name:e,type:t})=>'"'.concat(e,'": ').concat(t===o.Combo?"string[] | null":t===o.Text?"string":t===o.Items?"string[] | null":t===o.Date||t===o.Radio||t===o.Complete||t===o.Time?"string":t===o.Checkbox||t===o.Switch?"boolean":(console.warn("UNKNOWN TYPE name=".concat(e," type=").concat(t.toString())),"string"),";"))).join("\n"),window.deepFlat=Po,"ResizeObserver"in window||(window.ResizeObserver=l),r.polyfill(),n.extend(s),n.extend(d),n.extend(c),n.locale(m);class No{constructor(){a(this,"_alerts",[]),a(this,"hideCurrent",(()=>{this._alerts.length>0&&this._alerts.shift()})),a(this,"notify",(e=>{this.hideCurrent(),this._alerts.push({key:p(),message:e})})),u(this)}get current(){return this._alerts.length?this._alerts[0]:null}}const Oo={projectId:"64b53d0c41fcf5093b12",projectName:"RealEstateCRM",databases:[{$id:"64c4de8e7b30179809ef",name:"DATABASE",$createdAt:"2023-11-09T07:57:39.173+00:00",$updatedAt:"2023-11-09T07:57:39.173+00:00",enabled:!0}],collections:[{$id:"64c4fb401e0a490e44bf",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"USER",enabled:!0,documentSecurity:!1,attributes:[{key:"telegram",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"user_features",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"user_role",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"status_sotrudnika",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"user_files",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"email",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"avatar",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"active",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"first_name",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"middle_name",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"hobbi",type:"string",status:"available",error:"",required:!1,array:!1,size:256,default:null},{key:"nachalnik_otdela",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_metadata",type:"string",status:"available",error:"",required:!1,array:!1,size:1024,default:null},{key:"phone",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"adres_prozhivaniya",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"last_name",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"instagram",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"index",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:-1},{key:"o_sebe",type:"string",status:"available",error:"",required:!1,array:!1,size:256,default:null},{key:"fejsbuk",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"dolzhnost",type:"string",status:"available",error:"",required:!1,array:!1,size:20,default:null},{key:"otdel",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"data_priema_rezyume",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"nachalo_opyta_raboty",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"system_is_remove",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"prichina_uvolneniya",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"data-vydachi_pasporta",type:"string",status:"available",error:"",required:!1,array:!1,size:20,default:null},{key:"data_trudoustrojstva",type:"string",status:"available",error:"",required:!1,array:!1,size:10,default:null},{key:"deti",type:"string",status:"available",error:"",required:!1,array:!1,size:10,default:null},{key:"semejnoe_polozhenie",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kem_vydan",type:"string",status:"available",error:"",required:!1,array:!1,size:25,default:null},{key:"vatsap",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"adres_propiski",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"filial",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"zum",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"data_rozhdeniya",type:"string",status:"available",error:"",required:!1,array:!1,size:20,default:null},{key:"lichnyj_nomer",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"sertifikat",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"v_kontakte",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"seriya-i-nomer_pasporta",type:"string",status:"available",error:"",required:!1,array:!1,size:30,default:null},{key:"pol",type:"string",status:"available",error:"",required:!1,array:!1,size:18,default:null},{key:"ofis",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rabochij_telefon",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"data_uvolneniya",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null}],indexes:[{key:"system_metadata",type:"fulltext",status:"available",error:"",attributes:["system_metadata"],orders:["ASC"]},{key:"email1-phone1",type:"fulltext",status:"available",error:"",attributes:["email","phone"],orders:["ASC","ASC"]},{key:"phone1",type:"fulltext",status:"available",error:"",attributes:["phone"],orders:["ASC"]},{key:"email1",type:"fulltext",status:"available",error:"",attributes:["email"],orders:["ASC"]}]},{$id:"64c4fb9158c913d9036e",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"SETTINGS",enabled:!0,documentSecurity:!1,attributes:[{key:"telegram_channel_3",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agency_enabled_1",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_channel_1",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agency_2",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agent_nickname_2",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agent_nickname_4",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_channel_enabled_4",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_agency_3",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agent_enabled_1",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_channel_4",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agent_3",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_token_5",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_channel_2",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agency_nickname_1",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agency_enabled_3",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_agency_enabled_2",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"watermark_file_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agency_1",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_token_2",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agent_nickname_1",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agency_5",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_token_3",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agency_nickname_4",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agency_nickname_3",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agency_nickname_2",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_token_1",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_channel_enabled_2",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_token_4",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agency_4",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agent_2",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_channel_5",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agency_enabled_5",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_channel_enabled_1",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_agency_enabled_4",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_agency_nickname_5",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"usd_eur",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"usd_uzs",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_channel_enabled_5",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_link_enabled_1",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"instagram_link_1",type:"string",status:"available",error:"",required:!1,array:!1,size:128,default:null},{key:"telegram_agent_nickname_3",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agent_enabled_3",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_agent_enabled_5",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"masterdetail_mode",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"telegram_agent_5",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agent_4",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"facebook_link_enabled_1",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"facebook_link_1",type:"string",status:"available",error:"",required:!1,array:!1,size:128,default:null},{key:"telegram_agent_nickname_5",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agent_1",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_link_1",type:"string",status:"available",error:"",required:!1,array:!1,size:128,default:null},{key:"telegram_channel_enabled_3",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"youtube_link_1",type:"string",status:"available",error:"",required:!1,array:!1,size:128,default:null},{key:"youtube_link_enabled_1",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"telegram_agent_enabled_2",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"logo_file_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"telegram_agent_enabled_4",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"instagram_link_enabled_1",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null}],indexes:[]},{$id:"64d5f3fb13b5a40c0d1d",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"FILES",enabled:!0,documentSecurity:!1,attributes:[{key:"name",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null}],indexes:[]},{$id:"64d4a34e613b8f723d6f",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"CONTACT",enabled:!0,documentSecurity:!1,attributes:[{key:"contact_phones",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"system_created_by",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_metadata",type:"string",status:"available",error:"",required:!1,array:!1,size:1024,default:null},{key:"system_only_for_owner",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"yuridicheskij_adres",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"osnovanie-deyatelnosti-dannogo_licza",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kem_vydan",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"data-vydachi_pasporta",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"status_klienta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rekvizity",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"inn",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kontakt",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kadastrovyj-nomer_zemli",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"contact_names",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"naimenovanie_organizaczii",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"email",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_allowance",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"kadastrovyj-nomer_obekta",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"data-sozdaniya_klienta",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"fio",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"pol",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"dolzhnost_rukovoditelya",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_access_level",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"seriya-i-nomer_pasporta",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"tip_klienta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sertifikat_kompanii",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"istochnik",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"telefon",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"fakticheskij_adres",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"data_rozhdeniya",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"loyalnost_klienta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"contact_files",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"pinfl",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"adres_registraczii",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"index",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:-1}],indexes:[{key:"fio-telefon",type:"fulltext",status:"available",error:"",attributes:["fio","telefon"],orders:["ASC","ASC"]},{key:"fio",type:"fulltext",status:"available",error:"",attributes:["fio"],orders:["ASC"]},{key:"telefon",type:"fulltext",status:"available",error:"",attributes:["telefon"],orders:["ASC"]},{key:"system_metadata",type:"fulltext",status:"available",error:"",attributes:["system_metadata"],orders:["ASC"]}]},{$id:"64db49022640a0d53252",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"DEAL",enabled:!0,documentSecurity:!1,attributes:[{key:"status",type:"string",status:"available",error:"",required:!0,array:!1,size:48,default:null},{key:"telefon",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"price",type:"string",status:"available",error:"",required:!1,array:!0,size:128,default:null},{key:"user_id",type:"string",status:"available",error:"",required:!0,array:!1,size:96,default:null},{key:"index",type:"integer",status:"available",error:"",required:!0,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"apartment_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"fio",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"contact_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"target_apartment_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"bid_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"target_bid_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"tip_klienta",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"price_unit",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"type",type:"string",status:"available",error:"",required:!0,array:!1,size:48,default:null}],indexes:[{key:"apartment",type:"key",status:"available",error:"",attributes:["apartment_id"],orders:["ASC"]},{key:"target_bid_status",type:"key",status:"available",error:"",attributes:["target_bid_id","status"],orders:["ASC","ASC"]},{key:"bid",type:"key",status:"available",error:"",attributes:["bid_id"],orders:["ASC"]},{key:"contact",type:"key",status:"available",error:"",attributes:["contact_id"],orders:["ASC"]},{key:"target_apartment_status",type:"key",status:"available",error:"",attributes:["target_apartment_id","status"],orders:["ASC","ASC"]}]},{$id:"64ff0d1a1eec52961ec4",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"DEAL_HISTORY",enabled:!0,documentSecurity:!1,attributes:[{key:"deal_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"comment",type:"string",status:"available",error:"",required:!1,array:!1,size:512,default:null},{key:"contact_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"type",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"user_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"payload",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"apartment_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"bid_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null}],indexes:[{key:"bid_type",type:"key",status:"available",error:"",attributes:["bid_id","type"],orders:["ASC","ASC"]},{key:"apartment",type:"key",status:"available",error:"",attributes:["apartment_id"],orders:["ASC"]},{key:"bid",type:"key",status:"available",error:"",attributes:["bid_id"],orders:["ASC"]},{key:"apartment_type",type:"key",status:"available",error:"",attributes:["apartment_id","type"],orders:["ASC","ASC"]},{key:"contact",type:"key",status:"available",error:"",attributes:["contact_id"],orders:["ASC"]}]},{$id:"6509b9124a8ff89af189",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"SERVICE_COMMENT",enabled:!0,documentSecurity:!1,attributes:[{key:"comment",type:"string",status:"available",error:"",required:!1,array:!1,size:2048,default:null},{key:"contact_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"bid_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"file_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"user_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"apartment_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null}],indexes:[{key:"bid",type:"key",status:"available",error:"",attributes:["bid_id"],orders:["ASC"]},{key:"contact",type:"key",status:"available",error:"",attributes:["contact_id"],orders:["ASC"]},{key:"apartment",type:"key",status:"available",error:"",attributes:["apartment_id"],orders:["ASC"]}]},{$id:"650af9b005b11d0b21a4",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"ROLES",enabled:!0,documentSecurity:!1,attributes:[{key:"title",type:"string",status:"available",error:"",required:!1,array:!1,size:128,default:null},{key:"comment",type:"string",status:"available",error:"",required:!1,array:!1,size:2048,default:null},{key:"role_features",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null}],indexes:[]},{$id:"651a9e22bab7ca1094fa",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"NOTIFY",enabled:!0,documentSecurity:!1,attributes:[{key:"title",type:"string",status:"available",error:"",required:!1,array:!1,size:512,default:null},{key:"url",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"user_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"is_read",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null}],indexes:[{key:"user_read",type:"key",status:"available",error:"",attributes:["user_id","is_read"],orders:["ASC","ASC"]},{key:"user",type:"key",status:"available",error:"",attributes:["user_id"],orders:["ASC"]}]},{$id:"651bcf6238a18a8fd2f2",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"TASK",enabled:!0,documentSecurity:!1,attributes:[{key:"type",type:"string",status:"available",error:"",required:!1,array:!1,size:48,default:null},{key:"time_stamp",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"moment_stamp",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"to_user_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"contact_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"from_user_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"index",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"title",type:"string",status:"available",error:"",required:!1,array:!1,size:512,default:null},{key:"is_meet",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"to_user_fio",type:"string",status:"available",error:"",required:!1,array:!1,size:128,default:null},{key:"is_complete",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"contact_fio",type:"string",status:"available",error:"",required:!1,array:!1,size:128,default:null},{key:"from_user_fio",type:"string",status:"available",error:"",required:!1,array:!1,size:128,default:null},{key:"is_call",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null}],indexes:[{key:"type",type:"key",status:"available",error:"",attributes:["type"],orders:["ASC"]},{key:"complete",type:"key",status:"available",error:"",attributes:["is_complete"],orders:["ASC"]},{key:"moment_stamp",type:"key",status:"available",error:"",attributes:["moment_stamp"],orders:["ASC"]},{key:"to_user",type:"key",status:"available",error:"",attributes:["to_user_id"],orders:["ASC"]},{key:"contact",type:"key",status:"available",error:"",attributes:["contact_id"],orders:["ASC"]}]},{$id:"651be76b0bfd3092408e",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"TASK_HISTORY",enabled:!0,documentSecurity:!1,attributes:[{key:"task_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"comment",type:"string",status:"available",error:"",required:!1,array:!1,size:1024,default:null},{key:"user_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"contact_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null}],indexes:[{key:"contact",type:"key",status:"available",error:"",attributes:["contact_id"],orders:["ASC"]},{key:"task",type:"key",status:"available",error:"",attributes:["task_id"],orders:["ASC"]},{key:"user",type:"key",status:"available",error:"",attributes:["user_id"],orders:["ASC"]}]},{$id:"65367cf06601589d6b21",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"ADVERTISING",enabled:!0,documentSecurity:!1,attributes:[{key:"apartment_images",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"kolichestvo_sotok",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"tip_nedvizhimosti",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"nomer_agenstva",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"advertising_images",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"zagolovok_dlya_reklamy",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"mestopolozhenie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"index",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"nazvanie_zhk",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_doma",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"bassejn",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sostoyanie_remonta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"primechanie",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"raspolozhenie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"etazhnost",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"nomer_agenta",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"sostoyanie_remonta-kvartiry",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"apartment_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_created_by",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"naznachenie-obekta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"naznachenie-obekta-zemlya_uchastok",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"podkategoriya_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"apartment_index",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"rajon",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sostoyanie-obekta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"etazh",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"orientir",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ulicza",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kolichestvo_komnat",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kategoriya_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"metro",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kolichestvo_spalen",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"vid_liczenzii",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"naznachenie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"obshhaya_ploshhad",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null}],indexes:[]},{$id:"64d4a5782854ff66e9a1",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"APARTMENT",enabled:!0,documentSecurity:!1,attributes:[{key:"sanuzel_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"balkon_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"raspolozhenie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"orientir",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"terrasa",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"sistema_kondiczionirovaniya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"etazhnost",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"etazh",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_gostevogo_doma",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kanalizacziya_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_sanuzla",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"mestopolozhenie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_balkona",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"uglovoj",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"voda_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rajon",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"strana",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sistema-kondiczionirovaniya_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kolichestvo_komnat",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kolichestvo_spalen",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_doma",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"bassejn",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"tip_stroeniya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"raspolozhenie_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kanalizacziya_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sistema-otopleniya_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"nazvanie_zhk",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"podezd_nomer",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sostoyanie_remonta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mashina_mesto",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"naznachenie-obekta-zemlya_uchastok",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"elektrichestvo",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"tip_zemli_uchastka",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sostoyanie-obekta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sostoyanie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"czokol",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"vysota_potolkov",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"mebel",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"parkovka_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sistema-otopleniya_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"god_postrojki",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"naznachenie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"zhd_vetka",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"contact_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_kuhni",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"voda_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"zagolovok",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sistema-kondiczionirovaniya_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"metro",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sanuzel_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"vid_iz_okna",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_holla",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sostoyanie-remonta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"gaz_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rasstoyanie_do_goroda",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"lift_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"elektrichestvo_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"balkon",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sanuzel",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"arenda",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mebel_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"lift_kommercziya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sostoyanie_remonta-kvartiry",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sostoyanie_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"podkategoriya_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"energonositel_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sistema-otopleniya_kvartiry",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kanalizacziya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mebel_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rasstoyanie_do_metro",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"parkovka",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"lift_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"gorod",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"oblast",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"podezdnye_puti",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"torecz",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"nomer_kvartiry",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"gaz_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"istochnik",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sobstvennoe_obsluzhivayushhee_tszh",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"sistema_otopleniya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"balkon_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"garazh",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"poleznaya_ploshhad",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"elektrichestvo_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kod_domofona",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"vid_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"tip_planirovki",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"parkovka_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"tip-stroeniya_kvartiry",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"nomer_doma",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"apartment_images",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"mahallya",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"voda",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"apartment_files",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"ploshhad_spalni",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"addon_square_names",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_gostinnoj",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_terrasy",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"gaz",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"zhilaya_ploshhad",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kategoriya_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"index",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"konserzh",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"vid_iz_okna_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"garderobnaya",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"ploshhad_dopolnitelnoj_pristrojki",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ulicza",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"naznachenie-obekta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"obshhaya_ploshhad",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"creator_user_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"addon_square_values",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_komnaty_ohrany",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"spalnya_sanuzel",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"vid_liczenzii",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mestopolozhenie-obekta_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kolichestvo_sotok",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"tip-stroeniya_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mestopolozhenie-obekta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"prodazha",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"opisanie",type:"string",status:"available",error:"",required:!1,array:!1,size:1024,default:null},{key:"vnutri_est",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ryadom_est",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"komnata_ohrany",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"vdol_dorogi",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"podval",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"saraj",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"ogorod",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"reshetki_na_oknah",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"pozharnaya_signalizacziya",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"videonablyudenie",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"signalizacziya",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"razgruzochnyj_pandus",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"gostevoj_domik",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"barbekyu_zona",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"dva_doma_vo_dvore",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"polisadnik",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"dopolnitelnaya_pristrojka",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"ohrana",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"holodilnik",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_access_level",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"system_is_rent",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_is_sell",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_is_archive",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_created_by",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_only_for_owner",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_allowance",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"prod_torg",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"rent_kom_torg",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"prod_kom_torg",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"rent_torg",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_is_remove",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_metro",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"system_rajon",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"system_mahallya",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"system_rent_price",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_prod_price",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"tip_nedvizhimosti",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"system_prod_price_entries",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"system_rent_price_entries",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"system_prod_kom_price",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_rent_kom_price",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null}],indexes:[]},{$id:"64d7502a5ce9f881b680",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"BIDS",enabled:!0,documentSecurity:!1,attributes:[{key:"parkovka",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"naznachenie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"spalnya_sanuzel_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kanalizacziya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kolichestvo_spalen_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"etazh_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"vid_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mebel_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"balkon",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mebel",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"vdol_dorogi",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"ploshhad_sanuzla_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"tip_stroeniya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"poleznaya_ploshhad_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sostoyanie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"etazhnost_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rasstoyanie_do_metro_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"tip-stroeniya_kvartiry",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"czokol",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"god_postrojki_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"konserzh",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"sistema-otopleniya_kvartiry",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"nomer_kvartiry",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_kuhni_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"zhilaya_ploshhad_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"etazh_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_balkona_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"balkon_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"god_postrojki_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"prodazha",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"zagolovok",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"voda",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"metro",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"lift_kommercziya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"gaz",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"poleznaya_ploshhad_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"kolichestvo_sotok_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"spalnya_sanuzel_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"vid_iz_okna",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kolichestvo_spalen_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"lift_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sostoyanie_remonta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"bassejn",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mashina_mesto_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sanuzel",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"obshhaya_ploshhad_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"obshhaya_ploshhad_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sistema_kondiczionirovaniya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kolichestvo_sotok_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"vysota_potolkov_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"raspolozhenie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"naznachenie-obekta-zemlya_uchastok",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"raspolozhenie_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"nazvanie_zhk",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"vysota_potolkov_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sanuzel_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"voda_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kolichestvo_komnat_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"zhd_vetka",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"podkategoriya_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kolichestvo_komnat_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"zhilaya_ploshhad_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"elektrichestvo",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_holla_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"torecz",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"kategoriya_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"istochnik",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mebel_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"terrasa",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"tip_zemli_uchastka",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"prod_torg",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"voda_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mahallya",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rajon",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"tip-stroeniya_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"bid_files",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"ploshhad_dopolnitelnoj_pristrojki_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sostoyanie-remonta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sistema-otopleniya_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sistema-otopleniya_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sostoyanie-obekta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sobstvennoe_obsluzhivayushhee_tszh",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"kanalizacziya_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"gaz_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"strana",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"gorod",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"bid_images",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"oblast",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rent_kom_torg",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"ploshhad_sanuzla_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_komnaty_ohrany_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"orientir",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"vid_iz_okna_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_gostevogo_doma_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"mestopolozhenie_obekta",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"sanuzel_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"parkovka_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"garderobnaya",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"prod_kom_torg",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"garazh",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mestopolozhenie-obekta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rasstoyanie_do_goroda_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_dopolnitelnoj_pristrojki_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"elektrichestvo_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_komnaty_ohrany_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_kuhni_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sistema_otopleniya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"elektrichestvo_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ulicza",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rent_torg",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"vid_liczenzii",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rasstoyanie_do_goroda_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"rasstoyanie_do_metro_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sistema-kondiczionirovaniya_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_gostinnoj_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"balkon_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"kanalizacziya_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_holla_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_balkona_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sostoyanie_remonta-kvartiry",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"tip_planirovki",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_spalni_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"podval",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"nomer_doma",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"podezdnye_puti",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"etazhnost_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_doma_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"lift_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mestopolozhenie-obekta_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"gaz_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_spalni_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"contact_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sostoyanie_doma",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"opisanie",type:"string",status:"available",error:"",required:!1,array:!1,size:1024,default:null},{key:"ploshhad_gostinnoj_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"parkovka_kvartira",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"uglovoj",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"naznachenie-obekta_zemlya",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"arenda",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ploshhad_terrasy_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"sistema-kondiczionirovaniya_dom",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"creator_user_id",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_terrasy_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"index",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"mashina_mesto_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_gostevogo_doma_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"ploshhad_doma_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"metro_list",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"rajon_list",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"mahallya_list",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"vnutri_est",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"ryadom_est",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"komnata_ohrany",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"saraj",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"ogorod",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"reshetki_na_oknah",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"pozharnaya_signalizacziya",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"videonablyudenie",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"signalizacziya",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"razgruzochnyj_pandus",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"gostevoj_domik",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"barbekyu_zona",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"dva_doma_vo_dvore",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"polisadnik",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"dopolnitelnaya_pristrojka",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"ohrana",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_access_level",type:"integer",status:"available",error:"",required:!1,array:!1,min:-0x8000000000000000,max:0x8000000000000000,default:null},{key:"system_is_rent",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_is_sell",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_is_archive",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_created_by",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_only_for_owner",type:"boolean",status:"available",error:"",required:!1,array:!1,default:null},{key:"system_allowance",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"system_metro",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"system_rajon",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"system_mahallya",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"system_rent_price_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_rent_price_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_prod_price_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_prod_price_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"tip_nedvizhimosti",type:"string",status:"available",error:"",required:!1,array:!0,size:48,default:null},{key:"system_rent_kom_price_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_rent_kom_price_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_prod_kom_price_do",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_prod_kom_price_ot",type:"string",status:"available",error:"",required:!1,array:!1,size:96,default:null},{key:"system_prod_price_entries",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null},{key:"system_rent_price_entries",type:"string",status:"available",error:"",required:!1,array:!0,size:96,default:null}],indexes:[]},{$id:"64c75cc607be95d26b8d",$permissions:['create("any")','read("any")','update("any")','delete("any")'],databaseId:"64c4de8e7b30179809ef",name:"EDITTARGET",enabled:!0,documentSecurity:!1,attributes:[{key:"path",type:"string",status:"available",error:"",required:!1,array:!1,size:64,default:null},{key:"entity_id",type:"string",status:"available",error:"",required:!1,array:!1,size:64,default:null}],indexes:[]}],buckets:[{$id:"64c4f91c7f9a4458c4bb",$createdAt:"2023-11-09T09:51:57.097+00:00",$updatedAt:"2023-11-09T09:52:04.376+00:00",$permissions:['create("any")','read("any")','update("any")','delete("any")'],fileSecurity:!1,name:"ROOT",enabled:!0,maximumFileSize:3e7,allowedFileExtensions:[],compression:"none",encryption:!0,antivirus:!0}],functions:[{$id:"6513df8529ea78bf2325",name:"BUN_APARTMENT_PAGINATOR",runtime:"node-16.0",execute:["any"],events:[],schedule:"",timeout:30,entrypoint:"src/index.js",ignore:["node_modules",".npm"],path:"functions/bun-apartment-paginator"},{$id:"6513fbd219052f40b1a8",name:"BUN_BID_PAGINATOR",runtime:"node-16.0",execute:["any"],events:[],schedule:"",timeout:30,entrypoint:"src/index.js",ignore:["node_modules",".npm"],path:"functions/bun-bid-paginator"},{$id:"65141fcd03cbb257e5fc",name:"BUN_CONTACT_PAGINATOR",runtime:"node-16.0",events:[],schedule:"",timeout:30,entrypoint:"src/index.js",ignore:["node_modules",".npm"],path:"functions/bun-contact-paginator"},{$id:"6537a4f838968b0c93a9",name:"BUN_TELEGRAPH_INFORMER",runtime:"bun-1.0",execute:[],events:[],schedule:"",timeout:15,enabled:!0,logging:!0,entrypoint:"src/index.js",commands:"bun install",ignore:["node_modules",".npm"],path:"functions/bun-telegraph-informer"},{$id:"6537a4f838968b0c93e9",name:"BUN_TELEGRAM_INFORMER",runtime:"bun-1.0",execute:[],events:[],schedule:"",timeout:15,enabled:!0,logging:!0,entrypoint:"src/index.js",commands:"bun install",ignore:["node_modules",".npm"],path:"functions/bun-telegram-informer"}]},Ho=e=>{const t=Oo.collections.find((t=>t.name===e));if(!t)throw new Error("params.ts collection not found: ".concat(e));return null==t?void 0:t.$id},Uo=e=>{const t=Oo.functions.find((t=>t.name===e));if(!t)throw new Error("params.ts function not found: ".concat(e));return null==t?void 0:t.$id},Wo="RealEstate",$o=1700,Go=500,Yo="/assets",Ko={endpoint:{}.CC_APPWRITE_CONFIG_ENDPOINT||"https://cloud.appwrite.io/v1",databaseId:"64c4de8e7b30179809ef",projectId:"64b53d0c41fcf5093b12"},Xo=Oo.buckets[0].$id,Jo=Ho("USER"),Zo=Ho("SETTINGS"),Qo=Ho("EDITTARGET"),el=Ho("APARTMENT"),tl=Ho("CONTACT"),al=Ho("FILES"),il=Ho("BIDS"),ol=Ho("DEAL"),ll=Ho("TASK"),rl=Ho("DEAL_HISTORY"),nl=Ho("SERVICE_COMMENT"),sl=Ho("ROLES"),dl=Ho("NOTIFY"),cl=Ho("TASK_HISTORY"),ml=Ho("ADVERTISING"),ul=Uo("BUN_APARTMENT_PAGINATOR"),pl=Uo("BUN_CONTACT_PAGINATOR"),yl=Uo("BUN_BID_PAGINATOR"),hl=Uo("BUN_TELEGRAM_INFORMER"),bl=Uo("BUN_TELEGRAPH_INFORMER"),vl="databases.*.collections.*.documents.*.update",_l="databases.*.collections.*.documents.*.create",gl="databases.*.collections.*.documents.*.delete",fl="telegram",kl="youtube",wl="instagram",Sl="facebook",zl=e=>{const t=e.$id;return Object.entries(e).map((([e,t])=>Array.isArray(t)?[e,t.length?t:null]:[e,t])).reduce(((e,[t,a])=>({...e,[t]:a})),{id:t})},xl=e=>e.map(zl),Al=e=>Object.entries(e).filter((([e])=>"id"!==e)).filter((([e])=>!e.startsWith("$"))).filter((([e])=>!e.startsWith("system_"))).filter((([e])=>"is_archive"!==e)).map((([e,t])=>Array.isArray(t)?[e,t.length?t:null]:[e,t])).reduce(((e,[t,a])=>({...e,[t]:a})),{});window.toRussian=e=>y(e,{engToRus:!0,slug:!0}),window.fromRussian=e=>y(e,{slug:!0});const Tl={appwriteService:Symbol.for("appwriteService"),alertService:Symbol.for("alertService"),layoutService:Symbol.for("layoutService"),routerService:Symbol.for("routerService"),errorService:Symbol.for("errorService"),authService:Symbol.for("authService"),dictService:Symbol.for("dictService"),cacheService:Symbol.for("cacheService"),ymapsService:Symbol.for("ymapsService"),loggerService:Symbol.for("loggerService"),realtimeService:Symbol.for("realtimeService")},Fl={editTargetService:Symbol.for("editTargetService"),permissionService:Symbol.for("permissionService"),featureService:Symbol.for("featureService"),previewModeService:Symbol.for("previewModeService"),metadataService:Symbol.for("metadataService"),publishService:Symbol.for("publishService"),exchangeService:Symbol.for("exchangeService"),cleanupService:Symbol.for("cleanupService")},Cl={...Tl,...{contactRequestService:Symbol.for("contactRequestService"),dealHistoryRequestService:Symbol.for("dealHistoryRequestService"),dealRequestService:Symbol.for("dealRequestService"),taskRequestService:Symbol.for("taskRequestService"),taskHistoryRequestService:Symbol.for("taskHistoryRequestService"),dashboardRequestService:Symbol.for("dashboardRequestService"),permissionRequestService:Symbol.for("permissionRequestService"),apartmentRequestService:Symbol.for("apartmentRequestService"),bidRequestService:Symbol.for("bidRequestService"),advertisingRequestService:Symbol.for("advertisingRequestService")},...{settingsDbService:Symbol.for("settingsDbService"),userDbService:Symbol.for("userDbService"),apartmentDbService:Symbol.for("apartmentDbService"),bidDbService:Symbol.for("bidDbService"),dealDbService:Symbol.for("dealDbService"),contactDbService:Symbol.for("contactDbService"),dealHistoryDbService:Symbol.for("dealHistoryDbService"),serviceCommentDbService:Symbol.for("serviceCommentDbService"),roleDbService:Symbol.for("roleDbService"),notifyDbService:Symbol.for("notifyDbService"),taskDbService:Symbol.for("taskDbService"),taskHistoryDbService:Symbol.for("taskHistoryDbService"),advertisingDbService:Symbol.for("advertisingDbService")},...{settingsViewService:Symbol.for("settingsViewService"),userViewService:Symbol.for("userViewService"),apartmentViewService:Symbol.for("apartmentViewService"),bidViewService:Symbol.for("bidViewService"),dealViewService:Symbol.for("dealViewService"),contactViewService:Symbol.for("contactViewService"),dealHistoryViewService:Symbol.for("dealHistoryViewService"),serviceCommentViewService:Symbol.for("serviceCommentViewService"),roleViewService:Symbol.for("roleViewService"),notifyViewService:Symbol.for("notifyViewService"),taskViewService:Symbol.for("taskViewService"),taskHistoryViewService:Symbol.for("taskHistoryViewService"),advertisingViewService:Symbol.for("advertisingViewService")},...Fl},Vl=["prod_startovaya_czena","prod_czena_sobstvennika","prod_komissiya_agenstva","prod_komissiya_menedzhera","prod_startovaya_czena_valyuta","prod_komissiya_agenstva_unit","prod_komissiya_menedzhera_unit","prod_kom_startovaya_czena","prod_kom_czena_sobstvennika","prod_kom_komissiya_agenstva","prod_kom_komissiya_menedzhera","prod_kom_startovaya_czena_valyuta","prod_kom_komissiya_agenstva_unit","prod_kom_komissiya_menedzhera_unit"],Ll=["rent_startovaya_czena","rent_czena_sobstvennika","rent_komissiya_agenstva","rent_komissiya_menedzhera","rent_startovaya_czena_valyuta","rent_komissiya_agenstva_unit","rent_komissiya_menedzhera_unit","rent_kom_startovaya_czena","rent_kom_czena_sobstvennika","rent_kom_komissiya_agenstva","rent_kom_komissiya_menedzhera","rent_kom_startovaya_czena_valyuta","rent_kom_komissiya_agenstva_unit","rent_kom_komissiya_menedzhera_unit"],Il=e=>{const t={...e};{const a=e.system_prod_price_entries||[];Vl.forEach(((e,i)=>{h.set(t,e,a[i]||"")})),t.system_prod_price_entries=void 0}{const a=e.system_rent_price_entries||[];Ll.forEach(((e,i)=>{h.set(t,e,a[i]||"")})),t.system_rent_price_entries=void 0}return t},Ml=e=>{const t={...e};return Vl.forEach((e=>{h.set(t,e,void 0)})),Ll.forEach((e=>{h.set(t,e,void 0)})),t},Bl=e=>{const t=[],a=[];return Vl.forEach((a=>{t.push(h.get(e,a)||"")})),Ll.forEach((t=>{a.push(h.get(e,t)||"")})),{system_prod_price_entries:t,system_rent_price_entries:a}},Dl="databases.".concat(Ko.databaseId,".collections.").concat(el,".documents");class Rl{constructor(){a(this,"reloadSubject",new b),a(this,"updateSubject",new b),a(this,"featureService",v(Cl.featureService)),a(this,"metadataService",v(Cl.metadataService)),a(this,"exchangeService",v(Cl.exchangeService)),a(this,"permissionService",v(Cl.permissionService)),a(this,"appwriteService",v(Cl.appwriteService)),a(this,"realtimeService",v(Cl.realtimeService)),a(this,"createIndex",(async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(Ko.databaseId,el,[g.limit(1),g.select(["index"])]);return e+1})),a(this,"findById",(async e=>{let t=await this.appwriteService.databases.getDocument(Ko.databaseId,el,e);return t=Il(t),zl(t)})),a(this,"paginate",(async(e,t,a,i,o,l)=>{const r=await this.appwriteService.execute(ul,{filterData:{_accessLevel:this.featureService.readAccessLevel,_search:o,...e},pagination:t,sortModel:a,chips:i,search:o,payload:l});return r===f?{rows:[],total:null}:{rows:xl(r.rows).map(Il),total:r.total}})),a(this,"create",(async e=>{var t,a;const i=await this.permissionService.getPermissions(),o=await this.exchangeService.getApartmentPriceMetadata(e),l=await this.metadataService.getAreaMetadataByApartment(e);let r=await this.appwriteService.databases.createDocument(Ko.databaseId,el,this.appwriteService.createId(),{...Al(Ml(e)),...Bl(e),system_access_level:await this.featureService.getAccessLevel(),system_is_rent:!!(null==(t=e.arenda)?void 0:t.length),system_is_sell:!!(null==(a=e.prodazha)?void 0:a.length),system_created_by:this.appwriteService.currentUser.$id,system_only_for_owner:i.hasManagerAllObjectsExclusivePermission,system_is_archive:!1,system_is_remove:!1,...o,...l,index:await this.createIndex()});return r=Il(r),zl(r)})),a(this,"update",(async(e,t)=>{var a,i;const o=await this.exchangeService.getApartmentPriceMetadata(t),l=await this.metadataService.getAreaMetadataByApartment(t),r=await this.appwriteService.databases.updateDocument(Ko.databaseId,el,e,{...Al(Ml(t)),...Bl(t),system_is_rent:!!(null==(a=t.arenda)?void 0:a.length),system_is_sell:!!(null==(i=t.prodazha)?void 0:i.length),...o,...l});let n=zl(r);return n=Il(n),this.updateSubject.next([e,n]),n})),a(this,"toggleArchive",(async e=>{const{system_is_archive:t}=await this.findById(e),a=await this.appwriteService.databases.updateDocument(Ko.databaseId,el,e,{system_is_archive:!t});let i=zl(a);i=Il(i),this.updateSubject.next([e,i]),this.reloadSubject.next()})),a(this,"toggleRemove",(async e=>{const{system_is_remove:t}=await this.findById(e),a=await this.appwriteService.databases.updateDocument(Ko.databaseId,el,e,{system_is_remove:!t});let i=zl(a);i=Il(i),this.updateSubject.next([e,i]),this.reloadSubject.next()})),a(this,"toggleOnlyForOwner",(async e=>{const{system_only_for_owner:t}=await this.findById(e),a=await this.appwriteService.databases.updateDocument(Ko.databaseId,el,e,{system_only_for_owner:!t});let i=zl(a);i=Il(i),this.updateSubject.next([e,i]),this.reloadSubject.next()})),a(this,"moveToArchive",(async e=>{const t=await this.appwriteService.databases.updateDocument(Ko.databaseId,el,e,{system_is_archive:!0});let a=zl(t);a=Il(a),this.updateSubject.next([e,a]),this.reloadSubject.next()})),a(this,"updateAllowance",(async(e,t)=>{const a=await this.appwriteService.databases.updateDocument(Ko.databaseId,el,e,{system_allowance:t});let i=zl(a);i=Il(i),this.updateSubject.next([e,i]),this.reloadSubject.next()})),a(this,"remove",(async e=>{await this.appwriteService.databases.deleteDocument(Ko.databaseId,el,e)})),a(this,"prefetch",k((async()=>{this.realtimeService.subscribe(Dl,(({events:e,payload:t})=>{if(e.includes(_l)&&this.reloadSubject.next(),e.includes(gl)&&this.reloadSubject.next(),e.includes(vl)){let e=zl(t);e=Il(e),this.updateSubject.next([t.$id,e])}}))}))),_(this,{})}}class jl{constructor(){a(this,"apartmentDbService",v(Cl.apartmentDbService)),a(this,"loggerService",v(Cl.loggerService)),a(this,"reloadSubject",this.apartmentDbService.reloadSubject),a(this,"updateSubject",this.apartmentDbService.updateSubject),a(this,"create",(async e=>(this.loggerService.log("apartmentViewService create",e),await this.apartmentDbService.create(e)))),a(this,"update",(async(e,t)=>(this.loggerService.log("apartmentViewService update",t),await this.apartmentDbService.update(e,t)))),a(this,"toggleArchive",(async e=>(this.loggerService.log("apartmentViewService toggleArchive"),await this.apartmentDbService.toggleArchive(e)))),a(this,"toggleRemove",(async e=>(this.loggerService.log("apartmentViewService toggleRemove"),await this.apartmentDbService.toggleRemove(e)))),a(this,"toggleOnlyForOwner",(async e=>(this.loggerService.log("apartmentViewService toggleOnlyForOwner"),await this.apartmentDbService.toggleOnlyForOwner(e)))),a(this,"moveToArchive",(async e=>(this.loggerService.log("apartmentViewService moveToArchive"),await this.apartmentDbService.moveToArchive(e)))),a(this,"updateAllowance",(async(e,t)=>(this.loggerService.log("apartmentViewService updateAllowance"),await this.apartmentDbService.updateAllowance(e,t)))),a(this,"remove",(async e=>(this.loggerService.log("apartmentViewService remove",{id:e}),await this.apartmentDbService.remove(e)))),a(this,"read",(async e=>{this.loggerService.log("apartmentViewService read",{id:e});return await this.apartmentDbService.findById(e)})),a(this,"tryRead",(async e=>{this.loggerService.log("apartmentViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),a(this,"paginate",(async(e,t,a,i,o,l)=>(this.loggerService.log("apartmentViewService paginate"),await this.apartmentDbService.paginate(e,t,a,i,o,l)))),_(this,{})}}const ql=k((()=>z(1e3).then((()=>{ql.clear()}))));class Pl{constructor(){a(this,"cacheService",v(Cl.cacheService)),a(this,"_client",null),a(this,"_functions",null),a(this,"_account",null),a(this,"_storage",null),a(this,"_databases",null),a(this,"_session",null),a(this,"_currentUser",null),a(this,"createId",(()=>w.unique())),a(this,"getCurrentSession",(async e=>{try{return await e.getSession("current")}catch(t){return null}})),a(this,"init",k((async()=>{const{endpoint:e,projectId:t}=Ko,a=new I;a.setEndpoint(e).setProject(t).setLocale("ru-RU");const i=new T(a),o=new F(a),l=new C(a),r=new V(a),n=await this.getCurrentSession(i),s=n?await i.get():null;L((()=>{this._client=a,this._account=i,this._session=n,this._databases=o,this._functions=l,this._storage=r,this._currentUser=s}))}))),a(this,"readFileName",(async e=>{const{name:t}=await this.databases.getDocument(Ko.databaseId,al,e);return t})),a(this,"tryReadFileName",(async e=>{try{return await this.readFileName(e)}catch(t){return null}})),a(this,"uploadFile",(async e=>{const t=p();return await this.storage.createFile(Xo,t,e),await this.databases.createDocument(Ko.databaseId,al,t,{name:e.name}),t})),a(this,"uploadBlob",(async(e,t)=>{const a=new File([e],t);return await this.uploadFile(a)})),a(this,"removeFile",(async e=>{await this.storage.deleteFile(Xo,e)})),a(this,"getFileURL",(async e=>(await this.storage.getFileView(Xo,e)).toString())),a(this,"getImageURL",(async e=>{let t="";return await this.cacheService.hasImage(e)||(t=await this.getFileURL(e)),await this.cacheService.getImage(t,e)})),a(this,"execute",S((async(e,t)=>{try{const a=JSON.stringify(t),[{responseBody:i,status:o}]=await Promise.all([this.functions.createExecution(e,a,!1),ql()]);if("failed"===o)throw new Error("Function failed ".concat(i));const l=JSON.parse(i||"{}");if(l.error)throw new Error("Function error ".concat(l.error));return l}catch(a){throw await z(15e3),a}}),3)),a(this,"prefetch",(async()=>{await this.init()})),_(this,{_client:x,_account:x,_session:x,_databases:x,_functions:x,_storage:x,_currentUser:x,client:A,storage:A,account:A,session:A,databases:A,functions:A,isAuthorized:A,currentUser:A}),this.init()}get client(){return this._client}get storage(){return this._storage}get account(){return this._account}get session(){return this._session}get databases(){return this._databases}get functions(){return this._functions}get isAuthorized(){return!!this._session}get currentUser(){return this._currentUser||{}}}const El={user_role:[],user_features:[],system_is_remove:!1,active:!1,middle_name:"",phone:"",email:"",user_files:[],first_name:"",avatar:"",last_name:"",system_metadata:""};class Nl{constructor(){a(this,"appwriteService",v(Cl.appwriteService)),a(this,"alertService",v(Cl.alertService)),a(this,"routerService",v(Cl.routerService)),a(this,"tryReadUserData",(async e=>{try{return await this.appwriteService.databases.getDocument(Ko.databaseId,Jo,e)}catch(t){return null}})),a(this,"initUser",k((async e=>{const t=await this.tryReadUserData(e.userId);if(!t){const{total:t}=await this.appwriteService.databases.listDocuments(Ko.databaseId,Jo,[g.limit(1),g.select(["index"])]);return await this.appwriteService.databases.createDocument(Ko.databaseId,Jo,e.userId,{...El,index:t+1}),this.routerService.push("/inactive_page"),!1}const{email:a}=this.appwriteService.currentUser;return a&&!t.email&&await this.appwriteService.databases.updateDocument(Ko.databaseId,Jo,e.userId,{...El,...Al(t),system_metadata:t.system_metadata||"",email:a}),t.active&&!t.system_is_remove||(this.routerService.push("/inactive_page"),!1)}))),a(this,"login",(async({email:e,password:t})=>{try{const a=await this.appwriteService.account.createEmailSession(e,t);await this.initUser(a),M()}catch(a){return this.alertService.notify(a.message||"Unknown error"),!1}})),a(this,"logout",(async()=>{try{await this.appwriteService.account.deleteSession("current"),M()}catch(e){return this.alertService.notify(e.message||"Unknown error"),!1}})),a(this,"register",(async({email:e,password:t})=>{try{await this.appwriteService.account.create(this.appwriteService.createId(),e,t),M()}catch(a){return this.alertService.notify(a.message||"Unknown error"),!1}})),a(this,"prefetch",k((async()=>{this.appwriteService.isAuthorized||this.routerService.push("/login_page");const e=this.appwriteService.session;this.appwriteService.isAuthorized&&await this.initUser(e)}))),_(this,{})}}const Ol=["prod_startovaya_czena_ot","prod_startovaya_czena_do","prod_czena_sobstvennika_ot","prod_czena_sobstvennika_do","prod_komissiya_agenstva","prod_komissiya_menedzhera","prod_startovaya_czena_valyuta","prod_komissiya_agenstva_unit","prod_komissiya_menedzhera_unit","prod_kom_startovaya_czena_ot","prod_kom_startovaya_czena_do","prod_kom_czena_sobstvennika_ot","prod_kom_czena_sobstvennika_do","prod_kom_komissiya_agenstva","prod_kom_komissiya_menedzhera","prod_kom_startovaya_czena_valyuta","prod_kom_komissiya_agenstva_unit","prod_kom_komissiya_menedzhera_unit"],Hl=["rent_startovaya_czena_ot","rent_startovaya_czena_do","rent_czena_sobstvennika_ot","rent_czena_sobstvennika_do","rent_komissiya_agenstva","rent_komissiya_menedzhera","rent_startovaya_czena_valyuta","rent_komissiya_agenstva_unit","rent_komissiya_menedzhera_unit","rent_kom_startovaya_czena_ot","rent_kom_startovaya_czena_do","rent_kom_czena_sobstvennika_ot","rent_kom_czena_sobstvennika_do","rent_kom_komissiya_agenstva","rent_kom_komissiya_menedzhera","rent_kom_startovaya_czena_valyuta","rent_kom_komissiya_agenstva_unit","rent_kom_komissiya_menedzhera_unit"],Ul=e=>{const t={...e};{const a=e.system_prod_price_entries||[];Ol.forEach(((e,i)=>{h.set(t,e,a[i]||"")})),t.system_prod_price_entries=void 0}{const a=e.system_rent_price_entries||[];Hl.forEach(((e,i)=>{h.set(t,e,a[i]||"")})),t.system_prod_price_entries=void 0}return t},Wl=e=>{const t={...e};return Ol.forEach((e=>{h.set(t,e,void 0)})),Hl.forEach((e=>{h.set(t,e,void 0)})),t},$l=e=>{const t={...e},a=[],i=[];return Ol.forEach((i=>{a.push(h.get(e,i)||""),h.set(t,i,void 0)})),Hl.forEach((a=>{i.push(h.get(e,a)||""),h.set(t,a,void 0)})),{system_prod_price_entries:a,system_rent_price_entries:i}},Gl="databases.".concat(Ko.databaseId,".collections.").concat(il,".documents");class Yl{constructor(){a(this,"reloadSubject",new b),a(this,"updateSubject",new b),a(this,"featureService",v(Cl.featureService)),a(this,"metadataService",v(Cl.metadataService)),a(this,"exchangeService",v(Cl.exchangeService)),a(this,"appwriteService",v(Cl.appwriteService)),a(this,"permissionService",v(Cl.permissionService)),a(this,"realtimeService",v(Cl.realtimeService)),a(this,"createIndex",(async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(Ko.databaseId,il,[g.limit(1),g.select(["index"])]);return e+1})),a(this,"findById",(async e=>{let t=await this.appwriteService.databases.getDocument(Ko.databaseId,il,e);return t=Ul(t),zl(t)})),a(this,"paginate",(async(e,t,a,i,o,l)=>{const r=await this.appwriteService.execute(yl,{filterData:{_accessLevel:this.featureService.readAccessLevel,_search:o,...e},pagination:t,sortModel:a,chips:i,search:o,payload:l});return r===f?{rows:[],total:null}:{rows:xl(r.rows).map(Ul),total:r.total}})),a(this,"create",(async e=>{var t,a;const i=await this.permissionService.getPermissions(),o=await this.exchangeService.getBidPriceMetadata(e),l=await this.metadataService.getAreaMetadataByBid(e);let r=await this.appwriteService.databases.createDocument(Ko.databaseId,il,this.appwriteService.createId(),{...Al(Wl(e)),...$l(e),system_access_level:await this.featureService.getAccessLevel(),system_is_rent:!!(null==(t=e.arenda)?void 0:t.length),system_is_sell:!!(null==(a=e.prodazha)?void 0:a.length),system_created_by:this.appwriteService.currentUser.$id,system_only_for_owner:i.hasManagerAllObjectsExclusivePermission,system_is_archive:!1,...o,...l,index:await this.createIndex()});return r=Ul(r),zl(r)})),a(this,"update",(async(e,t)=>{var a,i;const o=await this.exchangeService.getBidPriceMetadata(t),l=await this.metadataService.getAreaMetadataByBid(t),r=await this.appwriteService.databases.updateDocument(Ko.databaseId,il,e,{...Al(Wl(t)),...$l(t),system_is_rent:!!(null==(a=t.arenda)?void 0:a.length),system_is_sell:!!(null==(i=t.prodazha)?void 0:i.length),...o,...l});let n=zl(r);return n=Ul(n),this.updateSubject.next([e,n]),n})),a(this,"toggleArchive",(async e=>{const{system_is_archive:t}=await this.findById(e),a=await this.appwriteService.databases.updateDocument(Ko.databaseId,il,e,{system_is_archive:!t});let i=zl(a);i=Ul(i),this.updateSubject.next([e,i]),this.reloadSubject.next()})),a(this,"toggleOnlyForOwner",(async e=>{const{system_only_for_owner:t}=await this.findById(e),a=await this.appwriteService.databases.updateDocument(Ko.databaseId,il,e,{system_only_for_owner:!t});let i=zl(a);i=Ul(i),this.updateSubject.next([e,i]),this.reloadSubject.next()})),a(this,"moveToArchive",(async e=>{const t=await this.appwriteService.databases.updateDocument(Ko.databaseId,il,e,{system_is_archive:!0});let a=zl(t);a=Ul(a),this.updateSubject.next([e,a]),this.reloadSubject.next()})),a(this,"updateAllowance",(async(e,t)=>{const a=await this.appwriteService.databases.updateDocument(Ko.databaseId,il,e,{system_allowance:t});let i=zl(a);i=Ul(i),this.updateSubject.next([e,i]),this.reloadSubject.next()})),a(this,"remove",(async e=>{await this.appwriteService.databases.deleteDocument(Ko.databaseId,il,e)})),a(this,"prefetch",k((async()=>{this.realtimeService.subscribe(Gl,(({events:e,payload:t})=>{if(e.includes(_l)&&this.reloadSubject.next(),e.includes(gl)&&this.reloadSubject.next(),e.includes(vl)){let e=zl(t);e=Ul(e),this.updateSubject.next([t.$id,e])}}))}))),_(this,{})}}class Kl{constructor(){a(this,"bidDbService",v(Cl.bidDbService)),a(this,"loggerService",v(Cl.loggerService)),a(this,"reloadSubject",this.bidDbService.reloadSubject),a(this,"updateSubject",this.bidDbService.updateSubject),a(this,"create",(async e=>(this.loggerService.log("bidViewService create",e),await this.bidDbService.create(e)))),a(this,"update",(async(e,t)=>(this.loggerService.log("bidViewService update",t),await this.bidDbService.update(e,t)))),a(this,"updateAllowance",(async(e,t)=>(this.loggerService.log("bidViewService updateAllowance"),await this.bidDbService.updateAllowance(e,t)))),a(this,"remove",(async e=>(this.loggerService.log("bidViewService remove",{id:e}),await this.bidDbService.remove(e)))),a(this,"toggleArchive",(async e=>(this.loggerService.log("bidViewService toggleArchive"),await this.bidDbService.toggleArchive(e)))),a(this,"toggleOnlyForOwner",(async e=>(this.loggerService.log("bidViewService toggleOnlyForOwner"),await this.bidDbService.toggleOnlyForOwner(e)))),a(this,"moveToArchive",(async e=>(this.loggerService.log("bidViewService moveToArchive"),await this.bidDbService.moveToArchive(e)))),a(this,"read",(async e=>{this.loggerService.log("bidViewService read",{id:e});return await this.bidDbService.findById(e)})),a(this,"tryRead",(async e=>{this.loggerService.log("bidViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),a(this,"paginate",(async(e,t,a,i,o,l)=>(this.loggerService.log("bidViewService paginate"),await this.bidDbService.paginate(e,t,a,i,o,l)))),_(this,{})}}const Xl="cache",Jl="realestate";class Zl{constructor(){a(this,"routerService",v(Cl.routerService)),a(this,"db",null),a(this,"resourceMap",new Map),a(this,"init",(()=>new Promise(((e,t)=>{const a=indexedDB.open(Jl,1);a.onupgradeneeded=()=>{a.result.createObjectStore(Xl)},a.onsuccess=()=>{this.db=a.result,this.db.onerror=()=>{console.error("Error creating/accessing db")},e()},a.onerror=()=>{t()}})))),a(this,"writeImage",(async(e,t)=>new Promise(((a,i)=>{const o=this.db.transaction([Xl],"readwrite").objectStore(Xl).put(e,t);o.addEventListener("success",(()=>a())),o.addEventListener("error",(()=>i()))})))),a(this,"readImage",(e=>new Promise(((t,a)=>{const i=this.db.transaction([Xl],"readonly").objectStore(Xl).openCursor(e);i.addEventListener("success",(()=>{var e;return t((null==(e=i.result)?void 0:e.value)||null)})),i.addEventListener("error",(()=>a()))})))),a(this,"hasImage",(async e=>{if(this.resourceMap.has(e))return!0;const t=await this.readImage(e);if(t){const a=URL.createObjectURL(t);return this.resourceMap.set(e,a),!0}return!1})),a(this,"getImage",(async(e,t)=>{const a=this.resourceMap.get(t);if(a)return a;const i=await this.readImage(t);if(i){const e=URL.createObjectURL(i);return this.resourceMap.set(t,e),e}const o=await(e=>new Promise((t=>{const a=document.createElement("img");a.style.position="fixed",a.style.pointerEvents="none",a.style.visibility="hidden",document.body.appendChild(a),a.onload=()=>{const e=document.createElement("canvas");e.height=a.height,e.width=a.width;const i=e.getContext("2d");if(!i)return document.body.removeChild(a),void t(null);i.drawImage(a,0,0),e.toBlob((e=>{if(!e)return document.body.removeChild(a),void t(null);document.body.removeChild(a),t(e)}))},a.onerror=e=>{console.error(e),document.body.removeChild(a),t(null)},a.crossOrigin="anonymous",a.src=e})))(e);return o?(await this.writeImage(o,t),await this.getImage(e,t)):e})),a(this,"collectGarbage",(()=>{this.resourceMap.forEach((([e,t])=>{URL.revokeObjectURL(t),this.resourceMap.delete(e)}))})),a(this,"cleanup",(()=>new Promise((async(e,t)=>{try{if(navigator.storage&&navigator.storage.estimate){const{quota:a,usage:i}=await navigator.storage.estimate();if(a&&i){if(i/a*100>60){const a=indexedDB.deleteDatabase(Jl);return a.addEventListener("success",(()=>e())),void a.addEventListener("error",(()=>t()))}return void e()}}e()}catch(a){console.log("cacheService failed to clear cache"),e()}})))),a(this,"prefetch",k((async()=>{await this.cleanup(),await this.init()}))),_(this,{})}}const Ql="databases.".concat(Ko.databaseId,".collections.").concat(tl,".documents");class er{constructor(){a(this,"reloadSubject",new b),a(this,"updateSubject",new b),a(this,"featureService",v(Cl.featureService)),a(this,"appwriteService",v(Cl.appwriteService)),a(this,"permissionService",v(Cl.permissionService)),a(this,"realtimeService",v(Cl.realtimeService)),a(this,"getMetadata",(async e=>{const t=[];return t.push(e.fio),t.push(e.telefon),t.push(e.inn),t.push(e.pinfl),t.join(" ").slice(0,1024)})),a(this,"createIndex",(async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(Ko.databaseId,tl,[g.limit(1),g.select(["index"])]);return e+1})),a(this,"findById",(async e=>{const t=await this.appwriteService.databases.getDocument(Ko.databaseId,tl,e);return zl(t)})),a(this,"paginate",(async(e,t,a,i,o,l)=>{const r=await this.appwriteService.execute(pl,{filterData:{_accessLevel:this.featureService.readAccessLevel,_search:o,...e},pagination:t,sortModel:a,chips:i,search:o,payload:l});return r===f?{rows:[],total:null}:{rows:xl(r.rows),total:r.total}})),a(this,"create",(async e=>{const t=await this.permissionService.getPermissions(),a=await this.appwriteService.databases.createDocument(Ko.databaseId,tl,this.appwriteService.createId(),{...Al(e),system_metadata:await this.getMetadata(e),system_access_level:await this.featureService.getAccessLevel(),system_created_by:this.appwriteService.currentUser.$id,system_only_for_owner:t.hasManagerAllObjectsExclusivePermission,index:await this.createIndex()});return zl(a)})),a(this,"update",(async(e,t)=>{const a=await this.appwriteService.databases.updateDocument(Ko.databaseId,tl,e,{...Al(t),system_metadata:await this.getMetadata(t)}),i=zl(a);return this.updateSubject.next([e,i]),i})),a(this,"remove",(async e=>{await this.appwriteService.databases.deleteDocument(Ko.databaseId,tl,e)})),a(this,"prefetch",k((async()=>{this.realtimeService.subscribe(Ql,(({events:e,payload:t})=>{if(e.includes(_l)&&this.reloadSubject.next(),e.includes(gl)&&this.reloadSubject.next(),e.includes(vl)){const e=zl(t);this.updateSubject.next([t.$id,e])}}))}))),_(this,{})}}class tr{constructor(){a(this,"appwriteService",v(Cl.appwriteService)),a(this,"loggerService",v(Cl.loggerService)),a(this,"findDuplicates",(async({fio:e,telefon:t})=>{this.loggerService.log("contactRequestService findDuplicates",{fio:e,telefon:t});const a=await this.appwriteService.databases.listDocuments(Ko.databaseId,tl,[...e&&[g.search("fio",e)],...t&&[g.search("telefon",t)]]);return{rows:xl(a.documents),total:a.total}})),u(this)}}class ar{constructor(){a(this,"contactDbService",v(Cl.contactDbService)),a(this,"loggerService",v(Cl.loggerService)),a(this,"reloadSubject",this.contactDbService.reloadSubject),a(this,"updateSubject",this.contactDbService.updateSubject),a(this,"create",(async e=>(this.loggerService.log("contactViewService create",e),await this.contactDbService.create(e)))),a(this,"update",(async(e,t)=>(this.loggerService.log("contactViewService update",t),await this.contactDbService.update(e,t)))),a(this,"remove",(async e=>(this.loggerService.log("contactViewService remove",{id:e}),await this.contactDbService.remove(e)))),a(this,"read",(async e=>{this.loggerService.log("contactViewService read",{id:e});return await this.contactDbService.findById(e)})),a(this,"tryRead",(async e=>{this.loggerService.log("contactViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),a(this,"paginate",(async(e,t,a,i,o,l)=>(this.loggerService.log("contactViewService paginate"),await this.contactDbService.paginate(e,t,a,i,o,l)))),_(this,{})}}const ir="1970-01-01",or=(e=n())=>{const t=n(ir);return e.diff(t,"day")},lr=e=>{const t=or();return rr(t+e).utc().format()},rr=e=>n(ir).add(e,"day"),nr=e=>n().set("hour",0).set("minute",0).add(e,"minute");window.getMomentStamp=or,window.fromMomentStamp=rr,window.getUtcOffset=lr;const sr={"last-month":lr(-31)};class dr{constructor(){a(this,"appwriteService",v(Cl.appwriteService)),a(this,"getNewBidsCount",(async e=>{const{total:t}=await this.appwriteService.databases.listDocuments(Ko.databaseId,il,[g.limit(1),g.select(["index"]),g.greaterThanEqual("$createdAt",sr[e])]);return t})),a(this,"getNewApartmentCount",(async e=>{const{total:t}=await this.appwriteService.databases.listDocuments(Ko.databaseId,el,[g.limit(1),g.select(["index"]),g.greaterThanEqual("$createdAt",sr[e])]);return t})),a(this,"getDealsInProgressCount",(async e=>{const{total:t}=await this.appwriteService.databases.listDocuments(Ko.databaseId,ol,[g.limit(1),g.select(["index"]),g.greaterThanEqual("$createdAt",sr[e]),g.notEqual("status","Закрытая сделка"),g.notEqual("status","Сделка сорвана")]);return t})),a(this,"getDealsByStatusCount",(async(e,t)=>{const{total:a}=await this.appwriteService.databases.listDocuments(Ko.databaseId,ol,[g.limit(1),g.select(["index"]),g.greaterThanEqual("$createdAt",sr[e]),g.equal("status",t)]);return a})),a(this,"getDoneDealsByUserCount",(async(e,t)=>{const{total:a}=await this.appwriteService.databases.listDocuments(Ko.databaseId,ol,[g.limit(1),g.select(["index"]),g.greaterThanEqual("$createdAt",sr[e]),g.equal("user_id",t),g.equal("status","Закрытая сделка")]);return a})),a(this,"getTasksByStamp",(async(e,t)=>{const{documents:a}=await this.appwriteService.databases.listDocuments(Ko.databaseId,ll,[g.greaterThanEqual("moment_stamp",e),g.lessThanEqual("moment_stamp",t)]);return xl(a)})),_(this,{})}}const cr=async(e,t,a,i)=>await os.appwriteService.databases.listDocuments(Ko.databaseId,e,[g.orderDesc("$updatedAt"),...i?[g.cursorAfter(i)]:[],g.limit(t),...a]),mr=async function*(e,t=[],{documentReadDelay:a=100,documentsPageSize:i=5e3,totalDocumentsLimit:o=1e5}={}){let l=0,r=null,n=cr(e,i,t,null);for(;l<o;){console.log("Fetching collection ".concat(e," from ").concat(e," starting from ").concat(r||0));const o=(await Promise.all([n,z(a)]))[0];for(const e of o.documents)yield e;if(o.documents.length<i)break;r=o.documents[o.documents.length-1].$id,n=cr(e,i,t,r);for(const e of o.documents)yield e;l+=o.documents.length}},ur=async e=>{const t=[];for await(const a of e)t.push(a);return t},pr=["Новая сделка","В работе","Показы","Переговоры","Задаток/Залог","Оформление","Оплата","Закрытая сделка","Сделка сорвана"],yr=["Аренда","Продажа"],hr="databases.".concat(Ko.databaseId,".collections.").concat(ol,".documents");class br{constructor(){a(this,"reloadSubject",new b),a(this,"createSubject",new b),a(this,"removeSubject",new b),a(this,"updateSubject",new b),a(this,"appwriteService",v(Cl.appwriteService)),a(this,"realtimeService",v(Cl.realtimeService)),a(this,"createIndex",(async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(Ko.databaseId,ol,[g.limit(1),g.select(["index"])]);return e+1})),a(this,"findByContactId",(async e=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(Ko.databaseId,ol,[g.limit(1),g.equal("contact_id",e),g.notEqual("status","Сделка сорвана"),g.notEqual("status","Закрытая сделка"),g.orderDesc("$createdAt")]);if(!t)throw new Error("dealDbService findByContactId document not found");return zl(t)})),a(this,"findOccupiedByTargetApartmentId",(async e=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(Ko.databaseId,ol,[g.limit(1),g.equal("target_apartment_id",e),g.notEqual("status","Сделка сорвана"),g.notEqual("status","Закрытая сделка"),g.orderDesc("$createdAt")]);return t?zl(t):null})),a(this,"findOccupiedByApartmentId",(async e=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(Ko.databaseId,ol,[g.limit(1),g.equal("apartment_id",e),g.notEqual("status","Сделка сорвана"),g.notEqual("status","Закрытая сделка"),g.orderDesc("$createdAt")]);return t?zl(t):null})),a(this,"findOccupiedByTagetBidId",(async e=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(Ko.databaseId,ol,[g.limit(1),g.equal("target_bid_id",e),g.notEqual("status","Сделка сорвана"),g.notEqual("status","Закрытая сделка"),g.orderDesc("$createdAt")]);return t?zl(t):null})),a(this,"findOccupiedByBidId",(async e=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(Ko.databaseId,ol,[g.limit(1),g.equal("bid_id",e),g.notEqual("status","Сделка сорвана"),g.notEqual("status","Закрытая сделка"),g.orderDesc("$createdAt")]);return t?zl(t):null})),a(this,"findByApartmentId",(async e=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(Ko.databaseId,ol,[g.limit(1),g.equal("apartment_id",e),g.notEqual("status","Сделка сорвана"),g.notEqual("status","Закрытая сделка"),g.orderDesc("$createdAt")]);if(!t)throw new Error("dealDbService findByApartmentId document not found");return zl(t)})),a(this,"findByBidId",(async e=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(Ko.databaseId,ol,[g.limit(1),g.equal("bid_id",e),g.notEqual("status","Сделка сорвана"),g.notEqual("status","Закрытая сделка"),g.orderDesc("$createdAt")]);if(!t)throw new Error("dealDbService findByBidId document not found");return zl(t)})),a(this,"findById",(async e=>{const t=await this.appwriteService.databases.getDocument(Ko.databaseId,ol,e);return zl(t)})),a(this,"findByDealStatus",(async e=>{const t=await ur(mr(ol,[g.equal("status",e)],{totalDocumentsLimit:250}));return xl(t)})),a(this,"create",(async e=>{const t=await this.appwriteService.databases.createDocument(Ko.databaseId,ol,this.appwriteService.createId(),{...Al(e),index:await this.createIndex()}),a=zl(t);return this.createSubject.next(a),a})),a(this,"update",(async(e,t)=>{const a=await this.appwriteService.databases.updateDocument(Ko.databaseId,ol,e,{...Al(t)}),i=zl(a);return this.updateSubject.next([e,i]),i})),a(this,"remove",(async e=>{await this.appwriteService.databases.deleteDocument(Ko.databaseId,ol,e),this.removeSubject.next(e)})),a(this,"prefetch",k((()=>{(async()=>{this.realtimeService.subscribe(hr,(({events:e,payload:t})=>{if(e.includes(_l)){const e=zl(t);this.reloadSubject.next(),this.createSubject.next(e)}if(e.includes(gl)&&(this.reloadSubject.next(),this.removeSubject.next(t.$id)),e.includes(vl)){const e=zl(t);this.updateSubject.next([t.$id,e])}}))})()}))),_(this,{})}}const vr="databases.".concat(Ko.databaseId,".collections.").concat(rl,".documents");class _r{constructor(){a(this,"createSubject",new b),a(this,"reloadSubject",new b),a(this,"updateSubject",new b),a(this,"appwriteService",v(Cl.appwriteService)),a(this,"realtimeService",v(Cl.realtimeService)),a(this,"findById",(async e=>{const t=await this.appwriteService.databases.getDocument(Ko.databaseId,rl,e);return zl(t)})),a(this,"findByContactId",(async e=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(Ko.databaseId,rl,[g.limit(1),g.equal("contact_id",e),g.orderDesc("$createdAt")]);if(!t)throw new Error("dealHistoryDbService findByContactId document not found");return zl(t)})),a(this,"findByApartmentId",(async e=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(Ko.databaseId,rl,[g.limit(1),g.equal("apartment_id",e),g.orderDesc("$createdAt")]);if(!t)throw new Error("dealHistoryDbService findByApartmentId document not found");return zl(t)})),a(this,"findByBidId",(async e=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(Ko.databaseId,rl,[g.limit(1),g.equal("bid_id",e),g.orderDesc("$createdAt")]);if(!t)throw new Error("dealHistoryDbService findByBidId document not found");return zl(t)})),a(this,"create",(async e=>{const t=await this.appwriteService.databases.createDocument(Ko.databaseId,rl,this.appwriteService.createId(),Al(e));return zl(t)})),a(this,"update",(async(e,t)=>{const a=await this.appwriteService.databases.updateDocument(Ko.databaseId,rl,e,Al(t));return zl(a)})),a(this,"remove",(async e=>{await this.appwriteService.databases.deleteDocument(Ko.databaseId,rl,e)})),a(this,"findAllByApartmentId",(async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(Ko.databaseId,rl,[g.orderDesc("$createdAt"),g.equal("apartment_id",e)]);return xl(t)})),a(this,"findAllByContactId",(async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(Ko.databaseId,rl,[g.orderDesc("$createdAt"),g.equal("contact_id",e)]);return xl(t)})),a(this,"findAllByBidId",(async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(Ko.databaseId,rl,[g.orderDesc("$createdAt"),g.equal("bid_id",e)]);return xl(t)})),a(this,"prefetch",k((async()=>{this.realtimeService.subscribe(vr,(({events:e,payload:t})=>{if(e.includes(_l)&&(this.reloadSubject.next(),this.createSubject.next(t)),e.includes(gl)&&this.reloadSubject.next(),e.includes(vl)){const e=zl(t);this.updateSubject.next([t.$id,e])}}))}))),_(this,{})}}const gr="deal-begin",fr="deal-end",kr="deal-reassign",wr="deal-status";class Sr{constructor(){a(this,"dealHistoryViewService",v(Cl.dealHistoryViewService)),a(this,"dealViewService",v(Cl.dealViewService)),a(this,"contactViewService",v(Cl.contactViewService)),a(this,"apartmentViewService",v(Cl.apartmentViewService)),a(this,"bidViewService",v(Cl.bidViewService)),a(this,"appwriteService",v(Cl.appwriteService)),a(this,"loggerService",v(Cl.loggerService)),a(this,"layoutService",v(Cl.layoutService)),a(this,"readDealStateByApartment",(async(e,t)=>{this.loggerService.log("dealHistoryRequestService readDealStateByApartment",{apartmentId:e,userId:t});const{documents:a}=await this.appwriteService.databases.listDocuments(Ko.databaseId,rl,[g.limit(1),g.equal("apartment_id",e),g.equal("type",fr),g.orderDesc("$createdAt")]),{documents:i}=await this.appwriteService.databases.listDocuments(Ko.databaseId,rl,[g.limit(1),g.equal("apartment_id",e),g.equal("type",gr),g.orderDesc("$createdAt")]),[o=null]=a,[l=null]=i,r=(()=>{if(!l)return fr;if(!o)return gr;const e=n(l.$createdAt),t=n(o.$createdAt);return e.isAfter(t)?gr:fr})(),s=[];if(l&&r===gr){const{documents:t}=await this.appwriteService.databases.listDocuments(Ko.databaseId,rl,[g.equal("apartment_id",e),g.cursorBefore(l.$id),g.orderDesc("$createdAt")]);for(const e of t)e.type===kr&&s.push(e)}const[d=null]=s;return d&&l?(s.unshift(l),{status:kr,activeItem:d,reassign:s}):{status:r,activeItem:r===gr?l:null,reassign:s}})),a(this,"commitApartmentDealBegin",(async(e,t,a,i,o,l)=>{this.loggerService.log("dealHistoryRequestService commitApartmentDealBegin",{apartmentId:e,userId:t});if((await this.readDealStateByApartment(e,t)).status!==fr)throw new Error("commitApartmentDealBegin invalid state");const r=["<pre>","Создана сделка <text-underline>".concat(a,"</text-underline>"),l?"Комментарий: ".concat(l):"","</pre>"].join("\n"),{contact_id:n}=await this.apartmentViewService.read(e),{fio:s,telefon:d,tip_klienta:c}=await this.contactViewService.read(n),{id:m}=await this.dealViewService.create({status:"Новая сделка",apartment_id:e,contact_id:n,bid_id:null,type:a,user_id:t,price:i,price_unit:o,target_apartment_id:null,target_bid_id:null,fio:s,telefon:d,tip_klienta:c?c[0]:""});await this.dealHistoryViewService.create({deal_id:m,apartment_id:e,contact_id:n,user_id:t,type:gr,comment:r,bid_id:null,payload:null}),this.layoutService.reloadOutlet()})),a(this,"commitApartmentDealEnd",(async(e,t,a,i)=>{this.loggerService.log("dealHistoryRequestService commitApartmentDealEnd",{apartmentId:e,userId:t});const o=await this.readDealStateByApartment(e,t);if(o.status!==gr&&o.status!==kr)throw new Error("commitApartmentDealEnd invalid state");if(!o.activeItem)throw new Error("commitApartmentDealBegin activeItem is null");if(await this.dealHistoryViewService.create({contact_id:o.activeItem.contact_id,apartment_id:e,user_id:t,deal_id:o.activeItem.deal_id,type:fr,comment:a,bid_id:null,payload:null}),i){const{target_bid_id:t}=await this.dealViewService.read(o.activeItem.deal_id);await this.apartmentViewService.moveToArchive(e),t&&await this.bidViewService.moveToArchive(t)}this.layoutService.reloadOutlet()})),a(this,"commitApartmentDealReassign",(async(e,t)=>{this.loggerService.log("dealHistoryRequestService commitApartmentDealReassign",{apartmentId:e,userId:t});const a=await this.readDealStateByApartment(e,t);if(a.status!==gr&&a.status!==kr)throw new Error("commitApartmentDealBegin invalid state");if(!a.activeItem)throw new Error("commitApartmentDealBegin activeItem is null");await Promise.all([this.dealHistoryViewService.create({contact_id:a.activeItem.contact_id,apartment_id:e,user_id:t,deal_id:a.activeItem.deal_id,type:kr,comment:"",bid_id:null,payload:null}),this.dealViewService.update(a.activeItem.deal_id,{user_id:t})]),this.layoutService.reloadOutlet()})),a(this,"readDealStateByBid",(async(e,t)=>{this.loggerService.log("dealHistoryRequestService readDealStateByBid",{bidId:e,userId:t});const{documents:a}=await this.appwriteService.databases.listDocuments(Ko.databaseId,rl,[g.limit(1),g.equal("bid_id",e),g.equal("type",fr),g.orderDesc("$createdAt")]),{documents:i}=await this.appwriteService.databases.listDocuments(Ko.databaseId,rl,[g.limit(1),g.equal("bid_id",e),g.equal("type",gr),g.orderDesc("$createdAt")]),[o=null]=a,[l=null]=i,r=(()=>{if(!l)return fr;if(!o)return gr;const e=n(l.$createdAt),t=n(o.$createdAt);return e.isAfter(t)?gr:fr})(),s=[];if(l&&r===gr){const{documents:t}=await this.appwriteService.databases.listDocuments(Ko.databaseId,rl,[g.equal("bid_id",e),g.cursorBefore(l.$id),g.orderDesc("$createdAt")]);for(const e of t)e.type===kr&&s.push(e)}const[d=null]=s;return d&&l?(s.unshift(l),{status:kr,activeItem:d,reassign:s}):{status:r,activeItem:r===gr?l:null,reassign:s}})),a(this,"commitBidDealBegin",(async(e,t,a,i,o,l)=>{this.loggerService.log("dealHistoryRequestService commitBidDealBegin",{bidId:e,userId:t});if((await this.readDealStateByBid(e,t)).status!==fr)throw new Error("commitApartmentDealBegin invalid state");const{contact_id:r}=await this.bidViewService.read(e),{fio:n,telefon:s,tip_klienta:d}=await this.contactViewService.read(r),{id:c}=await this.dealViewService.create({status:"Новая сделка",bid_id:e,apartment_id:null,contact_id:r,target_apartment_id:null,target_bid_id:null,type:a,user_id:t,price:i,price_unit:o,fio:n,telefon:s,tip_klienta:d?d[0]:""}),m=["<pre>","Создана сделка <text-underline>".concat(a,"</text-underline>"),l?"Комментарий: ".concat(l):"","</pre>"].join("\n");await this.dealHistoryViewService.create({bid_id:e,user_id:t,deal_id:c,type:gr,comment:m,contact_id:r,apartment_id:null,payload:null}),this.layoutService.reloadOutlet()})),a(this,"commitBidDealEnd",(async(e,t,a,i)=>{this.loggerService.log("dealHistoryRequestService commitBidDealEnd",{bidId:e,userId:t});const o=await this.readDealStateByBid(e,t);if(o.status!==gr&&o.status!==kr)throw new Error("commitBidDealEnd invalid state");if(!o.activeItem)throw new Error("commitBidDealEnd activeItem is null");if(await this.dealHistoryViewService.create({bid_id:e,user_id:t,type:fr,deal_id:o.activeItem.deal_id,comment:a,contact_id:o.activeItem.contact_id,apartment_id:null,payload:null}),i){const{target_apartment_id:t}=await this.dealViewService.read(o.activeItem.deal_id);await this.bidViewService.moveToArchive(e),t&&await this.apartmentViewService.moveToArchive(t)}this.layoutService.reloadOutlet()})),a(this,"commitBidDealReassign",(async(e,t)=>{this.loggerService.log("dealHistoryRequestService commitBidDealReassign",{bidId:e,userId:t});const a=await this.readDealStateByBid(e,t);if(a.status!==gr&&a.status!==kr)throw new Error("commitApartmentDealBegin invalid state");if(!a.activeItem)throw new Error("commitApartmentDealBegin activeItem is null");await Promise.all([this.dealHistoryViewService.create({bid_id:e,user_id:t,type:kr,deal_id:a.activeItem.deal_id,contact_id:a.activeItem.contact_id,comment:"",apartment_id:null,payload:null}),this.dealViewService.update(a.activeItem.deal_id,{user_id:t})]),this.layoutService.reloadOutlet()})),a(this,"commitDealStatusByApartment",(async(e,t,a,i)=>{this.loggerService.log("dealHistoryRequestService commitDealStatusByApartment",{apartmentId:e});const{deal_id:o,contact_id:l}=await this.dealHistoryViewService.findByApartmentId(e),r=this.appwriteService.currentUser.$id,n=["<pre>","Статус изменен из <text-underline>".concat(t,"</text-underline> в <text-underline>").concat(a,"</text-underline>"),i?"Комментарий: ".concat(i):"","</pre>"].join("\n");"Закрытая сделка"!==a&&"Сделка сорвана"!==a?await this.dealHistoryViewService.create({contact_id:l,bid_id:null,user_id:r,type:wr,deal_id:o,comment:n,apartment_id:e,payload:null}):await this.commitApartmentDealEnd(e,r,n,"Закрытая сделка"===a)})),a(this,"commitDealStatusByBid",(async(e,t,a,i)=>{this.loggerService.log("dealHistoryRequestService commitDealStatusByBid",{bidId:e});const{deal_id:o,contact_id:l}=await this.dealHistoryViewService.findByBidId(e),r=this.appwriteService.currentUser.$id,n=["<pre>","Статус изменен из <text-underline>".concat(t,"</text-underline> в <text-underline>").concat(a,"</text-underline>"),i?"Комментарий: ".concat(i):"","</pre>"].join("\n");"Закрытая сделка"!==a&&"Сделка сорвана"!==a?await this.dealHistoryViewService.create({bid_id:e,user_id:r,type:wr,deal_id:o,comment:n,contact_id:l,apartment_id:null,payload:null}):await this.commitBidDealEnd(e,r,n,"Закрытая сделка"===a)})),_(this,{})}}class zr{constructor(){a(this,"dealHistoryDbService",v(Cl.dealHistoryDbService)),a(this,"loggerService",v(Cl.loggerService)),a(this,"createSubject",this.dealHistoryDbService.createSubject),a(this,"reloadSubject",this.dealHistoryDbService.reloadSubject),a(this,"updateSubject",this.dealHistoryDbService.updateSubject),a(this,"create",(async e=>(this.loggerService.log("dealHistoryViewService create",e),await this.dealHistoryDbService.create(e)))),a(this,"update",(async(e,t)=>(this.loggerService.log("dealHistoryViewService update",t),await this.dealHistoryDbService.update(e,t)))),a(this,"remove",(async e=>(this.loggerService.log("dealHistoryViewService remove",{id:e}),await this.dealHistoryDbService.remove(e)))),a(this,"read",(async e=>{this.loggerService.log("dealHistoryViewService read",{id:e});return await this.dealHistoryDbService.findById(e)})),a(this,"findByApartmentId",(async e=>(this.loggerService.log("dealHistoryViewService findByApartmentId"),await this.dealHistoryDbService.findByApartmentId(e)))),a(this,"findByBidId",(async e=>(this.loggerService.log("dealHistoryViewService findByBidId"),await this.dealHistoryDbService.findByBidId(e)))),a(this,"findByContactId",(async e=>(this.loggerService.log("dealHistoryViewService findByContactId"),await this.dealHistoryDbService.findByContactId(e)))),a(this,"findAllByApartmentId",(async e=>{if(this.loggerService.log("dealHistoryViewService findAllByApartmentId"),!e)throw new Error("dealHistoryViewService findAllByApartmentId id is null");return await this.dealHistoryDbService.findAllByApartmentId(e)})),a(this,"findAllByBidId",(async e=>{if(this.loggerService.log("dealHistoryViewService findAllByBidId"),!e)throw new Error("dealHistoryViewService findAllByBidId id is null");return await this.dealHistoryDbService.findAllByBidId(e)})),a(this,"findAllByContactId",(async e=>{if(this.loggerService.log("dealHistoryViewService findAllByContactId"),!e)throw new Error("dealHistoryViewService findAllByContactId id is null");return await this.dealHistoryDbService.findAllByContactId(e)})),a(this,"tryRead",(async e=>{this.loggerService.log("dealHistoryViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),_(this,{})}}class xr{constructor(){a(this,"dealHistoryRequestService",v(Cl.dealHistoryRequestService)),a(this,"dealViewService",v(Cl.dealViewService)),a(this,"commidDealHistoryInternal",(async(e,t,a,i,o)=>{try{if(e)return void(await this.dealHistoryRequestService.commitDealStatusByApartment(e,a,i,o));if(t)return void(await this.dealHistoryRequestService.commitDealStatusByBid(t,a,i,o))}catch(l){console.log(l)}})),a(this,"commitDealStatusChange",(async(e,t,a,i,o,l,r,n)=>{await Promise.all([this.commidDealHistoryInternal(t,a,l,r,n),this.dealViewService.update(e,{status:r,target_apartment_id:i,target_bid_id:o})])})),a(this,"commitBidDealEnd",(async(e,t,a,i)=>{const{$id:o,status:l}=await this.dealViewService.findByBidId(e);await this.commitDealStatusChange(o,null,e,t,null,l,a,i)})),a(this,"commitApartmentDealEnd",(async(e,t,a,i)=>{const{$id:o,status:l}=await this.dealViewService.findByApartmentId(e);await this.commitDealStatusChange(o,e,null,null,t,l,a,i)})),_(this,{})}}class Ar{constructor(){a(this,"dealDbService",v(Cl.dealDbService)),a(this,"loggerService",v(Cl.loggerService)),a(this,"reloadSubject",this.dealDbService.reloadSubject),a(this,"createSubject",this.dealDbService.createSubject),a(this,"removeSubject",this.dealDbService.removeSubject),a(this,"updateSubject",this.dealDbService.updateSubject),a(this,"create",(async e=>(this.loggerService.log("dealViewService create",e),await this.dealDbService.create(e)))),a(this,"update",(async(e,t)=>(this.loggerService.log("dealViewService update",t),await this.dealDbService.update(e,t)))),a(this,"remove",(async e=>(this.loggerService.log("dealViewService remove",{id:e}),await this.dealDbService.remove(e)))),a(this,"read",(async e=>{this.loggerService.log("dealViewService read",{id:e});return await this.dealDbService.findById(e)})),a(this,"tryRead",(async e=>{this.loggerService.log("dealViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),a(this,"readStatusByApartmentId",(async e=>{this.loggerService.log("dealViewService readStatusByApartmentId");let t="";try{const{status:a}=await this.dealDbService.findByApartmentId(e);t=a}catch(a){t="Свободно"}finally{return t}})),a(this,"readStatusByBidId",(async e=>{this.loggerService.log("dealViewService readStatusByBidId");let t="";try{const{status:a}=await this.dealDbService.findByBidId(e);t=a}catch(a){t="Свободно"}finally{return t}})),a(this,"readStatusByContactId",(async e=>{this.loggerService.log("dealViewService readStatusByContactId");let t="";try{const{status:a}=await this.dealDbService.findByContactId(e);t=a}catch(a){t=""}finally{return t}})),a(this,"findByDealStatus",(async e=>(this.loggerService.log("dealViewService findByDealStatus"),await this.dealDbService.findByDealStatus(e)))),a(this,"findByApartmentId",(async e=>(this.loggerService.log("dealViewService findByApartmentId"),await this.dealDbService.findByApartmentId(e)))),a(this,"findByBidId",(async e=>(this.loggerService.log("dealViewService findByBidId"),await this.dealDbService.findByBidId(e)))),a(this,"findByContactId",(async e=>(this.loggerService.log("dealViewService findByContactId"),await this.dealDbService.findByContactId(e)))),a(this,"findOccupiedByTargetApartmentId",(async e=>(this.loggerService.log("dealViewService findOccupiedByTargetApartmentId"),await this.dealDbService.findOccupiedByTargetApartmentId(e)))),a(this,"findOccupiedByTagetBidId",(async e=>(this.loggerService.log("dealViewService findOccupiedByTagetBidId"),await this.dealDbService.findOccupiedByTagetBidId(e)))),a(this,"findOccupiedByApartmentId",(async e=>(this.loggerService.log("dealViewService findOccupiedByApartmentId"),await this.dealDbService.findOccupiedByApartmentId(e)))),a(this,"findOccupiedByBidId",(async e=>(this.loggerService.log("dealViewService findOccupiedByBidId"),await this.dealDbService.findOccupiedByBidId(e)))),_(this,{})}}class Tr{constructor(){a(this,"roleViewService",v(Cl.roleViewService)),a(this,"settingsViewService",v(Cl.settingsViewService)),a(this,"getCurrencyType",k((async()=>({eur:"EUR",usd:"USD",uzs:"UZS"})))),a(this,"getUserRoles",(async()=>(await this.roleViewService.findAll()).reduce(((e,{id:t,title:a})=>({...e,[t]:a})),{}))),a(this,"getMasterDetailMode",(async()=>({[B.Tabs]:"Вкладки",[B.Paper]:"Скроллер"}))),a(this,"getCountries",k((async()=>await D("".concat(Yo,"/country-list.json"))))),a(this,"getMahallya",k((async()=>await D("".concat(Yo,"/mahallya.json"))))),a(this,"getUlicza",k((async()=>await D("".concat(Yo,"/ulicza.json"))))),a(this,"getSocialMediaLinksRaw",k((async()=>{const e=await this.settingsViewService.getValue(),t=[wl,fl,kl,Sl];return[...new Array(1)].flatMap(((a,i)=>t.map((t=>({type:t,id:i+1,label:t,link:h.get(e,"".concat(t,"_link_").concat(i+1)),enabled:h.get(e,"".concat(t,"_link_enabled_").concat(i+1))}))))).filter((({enabled:e})=>e)).reduce(((e,{id:t,type:a,label:i,link:o,enabled:l})=>({...e,["".concat(a,"-").concat(t)]:{label:i,link:o,enabled:l}})),{})}))),a(this,"getInstagramPrimaryLink",(async()=>{const e=await this.getSocialMediaLinksRaw(),t=Object.entries(e).filter((([e])=>e.includes(wl)));return t.length?t[0][1].link:null})),a(this,"getTelegramPrimaryLink",(async()=>{const e=await this.getSocialMediaLinksRaw(),t=Object.entries(e).filter((([e])=>e.includes(fl)));return t.length?t[0][1].link:null})),a(this,"getFacebookPrimaryLink",(async()=>{const e=await this.getSocialMediaLinksRaw(),t=Object.entries(e).filter((([e])=>e.includes(Sl)));return t.length?t[0][1].link:null})),a(this,"getYoutubePrimaryLink",(async()=>{const e=await this.getSocialMediaLinksRaw(),t=Object.entries(e).filter((([e])=>e.includes(kl)));return t.length?t[0][1].link:null})),a(this,"getTelegramMapRaw",k((async()=>{const e=await this.settingsViewService.getValue();return[...new Array(5)].map(((t,a)=>({id:a+1,token:h.get(e,"telegram_token_".concat(a+1)),channel:h.get(e,"telegram_channel_".concat(a+1)),enabled:h.get(e,"telegram_channel_enabled_".concat(a+1))}))).filter((({enabled:e})=>e)).reduce(((e,t)=>({...e,[t.id]:t})),{})}))),a(this,"getTelegramMap",(async()=>{const e=await this.getTelegramMapRaw();return Object.entries(e).reduce(((e,[t,{channel:a}])=>({...e,[t]:a})),{})})),a(this,"getAgencyMapRaw",k((async()=>{const e=await this.settingsViewService.getValue();return[...new Array(5)].map(((t,a)=>({id:a+1,phone:h.get(e,"telegram_agency_".concat(a+1)),telegram:h.get(e,"telegram_agency_nickname_".concat(a+1)),enabled:h.get(e,"telegram_agency_enabled_".concat(a+1))}))).filter((({enabled:e})=>e)).reduce(((e,t)=>({...e,[t.id]:t})),{})}))),a(this,"getAgencyMap",(async()=>{const e=await this.getAgencyMapRaw();return Object.entries(e).reduce(((e,[t,{phone:a,telegram:i}])=>({...e,[t]:"".concat(a," - ").concat(i)})),{})})),a(this,"getAgentMapRaw",k((async()=>{const e=await this.settingsViewService.getValue();return[...new Array(5)].map(((t,a)=>({id:a+1,phone:h.get(e,"telegram_agent_".concat(a+1)),telegram:h.get(e,"telegram_agent_nickname_".concat(a+1)),enabled:h.get(e,"telegram_agent_enabled_".concat(a+1))}))).filter((({enabled:e})=>e)).reduce(((e,t)=>({...e,[t.id]:t})),{})}))),a(this,"getAgentMap",(async()=>{const e=await this.getAgentMapRaw();return Object.entries(e).reduce(((e,[t,{phone:a,telegram:i}])=>({...e,[t]:"".concat(a," - ").concat(i)})),{})})),a(this,"prefetch",k((()=>Promise.all([this.getCountries(),this.getMahallya(),this.getUlicza(),this.getAgencyMapRaw(),this.getAgentMapRaw(),this.getTelegramMapRaw(),this.getSocialMediaLinksRaw()])))),_(this,{})}}class Fr{constructor(){a(this,"appwriteService",v(Cl.appwriteService)),a(this,"userViewService",v(Cl.userViewService)),a(this,"_alerts",[]),a(this,"getDocument",(async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(Ko.databaseId,Qo,[g.equal("$id",e),g.limit(1)]);return t.length?t[0]:null})),a(this,"findAll",(async()=>{const e=await this.appwriteService.databases.listDocuments(Ko.databaseId,Qo,[g.orderDesc("$createdAt")]);return xl(e.documents)})),a(this,"handleBuildAlerts",(async e=>{const{sideMenu:t=null}=Ih()||{},{id:a=null}=ns();return(await Promise.all(e.filter((e=>null!==e.path)).filter((e=>null!==e.entity_id)).filter((e=>e.path===t)).filter((e=>e.entity_id===a)).filter((e=>e.id!==this.appwriteService.currentUser.$id)).filter((e=>"create"!==e.id)).filter((({$updatedAt:e})=>{const t=n(e);return n().diff(t,"minute")<15})).map((async({id:e,$updatedAt:t})=>{const a=await this.userViewService.tryRead(e);if(!a)return null;const i=[a.first_name,a.last_name,a.middle_name].join(" "),o=n(t);let l=o.get("hour").toString(),r=o.get("minute").toString(),s=o.get("second").toString();l=1===l.length?"0"+l:l,r=1===r.length?"0"+r:r,s=1===s.length?"0"+s:s;return{color:"error",content:"Сотрудник ".concat(i," смотрит форму (Время ").concat(l,":").concat(r,":").concat(s,")")}})))).filter((e=>!!e))})),a(this,"handleFetch",j((async()=>{const e=await this.findAll(),t=await this.handleBuildAlerts(e);L((()=>{this._alerts=t}))}))),a(this,"create",(async e=>await this.appwriteService.databases.createDocument(Ko.databaseId,Qo,this.appwriteService.currentUser.$id,Al(e)))),a(this,"update",(async e=>await this.appwriteService.databases.updateDocument(Ko.databaseId,Qo,this.appwriteService.currentUser.$id,Al(e)))),a(this,"prefetch",k((async()=>{this.appwriteService.isAuthorized&&(await this.handleFetch(),this.appwriteService.client.subscribe("databases.".concat(Ko.databaseId,".collections.").concat(Qo,".documents"),(async()=>{await this.handleFetch()})))}))),_(this,{_alerts:x,alerts:A})}get alerts(){return R(this._alerts)}}class Cr{constructor(){a(this,"routerService",v(Cl.routerService)),a(this,"loggerService",v(Cl.loggerService)),a(this,"errorSubject",new b),a(this,"handleGlobalError",(e=>{console.error(e),this.loggerService.error(e),this.routerService.push("/error_page"),this.errorSubject.next()})),u(this)}}class Vr{constructor(){a(this,"appwriteService",v(Cl.appwriteService)),a(this,"userViewService",v(Cl.userViewService)),a(this,"roleViewService",v(Cl.roleViewService)),a(this,"_features",[]),a(this,"getFeaturesByUserId",(async e=>{const{user_role:t=null,user_features:a=[]}=await this.userViewService.tryRead(e)||{},i=await this.roleViewService.tryRead(t?t[0]:"unknown"),o=[...a||[],...(null==i?void 0:i.role_features)||[]];return[...new Set(o)]})),a(this,"init",k((async()=>{if(!this.isAuthorized)return void this.init.clear();const e=await this.getFeaturesByUserId(this.appwriteService.currentUser.$id);L((()=>{this._features=e}))}))),a(this,"getFeatures",(async()=>(await this.init(),this.features))),a(this,"getAccessLevel",(async()=>(await this.init(),this.accessLevel))),a(this,"hasFeature",(async(...e)=>{const t=await this.getFeatures();return e.some((e=>t.includes(e)))})),_(this,{_features:x,features:A,accessLevel:A})}get isAuthorized(){return this.appwriteService.isAuthorized}get features(){return R(this._features)}get readAccessLevel(){const e=new Set(this.features).has("vizhu_vse_urovni")?5:0;return Math.max(this.accessLevel,e)}get accessLevel(){const e=new Set(this.features),t=[...new Array(5)].map(((e,t)=>t+1)).reverse();if(e.has("vizhu_vse_urovni"))return 5;for(const a of t)if(e.has("level-".concat(a)))return a;return console.warn("FeatureService accessLevel unset level"),0}}class Lr{constructor(){a(this,"appbarSubject",new b),a(this,"modalSubject",new b),a(this,"reloadOutletSubject",new b),a(this,"_modalLoading",0),a(this,"_appbarLoading",0),a(this,"setModalLoader",(e=>{this._modalLoading=Math.max(this._modalLoading+(e?1:-1),0),this.modalSubject.next(e)})),a(this,"setAppbarLoader",(e=>{this._appbarLoading=Math.max(this._appbarLoading+(e?1:-1),0),this.appbarSubject.next(e)})),a(this,"dropModalLoader",(()=>{this._modalLoading=0,this.modalSubject.next(!1)})),a(this,"dropAppbarLoader",(()=>{this._appbarLoading=0,this.appbarSubject.next(!1)})),a(this,"reloadOutlet",(()=>{this.reloadOutletSubject.next()})),u(this)}get hasModalLoader(){return!!this._modalLoading}get hasAppbarLoader(){return!!this._appbarLoading}}class Ir{constructor(){a(this,"appwriteService",v(Cl.appwriteService)),a(this,"error",(e=>{q((t=>{t.setExtra("user_id",this.appwriteService.currentUser.$id),t.setExtra("email",this.appwriteService.currentUser.email),P(e)}))})),a(this,"log",((e,t)=>{console.log(e,t),q((a=>{a.setExtra("user_id",this.appwriteService.currentUser.$id),a.setExtra("email",this.appwriteService.currentUser.email),a.setExtra("msg",e),t&&a.setExtra("data",t),E("Log for ".concat(this.appwriteService.currentUser.email))}))})),a(this,"prefetch",k((async()=>{N({dsn:"https://8cba9840891744e8835be09bf6f2c5e6@o4505477865996288.ingest.sentry.io/4505477935726592",environment:"frontend"})}))),_(this,{})}}const Mr=(()=>{let e=null,t=null;return()=>{const{pathname:a}=os.routerService.location;return e!==a&&(t=(()=>{const e=rs("id");let t=!1,a=!1,i=!1;return e&&os.routerService.location.pathname.startsWith("/bid")&&(i=!0),e&&os.routerService.location.pathname.startsWith("/apartment")&&(a=!0),e&&os.routerService.location.pathname.startsWith("/contact")&&(t=!0),{id:e||"unknown",isContact:t,isApartment:a,isBid:i}})(),e=a),t}})(),Br=["system_created_by","system_only_for_owner","system_allowance"],Dr={system_created_by:null,system_only_for_owner:!1,system_allowance:[]},Rr=async(e,t)=>{const{documents:[a=null]}=await os.appwriteService.databases.listDocuments(Ko.databaseId,e,[g.select([...Br]),g.equal("$id",t),g.limit(1),g.orderDesc("$createdAt")]);return a||Dr};window.readOwnerMetadata=Rr;class jr{constructor(){a(this,"getOwnerMetadata",(async()=>{const{id:e,isApartment:t,isBid:a,isContact:i}=Mr();return a?await Rr(il,e):t?await Rr(el,e):i?await Rr(tl,e):void 0})),a(this,"getAreaMetadataByBid",(async e=>({system_metro:O(e.metro,e.metro_list).filter((e=>e)),system_rajon:O(e.rajon,e.rajon_list).filter((e=>e)),system_mahallya:O(e.mahallya,e.mahallya_list).filter((e=>e))}))),a(this,"getAreaMetadataByApartment",(async e=>({system_metro:O(e.metro).filter((e=>e)),system_rajon:O(e.rajon).filter((e=>e)),system_mahallya:O(e.mahallya).filter((e=>e))}))),_(this,{})}}const qr="databases.".concat(Ko.databaseId,".collections.").concat(dl,".documents");class Pr{constructor(){a(this,"createSubject",new b),a(this,"reloadSubject",new b),a(this,"updateSubject",new b),a(this,"appwriteService",v(Cl.appwriteService)),a(this,"realtimeService",v(Cl.realtimeService)),a(this,"findAllByUserId",k((async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(Ko.databaseId,dl,[g.equal("user_id",e),g.orderDesc("$createdAt")]);return xl(t)}))),a(this,"findAllUnreadByUserId",k((async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(Ko.databaseId,dl,[g.equal("user_id",e),g.equal("is_read",[!1]),g.orderDesc("$createdAt")]);return xl(t)}))),a(this,"findById",(async e=>{const t=await this.appwriteService.databases.getDocument(Ko.databaseId,dl,e);return zl(t)})),a(this,"create",(async e=>{const t=await this.appwriteService.databases.createDocument(Ko.databaseId,dl,this.appwriteService.createId(),{is_read:!1,...Al(e)});this.findAllByUserId.clear(),this.findAllUnreadByUserId.clear();const a=zl(t);return this.createSubject.next(a),this.reloadSubject.next(),a})),a(this,"update",(async(e,t)=>{const a=await this.appwriteService.databases.updateDocument(Ko.databaseId,dl,e,{is_read:!1,...Al(t)});this.findAllByUserId.clear(),this.findAllUnreadByUserId.clear();const i=zl(a);return this.updateSubject.next([e,i]),this.reloadSubject.next(),i})),a(this,"remove",(async e=>{await this.appwriteService.databases.deleteDocument(Ko.databaseId,dl,e),this.findAllByUserId.clear(),this.findAllUnreadByUserId.clear(),this.reloadSubject.next()})),a(this,"prefetch",k((async()=>{this.realtimeService.subscribe(qr,(({events:e,payload:t})=>{if(e.includes(_l)&&(this.findAllByUserId.clear(),this.findAllUnreadByUserId.clear(),this.reloadSubject.next(),this.createSubject.next(t)),e.includes(gl)&&(this.findAllByUserId.clear(),this.findAllUnreadByUserId.clear(),this.reloadSubject.next()),e.includes(vl)){this.findAllByUserId.clear(),this.findAllUnreadByUserId.clear();const e=zl(t);this.updateSubject.next([t.$id,e])}}))}))),_(this,{})}}class Er{constructor(){a(this,"notifyDbService",v(Cl.notifyDbService)),a(this,"loggerService",v(Cl.loggerService)),a(this,"createSubject",this.notifyDbService.createSubject),a(this,"reloadSubject",this.notifyDbService.reloadSubject),a(this,"updateSubject",this.notifyDbService.updateSubject),a(this,"create",(async e=>(this.loggerService.log("roleViewService create",e),await this.notifyDbService.create(e)))),a(this,"findAllByUserId",(async e=>(this.loggerService.log("roleViewService findAllByUserId"),await this.notifyDbService.findAllByUserId(e)))),a(this,"findAllUnreadByUserId",(async e=>(this.loggerService.log("roleViewService findAllUnreadByUserId"),await this.notifyDbService.findAllUnreadByUserId(e)))),a(this,"toggleReadAllByUserId",(async e=>{this.loggerService.log("roleViewService toggleReadAllByUserId");const t=await this.notifyDbService.findAllUnreadByUserId(e);await Promise.all(t.map((async({$id:e})=>{this.notifyDbService.update(e,{is_read:!0})})))})),a(this,"update",(async(e,t)=>(this.loggerService.log("roleViewService update",t),await this.notifyDbService.update(e,t)))),a(this,"remove",(async e=>(this.loggerService.log("roleViewService remove",{id:e}),await this.notifyDbService.remove(e)))),a(this,"read",(async e=>{this.loggerService.log("roleViewService read",{id:e});return await this.notifyDbService.findById(e)})),a(this,"tryRead",(async e=>{this.loggerService.log("roleViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),_(this,{})}}const Nr=H((async e=>await Rr(il,e))),Or=H((async e=>await Rr(tl,e))),Hr=H((async e=>await Rr(el,e)));class Ur{constructor(){a(this,"appwriteService",v(Cl.appwriteService)),a(this,"featureService",v(Cl.featureService)),a(this,"routerService",v(Cl.routerService)),a(this,"dealViewService",v(Cl.dealViewService)),a(this,"hasReassignDelayFlagByApartmentId",(async e=>{const t=await U(W(this.featureService.hasFeature("zaderzhka_perenaznacheniya_otvetstvennogo")),(async()=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(Ko.databaseId,rl,[g.limit(1),g.select(["$id"]),g.equal("apartment_id",e),g.notEqual("type","deal-status"),g.orderDesc("$createdAt")]);if(!t)return!0;if("deal-end"===t.type)return!0;return or()-or(n(t.$createdAt))>3})());return W(t)})),a(this,"hasReassignDelayFlagByBidId",(async e=>{const t=await U(W(this.featureService.hasFeature("zaderzhka_perenaznacheniya_otvetstvennogo")),(async()=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(Ko.databaseId,rl,[g.limit(1),g.select(["$id"]),g.equal("bid_id",e),g.notEqual("type","deal-status"),g.orderDesc("$createdAt")]);if(!t)return!0;if("deal-end"===t.type)return!0;return or()-or(n(t.$createdAt))>3})());return W(t)})),a(this,"getOwnerContactPermissionByApartmentId",(e=>{const t=this.appwriteService.currentUser.$id,a=H((async()=>await Rr(el,e)));return U(this.featureService.hasFeature("vizhu_kontakty_pod_bronyu"),$((()=>U(W(this.featureService.hasFeature("ne_vizhu_nomera_telefonov_chuzhih_kontaktov")),(async()=>{const{system_created_by:e}=await a();return e===t})()))(),(async()=>{const{system_created_by:e,system_only_for_owner:i}=await a();return!i||e===t})(),(async()=>{const a=await this.dealViewService.findOccupiedByApartmentId(e);return!a||a.user_id===t})(),(async()=>{const a=await this.dealViewService.findOccupiedByTargetApartmentId(e);return!a||a.user_id===t})()))})),a(this,"getOwnerContactPermissionByBidId",(e=>{const t=this.appwriteService.currentUser.$id,a=H((async()=>await Rr(il,e)));return U(this.featureService.hasFeature("vizhu_kontakty_pod_bronyu"),$((()=>U(W(this.featureService.hasFeature("ne_vizhu_nomera_telefonov_chuzhih_kontaktov")),(async()=>{const{system_created_by:e}=await a();return e===t})()))(),(async()=>{const{system_created_by:e,system_only_for_owner:i}=await a();return!i||e===t})(),(async()=>{const a=await this.dealViewService.findOccupiedByBidId(e);return!a||a.user_id===t})(),(async()=>{const a=await this.dealViewService.findOccupiedByTagetBidId(e);return!a||a.user_id===t})()))})),a(this,"getOwnerContactPermissionByContactId",(e=>{const t=this.appwriteService.currentUser.$id,a=H((async()=>await Rr(tl,e)));return $((()=>U(W(this.featureService.hasFeature("ne_vizhu_nomera_telefonov_chuzhih_kontaktov")),(async()=>{const{system_created_by:e}=await a();return e===t})()))(),(async()=>{const{system_created_by:e,system_only_for_owner:i}=await a();return!i||e===t})())})),a(this,"hasInternOwnerContactPermission",H((async()=>{const{id:e,isApartment:t,isBid:a,isContact:i}=Mr(),o=await this.featureService.hasFeature("ne_vizhu_nomera_telefonov_chuzhih_kontaktov");let l=!1,r=!1,n=!1;if(o){if(a){const{system_created_by:t}=await Nr(e);n=this.appwriteService.currentUser.$id===t}if(t){const{system_created_by:t}=await Hr(e);r=this.appwriteService.currentUser.$id===t}if(i){const{system_created_by:t}=await Or(e);l=this.appwriteService.currentUser.$id===t}}return U(!o,l,r,n)}))),a(this,"hasExclusiveOwnerContactPermission",H((async()=>{const{id:e,isApartment:t,isBid:a,isContact:i}=Mr();let o=!0,l=!0,r=!0;if(t){const{system_created_by:t,system_only_for_owner:a,system_allowance:i}=await Hr(e);if(a){const e=this.appwriteService.currentUser.$id;o=U(t===e,!!(null==i?void 0:i.includes(e)))}}if(i){const{system_created_by:t,system_only_for_owner:a,system_allowance:i}=await Or(e);if(a){const e=this.appwriteService.currentUser.$id;l=U(t===e,!!(null==i?void 0:i.includes(e)))}}if(a){const{system_created_by:t,system_only_for_owner:a,system_allowance:i}=await Nr(e);if(a){const e=this.appwriteService.currentUser.$id;r=U(t===e,!!(null==i?void 0:i.includes(e)))}}return $(o,l,r)}))),a(this,"hasOccupationOwnerContactPermission",H((async()=>{const{id:e,isApartment:t,isBid:a}=Mr();let i=!0;if(t){const t=await this.dealViewService.findOccupiedByApartmentId(e);t&&(i=t.user_id===this.appwriteService.currentUser.$id)}if(a){const t=await this.dealViewService.findOccupiedByBidId(e);t&&(i=t.user_id===this.appwriteService.currentUser.$id)}return $(i,!0)}))),a(this,"hasTargetOccupationOwnerContactPermission",H((async()=>{const{id:e,isApartment:t,isBid:a}=Mr();let i=!0;if(t){const t=await this.dealViewService.findOccupiedByTargetApartmentId(e);t&&(i=t.user_id===this.appwriteService.currentUser.$id)}if(a){const t=await this.dealViewService.findOccupiedByTagetBidId(e);t&&(i=t.user_id===this.appwriteService.currentUser.$id)}return $(i,!0)}))),a(this,"hasAllOwnerContactPermission",H((()=>U(this.featureService.hasFeature("vizhu_kontakty_pod_bronyu"),$(this.hasInternOwnerContactPermission(),this.hasExclusiveOwnerContactPermission(),this.hasOccupationOwnerContactPermission(),this.hasTargetOccupationOwnerContactPermission()))))),_(this,{})}}class Wr{constructor(){a(this,"featureService",v(Cl.featureService)),a(this,"routerService",v(Cl.routerService)),a(this,"permissionRequestService",v(Cl.permissionRequestService)),a(this,"previewModeService",v(Cl.previewModeService)),a(this,"hasContactNumberPermission",(async()=>await $(this.previewModeService.hasPreviewModeDisabled(),this.permissionRequestService.hasAllOwnerContactPermission()))),a(this,"hasContactEmailPermission",(async()=>await $(this.previewModeService.hasPreviewModeDisabled(),this.permissionRequestService.hasAllOwnerContactPermission()))),a(this,"hasApartmentHouseNumberPermission",(async()=>await $(this.previewModeService.hasPreviewModeDisabled()))),a(this,"hasBidHouseNumberPermission",(async()=>await $(this.previewModeService.hasPreviewModeDisabled()))),a(this,"hasResponsiblePermission",(async()=>await $(this.previewModeService.hasPreviewModeDisabled()))),a(this,"hasOwnerPricePermission",(async()=>await $(this.previewModeService.hasPreviewModeDisabled()))),a(this,"hasCommissionPermission",(async()=>await $(this.previewModeService.hasPreviewModeDisabled()))),a(this,"hasMasterDetailPermission",(async()=>await $(this.previewModeService.hasPreviewModeDisabled()))),a(this,"hasDescriptionPermission",(async()=>await $(this.previewModeService.hasPreviewModeDisabled()))),a(this,"hasFioPermission",(async()=>await $(this.previewModeService.hasPreviewModeDisabled()))),a(this,"hasApartmentViewPermission",(async()=>U(await this.featureService.hasFeature("prosmotr_obekta")))),a(this,"hasBidViewPermission",(async()=>U(await this.featureService.hasFeature("prosmotr_zayavki")))),a(this,"hasContactViewPermission",(async()=>U(await this.featureService.hasFeature("prosmotr_kontakta")))),a(this,"hasApartmentCreatePermission",(async()=>U(await this.featureService.hasFeature("sozdanie_obekta")))),a(this,"hasBidCreatePermission",(async()=>U(await this.featureService.hasFeature("sozdanie_zayavki")))),a(this,"hasContactCreatePermission",(async()=>U(await this.featureService.hasFeature("sozdanie_kontakta")))),a(this,"hasApartmentUpdatePermission",(async()=>U(await this.featureService.hasFeature("redaktirovanie_obekta")))),a(this,"hasBidUpdatePermission",(async()=>U(await this.featureService.hasFeature("redaktirovanie_zayavki")))),a(this,"hasContactUpdatePermission",(async()=>U(await this.featureService.hasFeature("redaktirovanie_kontakta")))),a(this,"hasUsersUpdatePermission",(async()=>U(await this.featureService.hasFeature("redaktirovanie_sotrudnika")))),a(this,"hasSettingsCreateRolePermission",(async()=>U(await this.featureService.hasFeature("sozdanie_roli")))),a(this,"hasSettingsEditRolePermission",(async()=>U(await this.featureService.hasFeature("redaktirovanie_roli")))),a(this,"hasUsersViewPhoneAndEmailPermission",(async()=>U(await this.featureService.hasFeature("prosmotr_nomera_telefona_i_email")))),a(this,"hasUserServiceCommentMentionPermission",(async()=>U(await this.featureService.hasFeature("upominanie_polzovatelya")))),a(this,"hasUserServiceCommentAddingFilePermission",(async()=>U(await this.featureService.hasFeature("dobavlenie_fajla")))),a(this,"hasUsersAccessLevelsPermission",(async()=>U(await this.featureService.hasFeature("nastrojka_urovnej_dostupa")))),a(this,"hasSettingsEditPermission",(async()=>U(await this.featureService.hasFeature("dostup_k_nastrojkam")))),a(this,"hasManagerAllObjectsExclusivePermission",(async()=>U(await this.featureService.hasFeature("vse_obekty_eksklyuzivny")))),a(this,"hasAdvertisingPublicationPermission",(async()=>U(await this.featureService.hasFeature("publikacziya_reklamy")))),a(this,"hasAdvertisingKategoryAddPermission",(async()=>U(await this.featureService.hasFeature("dobavlenie_kategorii_i_podkategorii")))),a(this,"hasAnonymousEditingPermission",(async()=>U(await this.featureService.hasFeature("anonimnoe_redaktirovanie")))),a(this,"hasSuperAdminFlagPermission",(async()=>U(await this.featureService.hasFeature("superadmin")))),a(this,"getPermissions",(async()=>{let e=!1,t=!1,a=!1,i=!1,o=!1,l=!1,r=!1,n=!1,s=!1,d=!1,c=!1,m=!1,u=!1,p=!1,y=!1,h=!1,b=!1,v=!1,_=!1,g=!1,f=!1,k=!1,w=!1,S=!1,z=!1,x=!1,A=!1,T=!1,F=!1,C=!1,V=!1,L=!1,I=!1;return await Promise.all([this.previewModeService.hasPreviewModeDisabled().then((t=>e=t)),this.hasContactNumberPermission().then((e=>t=e)),this.hasContactEmailPermission().then((e=>a=e)),this.hasApartmentHouseNumberPermission().then((e=>i=e)),this.hasBidHouseNumberPermission().then((e=>o=e)),this.hasResponsiblePermission().then((e=>l=e)),this.hasOwnerPricePermission().then((e=>r=e)),this.hasCommissionPermission().then((e=>n=e)),this.hasMasterDetailPermission().then((e=>s=e)),this.hasDescriptionPermission().then((e=>d=e)),this.hasFioPermission().then((e=>c=e)),this.hasApartmentViewPermission().then((e=>m=e)),this.hasBidViewPermission().then((e=>u=e)),this.hasContactViewPermission().then((e=>p=e)),this.hasApartmentCreatePermission().then((e=>y=e)),this.hasBidCreatePermission().then((e=>h=e)),this.hasContactCreatePermission().then((e=>b=e)),this.hasApartmentUpdatePermission().then((e=>v=e)),this.hasBidUpdatePermission().then((e=>_=e)),this.hasContactUpdatePermission().then((e=>g=e)),this.hasUsersUpdatePermission().then((e=>f=e)),this.hasSettingsCreateRolePermission().then((e=>k=e)),this.hasSettingsEditRolePermission().then((e=>w=e)),this.hasUsersViewPhoneAndEmailPermission().then((e=>S=e)),this.hasUserServiceCommentMentionPermission().then((e=>z=e)),this.hasUserServiceCommentAddingFilePermission().then((e=>x=e)),this.hasUsersAccessLevelsPermission().then((e=>A=e)),this.hasSettingsEditPermission().then((e=>T=e)),this.hasManagerAllObjectsExclusivePermission().then((e=>F=e)),this.hasAdvertisingPublicationPermission().then((e=>C=e)),this.hasAdvertisingKategoryAddPermission().then((e=>V=e)),this.hasAnonymousEditingPermission().then((e=>L=e)),this.hasSuperAdminFlagPermission().then((e=>I=e))]),{hasPreviewModeDisabled:e,hasContactNumberPermission:t,hasContactEmailPermission:a,hasApartmentHouseNumberPermission:i,hasBidHouseNumberPermission:o,hasResponsiblePermission:l,hasOwnerPricePermission:r,hasCommissionPermission:n,hasMasterDetailPermission:s,hasDescriptionPermission:d,hasFioPermission:c,hasApartmentViewPermission:m,hasBidViewPermission:u,hasContactViewPermission:p,hasApartmentCreatePermission:y,hasBidCreatePermission:h,hasContactCreatePermission:b,hasApartmentUpdatePermission:v,hasBidUpdatePermission:_,hasContactUpdatePermission:g,hasUsersUpdatePermission:f,hasSettingsCreateRolePermission:k,hasSettingsEditRolePermission:w,hasUsersViewPhoneAndEmailPermission:S,hasUserServiceCommentMentionPermission:z,hasUserServiceCommentAddingFilePermission:x,hasUsersAccessLevelsPermission:A,hasSettingsEditPermission:T,hasManagerAllObjectsExclusivePermission:F,hasAdvertisingPublicationPermission:C,hasAdvertisingKategoryAddPermission:V,hasAnonymousEditingPermission:L,hasSuperAdminFlagPermission:I}})),a(this,"prefetch",k((async()=>{await this.getPermissions()})))}}const $r=G("REAL_ESTATE_PREVIEW_MODE");class Gr{constructor(){a(this,"togglePreviewMode",(()=>{$r.setValue(!this.previewMode),M()})),a(this,"hasPreviewModeDisabled",(async()=>await Promise.resolve(!this.previewMode))),_(this,{})}get previewMode(){return $r.getValue()||!1}}class Yr{constructor(){a(this,"appwriteService",v(Cl.appwriteService)),a(this,"errorService",v(Cl.errorService)),a(this,"loggerService",v(Cl.loggerService)),a(this,"subscribeAppwrite",((e,t)=>(this.loggerService.log("realtimeService appwrite event bus fallback"),this.appwriteService.client.subscribe(e,t)))),a(this,"subscribe",((e,t)=>this.subscribeAppwrite(e,t))),_(this,{})}}const Kr="databases.".concat(Ko.databaseId,".collections.").concat(sl,".documents");class Xr{constructor(){a(this,"createSubject",new b),a(this,"reloadSubject",new b),a(this,"updateSubject",new b),a(this,"appwriteService",v(Cl.appwriteService)),a(this,"realtimeService",v(Cl.realtimeService)),a(this,"findById",(async e=>{const t=(await this.findAll()).find((t=>t.id===e));if(!t)throw new Error("roleDbService findById user not found");return zl(t)})),a(this,"findAll",k((async()=>{const{documents:e}=await this.appwriteService.databases.listDocuments(Ko.databaseId,sl,[g.orderDesc("$createdAt")]);return xl(e)}))),a(this,"create",(async e=>{const t=await this.appwriteService.databases.createDocument(Ko.databaseId,sl,this.appwriteService.createId(),Al(e));this.findAll.clear();const a=zl(t);return this.createSubject.next(a),a})),a(this,"update",(async(e,t)=>{const a=await this.appwriteService.databases.updateDocument(Ko.databaseId,sl,e,Al(t));this.findAll.clear();const i=zl(a);return this.updateSubject.next([e,i]),i})),a(this,"remove",(async e=>{await this.appwriteService.databases.deleteDocument(Ko.databaseId,sl,e),this.findAll.clear(),this.reloadSubject.next()})),a(this,"prefetch",k((async()=>{this.realtimeService.subscribe(Kr,(({events:e,payload:t})=>{if(e.includes(_l)&&(this.findAll.clear(),this.reloadSubject.next(),this.createSubject.next(t)),e.includes(gl)&&(this.findAll.clear(),this.reloadSubject.next()),e.includes(vl)){this.findAll.clear();const e=zl(t);this.updateSubject.next([t.$id,e])}}))}))),_(this,{})}}class Jr{constructor(){a(this,"roleDbService",v(Cl.roleDbService)),a(this,"loggerService",v(Cl.loggerService)),a(this,"createSubject",this.roleDbService.createSubject),a(this,"reloadSubject",this.roleDbService.reloadSubject),a(this,"updateSubject",this.roleDbService.updateSubject),a(this,"create",(async e=>(this.loggerService.log("roleViewService create",e),await this.roleDbService.create(e)))),a(this,"findAll",(async()=>(this.loggerService.log("roleViewService findAll"),await this.roleDbService.findAll()))),a(this,"update",(async(e,t)=>(this.loggerService.log("roleViewService update",t),await this.roleDbService.update(e,t)))),a(this,"remove",(async e=>(this.loggerService.log("roleViewService remove",{id:e}),await this.roleDbService.remove(e)))),a(this,"read",(async e=>{this.loggerService.log("roleViewService read",{id:e});return await this.roleDbService.findById(e)})),a(this,"tryRead",(async e=>{this.loggerService.log("roleViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),_(this,{})}}const Zr=Y(),Qr="/",en=new class{constructor(){a(this,"_stack",[]),a(this,"push",(e=>{this._stack.unshift(e),this._stack=this._stack.slice(0,200)})),a(this,"getBasePath",(e=>{const[t]=this._stack,[a=Qr]=t.split("/").slice(1),i=a.includes("_")?a.slice(0,a.lastIndexOf("_")):a;let o=e;for(const l of this._stack){if(!l.startsWith("/".concat(i)))break;o=l}return o}))}};class tn{constructor(){a(this,"previousPath",Qr),a(this,"location",Zr.location),a(this,"action",Zr.action),a(this,"subscribeLeave",(e=>K.create((e=>this.listen((({action:t})=>{"PUSH"===t&&e()})))).once(e))),a(this,"getBasePath",(e=>en.getBasePath(e))),a(this,"hasViewRedirectFlag",(()=>!!this.locationState.viewRedirectFlag)),a(this,"updateState",(()=>{this.location=Zr.location,this.action=Zr.action,en.push(this.path),this.previousPath=this.path})),a(this,"createHref",(e=>{const t=Zr.createHref(e);return this.updateState(),t})),a(this,"push",((e,t)=>{const a=Zr.push(e,t);return this.updateState(),a})),a(this,"replace",((e,t)=>{const a=Zr.replace(e,t);return this.updateState(),a})),a(this,"go",(e=>{const t=Zr.go(e);return this.updateState(),t})),a(this,"back",(e=>{if(e){const t=en.getBasePath(e);return console.log(en,t),t!==this.path?void this.push(t):void this.push(e)}const t=Zr.back();return this.updateState(),t})),a(this,"forward",(()=>{const e=Zr.forward();return this.updateState(),e})),a(this,"listen",(e=>{const t=Zr.listen(e);return this.updateState(),t})),a(this,"block",(e=>{const t=Zr.block(e);return this.updateState(),t})),u(this)}get locationState(){return this.location.state?R(this.location.state):{}}get path(){var e;return(null==(e=this.location)?void 0:e.pathname)||Qr}}const an="databases.".concat(Ko.databaseId,".collections.").concat(nl,".documents");class on{constructor(){a(this,"createSubject",new b),a(this,"reloadSubject",new b),a(this,"updateSubject",new b),a(this,"appwriteService",v(Cl.appwriteService)),a(this,"realtimeService",v(Cl.realtimeService)),a(this,"findById",(async e=>{const t=await this.appwriteService.databases.getDocument(Ko.databaseId,nl,e);return zl(t)})),a(this,"create",(async e=>{const t=await this.appwriteService.databases.createDocument(Ko.databaseId,nl,this.appwriteService.createId(),Al(e)),a=zl(t);return this.createSubject.next(a),a})),a(this,"update",(async(e,t)=>{const a=await this.appwriteService.databases.updateDocument(Ko.databaseId,nl,e,Al(t));return zl(a)})),a(this,"remove",(async e=>{await this.appwriteService.databases.deleteDocument(Ko.databaseId,nl,e)})),a(this,"findAllByApartmentId",(async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(Ko.databaseId,nl,[g.orderDesc("$createdAt"),g.equal("apartment_id",e)]);return xl(t)})),a(this,"findByBidId",(async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(Ko.databaseId,nl,[g.orderDesc("$createdAt"),g.equal("bid_id",e)]);return xl(t)})),a(this,"prefetch",k((async()=>{this.realtimeService.subscribe(an,(({events:e,payload:t})=>{if(e.includes(_l)&&(this.reloadSubject.next(),this.createSubject.next(t)),e.includes(gl)&&this.reloadSubject.next(),e.includes(vl)){const e=zl(t);this.updateSubject.next([t.$id,e])}}))}))),_(this,{})}}class ln{constructor(){a(this,"serviceCommentDbService",v(Cl.serviceCommentDbService)),a(this,"loggerService",v(Cl.loggerService)),a(this,"createSubject",this.serviceCommentDbService.createSubject),a(this,"reloadSubject",this.serviceCommentDbService.reloadSubject),a(this,"updateSubject",this.serviceCommentDbService.updateSubject),a(this,"create",(async e=>(this.loggerService.log("serviceCommentViewService create",e),await this.serviceCommentDbService.create(e)))),a(this,"update",(async(e,t)=>(this.loggerService.log("serviceCommentViewService update",t),await this.serviceCommentDbService.update(e,t)))),a(this,"remove",(async e=>(this.loggerService.log("serviceCommentViewService remove",{id:e}),await this.serviceCommentDbService.remove(e)))),a(this,"read",(async e=>{this.loggerService.log("serviceCommentViewService read",{id:e});return await this.serviceCommentDbService.findById(e)})),a(this,"findAllByApartmentId",(async e=>{if(this.loggerService.log("serviceCommentViewService findAllByApartmentId"),!e)throw new Error("serviceCommentViewService findAllByApartmentId id is null");return await this.serviceCommentDbService.findAllByApartmentId(e)})),a(this,"findByBidId",(async e=>{if(this.loggerService.log("serviceCommentViewService findByBidId"),!e)throw new Error("serviceCommentViewService findByBidId id is null");return await this.serviceCommentDbService.findByBidId(e)})),a(this,"tryRead",(async e=>{this.loggerService.log("serviceCommentViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),_(this,{})}}const rn={usd_eur:"0.9",usd_uzs:"1000",watermark_file_id:null,masterdetail_mode:[B.Paper]},nn="settings",sn="databases.".concat(Ko.databaseId,".collections.").concat(Zo,".documents");class dn{constructor(){a(this,"appwriteService",v(Cl.appwriteService)),a(this,"updateSubject",new b),a(this,"realtimeService",v(Cl.realtimeService)),a(this,"create",(async()=>await this.appwriteService.databases.createDocument(Ko.databaseId,Zo,nn,rn))),a(this,"read",k((async()=>{const e=await this.appwriteService.databases.getDocument(Ko.databaseId,Zo,nn);return{...rn,...zl(e)}}))),a(this,"update",j((async e=>{await z(1e3);const t=await this.appwriteService.databases.updateDocument(Ko.databaseId,Zo,nn,{...rn,...Al(e)}),a=zl(t);return this.updateSubject.next([null,a]),a}))),a(this,"remove",(async e=>await this.appwriteService.databases.deleteDocument(Ko.databaseId,nn,e))),a(this,"prefetch",k((async()=>{this.realtimeService.subscribe(sn,(({payload:e})=>{this.read.clear();const t=zl(e);this.updateSubject.next([null,t])}))}))),_(this,{})}}class cn{constructor(){a(this,"settingsDbService",v(Cl.settingsDbService)),a(this,"loggerService",v(Cl.loggerService)),a(this,"updateSubject",this.settingsDbService.updateSubject),a(this,"getExchangeRate",(async e=>{const{usd_eur:t,usd_uzs:a}=await this.getValue();return"usd_eur"!==e||isNaN(t)?"usd_uzs"!==e||isNaN(a)?null:parseFloat(a):parseFloat(t)})),a(this,"getMasterDetailMode",(async()=>{const{masterdetail_mode:e}=await this.getValue(),t=(null==e?void 0:e.length)?e[0]:null;return t===B.Tabs?B.Tabs:(B.Paper,B.Paper)})),a(this,"getValue",H((async()=>{this.loggerService.log("settingsViewService getValue");try{return await this.settingsDbService.read()}catch(e){return await this.settingsDbService.create()}}))),a(this,"setValue",(async e=>(this.loggerService.log("settingsViewService setValue",e),await this.settingsDbService.update(e)))),_(this,{})}}const mn=["Просрочено","Новые задачи","На сегодня","На завтра","На следующую неделю","Выполненные задачи"],un={"На завтра":or()+1,"На сегодня":or(),"На следующую неделю":or()+7,"Просрочено":or()-1},pn=async e=>null===e?"Новые задачи":e<=un["Просрочено"]?"Просрочено":e===un["На сегодня"]?"На сегодня":e===un["На завтра"]?"На завтра":e>un["На завтра"]&&e<=un["На следующую неделю"]?"На следующую неделю":null,yn=async e=>e.is_complete?"Выполненные задачи":await pn(e.moment_stamp),hn="databases.".concat(Ko.databaseId,".collections.").concat(ll,".documents");class bn{constructor(){a(this,"reloadSubject",new b),a(this,"createSubject",new b),a(this,"removeSubject",new b),a(this,"updateSubject",new b),a(this,"appwriteService",v(Cl.appwriteService)),a(this,"realtimeService",v(Cl.realtimeService)),a(this,"createIndex",(async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(Ko.databaseId,ll,[g.limit(1),g.select(["index"])]);return e+1})),a(this,"findById",(async e=>{const t=await this.appwriteService.databases.getDocument(Ko.databaseId,ll,e);return zl(t)})),a(this,"findByTaskStatus",(async e=>{let t=[];return"Просрочено"===e&&(t=await ur(mr(ll,[g.lessThanEqual("moment_stamp",un.Просрочено)],{totalDocumentsLimit:250}))),"На сегодня"===e&&(t=await ur(mr(ll,[g.equal("moment_stamp",un["На сегодня"])],{totalDocumentsLimit:250}))),"На завтра"===e&&(t=await ur(mr(ll,[g.equal("moment_stamp",un["На завтра"])],{totalDocumentsLimit:250}))),"На следующую неделю"===e&&(t=await ur(mr(ll,[g.greaterThan("moment_stamp",un["На завтра"]),g.lessThanEqual("moment_stamp",un["На следующую неделю"])],{totalDocumentsLimit:250}))),"Новые задачи"===e&&(t=await ur(mr(ll,[g.isNull("moment_stamp"),g.equal("is_complete",!1)],{totalDocumentsLimit:250}))),"Выполненные задачи"===e&&(t=await ur(mr(ll,[g.equal("is_complete",!0)],{totalDocumentsLimit:250}))),xl(t)})),a(this,"create",(async e=>{const t=await this.appwriteService.databases.createDocument(Ko.databaseId,ll,this.appwriteService.createId(),{is_complete:!1,...Al(e),index:await this.createIndex()}),a=zl(t);return this.createSubject.next(a),a})),a(this,"update",(async(e,t)=>{const a=await this.appwriteService.databases.updateDocument(Ko.databaseId,ll,e,{...Al(t)}),i=zl(a);return this.updateSubject.next([e,i]),i})),a(this,"remove",(async e=>{await this.appwriteService.databases.deleteDocument(Ko.databaseId,ll,e),this.removeSubject.next(e)})),a(this,"prefetch",k((()=>{(async()=>{this.realtimeService.subscribe(hn,(({events:e,payload:t})=>{if(e.includes(_l)){const e=zl(t);this.reloadSubject.next(),this.createSubject.next(e)}if(e.includes(gl)&&(this.reloadSubject.next(),this.removeSubject.next(t.$id)),e.includes(vl)){const e=zl(t);this.updateSubject.next([t.$id,e])}}))})()}))),_(this,{})}}const vn="databases.".concat(Ko.databaseId,".collections.").concat(cl,".documents");class _n{constructor(){a(this,"createSubject",new b),a(this,"reloadSubject",new b),a(this,"updateSubject",new b),a(this,"appwriteService",v(Cl.appwriteService)),a(this,"realtimeService",v(Cl.realtimeService)),a(this,"findById",(async e=>{const t=await this.appwriteService.databases.getDocument(Ko.databaseId,cl,e);return zl(t)})),a(this,"create",(async e=>{const t=await this.appwriteService.databases.createDocument(Ko.databaseId,cl,this.appwriteService.createId(),Al(e));return zl(t)})),a(this,"update",(async(e,t)=>{const a=await this.appwriteService.databases.updateDocument(Ko.databaseId,cl,e,Al(t));return zl(a)})),a(this,"remove",(async e=>{await this.appwriteService.databases.deleteDocument(Ko.databaseId,cl,e)})),a(this,"findAllByContactId",(async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(Ko.databaseId,cl,[g.orderDesc("$createdAt"),g.equal("contact_id",e)]);return xl(t)})),a(this,"findAllByTaskId",(async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(Ko.databaseId,cl,[g.orderDesc("$createdAt"),g.equal("task_id",e)]);return xl(t)})),a(this,"findAllByUserId",(async e=>{const{documents:t}=await this.appwriteService.databases.listDocuments(Ko.databaseId,cl,[g.orderDesc("$createdAt"),g.equal("user_id",e)]);return xl(t)})),a(this,"prefetch",k((async()=>{this.realtimeService.subscribe(vn,(({events:e,payload:t})=>{if(e.includes(_l)&&(this.reloadSubject.next(),this.createSubject.next(t)),e.includes(gl)&&this.reloadSubject.next(),e.includes(vl)){const e=zl(t);this.updateSubject.next([t.$id,e])}}))}))),_(this,{})}}class gn{constructor(){a(this,"taskHistoryViewService",v(Cl.taskHistoryViewService)),a(this,"appwriteService",v(Cl.appwriteService)),a(this,"contactViewService",v(Cl.contactViewService)),a(this,"userViewService",v(Cl.userViewService)),a(this,"taskReassignCommit",(async(e,t,a,i)=>{const o=this.appwriteService.currentUser.$id,{first_name:l,last_name:r,middle_name:n}=await os.userViewService.read(t),s=[r,l,n].filter((e=>e)).join(" "),d="передал задачу (новый ответственный ".concat(s,")"),c=["Сотрудник ".concat(d),i?"Задача: ".concat(i):null,"Комментарий: ".concat(a)].filter((e=>e)).join("\n");await this.taskHistoryViewService.create({user_id:o,task_id:e,contact_id:null,comment:c})})),a(this,"todoTaskCommit",(async(e,t,a,i,o,l)=>{const r=this.appwriteService.currentUser.$id,{first_name:n,last_name:s,middle_name:d}=await os.userViewService.read(t),c=[s,n,d].filter((e=>e)).join(" "),m=null===a?"создал задачу (ответственный ".concat(c,")"):"перенес задачу (<text-underline>".concat(a,"</text-underline> -> <text-underline>").concat(i,"</text-underline>)"),u=["Сотрудник ".concat(m),l?"Задача: ".concat(l):null,"Комментарий: ".concat(o)].filter((e=>e)).join("\n");await this.taskHistoryViewService.create({user_id:r,task_id:e,contact_id:null,comment:u})})),a(this,"clientTaskCommit",(async(e,t,a,i,o,l,r)=>{const n=this.appwriteService.currentUser.$id,{first_name:s,last_name:d,middle_name:c}=await os.userViewService.read(t),m=[d,s,c].filter((e=>e)).join(" "),{fio:u}=await this.contactViewService.read(a),p=null===i?"создал задачу (ответственный ".concat(m,")"):"перенес задачу (<text-underline>".concat(i,"</text-underline> -> <text-underline>").concat(o,"</text-underline>)"),y=["Сотрудник ".concat(p),"Контакт: ".concat(u),r?"Задача: ".concat(r):null,"Комментарий: ".concat(l)].filter((e=>e)).join("\n");await this.taskHistoryViewService.create({user_id:n,task_id:e,contact_id:a,comment:y})})),_(this,{})}}class fn{constructor(){a(this,"taskHistoryDbService",v(Cl.taskHistoryDbService)),a(this,"loggerService",v(Cl.loggerService)),a(this,"createSubject",this.taskHistoryDbService.createSubject),a(this,"reloadSubject",this.taskHistoryDbService.reloadSubject),a(this,"updateSubject",this.taskHistoryDbService.updateSubject),a(this,"create",(async e=>(this.loggerService.log("taskHistoryViewService create",e),await this.taskHistoryDbService.create(e)))),a(this,"update",(async(e,t)=>(this.loggerService.log("taskHistoryViewService update",t),await this.taskHistoryDbService.update(e,t)))),a(this,"remove",(async e=>(this.loggerService.log("taskHistoryViewService remove",{id:e}),await this.taskHistoryDbService.remove(e)))),a(this,"read",(async e=>{this.loggerService.log("taskHistoryViewService read",{id:e});return await this.taskHistoryDbService.findById(e)})),a(this,"findAllByContactId",(async e=>(this.loggerService.log("taskHistoryViewService findAllByContactId"),await this.taskHistoryDbService.findAllByContactId(e)))),a(this,"findAllByTaskId",(async e=>(this.loggerService.log("taskHistoryViewService findAllByTaskId"),await this.taskHistoryDbService.findAllByTaskId(e)))),a(this,"findAllByUserId",(async e=>(this.loggerService.log("taskHistoryViewService findAllByTaskId"),await this.taskHistoryDbService.findAllByUserId(e)))),a(this,"tryRead",(async e=>{this.loggerService.log("taskHistoryViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),_(this,{})}}const kn="Wrong or invalid email!",wn="Your password is incorrect !",Sn="The user was not found !",zn="Unexpected error, please try again later.",xn=e=>"auth/user-not-found"===e.code?Sn:"auth/wrong-password"===e.code?wn:"auth/invalid-email"===e.code?kn:X(e)||zn;class An{constructor(){a(this,"taskHistoryRequestService",v(Cl.taskHistoryRequestService)),a(this,"taskViewService",v(Cl.taskViewService)),a(this,"userViewService",v(Cl.userViewService)),a(this,"contactViewService",v(Cl.contactViewService)),a(this,"appwriteService",v(Cl.appwriteService)),a(this,"notifyViewService",v(Cl.notifyViewService)),a(this,"tryCommitReassignTask",(async(e,t,a,i)=>{try{await this.taskHistoryRequestService.taskReassignCommit(e,t,a,i)}catch(o){console.log(xn(o))}})),a(this,"tryCommitTodoTask",(async(e,t,a,i,o,l)=>{try{await this.taskHistoryRequestService.todoTaskCommit(e,t,a,i,o,l)}catch(r){console.log(xn(r))}})),a(this,"tryCommitClientTask",(async(e,t,a,i,o,l)=>{try{await this.taskHistoryRequestService.clientTaskCommit(e,t,a,i,o,l)}catch(r){console.log(xn(r))}})),a(this,"createTodoTask",(async(e,t,a,i,o)=>{const l=this.appwriteService.currentUser.$id;let r,n;{const{first_name:e,last_name:t,middle_name:a}=await this.userViewService.read(l);r=[t,e,a].filter((e=>e)).join(" ")}{const{first_name:t,last_name:a,middle_name:i}=await this.userViewService.read(e);n=[a,t,i].filter((e=>e)).join(" ")}const{id:s}=await this.taskViewService.create({from_user_id:l,to_user_id:e,contact_id:null,moment_stamp:t,time_stamp:a,type:"Внутренняя",is_call:!1,is_meet:!1,from_user_fio:r,to_user_fio:n,contact_fio:"",title:i}),d=await pn(t);await Promise.all([this.tryCommitTodoTask(s,e,null,d||"Новые задачи",o,i),this.notifyViewService.create({title:"На вас назначена внутренняя задача",url:"/task_mine",user_id:e})])})),a(this,"createClientTask",(async(e,t,a,i,o,l,r,n)=>{const s=this.appwriteService.currentUser.$id;let d,c,m;{const{first_name:e,last_name:t,middle_name:a}=await this.userViewService.read(s);d=[t,e,a].filter((e=>e)).join(" ")}{const{first_name:t,last_name:a,middle_name:i}=await this.userViewService.read(e);c=[a,t,i].filter((e=>e)).join(" ")}{const{fio:e}=await this.contactViewService.read(t);m=e}const{id:u}=await this.taskViewService.create({from_user_id:s,to_user_id:e,contact_id:t,moment_stamp:a,time_stamp:i,is_call:l,is_meet:r,type:"Клиент",from_user_fio:d,to_user_fio:c,contact_fio:m,title:o}),p=await pn(a);await Promise.all([this.tryCommitClientTask(u,e,t,null,p||"Новые задачи",n),this.notifyViewService.create({title:"На вас назначена задача по клиенту",url:"/task_mine",user_id:e})])})),a(this,"updateTodoTask",(async(e,t,a,i,o,l,r,n)=>{const s=this.appwriteService.currentUser.$id,{id:d}=await this.taskViewService.update(e,{from_user_id:s,to_user_id:t,contact_id:null,moment_stamp:i,time_stamp:o,is_complete:l,is_call:!1,is_meet:!1,type:"Внутренняя",title:r}),c=await pn(i);await this.tryCommitTodoTask(d,t,a,c||(l?"Выполненные задачи":"Новые задачи"),n,r)})),a(this,"updateClientTask",(async(e,t,a,i,o,l,r,n,s,d,c)=>{const m=this.appwriteService.currentUser.$id,{id:u}=await this.taskViewService.update(e,{from_user_id:m,to_user_id:t,contact_id:i,moment_stamp:o,time_stamp:l,is_complete:r,is_meet:s,is_call:n,type:"Клиент",title:d}),p=await pn(o);await this.tryCommitClientTask(u,t,i,a,p||(r?"Выполненные задачи":"Новые задачи"),c)})),a(this,"reassignClientTask",(async(e,t,a,i)=>{const{last_name:o,first_name:l,middle_name:r}=await this.userViewService.read(t),n=[o,l,r].filter((e=>e)).join(" ");await this.taskViewService.update(e,{to_user_id:t,to_user_fio:n}),await Promise.all([this.tryCommitReassignTask(e,t,a,i),this.notifyViewService.create({title:"На вас переназначена задача",url:"/task_mine",user_id:t})])})),_(this,{})}}class Tn{constructor(){a(this,"taskDbService",v(Cl.taskDbService)),a(this,"loggerService",v(Cl.loggerService)),a(this,"reloadSubject",this.taskDbService.reloadSubject),a(this,"createSubject",this.taskDbService.createSubject),a(this,"removeSubject",this.taskDbService.removeSubject),a(this,"updateSubject",this.taskDbService.updateSubject),a(this,"create",(async e=>(this.loggerService.log("taskViewService create",e),await this.taskDbService.create(e)))),a(this,"update",(async(e,t)=>(this.loggerService.log("taskViewService update",t),await this.taskDbService.update(e,t)))),a(this,"remove",(async e=>(this.loggerService.log("taskViewService remove",{id:e}),await this.taskDbService.remove(e)))),a(this,"read",(async e=>{this.loggerService.log("taskViewService read",{id:e});return await this.taskDbService.findById(e)})),a(this,"tryRead",(async e=>{this.loggerService.log("taskViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),a(this,"findByTaskStatus",(async e=>(this.loggerService.log("taskViewService findByTaskStatus"),await this.taskDbService.findByTaskStatus(e)))),_(this,{})}}const Fn="databases.".concat(Ko.databaseId,".collections.").concat(Jo,".documents");class Cn{constructor(){a(this,"reloadSubject",new b),a(this,"updateSubject",new b),a(this,"appwriteService",v(Cl.appwriteService)),a(this,"realtimeService",v(Cl.realtimeService)),a(this,"getMetadata",(e=>{const t=[];return t.push(e.middle_name),t.push(e.last_name),t.push(e.first_name),t.push(e.email),t.push(e.phone),t.join(" ").slice(0,1024)})),a(this,"createIndex",(async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(Ko.databaseId,tl,[g.limit(1),g.select(["index"])]);return e+1})),a(this,"findById",(async e=>{const t=(await this.findAll()).find((t=>t.id===e));if(!t)throw new Error("userDbService findById user not found");return zl(t)})),a(this,"paginate",(async(...e)=>{const t=J(e),a=await ur(mr(Jo,[g.equal("system_is_remove",!!t._archive)]));return xl(a)})),a(this,"findAll",k((async()=>{const e=await ur(mr(Jo));return xl(e)}))),a(this,"toggleArchive",(async e=>{const{system_is_remove:t}=await this.findById(e),a=await this.appwriteService.databases.updateDocument(Ko.databaseId,Jo,e,{system_is_remove:!t}),i=zl(a);this.updateSubject.next([e,i]),this.reloadSubject.next()})),a(this,"update",(async(e,t)=>{const a=await this.appwriteService.databases.updateDocument(Ko.databaseId,Jo,e,{...Al(t),system_metadata:await this.getMetadata(t)});this.findAll.clear();const i=zl(a);return this.updateSubject.next([e,i]),i})),a(this,"remove",(async e=>(this.findAll.clear(),await this.appwriteService.databases.deleteDocument(Ko.databaseId,Jo,e)))),a(this,"prefetch",k((async()=>{this.realtimeService.subscribe(Fn,(({events:e,payload:t})=>{if(e.includes(_l)&&(this.findAll.clear(),this.reloadSubject.next()),e.includes(gl)&&(this.findAll.clear(),this.reloadSubject.next()),e.includes(vl)){this.findAll.clear();const e=zl(t);this.updateSubject.next([t.$id,e])}}))}))),_(this,{})}}class Vn{constructor(){a(this,"userDbService",v(Cl.userDbService)),a(this,"loggerService",v(Cl.loggerService)),a(this,"reloadSubject",this.userDbService.reloadSubject),a(this,"updateSubject",this.userDbService.updateSubject),a(this,"update",(async(e,t)=>(this.loggerService.log("userViewService update",t),await this.userDbService.update(e,t)))),a(this,"remove",(async e=>(this.loggerService.log("userViewService remove",{id:e}),await this.userDbService.remove(e)))),a(this,"read",(async e=>(this.loggerService.log("userViewService read",{id:e}),await this.userDbService.findById(e)))),a(this,"toggleArchive",(async e=>(this.loggerService.log("userViewService toggleArchive",{id:e}),await this.userDbService.toggleArchive(e)))),a(this,"tryRead",(async e=>{this.loggerService.log("userViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),a(this,"paginate",(async(...e)=>(this.loggerService.log("userViewService paginate"),await this.userDbService.paginate(...e)))),a(this,"findAll",(async()=>(this.loggerService.log("userViewService findAll"),await this.userDbService.findAll()))),_(this,{})}}class Ln{constructor(){a(this,"suggest",(async e=>(await ymaps.suggest(e)).map((({value:e})=>e)))),a(this,"geocode",(async e=>{const t=(await ymaps.geocode(e)).geoObjects.get(0);if(t){const[e,a]=t.geometry.getCoordinates();return{lat:e,lon:a}}return{lat:null,lon:null}})),a(this,"openAddress",(async e=>{const{lat:t,lon:a}=await this.geocode(e);if(t&&a){const i=new URL("https://maps.yandex.com");i.searchParams.set("ll","".concat(a,", ").concat(t)),i.searchParams.set("text",e),i.searchParams.set("z","16"),Z(i.toString())}})),a(this,"getAddressString",(async({lat:e,lon:t})=>{const a=[e,t];return(await ymaps.geocode(a)).geoObjects.get(0).getAddressLine()})),a(this,"getAddress",(async({lat:e,lon:t})=>{const a=[e,t],i=(await ymaps.geocode(a)).geoObjects.get(0);let o=i.getAdministrativeAreas()||"",l=i.getPremise()||"",r=i.getLocalities()||"",n=i.getThoroughfare()||"",s=i.getCountry()||"",d=i.getPremiseNumber()||"";return Array.isArray(r)&&(r=r[1]||""),Array.isArray(n)&&(n=n[0]||""),Array.isArray(l)&&(l=l[0]||""),Array.isArray(o)&&(o=o[0]||""),Array.isArray(s)&&(s=s[0]||""),Array.isArray(d)&&(d=d[0]||""),{strana:s.toString(),gorod:o.toString(),nomer_doma:d.toString(),rajon:r.toString(),ulicza:n.toString(),metro:null,mahallya:l.toString()}})),a(this,"drawMap",((e,{address:t,change:a})=>{let i=null,o=null;console.log({address:t});return(async()=>{const l=t?await this.geocode(t):{lat:null,lon:null};if(l.lat&&l.lon)i=new ymaps.Map(e,{center:[l.lat,l.lon],zoom:9}),o=new ymaps.Placemark([l.lat,l.lon],{iconCaption:t},{preset:"islands#violetDotIconWithCaption",draggable:!0}),i.geoObjects.add(o);else{const{lat:t,lon:a}=await this.geocode("Ташкент, Узбекистан");i=new ymaps.Map(e,{center:[t,a],zoom:10})}i.events.add("click",(async e=>{const t=e.get("coords");o||(o=new ymaps.Placemark(t,{iconCaption:"поиск..."},{preset:"islands#violetDotIconWithCaption",draggable:!0}),i&&i.geoObjects.add(o)),o.geometry.setCoordinates(t),o.properties.set({iconCaption:"поиск..."}),o.properties.set({iconCaption:await this.getAddressString({lat:t[0],lon:t[1]})}),a({lat:t[0],lon:t[1]})}))})(),()=>{null==i||i.destroy(),i=null}})),a(this,"prefetch",k((async()=>{const e=new URL("2.1","https://api-maps.yandex.ru");e.searchParams.set("apikey","03219f2d-b9b3-4850-98ea-9db0670d8a6b"),e.searchParams.set("lang","ru"),e.searchParams.set("load","SuggestView,suggest,geocode,Map,Placemark"),await Q(e.toString()),await ymaps.ready()}))),_(this,{})}}class In{constructor(){a(this,"appwriteService",v(Cl.appwriteService)),a(this,"getAllApartmentCount",ee((async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(Ko.databaseId,el,[g.select(["$id"]),g.limit(1)]);return e}))),a(this,"getRentApartmentCount",ee((async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(Ko.databaseId,el,[g.select(["$id"]),g.equal("system_is_rent",!0),g.equal("system_is_archive",!1),g.limit(1)]);return e}))),a(this,"getSellApartmentCount",ee((async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(Ko.databaseId,el,[g.select(["$id"]),g.equal("system_is_sell",!0),g.equal("system_is_archive",!1),g.limit(1)]);return e}))),a(this,"getArchiveApartmentCount",ee((async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(Ko.databaseId,el,[g.select(["$id"]),g.equal("system_is_archive",!0),g.limit(1)]);return e}))),a(this,"getNewApartmentCount",ee((async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(Ko.databaseId,el,[g.select(["$id"]),g.equal("system_is_rent",!1),g.equal("system_is_sell",!1),g.equal("system_is_archive",!1),g.limit(1)]);return e}))),a(this,"getTotalDealCount",ee((async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(Ko.databaseId,ol,[g.select(["$id"]),g.limit(1)]);return e}))),a(this,"getMyDealCount",ee((async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(Ko.databaseId,ol,[g.select(["$id"]),g.equal("user_id",this.appwriteService.currentUser.$id),g.limit(1)]);return e}))),a(this,"getNewDealCount",ee((async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(Ko.databaseId,ol,[g.select(["$id"]),g.equal("status","Новая сделка"),g.limit(1)]);return e}))),a(this,"getArchiveDealCount",ee((async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(Ko.databaseId,ol,[g.select(["$id"]),g.equal("status",["Закрытая сделка","Сделка сорвана"]),g.limit(1)]);return e}))),_(this,{})}}const Mn="databases.".concat(Ko.databaseId,".collections.").concat(ml,".documents");class Bn{constructor(){a(this,"reloadSubject",new b),a(this,"updateSubject",new b),a(this,"featureService",v(Cl.featureService)),a(this,"appwriteService",v(Cl.appwriteService)),a(this,"permissionService",v(Cl.permissionService)),a(this,"realtimeService",v(Cl.realtimeService)),a(this,"createIndex",(async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(Ko.databaseId,ml,[g.limit(1),g.select(["index"])]);return e+1})),a(this,"getIdByApartment",(async e=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(Ko.databaseId,ml,[g.equal("apartment_id",e),g.select(["$id"]),g.limit(1)]);if(!t)throw new Error("advertisingDbService getIdByApartment document not found");return t.$id})),a(this,"findById",(async e=>{const t=await this.appwriteService.databases.getDocument(Ko.databaseId,ml,e);return zl(t)})),a(this,"findByApartmentId",(async e=>{const{documents:[t=null]}=await this.appwriteService.databases.listDocuments(Ko.databaseId,ml,[g.equal("apartment_id",e),g.limit(1)]);if(!t)throw new Error("advertisingDbService findByApartmentId document not found");return zl(t)})),a(this,"create",(async e=>{const t=await this.appwriteService.databases.createDocument(Ko.databaseId,ml,this.appwriteService.createId(),{...Al(e),system_created_by:this.appwriteService.currentUser.$id,index:await this.createIndex()});return zl(t)})),a(this,"update",(async(e,t)=>{const a=await this.appwriteService.databases.updateDocument(Ko.databaseId,ml,e,{...Al(t)}),i=zl(a);return this.updateSubject.next([e,i]),i})),a(this,"remove",(async e=>{await this.appwriteService.databases.deleteDocument(Ko.databaseId,ml,e)})),a(this,"prefetch",k((async()=>{this.realtimeService.subscribe(Mn,(({events:e,payload:t})=>{if(e.includes(_l)&&this.reloadSubject.next(),e.includes(gl)&&this.reloadSubject.next(),e.includes(vl)){const e=zl(t);this.updateSubject.next([t.$id,e])}}))}))),_(this,{})}}class Dn{constructor(){a(this,"advertisingDbService",v(Cl.advertisingDbService)),a(this,"loggerService",v(Cl.loggerService)),a(this,"reloadSubject",this.advertisingDbService.reloadSubject),a(this,"updateSubject",this.advertisingDbService.updateSubject),a(this,"findByApartmentId",(async e=>(this.loggerService.log("advertisingViewService findByApartmentId"),await this.advertisingDbService.findByApartmentId(e)))),a(this,"create",(async e=>(this.loggerService.log("advertisingViewService create",e),await this.advertisingDbService.create(e)))),a(this,"update",(async(e,t)=>(this.loggerService.log("advertisingViewService update",t),await this.advertisingDbService.update(e,t)))),a(this,"remove",(async e=>(this.loggerService.log("advertisingViewService remove",{id:e}),await this.advertisingDbService.remove(e)))),a(this,"read",(async e=>{this.loggerService.log("advertisingViewService read",{id:e});return await this.advertisingDbService.findById(e)})),a(this,"getIdByApartment",(async e=>{this.loggerService.log("advertisingViewService getIdByApartment",{apartmentId:e});return await this.advertisingDbService.getIdByApartment(e)})),a(this,"tryRead",(async e=>{this.loggerService.log("advertisingViewService tryRead",{id:e});try{return"create"===e||"unknown"===e?null:await this.read(e)}catch(t){return null}})),a(this,"tryReadByApartmentId",(async e=>{this.loggerService.log("tryReadByApartmentId tryRead",{apartmentId:e});try{return"create"===e||"unknown"===e?null:await this.advertisingDbService.findByApartmentId(e)}catch(t){return null}})),_(this,{})}}class Rn{constructor(){a(this,"appwriteService",v(Cl.appwriteService)),a(this,"getAllBidCount",ee((async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(Ko.databaseId,il,[g.select(["$id"]),g.limit(1)]);return e}))),a(this,"getRentBidCount",ee((async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(Ko.databaseId,il,[g.select(["$id"]),g.equal("system_is_rent",!0),g.equal("system_is_archive",!1),g.limit(1)]);return e}))),a(this,"getSellBidCount",ee((async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(Ko.databaseId,il,[g.select(["$id"]),g.equal("system_is_sell",!0),g.equal("system_is_archive",!1),g.limit(1)]);return e}))),a(this,"getArchiveBidCount",ee((async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(Ko.databaseId,il,[g.select(["$id"]),g.equal("system_is_archive",!0),g.limit(1)]);return e}))),a(this,"getNewBidCount",ee((async()=>{const{total:e}=await this.appwriteService.databases.listDocuments(Ko.databaseId,il,[g.select(["$id"]),g.equal("system_is_rent",!1),g.equal("system_is_sell",!1),g.equal("system_is_archive",!1),g.limit(1)]);return e}))),_(this,{})}}const[jn,qn]=te(),[Pn,En]=te(),{makeStyles:Nn}=ae({useTheme:ie}),On=async(e,t)=>{try{const a=await(async(e,t)=>{const a=document.createElement("img"),i=document.createElement("img"),{watermark_file_id:o}=await os.settingsViewService.getValue(),l=o?await os.appwriteService.getImageURL(o):new URL("/watermark.png",window.origin);return i.src=l.toString(),i.crossOrigin="anonymous",a.src=e,a.crossOrigin="anonymous",Promise.resolve().then((()=>Promise.all([new Promise(((e,t)=>{i.addEventListener("load",(()=>e())),i.addEventListener("error",(()=>t()))})),new Promise(((e,t)=>{a.addEventListener("load",(()=>e())),a.addEventListener("error",(()=>t()))}))]))).then((()=>new Promise(((e,o)=>{const l=document.createElement("canvas");l.width=a.width,l.height=a.height;const r=l.getContext("2d");if(!r)return void o("there's an error");if(r.translate(l.width/2,l.height/2),r.drawImage(a,-a.width/2,-a.height/2),t){const e=.07*Math.min(a.height,a.width);r.lineWidth=.05*e,r.font="bold ".concat(e,"px Segoe UI, Arial, sans-serif"),r.fillStyle="white",r.strokeStyle="black",r.fillText(String(t||""),-1*a.width/2+10,a.height/2-10),r.strokeText(String(t||""),-1*a.width/2+10,a.height/2-10)}r.globalAlpha=1;const n=.3*Math.min(l.width/i.naturalWidth,l.height/i.naturalHeight),s=i.naturalWidth*n,d=i.naturalHeight*n;r.drawImage(i,-s/2,-d/2,s,d),l.toBlob((t=>{t?e(t):o("there's an error")}))}))))})(e,t);return a?URL.createObjectURL(a):null}catch(a){return null}},Hn=oe.createLoader(96),Un=Nn()((e=>({square:{position:"relative"},dragHoverActive:{background:le(e.palette.primary.main,.5)},dragHoverInactive:{background:"#ccc"},prev:{position:"absolute",margin:"auto",left:"0",top:"0",bottom:0,zIndex:"2 !important",color:e.palette.background.paper,width:"30%"},next:{position:"absolute",margin:"auto",right:"10px",top:"10px",bottom:"5px",zIndex:"2 !important",color:e.palette.background.paper,width:"30%"},action:{zIndex:"5 !important"},defaultIcon:{position:"absolute",right:10,bottom:10,height:35,width:35,fill:"orange",background:"white",borderRadius:"50%",padding:"1.5px",zIndex:"1"},"tss-nuqny4-root":{zIndex:"5 !important"}}))),Wn=({dropSubject:e,className:t,readonly:a,image:i,apartment_images:o,advertising_images:l,text:r,sx:n,onClick:s,onChange:d,drag:c})=>{const{classes:m}=Un(),[u,p]=re.useState(!1),y=ne(e),h=ne(),b=o||[],v=l||[];re.useEffect((()=>()=>{h.next()}),[]),re.useEffect((()=>y.subscribe((()=>{p(!1)}))),[]);const[,_]=qn(),[,g]=En(),f=re.useMemo((()=>[...v].sort(((e,t)=>Math.max(b.indexOf(t),0)-Math.max(b.indexOf(e),0))).reverse()[0]||"unknown"),[b,v]),k=re.useMemo((()=>v.includes(i)),[i,v]);return se(me,{className:t,sx:n,onClick:()=>s&&s(i),children:se(de,{draggable:c,onDragStart:()=>_(i),onDragOver:e=>{e.preventDefault(),g(i)},onDragLeave:()=>p(!1),onDragEnter:()=>p(!0),className:m.square,children:[i===f&&se(ce,{className:m.defaultIcon}),se(me,{className:ue({[m.dragHoverActive]:u,[m.dragHoverInactive]:!u}),component:"div",sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:[se(me,{sx:{position:"absolute",top:10,left:10,transition:"opacity 150ms",background:"white",borderRadius:"50%",zIndex:"5 !important"},children:se(pe,{size:"small",disabled:a,checked:k,onClick:e=>{e.preventDefault(),e.stopPropagation(),(()=>{const e=new Set(v);e.has(i)?e.delete(i):e.add(i),d({advertising_images:[...e],apartment_images:b})})()}})}),se(ye,{Loader:Hn,payload:i,children:async e=>{if(!e)return se(he,{sx:{fontSize:96,fill:"white"}});const t=await os.appwriteService.getImageURL(e),a=await On(t,r);return h.once((()=>{a&&URL.revokeObjectURL(a)})),se("img",{crossOrigin:"anonymous",loading:"lazy",alt:e,src:a||t,style:{objectFit:"contain",height:"100%",width:"100%",pointerEvents:"none"}})}})]})]})})},$n=Nn()((e=>({root:{position:"fixed",padding:20,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"stretch",transform:"translate(-50%, -50%)",backgroundColor:e.palette.background.paper,borderRadius:5,gap:5,top:"50%",left:"50%",width:"calc(100vmin - 50px)",height:"calc(100vmin - 50px)",outline:"none"},content:{overflow:"hidden",padding:e.spacing(1),flex:1},container:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flex:1,overflow:"hidden",paddingTop:e.spacing(1)},title:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:15,color:e.palette.text.primary},submit:{marginTop:15},disabled:{opacity:.5,pointerEvents:"none"},indicatorTransparent:{height:6,background:e.palette.primary.main},tabRootTransparent:{minHeight:54,height:54},tabsRoot:{minHeight:54,height:54,marginLeft:"0 !important",marginRight:"0 !important"},prev:{position:"absolute",margin:"auto",left:"10px",top:"10px",bottom:"5px",zIndex:"2 !important",color:e.palette.background.paper,width:"30%"},next:{position:"absolute",margin:"auto",right:"10px",top:"10px",bottom:"5px",zIndex:"2 !important",color:e.palette.background.paper,width:"30%"},icon_border:{border:"1px solid black"}}))),Gn=({apartment_images:e,advertising_images:t,_fieldData:a,payload:i,readonly:o,onChange:l})=>{const[r]=qn(),[n]=En(),s=t||[],d=e||[],{pickImage:c,render:m}=(({_fieldData:e,advertising_images:t,apartment_images:a,readonly:i,payload:o,onChange:l})=>{const[r,n]=re.useState(""),[s,d]=re.useState(!1),c=(null==a?void 0:a.length)||0,[m,u]=re.useState(0),[p,y]=re.useState(!1),[h,b]=re.useState(0),[v,_]=re.useState(!1);re.useEffect((()=>{u((null==a?void 0:a.indexOf(r))||0)}),[r]);const{classes:g,cx:f}=$n(),k=()=>{h||(n(""),u(0),y(!1))},w=()=>{b((e=>e+1))},S=()=>{b((e=>e-1))},z=e=>{e.preventDefault(),e.stopPropagation(),n(a?a[m+1]:"")},x=e=>{e.preventDefault(),e.stopPropagation(),n(a?a[m-1]:"")};return{render:()=>se(ke,{open:p,onClose:k,sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:se("div",{className:g.root,onMouseEnter:()=>{d(!0)},onMouseLeave:()=>{d(!1)},onClick:()=>y(!1),children:se("div",{className:g.container,children:[se(be,{className:g.prev,onClick:x,disabled:0===m,onMouseOver:()=>_(!0),onMouseLeave:()=>_(!1)}),se(be,{className:g.next,onClick:z,disabled:m===c-1,onMouseOver:()=>_(!0),onMouseLeave:()=>_(!1)}),se(Wn,{onLoadEnd:S,onLoadStart:w,className:g.content,advertising_images:t,apartment_images:a,text:"№".concat(e.apartment_index),payload:o,onChange:l,image:r,readonly:i,drag:!1,onMouseOver:v}),c>1&&se(me,{sx:{position:"absolute",left:0,bottom:0,width:"100%",height:75,display:"flex",alignItems:"space-beetween",justifyContent:"center",transition:"opacity 150ms",opacity:s?1:0},children:se(ve,{onClick:e=>{e.preventDefault(),e.stopPropagation()},steps:c,position:"static",activeStep:m,nextButton:se(_e,{size:"small",sx:{ml:1},onClick:z,disabled:m===c-1,children:se(ge,{})}),backButton:se(_e,{size:"small",sx:{mr:1},onClick:x,disabled:0===m,children:se(fe,{})}),sx:{height:"45px",backdropFilter:"blur(20px)",backgroundColor:"#00000012",borderRadius:"25px",zIndex:"1000"}})})]})})}),handleNext:z,handleBack:x,pickImage:e=>{n(e),y(!0)}}})({_fieldData:a,payload:i,apartment_images:d,advertising_images:s,onChange:({apartment_images:e,advertising_images:t})=>{l({apartment_images:e,advertising_images:t})},readonly:o}),u=ne();return se(Se,{children:[se(we,{gap:1,sx:{pointerEvents:"all"},flexWrap:"wrap",direction:"row",onDrop:()=>{(()=>{if(r==n)return;const e=d.indexOf(r),t=d.indexOf(n),a=d[e];d[e]=d[t],d[t]=a,l({apartment_images:d,advertising_images:s})})(),u.next()},children:d.filter((e=>!o||s.includes(e))).map(((e,t)=>se(Wn,{sx:{width:275},image:e,apartment_images:d,advertising_images:s,onChange:({apartment_images:e,advertising_images:t})=>{l({apartment_images:e,advertising_images:t})},text:"№".concat(a.apartment_index),dropSubject:u,drag:!o,payload:i,readonly:o,onClick:c},t)))}),m()]})},Yn=e=>se(jn,{initialState:"",children:se(Pn,{initialState:"",children:se(Gn,{...e})})}),Kn=[{type:o.Fragment,isVisible:e=>null===e.kategoriya_obekta||!(!ze(e.kategoriya_obekta,"Жилая")||!ze(e.podkategoriya_obekta,"Квартиры")),fields:[{type:o.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилая квартира)"})},{type:o.Text,outlined:!1,name:"zagolovok_dlya_reklamy",title:"Заголовок для рекламы"},{type:o.Text,outlined:!1,name:"rajon",title:"Район"},{type:o.Text,outlined:!1,name:"ulicza",title:"Адрес"},{type:o.Text,outlined:!1,name:"orientir",title:"Ориентир"},{type:o.Combo,freeSolo:!0,outlined:!1,name:"metro",title:"Метро",itemList:["А. Ходжаев","Абдулла Кодирий","Алишер Навоий","Амир Темур хиёбони","Беруний","Бобур","Бодомзор","Буюк Ипак йули","Гофур Гулом","Дружба народов","Дустлик","Жанубий","Космонавтлар","Машинасозлар","Миллий бог","Мингурик","Минор","Мирзо Улугбек","Мустакиллик майдони","Новза","Ойбек","Олмазор","Отчопар","Пахтакор","Пушкинская","Сергели","Тинчлик","Тошкент","Тукимачи","Туркистон","Турсунзода","Узбекистон","Усмон Носыр","Файзулла Ходжаев","Хамид Олимжон","Чилонзор","Чорсу","Чош-тепа","Шахристан","Эхтиром","Юнус Ражабий","Юнусабад"]},{type:o.Text,outlined:!1,name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Text,outlined:!1,name:"etazh",title:"Этаж"},{type:o.Text,outlined:!1,name:"etazhnost",title:"Этажность"},{type:o.Text,outlined:!1,name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:o.Combo,freeSolo:!0,outlined:!1,name:"sostoyanie_remonta-kvartiry",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Combo,outlined:!1,name:"kategoriya_obekta",title:"Категория объекта",itemList:["Коммерческая","Жилая","От застройщика"]},{type:o.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>ze(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок","Здания","Базы"]},{type:o.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>!ze(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок"]},{type:o.Combo,outlined:!1,name:"tip_nedvizhimosti",title:"Тип недвижимости",itemList:["Вторичное жилье","Новостройка"]},{type:o.Text,outlined:!1,name:"nazvanie_zhk",title:"Название ЖК"},{type:o.Text,outlined:!1,inputRows:4,name:"primechanie",title:"Примечание"},{type:o.Combo,outlined:!1,name:"nomer_agenstva",itemList:async()=>{const e=await os.dictService.getAgencyMap();return Object.keys(e)},tr:async e=>{const t=await os.dictService.getAgencyMap();return h.get(t,e)||""},title:"Номер агенства"},{type:o.Combo,outlined:!1,name:"nomer_agenta",itemList:async()=>{const e=await os.dictService.getAgentMap();return Object.keys(e)},tr:async e=>{const t=await os.dictService.getAgentMap();return h.get(t,e)||""},title:"Номер агента"}]},{type:o.Group,columns:"6",fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>e.apartment_images&&e.apartment_images.length,fields:[{type:o.Component,sx:{mb:2},element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})},{type:o.Component,element:Yn}]}]}]},{type:o.Fragment,isVisible:e=>!(!ze(e.kategoriya_obekta,"Жилая")||!ze(e.podkategoriya_obekta,"Дома")),fields:[{type:o.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилой дом)"})},{type:o.Text,outlined:!1,name:"zagolovok_dlya_reklamy",title:"Заголовок для рекламы"},{type:o.Text,outlined:!1,name:"rajon",title:"Район"},{type:o.Text,outlined:!1,name:"ulicza",title:"Адрес"},{type:o.Text,outlined:!1,name:"orientir",title:"Ориентир"},{type:o.Combo,freeSolo:!0,outlined:!1,name:"metro",title:"Метро",itemList:["А. Ходжаев","Абдулла Кодирий","Алишер Навоий","Амир Темур хиёбони","Беруний","Бобур","Бодомзор","Буюк Ипак йули","Гофур Гулом","Дружба народов","Дустлик","Жанубий","Космонавтлар","Машинасозлар","Миллий бог","Мингурик","Минор","Мирзо Улугбек","Мустакиллик майдони","Новза","Ойбек","Олмазор","Отчопар","Пахтакор","Пушкинская","Сергели","Тинчлик","Тошкент","Тукимачи","Туркистон","Турсунзода","Узбекистон","Усмон Носыр","Файзулла Ходжаев","Хамид Олимжон","Чилонзор","Чорсу","Чош-тепа","Шахристан","Эхтиром","Юнус Ражабий","Юнусабад"]},{type:o.Text,outlined:!1,name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Text,outlined:!1,name:"etazhnost",title:"Этажность"},{type:o.Text,outlined:!1,name:"kolichestvo_sotok",title:"Количество соток"},{type:o.Items,freeSolo:!1,outlined:!1,name:"bassejn",title:"Бассейн",itemList:["Летний","Зимний","Нет"]},{type:o.Text,outlined:!1,name:"ploshhad_doma",title:"Площадь дома М²"},{type:o.Combo,freeSolo:!0,outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Combo,outlined:!1,name:"kategoriya_obekta",title:"Категория объекта",itemList:["Коммерческая","Жилая","От застройщика"]},{type:o.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>ze(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок","Здания","Базы"]},{type:o.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>!ze(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок"]},{type:o.Text,outlined:!1,inputRows:4,name:"primechanie",title:"Примечание"},{type:o.Combo,outlined:!1,name:"nomer_agenstva",itemList:async()=>{const e=await os.dictService.getAgencyMap();return Object.keys(e)},tr:async e=>{const t=await os.dictService.getAgencyMap();return h.get(t,e)||""},title:"Номер агенства"},{type:o.Combo,outlined:!1,name:"nomer_agenta",itemList:async()=>{const e=await os.dictService.getAgentMap();return Object.keys(e)},tr:async e=>{const t=await os.dictService.getAgentMap();return h.get(t,e)||""},title:"Номер агента"}]},{type:o.Group,columns:"6",fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>e.apartment_images&&e.apartment_images.length,fields:[{type:o.Component,sx:{mb:2},element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})},{type:o.Component,element:Yn}]}]}]},{type:o.Fragment,isVisible:e=>null===e.kategoriya_obekta||!(!ze(e.kategoriya_obekta,"Жилая")||!ze(e.podkategoriya_obekta,"Земля/Участок")),fields:[{type:o.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилая земля/участок)"})},{type:o.Text,outlined:!1,name:"zagolovok_dlya_reklamy",title:"Заголовок для рекламы"},{type:o.Component,sx:{pr:1,mb:2},name:"naznachenie-obekta_zemlya",element:e=>se(xe,{variant:"standard",label:"Назначение объекта",items:[{label:"Сельхоз использование",value:"Сельхоз использование"},{label:"ИЖС",value:"ИЖС"},{label:"Высотная застройка",value:"Высотная застройка"},{label:"Промышленное назначение",value:"Промышленное назначение"},{label:"ТЦ",value:"ТЦ"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Склады",value:"Склады"},{label:"Инвестпроект",value:"Инвестпроект"},{label:"Строительство образовательных учреждений",value:"Строительство образовательных учреждений"},{label:"АЗС",value:"АЗС"},{label:"Мойка",value:"Мойка"}],value:e["naznachenie-obekta_zemlya"],onChange:t=>e.onChange({"naznachenie-obekta_zemlya":t})})},{type:o.Combo,freeSolo:!0,outlined:!1,name:"sostoyanie-obekta_zemlya",title:"Состояние объекта",itemList:["Пустая земля/участок","Недостроенная","Под снос"]},{type:o.Text,outlined:!1,name:"rajon",title:"Район"},{type:o.Text,outlined:!1,name:"ulicza",title:"Адрес"},{type:o.Text,outlined:!1,name:"orientir",title:"Ориентир"},{type:o.Combo,freeSolo:!0,outlined:!1,name:"metro",title:"Метро",itemList:["А. Ходжаев","Абдулла Кодирий","Алишер Навоий","Амир Темур хиёбони","Беруний","Бобур","Бодомзор","Буюк Ипак йули","Гофур Гулом","Дружба народов","Дустлик","Жанубий","Космонавтлар","Машинасозлар","Миллий бог","Мингурик","Минор","Мирзо Улугбек","Мустакиллик майдони","Новза","Ойбек","Олмазор","Отчопар","Пахтакор","Пушкинская","Сергели","Тинчлик","Тошкент","Тукимачи","Туркистон","Турсунзода","Узбекистон","Усмон Носыр","Файзулла Ходжаев","Хамид Олимжон","Чилонзор","Чорсу","Чош-тепа","Шахристан","Эхтиром","Юнус Ражабий","Юнусабад"]},{type:o.Text,outlined:!1,name:"kolichestvo_sotok",title:"Количество соток"},{type:o.Items,freeSolo:!1,outlined:!1,name:"vid_liczenzii",title:"Вид лицензии",itemList:["Коммерческая","Жилая"]},{type:o.Text,outlined:!1,inputRows:4,name:"primechanie",title:"Примечание"},{type:o.Combo,outlined:!1,name:"kategoriya_obekta",title:"Категория объекта",itemList:["Коммерческая","Жилая","От застройщика"]},{type:o.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>ze(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок","Здания","Базы"]},{type:o.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>!ze(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок"]},{type:o.Combo,outlined:!1,name:"nomer_agenstva",itemList:async()=>{const e=await os.dictService.getAgencyMap();return Object.keys(e)},tr:async e=>{const t=await os.dictService.getAgencyMap();return h.get(t,e)||""},title:"Номер агенства"},{type:o.Combo,outlined:!1,name:"nomer_agenta",itemList:async()=>{const e=await os.dictService.getAgentMap();return Object.keys(e)},tr:async e=>{const t=await os.dictService.getAgentMap();return h.get(t,e)||""},title:"Номер агента"}]},{type:o.Group,columns:"6",fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>e.apartment_images&&e.apartment_images.length,fields:[{type:o.Component,sx:{mb:2},element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})},{type:o.Component,element:Yn}]}]}]},{type:o.Fragment,isVisible:e=>(!ze(e.podkategoriya_obekta,"Квартиры")||!ze(e.kategoriya_obekta,"Коммерческая"))&&((!ze(e.podkategoriya_obekta,"Дома")||!ze(e.kategoriya_obekta,"Коммерческая"))&&((!ze(e.podkategoriya_obekta,"Земля/Участок")||!ze(e.kategoriya_obekta,"Коммерческая"))&&ze(e.kategoriya_obekta,"Коммерческая"))),fields:[{type:o.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая недвижимость)"})},{type:o.Text,outlined:!1,name:"zagolovok_dlya_reklamy",title:"Заголовок для рекламы"},{type:o.Component,sx:{pr:1,mb:2},name:"naznachenie_obekta",element:e=>se(xe,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},{type:o.Items,freeSolo:!1,outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:o.Text,outlined:!1,name:"rajon",title:"Район"},{type:o.Text,outlined:!1,name:"ulicza",title:"Адрес"},{type:o.Text,outlined:!1,name:"orientir",title:"Ориентир"},{type:o.Combo,freeSolo:!0,outlined:!1,name:"metro",title:"Метро",itemList:["А. Ходжаев","Абдулла Кодирий","Алишер Навоий","Амир Темур хиёбони","Беруний","Бобур","Бодомзор","Буюк Ипак йули","Гофур Гулом","Дружба народов","Дустлик","Жанубий","Космонавтлар","Машинасозлар","Миллий бог","Мингурик","Минор","Мирзо Улугбек","Мустакиллик майдони","Новза","Ойбек","Олмазор","Отчопар","Пахтакор","Пушкинская","Сергели","Тинчлик","Тошкент","Тукимачи","Туркистон","Турсунзода","Узбекистон","Усмон Носыр","Файзулла Ходжаев","Хамид Олимжон","Чилонзор","Чорсу","Чош-тепа","Шахристан","Эхтиром","Юнус Ражабий","Юнусабад"]},{type:o.Text,outlined:!1,name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:o.Text,outlined:!1,name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Text,outlined:!1,name:"etazh",title:"Этаж"},{type:o.Text,outlined:!1,name:"etazhnost",title:"Этажность"},{type:o.Combo,freeSolo:!0,outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Text,outlined:!1,inputRows:4,name:"primechanie",title:"Примечание"},{type:o.Combo,outlined:!1,name:"kategoriya_obekta",title:"Категория объекта",itemList:["Коммерческая","Жилая","От застройщика"]},{type:o.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>ze(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок","Здания","Базы"]},{type:o.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>!ze(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок"]},{type:o.Combo,outlined:!1,name:"nomer_agenstva",itemList:async()=>{const e=await os.dictService.getAgencyMap();return Object.keys(e)},tr:async e=>{const t=await os.dictService.getAgencyMap();return h.get(t,e)||""},title:"Номер агенства"},{type:o.Combo,outlined:!1,name:"nomer_agenta",itemList:async()=>{const e=await os.dictService.getAgentMap();return Object.keys(e)},tr:async e=>{const t=await os.dictService.getAgentMap();return h.get(t,e)||""},title:"Номер агента"}]},{type:o.Group,columns:"6",fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>e.apartment_images&&e.apartment_images.length,fields:[{type:o.Component,sx:{mb:2},element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})},{type:o.Component,element:Yn}]}]}]},{type:o.Fragment,isVisible:e=>null===e.kategoriya_obekta||!(!ze(e.kategoriya_obekta,"Коммерческая")||!ze(e.podkategoriya_obekta,"Квартиры")),fields:[{type:o.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая квартира)"})},{type:o.Text,outlined:!1,name:"zagolovok_dlya_reklamy",title:"Заголовок для рекламы"},{type:o.Combo,outlined:!1,name:"tip_nedvizhimosti",title:"Тип недвижимости",itemList:["Вторичное жилье","Новостройка"]},{type:o.Text,outlined:!1,name:"nazvanie_zhk",title:"Название ЖК"},{type:o.Component,sx:{pr:1,mb:2},name:"naznachenie_obekta",element:e=>se(xe,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},{type:o.Items,freeSolo:!1,outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:o.Text,outlined:!1,name:"rajon",title:"Район"},{type:o.Text,outlined:!1,name:"ulicza",title:"Адрес"},{type:o.Text,outlined:!1,name:"orientir",title:"Ориентир"},{type:o.Combo,freeSolo:!0,outlined:!1,name:"metro",title:"Метро",itemList:["А. Ходжаев","Абдулла Кодирий","Алишер Навоий","Амир Темур хиёбони","Беруний","Бобур","Бодомзор","Буюк Ипак йули","Гофур Гулом","Дружба народов","Дустлик","Жанубий","Космонавтлар","Машинасозлар","Миллий бог","Мингурик","Минор","Мирзо Улугбек","Мустакиллик майдони","Новза","Ойбек","Олмазор","Отчопар","Пахтакор","Пушкинская","Сергели","Тинчлик","Тошкент","Тукимачи","Туркистон","Турсунзода","Узбекистон","Усмон Носыр","Файзулла Ходжаев","Хамид Олимжон","Чилонзор","Чорсу","Чош-тепа","Шахристан","Эхтиром","Юнус Ражабий","Юнусабад"]},{type:o.Text,outlined:!1,name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:o.Text,outlined:!1,name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Combo,freeSolo:!0,outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Text,outlined:!1,inputRows:4,name:"primechanie",title:"Примечание"},{type:o.Combo,outlined:!1,name:"kategoriya_obekta",title:"Категория объекта",itemList:["Коммерческая","Жилая","От застройщика"]},{type:o.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>ze(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок","Здания","Базы"]},{type:o.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>!ze(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок"]},{type:o.Combo,outlined:!1,name:"nomer_agenstva",itemList:async()=>{const e=await os.dictService.getAgencyMap();return Object.keys(e)},tr:async e=>{const t=await os.dictService.getAgencyMap();return h.get(t,e)||""},title:"Номер агенства"},{type:o.Combo,outlined:!1,name:"nomer_agenta",itemList:async()=>{const e=await os.dictService.getAgentMap();return Object.keys(e)},tr:async e=>{const t=await os.dictService.getAgentMap();return h.get(t,e)||""},title:"Номер агента"}]},{type:o.Group,columns:"6",fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>e.apartment_images&&e.apartment_images.length,fields:[{type:o.Component,sx:{mb:2},element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})},{type:o.Component,element:Yn}]}]}]},{type:o.Fragment,isVisible:e=>null===e.kategoriya_obekta||!(!ze(e.kategoriya_obekta,"Коммерческая")||!ze(e.podkategoriya_obekta,"Дома")),fields:[{type:o.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческий дом)"})},{type:o.Text,outlined:!1,name:"zagolovok_dlya_reklamy",title:"Заголовок для рекламы"},{type:o.Component,sx:{pr:1,mb:2},name:"naznachenie_obekta",element:e=>se(xe,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},{type:o.Items,freeSolo:!1,outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:o.Text,outlined:!1,name:"rajon",title:"Район"},{type:o.Text,outlined:!1,name:"ulicza",title:"Адрес"},{type:o.Text,outlined:!1,name:"orientir",title:"Ориентир"},{type:o.Combo,freeSolo:!0,outlined:!1,name:"metro",title:"Метро",itemList:["А. Ходжаев","Абдулла Кодирий","Алишер Навоий","Амир Темур хиёбони","Беруний","Бобур","Бодомзор","Буюк Ипак йули","Гофур Гулом","Дружба народов","Дустлик","Жанубий","Космонавтлар","Машинасозлар","Миллий бог","Мингурик","Минор","Мирзо Улугбек","Мустакиллик майдони","Новза","Ойбек","Олмазор","Отчопар","Пахтакор","Пушкинская","Сергели","Тинчлик","Тошкент","Тукимачи","Туркистон","Турсунзода","Узбекистон","Усмон Носыр","Файзулла Ходжаев","Хамид Олимжон","Чилонзор","Чорсу","Чош-тепа","Шахристан","Эхтиром","Юнус Ражабий","Юнусабад"]},{type:o.Text,outlined:!1,name:"ploshhad_doma",title:"Площадь дома М²"},{type:o.Text,outlined:!1,name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Combo,freeSolo:!0,outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Text,outlined:!1,name:"kolichestvo_sotok",title:"Количество соток"},{type:o.Text,outlined:!1,name:"etazhnost",title:"Этажность"},{type:o.Text,outlined:!1,inputRows:4,name:"primechanie",title:"Примечание"},{type:o.Combo,outlined:!1,name:"kategoriya_obekta",title:"Категория объекта",itemList:["Коммерческая","Жилая","От застройщика"]},{type:o.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>ze(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок","Здания","Базы"]},{type:o.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>!ze(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок"]},{type:o.Combo,outlined:!1,name:"nomer_agenstva",itemList:async()=>{const e=await os.dictService.getAgencyMap();return Object.keys(e)},tr:async e=>{const t=await os.dictService.getAgencyMap();return h.get(t,e)||""},title:"Номер агенства"},{type:o.Combo,outlined:!1,name:"nomer_agenta",itemList:async()=>{const e=await os.dictService.getAgentMap();return Object.keys(e)},tr:async e=>{const t=await os.dictService.getAgentMap();return h.get(t,e)||""},title:"Номер агента"}]},{type:o.Group,columns:"6",fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>e.apartment_images&&e.apartment_images.length,fields:[{type:o.Component,sx:{mb:2},element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})},{type:o.Component,element:Yn}]}]}]},{type:o.Fragment,isVisible:e=>null===e.kategoriya_obekta||!(!ze(e.kategoriya_obekta,"Коммерческая")||!ze(e.podkategoriya_obekta,"Земля/Участок")),fields:[{type:o.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая земля/участок)"})},{type:o.Text,outlined:!1,name:"zagolovok_dlya_reklamy",title:"Заголовок для рекламы"},{type:o.Component,sx:{pr:1,mb:2},name:"naznachenie-obekta-zemlya_uchastok",element:e=>se(xe,{variant:"standard",label:"Назначение объекта",items:[{label:"Сельхоз использование",value:"Сельхоз использование"},{label:"ИЖС",value:"ИЖС"},{label:"Высотная застройка",value:"Высотная застройка"},{label:"Промышленное назначение",value:"Промышленное назначение"},{label:"ТЦ",value:"ТЦ"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Склады",value:"Склады"},{label:"Инвестпроект",value:"Инвестпроект"},{label:"Строительство образовательных учреждений",value:"Строительство образовательных учреждений"},{label:"АЗС",value:"АЗС"},{label:"Мойка",value:"Мойка"}],value:e["naznachenie-obekta_zemlya"],onChange:t=>e.onChange({"naznachenie-obekta_zemlya":t})})},{type:o.Combo,freeSolo:!0,outlined:!1,name:"sostoyanie-obekta_zemlya",title:"Состояние объекта",itemList:["Пустая земля/участок","Недостроенная","Под снос"]},{type:o.Text,outlined:!1,name:"rajon",title:"Район"},{type:o.Text,outlined:!1,name:"ulicza",title:"Адрес"},{type:o.Text,outlined:!1,name:"orientir",title:"Ориентир"},{type:o.Combo,freeSolo:!0,outlined:!1,name:"metro",title:"Метро",itemList:["А. Ходжаев","Абдулла Кодирий","Алишер Навоий","Амир Темур хиёбони","Беруний","Бобур","Бодомзор","Буюк Ипак йули","Гофур Гулом","Дружба народов","Дустлик","Жанубий","Космонавтлар","Машинасозлар","Миллий бог","Мингурик","Минор","Мирзо Улугбек","Мустакиллик майдони","Новза","Ойбек","Олмазор","Отчопар","Пахтакор","Пушкинская","Сергели","Тинчлик","Тошкент","Тукимачи","Туркистон","Турсунзода","Узбекистон","Усмон Носыр","Файзулла Ходжаев","Хамид Олимжон","Чилонзор","Чорсу","Чош-тепа","Шахристан","Эхтиром","Юнус Ражабий","Юнусабад"]},{type:o.Text,outlined:!1,name:"kolichestvo_sotok",title:"Количество соток"},{type:o.Items,freeSolo:!1,outlined:!1,name:"vid_liczenzii",title:"Вид лицензии",itemList:["Коммерческая","Жилая"]},{type:o.Text,outlined:!1,inputRows:4,name:"primechanie",title:"Примечание"},{type:o.Combo,outlined:!1,name:"kategoriya_obekta",title:"Категория объекта",itemList:["Коммерческая","Жилая","От застройщика"]},{type:o.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>ze(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок","Здания","Базы"]},{type:o.Combo,outlined:!1,name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>!ze(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок"]},{type:o.Combo,outlined:!1,name:"nomer_agenstva",itemList:async()=>{const e=await os.dictService.getAgencyMap();return Object.keys(e)},tr:async e=>{const t=await os.dictService.getAgencyMap();return h.get(t,e)||""},title:"Номер агенства"},{type:o.Combo,outlined:!1,name:"nomer_agenta",itemList:async()=>{const e=await os.dictService.getAgentMap();return Object.keys(e)},tr:async e=>{const t=await os.dictService.getAgentMap();return h.get(t,e)||""},title:"Номер агента"}]},{type:o.Group,columns:"6",fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>e.apartment_images&&e.apartment_images.length,fields:[{type:o.Component,sx:{mb:2},element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})},{type:o.Component,element:Yn}]}]}]}];window.advertising_fields=Kn;class Xn{constructor(){a(this,"advertisingViewService",v(Cl.advertisingViewService)),a(this,"apartmentViewService",v(Cl.apartmentViewService)),a(this,"layoutService",v(Cl.layoutService)),a(this,"createAdvertisingByApartment",(async e=>{const t=await this.apartmentViewService.read(e),a={};Te(Kn).forEach((({name:e})=>{if(e){const i=h.get(t,e);h.set(a,e,i)}})),h.set(a,"apartment_id",e),h.set(a,"apartment_index",h.get(t,"index")),h.set(a,"apartment_images",t.apartment_images),h.set(a,"advertising_images",[]);const i=await this.advertisingViewService.create(a);return this.layoutService.reloadOutlet(),zl(i)})),a(this,"updateAdvertisingByApartment",(async(e,t)=>{const a=await this.advertisingViewService.findByApartmentId(e),i=await this.advertisingViewService.findByApartmentId(e);Te(Kn).forEach((({name:e})=>{if(e){const o=h.get(t,e)||h.get(a,e);h.set(i,e,o)}})),h.set(i,"apartment_id",e),h.set(i,"apartment_index",h.get(t,"index")),h.set(i,"apartment_images",t.apartment_images),h.set(i,"advertising_images",[]);const o=await this.advertisingViewService.update(a.id,i);return this.layoutService.reloadOutlet(),zl(o)})),_(this,{})}}class Jn{constructor(){a(this,"appwriteService",v(Cl.appwriteService)),a(this,"dictService",v(Cl.dictService)),a(this,"publishTelegram",(async(e,t,a,i="")=>{const o=await this.dictService.getTelegramMapRaw(),l=h.get(o,e);if(!l)throw new Error("publishService unknown telegram id");a&&(a=await Promise.all(a.map((async e=>{const t=await this.appwriteService.getImageURL(e),a=await On(t,i);if(a){const e=await fetch(a).then((e=>e.blob()));URL.revokeObjectURL(a);const t=await this.appwriteService.uploadBlob(e,"__DANGEROUS_WILL_BE_REMOVED_TELEGRAM__.png");return await this.appwriteService.getFileURL(t)}return this.appwriteService.getFileURL(e)})))),await this.appwriteService.execute(hl,{msg:t,channel:l.channel,token:l.token,images:a})})),a(this,"publishTelegraph",(async(e,t)=>await this.appwriteService.execute(bl,{appName:Wo,appLink:"https://github.com/tripolskypetr",title:e,content:t}))),_(this,{})}}class Zn{constructor(){a(this,"settingsViewService",v(Cl.settingsViewService)),a(this,"loggerService",v(Cl.loggerService)),a(this,"convertToUsd",(async(e,t)=>{if(e&&"eur"===t){let t=await this.settingsViewService.getExchangeRate("usd_eur");if(t)return t=1/t,Number(parseFloat(e)*t).toFixed()}if(e&&"uzs"===t){let t=await this.settingsViewService.getExchangeRate("usd_uzs");if(t)return t=1/t,Number(parseFloat(e)*t).toFixed()}return e||""})),a(this,"getApartmentPriceRecord",((e,t)=>{const a={czena_sobstvennika:h.get(e,t+"czena_sobstvennika"),startovaya_czena:h.get(e,t+"startovaya_czena"),startovaya_czena_valyuta:h.get(e,t+"startovaya_czena_valyuta")};return this.convertToUsd(a.startovaya_czena||a.czena_sobstvennika,a.startovaya_czena_valyuta)})),a(this,"getBidPriceRecord",(async(e,t)=>{const a={czena_sobstvennika_ot:h.get(e,t+"czena_sobstvennika_ot"),czena_sobstvennika_do:h.get(e,t+"czena_sobstvennika_do"),startovaya_czena_ot:h.get(e,t+"startovaya_czena_ot"),startovaya_czena_do:h.get(e,t+"startovaya_czena_do"),startovaya_czena_valyuta:h.get(e,t+"startovaya_czena_valyuta")},i=this.convertToUsd(a.startovaya_czena_ot||a.czena_sobstvennika_ot,a.startovaya_czena_valyuta),o=this.convertToUsd(a.startovaya_czena_do||a.czena_sobstvennika_do,a.startovaya_czena_valyuta),l=await Promise.all([i,o]);return Fe(l)&&J(l)&&l.sort(((e,t)=>parseFloat(e)-parseFloat(t))),l})),a(this,"getBidProdPriceLabel",(async e=>{const{system_prod_kom_price_do:t,system_prod_kom_price_ot:a,system_prod_price_do:i,system_prod_price_ot:o}=await this.getBidPriceMetadata(e),l=o||a,r=i||t,n=[];return l&&n.push("От ".concat(l,"$")),r&&n.push("До ".concat(r,"$")),n.join(" ")})),a(this,"getBidRentPriceLabel",(async e=>{const{system_rent_kom_price_do:t,system_rent_kom_price_ot:a,system_rent_price_do:i,system_rent_price_ot:o}=await this.getBidPriceMetadata(e),l=o||a,r=i||t,n=[];return l&&n.push("От ".concat(l,"$")),r&&n.push("До ".concat(r,"$")),n.join(" ")})),a(this,"getApartmentRentPriceLabel",(async e=>{const{system_rent_price:t,system_rent_kom_price:a}=await this.getApartmentPriceMetadata(e),i=t||a;return i?"".concat(Ce(i),"$"):""})),a(this,"getApartmentProdPriceLabel",(async e=>{const{system_prod_price:t,system_prod_kom_price:a}=await this.getApartmentPriceMetadata(e),i=t||a;return i?"".concat(Ce(i),"$"):""})),a(this,"getApartmentPriceMetadata",(async e=>{const t={system_prod_kom_price:await this.getApartmentPriceRecord(e,"prod_kom_"),system_prod_price:await this.getApartmentPriceRecord(e,"prod_"),system_rent_kom_price:await this.getApartmentPriceRecord(e,"rent_kom_"),system_rent_price:await this.getApartmentPriceRecord(e,"rent_")};return this.loggerService.log("exchangeService getApartmentPriceMetadata",{metadata:t}),t})),a(this,"getBidPriceMetadata",(async e=>{const[t,a]=await this.getBidPriceRecord(e,"prod_kom_"),[i,o]=await this.getBidPriceRecord(e,"prod_"),[l,r]=await this.getBidPriceRecord(e,"rent_kom_"),[n,s]=await this.getBidPriceRecord(e,"rent_"),d={system_prod_kom_price_do:a,system_prod_kom_price_ot:t,system_prod_price_do:o,system_prod_price_ot:i,system_rent_kom_price_do:r,system_rent_kom_price_ot:l,system_rent_price_do:s,system_rent_price_ot:n};return this.loggerService.log("exchangeService getBidPriceMetadata",{metadata:d}),d})),_(this,{})}}class Qn{constructor(){a(this,"bidViewService",v(Cl.bidViewService)),a(this,"apartmentViewService",v(Cl.apartmentViewService)),a(this,"dealViewService",v(Cl.dealViewService)),a(this,"dealHistoryViewService",v(Cl.dealHistoryViewService)),a(this,"taskViewService",v(Cl.taskViewService)),a(this,"taskHistoryViewService",v(Cl.taskHistoryViewService)),a(this,"loggerService",v(Cl.loggerService)),a(this,"findAllDealByBidId",(async e=>{const t=await Promise.all([ur(mr(ol,[g.equal("bid_id",e)])),ur(mr(ol,[g.equal("target_bid_id",e)]))]);return O(t)})),a(this,"findAllDealHistoryBidId",(async e=>{const t=await Promise.all([ur(mr(rl,[g.equal("bid_id",e)]))]);return O(t)})),a(this,"findAllDealByApartmentId",(async e=>{const t=await Promise.all([ur(mr(ol,[g.equal("apartment_id",e)])),ur(mr(ol,[g.equal("target_apartment_id",e)]))]);return O(t)})),a(this,"findAllDealHistoryApartmentId",(async e=>{const t=await Promise.all([ur(mr(rl,[g.equal("apartment_id",e)]))]);return O(t)})),a(this,"findAllDealHistoryByDealId",(async e=>{const t=await Promise.all([ur(mr(rl,[g.equal("deal_id",e)]))]);return O(t)})),a(this,"findAllTaskByContactId",(async e=>{const t=await Promise.all([ur(mr(ll,[g.equal("contact_id",e)]))]);return O(t)})),a(this,"findAllTaskHistoryByContactId",(async e=>{const t=await Promise.all([ur(mr(cl,[g.equal("contact_id",e)]))]);return O(t)})),a(this,"findAllTaskHistoryByTaskId",(async e=>{const t=await Promise.all([ur(mr(cl,[g.equal("task_id",e)]))]);return O(t)})),a(this,"findAllApartmentByContactId",(async e=>{const t=await Promise.all([ur(mr(el,[g.equal("contact_id",e)]))]);return O(t)})),a(this,"findAllBidByContactId",(async e=>{const t=await Promise.all([ur(mr(il,[g.equal("contact_id",e)]))]);return O(t)})),a(this,"removeBid",(async e=>{this.loggerService.log("cleanupService removeBid",{bidId:e});for(const t of await this.findAllDealByBidId(e))await this.dealViewService.remove(t.$id);for(const t of await this.findAllDealHistoryBidId(e))await this.dealHistoryViewService.remove(t.$id);await this.bidViewService.remove(e)})),a(this,"removeApartment",(async e=>{this.loggerService.log("cleanupService removeApartment",{apartmentId:e});for(const t of await this.findAllDealByApartmentId(e))await this.dealViewService.remove(t.$id);for(const t of await this.findAllDealHistoryApartmentId(e))await this.dealHistoryViewService.remove(t.$id);await this.apartmentViewService.remove(e)})),a(this,"removeContact",(async e=>{this.loggerService.log("cleanupService removeContact",{contactId:e});for(const t of await this.findAllTaskByContactId(e))await this.taskViewService.remove(t.$id);for(const t of await this.findAllTaskHistoryByContactId(e))await this.taskHistoryViewService.remove(t.$id);for(const t of await this.findAllBidByContactId(e))await this.removeBid(t.$id);for(const t of await this.findAllApartmentByContactId(e))await this.removeApartment(t.$id)})),a(this,"removeTask",(async e=>{this.loggerService.log("cleanupService removeTask",{taskId:e});for(const t of await this.findAllTaskHistoryByTaskId(e))await this.taskHistoryViewService.remove(t.$id);await this.taskViewService.remove(e)})),a(this,"removeDeal",(async e=>{this.loggerService.log("cleanupService removeDeal",{dealId:e});for(const t of await this.findAllDealHistoryByDealId(e))await this.dealHistoryViewService.remove(t.$id);await this.dealViewService.remove(e)})),_(this,{})}}Ve(Cl.appwriteService,(()=>new Pl)),Ve(Cl.authService,(()=>new Nl)),Ve(Cl.alertService,(()=>new No)),Ve(Cl.layoutService,(()=>new Lr)),Ve(Cl.routerService,(()=>new tn)),Ve(Cl.errorService,(()=>new Cr)),Ve(Cl.dictService,(()=>new Tr)),Ve(Cl.cacheService,(()=>new Zl)),Ve(Cl.ymapsService,(()=>new Ln)),Ve(Cl.loggerService,(()=>new Ir)),Ve(Cl.realtimeService,(()=>new Yr)),Ve(Cl.editTargetService,(()=>new Fr)),Ve(Cl.permissionService,(()=>new Wr)),Ve(Cl.featureService,(()=>new Vr)),Ve(Cl.previewModeService,(()=>new Gr)),Ve(Cl.metadataService,(()=>new jr)),Ve(Cl.publishService,(()=>new Jn)),Ve(Cl.exchangeService,(()=>new Zn)),Ve(Cl.cleanupService,(()=>new Qn)),Ve(Cl.userDbService,(()=>new Cn)),Ve(Cl.settingsDbService,(()=>new dn)),Ve(Cl.apartmentDbService,(()=>new Rl)),Ve(Cl.bidDbService,(()=>new Yl)),Ve(Cl.dealDbService,(()=>new br)),Ve(Cl.contactDbService,(()=>new er)),Ve(Cl.dealHistoryDbService,(()=>new _r)),Ve(Cl.serviceCommentDbService,(()=>new on)),Ve(Cl.roleDbService,(()=>new Xr)),Ve(Cl.notifyDbService,(()=>new Pr)),Ve(Cl.taskDbService,(()=>new bn)),Ve(Cl.taskHistoryDbService,(()=>new _n)),Ve(Cl.advertisingDbService,(()=>new Bn)),Ve(Cl.contactRequestService,(()=>new tr)),Ve(Cl.dealHistoryRequestService,(()=>new Sr)),Ve(Cl.dealRequestService,(()=>new xr)),Ve(Cl.taskRequestService,(()=>new An)),Ve(Cl.taskHistoryRequestService,(()=>new gn)),Ve(Cl.dashboardRequestService,(()=>new dr)),Ve(Cl.permissionRequestService,(()=>new Ur)),Ve(Cl.apartmentRequestService,(()=>new In)),Ve(Cl.bidRequestService,(()=>new Rn)),Ve(Cl.advertisingRequestService,(()=>new Xn)),Ve(Cl.userViewService,(()=>new Vn)),Ve(Cl.settingsViewService,(()=>new cn)),Ve(Cl.apartmentViewService,(()=>new jl)),Ve(Cl.bidViewService,(()=>new Kl)),Ve(Cl.dealViewService,(()=>new Ar)),Ve(Cl.contactViewService,(()=>new ar)),Ve(Cl.dealHistoryViewService,(()=>new zr)),Ve(Cl.serviceCommentViewService,(()=>new ln)),Ve(Cl.roleViewService,(()=>new Jr)),Ve(Cl.notifyViewService,(()=>new Er)),Ve(Cl.taskViewService,(()=>new Tn)),Ve(Cl.taskHistoryViewService,(()=>new fn)),Ve(Cl.advertisingViewService,(()=>new Dn));const es={appwriteService:v(Cl.appwriteService),authService:v(Cl.authService),alertService:v(Cl.alertService),routerService:v(Cl.routerService),layoutService:v(Cl.layoutService),errorService:v(Cl.errorService),dictService:v(Cl.dictService),cacheService:v(Cl.cacheService),ymapsService:v(Cl.ymapsService),loggerService:v(Cl.loggerService),realtimeService:v(Cl.realtimeService)},ts={editTargetService:v(Cl.editTargetService),permissionService:v(Cl.permissionService),featureService:v(Cl.featureService),previewModeService:v(Cl.previewModeService),metadataService:v(Cl.metadataService),publishService:v(Cl.publishService),exchangeService:v(Cl.exchangeService),cleanupService:v(Cl.cleanupService)},as={contactRequestService:v(Cl.contactRequestService),dealHistoryRequestService:v(Cl.dealHistoryRequestService),dealRequestService:v(Cl.dealRequestService),taskRequestService:v(Cl.taskRequestService),taskHistoryRequestService:v(Cl.taskHistoryRequestService),dashboardRequestService:v(Cl.dashboardRequestService),permissionRequestService:v(Cl.permissionRequestService),apartmentRequestService:v(Cl.apartmentRequestService),bidRequestService:v(Cl.bidRequestService),advertisingRequestService:v(Cl.advertisingRequestService)},is={...es,...{settingsDbService:v(Cl.settingsDbService),apartmentDbService:v(Cl.apartmentDbService),bidDbService:v(Cl.bidDbService),dealDbService:v(Cl.dealDbService),userDbService:v(Cl.userDbService),contactDbService:v(Cl.contactDbService),dealHistoryDbService:v(Cl.dealHistoryDbService),serviceCommentDbService:v(Cl.serviceCommentDbService),roleDbService:v(Cl.roleDbService),notifyDbService:v(Cl.notifyDbService),taskDbService:v(Cl.taskDbService),taskHistoryDbService:v(Cl.taskHistoryDbService),advertisingDbService:v(Cl.advertisingDbService)},...{userViewService:v(Cl.userViewService),apartmentViewService:v(Cl.apartmentViewService),bidViewService:v(Cl.bidViewService),dealViewService:v(Cl.dealViewService),settingsViewService:v(Cl.settingsViewService),contactViewService:v(Cl.contactViewService),dealHistoryViewService:v(Cl.dealHistoryViewService),serviceCommentViewService:v(Cl.serviceCommentViewService),roleViewService:v(Cl.roleViewService),notifyViewService:v(Cl.notifyViewService),taskViewService:v(Cl.taskViewService),taskHistoryViewService:v(Cl.taskHistoryViewService),advertisingViewService:v(Cl.advertisingViewService)},...ts,...as};window.addEventListener("unhandledrejection",(e=>{is.errorService.handleGlobalError(new Error(e.reason))})),window.addEventListener("offline",(()=>{M()})),window.addEventListener("error",(e=>{e instanceof Le&&is.errorService.handleGlobalError(e)})),is.layoutService.setModalLoader(!0),is.layoutService.appbarSubject.filter((e=>!e)).filter((()=>!is.layoutService.hasAppbarLoader)).operator(Ie.take(1)).debounce(1e3).once((()=>{is.layoutService.setModalLoader(!1)})),K.join([is.layoutService.appbarSubject.toObserver(),K.fromInterval(1e4)],{race:!0}).reduce(((e,[t])=>t?e+1:0),0).filter((e=>6===e)).connect((()=>{is.layoutService.hasModalLoader||is.layoutService.dropAppbarLoader()})),is.routerService.listen((({action:e})=>{"PUSH"===e&&is.cacheService.collectGarbage()})),is.routerService.listen((()=>{is.appwriteService.execute.cancel()})),is.userViewService.updateSubject.subscribe((([e])=>{is.appwriteService.currentUser.$id===e&&M()})),window.ioc=is;const os=is,ls=(()=>{let e=null,t={};return()=>{const{pathname:a}=os.routerService.location;return e!==a&&(t=Me(Ch,os.routerService.location.pathname)||{},e=a),t}})(),rs=(e,t=null)=>{const a=ls();return h.get(a,e)||t},ns=ls,ss=re.forwardRef((({sx:e,variant:t="filled"},a)=>{const[i,o]=re.useState([]);return re.useEffect((()=>Be((()=>os.editTargetService.alerts),(()=>{o(os.editTargetService.alerts)}))),[]),re.useEffect((()=>{o(os.editTargetService.alerts)}),[]),se(De,{ref:a,sx:{...e,mb:2},variant:t,items:i})})),ds=({children:e})=>{const{execute:t}=Re((async()=>{const{sideMenu:e=null}=Ih()||{},{id:t=null}=ns();if(!os.appwriteService.isAuthorized)return;if(await os.featureService.hasFeature("anonimnoe_redaktirovanie"))return;const a=await os.editTargetService.getDocument(os.appwriteService.currentUser.$id);if(!a)return void(await os.editTargetService.create({entity_id:t,path:e}));let i=!1;i=i||a.entity_id!==t,i=i||a.path!==e,i&&await os.editTargetService.update({entity_id:t,path:e})}),{onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1),fallback:os.errorService.handleGlobalError});return re.useEffect((()=>Be((()=>os.routerService.location.pathname),(()=>{os.appwriteService.isAuthorized&&t()}))),[]),se(Se,{children:e})},cs=(e,t=os.routerService.location.pathname)=>!!je(Ch.filter((({path:t})=>e.includes(t))),t),ms=[{id:"owner_contact",isVisible:({permissions:e})=>e.hasMasterDetailPermission,label:"Контакт",isActive:()=>cs(["/apartment_view/:id/owner_contact"])},{id:"object",label:"Объект",isActive:()=>cs(["/apartment_view/:id","/apartment_view/:id/object"])},{id:"tasks",isVisible:({permissions:e})=>e.hasMasterDetailPermission,label:"Задачи",isActive:()=>cs(["/apartment_view/:id/tasks"])},{id:"advertising",label:"Реклама",isDisabled:({hasAdvertising:e})=>!e,isActive:()=>cs(["/apartment_view/:id/advertising"])},{id:"service_comment",isVisible:({permissions:e})=>e.hasMasterDetailPermission,label:"Служебный комментарий",isActive:()=>cs(["/apartment_view/:id/service_comment"])},{id:"history",isVisible:({permissions:e})=>e.hasMasterDetailPermission,label:"История",isActive:()=>cs(["/apartment_view/:id/history"])},{id:"documents",isVisible:({permissions:e})=>e.hasMasterDetailPermission,label:"Документы",isActive:()=>cs(["/apartment_view/:id/documents"])},{id:"commission_and_status",isVisible:({permissions:e})=>e.hasMasterDetailPermission,label:"Комиссия и статус",isDisabled:()=>!0,isActive:()=>cs(["/apartment_view/:id/commission_and_status"])}],us=(e,t)=>{if(t)return;const a=rs("id","create");"owner_contact"===e&&os.routerService.replace("/apartment_view/".concat(a,"/owner_contact")),"object"===e&&os.routerService.replace("/apartment_view/".concat(a,"/object")),"tasks"===e&&os.routerService.replace("/apartment_view/".concat(a,"/tasks")),"advertising"===e&&os.routerService.replace("/apartment_view/".concat(a,"/advertising")),"service_comment"===e&&os.routerService.replace("/apartment_view/".concat(a,"/service_comment")),"history"===e&&os.routerService.replace("/apartment_view/".concat(a,"/history")),"documents"===e&&os.routerService.replace("/apartment_view/".concat(a,"/documents")),"commission_and_status"===e&&os.routerService.replace("/apartment_view/".concat(a,"/commission_and_status"))},ps=({children:e,payload:t,mode:a=B.Paper})=>{const i=re.useMemo((()=>"tabs"===a?B.Tabs:B.Paper),[a]);return se(qe,{withFixedPos:!0,payload:t,fixedPosHeaderAdjust:a===B.Paper?85:64,mode:i,options:ms,onActiveOptionChange:us,children:e})},ys=(e,...t)=>{let a=!1;for(const i of t)String(e[i]||"").length&&(a=!0);return a},hs=[{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.podkategoriya_obekta,"Квартиры"),t=t&&ze(e.kategoriya_obekta,"Жилая"),t=t&&!ze(e.kategoriya_obekta,"Коммерческая"),t},fields:[{type:o.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилая квартира)"})},{type:o.Text,isVisible:e=>ys(e,"zagolovok_dlya_reklamy"),outlined:!1,compute:({zagolovok_dlya_reklamy:e})=>e||"",title:"Заголовок для рекламы"},{type:o.Text,outlined:!1,compute:async({apartment_id:e})=>{const t=await os.apartmentViewService.tryRead(e);if(!t)return"";const{arenda:a,prodazha:i}=t;return i&&a?"Продажа, Аренда":i?"Продажа":a?"Аренда":""},title:"Тип сделки"},{type:o.Text,isVisible:e=>ys(e,"rajon"),outlined:!1,compute:({rajon:e})=>e||"",title:"Район"},{type:o.Text,isVisible:e=>ys(e,"ulicza"),outlined:!1,compute:({ulicza:e})=>e||"",title:"Адрес"},{type:o.Text,isVisible:e=>ys(e,"orientir"),outlined:!1,compute:({orientir:e})=>e||"",title:"Ориентир"},{type:o.Text,isVisible:e=>ys(e,"metro"),outlined:!1,compute:({metro:e})=>e||"",title:"Метро"},{type:o.Text,isVisible:e=>ys(e,"kolichestvo_komnat"),outlined:!1,compute:({kolichestvo_komnat:e})=>e||"",title:"Количество комнат"},{type:o.Text,isVisible:e=>ys(e,"etazh"),outlined:!1,compute:({etazh:e})=>e||"",title:"Этаж"},{type:o.Text,isVisible:e=>ys(e,"etazhnost"),outlined:!1,compute:({etazhnost:e})=>e||"",title:"Этажность"},{type:o.Text,isVisible:e=>ys(e,"obshhaya_ploshhad"),outlined:!1,compute:({obshhaya_ploshhad:e})=>e||"",title:"Общая площадь М²"},{type:o.Text,outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>ys(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},{type:o.Text,isVisible:(e,{permissions:t})=>$(ys(e,"kategoriya_obekta"),t.hasAdvertisingKategoryAddPermission),outlined:!1,compute:({kategoriya_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)).join(", ")||"",title:"Категория объекта"},{type:o.Text,isVisible:(e,{permissions:t})=>$(ys(e,"podkategoriya_obekta"),t.hasAdvertisingKategoryAddPermission),outlined:!1,compute:({podkategoriya_obekta:e})=>e||"",title:"Подкатегория объекта"},{type:o.Text,isVisible:e=>ys(e,"tip_nedvizhimosti"),outlined:!1,compute:({tip_nedvizhimosti:e})=>e||"",title:"Тип недвижимости"},{type:o.Text,isVisible:e=>ys(e,"nazvanie_zhk"),outlined:!1,compute:({nazvanie_zhk:e})=>e||"",title:"Название ЖК"},{type:o.Text,isVisible:e=>ys(e,"primechanie"),outlined:!1,inputRows:4,compute:({primechanie:e})=>e||"",title:"Примечание"},{type:o.Text,outlined:!1,compute:async({nomer_agenstva:e})=>{const t=await os.dictService.getAgencyMap();return h.get(t,e)||e},title:"Номер агенства"},{type:o.Text,outlined:!1,compute:async({nomer_agenta:e})=>{const t=await os.dictService.getAgentMap();return h.get(t,e)||e},title:"Номер агента"}]},{type:o.Group,columns:"6",fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>e.apartment_images&&e.apartment_images.length,fields:[{type:o.Component,sx:{mb:2},element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})},{type:o.Component,element:Yn}]}]}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.podkategoriya_obekta,"Дома"),t=t&&ze(e.kategoriya_obekta,"Жилая"),t=t&&!ze(e.kategoriya_obekta,"Коммерческая"),t},fields:[{type:o.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилой дом)"})},{type:o.Text,isVisible:e=>ys(e,"zagolovok_dlya_reklamy"),outlined:!1,compute:({zagolovok_dlya_reklamy:e})=>e||"",title:"Заголовок для рекламы"},{type:o.Text,outlined:!1,compute:async({apartment_id:e})=>{const t=await os.apartmentViewService.tryRead(e);if(!t)return"";const{arenda:a,prodazha:i}=t;return i&&a?"Продажа, Аренда":i?"Продажа":a?"Аренда":""},title:"Тип сделки"},{type:o.Text,isVisible:e=>ys(e,"rajon"),outlined:!1,compute:({rajon:e})=>e||"",title:"Район"},{type:o.Text,isVisible:e=>ys(e,"ulicza"),outlined:!1,compute:({ulicza:e})=>e||"",title:"Адрес"},{type:o.Text,isVisible:e=>ys(e,"orientir"),outlined:!1,compute:({orientir:e})=>e||"",title:"Ориентир"},{type:o.Text,isVisible:e=>ys(e,"metro"),outlined:!1,compute:({metro:e})=>e||"",title:"Метро"},{type:o.Text,isVisible:e=>ys(e,"kolichestvo_komnat"),outlined:!1,compute:({kolichestvo_komnat:e})=>e||"",title:"Количество комнат"},{type:o.Text,isVisible:e=>ys(e,"etazhnost"),outlined:!1,compute:({etazhnost:e})=>e||"",title:"Этажность"},{type:o.Text,isVisible:e=>ys(e,"kolichestvo_sotok"),outlined:!1,compute:({kolichestvo_sotok:e})=>e||"",title:"Количество соток"},{type:o.Text,outlined:!1,compute:e=>[e.bassejn||""].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>ys(e,"bassejn"),title:"Бассейн"},{type:o.Text,isVisible:e=>ys(e,"ploshhad_doma"),outlined:!1,compute:({ploshhad_doma:e})=>e||"",title:"Площадь дома М²"},{type:o.Text,outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>ys(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},{type:o.Text,isVisible:(e,{permissions:t})=>$(ys(e,"kategoriya_obekta"),t.hasAdvertisingKategoryAddPermission),outlined:!1,compute:({kategoriya_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)).join(", ")||"",title:"Категория объекта"},{type:o.Text,isVisible:(e,{permissions:t})=>$(ys(e,"podkategoriya_obekta"),t.hasAdvertisingKategoryAddPermission),outlined:!1,compute:({podkategoriya_obekta:e})=>e||"",title:"Подкатегория объекта"},{type:o.Text,isVisible:e=>ys(e,"primechanie"),outlined:!1,inputRows:4,compute:({primechanie:e})=>e||"",title:"Примечание"},{type:o.Text,outlined:!1,compute:async({nomer_agenstva:e})=>{const t=await os.dictService.getAgencyMap();return h.get(t,e)||e},title:"Номер агенства"},{type:o.Text,outlined:!1,compute:async({nomer_agenta:e})=>{const t=await os.dictService.getAgentMap();return h.get(t,e)||e},title:"Номер агента"}]},{type:o.Group,columns:"6",fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>e.apartment_images&&e.apartment_images.length,fields:[{type:o.Component,sx:{mb:2},element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})},{type:o.Component,element:Yn}]}]}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.podkategoriya_obekta,"Земля/Участок"),t=t&&ze(e.kategoriya_obekta,"Жилая"),t=t&&!ze(e.kategoriya_obekta,"Коммерческая"),t},fields:[{type:o.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилая земля/участок)"})},{type:o.Text,isVisible:e=>ys(e,"zagolovok_dlya_reklamy"),outlined:!1,compute:({zagolovok_dlya_reklamy:e})=>e||"",title:"Заголовок для рекламы"},{type:o.Text,outlined:!1,compute:async({apartment_id:e})=>{const t=await os.apartmentViewService.tryRead(e);if(!t)return"";const{arenda:a,prodazha:i}=t;return i&&a?"Продажа, Аренда":i?"Продажа":a?"Аренда":""},title:"Тип сделки"},{type:o.Text,outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>ys(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:"Назначение объекта"},{type:o.Text,outlined:!1,compute:e=>[e.sostoyanie_obekta,e["sostoyanie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>ys(e,"sostoyanie_obekta","sostoyanie-obekta_zemlya"),title:"Состояние объекта"},{type:o.Text,isVisible:e=>ys(e,"rajon"),outlined:!1,compute:({rajon:e})=>e||"",title:"Район"},{type:o.Text,isVisible:e=>ys(e,"ulicza"),outlined:!1,compute:({ulicza:e})=>e||"",title:"Адрес"},{type:o.Text,isVisible:e=>ys(e,"orientir"),outlined:!1,compute:({orientir:e})=>e||"",title:"Ориентир"},{type:o.Text,isVisible:e=>ys(e,"metro"),outlined:!1,compute:({metro:e})=>e||"",title:"Метро"},{type:o.Text,isVisible:e=>ys(e,"kolichestvo_sotok"),outlined:!1,compute:({kolichestvo_sotok:e})=>e||"",title:"Количество соток"},{type:o.Text,outlined:!1,compute:({vid_liczenzii:e})=>[e].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>ys(e,"vid_liczenzii"),title:"Вид лицензии"},{type:o.Text,isVisible:(e,{permissions:t})=>$(ys(e,"kategoriya_obekta"),t.hasAdvertisingKategoryAddPermission),outlined:!1,compute:({kategoriya_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)).join(", ")||"",title:"Категория объекта"},{type:o.Text,isVisible:(e,{permissions:t})=>$(ys(e,"podkategoriya_obekta"),t.hasAdvertisingKategoryAddPermission),outlined:!1,compute:({podkategoriya_obekta:e})=>e||"",title:"Подкатегория объекта"},{type:o.Text,isVisible:e=>ys(e,"primechanie"),outlined:!1,inputRows:4,compute:({primechanie:e})=>e||"",title:"Примечание"},{type:o.Text,outlined:!1,compute:async({nomer_agenstva:e})=>{const t=await os.dictService.getAgencyMap();return h.get(t,e)||e},title:"Номер агенства"},{type:o.Text,outlined:!1,compute:async({nomer_agenta:e})=>{const t=await os.dictService.getAgentMap();return h.get(t,e)||e},title:"Номер агента"}]},{type:o.Group,columns:"6",fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>e.apartment_images&&e.apartment_images.length,fields:[{type:o.Component,sx:{mb:2},element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})},{type:o.Component,element:Yn}]}]}]},{type:o.Fragment,isVisible:e=>(!ze(e.podkategoriya_obekta,"Квартиры")||!ze(e.kategoriya_obekta,"Коммерческая"))&&((!ze(e.podkategoriya_obekta,"Дома")||!ze(e.kategoriya_obekta,"Коммерческая"))&&((!ze(e.podkategoriya_obekta,"Земля/Участок")||!ze(e.kategoriya_obekta,"Коммерческая"))&&ze(e.kategoriya_obekta,"Коммерческая"))),fields:[{type:o.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая недвижимость)"})},{type:o.Text,isVisible:e=>ys(e,"zagolovok_dlya_reklamy"),outlined:!1,compute:({zagolovok_dlya_reklamy:e})=>e||"",title:"Заголовок для рекламы"},{type:o.Text,outlined:!1,compute:async({apartment_id:e})=>{const t=await os.apartmentViewService.tryRead(e);if(!t)return"";const{arenda:a,prodazha:i}=t;return i&&a?"Продажа, Аренда":i?"Продажа":a?"Аренда":""},title:"Тип сделки"},{type:o.Text,outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>ys(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:"Назначение объекта"},{type:o.Text,outlined:!1,compute:({raspolozhenie_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>ys(e,"raspolozhenie_obekta"),title:"Расположение объекта"},{type:o.Text,isVisible:e=>ys(e,"rajon"),outlined:!1,compute:({rajon:e})=>e||"",title:"Район"},{type:o.Text,isVisible:e=>ys(e,"ulicza"),outlined:!1,compute:({ulicza:e})=>e||"",title:"Адрес"},{type:o.Text,isVisible:e=>ys(e,"orientir"),outlined:!1,compute:({orientir:e})=>e||"",title:"Ориентир"},{type:o.Text,isVisible:e=>ys(e,"metro"),outlined:!1,compute:({metro:e})=>e||"",title:"Метро"},{type:o.Text,isVisible:e=>ys(e,"obshhaya_ploshhad"),outlined:!1,compute:({obshhaya_ploshhad:e})=>e||"",title:"Общая площадь М²"},{type:o.Text,isVisible:e=>ys(e,"kolichestvo_komnat"),outlined:!1,compute:({kolichestvo_komnat:e})=>e||"",title:"Количество комнат"},{type:o.Text,isVisible:e=>ys(e,"etazh"),outlined:!1,compute:({etazh:e})=>e||"",title:"Этаж"},{type:o.Text,isVisible:e=>ys(e,"etazhnost"),outlined:!1,compute:({etazhnost:e})=>e||"",title:"Этажность"},{type:o.Text,outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>ys(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},{type:o.Text,isVisible:e=>ys(e,"primechanie"),outlined:!1,inputRows:4,compute:({primechanie:e})=>e||"",title:"Примечание"},{type:o.Text,isVisible:(e,{permissions:t})=>$(ys(e,"kategoriya_obekta"),t.hasAdvertisingKategoryAddPermission),outlined:!1,compute:({kategoriya_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)).join(", ")||"",title:"Категория объекта"},{type:o.Text,isVisible:(e,{permissions:t})=>$(ys(e,"podkategoriya_obekta"),t.hasAdvertisingKategoryAddPermission),outlined:!1,compute:({podkategoriya_obekta:e})=>e||"",title:"Подкатегория объекта"},{type:o.Text,outlined:!1,compute:async({nomer_agenstva:e})=>{const t=await os.dictService.getAgencyMap();return h.get(t,e)||e},title:"Номер агенства"},{type:o.Text,outlined:!1,compute:async({nomer_agenta:e})=>{const t=await os.dictService.getAgentMap();return h.get(t,e)||e},title:"Номер агента"}]},{type:o.Group,columns:"6",fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>e.apartment_images&&e.apartment_images.length,fields:[{type:o.Component,sx:{mb:2},element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})},{type:o.Component,element:Yn}]}]}]},{type:o.Fragment,isVisible:e=>!(!ze(e.kategoriya_obekta,"Коммерческая")||!ze(e.podkategoriya_obekta,"Квартиры")),fields:[{type:o.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая квартира)"})},{type:o.Text,isVisible:e=>ys(e,"zagolovok_dlya_reklamy"),outlined:!1,compute:({zagolovok_dlya_reklamy:e})=>e||"",title:"Заголовок для рекламы"},{type:o.Text,outlined:!1,compute:async({apartment_id:e})=>{const t=await os.apartmentViewService.tryRead(e);if(!t)return"";const{arenda:a,prodazha:i}=t;return i&&a?"Продажа, Аренда":i?"Продажа":a?"Аренда":""},title:"Тип сделки"},{type:o.Text,isVisible:e=>ys(e,"tip_nedvizhimosti"),outlined:!1,compute:({tip_nedvizhimosti:e})=>e||"",title:"Тип недвижимости"},{type:o.Text,isVisible:e=>ys(e,"nazvanie_zhk"),outlined:!1,compute:({nazvanie_zhk:e})=>e||"",title:"Название ЖК"},{type:o.Text,outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>ys(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:"Назначение объекта"},{type:o.Text,outlined:!1,compute:({raspolozhenie_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>ys(e,"raspolozhenie_obekta"),title:"Расположение объекта"},{type:o.Text,isVisible:e=>ys(e,"rajon"),outlined:!1,compute:({rajon:e})=>e||"",title:"Район"},{type:o.Text,isVisible:e=>ys(e,"ulicza"),outlined:!1,compute:({ulicza:e})=>e||"",title:"Адрес"},{type:o.Text,isVisible:e=>ys(e,"orientir"),outlined:!1,compute:({orientir:e})=>e||"",title:"Ориентир"},{type:o.Text,isVisible:e=>ys(e,"metro"),outlined:!1,compute:({metro:e})=>e||"",title:"Метро"},{type:o.Text,isVisible:e=>ys(e,"obshhaya_ploshhad"),outlined:!1,compute:({obshhaya_ploshhad:e})=>e||"",title:"Общая площадь М²"},{type:o.Text,isVisible:e=>ys(e,"kolichestvo_komnat"),outlined:!1,compute:({kolichestvo_komnat:e})=>e||"",title:"Количество комнат"},{type:o.Text,outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>ys(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},{type:o.Text,isVisible:e=>ys(e,"primechanie"),outlined:!1,inputRows:4,compute:({primechanie:e})=>e||"",title:"Примечание"},{type:o.Text,isVisible:(e,{permissions:t})=>$(ys(e,"kategoriya_obekta"),t.hasAdvertisingKategoryAddPermission),outlined:!1,compute:({kategoriya_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)).join(", ")||"",title:"Категория объекта"},{type:o.Text,isVisible:(e,{permissions:t})=>$(ys(e,"podkategoriya_obekta"),t.hasAdvertisingKategoryAddPermission),outlined:!1,compute:({podkategoriya_obekta:e})=>e||"",title:"Подкатегория объекта"},{type:o.Text,outlined:!1,compute:async({nomer_agenstva:e})=>{const t=await os.dictService.getAgencyMap();return h.get(t,e)||e},title:"Номер агенства"},{type:o.Text,outlined:!1,compute:async({nomer_agenta:e})=>{const t=await os.dictService.getAgentMap();return h.get(t,e)||e},title:"Номер агента"}]},{type:o.Group,columns:"6",fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>e.apartment_images&&e.apartment_images.length,fields:[{type:o.Component,sx:{mb:2},element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})},{type:o.Component,element:Yn}]}]}]},{type:o.Fragment,isVisible:e=>!(!ze(e.kategoriya_obekta,"Коммерческая")||!ze(e.podkategoriya_obekta,"Дома")),fields:[{type:o.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческий дом)"})},{type:o.Text,isVisible:e=>ys(e,"zagolovok_dlya_reklamy"),outlined:!1,compute:({zagolovok_dlya_reklamy:e})=>e||"",title:"Заголовок для рекламы"},{type:o.Text,outlined:!1,compute:async({apartment_id:e})=>{const t=await os.apartmentViewService.tryRead(e);if(!t)return"";const{arenda:a,prodazha:i}=t;return i&&a?"Продажа, Аренда":i?"Продажа":a?"Аренда":""},title:"Тип сделки"},{type:o.Text,outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>ys(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:"Назначение объекта"},{type:o.Text,outlined:!1,compute:({raspolozhenie_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>ys(e,"raspolozhenie_obekta"),title:"Расположение объекта"},{type:o.Text,isVisible:e=>ys(e,"rajon"),outlined:!1,compute:({rajon:e})=>e||"",title:"Район"},{type:o.Text,isVisible:e=>ys(e,"ulicza"),outlined:!1,compute:({ulicza:e})=>e||"",title:"Адрес"},{type:o.Text,isVisible:e=>ys(e,"orientir"),outlined:!1,compute:({orientir:e})=>e||"",title:"Ориентир"},{type:o.Text,isVisible:e=>ys(e,"metro"),outlined:!1,compute:({metro:e})=>e||"",title:"Метро"},{type:o.Text,isVisible:e=>ys(e,"ploshhad_doma"),outlined:!1,compute:({ploshhad_doma:e})=>e||"",title:"Площадь дома М²"},{type:o.Text,isVisible:e=>ys(e,"kolichestvo_komnat"),outlined:!1,compute:({kolichestvo_komnat:e})=>e||"",title:"Количество комнат"},{type:o.Text,outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>ys(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},{type:o.Text,isVisible:e=>ys(e,"kolichestvo_sotok"),outlined:!1,compute:({kolichestvo_sotok:e})=>e||"",title:"Количество соток"},{type:o.Text,isVisible:e=>ys(e,"etazhnost"),outlined:!1,compute:({etazhnost:e})=>e||"",title:"Этажность"},{type:o.Text,isVisible:e=>ys(e,"primechanie"),outlined:!1,inputRows:4,compute:({primechanie:e})=>e||"",title:"Примечание"},{type:o.Text,isVisible:(e,{permissions:t})=>$(ys(e,"kategoriya_obekta"),t.hasAdvertisingKategoryAddPermission),outlined:!1,compute:({kategoriya_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)).join(", ")||"",title:"Категория объекта"},{type:o.Text,isVisible:(e,{permissions:t})=>$(ys(e,"podkategoriya_obekta"),t.hasAdvertisingKategoryAddPermission),outlined:!1,compute:({podkategoriya_obekta:e})=>e||"",title:"Подкатегория объекта"},{type:o.Text,outlined:!1,compute:async({nomer_agenstva:e})=>{const t=await os.dictService.getAgencyMap();return h.get(t,e)||e},title:"Номер агенства"},{type:o.Text,outlined:!1,compute:async({nomer_agenta:e})=>{const t=await os.dictService.getAgentMap();return h.get(t,e)||e},title:"Номер агента"}]},{type:o.Group,columns:"6",fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>e.apartment_images&&e.apartment_images.length,fields:[{type:o.Component,sx:{mb:2},element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})},{type:o.Component,element:Yn}]}]}]},{type:o.Fragment,isVisible:e=>!(!ze(e.kategoriya_obekta,"Коммерческая")||!ze(e.podkategoriya_obekta,"Земля/Участок")),fields:[{type:o.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая земля/участок)"})},{type:o.Text,isVisible:e=>ys(e,"zagolovok_dlya_reklamy"),outlined:!1,compute:({zagolovok_dlya_reklamy:e})=>e||"",title:"Заголовок для рекламы"},{type:o.Text,outlined:!1,compute:async({apartment_id:e})=>{const t=await os.apartmentViewService.tryRead(e);if(!t)return"";const{arenda:a,prodazha:i}=t;return i&&a?"Продажа, Аренда":i?"Продажа":a?"Аренда":""},title:"Тип сделки"},{type:o.Text,outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>ys(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:"Назначение объекта"},{type:o.Text,outlined:!1,compute:e=>[e.sostoyanie_obekta,e["sostoyanie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>ys(e,"sostoyanie_obekta","sostoyanie-obekta_zemlya"),title:"Состояние объекта"},{type:o.Text,isVisible:e=>ys(e,"rajon"),outlined:!1,compute:({rajon:e})=>e||"",title:"Район"},{type:o.Text,isVisible:e=>ys(e,"ulicza"),outlined:!1,compute:({ulicza:e})=>e||"",title:"Адрес"},{type:o.Text,isVisible:e=>ys(e,"orientir"),outlined:!1,compute:({orientir:e})=>e||"",title:"Ориентир"},{type:o.Text,isVisible:e=>ys(e,"metro"),outlined:!1,compute:({metro:e})=>e||"",title:"Метро"},{type:o.Text,isVisible:e=>ys(e,"kolichestvo_sotok"),outlined:!1,compute:({kolichestvo_sotok:e})=>e||"",title:"Количество соток"},{type:o.Text,outlined:!1,compute:({vid_liczenzii:e})=>[e].filter((e=>e)).flatMap((e=>e)).join(", ")||"",isVisible:e=>ys(e,"vid_liczenzii"),title:"Вид лицензии"},{type:o.Text,isVisible:e=>ys(e,"primechanie"),outlined:!1,inputRows:4,compute:({primechanie:e})=>e||"",title:"Примечание"},{type:o.Text,isVisible:(e,{permissions:t})=>$(ys(e,"kategoriya_obekta"),t.hasAdvertisingKategoryAddPermission),outlined:!1,compute:({kategoriya_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)).join(", ")||"",title:"Категория объекта"},{type:o.Text,isVisible:(e,{permissions:t})=>$(ys(e,"podkategoriya_obekta"),t.hasAdvertisingKategoryAddPermission),outlined:!1,compute:({podkategoriya_obekta:e})=>e||"",title:"Подкатегория объекта"},{type:o.Text,outlined:!1,compute:async({nomer_agenstva:e})=>{const t=await os.dictService.getAgencyMap();return h.get(t,e)||e},title:"Номер агенства"},{type:o.Text,outlined:!1,compute:async({nomer_agenta:e})=>{const t=await os.dictService.getAgentMap();return h.get(t,e)||e},title:"Номер агента"}]},{type:o.Group,columns:"6",fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>e.apartment_images&&e.apartment_images.length,fields:[{type:o.Component,sx:{mb:2},element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})},{type:o.Component,element:Yn}]}]}]}],bs=[".","-",'"',"'",",","(",")"],vs=e=>{const t=e=>"#"+Pe(e.split(" ").join("_").split("/").join("_"),...bs);return e.includes(", ")?e.split(", ").map(t).join(", "):t(e)},_s={"Категория объекта":"📌","Подкатегория объекта":"📌","Название ЖК":"👷","Тип недвижимости":"🏗️","Район":"📍","Адрес":"🛣️","Ориентир":"🚏","Метро":"🚊","Количество комнат":"🚪","Количество спален":"🛏️","Количество соток":"🏡","Этаж":"🪜","Этажность":"🏢","Бассейн":"🏊","Общая площадь М²":"📐","Площадь дома М²":"📐","Состояние ремонта":"⚒️","Назначение объекта":"✅","Расположение объекта":"🏫","Состояние объекта":"📊","Примечание":"💡","Тип сделки":"🔹"},gs={etazh:{1:vs("Первый этаж"),2:vs("Второй этаж"),3:vs("Третий этаж"),4:vs("Четвертый этаж"),5:vs("Пятый этаж"),6:vs("Шестой этаж"),7:vs("Седьмой этаж"),8:vs("Восьмой этаж"),9:vs("Девятый этаж"),10:vs("Десятый этаж"),11:vs("Одиннадцатый этаж"),12:vs("Двенадцатый этаж"),13:vs("Тринадцатый этаж"),14:vs("Четырнадцатый этаж"),15:vs("Пятнадцатый этаж"),16:vs("Шестнадцатый этаж"),17:vs("Семнадцатый этаж"),18:vs("Восемнадцатый этаж"),19:vs("Девятнадцатый этаж"),20:vs("Двадцатый этаж"),21:vs("Двадцать первый этаж"),22:vs("Двадцать второй этаж"),23:vs("Двадцать третий этаж"),24:vs("Двадцать четвертый этаж"),25:vs("Двадцать пятый этаж"),26:vs("Двадцать шестой этаж"),27:vs("Двадцать седьмой этаж"),28:vs("Двадцать восьмой этаж"),29:vs("Двадцать девятый этаж"),30:vs("Тридцатый этаж")},etazhnost:{1:vs("Одноэтажный"),2:vs("Двухэтажный"),3:vs("Трехэтажный"),4:vs("Четырехэтажный"),5:vs("Пятиэтажный"),6:vs("Шестиэтажный"),7:vs("Семиэтажный"),8:vs("Восьмиэтажный"),9:vs("Девятиэтажный"),10:vs("Десятиэтажный"),11:vs("Одиннадцатиэтажный"),12:vs("Двенадцатиэтажный"),13:vs("Тринадцатиэтажный"),14:vs("Четырнадцатиэтажный"),15:vs("Пятнадцатиэтажный"),16:vs("Шестнадцатиэтажный"),17:vs("Семнадцатиэтажный"),18:vs("Восемнадцатиэтажный"),19:vs("Девятнадцатиэтажный"),20:vs("Двадцатиэтажный")},kolichestvo_komnat:{1:vs("Одна комната"),2:vs("Две комнаты"),3:vs("Три комнаты"),4:vs("Четыре комнаты"),5:vs("Пять комнат"),6:vs("Шесть комнат"),7:vs("Семь комнат"),8:vs("Восемь комнат"),9:vs("Девять комнат"),10:vs("Десять комнат"),11:vs("Одиннадцать комнат"),12:vs("Двенадцать комнат"),13:vs("Тринадцать комнат"),14:vs("Четырнадцать комнат"),15:vs("Пятнадцать комнат"),16:vs("Шестнадцать комнат"),17:vs("Семнадцать комнат"),18:vs("Восемнадцать комнат"),19:vs("Девятнадцать комнат"),20:vs("Двадцать комнат"),21:vs("Двадцать одна комната"),22:vs("Двадцать две комнаты"),23:vs("Двадцать три комнаты"),24:vs("Двадцать четыре комнаты"),25:vs("Двадцать пять комнат")}},fs=e=>t=>(t=String(t),"Метро"===e&&(t=vs(t)),"Район"===e&&(t=vs(t)),"Адрес"===e&&(t=vs(t)),"Состояние ремонта"===e&&(t=vs(t)),"Тип недвижимости"===e&&(t=vs(t)),"Название ЖК"===e&&(t=vs(t)),"Категория объекта"===e&&(t=vs(t)),"Подкатегория объекта"===e&&(t=vs(t)),"Состояние объекта"===e&&(t=vs(t)),"Назначение объекта"===e&&(t=vs(t)),"Расположение объекта"===e&&(t=vs(t)),"Местоположение объекта"===e&&(t=vs(t)),"Бассейн"===e&&(t=vs(t)),"Тип сделки"===e&&(t=vs(t)),t),ks=(e,t,a)=>{const{isVisible:i=(()=>!0)}=e;if(!i(t,a)){if(e.fields)for(const i of e.fields)i.isVisible=()=>!1,ks(i,t,a);e.child&&(e.child.isVisible=()=>!1,ks(e.child,t,a))}},ws=async(e,t,a)=>{let i="";e.zagolovok_dlya_reklamy&&(i+="🏛️ <b>".concat(e.zagolovok_dlya_reklamy,"</b>\n\n")),i+=await(async(e,t)=>{let a="",i=h.cloneDeep(hs);i=Te(i),i.forEach((a=>ks(a,e,t)));for(const{title:o,isVisible:l=(()=>!0),compute:r}of i)l(e,t)&&r&&o&&"Заголовок для рекламы"!==o&&"Номер агента"!==o&&"Номер агенства"!==o&&(a+="".concat(_s[o]||"➡️"," <b>").concat(o,":</b> ").concat(fs(o)(await r(e,{})),"\n"),"Метро"===o&&(a+="\n"),"Состояние ремонта"===o&&(a+="\n"));return a})(e,a);const o=await os.dictService.getAgentMapRaw(),l=await os.dictService.getAgencyMapRaw();if(e.nomer_agenstva){const{phone:t,telegram:a}=h.get(l,e.nomer_agenstva);i+="\n<b>Агенство:</b>\n",i+="📲 <a href='tel:".concat(t,"'>").concat(t,"</a>\n"),i+="📩 <a href='https://t.me/".concat(a,"'>").concat(a,"</a>\n")}if(e.nomer_agenta){const{phone:t,telegram:a}=h.get(o,e.nomer_agenta);i+="\n<b>Агент:</b>\n",i+="📲 <a href='tel:".concat(t,"'>").concat(t,"</a>\n"),i+="📩 <a href='https://t.me/".concat(a,"'>").concat(a,"</a>\n")}i+="\n";const r=[];Object.entries(e).forEach((([e,t])=>{const a=h.get(gs,e);a&&r.push(h.get(a,t))})),e.apartment_id&&(i+=await(async e=>{const t=await os.apartmentViewService.read(e);let a="";const i=e=>"uzs"===e?"сум":"у.е.";let o=!1;return ze(t.kategoriya_obekta,"Коммерческая")?(t.prodazha&&t.prod_kom_startovaya_czena&&(a+="💵 <b>Продажа:</b> ".concat(t.prod_kom_startovaya_czena," ").concat(i(t.prod_kom_startovaya_czena_valyuta),"\n"),o=!0),t.arenda&&t.rent_kom_startovaya_czena&&(a+="🔑 <b>В аренду:</b> ".concat(t.rent_kom_startovaya_czena," ").concat(i(t.rent_kom_startovaya_czena_valyuta)),t.rent_kom_komissiya_agenstva&&(a+=" (Есть комиссия)"),a+="\n",o=!0)):ze(t.kategoriya_obekta,"Жилая","От застройщика")&&(t.prodazha&&t.prod_startovaya_czena&&(a+="💵 <b>Продажа:</b> ".concat(t.prod_startovaya_czena," ").concat(i(t.prod_startovaya_czena_valyuta),"\n"),o=!0),t.arenda&&t.rent_startovaya_czena&&(a+="🔑 <b>В аренду:</b> ".concat(t.rent_startovaya_czena," ").concat(i(t.rent_startovaya_czena_valyuta)),t.rent_komissiya_agenstva&&(a+=" (Есть комиссия)"),a+="\n",o=!0)),o&&(a+="\n\n"),a})(e.apartment_id));const n={YouTube:await os.dictService.getYoutubePrimaryLink(),Instagram:await os.dictService.getInstagramPrimaryLink(),Facebook:await os.dictService.getFacebookPrimaryLink(),Telegram:await os.dictService.getTelegramPrimaryLink()};return i+=Object.entries(n).filter((([,e])=>e)).map((([e,t])=>"<a href='".concat(t,"'>").concat(e,"</a>"))).join(" | "),i+="\n\n",i+=r.filter((e=>e)).join(" "),i},Ss=[{type:o.Combo,outlined:!1,name:"telegram_channel",itemList:async()=>{const e=await os.dictService.getTelegramMap();return Object.keys(e)},tr:async e=>{const t=await os.dictService.getTelegramMap();return h.get(t,e)||""},title:"Канал Telegram"}],zs=[{type:Ee.Link,isVisible:()=>!!os.routerService.previousPath,action:"list-action",label:se(fe,{sx:{display:"block"}})},{type:Ee.Link,action:"list-action",label:"База объектов"},{type:Ee.Link,action:"list-action",label:"Просмотр рекламы"},{type:Ee.Button,isDisabled:({payload:{permissions:e}})=>!e.hasAdvertisingPublicationPermission,action:"publish-action",label:"Опубликовать в канал"},{type:Ee.Button,action:"edit-action",label:"Редактировать"}],xs=[{type:o.Fragment,isVisible:({activeStep:e})=>0===e,fields:[{type:o.Component,element:()=>se(Ae,{variant:"h6",fontWeight:"bold",mb:2,children:"Данные контакта"})},{type:o.Text,outlined:!0,title:"Ф.И.О",isInvalid:({fio:e})=>e?null:"Обязательно к заполнению",description:"Фамилия Имя Отчество контакта",name:"fio"},{type:o.Text,outlined:!0,title:"Телефон",isInvalid:({telefon:e})=>e?null:"Обязательно к заполнению",description:"Телефон контакта",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon"}]},{type:o.Fragment,isVisible:({activeStep:e})=>2===e,fields:[{type:o.Component,element:()=>se(Ae,{variant:"h6",fontWeight:"bold",mb:1,children:"Предпросмотр"})},{type:o.Component,isVisible:({contact_id:e})=>!e,element:()=>se(Xe,{variant:"outlined",color:"warning",sx:{mb:2},children:"Создавая новый объект, убедитесь, что нет дубликата контакта"})},{type:o.Component,isVisible:({contact_id:e})=>!!e,element:()=>se(Xe,{variant:"outlined",color:"info",sx:{mb:2},children:"Убедитесь, что это контактные данные клиента"})},{type:o.Text,isVisible:({contact_id:e})=>!!e,compute:async({contact_id:e})=>{const{fio:t=""}=await os.contactViewService.tryRead(e)||{};return t},disabled:!0,outlined:!0,title:"Ф.И.О"},{type:o.Text,isVisible:({contact_id:e})=>!!e,compute:async({contact_id:e})=>{const{telefon:t=""}=await os.contactViewService.tryRead(e)||{};return t},fieldBottomMargin:"0",disabled:!0,outlined:!0,title:"Телефон",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000"},{type:o.Text,isVisible:({contact_id:e})=>!e,outlined:!0,title:"Ф.И.О",isInvalid:({fio:e})=>e?null:"Обязательно к заполнению",description:"Фамилия Имя Отчество контакта",name:"fio"},{type:o.Text,isVisible:({contact_id:e})=>!e,outlined:!0,title:"Телефон",isInvalid:({telefon:e})=>e?null:"Обязательно к заполнению",description:"Телефон контакта",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon"}]}],As=[{type:Ee.Link,action:"list-action",label:"Список объектов"},{type:Ee.Link,action:"list-action",label:"Создание объекта"}],Ts=Nn()((e=>({root:{position:"relative",overflow:"hidden"},header:{position:"absolute",top:0,left:0,height:65,paddingLeft:e.spacing(2),paddingRight:e.spacing(2),background:"whitesmoke",width:"100%"},content:{minHeight:300},adjust:{paddingBottom:65},listItemBackground:{background:le(e.palette.primary.main,.05)}}))),Fs=oe.createLoader(12),Cs=[{id:"owner_contact",label:"Контакт",isActive:()=>cs(["/apartment_edit/:id/owner_contact"])},{id:"object",label:"Объект",isActive:()=>cs(["/apartment_edit/:id","/apartment_edit/:id/object"])},{id:"tasks",isDisabled:()=>!0,label:"Задачи",isActive:()=>cs(["/apartment_edit/:id/tasks"])},{id:"advertising",isDisabled:()=>!0,label:"Реклама",isActive:()=>cs(["/apartment_edit/:id/advertising"])},{id:"service_comment",isDisabled:()=>!0,label:"Служебный комментарий",isActive:()=>cs(["/apartment_edit/:id/service_comment"])},{id:"history",isDisabled:()=>!0,label:"История",isActive:()=>cs(["/apartment_edit/:id/history"])},{id:"documents",label:"Документы",isActive:()=>cs(["/apartment_edit/:id/documents"])},{id:"commission_and_status",label:"Комиссия и статус",isDisabled:()=>!0,isActive:()=>cs(["/apartment_edit/:id/commission_and_status"])}],Vs=(e,t)=>{if(t)return;const a=rs("id","create");"owner_contact"===e&&os.routerService.replace("/apartment_edit/".concat(a,"/owner_contact")),"object"===e&&os.routerService.replace("/apartment_edit/".concat(a,"/object")),"tasks"===e&&os.routerService.replace("/apartment_edit/".concat(a,"/tasks")),"advertising"===e&&os.routerService.replace("/apartment_edit/".concat(a,"/advertising")),"service_comment"===e&&os.routerService.replace("/apartment_edit/".concat(a,"/service_comment")),"history"===e&&os.routerService.replace("/apartment_edit/".concat(a,"/history")),"documents"===e&&os.routerService.replace("/apartment_edit/".concat(a,"/documents")),"commission_and_status"===e&&os.routerService.replace("/apartment_edit/".concat(a,"/commission_and_status"))},Ls=({payload:e,children:t,mode:a=B.Paper})=>{const i=re.useMemo((()=>"tabs"===a?B.Tabs:B.Paper),[a]);return se(qe,{withFixedPos:!0,fixedPosHeaderAdjust:a===B.Paper?85:64,mode:i,options:Cs,payload:e,onActiveOptionChange:Vs,children:t})},Is=[{type:Ee.Link,isVisible:()=>!!os.routerService.previousPath,action:"list-action",label:se(fe,{sx:{display:"block"}})},{type:Ee.Link,action:"list-action",label:"База объектов"},{type:Ee.Link,action:"list-action",isVisible:({id:e})=>"create"!==e,label:"Редактирование документа"},{type:Ee.Link,action:"list-action",isVisible:({id:e})=>"create"===e,label:"Создание документа"},{type:Ee.Button,isDisabled:({hasChanged:e})=>!e,action:"save-action",label:"Сохранить"}],Ms=({data:e,onSubmit:t,onChange:a,fullScreen:i})=>{const{handleLoadStart:o,handleLoadEnd:l}=Oe({history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)});return yt({data:e,fullScreen:i,fallback:os.errorService.handleGlobalError,onClick:async e=>{const t=await os.appwriteService.getFileURL(e),a=await os.appwriteService.readFileName(e);pt(t,a)},onUpload:e=>os.appwriteService.uploadFile(e),onLoadStart:o,onLoadEnd:l,onSubmit:async e=>{t&&await t(e)},onChange:a,submitLabel:"Сохранить",tr:async e=>await os.appwriteService.tryReadFileName(e)||e})},Bs=[{type:Ee.Link,isVisible:()=>!!os.routerService.previousPath,action:"list-action",label:se(fe,{sx:{display:"block"}})},{type:Ee.Link,action:"list-action",label:"База объектов"},{type:Ee.Link,action:"list-action",label:"Просмотр документа"},{type:Ee.Button,isDisabled:({payload:{permissions:e}})=>!e.hasApartmentUpdatePermission,action:"edit-action",label:"Редактировать"}],Ds={allowCustomElements:!0,allowElements:["text-underline","blank-link"],allowAttributes:{href:["blank-link"]}},Rs=re.forwardRef((({item:e,loading:t,className:a,style:i},o)=>se("div",{className:a,style:i,ref:o,children:se(et,{sx:{position:"relative",overflow:"hidden"},children:[se(ht,{children:[se(bt,{children:se(ye,{loading:t,payload:e,Loader:()=>se(vt,{variant:"circular",width:40,height:40}),children:async({user_id:e})=>{const t=await os.userViewService.tryRead(e),a=(null==t?void 0:t.avatar)?await os.appwriteService.getImageURL(t.avatar):void 0;return se(_t,{alt:null==t?void 0:t.email,src:a,sx:{height:40,mr:2,width:40}})}})}),se(ye,{loading:t,payload:e,Loader:()=>se(we,{flex:1,children:[se(vt,{sx:{mb:1},variant:"rectangular",width:210,height:22}),se(vt,{variant:"rectangular",width:170,height:22})]}),children:async({user_id:e,type:t})=>{const a=await os.userViewService.tryRead(e),i=[null==a?void 0:a.first_name,null==a?void 0:a.last_name,null==a?void 0:a.middle_name].filter((e=>e)).join(" ");return se(dt,{primary:i,secondary:"deal-begin"===t?"Создал сделку":"deal-end"===t?"Завершил сделку":"deal-reassign"===t?"Взял ответственность":"deal-status"===t?"Изменил статус":"Что-то сделал"})}}),se(Ae,{children:n(e.$createdAt).format("HH:mm DD/MM/YYYY")})]}),!!e.comment&&se(me,{component:"pre",sx:{ml:1,mr:1,mb:1},children:se(gt,{config:Ds,handler:()=>e.comment})}),se(me,{sx:{position:"absolute",top:0,left:0,bottom:0,width:6,zIndex:1,background:"skyblue"}})]})}))),js="real-estate__headerRoot",qs=[{type:Ee.Link,isVisible:()=>!!os.routerService.previousPath,action:"list-action",label:se(fe,{sx:{display:"block"}})},{type:Ee.Link,action:"list-action",label:"База объектов"},{type:Ee.Link,action:"list-action",label:"Просмотр истории"}],Ps=[{type:kt.Add,isDisabled:(e,{permissions:t})=>!t.hasApartmentCreatePermission,label:"Создать"},{type:kt.Fab,action:"column-setup-action",icon:wt,label:"Колонки"},{type:kt.Menu,options:[{action:"add-action",isDisabled:(e,{permissions:t})=>!t.hasApartmentCreatePermission},{action:"update-now"},{action:"resort-action"},{action:"drop-filters"}]}],Es=oe.createLoader(28),Ns=[{type:St.Compute,sortable:!1,field:"index",description:"Номер объекта",headerName:"Номер",element:({index:e})=>se(zt,{content:e}),width:()=>100},{type:St.Compute,sortable:!1,field:"photo",description:"Фотография объекта",headerName:"Фото",width:()=>150,element:({apartment_images:e})=>se(me,{style:{height:64,width:128,display:"flex",alignItems:"center",background:"#ccc",justifyContent:"center"},children:se(ye,{Loader:Es,children:async()=>{const t=e?e[0]:null,a=t?await os.appwriteService.getImageURL(t):"";return se(Se,{children:a?se("img",{crossOrigin:"anonymous",loading:"lazy",alt:"apartment",src:a,style:{objectFit:"cover",height:"100%",width:"100%"}}):se(he,{sx:{color:"white",fontSize:28}})})}})})},{type:St.Text,sortable:!0,field:"zagolovok",description:"Заголовок объекта",headerName:"Заголовок",width:()=>100},{type:St.Text,sortable:!0,field:"kolichestvo_komnat",description:"Количество комнат у объекта",fullName:"Количество комнат",headerName:"Комнат",width:()=>60},{type:St.Text,sortable:!0,field:"etazh",description:"Количество этажей объекта",headerName:"Этаж",width:()=>60},{type:St.Text,sortable:!0,field:"etazhnost",description:"Этажность объекта",headerName:"Этажность",width:()=>80},{type:St.Compute,sortable:!0,field:"ploshhad",description:"Площадь объекта",compute:e=>[e.obshhaya_ploshhad,e.ploshhad_doma].filter((e=>!!e)).join(", "),headerName:"М²",width:()=>60},{type:St.Compute,sortable:!0,description:"Адрес",field:"adres",compute:e=>[e.strana,e.gorod,e.oblast,e.rajon,e.mahallya,e.ulicza,e.orientir].filter((e=>!!e)).join(", "),headerName:"Адрес",width:()=>125},{type:St.Compute,field:"kategoriya_obekta",description:"Категория объекта",sortable:!0,compute:e=>{var t;return(null==(t=e.kategoriya_obekta)?void 0:t.join(", "))||""},headerName:"Категория",width:()=>100},{type:St.Compute,description:"Продажа",field:"czena_prodazha",sortable:!0,isVisible:({payload:e})=>e.permissions.hasOwnerPricePermission,compute:async e=>await os.exchangeService.getApartmentProdPriceLabel(e),headerName:"Продажа",width:()=>100},{type:St.Compute,description:"Аренда",field:"czena_arenda",isVisible:({payload:e})=>e.permissions.hasOwnerPricePermission,sortable:!0,compute:async e=>await os.exchangeService.getApartmentRentPriceLabel(e),headerName:"Аренда",width:()=>100},{type:St.Compute,sortable:!0,description:"Источник",field:"istochnik",compute:e=>e.istochnik||"",headerName:"Источник",width:()=>100},{type:St.Compute,description:"Статус объекта",sortable:!1,field:"status",headerName:"Статус",compute:async({id:e})=>await os.dealViewService.readStatusByApartmentId(e),width:()=>100},{type:St.Compute,isVisible:({payload:{permissions:e}})=>e.hasFioPermission,description:"Фамилия, имя, отчество контакта",sortable:!1,field:"fio",compute:async({contact_id:e})=>{const t=await os.contactViewService.tryRead(e);return t?t.fio:""},headerName:"Ф.И.О.",width:()=>125},{type:St.Compute,isVisible:({payload:{permissions:e}})=>e.hasPreviewModeDisabled,sortable:!1,field:"telefon",description:"Номер телефона контакта",element:({id:e,contact_id:t})=>se(xt,{payload:e,condition:e=>os.permissionRequestService.getOwnerContactPermissionByApartmentId(e),Loading:"Загрузка",Else:"Скрыто",children:se(ye,{payload:t,children:async e=>{const t=await os.contactViewService.tryRead(e);return t?t.telefon:""}})}),headerName:"Телефон",width:()=>125},{type:St.Compute,field:"$createdAt",description:"Дата создания объекта",headerName:"Создано",compute:({$createdAt:e})=>n(e).format("DD/MM/YYYY"),sortable:!0,width:()=>145},{type:St.Compute,field:"$updatedAt",description:"Дата обновления объекта",sortable:!0,headerName:"Обновлено",compute:({$updatedAt:e})=>n(e).format("DD/MM/YYYY"),width:()=>145},{type:St.Action,headerName:"Действие",sortable:!1,width:()=>100}],Os=[{label:"Жилая",name:"zhilaya"},{label:"Коммерческая",name:"kommercheskaya"},{label:"От застройщика",name:"novostrojka"}],Hs=[{label:"Редактировать",isDisabled:(e,{permissions:t})=>!t.hasApartmentUpdatePermission,action:"edit-action",icon:At},{label:"В архиве",action:"toggle-archive",icon:Tt,isVisible:({system_is_archive:e,system_is_remove:t})=>$(!e,!t)},{label:"В архиве",action:"toggle-archive",icon:Ft,isVisible:({system_is_archive:e,system_is_remove:t})=>$(!!e,!t)},{label:"Удалить",action:"toggle-remove",icon:Ct,isVisible:({system_is_archive:e,system_is_remove:t})=>$(!t,!e)},{label:"Восстановить",action:"toggle-remove",icon:Vt,isVisible:({system_is_archive:e,system_is_remove:t})=>$(!!t,!e)},{label:"Создать копию",isVisible:(e,{permissions:t})=>t.hasSuperAdminFlagPermission,action:"copy-action",icon:Lt}],Us=({name:e,columns:t,title:a,isVisible:i,inputFormatterAllowed:l,inputFormatterTemplate:r})=>({type:o.Group,isVisible:i,columns:t,fields:[{type:o.Component,fieldRightMargin:"0",fieldBottomMargin:"0",element:()=>se(Ae,{variant:"caption",sx:{opacity:.8},children:a})},{type:o.Text,sx:{"& .MuiIconButton-root":{pointerEvents:"none"}},isInvalid:t=>t["".concat(e,"_ot")]&&t["".concat(e,"_do")]&&parseInt(t["".concat(e,"_ot")])>parseInt(t["".concat(e,"_do")])?"От должно быть меньше До":null,title:"",columns:"6",outlined:!1,inputFormatterAllowed:l,inputFormatterTemplate:r,name:"".concat(e,"_ot"),leadingIcon:()=>se(me,{sx:{height:20,width:20,display:"flex",alignItems:"center",justifyContent:"center"},children:se(Ae,{textTransform:"lowercase",variant:"caption",children:"От"})})},{type:o.Text,sx:{"& .MuiIconButton-root":{pointerEvents:"none"}},isInvalid:t=>t["".concat(e,"_ot")]&&t["".concat(e,"_do")]&&parseInt(t["".concat(e,"_ot")])>parseInt(t["".concat(e,"_do")])?"От должно быть меньше До":null,title:"",columns:"6",outlined:!1,inputFormatterAllowed:l,inputFormatterTemplate:r,name:"".concat(e,"_do"),leadingIcon:()=>se(me,{sx:{height:20,width:20,display:"flex",alignItems:"center",justifyContent:"center"},children:se(Ae,{textTransform:"lowercase",variant:"caption",children:"До"})})}]}),Ws=[{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая"),t=t&&!ze(e.podkategoriya_obekta,"Квартиры"),t=t&&!ze(e.podkategoriya_obekta,"Дома"),t=t&&!ze(e.podkategoriya_obekta,"Земля/Участок"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая недвижимость)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"})]}]},{type:o.Fragment,isVisible:e=>!ze(e.kategoriya_obekta,"Коммерческая")&&ze(e.podkategoriya_obekta,"Земля/Участок"),fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Земля/Участок)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"})]}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&!ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Квартиры"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Квартиры)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"})]}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&!ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Дома"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Дома)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostevogo_doma",title:"Площадь гостевого дома М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_dopolnitelnoj_pristrojki",title:"Площадь дополнительной пристройки М²"})]}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Квартиры"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая квартира)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"})]}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Дома"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческий дом)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostevogo_doma",title:"Площадь гостевого дома М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_dopolnitelnoj_pristrojki",title:"Площадь дополнительной пристройки М²"})]}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Земля/Участок"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая земля/участок)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"})]}]}],$s=[{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая"),t=t&&!ze(e.podkategoriya_obekta,"Квартиры"),t=t&&!ze(e.podkategoriya_obekta,"Дома"),t=t&&!ze(e.podkategoriya_obekta,"Земля/Участок"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая недвижимость)"})},{type:o.Items,columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Телефон","Телевизор","Интернет","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Кондиционер","Пылесос","Утюг","Умный дом","Цоколь","Подвал","Терраса","Угловой","Комната охраны","Вдоль дороги","Сарай","Огород","Решетки на окнах","Пожарная сигнализация","Видеонаблюдение","Сигнализация","Разгрузочный пандус"]},{type:o.Items,columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Закрытый двор","Шлагбаум","Детская площадка","Охрана","Спортивная площадка","Парковая зона","Школа","Детский сад","Колледж","Университет","Рынок","Кафе/Рестораны","ТЦ","Супермаркет","Магазин","Аптека","Больница","Автобусная остановка","Ж/Д ветка"]}]}]}},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Квартиры"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая квартира)"})},{type:o.Items,columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Холодильник","Стиральная машина","Телевизор","Интернет","Мусоропровод","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Кондиционер","Пылесос","Утюг","Умный дом","Решетки на окнах","Пожарная сигнализация","Видеонаблюдение","Сигнализация","Разгрузочный пандус","Цоколь","Подвал","Гардеробная","Терраса","Торец","Собственное обслуживающее ТСЖ","Консьерж","Угловой","Вдоль дороги"]},{type:o.Items,columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Закрытый двор","Шлагбаум","Детская площадка","Барбекю зона","Спортивная площадка","Охрана","Парковая зона","Школа","Детский сад","Колледж","Университет","Рынок","Кафе/Рестораны","ТЦ","Супермаркет","Магазин","Аптека","Больница","Автобусная остановка","Ж/Д ветка"]}]}]}},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Дома"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческий дом)"})},{type:o.Items,columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Телефон","Телевизор","Интернет","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Кондиционер","Пылесос","Утюг","Умный дом","Комната охраны","Гостевой домик","Барбекю зона","2 дома во дворе","Сарай","Огород","Полисадник","Дополнительная пристройка","Разгрузочный пандус","Цоколь","Подвал","Гардеробная","Терраса","Угловой","Вдоль дороги","Решетки на окнах","Пожарная сигнализация","Видеонаблюдение","Сигнализация"]},{type:o.Items,columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Закрытый двор","Шлагбаум","Детская площадка","Охрана","Спортивная площадка","Парковая зона","Школа","Детский сад","Колледж","Университет","Рынок","Кафе/Рестораны","ТЦ","Супермаркет","Магазин","Аптека","Больница","Автобусная остановка","Ж/Д ветка"]}]}]}},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Земля/Участок"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая земля/участок)"})},{type:o.Items,columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Забор","Катлаван","Сарай","Огород","Самострой","Угловой","Пожарная сигнализация","Видеонаблюдение","Сигнализация","Разгрузочный пандус"]},{type:o.Items,columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Закрытый двор","Шлагбаум","Детская площадка","Охрана","Спортивная площадка","Парковая зона","Школа","Детский сад","Колледж","Университет","Рынок","Кафе/Рестораны","ТЦ","Супермаркет","Магазин","Аптека","Больница","Автобусная остановка","Ж/Д ветка"]}]}]}}],Gs=[{type:o.Fragment,isVisible:e=>(!ze(e.podkategoriya_obekta,"Земля/Участок")||!ze(e.kategoriya_obekta,"Коммерческая"))&&((!ze(e.podkategoriya_obekta,"Дома")||!ze(e.kategoriya_obekta,"Коммерческая"))&&((!ze(e.podkategoriya_obekta,"Квартиры")||!ze(e.kategoriya_obekta,"Коммерческая"))&&ze(e.kategoriya_obekta,"Коммерческая"))),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая недвижимость)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_obekta",title:"Состояние объекта",itemList:["Новой постройки","Недостроенный","Под снос","Коробка","Пустая земля/участок"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip_stroeniya",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"}),Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"balkon",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"parkovka",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},{type:o.Combo,sx:{mt:2},columns:"3",outlined:!1,name:"mebel",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:o.Items,columns:"3",outlined:!1,name:"voda",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]},{type:o.Items,columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Combo,columns:"3",outlined:!1,name:"lift_kommercziya",title:"Лифт",itemList:["Есть","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"sistema_otopleniya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Combo,columns:"3",outlined:!1,name:"elektrichestvo",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Combo,columns:"3",outlined:!1,name:"kanalizacziya",title:"Канализация",itemList:["Да","Нет"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"mestopolozhenie_obekta",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),{type:o.Items,columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:o.Items,columns:"3",outlined:!1,name:"vid_liczenzii",title:"Вид лицензии",itemList:["Коммерческая","Жилая"]},{type:o.Component,sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>se(xe,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})}]}},{type:o.Fragment,isVisible:e=>{if(ze(e.podkategoriya_obekta,"Квартиры")&&ze(e.kategoriya_obekta,"Коммерческая"))return!1;let t=!1;return t=t||ze(e.podkategoriya_obekta,"Квартиры"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Квартиры)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_remonta-kvartiry",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Complete,columns:"3",outlined:!1,name:"nazvanie_zhk",title:"Название ЖК",tip:['ЖК "Greenwich"','ЖК "OzMahal"','ЖК "Elysium"','ЖК "Binkat"','ЖК "Brooklyn"','ЖК "Assalom Havo"','ЖК "Istanbul City"']},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip-stroeniya_kvartiry",title:"Тип строения",itemList:["Кирпичный","Монолитный","Блочный","Панельный","Деревянный","Газоблочный","Бетонно-керамзитный"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"balkon_kvartira",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Малосемейная","Общежитие","Пентхаус","Дуплекс","Комната"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"lift_kvartira",title:"Лифт",itemList:["Пассажирский","Грузовой","Нет"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel_kvartira",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"zhilaya_ploshhad",title:"Жилая площадь М²"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"mebel_kvartira",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"}),Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_kvartiry",title:"Система отопления",itemList:["Центральное","2х контурный котел","Теплый пол"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"vid_iz_okna",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"parkovka_kvartira",title:"Парковка",itemList:["Наземная","Собственная","Подземная","В аренду","Нет"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"})]}},{type:o.Fragment,isVisible:e=>{if(ze(e.podkategoriya_obekta,"Дома")&&ze(e.kategoriya_obekta,"Коммерческая"))return!1;let t=!1;return t=t||ze(e.podkategoriya_obekta,"Дома"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Дома)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_doma",title:"Состояние дома",itemList:["Новой постройки","Недостроенный","Под снос","Коробка"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip-stroeniya_doma",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"balkon_doma",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Смешанный"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"bassejn",title:"Бассейн",itemList:["Летний","Зимний","Нет"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_doma",title:"Площадь дома М²"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel_doma",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"voda_dom",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]},{type:o.Combo,sx:{mt:2},columns:"3",outlined:!1,name:"lift_dom",title:"Лифт",itemList:["Есть","Нет"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_dom",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Combo,sx:{mt:2},columns:"3",outlined:!1,name:"mebel_dom",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"gaz_dom",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_dom",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"}),{type:o.Combo,sx:{mt:2},columns:"3",outlined:!1,name:"elektrichestvo_dom",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"vid_iz_okna_dom",title:"Вид из окна",itemList:["В огород","На улицу","На трассу"]},{type:o.Items,columns:"3",outlined:!1,name:"garazh",title:"Гараж",itemList:["Подземный","Закрытый","Под навесом","Уличный"]},{type:o.Combo,columns:"3",outlined:!1,name:"kanalizacziya_dom",title:"Канализация",itemList:["Да","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"raspolozhenie_doma",title:"Расположение дома",itemList:["По середине","В начале двора","В конце двора"]},{type:o.Items,columns:"3",outlined:!1,name:"mestopolozhenie-obekta_dom",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]}]}},{type:o.Fragment,isVisible:e=>!ze(e.kategoriya_obekta,"Коммерческая")&&ze(e.podkategoriya_obekta,"Земля/Участок"),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Земля/Участок)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Component,sx:{mb:2,pr:1},columns:"3",name:"naznachenie-obekta-zemlya_uchastok",element:e=>se(xe,{variant:"standard",label:"Назначение объекта",items:[{label:"Сельхоз использование",value:"Сельхоз использование"},{label:"ИЖС",value:"ИЖС"},{label:"Высотная застройка",value:"Высотная застройка"},{label:"Промышленное назначение",value:"Промышленное назначение"},{label:"ТЦ",value:"ТЦ"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Склады",value:"Склады"},{label:"Инвестпроект",value:"Инвестпроект"},{label:"Строительство образовательных учреждений",value:"Строительство образовательных учреждений"},{label:"АЗС",value:"АЗС"},{label:"Мойка",value:"Мойка"}],value:e["naznachenie-obekta_zemlya"],onChange:t=>e.onChange({"naznachenie-obekta_zemlya":t})})},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip_zemli_uchastka",title:"Тип земли/участка",itemList:["Делимый","Неделимый"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie-obekta_zemlya",title:"Состояние объекта",itemList:["Пустая земля/участок","Недостроенная","Под снос"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"}),Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie-remonta_zemlya",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"parkovka_zemlya",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"voda_zemlya",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"mestopolozhenie-obekta_zemlya",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_goroda",title:"Расстояние до города (м)"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_zemlya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Items,columns:"3",outlined:!1,name:"podezdnye_puti",title:"Подъездные пути",itemList:["Асфальтированная дорога","Грунтовая дорога","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_zemlya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"elektrichestvo_zemlya",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"gaz_zemlya",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Combo,columns:"3",outlined:!1,name:"kanalizacziya_zemlya",title:"Канализация",itemList:["Да","Нет"]}]}},{type:o.Fragment,isVisible:e=>!(!ze(e.kategoriya_obekta,"Коммерческая")||!ze(e.podkategoriya_obekta,"Квартиры")),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая квартира)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_remonta-kvartiry",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Component,sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>se(xe,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},{type:o.Items,columns:"3",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"balkon_kvartira",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Малосемейная","Общежитие","Пентхаус","Дуплекс","Комната"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"lift_kvartira",title:"Лифт",itemList:["Пассажирский","Грузовой","Нет"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),{type:o.Complete,columns:"3",outlined:!1,name:"nazvanie_zhk",title:"Название ЖК",tip:['ЖК "Greenwich"','ЖК "OzMahal"','ЖК "Elysium"','ЖК "Binkat"','ЖК "Brooklyn"','ЖК "Assalom Havo"','ЖК "Istanbul City"']},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel_kvartira",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"parkovka_kvartira",title:"Парковка",itemList:["Наземная","Собственная","Подземная","В аренду","Нет"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"zhilaya_ploshhad",title:"Жилая площадь М²"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"mebel_kvartira",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"}),Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_kvartiry",title:"Система отопления",itemList:["Центральное","2х контурный котел","Теплый пол"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"vid_iz_okna",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:o.Items,columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip-stroeniya_kvartiry",title:"Тип строения",itemList:["Кирпичный","Монолитный","Блочный","Панельный","Деревянный","Газоблочный","Бетонно-керамзитный"]}]}},{type:o.Fragment,isVisible:e=>!(!ze(e.kategoriya_obekta,"Коммерческая")||!ze(e.podkategoriya_obekta,"Дома")),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческий дом)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_doma",title:"Состояние дома",itemList:["Новой постройки","Недостроенный","Под снос","Коробка"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"mestopolozhenie-obekta_dom",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:o.Component,sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>se(xe,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Items,columns:"3",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip-stroeniya_doma",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_doma",title:"Площадь дома М²"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"raspolozhenie_doma",title:"Расположение дома",itemList:["По середине","В начале двора","В конце двора"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Смешанный"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"bassejn",title:"Бассейн",itemList:["Летний","Зимний","Нет"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel_doma",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"voda_dom",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]},{type:o.Combo,sx:{mt:2},columns:"3",outlined:!1,name:"lift_dom",title:"Лифт",itemList:["Есть","Нет"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_dom",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Combo,sx:{mt:2},columns:"3",outlined:!1,name:"mebel_dom",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"gaz_dom",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"}),{type:o.Combo,sx:{mt:2},columns:"3",outlined:!1,name:"elektrichestvo_dom",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"vid_iz_okna_dom",title:"Вид из окна",itemList:["В огород","На улицу","На трассу"]},{type:o.Items,columns:"3",outlined:!1,name:"garazh",title:"Гараж",itemList:["Подземный","Закрытый","Под навесом","Уличный"]},{type:o.Combo,columns:"3",outlined:!1,name:"kanalizacziya_dom",title:"Канализация",itemList:["Да","Нет"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"balkon_doma",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_dom",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]}]}},{type:o.Fragment,isVisible:e=>!(!ze(e.kategoriya_obekta,"Коммерческая")||!ze(e.podkategoriya_obekta,"Земля/Участок")),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая земля/участок)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Component,sx:{mt:2,mb:2,pr:1},columns:"3",name:"naznachenie-obekta-zemlya_uchastok",element:e=>se(xe,{variant:"standard",label:"Назначение объекта",items:[{label:"Сельхоз использование",value:"Сельхоз использование"},{label:"ИЖС",value:"ИЖС"},{label:"Высотная застройка",value:"Высотная застройка"},{label:"Промышленное назначение",value:"Промышленное назначение"},{label:"ТЦ",value:"ТЦ"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Склады",value:"Склады"},{label:"Инвестпроект",value:"Инвестпроект"},{label:"Строительство образовательных учреждений",value:"Строительство образовательных учреждений"},{label:"АЗС",value:"АЗС"},{label:"Мойка",value:"Мойка"}],value:e["naznachenie-obekta_zemlya"],onChange:t=>e.onChange({"naznachenie-obekta_zemlya":t})})},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip_zemli_uchastka",title:"Тип земли/участка",itemList:["Делимый","Неделимый"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie-obekta_zemlya",title:"Состояние объекта",itemList:["Пустая земля/участок","Недостроенная","Под снос"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"}),Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie-remonta_zemlya",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"parkovka_zemlya",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"voda_zemlya",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"mestopolozhenie-obekta_zemlya",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_goroda",title:"Расстояние до города (м)"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_zemlya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"elektrichestvo_zemlya",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"podezdnye_puti",title:"Подъездные пути",itemList:["Асфальтированная дорога","Грунтовая дорога","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_zemlya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:o.Items,columns:"3",outlined:!1,name:"gaz_zemlya",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Combo,columns:"3",outlined:!1,name:"kanalizacziya_zemlya",title:"Канализация",itemList:["Да","Нет"]}]}}],Ys=[{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&!ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Квартиры"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Квартиры)"})},{type:o.Items,columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Холодильник","Стиральная машина","Телевизор","Интернет","Мусоропровод","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Кондиционер","Пылесос","Утюг","Умный дом","Цоколь","Подвал","Гардеробная","Терраса","Торец","Собственное обслуживающее ТСЖ","Консьерж"]},{type:o.Items,columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Закрытый двор","Шлагбаум","Детская площадка","Барбекю зона","Спортивная площадка","Охрана","Парковая зона","Школа","Детский сад","Колледж","Университет","Рынок","Кафе/Рестораны","ТЦ","Супермаркет","Магазин","Аптека","Больница","Автобусная остановка"]}]}]}},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&!ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Дома"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Дома)"})},{type:o.Items,columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Телефон","Телевизор","Интернет","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Кондиционер","Пылесос","Утюг","Умный дом","Цоколь","Подвал","Гардеробная","Терраса","Угловой","Комната охраны","Вдоль дороги","Гостевой домик","Барбекю зона","2 дома во дворе","Сарай","Огород","Полисадник","Дополнительная пристройка"]},{type:o.Items,columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Закрытый двор","Шлагбаум","Детская площадка","Охрана","Спортивная площадка","Парковая зона","Школа","Детский сад","Колледж","Университет","Рынок","Кафе/Рестораны","ТЦ","Супермаркет","Магазин","Аптека","Больница","Автобусная остановка"]}]}]}},{type:o.Fragment,isVisible:e=>{let t=!1;return t=t||ze(e.podkategoriya_obekta,"Земля/Участок"),t=t&&!ze(e.kategoriya_obekta,"Коммерческая"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Земля/Участок)"})},{type:o.Items,columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Забор","Катлаван","Сарай","Огород","Самострой","Угловой","Пожарная сигнализация","Видеонаблюдение","Сигнализация","Разгрузочный пандус"]},{type:o.Items,columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Закрытый двор","Шлагбаум","Детская площадка","Охрана","Спортивная площадка","Парковая зона","Школа","Детский сад","Колледж","Университет","Рынок","Кафе/Рестораны","ТЦ","Супермаркет","Магазин","Аптека","Больница","Автобусная остановка","Ж/Д ветка"]}]}]}}],Ks=[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Основная информация"})},{type:o.Text,outlined:!1,name:"zagolovok",title:"Заголовок",placeholder:"Введите текст"},{type:o.Fragment,isVisible:e=>ze(e.kategoriya_obekta,"Коммерческая"),fields:[{type:o.Combo,outlined:!1,columns:"4",name:"kategoriya_obekta",title:"Категория объекта",itemList:["Коммерческая","Жилая","От застройщика"]},{type:o.Items,outlined:!1,columns:"4",name:"prodazha",title:"Продажа",itemList:["Прямая продажа","Рассрочка","Через банк","Обмен"]},{type:o.Items,outlined:!1,columns:"4",name:"arenda",title:"Аренда",itemList:["Долгосрочная","Ежемесячная","Посуточная"]},{type:o.Combo,outlined:!1,columns:"4",name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>ze(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок","Здания","Базы"]},{type:o.Items,isVisible:e=>{if(ze(e.kategoriya_obekta,"Коммерческая")){if(ze(e.podkategoriya_obekta,"Дома","Квартиры"))return!1;if(ze(e.podkategoriya_obekta,"Земля/Участок"))return!1}return!0},columns:"4",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:o.Combo,isVisible:e=>!(!ze(e.kategoriya_obekta,"Коммерческая")||!ze(e.podkategoriya_obekta,"Дома"))||!ze(e.podkategoriya_obekta,"Дома"),columns:"4",outlined:!1,name:"istochnik",title:"Источник",itemList:["По звонку","Личные связи","Самостоятельный поиск","Риелтор","С сайта","Прибытие в офис","OLX","Facebook","Instagram","Telegram","Эксклюзив","Другое"]},{type:o.Combo,isVisible:e=>!(!ze(e.podkategoriya_obekta,"Квартиры")||!ze(e.kategoriya_obekta,"Коммерческая","Жилая")),columns:"4",outlined:!1,name:"tip_nedvizhimosti",title:"Тип недвижимости",itemList:["Вторичное жилье","Новостройка"]},{type:o.Combo,isVisible:e=>{let t=!1;return t=t||ze(e.podkategoriya_obekta,"Дома"),t},columns:"4",outlined:!1,name:"vid_obekta",title:"Вид объекта",itemList:["Дом","Коттедж","Таунхаус","ЖАКТ","Часть дома","Дача"]},{type:o.Items,isVisible:e=>!(!ze(e.kategoriya_obekta,"Коммерческая")||!ze(e.podkategoriya_obekta,"Земля/Участок")),columns:"4",outlined:!1,name:"vid_liczenzii",title:"Вид лицензии",itemList:["Коммерческая","Жилая"]}]},{type:o.Fragment,isVisible:e=>!ze(e.kategoriya_obekta,"Коммерческая"),fields:[{type:o.Combo,outlined:!1,columns:"4",name:"kategoriya_obekta",title:"Категория объекта",itemList:["Коммерческая","Жилая","От застройщика"]},{type:o.Items,outlined:!1,columns:"4",name:"prodazha",title:"Продажа",itemList:["Прямая продажа","Рассрочка","Через банк","Обмен"]},{type:o.Items,outlined:!1,columns:"4",name:"arenda",title:"Аренда",itemList:["Долгосрочная","Ежемесячная","Посуточная"]},{type:o.Combo,outlined:!1,columns:"4",name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>!ze(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок"]},{type:o.Combo,columns:"4",outlined:!1,name:"istochnik",title:"Источник",itemList:["По звонку","Личные связи","Самостоятельный поиск","Риелтор","С сайта","Прибытие в офис","OLX","Facebook","Instagram","Telegram","Эксклюзив","Другое"]},{type:o.Combo,isVisible:e=>!!ze(e.podkategoriya_obekta,"Квартиры")&&!ze(e.kategoriya_obekta,"Коммерческая"),columns:"4",outlined:!1,name:"tip_nedvizhimosti",title:"Тип недвижимости",itemList:["Вторичное жилье","Новостройка"]},{type:o.Combo,isVisible:e=>{let t=!1;return t=t||ze(e.podkategoriya_obekta,"Дома"),t},columns:"4",outlined:!1,name:"vid_obekta",title:"Вид объекта",itemList:["Дом","Коттедж","Таунхаус","ЖАКТ","Часть дома","Дача"]},{type:o.Items,isVisible:e=>{let t=!1;return t=t||ze(e.kategoriya_obekta,"Коммерческая"),t=t&&!ze(e.podkategoriya_obekta,"Дома"),t=t&&!ze(e.podkategoriya_obekta,"Земля/Участок"),t},columns:"4",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:o.Items,isVisible:e=>{let t=!1;return t=t||ze(e.podkategoriya_obekta,"Земля/Участок"),t},columns:"4",outlined:!1,name:"vid_liczenzii",title:"Вид лицензии",itemList:["Коммерческая","Жилая"]}]}]},...Gs,...Ys,...$s,...Ws];window.apartment_filters=Ks;const Xs=()=>It(os.apartmentViewService.paginate,{onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1),fallback:os.errorService.handleGlobalError}),Js=Nn()({dialog_wrapper:{width:"100%",maxwidth:"400px",boxSizing:"border-box"},dialog:{"&:first-of-type":{padding:0},width:"100%",boxSizing:"border-box"}}),Zs=({children:e,disabled:t,invalid:a,dividers:i=!1,canCancel:o=!0,noSave:l=!1,onAccept:r=(()=>console.log("accept")),onDismiss:n=(()=>console.log("dismiss")),...s})=>{const{classes:d}=Js();return se(Rt,{...s,className:d.dialog_wrapper,children:[se(Mt,{dividers:i,className:d.dialog,children:e}),se(Bt,{children:[!l&&se(Dt,{disabled:t||a,color:"primary",onClick:r,children:"OK"}),o&&se(Dt,{disabled:t,color:"primary",onClick:n,children:"Отмена"})]})]})},Qs=Nn()(((e,t,a)=>({inactive:{opacity:.5},container:{boxSizing:"border-box",width:"400px",height:340},list:{boxSizing:"border-box",width:"100%",["& > .".concat(a.item,":nth-of-type(2n)")]:{background:le(e.palette.getContrastText(e.palette.background.paper),.04)}},item:{"& .MuiListItemText-root > .MuiTypography-root":{width:"100%",overflow:"hidden",textOverflow:"ellipsis"}},item_right_side:{display:"flex",alignItems:"center",gap:"5px"}}))),ed=({columns:e,storageKey:t})=>{const{classes:a}=Qs(),[i,o]=re.useState(!1),l=re.useMemo((()=>jt("".concat(t,"_v1"))),[]),[r,n]=re.useState((()=>{let t=l.getValue();return t||(t=e.filter((e=>e.field)).filter((e=>e.type!==St.Action)).map((e=>({field:e.field,show:!0,displayName:e.fullName||e.headerName||String(e.field)})))),t})),s=re.useMemo((()=>{const t=r.filter((({show:e})=>e)).map((({field:t})=>e.find((e=>e.field===t)))).filter((e=>e)),a=e.find((({type:e})=>e===St.Action));return a&&t.push(a),t}),[]),d=()=>{l.setValue(r),M()};return{open:i,render:()=>se(Zs,{open:i,onAccept:d,onDismiss:()=>o(!1),children:se(me,{className:a.container,children:se(rt,{className:a.list,disablePadding:!0,children:r.map(((e,t)=>se(ht,{className:a.item,children:[se(dt,{primary:e.displayName}),se(me,{className:a.item_right_side,children:[se(_e,{onClick:()=>(e=>{const t=r.findIndex((t=>t.field===e));0!==t&&n((e=>{const a=e[t];return e[t]=e[t-1],e[t-1]=a,[...e]}))})(e.field),disabled:0==t||!e.show,children:se(qt,{})}),se(_e,{onClick:()=>(e=>{const t=r.findIndex((t=>t.field===e));t!==r.length&&n((e=>{const a=e[t];return e[t]=e[t+1],e[t+1]=a,[...e]}))})(e.field),disabled:t==r.length-1||!e.show,children:se(Pt,{})}),se(Et,{checked:e.show,onClick:()=>{return t=e.field,n((e=>e.map((e=>e.field===t?{...e,show:!e.show}:e))));var t}})]})]},t)))})})}),columns:s,pickColumns:()=>o(!0)}},td=oe.createLoader(12),ad=()=>se(me,{sx:{mb:1,minHeight:32},children:se(Nt,{sx:{height:"100%"},hideOverflowY:!0,children:se(me,{sx:{display:"flex",alignItems:"center",justifyContent:"stretch",gap:1},children:[se(Ae,{variant:"subtitle2",children:"Объекты:"}),se(ye,{payload:null,Loader:td,children:async()=>{const e=await os.apartmentRequestService.getAllApartmentCount(),t=await os.apartmentRequestService.getRentApartmentCount(),a=await os.apartmentRequestService.getSellApartmentCount(),i=await os.apartmentRequestService.getArchiveApartmentCount(),o=await os.apartmentRequestService.getNewApartmentCount();return se(we,{direction:"row",gap:1,sx:{pointerEvents:"none"},children:[se(me,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[se(Ot,{orientation:"vertical"}),se(Ht,{href:"#",children:["Всего ",e]}),se(Ot,{orientation:"vertical"})]}),se(me,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[se(Ot,{orientation:"vertical"}),se(Ht,{href:"#",children:["Аренда ",t]}),se(Ot,{orientation:"vertical"})]}),se(me,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[se(Ot,{orientation:"vertical"}),se(Ht,{href:"#",children:["Продажа ",a]}),se(Ot,{orientation:"vertical"})]}),se(me,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[se(Ot,{orientation:"vertical"}),se(Ht,{href:"#",children:["Архив ",i]}),se(Ot,{orientation:"vertical"})]}),se(me,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[se(Ot,{orientation:"vertical"}),se(Ht,{href:"#",children:["Новые ",o]}),se(Ot,{orientation:"vertical"})]})]})}}),se(Ae,{variant:"subtitle2",children:"Сделки:"}),se(ye,{Loader:td,children:async()=>{const e=await os.apartmentRequestService.getMyDealCount(),t=await os.apartmentRequestService.getTotalDealCount(),a=await os.apartmentRequestService.getNewDealCount(),i=await os.apartmentRequestService.getArchiveDealCount();return se(we,{direction:"row",gap:1,sx:{pointerEvents:"none"},children:[se(me,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[se(Ot,{orientation:"vertical"}),se(Ht,{href:"#",children:["Всего ",t]}),se(Ot,{orientation:"vertical"})]}),se(me,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[se(Ot,{orientation:"vertical"}),se(Ht,{href:"#",children:["Мои ",e]}),se(Ot,{orientation:"vertical"})]}),se(me,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[se(Ot,{orientation:"vertical"}),se(Ht,{href:"#",children:["Новые ",a]}),se(Ot,{orientation:"vertical"})]}),se(me,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[se(Ot,{orientation:"vertical"}),se(Ht,{href:"#",children:["Архив ",i]}),se(Ot,{orientation:"vertical"})]})]})}})]})})}),id=()=>It(os.userViewService.paginate,{onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1),fallback:os.errorService.handleGlobalError}),od=oe.createLoader(28),ld=[{type:o.Text,outlined:!0,name:"email",title:"Email"},{type:o.Text,outlined:!0,name:"phone",title:"Телефон"}],rd=[{type:St.Component,sortable:!1,headerName:"Аватар",width:()=>65,element:({avatar:e,email:t})=>se(ye,{Loader:od,children:async()=>{const a=e?await os.appwriteService.getImageURL(e):"";return se(me,{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:se(_t,{src:a||void 0,alt:t})})}})},{type:St.Compute,sortable:!1,headerName:"Имя",compute:({first_name:e="",last_name:t="",middle_name:a=""})=>[e,t,a].filter((e=>e.length)).join(" ")||"Unset",width:e=>Math.max(e/3-65,200)},{type:St.Compute,sortable:!1,compute:({phone:e})=>e||"Unset",field:"phone",headerName:"Телефон",width:e=>Math.max(e/3-65,200)},{type:St.Compute,sortable:!1,compute:({email:e})=>e||"Unset",field:"email",headerName:"Email",width:e=>Math.max(e/3-65,200)}],nd=({payload:e})=>{const t=id(),a=ne(),{pickData:i,render:o,open:l}=Ut({title:"Выбрать сотрудника",withSearch:!0,withLoader:!0,slots:{FilterListSlot:Wt},AfterTitle:({onClose:e})=>se(_e,{size:"small",onClick:e,children:se(Ue,{})}),noInitialFilters:!0,fetchDebounce:$o,reloadSubject:os.userViewService.reloadSubject,selectionMode:$t.Single,onSubmit:e=>(a.next(e),!0),filterLabel:"Выбрать сотрудника",filters:ld,columns:rd,handler:t,payload:e});return{pickData:i,render:o,resultSubject:a,open:l}};oe.createLoader(24);const sd=[{type:o.Fragment,isVisible:e=>!e.kontakt||!!ze(e.kontakt,"Физическое лицо"),fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",columns:"6",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Основная информация"})},{type:o.Combo,outlined:!1,name:"kontakt",title:"Контакт",itemList:["Физическое лицо","Юридическое лицо"]},{type:o.Text,outlined:!1,name:"fio",title:"Ф.И.О."},{type:o.Text,description:"Основной",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon",title:"Телефон"},{type:o.Combo,outlined:!1,name:"tip_klienta",title:"Тип клиента",itemList:["Собственник","Доверенное лицо","Риелтор","Информатор","Застройщик"]},{type:o.Combo,outlined:!1,name:"status_klienta",title:"Статус клиента",itemList:["VIP-клиент","Клиент","Постоянный клиент","Специальный клиент","Черный список"]},{type:o.Combo,outlined:!1,name:"loyalnost_klienta",title:"Лояльность клиента",itemList:["Высокая","Средняя","Низкая"]},{type:o.Text,outlined:!1,name:"email",title:"Email"},{type:o.Fragment,isVisible:()=>{let e=!0;return e=e&&!os.routerService.location.pathname.includes("bid_view"),e=e&&!os.routerService.location.pathname.includes("bid_edit"),e},fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"subtitle2",fontWeight:"bold",sx:{textDecoration:"underline",mt:2,mb:1},children:"Кадастр"})},{type:o.Text,outlined:!1,name:"kadastrovyj-nomer_obekta",title:"Кадастровый номер объекта"},{type:o.Text,outlined:!1,name:"kadastrovyj-nomer_zemli",title:"Кадастровый номер земли"}]}]},{type:o.Group,fieldBottomMargin:"0",fieldRightMargin:"0",columns:"6",fields:[{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Паспортные данные"})},{type:o.Text,outlined:!1,name:"seriya-i-nomer_pasporta",title:"Серия и номер паспорта"},{type:o.Combo,outlined:!1,name:"pol",title:"Пол",itemList:["Мужской","Женский"]},{type:o.Text,outlined:!1,name:"pinfl",title:"ПИНФЛ"},{type:o.Text,outlined:!1,name:"inn",title:"ИНН"}]}]}]},{type:o.Fragment,isVisible:e=>!!ze(e.kontakt,"Юридическое лицо"),fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",columns:"6",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Основная информация"})},{type:o.Combo,outlined:!1,name:"kontakt",title:"Контакт",itemList:["Физическое лицо","Юридическое лицо"]},{type:o.Text,outlined:!1,name:"naimenovanie_organizaczii",title:"Наименование организации"},{type:o.Text,outlined:!1,name:"fio",title:"Ф.И.О."},{type:o.Text,description:"Основной",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon",title:"Телефон"},{type:o.Combo,outlined:!1,name:"tip_klienta",title:"Тип клиента",itemList:["Собственник","Доверенное лицо","Риелтор","Информатор","Застройщик"]},{type:o.Combo,outlined:!1,name:"status_klienta",title:"Статус клиента",itemList:["VIP-клиент","Клиент","Постоянный клиент","Специальный клиент","Черный список"]},{type:o.Combo,outlined:!1,name:"loyalnost_klienta",title:"Лояльность клиента",itemList:["Высокая","Средняя","Низкая"]},{type:o.Text,outlined:!1,name:"email",title:"Email"},{type:o.Fragment,isVisible:()=>{let e=!0;return e=e&&!os.routerService.location.pathname.includes("bid_view"),e=e&&!os.routerService.location.pathname.includes("bid_edit"),e},fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"subtitle2",fontWeight:"bold",sx:{textDecoration:"underline",mt:2,mb:1},children:"Кадастр"})},{type:o.Text,outlined:!1,name:"kadastrovyj-nomer_obekta",title:"Кадастровый номер объекта"},{type:o.Text,outlined:!1,name:"kadastrovyj-nomer_zemli",title:"Кадастровый номер земли"}]}]},{type:o.Group,fieldBottomMargin:"0",fieldRightMargin:"0",columns:"6",fields:[{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Паспортные данные"})},{type:o.Text,outlined:!1,name:"seriya-i-nomer_pasporta",title:"Серия и номер паспорта"},{type:o.Combo,outlined:!1,name:"pol",title:"Пол",itemList:["Мужской","Женский"]},{type:o.Text,outlined:!1,name:"kem_vydan",title:"Кем выдан"},{type:o.Text,outlined:!1,name:"pinfl",title:"ПИНФЛ"},{type:o.Text,outlined:!1,name:"inn",title:"ИНН"},{type:o.Combo,outlined:!1,name:"osnovanie-deyatelnosti-dannogo_licza",title:"Основание деятельности данного лица",itemList:["На основании устава","По доверенности"]}]}]}]}];window.contact_filters=sd;const dd=()=>It(os.contactViewService.paginate,{onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1),fallback:os.errorService.handleGlobalError}),cd=[{type:o.Box,noBaseline:!0,sx:{display:"grid",gridTemplateColumns:"auto auto 1fr auto","& > .MuiGrid-root":{minWidth:"275px"},minWidth:"calc(275px * 3)",mt:-1},fields:[{type:o.Choose,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",choose:async(e,t)=>{t.pickUser(e.system_created_by?[e.system_created_by]:[]);const a=await t.userResultSubject.toPromise();if(a&&a.length){const[e]=a;return e}return null},tr:async e=>{const t=await os.userViewService.tryRead(e);return[null==t?void 0:t.last_name,null==t?void 0:t.first_name,null==t?void 0:t.middle_name].filter((e=>e)).join(" ")||(null==t?void 0:t.$id)||""},name:"system_created_by",title:"",placeholder:"Создал"},{type:o.Combo,fieldBottomMargin:"1",fieldRightMargin:"1",outlined:!1,name:"tip_klienta",title:"",placeholder:"Тип клиента",itemList:["Собственник","Доверенное лицо","Риелтор","Информатор","Застройщик"]},{type:o.Div},{type:o.Text,fieldRightMargin:"1",fieldBottomMargin:"0",inputFormatterTemplate:"0000000000",inputFormatterAllowed:/^[0-9]/,name:"index",title:"",leadingIcon:()=>se(me,{sx:{height:20,width:20,display:"flex",alignItems:"center",justifyContent:"center"},children:se(Ae,{textTransform:"lowercase",variant:"caption",children:"№"})}),placeholder:"",trailingIcon:()=>se(Gt,{sx:{opacity:.5}}),trailingIconClick(e,t,a){e&&a("")}}]}],md=()=>{const{filterData:e,handleFilter:t,payload:a,loading:i}=Yt(),{pickData:o,render:l,resultSubject:r}=nd({payload:a}),{pickData:n,render:s,resultSubject:d}=pd({payload:a});return se(me,{sx:{mb:1},children:[se(Nt,{sx:{height:"100%",minHeight:48},hideOverflowY:!0,children:se(me,{sx:{display:"flex",alignItems:"center",justifyContent:"stretch",pt:1,pb:1},children:se(Ge,{handler:e,fields:cd,readonly:i,change:(e,a)=>{a||t(e)},payload:()=>({...a,pickUser:o,userResultSubject:r,pickContact:n,contactResultSubject:d}),fieldDebounce:$o})})}),s(),l()]})},ud=[{type:St.Compute,sortable:!0,field:"fio",compute:e=>e.fio||"",headerName:"Ф.И.О. Клиента",width:()=>200},{type:St.Compute,sortable:!0,field:"tip_klienta",compute:e=>e.tip_klienta||"",headerName:"Тип клиента",width:()=>200},{type:St.Compute,sortable:!0,field:"status_klienta",compute:e=>e.status_klienta||"",headerName:"Статус клиента",width:()=>200},{type:St.Compute,sortable:!1,field:"status",headerName:"Статус сделки",compute:async({id:e})=>await os.dealViewService.readStatusByContactId(e),width:()=>150}],pd=({payload:e})=>{const t=dd(),a=ne(),{pickData:i,render:o,open:l}=Ut({title:"Выбор контакта",AfterTitle:({onClose:e})=>se(_e,{size:"small",onClick:e,children:se(Ue,{})}),withSearch:!0,slots:{FilterListSlot:Kt},noInitialFilters:!0,withLoader:!0,fetchDebounce:$o,reloadSubject:os.userViewService.reloadSubject,selectionMode:$t.Single,AfterOperationList:md,onSubmit:e=>(a.next(e),!0),filterLabel:"Выбрать контакт",filters:sd,payload:e,columns:ud,handler:t});return{pickData:i,render:o,resultSubject:a,open:l}},yd=[{type:o.Box,noBaseline:!0,sx:{display:"grid",gridTemplateColumns:"auto auto 1fr auto","& > .MuiGrid-root":{minWidth:"275px"},minWidth:"calc(275px * 3)",mt:-1},fields:[{type:o.Choose,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",choose:async(e,t)=>{t.pickUser(e.system_created_by?[e.system_created_by]:[]);const a=await t.userResultSubject.toPromise();if(a&&a.length){const[e]=a;return e}return null},tr:async e=>{const t=await os.userViewService.tryRead(e);return[null==t?void 0:t.last_name,null==t?void 0:t.first_name,null==t?void 0:t.middle_name].filter((e=>e)).join(" ")||(null==t?void 0:t.$id)||""},name:"system_created_by",title:"",placeholder:"Создал"},{type:o.Choose,sx:{minWidth:"100% !important"},fieldBottomMargin:"0",fieldRightMargin:"3",columns:"4",choose:async(e,t)=>{t.pickContact(e.contact_id?[e.contact_id]:[]);const a=await t.contactResultSubject.toPromise();if(a&&a.length){const[e]=a;return e}return null},tr:async e=>{const t=await os.contactViewService.tryRead(e);return(null==t?void 0:t.fio)||(null==t?void 0:t.id)||""},name:"contact_id",title:"",placeholder:"Владелец"},{type:o.Div},{type:o.Text,fieldRightMargin:"1",fieldBottomMargin:"0",inputFormatterTemplate:"0000000000",inputFormatterAllowed:/^[0-9]/,name:"index",title:"",leadingIcon:()=>se(me,{sx:{height:20,width:20,display:"flex",alignItems:"center",justifyContent:"center"},children:se(Ae,{textTransform:"lowercase",variant:"caption",children:"№"})}),placeholder:"",trailingIcon:()=>se(Gt,{sx:{opacity:.5}}),trailingIconClick(e,t,a){e&&a("")}}]}],hd=()=>{const{filterData:e,handleFilter:t,payload:a,loading:i}=Yt(),{pickData:o,render:l,resultSubject:r}=nd({payload:a}),{pickData:n,render:s,resultSubject:d}=pd({payload:a});return se(me,{sx:{mb:1},children:[se(Nt,{sx:{height:"100%",minHeight:48},hideOverflowY:!0,children:se(me,{sx:{display:"flex",alignItems:"center",justifyContent:"stretch",pt:1,pb:1},children:se(Ge,{handler:e,fields:yd,readonly:i,change:(e,a)=>{a||t(e)},payload:()=>({...a,pickUser:o,userResultSubject:r,pickContact:n,contactResultSubject:d}),fieldDebounce:$o})})}),s(),l()]})},bd=()=>window.innerHeight-100,vd=()=>window.innerHeight-100,_d=()=>window.innerHeight-100,gd=()=>window.innerHeight-100,fd=()=>window.innerHeight-100,kd=[{id:"common",element:({payload:e})=>{const t=ne(os.apartmentViewService.reloadSubject),{render:a,pickColumns:i,columns:o}=ed({columns:Ns,storageKey:"apartment_columns"}),{listProps:l}=Xt(os.routerService.locationState,{fallback:os.errorService.handleGlobalError}),r=Xs();return se(Se,{children:[se(Jt,{withSearch:!0,withSingleSort:!0,noInitialFilters:!0,fetchDebounce:$o,reloadSubject:t,title:"Объект недвижимости",filterLabel:"Фильтры",heightRequest:vd,rowActions:Hs,actions:Ps,filters:Ks,columns:o,handler:r,chips:Os,AfterActionList:ad,AfterOperationList:hd,onRowAction:async(e,a)=>{os.layoutService.setAppbarLoader(!0);try{if("remove-action"===e&&(await os.apartmentViewService.remove(a.id),t.next()),"edit-action"===e&&os.routerService.push("/apartment_edit/".concat(a.id)),"copy-action"===e){const e=await os.apartmentViewService.read(a.id);await os.apartmentViewService.create(e),t.next()}"toggle-archive"===e&&(await os.apartmentViewService.toggleArchive(a.id),t.next()),"toggle-remove"===e&&(await os.apartmentViewService.toggleRemove(a.id),t.next())}finally{os.layoutService.setAppbarLoader(!1)}},onRowClick:async e=>{(await os.permissionService.getPermissions()).hasApartmentViewPermission&&os.routerService.push("/apartment_view/".concat(e.id))},onAction:e=>{"add-action"===e&&os.routerService.push("/apartment/create"),"column-setup-action"===e&&i()},selectionMode:$t.Multiple,payload:e,...l}),a()]})},isActive:e=>cs(["/apartment"],e),isAvailable:()=>!1},{id:"rent",element:({payload:e})=>{const t=ne(os.apartmentViewService.reloadSubject),{render:a,columns:i,pickColumns:o}=ed({columns:Ns,storageKey:"apartment_columns"}),{listProps:l}=Xt(os.routerService.locationState,{fallback:os.errorService.handleGlobalError}),r=Xs();return se(Se,{children:[se(Jt,{withSearch:!0,withSingleSort:!0,noInitialFilters:!0,fetchDebounce:$o,reloadSubject:t,title:"Объект недвижимости",filterLabel:"Фильтры",heightRequest:_d,rowActions:Hs,actions:Ps,filters:Ks,columns:i,handler:r,chips:Os,AfterActionList:ad,AfterOperationList:hd,onRowAction:async(e,a)=>{os.layoutService.setAppbarLoader(!0);try{if("remove-action"===e&&(await os.apartmentViewService.remove(a.id),t.next()),"edit-action"===e&&os.routerService.push("/apartment_edit/".concat(a.id)),"copy-action"===e){const e=await os.apartmentViewService.read(a.id);await os.apartmentViewService.create(e),t.next()}"toggle-archive"===e&&(await os.apartmentViewService.toggleArchive(a.id),t.next()),"toggle-remove"===e&&(await os.apartmentViewService.toggleRemove(a.id),t.next())}finally{os.layoutService.setAppbarLoader(!1)}},onRowClick:async e=>{(await os.permissionService.getPermissions()).hasApartmentViewPermission&&os.routerService.push("/apartment_view/".concat(e.id))},onAction:e=>{"add-action"===e&&os.routerService.push("/apartment/create"),"column-setup-action"===e&&o()},selectionMode:$t.Multiple,payload:()=>({...e,_rent:!0}),...l}),a()]})},isActive:e=>cs(["/apartment_rent"],e),isAvailable:()=>!1},{id:"sell",element:({payload:e})=>{const t=ne(os.apartmentViewService.reloadSubject),{render:a,pickColumns:i,columns:o}=ed({columns:Ns,storageKey:"apartment_columns"}),{listProps:l}=Xt(os.routerService.locationState,{fallback:os.errorService.handleGlobalError}),r=Xs();return se(Se,{children:[se(Jt,{withSearch:!0,withSingleSort:!0,noInitialFilters:!0,fetchDebounce:$o,reloadSubject:t,title:"Объект недвижимости",filterLabel:"Фильтры",heightRequest:gd,rowActions:Hs,actions:Ps,filters:Ks,columns:o,handler:r,chips:Os,AfterActionList:ad,AfterOperationList:hd,onRowAction:async(e,a)=>{os.layoutService.setAppbarLoader(!0);try{if("remove-action"===e&&(await os.apartmentViewService.remove(a.id),t.next()),"edit-action"===e&&os.routerService.push("/apartment_edit/".concat(a.id)),"copy-action"===e){const e=await os.apartmentViewService.read(a.id);await os.apartmentViewService.create(e),t.next()}"toggle-archive"===e&&(await os.apartmentViewService.toggleArchive(a.id),t.next()),"toggle-remove"===e&&(await os.apartmentViewService.toggleRemove(a.id),t.next())}finally{os.layoutService.setAppbarLoader(!1)}},onRowClick:async e=>{(await os.permissionService.getPermissions()).hasApartmentViewPermission&&os.routerService.push("/apartment_view/".concat(e.id))},onAction:e=>{"add-action"===e&&os.routerService.push("/apartment/create"),"column-setup-action"===e&&i()},selectionMode:$t.Multiple,payload:()=>({...e,_sell:!0}),...l}),a()]})},isActive:e=>cs(["/apartment_sell"],e),isAvailable:()=>!1},{id:"archive",element:({payload:e})=>{const t=ne(os.apartmentViewService.reloadSubject),{render:a,pickColumns:i,columns:o}=ed({columns:Ns,storageKey:"apartment_columns"}),{listProps:l}=Xt(os.routerService.locationState,{fallback:os.errorService.handleGlobalError}),r=Xs();return se(Se,{children:[se(Jt,{withSearch:!0,withSingleSort:!0,noInitialFilters:!0,fetchDebounce:$o,reloadSubject:t,title:"Неактивные объекты",filterLabel:"Фильтры",heightRequest:bd,rowActions:Hs,actions:Ps,filters:Ks,columns:o,handler:r,chips:Os,onRowAction:async(e,a)=>{os.layoutService.setAppbarLoader(!0);try{if("remove-action"===e&&(await os.apartmentViewService.remove(a.id),t.next()),"edit-action"===e&&os.routerService.push("/apartment_edit/".concat(a.id)),"copy-action"===e){const e=await os.apartmentViewService.read(a.id);await os.apartmentViewService.create(e),t.next()}"toggle-archive"===e&&(await os.apartmentViewService.toggleArchive(a.id),t.next()),"toggle-remove"===e&&(await os.apartmentViewService.toggleRemove(a.id),t.next())}finally{os.layoutService.setAppbarLoader(!1)}},onRowClick:async e=>{(await os.permissionService.getPermissions()).hasApartmentViewPermission&&os.routerService.push("/apartment_view/".concat(e.id))},onAction:e=>{"add-action"===e&&os.routerService.push("/apartment/create"),"column-setup-action"===e&&i()},AfterActionList:ad,AfterOperationList:hd,selectionMode:$t.Multiple,payload:()=>({...e,_archive:!0}),...l}),a()]})},isActive:e=>cs(["/apartment_archive"],e),isAvailable:()=>!1},{id:"remove",element:({payload:e})=>{const t=ne(os.apartmentViewService.reloadSubject),{render:a,pickColumns:i,columns:o}=ed({columns:Ns,storageKey:"apartment_columns"}),{listProps:l}=Xt(os.routerService.locationState,{fallback:os.errorService.handleGlobalError}),r=Xs();return se(Se,{children:[se(Jt,{withSearch:!0,withSingleSort:!0,noInitialFilters:!0,fetchDebounce:$o,reloadSubject:t,title:"Удаленные объекты",filterLabel:"Фильтры",heightRequest:fd,rowActions:Hs,actions:Ps,filters:Ks,columns:o,handler:r,chips:Os,onRowAction:async(e,a)=>{os.layoutService.setAppbarLoader(!0);try{if("remove-action"===e&&(await os.apartmentViewService.remove(a.id),t.next()),"edit-action"===e&&os.routerService.push("/apartment_edit/".concat(a.id)),"copy-action"===e){const e=await os.apartmentViewService.read(a.id);await os.apartmentViewService.create(e),t.next()}"toggle-archive"===e&&(await os.apartmentViewService.toggleArchive(a.id),t.next()),"toggle-remove"===e&&(await os.apartmentViewService.toggleRemove(a.id),t.next())}finally{os.layoutService.setAppbarLoader(!1)}},onRowClick:async e=>{(await os.permissionService.getPermissions()).hasApartmentViewPermission&&os.routerService.push("/apartment_view/".concat(e.id))},onAction:e=>{"add-action"===e&&os.routerService.push("/apartment/create"),"column-setup-action"===e&&i()},AfterActionList:ad,AfterOperationList:hd,selectionMode:$t.Multiple,payload:()=>({...e,_remove:!0}),...l}),a()]})},isActive:e=>cs(["/apartment_remove"],e),isAvailable:()=>!1}],wd=({addon_square_names:e,addon_square_values:t})=>{e=e||[],t=t||[];const a=[];for(let i=0;i!==e.length;i++)a.push({id:p(),title:e[i],number:t[i]});return a},Sd=({addon_square_names:e,addon_square_values:t,readonly:a,onChange:i})=>{const[l,r]=re.useState((()=>wd({addon_square_names:e,addon_square_values:t}))),n=Ne({fields:[{type:o.Text,sx:{mt:-2},name:"title",title:"Название",isInvalid:({title:e})=>e?null:"Укажите название"},{type:o.Text,name:"number",title:"Значение",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isInvalid:({number:e})=>e?null:"Укажите значение"}]}),s=Qt({title:"Вы уверены?",msg:"Вы уверены, что хотите удалить площадь?"}),{resetWatcher:d}=ea((()=>{var e;i({addon_square_names:(e=l).length?e.map((({title:e})=>e)):null,addon_square_values:e.length?e.map((({number:e})=>e)):null})}),[l]);re.useEffect((()=>{const a=wd({addon_square_names:e,addon_square_values:t});d(),r(a)}),[e,t]);return se(we,{direction:"column",children:[se(we,{direction:"row",alignItems:"center",justifyContent:"space-between",marginBottom:"20px",children:[se(Ae,{variant:"h6",fontWeight:"bold",children:"Доп. площадь"}),se(Dt,{disabled:a,onClick:()=>{n({title:"Создание площади",handler:{id:p(),title:"",number:""}}).then((e=>{e&&r((t=>[...t,e]))}))},variant:"contained",children:"Добавить"})]}),se(me,{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"10px"},children:l.map((e=>se(ta,{id:"standard-read-only-input",label:e.title,value:e.number,onClick:()=>{var t;t={id:e.id,title:e.title,number:e.number},n({title:"Редактирование площади",handler:{id:t.id,title:t.title,number:t.number}}).then((e=>{e&&(r((t=>{const a=t.findIndex((t=>t.id===e.id));return t[a]=e,[...t]})),console.log(l))}))},InputProps:{readOnly:!0,endAdornment:se(aa,{position:"end",children:se(_e,{disabled:a,edge:"end",onClick:t=>{var a;t.preventDefault(),t.stopPropagation(),a=e.id,s().then((e=>{e&&r((e=>e.filter((e=>e.id!==a))))}))},children:se(Ct,{fill:"white",style:{cursor:"pointer",color:"grey"}})})})},variant:"standard"})))})]})},zd=({images:e,onChange:t})=>{const{handleLoadStart:a,handleLoadEnd:i,loading:o}=Oe({history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)});return se(oa,{children:se(ot,{disabled:o,sx:{borderRadius:"20px"},startIcon:se(ia,{}),variant:"contained",onClick:async()=>{let o=!0;a();try{const a=await la("*");if(!a)return;const i=ra(e)||[],o=await Promise.all(a.map((async e=>os.appwriteService.uploadFile(e)))),l=[...i,...o];t(l)}catch(l){o=!1,os.alertService.notify(xn(l))}finally{i(o)}},children:"Добавить фото"})})},xd=({payload:e,context:t})=>se(we,{direction:"column",children:[se(ot,{disabled:!t.hasChanged,variant:"contained",color:"info",sx:{height:48},onClick:e.beginSave,children:"Сохранить"}),se(me,{sx:{paddingTop:"24px"}})]}),[Ad,Td]=te(),[Fd,Cd]=te(),Vd=(e,t)=>new Promise(((a,i)=>{e.onload=()=>{const o=document.createElement("canvas");o.width=e.height,o.height=e.width;const l=o.getContext("2d");l?(l.translate(o.width/2,o.height/2),l.rotate(t*Math.PI/180),l.drawImage(e,-e.width/2,-e.height/2),o.toBlob((e=>{e?a(e):i("there's an error")}))):i("there's an error")},e.onerror=e=>{i("there's an error"),console.error(e)}}));const Ld=oe.createLoader(96),Id=[{action:"download-action",label:"Скачать изображение"},{action:"open-action",label:"Открыть оригинальное изображение",isVisible:({permissions:e})=>e.hasSuperAdminFlagPermission},{action:"rotate-left-action",icon:sa,label:"Поворот влево",isVisible:e=>!e.readonly},{action:"rotate-right-action",icon:da,label:"Поворот вправо",isVisible:e=>!e.readonly},{action:"remove-action",isVisible:e=>!e.readonly,label:"Удалить"}],Md=Nn()((e=>({square:{position:"relative"},dragHoverActive:{background:le(e.palette.primary.main,.5)},dragHoverInactive:{background:"#ccc"},prev:{position:"absolute",margin:"auto",left:"0",top:"0",bottom:0,zIndex:"2 !important",color:e.palette.background.paper,width:"30%"},next:{position:"absolute",margin:"auto",right:"10px",top:"10px",bottom:"5px",zIndex:"2 !important",color:e.palette.background.paper,width:"30%"},action:{zIndex:"5 !important"},defaultIcon:{position:"absolute",right:10,bottom:10,height:35,width:35,fill:"orange",background:"white",borderRadius:"50%",padding:"1.5px",zIndex:"1"},"tss-nuqny4-root":{zIndex:"5 !important"}}))),Bd=({dropSubject:e,className:t,readonly:a,image:i,images:o,payload:l,text:r,sx:n,onChange:s,onClick:d,onLoadStart:c,onLoadEnd:m,onMouseOver:u,drag:p})=>{const{classes:y}=Md(),h=Qt({title:"Продолжить?",msg:"Вы собираетесь удалить файл"}),[b,v]=re.useState(!1),[_,g]=re.useState(!1),[f,k]=re.useState(!1),w=ne(e),S=ne();re.useEffect((()=>()=>{S.next()}),[]),re.useEffect((()=>w.subscribe((()=>{k(!1)}))),[]);const[,z]=Td(),[,x]=Cd(),{handleLoadStart:A,handleLoadEnd:T,loading:F}=Oe({history:os.routerService,onLoadStart:()=>{c&&c(),os.layoutService.setAppbarLoader(!0)},onLoadEnd:()=>{m&&m(),os.layoutService.setAppbarLoader(!1)}}),C=async()=>{let e=!0;A();try{const e=await async function(e,t){const a=await os.appwriteService.getImageURL(e),i=document.createElement("img");i.src=a,i.crossOrigin="anonymous";const o=await Vd(i,90);if(!o)return t;const l=t.indexOf(e),r=await os.appwriteService.tryReadFileName(e),n=await os.appwriteService.uploadBlob(o,r||o.type||"unknown.png");return t[l]=n,[...t]}(i,o);s(e)}catch(t){e=!1}finally{T(e)}},V=async()=>{let e=!0;A();try{const e=await async function(e,t){const a=await os.appwriteService.getImageURL(e),i=document.createElement("img");i.src=a,i.crossOrigin="anonymous",console.log(i.height),console.log(i.width);const o=await Vd(i,-90);if(!o)return t;const l=t.indexOf(e),r=await os.appwriteService.tryReadFileName(e),n=await os.appwriteService.uploadBlob(o,r||o.type||"unknown.png");return t[l]=n,[...t]}(i,o);s(e)}catch(t){e=!1}finally{T(e)}};return se(me,{className:t,sx:n,onClick:()=>d&&d(i),children:se(de,{draggable:p,onDragStart:()=>z(i),onDragOver:e=>{e.preventDefault(),x(i)},onDragLeave:()=>k(!1),onDragEnter:()=>k(!0),className:y.square,children:[0===(null==o?void 0:o.indexOf(i))&&se(ce,{className:y.defaultIcon}),se(me,{className:ue({[y.dragHoverActive]:f,[y.dragHoverInactive]:!f}),component:"div",sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:()=>{_||v(!0)},onMouseLeave:()=>{_||v(!1)},children:[se(na,{disabled:F,className:y.action,sx:{position:"absolute",top:10,left:10,transition:"opacity 150ms",opacity:b||u||_?1:0},payload:{...l,readonly:a},options:Id,onAction:async e=>{if("download-action"===e&&(async()=>{const e=await os.appwriteService.getImageURL(i),t=await On(e,r);S.once((()=>{t&&URL.revokeObjectURL(t)})),pt(t||e,"".concat(r,".png"))})(),"open-action"===e&&(async()=>{let e=!0;A();try{const e=await os.appwriteService.getImageURL(i);Z(e)}catch(t){e=!1,os.alertService.notify(xn(t))}finally{T(e)}})(),"remove-action"===e){await h().toPromise()&&await(()=>{const e=(ra(o)||[]).filter((e=>e!==i));s(e.length?e:null)})()}"rotate-left-action"===e&&await V(),"rotate-right-action"===e&&await C()},onToggle:e=>{e&&v(!1),g(e)}}),se(ye,{Loader:Ld,payload:i,children:async e=>{if(!e)return se(he,{sx:{fontSize:96,fill:"white"}});const t=await os.appwriteService.getImageURL(e),a=await On(t,r);return S.once((()=>{a&&URL.revokeObjectURL(a)})),se("img",{crossOrigin:"anonymous",loading:"lazy",alt:e,src:a||t,style:{objectFit:"contain",height:"100%",width:"100%",pointerEvents:"none"}})}})]})]})})},Dd=Nn()((e=>({root:{position:"fixed",padding:20,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"stretch",transform:"translate(-50%, -50%)",backgroundColor:e.palette.background.paper,borderRadius:5,gap:5,top:"50%",left:"50%",width:"calc(100vmin - 50px)",height:"calc(100vmin - 50px)",outline:"none"},content:{overflow:"hidden",padding:e.spacing(1),flex:1},container:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flex:1,overflow:"hidden",paddingTop:e.spacing(1)},title:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:15,color:e.palette.text.primary},submit:{marginTop:15},disabled:{opacity:.5,pointerEvents:"none"},indicatorTransparent:{height:6,background:e.palette.primary.main},tabRootTransparent:{minHeight:54,height:54},tabsRoot:{minHeight:54,height:54,marginLeft:"0 !important",marginRight:"0 !important"},prev:{position:"absolute",margin:"auto",left:"10px",top:"10px",bottom:"5px",zIndex:"2 !important",color:e.palette.background.paper,width:"30%"},next:{position:"absolute",margin:"auto",right:"10px",top:"10px",bottom:"5px",zIndex:"2 !important",color:e.palette.background.paper,width:"30%"},icon_border:{border:"1px solid black"}}))),Rd=({apartment_images:e,_fieldData:t,payload:a,readonly:i,onChange:o})=>{const[l]=Td(),[r]=Cd(),n=Ze(e),s=Ze(l),d=Ze(r),{pickImage:c,render:m}=(({_fieldData:e,payload:t,onChange:a})=>{const[i,o]=re.useState(""),[l,r]=re.useState(!1),n=e.apartment_images.length,[s,d]=re.useState(0),[c,m]=re.useState(!1),[u,p]=re.useState(0),[y,h]=re.useState(!1);re.useEffect((()=>{var t;d((null==(t=e.apartment_images)?void 0:t.indexOf(i))||0)}),[i]);const{classes:b,cx:v}=Dd(),_=()=>{u||(o(""),d(0),m(!1))},g=()=>{p((e=>e+1))},f=()=>{p((e=>e-1))},k=t=>{t.preventDefault(),t.stopPropagation(),o(e.apartment_images[s+1])},w=t=>{t.preventDefault(),t.stopPropagation(),o(e.apartment_images[s-1])};return{render:()=>se(ke,{open:c,onClose:_,sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:se("div",{className:b.root,onMouseEnter:()=>{r(!0)},onMouseLeave:()=>{r(!1)},onClick:()=>m(!1),children:se("div",{className:b.container,children:[se(be,{className:b.prev,onClick:w,disabled:0===s,onMouseOver:()=>h(!0),onMouseLeave:()=>h(!1)}),se(be,{className:b.next,onClick:k,disabled:s===n-1,onMouseOver:()=>h(!0),onMouseLeave:()=>h(!1)}),se(Bd,{onLoadEnd:f,onLoadStart:g,className:b.content,images:e.apartment_images,text:"№".concat(e.index),payload:t,onChange:a,image:i,readonly:!0,drag:!1,onMouseOver:y}),n>1&&se(me,{sx:{position:"absolute",left:0,bottom:0,width:"100%",height:75,display:"flex",alignItems:"space-beetween",justifyContent:"center",transition:"opacity 150ms",opacity:l?1:0},children:se(ve,{onClick:e=>{e.preventDefault(),e.stopPropagation()},steps:n,position:"static",activeStep:s,nextButton:se(_e,{size:"small",sx:{ml:1},onClick:k,disabled:s===n-1,children:se(ge,{})}),backButton:se(_e,{size:"small",sx:{mr:1},onClick:w,disabled:0===s,children:se(fe,{})}),sx:{height:"45px",backdropFilter:"blur(20px)",backgroundColor:"#00000012",borderRadius:"25px",zIndex:"1000"}})})]})})}),handleNext:k,handleBack:w,pickImage:e=>{o(e),m(!0)}}})({_fieldData:t,payload:a,apartment_images:e,onChange:e=>{o({apartment_images:e})},readonly:i}),u=ne();return se(Se,{children:[se(we,{gap:1,sx:{pointerEvents:"all"},flexWrap:"wrap",direction:"row",onDrop:()=>{(()=>{const{current:e}=n,{current:t}=s,{current:a}=d;if(!e)return;if(t==a)return;const i=e.indexOf(t),l=e.indexOf(a),r=e[i];e[i]=e[l],e[l]=r,o({apartment_images:e})})(),u.next()},children:null==e?void 0:e.map(((e,l)=>se(Bd,{sx:{width:175},image:e,images:t.apartment_images,onChange:e=>{o({apartment_images:e})},text:"№".concat(t.index),dropSubject:u,drag:!i,payload:a,readonly:i,onClick:c},l)))}),m()]})},jd=e=>se(Ad,{initialState:"",children:se(Fd,{initialState:"",children:se(Rd,{...e})})}),qd=Nn()((e=>({row:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr"},input:{paddingRight:"4px",paddingBottom:"4px"},onlyInput:{maxWidth:"500px",width:"100%"},select:{margin:"0 5px"},checkbox:{}}))),Pd=new Set(["0","1","2","3","4","5","6","7","8","9","Backspace","ArrowLeft","ArrowRight"]),Ed=e=>Pd.has(e),Nd=({className:e,style:t,sx:a,value:i="",readonly:o,unit:l="usd",title:r,onChange:n})=>{const{reloadTrigger:s,doReload:d}=ca(),[c,m]=re.useState(!1),u=(e=>"uzs"===e?"uzs":"usd")(l),p=We(o),y=We(c);re.useEffect((()=>K.join([p.toObserver(),y.toObserver()],{race:!0}).connect(d)),[]);return se(ta,{type:"number",label:r,value:o||!c?i:void 0,defaultValue:i,className:e,style:t,sx:a,onKeyDown:e=>{Ed(e.key)||e.preventDefault()},onChange:({target:e})=>{n({unit:u,value:e.value})},onFocus:()=>m(!0),onBlur:()=>m(!1),variant:"standard",fullWidth:!0,InputProps:{startAdornment:se(aa,{sx:{userSelect:"none",cursor:"pointer"},onClick:()=>{"usd"===u&&n({value:i,unit:"uzs"}),"uzs"===u&&n({value:i,unit:"usd"})},position:"start",children:["usd"===u&&se(ma,{sx:{width:"36px"}}),"uzs"===u&&se("span",{style:{fontWeight:"bold"},children:"SUM"})]})}})},Od=({className:e,style:t,sx:a,title:i,square:o,readonly:l,unit:r="usd",value:n="",onChange:s})=>{const{reloadTrigger:d,doReload:c}=ca(),[m,u]=re.useState(!1),p=re.useMemo((()=>(e=>"uzs"===e?"uzs":"usd")(r)),[r]),y=We(l),h=We(m);re.useEffect((()=>K.join([y.toObserver(),h.toObserver()],{race:!0}).connect(c)),[]);const b=re.useMemo((()=>{if(!o||isNaN(o))return"";if(!n)return"";const e=+n/Math.max(+o,1);return l?e.toFixed(2):e}),[o,n,l]);return se(ta,{type:"number",label:i,value:l||!m?b:void 0,defaultValue:b,disabled:!o||isNaN(o),className:e,style:t,sx:a,onKeyDown:e=>{Ed(e.key)||e.preventDefault()},onChange:({target:e})=>{""!==e.value?s({square:o,unit:p,value:""===e.value?"":String(+e.value*+o)}):s({square:o,unit:p,value:""})},onFocus:()=>u(!0),onBlur:()=>u(!1),variant:"standard",fullWidth:!0,InputProps:{startAdornment:se(aa,{sx:{userSelect:"none",cursor:"pointer"},onClick:()=>{"usd"===p&&s({value:n,unit:"uzs",square:o}),"uzs"===p&&s({value:n,unit:"usd",square:o})},position:"start",children:["usd"===p&&se(ma,{sx:{width:"36px"}}),"uzs"===p&&se("span",{style:{fontWeight:"bold"},children:"SUM"})]})}})},Hd=({className:e,style:t,sx:a,title:i,value:o="",unit:l="%",readonly:r,onChange:n})=>{const{reloadTrigger:s,doReload:d}=ca(),c=re.useMemo((()=>(e=>"1"===e?"1":"%")(l)),[l]),m=We(r);re.useEffect((()=>m.subscribe(d)),[]);return se(ta,{type:"number",label:i,className:e,style:t,sx:a,defaultValue:o,value:r?o:void 0,onKeyDown:e=>{Ed(e.key)||e.preventDefault()},onChange:({target:e})=>{n({unit:c,value:e.value})},variant:"standard",fullWidth:!0,InputProps:{startAdornment:se(aa,{sx:{userSelect:"none",cursor:"pointer"},onClick:()=>{"1"===c&&n({value:o,unit:"%"}),"%"===c&&n({value:o,unit:"1"})},position:"start",children:["%"===c&&se(ua,{}),"1"===c&&se(pa,{})]})}})},Ud={},Wd=["komissiya_agenstva_unit","czena_sobstvennika","startovaya_czena_valyuta","komissiya_menedzhera","komissiya_agenstva","komissiya_menedzhera_unit","startovaya_czena","torg"],$d=({isViewMode:e,square:t,value:a=Ud,title:i,prefix:o,readonly:l,onChange:r})=>{const{classes:n}=qd(),s=re.useCallback((()=>{const e=Object.entries(a).map((([e,t])=>[Pe(e,o),t])).filter((([e])=>Wd.includes(e)));return Object.fromEntries(e)}),[a]),[d,c]=re.useState(s),m=re.useMemo((()=>h.debounce(r,0)),[]),{resetWatcher:u}=ea((()=>{const e=Object.entries(d).map((([e,t])=>[o+e,t]));m(Object.fromEntries(e))}),[d]);return ea((()=>{u(),c(s)}),[t,a]),re.useEffect((()=>()=>{m.flush()}),[]),se(Se,e?{children:[se(Ae,{variant:"h6",fontWeight:"bold",children:i}),se(Nd,{title:"Стартовая цена",unit:d.startovaya_czena_valyuta,value:d.startovaya_czena,onChange:({unit:e,value:t})=>c((a=>({...a,startovaya_czena_valyuta:e,startovaya_czena:t}))),className:n.onlyInput})]}:{children:[se(Ae,{variant:"h6",fontWeight:"bold",children:i}),se(me,{className:n.row,children:[se(Nd,{readonly:l,title:"Цена собственника",unit:d.startovaya_czena_valyuta,value:d.czena_sobstvennika,onChange:({unit:e,value:t})=>c((a=>({...a,startovaya_czena_valyuta:e,czena_sobstvennika:t}))),className:n.input}),se(Nd,{readonly:l,title:"Стартовая цена",unit:d.startovaya_czena_valyuta,value:d.startovaya_czena,onChange:({unit:e,value:t})=>c((a=>({...a,startovaya_czena_valyuta:e,startovaya_czena:t}))),className:n.input}),se(Od,{readonly:l,title:"Стартовая цена м²",square:t,unit:d.startovaya_czena_valyuta,value:d.startovaya_czena,onChange:({unit:e,value:t})=>c((a=>({...a,startovaya_czena_valyuta:e,startovaya_czena:t}))),className:n.input})]}),se(me,{className:n.row,children:se(ya,{className:n.checkbox,control:se(pe,{checked:d.torg}),onChange:()=>c((e=>({...e,torg:!e.torg}))),label:"Торг"})}),!e&&se(me,{className:n.row,children:[se(Hd,{readonly:l,title:"Комиссия агенства",unit:d.komissiya_agenstva_unit,value:d.komissiya_agenstva,onChange:({unit:e,value:t})=>c((a=>({...a,komissiya_agenstva_unit:e,komissiya_agenstva:t}))),className:n.input}),se(Hd,{readonly:l,title:"Комиссия менеджера",unit:d.komissiya_menedzhera_unit,value:d.komissiya_menedzhera,onChange:({unit:e,value:t})=>c((a=>({...a,komissiya_menedzhera_unit:e,komissiya_menedzhera:t}))),className:n.input})]})]})},Gd=54,Yd=Nn()((e=>({root:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",overflow:"hidden",paddingBottom:"10px"},typogrphy:{padding:"10px"},container:{overflowX:"hidden",overflowY:"scroll",padding:e.spacing(1),flex:1},appBarRoot:{background:e.palette.primary.main,maxHeight:Gd,height:Gd,boxShadow:"unset",color:"#000"},tabsRoot:{minHeight:Gd,height:Gd,marginLeft:"0 !important",marginRight:"0 !important"},tabRoot:{minHeight:Gd,height:Gd,color:"#fff"},tabRootTransparent:{minHeight:Gd,height:Gd},tabSelected:{color:"#fff !important"},indicator:{height:6,background:"#0288d1"},indicatorTransparent:{height:6,background:e.palette.primary.main}}))),Kd=({sx:e,withTransparentHeader:t,withRentTab:a,withSellTab:i,readonly:o,isViewMode:l=!1,fieldData:r,onChange:n=(()=>{})})=>{const{classes:s}=Yd(),[d,c]=re.useState("rent"),m=re.useMemo((()=>r.obshhaya_ploshhad?r.obshhaya_ploshhad:r.ploshhad_doma?r.ploshhad_doma:""),[r]),u=re.useMemo((()=>ze(r.kategoriya_obekta,"Жилая","От застройщика")),[r]),p=re.useMemo((()=>ze(r.kategoriya_obekta,"Коммерческая")),[r]);return re.useEffect((()=>{i?c("sell"):a&&c("rent")}),[a,i]),se(et,{className:s.root,sx:{...e,height:"100%"},children:se(ha,{value:d,children:[t&&se(me,{sx:{borderBottom:1,borderColor:"divider",pointerEvents:"all"},children:se(ba,{variant:"fullWidth",classes:{root:s.tabsRoot,indicator:s.indicatorTransparent},onChange:(e,t)=>c(t),children:[i&&se(va,{classes:{root:s.tabRootTransparent},label:"Продажа",value:"sell"}),a&&se(va,{classes:{root:s.tabRootTransparent},label:"Аренда",value:"rent"})]})}),!t&&se(_a,{classes:{root:s.appBarRoot},position:"static",sx:{borderBottom:1,borderColor:"divider",pointerEvents:"all"},children:se(ba,{variant:"fullWidth",classes:{root:s.tabsRoot,indicator:s.indicator},onChange:(e,t)=>c(t),children:[i&&se(va,{classes:{root:s.tabRoot,selected:s.tabSelected},label:"Продажа",value:"sell"}),a&&se(va,{classes:{root:s.tabRoot,selected:s.tabSelected},label:"Аренда",value:"rent"})]})}),i&&se(ga,{className:s.container,sx:{pointerEvents:o?"none":"unset"},value:"sell",children:[u&&se($d,{isViewMode:l,readonly:o,title:"Продажа",prefix:"prod_",square:m,value:r,onChange:n}),p&&se($d,{isViewMode:l,readonly:o,title:"Продажа ком.",prefix:"prod_kom_",square:m,value:r,onChange:n})]}),a&&se(ga,{className:s.container,sx:{pointerEvents:o?"none":"unset"},value:"rent",children:[u&&se($d,{isViewMode:l,readonly:o,title:"Аренда",prefix:"rent_",value:r,onChange:n,square:m}),p&&se($d,{isViewMode:l,readonly:o,title:"Аренда ком.",prefix:"rent_kom_",value:r,onChange:n,square:m})]})]})})},Xd=Nn()((e=>({root:{position:"absolute",padding:20,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"stretch",transform:"translate(-50%, -50%)",backgroundColor:e.palette.background.paper,borderRadius:5,gap:5},small:{top:"40%",left:"50%",maxHeight:"80%",width:500},large:{top:"50%",left:"50%",width:"calc(100vw - 50px)",height:"calc(100vh - 50px)"},content:{flex:1,overflowY:"auto",paddingTop:e.spacing(1),display:"flex",alignItems:"stretch",justifyContent:"stretch","& > *":{flex:1}},title:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:15,color:e.palette.text.primary},submit:{marginTop:15},disabled:{opacity:.5,pointerEvents:"none"}}))),Jd=({onChange:e})=>{const[t,a]=re.useState((()=>({address:"",open:!1}))),[i,o]=re.useState(null),l=re.useRef(null),{handleLoadStart:r,handleLoadEnd:n}=Oe({history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)}),{address:s,open:d}=t,c=()=>{l.current=null,p.current&&p.current(),a({address:"",open:!1})},m=async()=>{const{current:t}=l;try{if(t){const a=await os.ymapsService.getAddress(t);e(a)}}finally{c()}},{classes:u}=Xd(),p=re.useRef(null);re.useEffect((()=>{if(i)return os.ymapsService.drawMap(i,{address:s,change:e=>l.current=e})}),[i]);return{render:()=>se(ke,{open:d,onClose:c,children:se(me,{className:ue(u.root,{[u.large]:!0}),children:[se("div",{className:u.title,children:se(Ae,{variant:"h6",component:"h2",children:"Выберите точку"})}),se(me,{className:u.content,children:se("div",{ref:o})}),se(ot,{onClick:m,onLoadStart:r,onLoadEnd:n,variant:"contained",children:"Применить"})]})}),pickMap:(e="")=>a({address:e,open:!0})}},Zd=({gorod:e,mahallya:t,nomer_doma:a,rajon:i,strana:o,ulicza:l,metro:r,onChange:n})=>{const{render:s,pickMap:d}=Jd({onChange:n}),c=re.useMemo((()=>[o||null,e?"Город ".concat(e):null,i?"".concat(i):null,t?" ".concat(t):l?" ".concat(l):null,a?"".concat(a):null,r?"Метро ".concat(r):null].filter((e=>e)).join(", ")),[e,t,a,i,o,l,r]);return se(Se,{children:[se(Dt,{onClick:()=>{"action-modal"==="action-modal"&&d(c)},fullWidth:!0,variant:"contained",children:"Найти на карте"}),s()]})},Qd=[{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая"),t=t&&!ze(e.podkategoriya_obekta,"Квартиры"),t=t&&!ze(e.podkategoriya_obekta,"Дома"),t=t&&!ze(e.podkategoriya_obekta,"Земля/Участок"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая недвижимость)"})},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"}]}]},{type:o.Fragment,isVisible:e=>!ze(e.kategoriya_obekta,"Коммерческая")&&ze(e.podkategoriya_obekta,"Земля/Участок"),fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Земля/Участок)"})},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"}]}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&!ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Квартиры"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Квартиры)"})},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}]}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&!ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Дома"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Дома)"})},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostevogo_doma",title:"Площадь гостевого дома М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_dopolnitelnoj_pristrojki",title:"Площадь дополнительной пристройки М²"}]}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Квартиры"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая квартира)"})},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}]}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Дома"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческий дом)"})},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostevogo_doma",title:"Площадь гостевого дома М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_dopolnitelnoj_pristrojki",title:"Площадь дополнительной пристройки М²"}]}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Земля/Участок"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая Земля/Участок)"})},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"}]}]}],ec=[{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая"),t=t&&!ze(e.podkategoriya_obekta,"Квартиры"),t=t&&!ze(e.podkategoriya_obekta,"Дома"),t=t&&!ze(e.podkategoriya_obekta,"Земля/Участок"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая недвижимость)"})},{type:o.Items,columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Телевизор","Кондиционер","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг","Умный дом","Цоколь","Подвал","Терраса","Угловой","Комната охраны","Вдоль дороги","Сарай","Огород","Решетки на окнах","Пожарная сигнализация","Видеонаблюдение","Сигнализация","Разгрузочный пандус"]},{type:o.Items,columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Охрана","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:o.Fragment,isVisible:e=>{let t=!1;return t=t||ze(e.podkategoriya_obekta,"Земля/Участок"),t=t&&!ze(e.kategoriya_obekta,"Коммерческая"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Земля/Участок)"})},{type:o.Items,columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Забор","Катлаван","Сарай","Огород","Самострой","Угловой","Пожарная сигнализация","Видеонаблюдение","Сигнализация","Разгрузочный пандус"]},{type:o.Items,columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Охрана","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Дома"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческий дом)"})},{type:o.Items,columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Телевизор","Кондиционер","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг","Умный дом","Комната охраны","Гостевой домик","Барбекю зона","2 дома во дворе","Сарай","Огород","Полисадник","Дополнительная пристройка","Разгрузочный пандус","Цоколь","Подвал","Гардеробная","Терраса","Угловой","Вдоль дороги","Решетки на окнах","Пожарная сигнализация","Видеонаблюдение","Сигнализация"]},{type:o.Items,columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Охрана","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}}],tc=[{type:o.Fragment,isVisible:e=>(!ze(e.podkategoriya_obekta,"Земля/Участок")||!ze(e.kategoriya_obekta,"Коммерческая"))&&((!ze(e.podkategoriya_obekta,"Дома")||!ze(e.kategoriya_obekta,"Коммерческая"))&&((!ze(e.podkategoriya_obekta,"Квартиры")||!ze(e.kategoriya_obekta,"Коммерческая"))&&ze(e.kategoriya_obekta,"Коммерческая"))),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая недвижимость)"})},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Component,sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>se(xe,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},{type:o.Combo,columns:"3",outlined:!1,name:"sostoyanie_obekta",title:"Состояние объекта",itemList:["Новой постройки","Недостроенный","Под снос","Коробка"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"},{type:o.Combo,columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:o.Combo,columns:"3",outlined:!1,name:"tip_stroeniya",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},{type:o.Items,columns:"3",outlined:!1,name:"parkovka",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"sanuzel",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:o.Items,columns:"3",outlined:!1,name:"balkon",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"voda",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]},{type:o.Combo,columns:"3",outlined:!1,name:"kanalizacziya",title:"Канализация",itemList:["Да","Нет"]},{type:o.Combo,columns:"3",outlined:!1,name:"lift_kommercziya",title:"Лифт",itemList:["Есть","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"sistema_otopleniya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Items,columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Combo,columns:"3",outlined:!1,name:"mebel",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:o.Combo,columns:"3",outlined:!1,name:"elektrichestvo",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"},{type:o.Items,columns:"3",outlined:!1,name:"mestopolozhenie_obekta",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:o.Items,columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]}]}},{type:o.Fragment,isVisible:e=>{if(ze(e.podkategoriya_obekta,"Квартиры")&&ze(e.kategoriya_obekta,"Коммерческая"))return!1;let t=!1;return t=t||ze(e.podkategoriya_obekta,"Квартиры"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Квартиры)"})},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Combo,columns:"3",outlined:!1,name:"sostoyanie_remonta-kvartiry",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Complete,columns:"3",outlined:!1,name:"nazvanie_zhk",title:"Название ЖК",tip:['ЖК "Greenwich"','ЖК "OzMahal"','ЖК "Elysium"','ЖК "Binkat"','ЖК "Brooklyn"','ЖК "Assalom Havo"','ЖК "Istanbul City"']},{type:o.Combo,columns:"3",outlined:!1,name:"tip-stroeniya_kvartiry",title:"Тип строения",itemList:["Кирпичный","Монолитный","Блочный","Панельный","Деревянный","Газоблочный","Бетонно-керамзитный"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"},{type:o.Items,columns:"3",outlined:!1,name:"balkon_kvartira",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Малосемейная","Общежитие","Пентхаус","Дуплекс","Комната"]},{type:o.Combo,columns:"3",outlined:!1,name:"lift_kvartira",title:"Лифт",itemList:["Пассажирский","Грузовой","Нет"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:o.Items,columns:"3",outlined:!1,name:"sanuzel_kvartira",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"zhilaya_ploshhad",title:"Жилая площадь М²"},{type:o.Combo,columns:"3",outlined:!1,name:"mebel_kvartira",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"},{type:o.Items,columns:"3",outlined:!1,name:"sistema-otopleniya_kvartiry",title:"Система отопления",itemList:["Центральное","2х контурный котел","Теплый пол"]},{type:o.Text,columns:"3",outlined:!1,name:"kod_domofona",title:"Код домофона"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"},{type:o.Items,columns:"3",outlined:!1,name:"energonositel_obekta",title:"Энергоноситель объекта",itemList:["Электрофицирован","Газифицирован"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"podezd_nomer",title:"Подъезд №"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:o.Items,columns:"3",outlined:!1,name:"vid_iz_okna",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:o.Items,columns:"3",outlined:!1,name:"parkovka_kvartira",title:"Парковка",itemList:["Наземная","Собственная","Подземная","В аренду","Нет"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}]}},{type:o.Fragment,isVisible:e=>{if(ze(e.podkategoriya_obekta,"Дома")&&ze(e.kategoriya_obekta,"Коммерческая"))return!1;let t=!1;return t=t||ze(e.podkategoriya_obekta,"Дома"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Дома)"})},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Combo,columns:"3",outlined:!1,name:"sostoyanie_doma",title:"Состояние дома",itemList:["Новой постройки","Недостроенный","Под снос","Коробка"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"},{type:o.Combo,columns:"3",outlined:!1,name:"tip-stroeniya_doma",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:o.Items,columns:"3",outlined:!1,name:"balkon_doma",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Смешанный"]},{type:o.Items,columns:"3",outlined:!1,name:"bassejn",title:"Бассейн",itemList:["Летний","Зимний","Нет"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_doma",title:"Площадь дома М²"},{type:o.Items,columns:"3",outlined:!1,name:"sanuzel_doma",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"},{type:o.Combo,columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Combo,columns:"3",outlined:!1,name:"lift_dom",title:"Лифт",itemList:["Есть","Нет"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"},{type:o.Items,columns:"3",outlined:!1,name:"sistema-otopleniya_dom",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Combo,columns:"3",outlined:!1,name:"mebel_dom",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:o.Items,columns:"3",outlined:!1,name:"gaz_dom",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_dom",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"},{type:o.Combo,columns:"3",outlined:!1,name:"elektrichestvo_dom",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"vid_iz_okna_dom",title:"Вид из окна",itemList:["В огород","На улицу","На трассу"]},{type:o.Items,columns:"3",outlined:!1,name:"garazh",title:"Гараж",itemList:["Подземный","Закрытый","Под навесом","Уличный"]},{type:o.Combo,columns:"3",outlined:!1,name:"kanalizacziya_dom",title:"Канализация",itemList:["Да","Нет"]},{type:o.Combo,columns:"3",outlined:!1,name:"raspolozhenie_doma",title:"Расположение дома",itemList:["По середине","В начале двора","В конце двора"]},{type:o.Items,columns:"3",outlined:!1,name:"mestopolozhenie-obekta_dom",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:o.Items,columns:"3",outlined:!1,name:"voda_dom",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]}]}},{type:o.Fragment,isVisible:e=>!ze(e.kategoriya_obekta,"Коммерческая")&&ze(e.podkategoriya_obekta,"Земля/Участок"),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Земля/Участок)"})},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Component,sx:{pr:1,mb:2},columns:"3",name:"naznachenie-obekta-zemlya_uchastok",element:e=>se(xe,{variant:"standard",label:"Назначение объекта",items:[{label:"Сельхоз использование",value:"Сельхоз использование"},{label:"ИЖС",value:"ИЖС"},{label:"Высотная застройка",value:"Высотная застройка"},{label:"Промышленное назначение",value:"Промышленное назначение"},{label:"ТЦ",value:"ТЦ"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Склады",value:"Склады"},{label:"Инвестпроект",value:"Инвестпроект"},{label:"Строительство образовательных учреждений",value:"Строительство образовательных учреждений"},{label:"АЗС",value:"АЗС"},{label:"Мойка",value:"Мойка"}],value:e["naznachenie-obekta_zemlya"],onChange:t=>e.onChange({"naznachenie-obekta_zemlya":t})})},{type:o.Items,columns:"3",outlined:!1,name:"tip_zemli_uchastka",title:"Тип земли/участка",itemList:["Делимый","Неделимый"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"},{type:o.Combo,columns:"3",outlined:!1,name:"sostoyanie-obekta_zemlya",title:"Состояние объекта",itemList:["Пустая земля/участок","Недостроенная","Под снос"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:o.Combo,columns:"3",outlined:!1,name:"sostoyanie-remonta_zemlya",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Items,columns:"3",outlined:!1,name:"parkovka_zemlya",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:o.Items,columns:"3",outlined:!1,name:"voda_zemlya",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение"]},{type:o.Items,columns:"3",outlined:!1,name:"mestopolozhenie-obekta_zemlya",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_goroda",title:"Расстояние до города (м)"},{type:o.Items,columns:"3",outlined:!1,name:"sistema-otopleniya_zemlya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Combo,columns:"3",outlined:!1,name:"podezdnye_puti",title:"Подъездные пути",itemList:["Асфальтированная дорога","Грунтовая дорога","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_zemlya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"},{type:o.Combo,columns:"3",outlined:!1,name:"elektrichestvo_zemlya",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"gaz_zemlya",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Combo,columns:"3",outlined:!1,name:"kanalizacziya_zemlya",title:"Канализация",itemList:["Да","Нет"]}]}},{type:o.Fragment,isVisible:e=>!(!ze(e.podkategoriya_obekta,"Квартиры")||!ze(e.kategoriya_obekta,"Коммерческая")),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая квартира)"})},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Combo,columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Component,sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>se(xe,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},{type:o.Items,columns:"3",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"},{type:o.Items,columns:"3",outlined:!1,name:"balkon",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Малосемейная","Общежитие","Пентхаус","Дуплекс","Комната"]},{type:o.Combo,columns:"3",outlined:!1,name:"lift_kvartira",title:"Лифт",itemList:["Пассажирский","Грузовой","Нет"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"},{type:o.Complete,columns:"3",outlined:!1,name:"nazvanie_zhk",title:"Название ЖК",tip:['ЖК "Greenwich"','ЖК "OzMahal"','ЖК "Elysium"','ЖК "Binkat"','ЖК "Brooklyn"','ЖК "Assalom Havo"','ЖК "Istanbul City"']},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:o.Items,columns:"3",outlined:!1,name:"sanuzel_kvartira",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более"]},{type:o.Items,columns:"3",outlined:!1,name:"parkovka_kvartira",title:"Парковка",itemList:["Наземная","Собственная","Подземная","В аренду","Нет"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"zhilaya_ploshhad",title:"Жилая площадь М²"},{type:o.Combo,columns:"3",outlined:!1,name:"mebel",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"},{type:o.Items,columns:"3",outlined:!1,name:"sistema_otopleniya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Text,columns:"3",outlined:!1,name:"kod_domofona",title:"Код домофона"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"},{type:o.Items,columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"podezd_nomer",title:"Подъезд №"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:o.Items,columns:"3",outlined:!1,name:"vid_iz_okna",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:o.Items,columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:o.Combo,columns:"3",outlined:!1,name:"tip_stroeniya",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]}]}},{type:o.Fragment,isVisible:e=>!(!ze(e.podkategoriya_obekta,"Дома")||!ze(e.kategoriya_obekta,"Коммерческая")),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческий дом)"})},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Combo,columns:"3",outlined:!1,name:"sostoyanie_doma",title:"Состояние дома",itemList:["Новой постройки","Недостроенный","Под снос","Коробка"]},{type:o.Items,columns:"3",outlined:!1,name:"mestopolozhenie_obekta",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:o.Component,sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>se(xe,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:o.Combo,columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Items,columns:"3",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:o.Combo,columns:"3",outlined:!1,name:"tip_stroeniya",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_doma",title:"Площадь дома М²"},{type:o.Combo,columns:"3",outlined:!1,name:"raspolozhenie_doma",title:"Расположение дома",itemList:["По середине","В начале двора","В конце двора"]},{type:o.Items,columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Малосемейная","Общежитие","Пентхаус","Дуплекс","Комната"]},{type:o.Items,columns:"3",outlined:!1,name:"bassejn",title:"Бассейн",itemList:["Летний","Зимний","Нет"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"},{type:o.Items,columns:"3",outlined:!1,name:"sanuzel_doma",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"},{type:o.Items,columns:"3",outlined:!1,name:"voda_dom",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]},{type:o.Combo,columns:"3",outlined:!1,name:"lift_kvartira",title:"Лифт",itemList:["Пассажирский","Грузовой","Нет"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"},{type:o.Items,columns:"3",outlined:!1,name:"sistema_otopleniya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Combo,columns:"3",outlined:!1,name:"mebel",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:o.Items,columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"},{type:o.Combo,columns:"3",outlined:!1,name:"elektrichestvo_dom",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"vid_iz_okna",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:o.Items,columns:"3",outlined:!1,name:"garazh",title:"Гараж",itemList:["Подземный","Закрытый","Под навесом","Уличный"]},{type:o.Combo,columns:"3",outlined:!1,name:"kanalizacziya_dom",title:"Канализация",itemList:["Да","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"balkon",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}]}},{type:o.Fragment,isVisible:e=>!(!ze(e.podkategoriya_obekta,"Земля/Участок")||!ze(e.kategoriya_obekta,"Коммерческая")),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая Земля/Участок)"})},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Component,sx:{pr:1,mb:2},columns:"3",name:"naznachenie-obekta-zemlya_uchastok",element:e=>se(xe,{variant:"standard",label:"Назначение объекта",items:[{label:"Сельхоз использование",value:"Сельхоз использование"},{label:"ИЖС",value:"ИЖС"},{label:"Высотная застройка",value:"Высотная застройка"},{label:"Промышленное назначение",value:"Промышленное назначение"},{label:"ТЦ",value:"ТЦ"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Склады",value:"Склады"},{label:"Инвестпроект",value:"Инвестпроект"},{label:"Строительство образовательных учреждений",value:"Строительство образовательных учреждений"},{label:"АЗС",value:"АЗС"},{label:"Мойка",value:"Мойка"}],value:e["naznachenie-obekta_zemlya"],onChange:t=>e.onChange({"naznachenie-obekta_zemlya":t})})},{type:o.Items,columns:"3",outlined:!1,name:"tip_zemli_uchastka",title:"Тип земли/участка",itemList:["Делимый","Неделимый"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"},{type:o.Combo,columns:"3",outlined:!1,name:"sostoyanie-obekta_zemlya",title:"Состояние объекта",itemList:["Пустая земля/участок","Недостроенная","Под снос"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:o.Combo,columns:"3",outlined:!1,name:"sostoyanie-remonta_zemlya",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Items,columns:"3",outlined:!1,name:"parkovka_zemlya",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:o.Items,columns:"3",outlined:!1,name:"voda_zemlya",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение"]},{type:o.Items,columns:"3",outlined:!1,name:"mestopolozhenie-obekta_zemlya",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_goroda",title:"Расстояние до города (м)"},{type:o.Items,columns:"3",outlined:!1,name:"sistema-otopleniya_zemlya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Combo,columns:"3",outlined:!1,name:"podezdnye_puti",title:"Подъездные пути",itemList:["Асфальтированная дорога","Грунтовая дорога","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_zemlya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"},{type:o.Combo,columns:"3",outlined:!1,name:"elektrichestvo_zemlya",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"gaz_zemlya",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Combo,columns:"3",outlined:!1,name:"kanalizacziya_zemlya",title:"Канализация",itemList:["Да","Нет"]}]}}],ac=[{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&!ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Квартиры"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Квартиры)"})},{type:o.Items,columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Холодильник","Телевизор","Кондиционер","Стиральная машина","Мусоропровод","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг","Умный дом","Цоколь","Подвал","Гардеробная","Терраса","Торец","Собственное обслуживающее ТСЖ","Консьерж"]},{type:o.Items,columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Барбекю зона","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&!ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Дома"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Дома)"})},{type:o.Items,columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Холодильник","Телевизор","Кондиционер","Стиральная машина","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг","Умный дом","Цоколь","Подвал","Гардеробная","Терраса","Угловой","Комната охраны","Вдоль дороги","Гостевой домик","Барбекю зона","2 дома во дворе","Сарай","Огород","Полисадник","Дополнительная пристройка"]},{type:o.Items,columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Охрана","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Квартиры"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая квартира)"})},{type:o.Items,columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Холодильник","Телевизор","Кондиционер","Стиральная машина","Мусоропровод","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг","Умный дом","Решетки на окнах","Пожарная сигнализация","Видеонаблюдение","Сигнализация","Разгрузочный пандус","Цоколь","Подвал","Гардеробная","Терраса","Торец","Собственное обслуживающее ТСЖ","Консьерж","Угловой","Вдоль дороги"]},{type:o.Items,columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Охрана","Барбекю зона","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Земля/Участок"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая Земля/Участок)"})},{type:o.Items,columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Забор","Катлаван","Сарай","Огород","Самострой","Угловой","Пожарная сигнализация","Видеонаблюдение","Сигнализация","Разгрузочный пандус"]},{type:o.Items,columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Охрана","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}}],ic=[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Основная информация"})},{type:o.Text,outlined:!1,name:"zagolovok",title:"Заголовок",placeholder:"Введите текст"},{type:o.Items,outlined:!1,columns:"4",name:"kategoriya_obekta",title:"Категория объекта",itemList:["Коммерческая","Жилая","От застройщика"]},{type:o.Items,outlined:!1,columns:"4",name:"prodazha",title:"Продажа",itemList:["Прямая продажа","Рассрочка","Через банк","Обмен"]},{type:o.Items,outlined:!1,columns:"4",name:"arenda",title:"Аренда",itemList:["Долгосрочная","Ежемесячная","Посуточная"]},{type:o.Combo,outlined:!1,columns:"4",name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>ze(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок","Здания","Базы"]},{type:o.Combo,outlined:!1,columns:"4",name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>!ze(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок"]},{type:o.Combo,columns:"4",outlined:!1,name:"istochnik",title:"Источник",itemList:["По звонку","Личные связи","Самостоятельный поиск","Риелтор","С сайта","Прибытие в офис","OLX","Facebook","Instagram","Telegram","Эксклюзив","Другое"]},{type:o.Combo,isVisible:e=>!(!ze(e.podkategoriya_obekta,"Квартиры")||!ze(e.kategoriya_obekta,"Коммерческая","Жилая")),columns:"4",outlined:!1,name:"tip_nedvizhimosti",title:"Тип недвижимости",itemList:["Вторичное жилье","Новостройка"]},{type:o.Combo,isVisible:e=>{let t=!1;return t=t||ze(e.podkategoriya_obekta,"Дома"),t},columns:"4",outlined:!1,name:"vid_obekta",title:"Вид объекта",itemList:["Дом","Коттедж","Таунхаус","ЖАКТ","Часть дома","Дача"]},{type:o.Items,isVisible:e=>{let t=!1;return t=t||ze(e.kategoriya_obekta,"Коммерческая"),t=t&&!ze(e.podkategoriya_obekta,"Дома"),t=t&&!ze(e.podkategoriya_obekta,"Земля/Участок"),t=t&&!ze(e.podkategoriya_obekta,"Квартиры"),t},columns:"4",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:o.Combo,isVisible:e=>{let t=!1;return t=t||ze(e.podkategoriya_obekta,"Земля/Участок"),t},columns:"4",outlined:!1,name:"vid_liczenzii",title:"Вид лицензии",itemList:["Коммерческая","Жилая"]}]},...tc,{type:o.Group,columns:"12",fieldRightMargin:"0",fieldBottomMargin:"0",fields:[{type:o.Fragment,isVisible:e=>{let t=!1;return t=t||null!==e.podkategoriya_obekta,t=t||null!==e.kategoriya_obekta,t},child:{type:o.Paper,columns:"6",fieldRightMargin:"1",fieldBottomMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Расположение объекта"})},{type:o.Complete,outlined:!1,name:"strana",title:"Страна",tip:async()=>["Узбекистан"]},{type:o.Complete,outlined:!1,name:"gorod",title:"Город",tip:["Ташкент"]},{type:o.Complete,outlined:!1,name:"oblast",title:"Область",tip:async()=>["Ташкентская область"]},{type:o.Complete,outlined:!1,name:"rajon",title:"Район",tip:["Алмазарский район","Бектемирский район","Мирабадский район","Мирзо-Улугбекский район","Сергелийский район","Учтепинский район","Чиланзарский район","Шайхантахурский район","Юнусабадский район","Яккасарайский район","Янгихаётский район","Яшнабадский район"]},{type:o.Complete,tip:os.dictService.getMahallya,outlined:!1,name:"mahallya",title:"Махалля"},{type:o.Complete,tip:os.dictService.getUlicza,outlined:!1,name:"ulicza",title:"Улица"},{type:o.Text,outlined:!1,name:"orientir",title:"Ориентир"},{type:o.Combo,freeSolo:!0,outlined:!1,name:"metro",title:"Метро",itemList:["А. Ходжаев","Абдулла Кодирий","Алишер Навоий","Амир Темур хиёбони","Беруний","Бобур","Бодомзор","Буюк Ипак йули","Гофур Гулом","Дружба народов","Дустлик","Жанубий","Космонавтлар","Машинасозлар","Миллий бог","Мингурик","Минор","Мирзо Улугбек","Мустакиллик майдони","Новза","Ойбек","Олмазор","Отчопар","Пахтакор","Пушкинская","Сергели","Тинчлик","Тошкент","Тукимачи","Туркистон","Турсунзода","Узбекистон","Усмон Носыр","Файзулла Ходжаев","Хамид Олимжон","Чилонзор","Чорсу","Чош-тепа","Шахристан","Эхтиром","Юнус Ражабий","Юнусабад"]},{type:o.Fragment,isVisible:e=>{let t=!1;return t=t||ze(e.podkategoriya_obekta,"Квартиры"),t},fields:[{type:o.Text,columns:"6",outlined:!1,name:"nomer_doma",title:"№ дома"},{type:o.Text,columns:"6",outlined:!1,name:"nomer_kvartiry",title:"№ квартиры"}]},{type:o.Fragment,isVisible:e=>{let t=!1;return t=t||null!==e.kategoriya_obekta,t=t||null!==e.podkategoriya_obekta,t=t&&!ze(e.podkategoriya_obekta,"Квартиры"),t},fields:[{type:o.Text,outlined:!1,name:"nomer_doma",title:"№ дома"}]},{type:o.Component,element:Zd}]}},{type:o.Fragment,isVisible:e=>{let t=!1;return t=t||null!==e.podkategoriya_obekta,t=t||null!==e.kategoriya_obekta,t},child:{type:o.Group,style:{height:"100%"},columns:"6",fieldRightMargin:"0",fieldBottomMargin:"0",fields:[{type:o.Component,style:{height:"calc(100% - 212px)"},fieldRightMargin:"1",fieldBottomMargin:"1",isVisible:e=>{let t=!1;return t=t||null!==e.arenda,t=t||null!==e.prodazha,t},element:({onChange:e,_fieldData:t})=>se(Kd,{withRentTab:null!==t.arenda,withSellTab:null!==t.prodazha,onChange:e,fieldData:t})},{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Описание объекта"})},{type:o.Text,inputRows:3,outlined:!1,name:"opisanie",title:"Описание"}]}]}}]},...ac,...ec,...Qd,{type:o.Paper,isVisible:e=>!!ze(e.kategoriya_obekta,"Коммерческая","Жилая"),fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,element:Sd}]},{type:o.Fragment,isVisible:e=>{let t=!1;return t=t||null!==e.kategoriya_obekta,t=t||null!==e.podkategoriya_obekta,t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>e.apartment_images&&e.apartment_images.length,fields:[{type:o.Component,sx:{mb:2},element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})},{type:o.Component,element:jd}]},{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,element:({_fieldData:e,onChange:t})=>se(zd,{images:e.apartment_images,onChange:e=>t({apartment_images:e})})}]}]},{type:o.Component,features:["withBottomSaveButton"],watchOneContext:!0,element:xd}];window.apartment_fields=ic;const oc=[{type:Ee.Link,isVisible:()=>!!os.routerService.previousPath,action:"list-action",label:se(fe,{sx:{display:"block"}})},{type:Ee.Link,action:"list-action",label:"База объектов"},{type:Ee.Link,action:"list-action",isVisible:({id:e})=>"create"!==e,label:"Редактирование объекта"},{type:Ee.Link,action:"list-action",isVisible:({id:e})=>"create"===e,label:"Создание Объекта"},{type:Ee.Button,isDisabled:({hasChanged:e})=>!e,action:"save-action",label:"Сохранить"}],lc=Nn()((e=>({listItemAccient:{background:le(e.palette.getContrastText(e.palette.background.paper),.018)}}))),rc=[{type:St.Compute,sortable:!1,field:"index",headerName:"Номер",element:({index:e})=>se(zt,{content:e}),width:()=>100},{type:St.Text,sortable:!0,field:"zagolovok",headerName:"Заголовок",width:()=>200},{type:St.Compute,isVisible:({payload:{permissions:e}})=>e.hasFioPermission,sortable:!1,field:"fio",compute:async({contact_id:e})=>{const t=await os.contactViewService.tryRead(e);return t?t.fio:""},headerName:"Ф.И.О. Контакта",width:()=>200},{type:St.Compute,isVisible:({payload:{permissions:e}})=>e.hasPreviewModeDisabled,sortable:!1,field:"telefon",element:({id:e,contact_id:t})=>se(xt,{payload:e,condition:e=>os.permissionRequestService.getOwnerContactPermissionByBidId(e),Loading:"Загрузка",Else:"Скрыто",children:se(ye,{payload:t,children:async e=>{const t=await os.contactViewService.tryRead(e);return t?t.telefon:""}})}),headerName:"Номер телефона",width:()=>200},{type:St.Compute,field:"kategoriya_obekta",sortable:!0,compute:e=>e.kategoriya_obekta||"",headerName:"Категория",width:()=>200},{type:St.Compute,field:"podkategoriya_obekta",sortable:!0,compute:e=>e.podkategoriya_obekta||"",headerName:"Подкатегория",width:()=>200},{type:St.Compute,field:"czena_prodazha",description:"Покупка",isVisible:({payload:e})=>e.permissions.hasOwnerPricePermission,sortable:!0,compute:async e=>await os.exchangeService.getBidProdPriceLabel(e),headerName:"Цена (Покупка)",width:()=>300},{type:St.Compute,field:"czena_arenda",description:"Аренда",isVisible:({payload:e})=>e.permissions.hasOwnerPricePermission,sortable:!0,compute:async e=>await os.exchangeService.getBidRentPriceLabel(e),headerName:"Цена (Аренда)",width:()=>300},{type:St.Compute,sortable:!0,field:"prodazha_arenda",headerName:"Варианты сделки",element:({prodazha:e,arenda:t})=>{const a=[...e||[],...t||[]];return se(me,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",gap:1},children:[!a.length&&"",a.map((e=>se(ka,{label:e})))]})},width:()=>300},{type:St.Compute,sortable:!1,description:"Статус заявки",field:"status",headerName:"Статус",compute:async({id:e})=>await os.dealViewService.readStatusByBidId(e),width:()=>150},{type:St.Compute,headerName:"Дата создания",compute:({$createdAt:e})=>n(e).format("DD/MM/YYYY"),sortable:!0,field:"$createdAt",width:()=>200},{type:St.Compute,headerName:"Дата обновления",compute:({$updatedAt:e})=>n(e).format("DD/MM/YYYY"),sortable:!0,field:"$updatedAt",width:()=>200}],nc=e=>{var t;const a={};for(const i of Object.keys(e||{}))"id"!==i&&(i.startsWith("$")||i.endsWith("_images")||i.endsWith("_files")||Array.isArray(e[i])&&!(null==(t=e[i])?void 0:t.length)||null!==e[i]&&""!==e[i]&&!1!==e[i]&&(a[i]=e[i]));return a},sc=Nn()((e=>({listItemAccient:{background:le(e.palette.getContrastText(e.palette.background.paper),.018)}}))),dc=oe.createLoader(28),cc=[{type:St.Compute,sortable:!1,field:"index",headerName:"Номер",element:({index:e})=>se(zt,{content:String(e)}),width:()=>100},{type:St.Compute,sortable:!1,headerName:"Фото",width:()=>150,element:({apartment_images:e})=>se(me,{style:{height:64,width:128,display:"flex",alignItems:"center",background:"#ccc",justifyContent:"center"},children:se(ye,{Loader:dc,children:async()=>{const t=e?e[0]:null,a=t?await os.appwriteService.getImageURL(t):"";return se(Se,{children:a?se("img",{crossOrigin:"anonymous",loading:"lazy",alt:"apartment",src:a,style:{objectFit:"cover",height:"100%",width:"100%"}}):se(he,{sx:{color:"white",fontSize:28}})})}})})},{type:St.Text,sortable:!0,field:"zagolovok",headerName:"Заголовок",width:()=>200},{type:St.Text,sortable:!0,field:"kolichestvo_komnat",headerName:"Комнат",width:()=>100},{type:St.Text,sortable:!0,field:"etazh",headerName:"Этаж",width:()=>100},{type:St.Text,sortable:!0,field:"etazhnost",headerName:"Этажность",width:()=>100},{type:St.Compute,sortable:!0,field:"ploshhad",compute:e=>[e.obshhaya_ploshhad,e.ploshhad_doma].filter((e=>!!e)).join(", "),headerName:"Площадь М²",width:()=>200},{type:St.Compute,sortable:!0,field:"adres",compute:e=>[e.strana,e.gorod,e.oblast,e.rajon,e.mahallya,e.ulicza,e.orientir].filter((e=>!!e)).join(", "),headerName:"Адрес",width:()=>250},{type:St.Compute,field:"kategoriya_obekta",sortable:!0,compute:e=>{var t;return(null==(t=e.kategoriya_obekta)?void 0:t.join(", "))||""},headerName:"Категория",width:()=>200},{type:St.Compute,isVisible:({payload:e})=>e.permissions.hasOwnerPricePermission,field:"czena_prodazha",compute:async e=>await os.exchangeService.getApartmentProdPriceLabel(e),headerName:"Цена (Продажа)",width:()=>200},{type:St.Compute,field:"czena_arenda",isVisible:({payload:e})=>e.permissions.hasOwnerPricePermission,sortable:!0,compute:async e=>await os.exchangeService.getApartmentRentPriceLabel(e),headerName:"Цена (Аренда)",width:()=>200},{type:St.Compute,sortable:!0,field:"istochnik",compute:e=>e.istochnik||"",headerName:"Источник",width:()=>150},{type:St.Compute,sortable:!1,field:"status",headerName:"Статус",compute:async({id:e})=>await os.dealViewService.readStatusByApartmentId(e),width:()=>150},{type:St.Compute,isVisible:({payload:{permissions:e}})=>e.hasFioPermission,sortable:!1,field:"fio",compute:async({contact_id:e})=>{const t=await os.contactViewService.tryRead(e);return t?t.fio:""},headerName:"Ф.И.О Контакта",width:()=>200},{type:St.Compute,isVisible:({payload:{permissions:e}})=>e.hasPreviewModeDisabled,sortable:!1,field:"telefon",element:({id:e,contact_id:t})=>se(xt,{payload:e,condition:e=>os.permissionRequestService.getOwnerContactPermissionByApartmentId(e),Loading:"Загрузка",Else:"Скрыто",children:se(ye,{payload:t,children:async e=>{const t=await os.contactViewService.tryRead(e);return t?t.telefon:""}})}),headerName:"Номер телефона",width:()=>200},{type:St.Compute,field:"$createdAt",headerName:"Дата создания",compute:({$createdAt:e})=>n(e).format("DD/MM/YYYY"),sortable:!0,width:()=>200},{type:St.Compute,field:"$updatedAt",sortable:!0,headerName:"Дата обновления",compute:({$updatedAt:e})=>n(e).format("DD/MM/YYYY"),width:()=>200}],mc={"Категория объекта":"📌","Подкатегория объекта":"📌","Название ЖК":"👷","Тип недвижимости":"🏗️","Район":"📍","Адрес":"🛣️","Ориентир":"🚏","Метро":"🚊","Количество комнат":"🚪","Количество спален":"🛏️","Количество соток":"🏡","Этаж":"🪜","Этажность":"🏢","Бассейн":"🏊","Общая площадь М²":"📐","Площадь дома М²":"📐","Состояние ремонта":"⚒️","Назначение объекта":"✅","Расположение объекта":"🏫","Состояние объекта":"📊","Примечание":"💡","Тип сделки":"🔹"},uc=(e,t,a)=>{const{isVisible:i=(()=>!0)}=e;if(!i(t,a)){if(e.fields)for(const i of e.fields)i.isVisible=()=>!1,uc(i,t,a);e.child&&(e.child.isVisible=()=>!1,uc(e.child,t,a))}},pc=async(e,t,a)=>{let i="";e.opisanie&&(i+="<blockquote>".concat(e.opisanie,"</blockquote>")),i+="<br>";for(const[l,r]of t.entries())i+="<figure>",i+='<img src="'.concat(r,'" />'),i+="<figcaption><em>Изображение".concat(wa.nbsp).concat(l+1,"</em></figcaption>"),i+="</figure>";i+="<br>",i+=await(async(e,t)=>{let a="",i=h.cloneDeep(om);i=Te(i),i.forEach((a=>uc(a,e,t)));const o=[];for(const r of i){const{title:a,isVisible:i=(()=>!0),compute:l}=r;i(e,t)&&l&&a&&"Источник"!==a&&"Категория объекта"!==a&&"Подкатегория объекта"!==a&&"Тип клиента"!==a&&"Статус клиента"!==a&&"Лояльность клиента"!==a&&"Фактический адрес"!==a&&"Серия и номер паспорта"!==a&&"Дата выдачи паспорта"!==a&&"ПИНФЛ"!==a&&"ИНН"!==a&&"Кадастровый номер объекта"!==a&&"Кадастровый номер земли"!==a&&"Телефон"!==a&&"Email"!==a&&"№ дома"!==a&&"№ квартиры"!==a&&"Код домофона"!==a&&"Подъезд №"!==a&&o.push(r)}o.sort((({title:e=""},{title:t=""})=>(h.get(mc,t)?1:0)-(h.get(mc,e)?1:0)));const l=o.findIndex((({title:e=""})=>!h.get(mc,e)));for(const[r,{title:n,compute:s}]of o.entries())r===l&&(a+="<br>"),s&&n&&(a+="<li><p>".concat(h.get(mc,n)||"","<b>").concat(n,":").concat(wa.nbsp,"</b>").concat(await s(e,t),"</p></li>"));return a+="<br>",a})(e,a),i+="<p>",i+=await(async e=>{const t=await os.apartmentViewService.read(e);let a="";const i=e=>"uzs"===e?"сум":"у.е.";let o=!1;return ze(t.kategoriya_obekta,"Коммерческая")?(t.prodazha&&t.prod_kom_startovaya_czena&&(a+="<p>💵 <b>Продажа:".concat(wa.nbsp,"</b> ").concat(t.prod_kom_startovaya_czena," ").concat(i(t.prod_kom_startovaya_czena_valyuta),"</p>"),o=!0),t.arenda&&t.rent_kom_startovaya_czena&&(a+="<p>🔑 <b>В аренду:".concat(wa.nbsp,"</b> ").concat(t.rent_kom_startovaya_czena," ").concat(i(t.rent_kom_startovaya_czena_valyuta)),t.rent_kom_komissiya_agenstva&&(a+=" (Есть комиссия)"),a+="</p>",o=!0)):ze(t.kategoriya_obekta,"Жилая","От застройщика")&&(t.prodazha&&t.prod_startovaya_czena&&(a+="<p>💵 <b>Продажа:".concat(wa.nbsp,"</b> ").concat(t.prod_startovaya_czena," ").concat(i(t.prod_startovaya_czena_valyuta),"</p>"),o=!0),t.arenda&&t.rent_startovaya_czena&&(a+="<p>🔑 <b>В аренду:".concat(wa.nbsp,"</b> ").concat(t.rent_startovaya_czena," ").concat(i(t.rent_startovaya_czena_valyuta)),t.rent_komissiya_agenstva&&(a+=" (Есть комиссия)"),a+="</p>",o=!0)),o&&(a+="\n\n"),a})(e.id),i+="</p>",i+="<br>";const o={YouTube:await os.dictService.getYoutubePrimaryLink(),Instagram:await os.dictService.getInstagramPrimaryLink(),Facebook:await os.dictService.getFacebookPrimaryLink(),Telegram:await os.dictService.getTelegramPrimaryLink()};return i+="<br>",i+="<p>",i+=Object.entries(o).filter((([,e])=>e)).map((([e,t])=>"<a href='".concat(t,"'>").concat(e,"</a>"))).join("".concat(wa.nbsp,"|").concat(wa.nbsp)),i+="</p>",i};const yc=e=>{const t=document.createElement("canvas"),a=t.getContext&&t.getContext("2d");let i,o,l,r,n={r:0,g:0,b:0},s=0;if(l=t.height=e.naturalHeight||e.offsetHeight||e.height,o=t.width=e.naturalWidth||e.offsetWidth||e.width,!a)return null;a.drawImage(e,0,0),i=a.getImageData(0,0,o,l),r=i.data.length;for(var d=0;d<r;d+=4)n.r+=i.data[d],n.g+=i.data[d+1],n.b+=i.data[d+2],s++;return n.r=Math.floor(n.r/s),n.g=Math.floor(n.g/s),n.b=Math.floor(n.b/s),function({r:e,g:t,b:a},i){return e=(e=Math.floor(e*(100+i)/100))<255?e:255,t=(t=Math.floor(t*(100+i)/100))<255?t:255,a=(a=Math.floor(a*(100+i)/100))<255?a:255,e=Math.round(e),t=Math.round(t),a=Math.round(a),"#"+(1==e.toString(16).length?"0"+e.toString(16):e.toString(16))+(1==t.toString(16).length?"0"+t.toString(16):t.toString(16))+(1==a.toString(16).length?"0"+a.toString(16):a.toString(16))}(n,-40)},hc=1024,bc=async(e,t=!1)=>{try{const a=await(async(e,t=!1)=>{const a=document.createElement("img");return a.src=e,a.crossOrigin="anonymous",Promise.resolve().then((()=>new Promise(((e,t)=>{a.addEventListener("load",(()=>e())),a.addEventListener("error",(()=>t()))})))).then((()=>new Promise((async(e,i)=>{const o=document.createElement("canvas");o.width=Math.max(a.naturalHeight,a.naturalWidth),o.height=Math.max(a.naturalHeight,a.naturalWidth);const l=o.getContext("2d");if(!l)return void i("there's an error");if(!t){const e=yc(a);l.fillStyle=e||"#ccc",l.fillRect(0,0,o.width,o.height)}l.translate(o.width/2,o.height/2),l.drawImage(a,-a.width/2,-a.height/2),l.translate(0,0);const r=await createImageBitmap(o);o.width=hc,o.height=hc,l.drawImage(r,0,0,hc,hc),o.toBlob((t=>{t?e(t):i("there's an error")}))}))))})(e,t);return a?URL.createObjectURL(a):null}catch(a){return null}},vc=Sa.create({body:{fontFamily:"Roboto",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start",paddingTop:35,paddingBottom:65,paddingHorizontal:35},header:{minWidth:"15%",maxWidth:"15%",paddingBottom:20},logo:{width:"auto",height:"auto"},content:{flex:1,width:"100%",maxHeight:"80%",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start"},apartmentNumber:{position:"absolute",fontSize:12,bottom:30,left:0,right:0,textAlign:"center",color:"grey"},image:{objectFit:"contain",height:"auto",width:"auto"},textContainer:{display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start"},imageContainer:{paddingVertical:10,marginVertical:10,display:"flex",alignContent:"center",justifyContent:"center",width:"100%"},stretchContainer:{flex:1},inline:{display:"flex",flexDirection:"row"}}),_c=({title:e,payload:t})=>async a=>{const i=await Promise.all(a.map((async e=>{const t=e.apartment_images||[];return{data:e,images:(await Promise.all(t.map((async(e,t)=>0!==t?null:os.appwriteService.getImageURL(e))))).filter((e=>e))}}))),o=await(async(e,t)=>{const a=await(async()=>{const{logo_file_id:a}=await os.settingsViewService.getValue(),i=a?await os.appwriteService.getImageURL(a):null;return se(Va,{children:await Promise.all(e.map((async e=>{const a=xa(om,e.data,t),o=await os.exchangeService.getApartmentRentPriceLabel(e.data),l=await os.exchangeService.getApartmentProdPriceLabel(e.data);return se(Aa,{size:"A4",style:vc.body,children:[!!i&&se(Ta,{style:vc.header,children:se(Fa,{style:vc.logo,src:i})}),se(Ta,{style:vc.content,children:[se(Ta,{style:vc.textContainer,children:[await Promise.all(a.map((async({title:a,name:i,compute:o})=>{let l="";return a?"Источник"===a||"Описание"===a||"Название ЖК"===a?null:(i&&(l=h.get(e.data,i),l=Array.isArray(l)?l.join(", "):l),o&&(l=await o(e.data,t),l=Array.isArray(l)?l.join(", "):l),l?se(Se,{children:se(Ta,{style:vc.inline,children:[se(Ca,{style:{fontSize:12,fontWeight:"normal"},children:[a,":",wa.nbsp]}),se(Ca,{style:{fontSize:12,fontWeight:"bold"},children:l})]})}):null):null}))),!!o&&se(Ta,{style:vc.inline,children:[se(Ca,{style:{fontSize:12,fontWeight:"normal"},children:["Цена (Аренда):",wa.nbsp]}),se(Ca,{style:{fontSize:12,fontWeight:"bold"},children:o})]}),!!l&&se(Ta,{style:vc.inline,children:[se(Ca,{style:{fontSize:12,fontWeight:"normal"},children:["Цена (Продажа):",wa.nbsp]}),se(Ca,{style:{fontSize:12,fontWeight:"bold"},children:l})]})]}),e.images[0]&&se(Ta,{style:vc.imageContainer,children:se(Fa,{style:vc.image,src:e.images[0]})}),se(Ta,{style:vc.stretchContainer})]}),se(Ca,{style:vc.apartmentNumber,fixed:!0,children:"Объект №".concat(e.data.index)})]})})))})})();return await za(a).toBlob()})(i,t),l=URL.createObjectURL(o);os.routerService.subscribeLeave((()=>URL.revokeObjectURL(l))),pt(l,"".concat(e||n().format("DD/MM/YYYY HH:mm"),".pdf"))},gc=Nn()((e=>({root:{display:"flex",alignItems:"center",justifyContent:"stretch",padding:e.spacing(1),marginBottom:e.spacing(1),gap:e.spacing(1)},stretch:{flex:2}}))),fc=[{action:"pdf-action",isDisabled:e=>!e.length,label:"Скачать pdf"},{action:"telegraph-action",isDisabled:e=>!e.length,label:"Опубликовать в Telegraph"}],kc=({payload:e})=>{const{classes:t}=gc(),{loading:a}=Yt(),{selectedRows:i}=La(),o=Ze(i),l=Ia({large:!0,title:"Предпросмотр",canCancel:!1}),r=(({payload:e})=>async t=>{const a=t.apartment_images||[],i=await Promise.all(a.map((async e=>{const a=await os.appwriteService.getImageURL(e);let i=await On(a,"№".concat(t.index));if(i=i?await bc(i):i,i){const e=await fetch(i).then((e=>e.blob()));URL.revokeObjectURL(i);const t=await os.appwriteService.uploadBlob(e,"__DANGEROUS_WILL_BE_REMOVED_TELEGRAPH__.png");return await os.appwriteService.getFileURL(t)}return os.appwriteService.getFileURL(e)})));let o="🔥 ";t.prodazha&&!t.arenda&&(o+="Продажа! "),t.arenda&&!t.prodazha&&(o+="Аренда! "),t.zagolovok&&(o+="".concat(t.zagolovok," "));const l=await os.publishService.publishTelegraph(o,await pc(t,i,e));return console.log({title:o,result:l}),l.response})({payload:e}),n=_c({title:e.zagolovok,payload:e}),{handleLoadStart:s,handleLoadEnd:d}=Oe({history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)}),{execute:c}=Re((async e=>{const t=[];for(const i of e.filter((e=>e.zagolovok)))t.push({label:i.zagolovok,link:await r(i)});const a=t.filter((({link:e})=>e)).map((({label:e,link:t})=>"".concat(e,"\n").concat(t,"\n"))).join("\n");await l({value:a}).toPromise(),Ma(a),await os.alertService.notify("Сообщение скопировано в буфер обмена!")}),{onLoadStart:s,onLoadEnd:d,fallback:os.errorService.handleGlobalError}),{execute:m}=Re((async e=>{await n(e)}),{onLoadStart:s,onLoadEnd:d,fallback:os.errorService.handleGlobalError});return se(et,{className:t.root,children:[se(Ae,{className:t.stretch,fontWeight:"bold",children:"Подходящие объекты"}),se(ot,{startIcon:se(Ba,{}),disabled:a||!i.length,variant:"outlined",onClick:async()=>{await m(o.current)},children:"Скачать PDF"}),se(na,{disabled:a,payload:i,options:fc,onAction:async e=>{"telegraph-action"===e&&await c(o.current),"pdf-action"===e&&await m(o.current)}})]})},wc=new Set(["obshhaya_ploshhad","obshhaya_ploshhad_ot","obshhaya_ploshhad_do","ploshhad_doma","ploshhad_doma_ot","ploshhad_doma_do","system_metro","system_rajon","system_mahallya","system_rent_price","system_rent_price_ot","system_rent_price_do","system_rent_kom_price","system_rent_kom_price_ot","system_rent_kom_price_do","system_prod_price","system_prod_price_ot","system_prod_price_do","system_prod_kom_price","system_prod_kom_price_ot","system_prod_kom_price_do"]),Sc=e=>{const t={};for(const a of Object.keys(e||{}))wc.has(a)&&(t[a]=e[a]);return t},zc=({fieldData:e,payload:t})=>{const a=We(e),i=Da(),{render:o,pickData:l}=He({title:"Предпросмотр",AfterTitle:({onClose:e})=>se(ye,{children:async()=>{const t=await os.featureService.hasFeature("redaktirovanie_obekta");return se(we,{direction:"row",gap:1,children:[se(Ra,{sx:{opacity:.8},disabled:!t,onClick:()=>{var e;os.routerService.push("/apartment_edit/".concat(null==(e=i.data)?void 0:e.$id),{viewRedirectFlag:!0})},children:se(ja,{})}),se(_e,{size:"small",onClick:e,children:se(Ue,{})})]})}}),outlinePaper:!0,fullScreen:!0,handler:()=>i.data,payload:()=>({...t,hideAutofindFlag:!0}),features:t.permissions,submitLabel:"Ок",fields:om});re.useEffect((()=>i.subscribe((()=>{l()}))),[]);const{columns:r}=ed({storageKey:"apartment_columns",columns:cc}),n=re.useMemo((()=>{const t=Sc(e);return os.loggerService.log("bid_card_fields filterData",{filterData:t}),nc(t)}),[e]),s=re.useMemo((()=>nc({system_metro:n.system_metro,system_rajon:n.system_rajon,system_mahallya:n.system_mahallya,system_rent_price_ot:n.system_rent_price_ot,system_rent_price_do:n.system_rent_price_do,system_rent_kom_price_ot:n.system_rent_kom_price_ot,system_rent_kom_price_do:n.system_rent_kom_price_do,system_prod_price_ot:n.system_prod_price_ot,system_prod_price_do:n.system_prod_price_do,system_prod_kom_price_ot:n.system_prod_kom_price_ot,system_prod_kom_price_do:n.system_prod_kom_price_do})),[n]);return se(me,{sx:{pointerEvents:"all",height:"max(60vh, 350px)",mb:5},children:[se(Jt,{withLoader:!0,withInitialLoader:!0,reloadSubject:a,selectionMode:$t.Multiple,AfterOperationList:kc,handler:(e,...t)=>os.apartmentViewService.paginate({...n,...s,_accessLevel:5,_mode:"audit"},...t),isRowDisabled:({system_access_level:e})=>e>t.accessLevel,onRowClick:e=>i.next(e),columns:r,payload:()=>({...t,zagolovok:e.zagolovok})}),o()]})},xc=({payload:e,features:t})=>{const a=Xs(),i=ne(),{columns:o}=ed({storageKey:"apartment_columns",columns:Ns}),{pickData:l,render:r,open:n}=Ut({title:"Выбор объекта",AfterTitle:({onClose:e})=>se(_e,{size:"small",onClick:e,children:se(Ue,{})}),withSearch:!0,withLoader:!0,withSingleChip:!0,noInitialFilters:!0,fetchDebounce:$o,reloadSubject:os.userViewService.reloadSubject,selectionMode:$t.Single,onSubmit:e=>(i.next(e),!0),AfterOperationList:hd,filterLabel:"Выбрать объект недвижимости",filters:Ks,columns:o,handler:a,payload:e,features:t,chips:Os});return{pickData:l,render:r,resultSubject:i,open:n}},Ac=[{type:o.Group,style:{minWidth:540},fields:[{type:o.Combo,title:"Тип сделки",isInvalid:e=>e.deal_type?null:"Укажите тип сделки",name:"deal_type",map:(e,t)=>{const{prod_czena_ot:a,prod_startovaya_czena_ot:i=a,prod_czena_do:o,prod_startovaya_czena_do:l=o,prod_kom_czena_ot:r,prod_kom_startovaya_czena_ot:n=r,prod_kom_czena_do:s,prod_kom_startovaya_czena_do:d=s,rent_czena_ot:c,rent_startovaya_czena_ot:m=c,rent_czena_do:u,rent_startovaya_czena_do:p=u,rent_kom_czena_ot:y,rent_kom_startovaya_czena_ot:b=y,rent_kom_czena_do:v,rent_kom_startovaya_czena_do:_=v,prod_czena_valyuta:g="usd",rent_czena_valyuta:f="usd"}=t.data;return e.deal_type&&"Продажа"===e.deal_type[0]&&(h.set(e,"price_ot",i||n),h.set(e,"price_do",l||d),h.set(e,"unit",[g||"usd"])),e.deal_type&&"Аренда"===e.deal_type[0]&&(h.set(e,"price_ot",m||b),h.set(e,"price_do",p||_),h.set(e,"unit",[f||"usd"])),e},itemList:()=>[...yr]},{type:o.Box,isVisible:({deal_type:e,price_type:t})=>!!e&&"range"===t,style:{display:"grid",gridTemplateColumns:"1fr 1fr 125px"},fields:[{type:o.Text,outlined:!1,placeholder:"Не указано",labelShrink:!0,name:"price_ot",title:"Цена От (Итог)"},{type:o.Text,outlined:!1,placeholder:"Не указано",labelShrink:!0,name:"price_do",title:"Цена До (Итог)"},{type:o.Combo,noDeselect:!0,fieldBottomMargin:"0",title:"Валюта",placeholder:"USD",itemList:["usd","uzs"],tr:e=>"uzs"===e?"SUM":"USD",defaultValue:"usd",outlined:!1,name:"unit"}]},{type:o.Text,fieldBottomMargin:"1",placeholder:"Введите комментарий",inputRows:3,labelShrink:!0,name:"comment",title:"Комментарий"},{hidden:!0,type:o.Radio,fieldBottomMargin:"0",name:"price_type",radioValue:"unset",defaultValue:"unset",title:"Цена не указана"},{hidden:!0,type:o.Radio,fieldBottomMargin:"0",name:"price_type",radioValue:"range",title:"Промежуток"}]}],Tc=[{type:o.Choose,fieldBottomMargin:"1",isInvalid:e=>e.target_apartment_id?null:"Укажите объект недвижимости",choose:async(e,t)=>{t.pickApartment(e.target_apartment_id?[e.target_apartment_id]:[]);const a=await t.apartmentResultSubject.toPromise();if(a&&a.length){const[e]=a;return e}return null},tr:async e=>{const t=await os.apartmentViewService.tryRead(e);return(null==t?void 0:t.zagolovok)||(null==t?void 0:t.$id)||""},name:"target_apartment_id",title:"Выберите объект",placeholder:"Не выбрано"},{type:o.Text,fieldBottomMargin:"1",placeholder:"Введите комментарий",inputRows:3,labelShrink:!0,name:"comment",title:"Комментарий"},{type:o.Radio,fieldBottomMargin:"0",title:"Закрытая сделка",name:"status",radioValue:"Закрытая сделка",defaultValue:"Закрытая сделка"},{type:o.Radio,fieldBottomMargin:"0",title:"Сделка сорвана",name:"status",radioValue:"Сделка сорвана"}],Fc=[{action:"deal-end-action",isDisabled:({activeItem:e})=>!e,label:"Завершить сделку"}],Cc=Nn()((e=>({row:{display:"grid",gridTemplateColumns:"1fr 1fr auto",alignItems:"flex-end"},input:{paddingRight:"4px",paddingBottom:"4px"},onlyInput:{maxWidth:"500px",width:"100%"},select:{margin:"0 5px"},checkbox:{}}))),Vc=({className:e,style:t,sx:a,value_ot:i="",value_do:o="",unit:l="usd",title:r,readonly:n,onChange:s})=>{const{reloadTrigger:d,doReload:c}=ca(),m=re.useMemo((()=>(e=>"uzs"===e?"uzs":"usd")(l)),[l]),u=We(n);re.useEffect((()=>u.subscribe(c)),[]);return se(Se,{children:[se(Ae,{sx:{mb:-2.5},variant:"caption",children:r}),se("div",{}),se("div",{}),se(ta,{type:"number",defaultValue:i,value:n?i:void 0,className:e,style:t,sx:a,onKeyDown:e=>{Ed(e.key)||e.preventDefault()},onChange:({target:e})=>{s({unit:m,value_do:o,value_ot:e.value})},variant:"standard",fullWidth:!0,InputProps:{startAdornment:se(aa,{sx:{userSelect:"none",pointerEvents:"none"},position:"start",children:se(me,{sx:{height:20,width:20,display:"flex",alignItems:"center",justifyContent:"center"},children:se(Ae,{textTransform:"lowercase",variant:"caption",children:"От"})})})}},d),se(ta,{type:"number",defaultValue:o,value:n?o:void 0,className:e,style:t,sx:a,onKeyDown:e=>{Ed(e.key)||e.preventDefault()},onChange:({target:e})=>{s({unit:m,value_do:e.value,value_ot:i})},variant:"standard",fullWidth:!0,InputProps:{startAdornment:se(aa,{sx:{userSelect:"none",pointerEvents:"none"},position:"start",children:se(me,{sx:{height:20,width:20,display:"flex",alignItems:"center",justifyContent:"center"},children:se(Ae,{textTransform:"lowercase",variant:"caption",children:"До"})})})}},d),se(me,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:55,width:55},children:se(_e,{size:"small",onClick:()=>{"usd"===m&&s({value_ot:i,value_do:o,unit:"uzs"}),"uzs"===m&&s({value_ot:i,value_do:o,unit:"usd"})},children:["usd"===m&&se(ma,{}),"uzs"===m&&se(me,{sx:{position:"relative",height:36,width:36},children:se("span",{style:{fontWeight:"bold",position:"absolute",top:"50%",left:"50%",fontSize:"12px",transform:"translate(-50%, -50%)"},children:"SUM"})})]})})]})},Lc=({className:e,style:t,sx:a,title:i,readonly:o,value:l="",unit:r="%",onChange:n})=>{const{reloadTrigger:s,doReload:d}=ca(),c=re.useMemo((()=>(e=>"1"===e?"1":"%")(r)),[r]),m=We(o);re.useEffect((()=>m.subscribe(d)),[]);return se(ta,{type:"number",label:i,className:e,style:t,sx:a,defaultValue:l,value:o?l:void 0,onKeyDown:e=>{Ed(e.key)||e.preventDefault()},onChange:({target:e})=>{n({unit:c,value:e.value})},variant:"standard",fullWidth:!0,InputProps:{startAdornment:se(aa,{sx:{userSelect:"none",cursor:"pointer"},onClick:()=>{"1"===c&&n({unit:"%",value:l}),"%"===c&&n({unit:"1",value:l})},position:"start",children:["%"===c&&se(ua,{}),"1"===c&&se(pa,{})]})}})},Ic={},Mc=["komissiya_agenstva_unit","czena_sobstvennika_ot","czena_sobstvennika_do","startovaya_czena_valyuta","komissiya_menedzhera","komissiya_agenstva","komissiya_menedzhera_unit","startovaya_czena_ot","startovaya_czena_do","torg"],Bc=({isViewMode:e,value:t=Ic,title:a,prefix:i,readonly:o,onChange:l})=>{const{classes:r}=Cc(),n=re.useCallback((()=>{const e=Object.entries(t).map((([e,t])=>[Pe(e,i),t])).filter((([e])=>Mc.includes(e)));return Object.fromEntries(e)}),[t]),[s,d]=re.useState(n),c=re.useMemo((()=>h.debounce(l,0)),[]),{resetWatcher:m}=ea((()=>{const e=Object.entries(s).map((([e,t])=>[i+e,t]));c(Object.fromEntries(e))}),[s]);return ea((()=>{m(),d(n)}),[t]),re.useEffect((()=>()=>{c.flush()}),[]),se(Se,e?{children:[se(Ae,{variant:"h6",fontWeight:"bold",children:a}),se(Vc,{title:"Стартовая цена",readonly:o,unit:s.startovaya_czena_valyuta,value_ot:s.startovaya_czena_ot,value_do:s.startovaya_czena_do,onChange:({unit:e,value_ot:t,value_do:a})=>d((i=>({...i,startovaya_czena_valyuta:e,startovaya_czena_ot:t,startovaya_czena_do:a}))),className:r.onlyInput})]}:{children:[se(Ae,{variant:"h6",fontWeight:"bold",children:a}),se(me,{className:r.row,children:[se(Vc,{title:"Бюджет клиента",readonly:o,unit:s.startovaya_czena_valyuta,value_ot:s.czena_sobstvennika_ot,value_do:s.czena_sobstvennika_do,onChange:({unit:e,value_ot:t,value_do:a})=>d((i=>({...i,startovaya_czena_valyuta:e,czena_sobstvennika_ot:t,czena_sobstvennika_do:a}))),className:r.input}),se(Vc,{title:"Стартовая цена",readonly:o,unit:s.startovaya_czena_valyuta,value_ot:s.startovaya_czena_ot,value_do:s.startovaya_czena_do,onChange:({unit:e,value_ot:t,value_do:a})=>d((i=>({...i,startovaya_czena_valyuta:e,startovaya_czena_ot:t,startovaya_czena_do:a}))),className:r.input})]}),se(me,{className:r.row,children:se(ya,{className:r.checkbox,control:se(pe,{checked:s.torg}),onChange:()=>d((e=>({...e,torg:!e.torg}))),label:"Торг"})}),!e&&se(me,{className:r.row,children:[se(Lc,{readonly:o,title:"Комиссия агенства",unit:s.komissiya_agenstva_unit,value:s.komissiya_agenstva,onChange:({unit:e,value:t})=>d((a=>({...a,komissiya_agenstva_unit:e,komissiya_agenstva:t}))),className:r.input}),se(Lc,{readonly:o,title:"Комиссия менеджера",unit:s.komissiya_menedzhera_unit,value:s.komissiya_menedzhera,onChange:({unit:e,value:t})=>d((a=>({...a,komissiya_menedzhera_unit:e,komissiya_menedzhera:t}))),className:r.input})]})]})},Dc=54,Rc=Nn()((e=>({root:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",overflow:"hidden",paddingBottom:"10px"},typogrphy:{padding:"10px"},container:{overflowX:"hidden",overflowY:"scroll",padding:e.spacing(1),flex:1},appBarRoot:{background:e.palette.primary.main,maxHeight:Dc,height:Dc,boxShadow:"unset",color:"#000"},tabsRoot:{minHeight:Dc,height:Dc,marginLeft:"0 !important",marginRight:"0 !important"},tabRoot:{minHeight:Dc,height:Dc,color:"#fff"},tabRootTransparent:{minHeight:Dc,height:Dc},tabSelected:{color:"#fff !important"},indicator:{height:6,background:"#0288d1"},indicatorTransparent:{height:6,background:e.palette.primary.main}}))),jc=({sx:e,withTransparentHeader:t,withRentTab:a,withSellTab:i,readonly:o,isViewMode:l=!1,fieldData:r,onChange:n=(()=>{})})=>{const{classes:s}=Rc(),[d,c]=re.useState("rent"),m=re.useMemo((()=>ze(r.kategoriya_obekta,"Жилая","От застройщика")),[r]),u=re.useMemo((()=>ze(r.kategoriya_obekta,"Коммерческая")),[r]);return re.useEffect((()=>{i?c("sell"):a&&c("rent")}),[a,i]),se(et,{className:s.root,sx:{...e,height:"100%"},children:se(ha,{value:d,children:[t&&se(me,{sx:{borderBottom:1,borderColor:"divider",pointerEvents:"all"},children:se(ba,{variant:"fullWidth",classes:{root:s.tabsRoot,indicator:s.indicatorTransparent},onChange:(e,t)=>c(t),children:[i&&se(va,{classes:{root:s.tabRootTransparent},label:"Покупка",value:"sell"}),a&&se(va,{classes:{root:s.tabRootTransparent},label:"Аренда",value:"rent"})]})}),!t&&se(_a,{classes:{root:s.appBarRoot},position:"static",sx:{borderBottom:1,borderColor:"divider",pointerEvents:"all"},children:se(ba,{variant:"fullWidth",classes:{root:s.tabsRoot,indicator:s.indicator},onChange:(e,t)=>c(t),children:[i&&se(va,{classes:{root:s.tabRoot,selected:s.tabSelected},label:"Покупка",value:"sell"}),a&&se(va,{classes:{root:s.tabRoot,selected:s.tabSelected},label:"Аренда",value:"rent"})]})}),i&&se(ga,{className:s.container,sx:{pointerEvents:o?"none":"unset"},value:"sell",children:[m&&se(Bc,{readonly:o,isViewMode:l,title:"Покупка",prefix:"prod_",value:r,onChange:n}),u&&se(Bc,{readonly:o,isViewMode:l,title:"Покупка ком.",prefix:"prod_kom_",value:r,onChange:n})]}),a&&se(ga,{className:s.container,sx:{pointerEvents:o?"none":"unset"},value:"rent",children:[m&&se(Bc,{readonly:o,isViewMode:l,title:"Аренда",prefix:"rent_",value:r,onChange:n}),u&&se(Bc,{readonly:o,isViewMode:l,title:"Аренда ком.",prefix:"rent_kom_",value:r,onChange:n})]})]})})},qc=[{type:o.Paper,isVisible:(e,{hideAutofindFlag:t})=>!t,features:["hasResponsiblePermission"],fieldBottomMargin:"1",fieldRightMargin:"1",columns:"12",fields:[{type:o.Component,element:({id:e,payload:t,features:a,_fieldData:i})=>{const[o,l]=re.useState(null),[r,n]=re.useState(null),s=re.useMemo((()=>({...o,occupiedBy:r})),[o,r]),{pickData:d,render:c,resultSubject:m}=xc({payload:t,features:a}),{loading:u,execute:p}=Re((async()=>{const t=os.appwriteService.currentUser.$id,a=await os.dealHistoryRequestService.readDealStateByBid(e,t),i=await os.dealViewService.findOccupiedByTagetBidId(e);l(a),n(i)}),{onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1),fallback:os.errorService.handleGlobalError}),{handleLoadStart:y,handleLoadEnd:b}=Oe({history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)}),v=Ne({large:!0,title:"Завершение сделки",fields:Tc,payload:()=>({...t,pickApartment:d,apartmentResultSubject:m}),features:a}),_=Ne({large:!0,title:"Начало сделки",fields:Ac,payload:{data:i,...t},features:a});re.useEffect((()=>os.dealHistoryViewService.createSubject.subscribe((t=>{t.bid_id===e&&p()}))),[]),re.useEffect((()=>{p()}),[]);const g=()=>{_().then((async t=>{if(!t)return;const a=t.deal_type?t.deal_type[0]:"";if(!a)return;let i=[],o="";"range"===t.price_type&&(i=[t.price_ot,t.price_do].filter((e=>e)),o=t.unit?t.unit[0]:"usd"),(async(t,a=[],i="usd",o="")=>{let l=!0;y();try{const l=os.appwriteService.currentUser.$id;await os.dealHistoryRequestService.commitBidDealBegin(e,l,t,a,i,o),await p()}catch(r){os.alertService.notify(xn(r)),l=!1}finally{b(l)}})(a,i,o,t.comment)}))},f=async()=>{let t=!0;y();try{const t=os.appwriteService.currentUser.$id;await os.dealHistoryRequestService.commitBidDealReassign(e,t),await p()}catch(a){t=!1}finally{b(t)}},k=t=>{"deal-end-action"===t&&v().then((t=>{t&&(async(t,a,i)=>{let o=!0;y();try{await os.dealRequestService.commitBidDealEnd(e,t,a,i),await p()}catch(l){o=!1}finally{b(o)}})(t.target_apartment_id,t.status,t.comment)}))};return se(we,{style:{pointerEvents:"all"},direction:"column",children:[se(Ae,{variant:"body1",sx:{mt:-.5,mb:1,color:e=>e.palette.action.active,fontWeight:"bold"},children:"Сделка"}),se(we,{direction:"column",gap:"16px",children:[se(we,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[se(ye,{loading:u,Loader:()=>se(we,{direction:"row",gap:"16px",alignItems:"center",children:[se(vt,{variant:"circular",width:40,height:40}),se(we,{children:[se(vt,{sx:{mb:1},variant:"rectangular",width:210,height:20}),se(vt,{variant:"rectangular",width:210,height:20})]})]}),payload:s,children:async e=>{if(e.occupiedBy)return se(Ae,{variant:"body1",children:["Сделка в статусе"," ",se(Ht,{href:"#",onClick:()=>Z("/deal"),children:e.occupiedBy.status})]});if(!(null==e?void 0:e.activeItem))return se(Ae,{variant:"body1",children:"Сделка не создана"});const{first_name:t="Не указано",user_role:a,avatar:i=null}=await os.userViewService.read(e.activeItem.user_id),o=i?await os.appwriteService.getImageURL(i):"",l=await os.dictService.getUserRoles();return se(we,{direction:"row",gap:"16px",alignItems:"center",children:[se(_t,{alt:t,src:o}),se(we,{direction:"column",children:[se(Ae,{variant:"body1",children:t}),se(Ae,{variant:"caption",style:{fontSize:"14px"},children:(null==a?void 0:a.length)?h.get(l,a[0])||a[0]:"Не указано"})]})]})}}),se(we,{direction:"row",gap:1,alignItems:"center",children:[se(ye,{loading:u,Loader:()=>se(vt,{variant:"rectangular",sx:{borderRadius:"4px"},width:100,height:35}),payload:s,children:async t=>{if(t.occupiedBy)return null;if(await os.permissionRequestService.hasReassignDelayFlagByBidId(e))return se(ot,{disabled:!0,variant:"contained",children:"Сделка активна"});if(null==t?void 0:t.activeItem){const e=os.appwriteService.currentUser.$id,a=t.activeItem.user_id===e;return se(ot,{disabled:a,onClick:f,variant:"contained",children:a?"Сделка создана":"Забрать сделку"})}return se(ot,{onClick:g,variant:"contained",children:"Создать сделку"})}}),se(ye,{loading:u,Loader:()=>se(vt,{variant:"circular",width:40,height:40}),payload:s,children:async e=>se(na,{transparent:!0,options:Fc,payload:e,onAction:k})})]})]}),se(ye,{loading:u,Loader:()=>se(qa,{max:Number.POSITIVE_INFINITY,style:{marginRight:"auto"},children:[se(vt,{variant:"circular",width:28,height:28}),se(vt,{variant:"circular",width:28,height:28}),se(vt,{variant:"circular",width:28,height:28})]}),payload:s,children:async e=>{var t;if(!(null==(t=null==e?void 0:e.reassign)?void 0:t.length))return null;const a=await Promise.all(e.reassign.filter(((e,t,a)=>a.findIndex((({user_id:t})=>t===e.user_id))==t)).map((async({user_id:e})=>{const t=await os.userViewService.tryRead(e);let a="";return(null==t?void 0:t.avatar)&&(a=await os.appwriteService.getImageURL(t.avatar)),se(_t,{style:{height:"28px",width:"28px"},alt:null==t?void 0:t.email,src:a})})));return se(qa,{max:Number.POSITIVE_INFINITY,style:{marginRight:"auto"},children:a})}})]}),c()]})}}]},{type:o.Paper,features:["hasResponsiblePermission"],fieldBottomMargin:"1",fieldRightMargin:"1",columns:"12",innerPadding:"0",fields:[{type:o.Component,element:({system_created_by:e,system_only_for_owner:t,system_allowance:a})=>{const{classes:i}=sc();return se(we,{style:{pointerEvents:"all"},direction:"column",children:[se(Ae,{variant:"body1",sx:{m:2,color:e=>e.palette.action.active,fontWeight:"bold"},children:"Доступ"}),se(rt,{disablePadding:!0,dense:!0,children:se(ye,{deps:[t,a],children:async()=>{const o=[];return e&&o.push(e),a&&a.forEach((e=>o.push(e))),o.length?se(Se,{children:await Promise.all(o.filter(((e,t,a)=>a.indexOf(e)==t)).map((async(a,o)=>{var l;const r=await os.userViewService.read(a),n=r.avatar?await os.appwriteService.getImageURL(r.avatar):"",s=await os.dictService.getUserRoles(),d=[r.last_name,r.first_name,r.middle_name].filter((e=>e)).join(" "),c=(null==(l=r.user_role)?void 0:l.length)?h.get(s,r.user_role[0])||r.user_role[0]:"Не указано";return se(ht,{className:ue({[i.listItemAccient]:o%2==0}),children:[se(bt,{children:se(_t,{src:n})}),se(dt,{primary:d,secondary:r.phone||c}),a===e&&se(we,{gap:1,direction:"row",children:[se(fa,{label:"Создал заявку",color:"info"}),!!t&&se(fa,{label:"Эксклюзив",color:"warning"})]})]})})))}):se(Ae,{sx:{m:2,mt:-.5},children:"Все пользователи"})}})})]})}}]},{type:o.Group,columns:"12",fieldRightMargin:"0",fieldBottomMargin:"0",isVisible:e=>ys(e,"kategoriya_obekta","podkategoriya_obekta","arenda","prodazha","istochnik"),fields:[{type:o.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Основная информация"})},{type:o.Text,isVisible:e=>ys(e,"zagolovok"),outlined:!1,name:"zagolovok",title:"Заголовок",placeholder:"Введите текст"},{type:o.Text,isVisible:e=>ys(e,"kategoriya_obekta"),outlined:!1,compute:({kategoriya_obekta:e})=>e||"",title:"Категория объекта"},{type:o.Text,isVisible:e=>!!ze(e.kategoriya_obekta,"Жилая")||!!ze(e.kategoriya_obekta,"Коммерческая"),outlined:!1,compute:({podkategoriya_obekta:e})=>e||"Не задано",title:"Подкатегория объекта"},{type:o.Text,isVisible:e=>ys(e,"arenda","prodazha"),outlined:!1,compute:({arenda:e,prodazha:t})=>t&&e?"Покупка, Аренда":t?"Покупка":e?"Аренда":"Не задано",title:"Тип сделки"},{type:o.Text,isVisible:e=>ys(e,"strana"),outlined:!1,columns:"6",compute:({strana:e})=>e||"",title:"Страна"},{type:o.Text,isVisible:e=>ys(e,"oblast"),outlined:!1,columns:"6",compute:({oblast:e})=>e||"",title:"Область"},{type:o.Text,isVisible:e=>ys(e,"gorod"),outlined:!1,compute:({gorod:e})=>e||"",title:"Город"},{type:o.Text,isVisible:e=>ys(e,"ulicza"),outlined:!1,compute:({ulicza:e})=>{const t=[e?e.toLowerCase().includes("улица")?e:"улица ".concat(e):null].filter((e=>e));return t.length?t.flatMap((e=>e)).join(", "):"Не указан"},title:"Адрес"},{type:o.Text,isVisible:e=>ys(e,"rajon"),outlined:!1,compute:({rajon:e})=>e||"",title:"Район"},{type:o.Text,isVisible:e=>ys(e,"mahallya"),outlined:!1,compute:({mahallya:e})=>e||"",title:"Махалля"},{type:o.Text,isVisible:e=>ys(e,"orientir"),outlined:!1,compute:({orientir:e})=>e||"",title:"Ориентир"},{type:o.Text,isVisible:e=>ys(e,"metro"),outlined:!1,compute:({metro:e})=>e||"",title:"Метро"},{type:o.Fragment,isVisible:e=>{let t=!1;return t=t||ze(e.podkategoriya_obekta,"Квартиры"),t},fields:[{type:o.Text,isVisible:e=>ys(e,"nomer_doma"),features:["hasBidHouseNumberPermission"],columns:"6",outlined:!1,name:"nomer_doma",title:"№ дома"},{type:o.Text,isVisible:e=>ys(e,"nomer_kvartiry"),features:["hasBidHouseNumberPermission"],columns:"6",outlined:!1,name:"nomer_kvartiry",title:"№ квартиры"}]},{type:o.Fragment,isVisible:e=>{let t=!1;return t=t||null!==e.kategoriya_obekta,t=t||null!==e.podkategoriya_obekta,t=t&&!ze(e.podkategoriya_obekta,"Квартиры"),t},fields:[{type:o.Text,isVisible:e=>ys(e,"nomer_doma"),features:["hasBidHouseNumberPermission"],outlined:!1,name:"nomer_doma",title:"№ дома"}]},{type:o.Text,isVisible:e=>ys(e,"istochnik"),outlined:!1,compute:({istochnik:e})=>e||"",title:"Источник"},{type:o.Text,isVisible:e=>{let t=!0;return t=t&&ze(e.podkategoriya_obekta,"Квартиры"),t=t&&ze(e.kategoriya_obekta,"Коммерческая","Жилая"),$(t,ys(e,"tip_nedvizhimosti"))},outlined:!1,compute:({tip_nedvizhimosti:e})=>e||"",title:"Тип недвижимости"},{type:o.Text,isVisible:e=>{let t=!0;return t=t&&ze(e.podkategoriya_obekta,"Квартиры"),t=t&&ze(e.kategoriya_obekta,"Коммерческая","Жилая"),$(t,ys(e,"nazvanie_zhk"))},outlined:!1,compute:({nazvanie_zhk:e})=>e||"",title:"Название ЖК"},{type:o.Component,isVisible:e=>ys(e,"tip_klienta"),fieldBottomMargin:"2",element:({contact_id:e})=>se(ye,{payload:e,Loader:()=>se(ta,{fullWidth:!0,variant:"standard",label:"Тип клиента",InputProps:{readOnly:!0},value:"Загрузка"}),children:async()=>{const t=await os.contactViewService.tryRead(e),a=(null==t?void 0:t.tip_klienta)||"";return se(ta,{fullWidth:!0,variant:"standard",label:"Тип клиента",InputProps:{readOnly:!0},value:a})}})}]},{type:o.Component,style:{height:"100%"},columns:"6",fieldRightMargin:"1",fieldBottomMargin:"1",isVisible:e=>{let t=!1;return t=t||null!==e.arenda,t=t||null!==e.prodazha,t},element:({onChange:e,_fieldData:t,features:a})=>se(jc,{withTransparentHeader:!0,readonly:!0,isViewMode:!a.includes("hasCommissionPermission"),withRentTab:null!==t.arenda,withSellTab:null!==t.prodazha,onChange:e,fieldData:t})}]},{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.podkategoriya_obekta,"Квартиры"),t=t&&ze(e.kategoriya_obekta,"Жилая"),t=t&&!ze(e.kategoriya_obekta,"Коммерческая"),t},fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилая Квартира)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"kolichestvo_komnat_ot","kolichestvo_komnat_do"),name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma"),title:"Тип строения"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"balkon","balkon_kvartira","balkon_doma"),title:"Балкон"},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"etazh_ot","etazh_do"),name:"etazh",title:"Этаж"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({tip_planirovki:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"tip_planirovki"),title:"Тип планировки"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"lift_kommercziya","lift_kvartira","lift_dom"),title:"Лифт"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sanuzel","sanuzel_kvartira","sanuzel_doma"),title:"Санузел"},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"etazhnost_ot","etazhnost_do"),name:"etazhnost",title:"Этажность"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"zhilaya_ploshhad_ot","zhilaya_ploshhad_do"),name:"zhilaya_ploshhad",title:"Жилая площадь М²"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"mebel","mebel_kvartira","mebel_dom"),title:"Мебель"},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"vysota_potolkov_ot","vysota_potolkov_do"),name:"vysota_potolkov",title:"Высота потолков"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"obshhaya_ploshhad_ot","obshhaya_ploshhad_do"),name:"obshhaya_ploshhad",title:"Общая площадь М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"kolichestvo_spalen_ot","kolichestvo_spalen_do"),name:"kolichestvo_spalen",title:"Количество спален"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:"Система отопления"},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"spalnya_sanuzel_ot","spalnya_sanuzel_do"),name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"gaz","gaz_dom","gaz_zemlya"),title:"Газ"},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"rasstoyanie_do_metro_ot","rasstoyanie_do_metro_do"),name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({vid_iz_okna:e,vid_iz_okna_dom:t})=>[...e||[],...t||[]].reduce(((e,t)=>e.includes(t)?e:[...e,t]),[]).filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"vid_iz_okna","vid_iz_okna_dom"),title:"Вид из окна"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"parkovka","parkovka_kvartira","parkovka_zemlya"),title:"Парковка"},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",isVisible:e=>ys(e,"god_postrojki_ot","god_postrojki_do"),name:"god_postrojki",title:"Год постройки"})]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.podkategoriya_obekta,"Дома"),t=t&&ze(e.kategoriya_obekta,"Жилая"),t=t&&!ze(e.kategoriya_obekta,"Коммерческая"),t},fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилой дом)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"kolichestvo_komnat_ot","kolichestvo_komnat_do"),name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({sostoyanie_doma:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sostoyanie_doma"),title:"Состояние дома"},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",isVisible:e=>ys(e,"god_postrojki_ot","god_postrojki_do"),name:"god_postrojki",title:"Год постройки"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma"),title:"Тип строения"},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"etazhnost_ot","etazhnost_do"),name:"etazhnost",title:"Этажность"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"balkon","balkon_kvartira","balkon_doma"),title:"Балкон"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({tip_planirovki:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"tip_planirovki"),title:"Тип планировки"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({bassejn:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"bassejn"),title:"Бассейн"},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"ploshhad_doma_ot","ploshhad_doma_do"),name:"ploshhad_doma",title:"Площадь дома М²"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sanuzel","sanuzel_kvartira","sanuzel_doma"),title:"Санузел"},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"mashina_mesto_ot","mashina_mesto_do"),name:"mashina_mesto",title:"Машина-место"}),Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"kolichestvo_spalen_ot","kolichestvo_spalen_do"),name:"kolichestvo_spalen",title:"Количество спален"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"kolichestvo_sotok_ot","kolichestvo_sotok_do"),name:"kolichestvo_sotok",title:"Количество соток"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.voda,e.voda_dom,e.voda_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"voda","voda_dom","voda_zemlya"),title:"Вода"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"lift_kommercziya","lift_kvartira","lift_dom"),title:"Лифт"},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"spalnya_sanuzel_ot","spalnya_sanuzel_do"),name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:"Система отопления"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"mebel","mebel_kvartira","mebel_dom"),title:"Мебель"},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"rasstoyanie_do_metro_ot","rasstoyanie_do_metro_do"),name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"gaz","gaz_dom","gaz_zemlya"),title:"Газ"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:"Система кондиционирования"},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"vysota_potolkov_ot","vysota_potolkov_do"),name:"vysota_potolkov",title:"Высота потолков"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya"),title:"Электричество"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({vid_iz_okna:e,vid_iz_okna_dom:t})=>[...e||[],...t||[]].reduce(((e,t)=>e.includes(t)?e:[...e,t]),[]).filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"vid_iz_okna","vid_iz_okna_dom"),title:"Вид из окна"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({garazh:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"garazh"),title:"Гараж"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya"),title:"Канализация"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({raspolozhenie_doma:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"raspolozhenie_doma"),title:"Расположение дома"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya"),title:"Местоположение объекта"}]},{type:o.Fragment,isVisible:e=>(!ze(e.podkategoriya_obekta,"Земля/Участок")||!ze(e.kategoriya_obekta,"Коммерческая"))&&((!ze(e.podkategoriya_obekta,"Дома")||!ze(e.kategoriya_obekta,"Коммерческая"))&&((!ze(e.podkategoriya_obekta,"Квартиры")||!ze(e.kategoriya_obekta,"Коммерческая"))&&ze(e.kategoriya_obekta,"Коммерческая"))),fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая недвижимость)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"kolichestvo_komnat_ot","kolichestvo_komnat_do"),name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_obekta,e["sostoyanie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sostoyanie_obekta","sostoyanie-obekta_zemlya"),title:"Состояние объекта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"poleznaya_ploshhad_ot","poleznaya_ploshhad_do"),name:"poleznaya_ploshhad",title:"Полезная площадь М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"etazh_ot","etazh_do"),name:"etazh",title:"Этаж"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma"),title:"Тип строения"},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"mashina_mesto_ot","mashina_mesto_do"),name:"mashina_mesto",title:"Машина-место"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"kolichestvo_sotok_ot","kolichestvo_sotok_do"),name:"kolichestvo_sotok",title:"Количество соток"}),Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"etazhnost_ot","etazhnost_do"),name:"etazhnost",title:"Этажность"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"balkon","balkon_kvartira","balkon_doma"),title:"Балкон"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"parkovka","parkovka_kvartira","parkovka_zemlya"),title:"Парковка"},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"vysota_potolkov_ot","vysota_potolkov_do"),name:"vysota_potolkov",title:"Высота потолков"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"obshhaya_ploshhad_ot","obshhaya_ploshhad_do"),name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sanuzel","sanuzel_kvartira","sanuzel_doma"),title:"Санузел"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"mebel","mebel_kvartira","mebel_dom"),title:"Мебель"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.voda,e.voda_dom,e.voda_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"voda","voda_dom","voda_zemlya"),title:"Вода"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"gaz","gaz_dom","gaz_zemlya"),title:"Газ"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"lift_kommercziya","lift_kvartira","lift_dom"),title:"Лифт"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:"Система отопления"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya"),title:"Электричество"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya"),title:"Канализация"},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"rasstoyanie_do_metro_ot","rasstoyanie_do_metro_do"),name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya"),title:"Местоположение объекта"},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",isVisible:e=>ys(e,"god_postrojki_ot","god_postrojki_do"),name:"god_postrojki",title:"Год постройки"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:"Система кондиционирования"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({vid_liczenzii:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"vid_liczenzii"),title:"Вид лицензии"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({raspolozhenie_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"raspolozhenie_obekta"),title:"Расположение объекта"}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.podkategoriya_obekta,"Земля/Участок"),t=t&&ze(e.kategoriya_obekta,"Жилая"),t=t&&!ze(e.kategoriya_obekta,"Коммерческая"),t},fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилая земля/участок)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"kolichestvo_komnat_ot","kolichestvo_komnat_do"),name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:"Назначение объекта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({tip_zemli_uchastka:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"tip_zemli_uchastka"),title:"Тип земли/участка"},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"poleznaya_ploshhad_ot","poleznaya_ploshhad_do"),name:"poleznaya_ploshhad",title:"Полезная площадь М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"etazh_ot","etazh_do"),name:"etazh",title:"Этаж"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_obekta,e["sostoyanie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sostoyanie_obekta","sostoyanie-obekta_zemlya"),title:"Состояние объекта"},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"mashina_mesto_ot","mashina_mesto_do"),name:"mashina_mesto",title:"Машина-место"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"kolichestvo_sotok_ot","kolichestvo_sotok_do"),name:"kolichestvo_sotok",title:"Количество соток"}),Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"etazhnost_ot","etazhnost_do"),name:"etazhnost",title:"Этажность"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"parkovka","parkovka_kvartira","parkovka_zemlya"),title:"Парковка"},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"rasstoyanie_do_metro_ot","rasstoyanie_do_metro_do"),name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"obshhaya_ploshhad_ot","obshhaya_ploshhad_do"),name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.voda,e.voda_dom,e.voda_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"voda","voda_dom","voda_zemlya"),title:"Вода"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya"),title:"Местоположение объекта"},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"rasstoyanie_do_goroda_ot","rasstoyanie_do_goroda_do"),name:"rasstoyanie_do_goroda",title:"Расстояние до города (м)"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:"Система отопления"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({podezdnye_puti:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"podezdnye_puti"),title:"Подъездные пути"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:"Система кондиционирования"},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",isVisible:e=>ys(e,"god_postrojki_ot","god_postrojki_do"),name:"god_postrojki",title:"Год постройки"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya"),title:"Электричество"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"gaz","gaz_dom","gaz_zemlya"),title:"Газ"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya"),title:"Канализация"}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.podkategoriya_obekta,"Квартиры"),t=t&&U($(ze(e.kategoriya_obekta,"Коммерческая"),ze(e.kategoriya_obekta,"Жилая")),$(ze(e.kategoriya_obekta,"Коммерческая"),!ze(e.kategoriya_obekta,"Жилая"))),t},fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая квартира)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"kolichestvo_komnat_ot","kolichestvo_komnat_do"),name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:"Назначение объекта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma"),title:"Тип строения"},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"etazh_ot","etazh_do"),name:"etazh",title:"Этаж"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"balkon","balkon_kvartira","balkon_doma"),title:"Балкон"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({tip_planirovki:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"tip_planirovki"),title:"Тип планировки"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"lift_kommercziya","lift_kvartira","lift_dom"),title:"Лифт"},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"etazhnost_ot","etazhnost_do"),name:"etazhnost",title:"Этажность"}),Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",isVisible:e=>ys(e,"god_postrojki_ot","god_postrojki_do"),name:"god_postrojki",title:"Год постройки"}),Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"mashina_mesto_ot","mashina_mesto_do"),name:"mashina_mesto",title:"Машина-место"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sanuzel","sanuzel_kvartira","sanuzel_doma"),title:"Санузел"},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"obshhaya_ploshhad_ot","obshhaya_ploshhad_do"),name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"parkovka","parkovka_kvartira","parkovka_zemlya"),title:"Парковка"},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"zhilaya_ploshhad_ot","zhilaya_ploshhad_do"),name:"zhilaya_ploshhad",title:"Жилая площадь М²"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"mebel","mebel_kvartira","mebel_dom"),title:"Мебель"},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"vysota_potolkov_ot","vysota_potolkov_do"),name:"vysota_potolkov",title:"Высота потолков"}),Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"kolichestvo_spalen_ot","kolichestvo_spalen_do"),name:"kolichestvo_spalen",title:"Количество спален"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:"Система отопления"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({vid_iz_okna:e,vid_iz_okna_dom:t})=>[...e||[],...t||[]].reduce(((e,t)=>e.includes(t)?e:[...e,t]),[]).filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"vid_iz_okna","vid_iz_okna_dom"),title:"Вид из окна"},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"spalnya_sanuzel_ot","spalnya_sanuzel_do"),name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"gaz","gaz_dom","gaz_zemlya"),title:"Газ"},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"rasstoyanie_do_metro_ot","rasstoyanie_do_metro_do"),name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:"Система кондиционирования"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({raspolozhenie_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"raspolozhenie_obekta"),title:"Расположение объекта"}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.podkategoriya_obekta,"Дома"),t=t&&U($(ze(e.kategoriya_obekta,"Коммерческая"),ze(e.kategoriya_obekta,"Жилая")),$(ze(e.kategoriya_obekta,"Коммерческая"),!ze(e.kategoriya_obekta,"Жилая"))),t},fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческий дом)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"kolichestvo_komnat_ot","kolichestvo_komnat_do"),name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({sostoyanie_doma:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sostoyanie_doma"),title:"Состояние дома"},{type:o.Items,columns:"3",freeSolo:!0,outlined:!1,compute:e=>[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya"),title:"Местоположение объекта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:"Назначение объекта"},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"etazhnost_ot","etazhnost_do"),name:"etazhnost",title:"Этажность"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({raspolozhenie_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"raspolozhenie_obekta"),title:"Расположение объекта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma"),title:"Тип строения"},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"ploshhad_doma_ot","ploshhad_doma_do"),name:"ploshhad_doma",title:"Площадь дома М²"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({raspolozhenie_doma:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"raspolozhenie_doma"),title:"Расположение дома"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({tip_planirovki:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"tip_planirovki"),title:"Тип планировки"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({bassejn:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"bassejn"),title:"Бассейн"},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"kolichestvo_sotok_ot","kolichestvo_sotok_do"),name:"kolichestvo_sotok",title:"Количество соток"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sanuzel","sanuzel_kvartira","sanuzel_doma"),title:"Санузел"},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"mashina_mesto_ot","mashina_mesto_do"),name:"mashina_mesto",title:"Машина-место"}),Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"kolichestvo_spalen_ot","kolichestvo_spalen_do"),name:"kolichestvo_spalen",title:"Количество спален"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.voda,e.voda_dom,e.voda_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"voda","voda_dom","voda_zemlya"),title:"Вода"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"lift_kommercziya","lift_kvartira","lift_dom"),title:"Лифт"},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"spalnya_sanuzel_ot","spalnya_sanuzel_do"),name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:"Система отопления"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"mebel","mebel_kvartira","mebel_dom"),title:"Мебель"},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"rasstoyanie_do_metro_ot","rasstoyanie_do_metro_do"),name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"gaz","gaz_dom","gaz_zemlya"),title:"Газ"},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",isVisible:e=>ys(e,"god_postrojki_ot","god_postrojki_do"),name:"god_postrojki",title:"Год постройки"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"vysota_potolkov_ot","vysota_potolkov_do"),name:"vysota_potolkov",title:"Высота потолков"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya"),title:"Электричество"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({vid_iz_okna:e,vid_iz_okna_dom:t})=>[...e||[],...t||[]].reduce(((e,t)=>e.includes(t)?e:[...e,t]),[]).filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"vid_iz_okna","vid_iz_okna_dom"),title:"Вид из окна"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({garazh:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"garazh"),title:"Гараж"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya"),title:"Канализация"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"balkon","balkon_kvartira","balkon_doma"),title:"Балкон"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:"Система кондиционирования"}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.podkategoriya_obekta,"Земля/Участок"),t=t&&U($(ze(e.kategoriya_obekta,"Коммерческая"),ze(e.kategoriya_obekta,"Жилая")),$(ze(e.kategoriya_obekta,"Коммерческая"),!ze(e.kategoriya_obekta,"Жилая"))),t},fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая земля/участок)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"kolichestvo_komnat_ot","kolichestvo_komnat_do"),name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:"Назначение объекта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({tip_zemli_uchastka:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"tip_zemli_uchastka"),title:"Тип земли/участка"},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"poleznaya_ploshhad_ot","poleznaya_ploshhad_do"),name:"poleznaya_ploshhad",title:"Полезная площадь М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"etazh_ot","etazh_do"),name:"etazh",title:"Этаж"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_obekta,e["sostoyanie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sostoyanie_obekta","sostoyanie-obekta_zemlya"),title:"Состояние объекта"},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"mashina_mesto_ot","mashina_mesto_do"),name:"mashina_mesto",title:"Машина-место"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"kolichestvo_sotok_ot","kolichestvo_sotok_do"),name:"kolichestvo_sotok",title:"Количество соток"}),Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"etazhnost_ot","etazhnost_do"),name:"etazhnost",title:"Этажность"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"parkovka","parkovka_kvartira","parkovka_zemlya"),title:"Парковка"},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"rasstoyanie_do_metro_ot","rasstoyanie_do_metro_do"),name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"obshhaya_ploshhad_ot","obshhaya_ploshhad_do"),name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.voda,e.voda_dom,e.voda_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"voda","voda_dom","voda_zemlya"),title:"Вода"},{type:o.Items,columns:"3",freeSolo:!0,outlined:!1,compute:e=>[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya"),title:"Местоположение объекта"},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"rasstoyanie_do_goroda_ot","rasstoyanie_do_goroda_do"),name:"rasstoyanie_do_goroda",title:"Расстояние до города (м)"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:"Система отопления"},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",isVisible:e=>ys(e,"god_postrojki_ot","god_postrojki_do"),name:"god_postrojki",title:"Год постройки"}),{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya"),title:"Электричество"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({podezdnye_puti:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"podezdnye_puti"),title:"Подъездные пути"},{type:o.Items,columns:"3",freeSolo:!0,outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:"Система кондиционирования"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"gaz","gaz_dom","gaz_zemlya"),title:"Газ"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((e=>e)).flatMap((e=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),isVisible:e=>ys(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya"),title:"Канализация"}]}]},{type:o.Paper,isVisible:e=>ys(e,"vnutri_est","ryadom_est"),fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте"})},{type:o.Component,fieldBottomMargin:"1",columns:"6",element:()=>se(Ae,{children:"Внутри есть:"})},{type:o.Component,fieldBottomMargin:"1",columns:"6",element:()=>se(Ae,{children:"Рядом есть:"})},{type:o.Component,columns:"6",isVisible:({vnutri_est:e})=>!!(null==e?void 0:e.length),element:({vnutri_est:e})=>se("div",{children:se(me,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",gap:1},children:null==e?void 0:e.map(((e,t)=>se(fa,{label:e},t)))})})},{type:o.Component,columns:"6",isVisible:({ryadom_est:e})=>!!(null==e?void 0:e.length),element:({ryadom_est:e})=>se("div",{children:se(me,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",gap:1},children:null==e?void 0:e.map(((e,t)=>se(fa,{label:e},t)))})})}]},{type:o.Paper,isVisible:e=>ys(e,"ploshhad_gostinnoj_ot","ploshhad_gostinnoj_do","ploshhad_spalni_ot","ploshhad_spalni_do","ploshhad_holla_ot","ploshhad_holla_do","ploshhad_kuhni_ot","ploshhad_kuhni_do","ploshhad_sanuzla_ot","ploshhad_sanuzla_do","ploshhad_balkona_ot","ploshhad_balkona_do","ploshhad_terrasy_ot","ploshhad_terrasy_do","ploshhad_komnaty_ohrany_ot","ploshhad_komnaty_ohrany_do","ploshhad_gostevogo_doma_ot","ploshhad_gostevogo_doma_do","ploshhad_dopolnitelnoj_pristrojki_ot","ploshhad_dopolnitelnoj_pristrojki_do"),fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,sx:{mb:2},element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади"})},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&U(ze(e.kategoriya_obekta,"Коммерческая"),ze(e.kategoriya_obekta,"Жилая")),t=t&&ze(e.podkategoriya_obekta,"Квартиры"),t},fields:[Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"ploshhad_gostinnoj_ot","ploshhad_gostinnoj_do"),name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"ploshhad_spalni_ot","ploshhad_spalni_do"),name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"ploshhad_holla_ot","ploshhad_holla_do"),name:"ploshhad_holla",title:"Площадь холла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"ploshhad_kuhni_ot","ploshhad_kuhni_do"),name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"ploshhad_sanuzla_ot","ploshhad_sanuzla_do"),name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"ploshhad_balkona_ot","ploshhad_balkona_do"),name:"ploshhad_balkona",title:"Площадь балкона М²"})]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&U(ze(e.kategoriya_obekta,"Коммерческая"),ze(e.kategoriya_obekta,"Жилая")),t=t&&ze(e.podkategoriya_obekta,"Дома"),t},fields:[Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"ploshhad_gostinnoj_ot","ploshhad_gostinnoj_do"),name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"ploshhad_spalni_ot","ploshhad_spalni_do"),name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"ploshhad_holla_ot","ploshhad_holla_do"),name:"ploshhad_holla",title:"Площадь холла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"ploshhad_kuhni_ot","ploshhad_kuhni_do"),name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"ploshhad_sanuzla_ot","ploshhad_sanuzla_do"),name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"ploshhad_balkona_ot","ploshhad_balkona_do"),name:"ploshhad_balkona",title:"Площадь балкона М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"ploshhad_terrasy_ot","ploshhad_terrasy_do"),name:"ploshhad_terrasy",title:"Площадь террасы М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"ploshhad_komnaty_ohrany_ot","ploshhad_komnaty_ohrany_do"),name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"ploshhad_gostevogo_doma_ot","ploshhad_gostevogo_doma_do"),name:"ploshhad_gostevogo_doma",title:"Площадь гостевого дома М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"ploshhad_dopolnitelnoj_pristrojki_ot","ploshhad_dopolnitelnoj_pristrojki_do"),name:"ploshhad_dopolnitelnoj_pristrojki",title:"Площадь дополнительной пристройки М²"})]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&U(ze(e.kategoriya_obekta,"Коммерческая"),ze(e.kategoriya_obekta,"Жилая")),t=t&&ze(e.podkategoriya_obekta,"Земля/Участок"),t},fields:[Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"ploshhad_gostinnoj_ot","ploshhad_gostinnoj_do"),name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"ploshhad_spalni_ot","ploshhad_spalni_do"),name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"ploshhad_holla_ot","ploshhad_holla_do"),name:"ploshhad_holla",title:"Площадь холла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"ploshhad_kuhni_ot","ploshhad_kuhni_do"),name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"ploshhad_sanuzla_ot","ploshhad_sanuzla_do"),name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"ploshhad_balkona_ot","ploshhad_balkona_do"),name:"ploshhad_balkona",title:"Площадь балкона М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"ploshhad_terrasy_ot","ploshhad_terrasy_do"),name:"ploshhad_terrasy",title:"Площадь террасы М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"ploshhad_komnaty_ohrany_ot","ploshhad_komnaty_ohrany_do"),name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"})]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&U(ze(e.kategoriya_obekta,"Коммерческая")),t=t&&!ze(e.podkategoriya_obekta,"Квартиры"),t=t&&!ze(e.podkategoriya_obekta,"Дома"),t=t&&!ze(e.podkategoriya_obekta,"Земля/Участок"),t},fields:[Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"ploshhad_gostinnoj_ot","ploshhad_gostinnoj_do"),name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"ploshhad_spalni_ot","ploshhad_spalni_do"),name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"ploshhad_holla_ot","ploshhad_holla_do"),name:"ploshhad_holla",title:"Площадь холла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"ploshhad_kuhni_ot","ploshhad_kuhni_do"),name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"ploshhad_sanuzla_ot","ploshhad_sanuzla_do"),name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"ploshhad_balkona_ot","ploshhad_balkona_do"),name:"ploshhad_balkona",title:"Площадь балкона М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"ploshhad_terrasy_ot","ploshhad_terrasy_do"),name:"ploshhad_terrasy",title:"Площадь террасы М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",isVisible:e=>ys(e,"ploshhad_komnaty_ohrany_ot","ploshhad_komnaty_ohrany_do"),name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"})]}]},{type:o.Paper,features:["hasDescriptionPermission"],fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,sx:{mb:2},element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Описание объекта"})},{type:o.Text,sx:{pointerEvents:"all"},inputRows:8,outlined:!1,name:"opisanie",title:"Описание"}]},{type:o.Component,isVisible:(e,{hideAutofindFlag:t})=>!t,fieldBottomMargin:"1",fieldRightMargin:"1",element:({_fieldData:e,payload:t,features:a})=>se(zc,{payload:t,features:a,fieldData:e})}],Pc=Nn()((e=>({root:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:e.spacing(1),marginBottom:e.spacing(1)}}))),Ec=()=>{const{classes:e}=Pc();return se(et,{className:e.root,children:[se(Ae,{fontWeight:"bold",children:"Подходящие заявки"}),se("div",{})]})},Nc=({fieldData:e,payload:t})=>{const a=We(e),i=Da(),{render:o,pickData:l}=He({title:"Предпросмотр",AfterTitle:({onClose:e})=>se(ye,{children:async()=>{const t=await os.featureService.hasFeature("redaktirovanie_zayavki");return se(we,{direction:"row",gap:1,children:[se(Ra,{sx:{opacity:.8},disabled:!t,onClick:()=>{var e;os.routerService.push("/bid_edit/".concat(null==(e=i.data)?void 0:e.$id),{viewRedirectFlag:!0})},children:se(ja,{})}),se(_e,{size:"small",onClick:e,children:se(Ue,{})})]})}}),fullScreen:!0,outlinePaper:!0,handler:()=>i.data,payload:()=>({...t,hideAutofindFlag:!0}),features:t.permissions,submitLabel:"Ок",fields:qc});re.useEffect((()=>i.subscribe((()=>{l()}))),[]);const{columns:r}=ed({storageKey:"bid_columns",columns:rc}),n=re.useMemo((()=>{const t=Sc(e);return os.loggerService.log("apartment_card_fields filterData",{filterData:t}),nc(t)}),[e]),s=re.useMemo((()=>nc({system_metro:n.system_metro,system_rajon:n.system_rajon,system_mahallya:n.system_mahallya,system_rent_price:n.system_rent_price,system_rent_kom_price:n.system_rent_kom_price,system_prod_price:n.system_prod_price,system_prod_kom_price:n.system_prod_kom_price})),[n]);return se(me,{sx:{pointerEvents:"all",height:"max(60vh, 350px)",mb:5},children:[se(Jt,{withLoader:!0,withInitialLoader:!0,reloadSubject:a,AfterOperationList:Ec,handler:async(e,...t)=>await os.bidViewService.paginate({...n,...s,_accessLevel:5,_mode:"audit"},...t),isRowDisabled:({system_access_level:e})=>e>t.accessLevel,onRowClick:e=>i.next(e),columns:r,payload:t}),o()]})},Oc=[{type:kt.Add,isDisabled:(e,{permissions:t})=>!t.hasBidCreatePermission,label:"Создать"},{type:kt.Fab,action:"column-setup-action",icon:wt,label:"Колонки"},{type:kt.Menu,options:[{action:"add-action",isDisabled:(e,{permissions:t})=>!t.hasBidCreatePermission},{action:"update-now"},{action:"resort-action"},{action:"drop-filters"}]}],Hc=[{type:St.Compute,sortable:!1,field:"index",description:"Номер заявки",headerName:"Номер",element:({index:e})=>se(zt,{content:e}),width:()=>100},{type:St.Text,sortable:!0,field:"zagolovok",description:"Заголовок заявки",headerName:"Заголовок",width:()=>100},{type:St.Compute,isVisible:({payload:{permissions:e}})=>e.hasFioPermission,sortable:!1,field:"fio",description:"Фамилия, имя, отчество контакта",compute:async({contact_id:e})=>{const t=await os.contactViewService.tryRead(e);return t?t.fio:""},headerName:"Ф.И.О.",width:()=>125},{type:St.Compute,isVisible:({payload:{permissions:e}})=>e.hasPreviewModeDisabled,sortable:!1,field:"telefon",description:"Номер телефона контакта",element:({id:e,contact_id:t})=>se(xt,{payload:e,condition:e=>os.permissionRequestService.getOwnerContactPermissionByBidId(e),Loading:"Загрузка",Else:"Скрыто",children:se(ye,{payload:t,children:async e=>{const t=await os.contactViewService.tryRead(e);return t?t.telefon:""}})}),headerName:"Телефон",width:()=>125},{type:St.Compute,field:"kategoriya_obekta",description:"Категория объекта",sortable:!0,compute:e=>e.kategoriya_obekta||"",headerName:"Категория",width:()=>100},{type:St.Compute,field:"podkategoriya_obekta",description:"Подкатегория объекта",sortable:!0,compute:e=>e.podkategoriya_obekta||"",headerName:"Подкатегория",width:()=>100},{type:St.Compute,sortable:!0,field:"prodazha_arenda",description:"Покупка/Аренда",headerName:"Тип сделки",element:({prodazha:e,arenda:t})=>{const a=[...e||[],...t||[]];return se(me,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",gap:1},children:[!a.length&&"",a.map((e=>se(fa,{label:e})))]})},width:()=>170},{type:St.Compute,field:"czena_prodazha",description:"Покупка",isVisible:({payload:e})=>e.permissions.hasOwnerPricePermission,sortable:!0,compute:async e=>await os.exchangeService.getBidProdPriceLabel(e),headerName:"Покупка",width:()=>200},{type:St.Compute,field:"czena_arenda",description:"Аренда",isVisible:({payload:e})=>e.permissions.hasOwnerPricePermission,sortable:!0,compute:async e=>await os.exchangeService.getBidRentPriceLabel(e),headerName:"Аренда",width:()=>200},{type:St.Compute,sortable:!1,description:"Статус заявки",field:"status",headerName:"Статус",compute:async({id:e})=>await os.dealViewService.readStatusByBidId(e),width:()=>100},{type:St.Compute,headerName:"Создано",description:"Дата создания заявки",compute:({$createdAt:e})=>n(e).format("DD/MM/YYYY"),sortable:!0,field:"$createdAt",width:()=>145},{type:St.Compute,headerName:"Обновлено",description:"Дата обновления заявки",compute:({$updatedAt:e})=>n(e).format("DD/MM/YYYY"),sortable:!0,field:"$updatedAt",width:()=>145},{type:St.Action,headerName:"Действие",sortable:!1,width:()=>100}],Uc=[{label:"Редактировать",isDisabled:(e,{permissions:t})=>!t.hasBidUpdatePermission,action:"edit-action",icon:At},{label:"В архиве",action:"toggle-archive",icon:Tt,isVisible:({system_is_archive:e})=>!e},{label:"В архиве",action:"toggle-archive",icon:Ft,isVisible:({system_is_archive:e})=>!!e},{label:"Создать копию",isVisible:(e,{permissions:t})=>t.hasSuperAdminFlagPermission,action:"copy-action",icon:Lt}],Wc=[{label:"Жилая",name:"zhilaya"},{label:"Коммерческая",name:"kommercheskaya"},{label:"От застройщика",name:"novostrojka"}],$c=[{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая"),t=t&&!ze(e.podkategoriya_obekta,"Квартиры"),t=t&&!ze(e.podkategoriya_obekta,"Дома"),t=t&&!ze(e.podkategoriya_obekta,"Земля/Участок"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая недвижимость)"})},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"}]}]},{type:o.Fragment,isVisible:e=>!ze(e.kategoriya_obekta,"Коммерческая")&&ze(e.podkategoriya_obekta,"Земля/Участок"),fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Земля/Участок)"})},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"}]}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&!ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Квартиры"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Квартиры)"})},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}]}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&!ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Дома"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Дома)"})},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostevogo_doma",title:"Площадь гостевого дома М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_dopolnitelnoj_pristrojki",title:"Площадь дополнительной пристройки М²"}]}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Квартиры"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая квартира)"})},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}]}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Дома"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческий дом)"})},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostevogo_doma",title:"Площадь гостевого дома М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_dopolnitelnoj_pristrojki",title:"Площадь дополнительной пристройки М²"}]}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Земля/Участок"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая Земля/Участок)"})},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"}]}]}],Gc=[{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая"),t=t&&!ze(e.podkategoriya_obekta,"Квартиры"),t=t&&!ze(e.podkategoriya_obekta,"Дома"),t=t&&!ze(e.podkategoriya_obekta,"Земля/Участок"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая недвижимость)"})},{type:o.Items,columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Телефон","Телевизор","Интернет","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Кондиционер","Пылесос","Утюг","Умный дом","Цоколь","Подвал","Терраса","Угловой","Комната охраны","Вдоль дороги","Сарай","Огород","Решетки на окнах","Пожарная сигнализация","Видеонаблюдение","Сигнализация","Разгрузочный пандус"]},{type:o.Items,columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Закрытый двор","Шлагбаум","Детская площадка","Охрана","Спортивная площадка","Парковая зона","Школа","Детский сад","Колледж","Университет","Рынок","Кафе/Рестораны","ТЦ","Супермаркет","Магазин","Аптека","Больница","Автобусная остановка","Ж/Д ветка"]}]}]}},{type:o.Fragment,isVisible:e=>{let t=!1;return t=t||ze(e.podkategoriya_obekta,"Земля/Участок"),t=t&&!ze(e.kategoriya_obekta,"Коммерческая"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Земля/Участок)"})},{type:o.Items,columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Забор","Катлаван","Сарай","Огород","Самострой","Угловой","Пожарная сигнализация","Видеонаблюдение","Сигнализация","Разгрузочный пандус"]},{type:o.Items,columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Закрытый двор","Шлагбаум","Детская площадка","Охрана","Спортивная площадка","Парковая зона","Школа","Детский сад","Колледж","Университет","Рынок","Кафе/Рестораны","ТЦ","Супермаркет","Магазин","Аптека","Больница","Автобусная остановка","Ж/Д ветка"]}]}]}},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Дома"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческий дом)"})},{type:o.Items,columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Телефон","Телевизор","Интернет","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Кондиционер","Пылесос","Утюг","Умный дом","Комната охраны","Гостевой домик","Барбекю зона","2 дома во дворе","Сарай","Огород","Полисадник","Дополнительная пристройка","Разгрузочный пандус","Цоколь","Подвал","Гардеробная","Терраса","Угловой","Вдоль дороги","Решетки на окнах","Пожарная сигнализация","Видеонаблюдение","Сигнализация"]},{type:o.Items,columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Закрытый двор","Шлагбаум","Детская площадка","Охрана","Спортивная площадка","Парковая зона","Школа","Детский сад","Колледж","Университет","Рынок","Кафе/Рестораны","ТЦ","Супермаркет","Магазин","Аптека","Больница","Автобусная остановка","Ж/Д ветка"]}]}]}}],Yc=[{type:o.Fragment,isVisible:e=>(!ze(e.podkategoriya_obekta,"Земля/Участок")||!ze(e.kategoriya_obekta,"Коммерческая"))&&((!ze(e.podkategoriya_obekta,"Дома")||!ze(e.kategoriya_obekta,"Коммерческая"))&&((!ze(e.podkategoriya_obekta,"Квартиры")||!ze(e.kategoriya_obekta,"Коммерческая"))&&ze(e.kategoriya_obekta,"Коммерческая"))),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая недвижимость)"})},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Component,sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>se(xe,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},{type:o.Combo,columns:"3",outlined:!1,name:"sostoyanie_obekta",title:"Состояние объекта",itemList:["Новой постройки","Недостроенный","Под снос","Коробка"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"},{type:o.Combo,columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:o.Combo,columns:"3",outlined:!1,name:"tip_stroeniya",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},{type:o.Items,columns:"3",outlined:!1,name:"parkovka",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"sanuzel",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:o.Items,columns:"3",outlined:!1,name:"balkon",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"voda",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]},{type:o.Combo,columns:"3",outlined:!1,name:"kanalizacziya",title:"Канализация",itemList:["Да","Нет"]},{type:o.Combo,columns:"3",outlined:!1,name:"lift_kommercziya",title:"Лифт",itemList:["Есть","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"sistema_otopleniya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Items,columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Combo,columns:"3",outlined:!1,name:"mebel",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:o.Combo,columns:"3",outlined:!1,name:"elektrichestvo",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"},{type:o.Items,columns:"3",outlined:!1,name:"mestopolozhenie_obekta",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:o.Items,columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]}]}},{type:o.Fragment,isVisible:e=>{if(ze(e.podkategoriya_obekta,"Квартиры")&&ze(e.kategoriya_obekta,"Коммерческая"))return!1;let t=!1;return t=t||ze(e.podkategoriya_obekta,"Квартиры"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Квартиры)"})},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Combo,columns:"3",outlined:!1,name:"sostoyanie_remonta-kvartiry",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Complete,columns:"3",outlined:!1,name:"nazvanie_zhk",title:"Название ЖК",tip:['ЖК "Greenwich"','ЖК "OzMahal"','ЖК "Elysium"','ЖК "Binkat"','ЖК "Brooklyn"','ЖК "Assalom Havo"','ЖК "Istanbul City"']},{type:o.Combo,columns:"3",outlined:!1,name:"tip-stroeniya_kvartiry",title:"Тип строения",itemList:["Кирпичный","Монолитный","Блочный","Панельный","Деревянный","Газоблочный","Бетонно-керамзитный"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"},{type:o.Items,columns:"3",outlined:!1,name:"balkon_kvartira",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Малосемейная","Общежитие","Пентхаус","Дуплекс","Комната"]},{type:o.Combo,columns:"3",outlined:!1,name:"lift_kvartira",title:"Лифт",itemList:["Пассажирский","Грузовой","Нет"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:o.Items,columns:"3",outlined:!1,name:"sanuzel_kvartira",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"zhilaya_ploshhad",title:"Жилая площадь М²"},{type:o.Combo,columns:"3",outlined:!1,name:"mebel_kvartira",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"},{type:o.Items,columns:"3",outlined:!1,name:"sistema-otopleniya_kvartiry",title:"Система отопления",itemList:["Центральное","2х контурный котел","Теплый пол"]},{type:o.Text,columns:"3",outlined:!1,name:"kod_domofona",title:"Код домофона"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"},{type:o.Items,columns:"3",outlined:!1,name:"energonositel_obekta",title:"Энергоноситель объекта",itemList:["Электрофицирован","Газифицирован"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"podezd_nomer",title:"Подъезд №"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:o.Items,columns:"3",outlined:!1,name:"vid_iz_okna",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:o.Items,columns:"3",outlined:!1,name:"parkovka_kvartira",title:"Парковка",itemList:["Наземная","Собственная","Подземная","В аренду","Нет"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}]}},{type:o.Fragment,isVisible:e=>{if(ze(e.podkategoriya_obekta,"Дома")&&ze(e.kategoriya_obekta,"Коммерческая"))return!1;let t=!1;return t=t||ze(e.podkategoriya_obekta,"Дома"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Дома)"})},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Combo,columns:"3",outlined:!1,name:"sostoyanie_doma",title:"Состояние дома",itemList:["Новой постройки","Недостроенный","Под снос","Коробка"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"},{type:o.Combo,columns:"3",outlined:!1,name:"tip-stroeniya_doma",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:o.Items,columns:"3",outlined:!1,name:"balkon_doma",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Смешанный"]},{type:o.Items,columns:"3",outlined:!1,name:"bassejn",title:"Бассейн",itemList:["Летний","Зимний","Нет"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_doma",title:"Площадь дома М²"},{type:o.Items,columns:"3",outlined:!1,name:"sanuzel_doma",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"},{type:o.Combo,columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Combo,columns:"3",outlined:!1,name:"lift_dom",title:"Лифт",itemList:["Есть","Нет"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"},{type:o.Items,columns:"3",outlined:!1,name:"sistema-otopleniya_dom",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Combo,columns:"3",outlined:!1,name:"mebel_dom",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:o.Items,columns:"3",outlined:!1,name:"gaz_dom",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_dom",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"},{type:o.Combo,columns:"3",outlined:!1,name:"elektrichestvo_dom",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"vid_iz_okna_dom",title:"Вид из окна",itemList:["В огород","На улицу","На трассу"]},{type:o.Items,columns:"3",outlined:!1,name:"garazh",title:"Гараж",itemList:["Подземный","Закрытый","Под навесом","Уличный"]},{type:o.Combo,columns:"3",outlined:!1,name:"kanalizacziya_dom",title:"Канализация",itemList:["Да","Нет"]},{type:o.Combo,columns:"3",outlined:!1,name:"raspolozhenie_doma",title:"Расположение дома",itemList:["По середине","В начале двора","В конце двора"]},{type:o.Items,columns:"3",outlined:!1,name:"mestopolozhenie-obekta_dom",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:o.Items,columns:"3",outlined:!1,name:"voda_dom",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]}]}},{type:o.Fragment,isVisible:e=>!ze(e.kategoriya_obekta,"Коммерческая")&&ze(e.podkategoriya_obekta,"Земля/Участок"),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Земля/Участок)"})},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Component,sx:{pr:1,mb:2},columns:"3",name:"naznachenie-obekta-zemlya_uchastok",element:e=>se(xe,{variant:"standard",label:"Назначение объекта",items:[{label:"Сельхоз использование",value:"Сельхоз использование"},{label:"ИЖС",value:"ИЖС"},{label:"Высотная застройка",value:"Высотная застройка"},{label:"Промышленное назначение",value:"Промышленное назначение"},{label:"ТЦ",value:"ТЦ"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Склады",value:"Склады"},{label:"Инвестпроект",value:"Инвестпроект"},{label:"Строительство образовательных учреждений",value:"Строительство образовательных учреждений"},{label:"АЗС",value:"АЗС"},{label:"Мойка",value:"Мойка"}],value:e["naznachenie-obekta_zemlya"],onChange:t=>e.onChange({"naznachenie-obekta_zemlya":t})})},{type:o.Items,columns:"3",outlined:!1,name:"tip_zemli_uchastka",title:"Тип земли/участка",itemList:["Делимый","Неделимый"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"},{type:o.Combo,columns:"3",outlined:!1,name:"sostoyanie-obekta_zemlya",title:"Состояние объекта",itemList:["Пустая земля/участок","Недостроенная","Под снос"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:o.Combo,columns:"3",outlined:!1,name:"sostoyanie-remonta_zemlya",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Items,columns:"3",outlined:!1,name:"parkovka_zemlya",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:o.Items,columns:"3",outlined:!1,name:"voda_zemlya",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение"]},{type:o.Items,columns:"3",outlined:!1,name:"mestopolozhenie-obekta_zemlya",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_goroda",title:"Расстояние до города (м)"},{type:o.Items,columns:"3",outlined:!1,name:"sistema-otopleniya_zemlya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Combo,columns:"3",outlined:!1,name:"podezdnye_puti",title:"Подъездные пути",itemList:["Асфальтированная дорога","Грунтовая дорога","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_zemlya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"},{type:o.Combo,columns:"3",outlined:!1,name:"elektrichestvo_zemlya",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"gaz_zemlya",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Combo,columns:"3",outlined:!1,name:"kanalizacziya_zemlya",title:"Канализация",itemList:["Да","Нет"]}]}},{type:o.Fragment,isVisible:e=>!(!ze(e.podkategoriya_obekta,"Квартиры")||!ze(e.kategoriya_obekta,"Коммерческая")),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая квартира)"})},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Combo,columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Component,sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>se(xe,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},{type:o.Items,columns:"3",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"},{type:o.Items,columns:"3",outlined:!1,name:"balkon",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Малосемейная","Общежитие","Пентхаус","Дуплекс","Комната"]},{type:o.Combo,columns:"3",outlined:!1,name:"lift_kvartira",title:"Лифт",itemList:["Пассажирский","Грузовой","Нет"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"},{type:o.Complete,columns:"3",outlined:!1,name:"nazvanie_zhk",title:"Название ЖК",tip:['ЖК "Greenwich"','ЖК "OzMahal"','ЖК "Elysium"','ЖК "Binkat"','ЖК "Brooklyn"','ЖК "Assalom Havo"','ЖК "Istanbul City"']},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:o.Items,columns:"3",outlined:!1,name:"sanuzel_kvartira",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более"]},{type:o.Items,columns:"3",outlined:!1,name:"parkovka_kvartira",title:"Парковка",itemList:["Наземная","Собственная","Подземная","В аренду","Нет"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"zhilaya_ploshhad",title:"Жилая площадь М²"},{type:o.Combo,columns:"3",outlined:!1,name:"mebel",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"},{type:o.Items,columns:"3",outlined:!1,name:"sistema_otopleniya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Text,columns:"3",outlined:!1,name:"kod_domofona",title:"Код домофона"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"},{type:o.Items,columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"podezd_nomer",title:"Подъезд №"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:o.Items,columns:"3",outlined:!1,name:"vid_iz_okna",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:o.Items,columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:o.Combo,columns:"3",outlined:!1,name:"tip_stroeniya",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]}]}},{type:o.Fragment,isVisible:e=>!(!ze(e.podkategoriya_obekta,"Дома")||!ze(e.kategoriya_obekta,"Коммерческая")),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческий дом)"})},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Combo,columns:"3",outlined:!1,name:"sostoyanie_doma",title:"Состояние дома",itemList:["Новой постройки","Недостроенный","Под снос","Коробка"]},{type:o.Items,columns:"3",outlined:!1,name:"mestopolozhenie_obekta",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:o.Component,sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>se(xe,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:o.Combo,columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Items,columns:"3",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:o.Combo,columns:"3",outlined:!1,name:"tip_stroeniya",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_doma",title:"Площадь дома М²"},{type:o.Combo,columns:"3",outlined:!1,name:"raspolozhenie_doma",title:"Расположение дома",itemList:["По середине","В начале двора","В конце двора"]},{type:o.Items,columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Малосемейная","Общежитие","Пентхаус","Дуплекс","Комната"]},{type:o.Items,columns:"3",outlined:!1,name:"bassejn",title:"Бассейн",itemList:["Летний","Зимний","Нет"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"},{type:o.Items,columns:"3",outlined:!1,name:"sanuzel_doma",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"},{type:o.Items,columns:"3",outlined:!1,name:"voda_dom",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]},{type:o.Combo,columns:"3",outlined:!1,name:"lift_kvartira",title:"Лифт",itemList:["Пассажирский","Грузовой","Нет"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"},{type:o.Items,columns:"3",outlined:!1,name:"sistema_otopleniya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Combo,columns:"3",outlined:!1,name:"mebel",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:o.Items,columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"},{type:o.Combo,columns:"3",outlined:!1,name:"elektrichestvo_dom",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"vid_iz_okna",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:o.Items,columns:"3",outlined:!1,name:"garazh",title:"Гараж",itemList:["Подземный","Закрытый","Под навесом","Уличный"]},{type:o.Combo,columns:"3",outlined:!1,name:"kanalizacziya_dom",title:"Канализация",itemList:["Да","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"balkon",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}]}},{type:o.Fragment,isVisible:e=>!(!ze(e.podkategoriya_obekta,"Земля/Участок")||!ze(e.kategoriya_obekta,"Коммерческая")),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая Земля/Участок)"})},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"},{type:o.Component,sx:{pr:1,mb:2},columns:"3",name:"naznachenie-obekta-zemlya_uchastok",element:e=>se(xe,{variant:"standard",label:"Назначение объекта",items:[{label:"Сельхоз использование",value:"Сельхоз использование"},{label:"ИЖС",value:"ИЖС"},{label:"Высотная застройка",value:"Высотная застройка"},{label:"Промышленное назначение",value:"Промышленное назначение"},{label:"ТЦ",value:"ТЦ"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Склады",value:"Склады"},{label:"Инвестпроект",value:"Инвестпроект"},{label:"Строительство образовательных учреждений",value:"Строительство образовательных учреждений"},{label:"АЗС",value:"АЗС"},{label:"Мойка",value:"Мойка"}],value:e["naznachenie-obekta_zemlya"],onChange:t=>e.onChange({"naznachenie-obekta_zemlya":t})})},{type:o.Items,columns:"3",outlined:!1,name:"tip_zemli_uchastka",title:"Тип земли/участка",itemList:["Делимый","Неделимый"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"},{type:o.Combo,columns:"3",outlined:!1,name:"sostoyanie-obekta_zemlya",title:"Состояние объекта",itemList:["Пустая земля/участок","Недостроенная","Под снос"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"},{type:o.Combo,columns:"3",outlined:!1,name:"sostoyanie-remonta_zemlya",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Items,columns:"3",outlined:!1,name:"parkovka_zemlya",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"},{type:o.Items,columns:"3",outlined:!1,name:"voda_zemlya",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение"]},{type:o.Items,columns:"3",outlined:!1,name:"mestopolozhenie-obekta_zemlya",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_goroda",title:"Расстояние до города (м)"},{type:o.Items,columns:"3",outlined:!1,name:"sistema-otopleniya_zemlya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Combo,columns:"3",outlined:!1,name:"podezdnye_puti",title:"Подъездные пути",itemList:["Асфальтированная дорога","Грунтовая дорога","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_zemlya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:o.Text,columns:"3",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"},{type:o.Combo,columns:"3",outlined:!1,name:"elektrichestvo_zemlya",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"gaz_zemlya",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Combo,columns:"3",outlined:!1,name:"kanalizacziya_zemlya",title:"Канализация",itemList:["Да","Нет"]}]}}],Kc=[{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&!ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Квартиры"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Квартиры)"})},{type:o.Items,columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Холодильник","Стиральная машина","Телевизор","Интернет","Мусоропровод","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Кондиционер","Пылесос","Утюг","Умный дом","Цоколь","Подвал","Гардеробная","Терраса","Торец","Собственное обслуживающее ТСЖ","Консьерж"]},{type:o.Items,columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Закрытый двор","Шлагбаум","Детская площадка","Барбекю зона","Спортивная площадка","Охрана","Парковая зона","Школа","Детский сад","Колледж","Университет","Рынок","Кафе/Рестораны","ТЦ","Супермаркет","Магазин","Аптека","Больница","Автобусная остановка"]}]}]}},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&!ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Дома"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Дома)"})},{type:o.Items,columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Телефон","Телевизор","Интернет","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Кондиционер","Пылесос","Утюг","Умный дом","Цоколь","Подвал","Гардеробная","Терраса","Угловой","Комната охраны","Вдоль дороги","Гостевой домик","Барбекю зона","2 дома во дворе","Сарай","Огород","Полисадник","Дополнительная пристройка"]},{type:o.Items,columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Закрытый двор","Шлагбаум","Детская площадка","Охрана","Спортивная площадка","Парковая зона","Школа","Детский сад","Колледж","Университет","Рынок","Кафе/Рестораны","ТЦ","Супермаркет","Магазин","Аптека","Больница","Автобусная остановка"]}]}]}},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Квартиры"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая квартира)"})},{type:o.Items,columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Холодильник","Стиральная машина","Телевизор","Интернет","Мусоропровод","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Кондиционер","Пылесос","Утюг","Умный дом","Решетки на окнах","Пожарная сигнализация","Видеонаблюдение","Сигнализация","Разгрузочный пандус","Цоколь","Подвал","Гардеробная","Терраса","Торец","Собственное обслуживающее ТСЖ","Консьерж","Угловой","Вдоль дороги"]},{type:o.Items,columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Закрытый двор","Шлагбаум","Детская площадка","Барбекю зона","Спортивная площадка","Охрана","Парковая зона","Школа","Детский сад","Колледж","Университет","Рынок","Кафе/Рестораны","ТЦ","Супермаркет","Магазин","Аптека","Больница","Автобусная остановка","Ж/Д ветка"]}]}]}},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Земля/Участок"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая Земля/Участок)"})},{type:o.Items,columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Забор","Катлаван","Сарай","Огород","Самострой","Угловой","Пожарная сигнализация","Видеонаблюдение","Сигнализация","Разгрузочный пандус"]},{type:o.Items,columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Закрытый двор","Шлагбаум","Детская площадка","Охрана","Спортивная площадка","Парковая зона","Школа","Детский сад","Колледж","Университет","Рынок","Кафе/Рестораны","ТЦ","Супермаркет","Магазин","Аптека","Больница","Автобусная остановка","Ж/Д ветка"]}]}]}}],Xc=[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Основная информация"})},{type:o.Text,outlined:!1,name:"zagolovok",title:"Заголовок",placeholder:"Введите текст"},{type:o.Items,outlined:!1,columns:"4",name:"kategoriya_obekta",title:"Категория объекта",itemList:["Коммерческая","Жилая","От застройщика"]},{type:o.Items,outlined:!1,columns:"4",name:"prodazha",title:"Покупка",itemList:["Прямая продажа","Рассрочка","Через банк","Обмен"]},{type:o.Items,outlined:!1,columns:"4",name:"arenda",title:"Аренда",itemList:["Долгосрочная","Ежемесячная","Посуточная"]},{type:o.Combo,outlined:!1,columns:"4",name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>ze(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок","Здания","Базы"]},{type:o.Combo,outlined:!1,columns:"4",name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>!ze(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок"]},{type:o.Combo,columns:"4",outlined:!1,name:"istochnik",title:"Источник",itemList:["По звонку","Личные связи","Самостоятельный поиск","Риелтор","С сайта","Прибытие в офис","OLX","Facebook","Instagram","Telegram","Эксклюзив","Другое"]},{type:o.Combo,isVisible:e=>!(!ze(e.podkategoriya_obekta,"Квартиры")||!ze(e.kategoriya_obekta,"Коммерческая","Жилая")),columns:"4",outlined:!1,name:"tip_nedvizhimosti",title:"Тип недвижимости",itemList:["Вторичное жилье","Новостройка"]},{type:o.Combo,isVisible:e=>{let t=!1;return t=t||ze(e.podkategoriya_obekta,"Дома"),t},columns:"4",outlined:!1,name:"vid_obekta",title:"Вид объекта",itemList:["Дом","Коттедж","Таунхаус","ЖАКТ","Часть дома","Дача"]},{type:o.Items,isVisible:e=>{let t=!1;return t=t||ze(e.kategoriya_obekta,"Коммерческая"),t=t&&!ze(e.podkategoriya_obekta,"Дома"),t=t&&!ze(e.podkategoriya_obekta,"Земля/Участок"),t=t&&!ze(e.podkategoriya_obekta,"Квартиры"),t},columns:"4",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:o.Combo,isVisible:e=>{let t=!1;return t=t||ze(e.podkategoriya_obekta,"Земля/Участок"),t},columns:"4",outlined:!1,name:"vid_liczenzii",title:"Вид лицензии",itemList:["Коммерческая","Жилая"]}]},...Yc,{type:o.Group,columns:"12",fieldRightMargin:"0",fieldBottomMargin:"0",fields:[{type:o.Fragment,isVisible:e=>{let t=!1;return t=t||null!==e.podkategoriya_obekta,t=t||null!==e.kategoriya_obekta,t},child:{type:o.Group,style:{height:"100%"},fieldRightMargin:"0",fieldBottomMargin:"0",fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Описание объекта"})},{type:o.Text,inputRows:3,outlined:!1,name:"opisanie",title:"Описание"}]}]}}]},...Kc,...Gc,...$c];window.bid_filters=Xc;const Jc=()=>It(os.bidViewService.paginate,{onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1),fallback:os.errorService.handleGlobalError}),Zc=[{type:o.Box,noBaseline:!0,sx:{display:"grid",gridTemplateColumns:"auto auto 1fr auto","& > .MuiGrid-root":{minWidth:"275px"},minWidth:"calc(275px * 3)",mt:-1},fields:[{type:o.Choose,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",choose:async(e,t)=>{t.pickUser(e.system_created_by?[e.system_created_by]:[]);const a=await t.userResultSubject.toPromise();if(a&&a.length){const[e]=a;return e}return null},tr:async e=>{const t=await os.userViewService.tryRead(e);return[null==t?void 0:t.last_name,null==t?void 0:t.first_name,null==t?void 0:t.middle_name].filter((e=>e)).join(" ")||(null==t?void 0:t.$id)||""},name:"system_created_by",title:"",placeholder:"Создал"},{type:o.Choose,sx:{minWidth:"100% !important"},fieldBottomMargin:"0",fieldRightMargin:"3",columns:"4",choose:async(e,t)=>{t.pickContact(e.contact_id?[e.contact_id]:[]);const a=await t.contactResultSubject.toPromise();if(a&&a.length){const[e]=a;return e}return null},tr:async e=>{const t=await os.contactViewService.tryRead(e);return(null==t?void 0:t.fio)||(null==t?void 0:t.id)||""},name:"contact_id",title:"",placeholder:"Контакт"},{type:o.Div},{type:o.Text,fieldRightMargin:"1",fieldBottomMargin:"0",inputFormatterTemplate:"0000000000",inputFormatterAllowed:/^[0-9]/,name:"index",title:"",leadingIcon:()=>se(me,{sx:{height:20,width:20,display:"flex",alignItems:"center",justifyContent:"center"},children:se(Ae,{textTransform:"lowercase",variant:"caption",children:"№"})}),placeholder:"",trailingIcon:()=>se(Gt,{sx:{opacity:.5}}),trailingIconClick(e,t,a){e&&a("")}}]}],Qc=()=>{const{filterData:e,handleFilter:t,payload:a,loading:i}=Yt(),{pickData:o,render:l,resultSubject:r}=nd({payload:a}),{pickData:n,render:s,resultSubject:d}=pd({payload:a});return se(me,{sx:{mb:1},children:[se(Nt,{sx:{height:"100%",minHeight:48},hideOverflowY:!0,children:se(me,{sx:{display:"flex",alignItems:"center",justifyContent:"stretch",pt:1,pb:1},children:se(Ge,{handler:e,fields:Zc,readonly:i,change:(e,a)=>{a||t(e)},payload:()=>({...a,pickUser:o,userResultSubject:r,pickContact:n,contactResultSubject:d}),fieldDebounce:$o})})}),s(),l()]})},em=({payload:e,features:t})=>{const a=Jc(),i=ne(),{columns:o}=ed({storageKey:"bid_columns",columns:Hc}),{pickData:l,render:r,open:n}=Ut({title:"Выбор заявки",AfterTitle:({onClose:e})=>se(_e,{size:"small",onClick:e,children:se(Ue,{})}),withSearch:!0,withLoader:!0,withSingleChip:!0,noInitialFilters:!0,fetchDebounce:$o,reloadSubject:os.userViewService.reloadSubject,selectionMode:$t.Single,onSubmit:e=>(i.next(e),!0),AfterOperationList:Qc,filterLabel:"Выбрать заявку",filters:Xc,chips:Wc,columns:o,handler:a,payload:e,features:t});return{pickData:l,render:r,resultSubject:i,open:n}},tm=[{type:o.Group,style:{minWidth:540},fields:[{type:o.Combo,title:"Тип сделки",isInvalid:e=>e.deal_type?null:"Укажите тип сделки",name:"deal_type",map:(e,t)=>{const{prod_czena:a,prod_startovaya_czena:i=a,prod_kom_czena:o,prod_kom_startovaya_czena:l=o,rent_czena:r,rent_startovaya_czena:n=r,rent_kom_czena:s,rent_kom_startovaya_czena:d=s,prod_czena_valyuta:c="usd",rent_czena_valyuta:m="usd"}=t.data;return e.deal_type&&"Продажа"===e.deal_type[0]&&(h.set(e,"price",i||l),h.set(e,"unit",[c||"usd"])),e.deal_type&&"Аренда"===e.deal_type[0]&&(h.set(e,"price",n||d),h.set(e,"unit",[m||"usd"])),e},itemList:()=>[...yr]},{type:o.Box,isVisible:({deal_type:e,price_type:t})=>!!e&&"fixed"===t,style:{display:"grid",gridTemplateColumns:"1fr 125px"},fields:[{type:o.Text,outlined:!1,placeholder:"Не указано",labelShrink:!0,name:"price",title:"Цена (Итог)"},{type:o.Combo,noDeselect:!0,fieldBottomMargin:"0",title:"Валюта",placeholder:"USD",itemList:["usd","uzs"],tr:e=>"uzs"===e?"SUM":"USD",defaultValue:"usd",outlined:!1,name:"unit"}]},{type:o.Text,fieldBottomMargin:"1",placeholder:"Введите комментарий",inputRows:3,labelShrink:!0,name:"comment",title:"Комментарий"},{hidden:!0,type:o.Radio,fieldBottomMargin:"0",name:"price_type",radioValue:"unset",defaultValue:"unset",title:"Цена не указана"},{hidden:!0,type:o.Radio,fieldBottomMargin:"0",name:"price_type",radioValue:"fixed",title:"Фиксированная"}]}],am=[{type:o.Choose,fieldBottomMargin:"1",isInvalid:e=>e.target_bid_id?null:"Укажите заявку",choose:async(e,t)=>{t.pickBid(e.target_bid_id?[e.target_bid_id]:[]);const a=await t.bidResultSubject.toPromise();if(a&&a.length){const[e]=a;return e}return null},tr:async e=>{const t=await os.bidViewService.tryRead(e);return(null==t?void 0:t.zagolovok)||(null==t?void 0:t.$id)||""},name:"target_bid_id",title:"Выберите заявку",placeholder:"Не выбрано"},{type:o.Text,fieldBottomMargin:"1",placeholder:"Введите комментарий",inputRows:3,labelShrink:!0,name:"comment",title:"Комментарий"},{type:o.Radio,fieldBottomMargin:"0",title:"Закрытая сделка",name:"status",radioValue:"Закрытая сделка",defaultValue:"Закрытая сделка"},{type:o.Radio,fieldBottomMargin:"0",title:"Сделка сорвана",name:"status",radioValue:"Сделка сорвана"}],im=[{action:"deal-end-action",label:"Завершить сделку",isDisabled:({activeItem:e})=>!e}],om=[{type:o.Paper,isVisible:(e,{hideAutofindFlag:t})=>!t,features:["hasResponsiblePermission"],fieldBottomMargin:"1",fieldRightMargin:"1",columns:"12",fields:[{type:o.Component,element:({id:e,payload:t,features:a,_fieldData:i})=>{const[o,l]=re.useState(null),[r,n]=re.useState(null),s=re.useMemo((()=>({...o,occupiedBy:r})),[o,r]),{pickData:d,render:c,resultSubject:m}=em({payload:t,features:a}),{loading:u,execute:p}=Re((async()=>{const t=os.appwriteService.currentUser.$id,a=await os.dealHistoryRequestService.readDealStateByApartment(e,t),i=await os.dealViewService.findOccupiedByTargetApartmentId(e);l(a),n(i)}),{onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1),fallback:os.errorService.handleGlobalError}),{handleLoadStart:y,handleLoadEnd:b}=Oe({history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)}),v=Ne({large:!0,title:"Завершение сделки",fields:am,payload:()=>({...t,pickBid:d,bidResultSubject:m}),features:a}),_=Ne({large:!0,title:"Начало сделки",fields:tm,payload:()=>({...t,data:i}),features:a});re.useEffect((()=>os.dealHistoryViewService.createSubject.subscribe((t=>{t.apartment_id===e&&p()}))),[]),re.useEffect((()=>{p()}),[]);const g=()=>{_().then((async t=>{if(!t)return;const a=t.deal_type?t.deal_type[0]:"";if(!a)return;let i=[],o="usd";"fixed"===t.price_type&&(i=[t.price],o=t.unit?t.unit[0]:"usd"),(async(t,a=[],i="usd",o="")=>{let l=!0;y();try{const l=os.appwriteService.currentUser.$id;await os.dealHistoryRequestService.commitApartmentDealBegin(e,l,t,a,i,o),await p()}catch(r){os.alertService.notify(xn(r)),l=!1}finally{b(l)}})(a,i,o,t.comment)}))},f=async()=>{let t=!0;y();try{const t=os.appwriteService.currentUser.$id;await os.dealHistoryRequestService.commitApartmentDealReassign(e,t),await p()}catch(a){t=!1}finally{b(t)}},k=t=>{"deal-end-action"===t&&v().then((t=>{t&&(async(t,a,i)=>{let o=!0;y();try{os.appwriteService.currentUser.$id,await os.dealRequestService.commitApartmentDealEnd(e,t,a,i),await p()}catch(l){o=!1}finally{b(o)}})(t.target_bid_id,t.status,t.comment)}))};return se(we,{style:{pointerEvents:"all"},direction:"column",children:[se(Ae,{variant:"body1",sx:{mt:-.5,mb:1,color:e=>e.palette.action.active,fontWeight:"bold"},children:"Сделка"}),se(we,{direction:"column",gap:"16px",children:[se(we,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[se(ye,{loading:u,Loader:()=>se(we,{direction:"row",gap:"16px",alignItems:"center",children:[se(vt,{variant:"circular",width:40,height:40}),se(we,{children:[se(vt,{sx:{mb:1},variant:"rectangular",width:210,height:20}),se(vt,{variant:"rectangular",width:210,height:20})]})]}),payload:s,children:async e=>{if(e.occupiedBy)return se(Ae,{variant:"body1",children:["Сделка в статусе"," ",se(Ht,{href:"#",onClick:()=>Z("/deal"),children:e.occupiedBy.status})]});if(!(null==e?void 0:e.activeItem))return se(Ae,{variant:"body1",children:"Сделка не создана"});const{first_name:t="Не указано",user_role:a,avatar:i=null}=await os.userViewService.read(e.activeItem.user_id),o=i?await os.appwriteService.getImageURL(i):"",l=await os.dictService.getUserRoles();return se(we,{direction:"row",gap:"16px",alignItems:"center",children:[se(_t,{alt:t,src:o}),se(we,{direction:"column",children:[se(Ae,{variant:"body1",children:t}),se(Ae,{variant:"caption",style:{fontSize:"14px"},children:(null==a?void 0:a.length)?h.get(l,a[0])||a[0]:"Не указано"})]})]})}}),se(we,{direction:"row",gap:1,alignItems:"center",children:[se(ye,{loading:u,Loader:()=>se(vt,{variant:"rectangular",sx:{borderRadius:"4px"},width:100,height:35}),payload:s,children:async t=>{if(t.occupiedBy)return null;if(await os.permissionRequestService.hasReassignDelayFlagByApartmentId(e))return se(ot,{disabled:!0,variant:"contained",children:"Сделка активна"});if(null==t?void 0:t.activeItem){const e=os.appwriteService.currentUser.$id,a=t.activeItem.user_id===e;return se(ot,{disabled:a,onClick:f,variant:"contained",children:a?"Сделка создана":"Забрать сделку"})}return se(ot,{onClick:g,variant:"contained",children:"Создать сделку"})}}),se(ye,{loading:u,Loader:()=>se(vt,{variant:"circular",width:40,height:40}),payload:s,children:async e=>se(na,{transparent:!0,options:im,payload:e,onAction:k})})]})]}),se(ye,{loading:u,Loader:()=>se(qa,{max:Number.POSITIVE_INFINITY,style:{marginRight:"auto"},children:[se(vt,{variant:"circular",width:28,height:28}),se(vt,{variant:"circular",width:28,height:28}),se(vt,{variant:"circular",width:28,height:28})]}),payload:s,children:async e=>{var t;if(!(null==(t=null==e?void 0:e.reassign)?void 0:t.length))return null;const a=await Promise.all(e.reassign.filter(((e,t,a)=>a.findIndex((({user_id:t})=>t===e.user_id))==t)).map((async({user_id:e})=>{const t=await os.userViewService.tryRead(e);let a="";return(null==t?void 0:t.avatar)&&(a=await os.appwriteService.getImageURL(t.avatar)),se(_t,{style:{height:"28px",width:"28px"},alt:null==t?void 0:t.email,src:a})})));return se(qa,{max:Number.POSITIVE_INFINITY,style:{marginRight:"auto"},children:a})}})]}),c()]})}}]},{type:o.Paper,innerPadding:"0",features:["hasResponsiblePermission"],fieldBottomMargin:"1",fieldRightMargin:"1",columns:"12",fields:[{type:o.Component,element:({system_created_by:e,system_only_for_owner:t,system_allowance:a})=>{const{classes:i}=lc();return se(we,{style:{pointerEvents:"all"},direction:"column",children:[se(Ae,{variant:"body1",sx:{m:2,color:e=>e.palette.action.active,fontWeight:"bold"},children:"Доступ"}),se(rt,{disablePadding:!0,dense:!0,children:se(ye,{deps:[t,a],children:async()=>{const o=[];return e&&o.push(e),a&&a.forEach((e=>o.push(e))),o.length?se(Se,{children:await Promise.all(o.filter(((e,t,a)=>a.indexOf(e)==t)).map((async(a,o)=>{var l;const r=await os.userViewService.read(a),n=r.avatar?await os.appwriteService.getImageURL(r.avatar):"",s=await os.dictService.getUserRoles(),d=[r.last_name,r.first_name,r.middle_name].filter((e=>e)).join(" "),c=(null==(l=r.user_role)?void 0:l.length)?h.get(s,r.user_role[0])||r.user_role[0]:"Не указано";return se(ht,{className:ue({[i.listItemAccient]:o%2==0}),children:[se(bt,{children:se(_t,{src:n})}),se(dt,{primary:d,secondary:r.phone||c}),a===e&&se(we,{gap:1,direction:"row",children:[se(fa,{label:"Создал объект",color:"info"}),!!t&&se(fa,{label:"Эксклюзив",color:"warning"})]})]})})))}):se(Ae,{sx:{m:2,mt:-.5},children:"Все пользователи"})}})})]})}}]},{type:o.Group,fieldRightMargin:"0",fieldBottomMargin:"0",columns:"12",fields:[{type:o.Paper,columns:"6",fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>ys(e,"kategoriya_obekta","podkategoriya_obekta","arenda","prodazha","istochnik"),fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Основная информация"})},{type:o.Text,isVisible:e=>ys(e,"zagolovok"),outlined:!1,name:"zagolovok",title:"Заголовок",placeholder:"Введите текст"},{type:o.Text,isVisible:e=>ys(e,"kategoriya_obekta"),outlined:!1,compute:({kategoriya_obekta:e})=>(null==e?void 0:e.flatMap((e=>e)).join(", "))||"",title:"Категория объекта"},{type:o.Text,isVisible:e=>ys(e,"podkategoriya_obekta"),outlined:!1,compute:({podkategoriya_obekta:e})=>e||"",title:"Подкатегория объекта"},{type:o.Text,isVisible:e=>ys(e,"arenda","prodazha"),outlined:!1,compute:({arenda:e,prodazha:t})=>t&&e?"Продажа, Аренда":t?"Продажа":e?"Аренда":"Не задано",title:"Тип сделки"},{type:o.Text,isVisible:e=>ys(e,"strana"),outlined:!1,columns:"6",compute:({strana:e})=>e||"",title:"Страна"},{type:o.Text,isVisible:e=>ys(e,"oblast"),outlined:!1,columns:"6",compute:({oblast:e})=>e||"",title:"Область"},{type:o.Text,isVisible:e=>ys(e,"gorod"),outlined:!1,compute:({gorod:e})=>e||"",title:"Город"},{type:o.Text,isVisible:e=>ys(e,"ulicza"),outlined:!1,compute:({ulicza:e})=>{const t=[e?e.toLowerCase().includes("улица")?e:"улица ".concat(e):null].filter((e=>e));return t.length?t.flatMap((e=>e)).join(", "):"Не указан"},title:"Адрес"},{type:o.Text,isVisible:e=>ys(e,"rajon"),outlined:!1,compute:({rajon:e})=>e||"",title:"Район"},{type:o.Text,isVisible:e=>ys(e,"mahallya"),outlined:!1,compute:({mahallya:e})=>e||"",title:"Махалля"},{type:o.Text,isVisible:e=>ys(e,"orientir"),outlined:!1,compute:({orientir:e})=>e||"",title:"Ориентир"},{type:o.Text,isVisible:e=>ys(e,"metro"),outlined:!1,compute:({metro:e})=>e||"",title:"Метро"},{type:o.Fragment,isVisible:e=>{let t=!1;return t=t||ze(e.podkategoriya_obekta,"Квартиры"),t},fields:[{type:o.Text,isVisible:e=>ys(e,"nomer_doma"),features:["hasApartmentHouseNumberPermission"],columns:"6",outlined:!1,name:"nomer_doma",title:"№ дома"},{type:o.Text,isVisible:e=>ys(e,"nomer_kvartiry"),features:["hasApartmentHouseNumberPermission"],columns:"6",outlined:!1,name:"nomer_kvartiry",title:"№ квартиры"}]},{type:o.Fragment,isVisible:e=>{let t=!1;return t=t||null!==e.kategoriya_obekta,t=t||null!==e.podkategoriya_obekta,t=t&&!ze(e.podkategoriya_obekta,"Квартиры"),t},fields:[{type:o.Text,isVisible:e=>ys(e,"nomer_doma"),features:["hasApartmentHouseNumberPermission"],outlined:!1,name:"nomer_doma",title:"№ дома"}]},{type:o.Text,isVisible:e=>ys(e,"istochnik"),outlined:!1,compute:({istochnik:e})=>e||"",title:"Источник"},{type:o.Component,isVisible:e=>ys(e,"tip_klienta"),fieldBottomMargin:"2",element:({contact_id:e})=>se(ye,{payload:e,Loader:()=>se(ta,{fullWidth:!0,variant:"standard",label:"Тип клиента",InputProps:{readOnly:!0},value:"Загрузка"}),children:async()=>{const t=await os.contactViewService.tryRead(e),a=(null==t?void 0:t.tip_klienta)||"";return se(ta,{fullWidth:!0,variant:"standard",label:"Тип клиента",InputProps:{readOnly:!0},value:a})}})},{type:o.Text,isVisible:e=>{let t=!0;return t=t&&ze(e.podkategoriya_obekta,"Квартиры"),t=t&&ze(e.kategoriya_obekta,"Коммерческая","Жилая"),$(t,ys(e,"tip_nedvizhimosti"))},outlined:!1,compute:({tip_nedvizhimosti:e})=>e||"",title:"Тип недвижимости"},{type:o.Text,isVisible:e=>{let t=!0;return t=t&&ze(e.podkategoriya_obekta,"Квартиры"),t=t&&ze(e.kategoriya_obekta,"Коммерческая","Жилая"),$(t,ys(e,"nazvanie_zhk"))},outlined:!1,compute:({nazvanie_zhk:e})=>e||"",title:"Название ЖК"}]},{type:o.Group,style:{height:"100%"},columns:"6",fields:[{type:o.Component,style:{height:"100%"},fieldRightMargin:"1",fieldBottomMargin:"1",isVisible:e=>{let t=!1;return t=t||null!==e.arenda,t=t||null!==e.prodazha,t},element:({onChange:e,_fieldData:t,features:a})=>se(Kd,{withTransparentHeader:!0,readonly:!0,withRentTab:null!==t.arenda,withSellTab:null!==t.prodazha,onChange:e,fieldData:t,isViewMode:!a.includes("hasCommissionPermission")})}]}]},{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.podkategoriya_obekta,"Квартиры"),t=t&&ze(e.kategoriya_obekta,"Жилая"),t=t&&!ze(e.kategoriya_obekta,"Коммерческая"),t},fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилая квартира)"})},{type:o.Text,columns:"3",outlined:!1,compute:({kolichestvo_komnat:e})=>e||"",isVisible:e=>ys(e,"kolichestvo_komnat"),title:"Количество комнат"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,placeholder:"Нет данных",compute:e=>[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma"),title:"Тип строения"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,placeholder:"Нет данных",compute:e=>[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"balkon","balkon_kvartira","balkon_doma"),title:"Балкон"},{type:o.Text,columns:"3",outlined:!1,compute:({etazh:e})=>e||"",isVisible:e=>ys(e,"etazh"),title:"Этаж"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,placeholder:"Нет данных",compute:({tip_planirovki:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"tip_planirovki"),title:"Тип планировки"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"lift_kommercziya","lift_kvartira","lift_dom"),title:"Лифт"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,placeholder:"Нет данных",compute:e=>[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sanuzel","sanuzel_kvartira","sanuzel_doma"),title:"Санузел"},{type:o.Text,columns:"3",outlined:!1,compute:({etazhnost:e})=>e||"",isVisible:e=>ys(e,"etazhnost"),title:"Этажность"},{type:o.Text,columns:"3",outlined:!1,placeholder:"Нет данных",compute:({zhilaya_ploshhad:e})=>e||"",isVisible:e=>ys(e,"zhilaya_ploshhad"),title:"Жилая площадь М²"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,placeholder:"Нет данных",compute:e=>[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"mebel","mebel_kvartira","mebel_dom"),title:"Мебель"},{type:o.Text,columns:"3",outlined:!1,placeholder:"Нет данных",compute:({vysota_potolkov:e})=>e||"",isVisible:e=>ys(e,"vysota_potolkov"),title:"Высота потолков"},{type:o.Text,columns:"3",outlined:!1,placeholder:"Нет данных",compute:({obshhaya_ploshhad:e,ploshhad_doma:t})=>[e,t].flatMap((e=>e)).join(" "),isVisible:e=>ys(e,"obshhaya_ploshhad","ploshhad_doma"),title:"Общая площадь М²"},{type:o.Text,columns:"3",outlined:!1,compute:({kolichestvo_spalen:e})=>e||"",isVisible:e=>ys(e,"kolichestvo_spalen"),title:"Количество спален"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:"Система отопления"},{type:o.Text,columns:"3",outlined:!1,compute:({kod_domofona:e})=>e||"",isVisible:e=>ys(e,"kod_domofona"),title:"Код домофона"},{type:o.Text,columns:"3",outlined:!1,compute:({spalnya_sanuzel:e})=>e||"",isVisible:e=>ys(e,"spalnya_sanuzel"),title:"Комната + санузел"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,placeholder:"Нет данных",compute:({energonositel_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"energonositel_obekta"),title:"Энергоноситель объекта"},{type:o.Text,columns:"3",outlined:!1,placeholder:"Нет данных",compute:({podezd_nomer:e})=>e||"",isVisible:e=>ys(e,"podezd_nomer"),title:"Подъезд №"},{type:o.Text,columns:"3",outlined:!1,placeholder:"Нет данных",compute:({rasstoyanie_do_metro:e})=>e||"",isVisible:e=>ys(e,"rasstoyanie_do_metro"),title:"Расстояние до метро (м)"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,placeholder:"Нет данных",compute:({vid_iz_okna:e,vid_iz_okna_dom:t})=>[...e||[],...t||[]].reduce(((e,t)=>e.includes(t)?e:[...e,t]),[]).filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"vid_iz_okna","vid_iz_okna_dom"),title:"Вид из окна"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"parkovka","parkovka_kvartira","parkovka_zemlya"),title:"Парковка"},{type:o.Text,columns:"3",outlined:!1,compute:({god_postrojki:e})=>e||"",isVisible:e=>ys(e,"god_postrojki"),title:"Год постройки"}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.podkategoriya_obekta,"Дома"),t=t&&ze(e.kategoriya_obekta,"Жилая"),t=t&&!ze(e.kategoriya_obekta,"Коммерческая"),t},fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилой дом)"})},{type:o.Text,columns:"3",outlined:!1,placeholder:"Нет данных",compute:({kolichestvo_komnat:e})=>e||"",isVisible:e=>ys(e,"kolichestvo_komnat"),title:"Количество комнат"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,placeholder:"Нет данных",compute:({sostoyanie_doma:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sostoyanie_doma"),title:"Состояние дома"},{type:o.Text,columns:"3",outlined:!1,placeholder:"Нет данных",compute:({god_postrojki:e})=>e||"",isVisible:e=>ys(e,"god_postrojki"),title:"Год постройки"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma"),title:"Тип строения"},{type:o.Text,columns:"3",outlined:!1,placeholder:"Нет данных",compute:({etazhnost:e})=>e||"",isVisible:e=>ys(e,"etazhnost"),title:"Этажность"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"balkon","balkon_kvartira","balkon_doma"),title:"Балкон"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({tip_planirovki:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"tip_planirovki"),title:"Тип планировки"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({bassejn:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"bassejn"),title:"Бассейн"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_doma:e})=>e||"",isVisible:e=>ys(e,"ploshhad_doma"),title:"Площадь дома М²"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sanuzel","sanuzel_kvartira","sanuzel_doma"),title:"Санузел"},{type:o.Text,columns:"3",outlined:!1,compute:({mashina_mesto:e})=>e||"",isVisible:e=>ys(e,"mashina_mesto"),title:"Машина-место"},{type:o.Text,columns:"3",outlined:!1,compute:({kolichestvo_spalen:e})=>e||"",isVisible:e=>ys(e,"kolichestvo_spalen"),title:"Количество спален"},{type:o.Text,columns:"3",outlined:!1,compute:({kolichestvo_sotok:e})=>e||"",isVisible:e=>ys(e,"kolichestvo_sotok"),title:"Количество соток"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"lift_kommercziya","lift_kvartira","lift_dom"),title:"Лифт"},{type:o.Text,columns:"3",outlined:!1,compute:({spalnya_sanuzel:e})=>e||"",isVisible:e=>ys(e,"spalnya_sanuzel"),title:"Комната + санузел"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:"Система отопления"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"mebel","mebel_kvartira","mebel_dom"),title:"Мебель"},{type:o.Text,columns:"3",outlined:!1,compute:({rasstoyanie_do_metro:e})=>e||"",isVisible:e=>ys(e,"rasstoyanie_do_metro"),title:"Расстояние до метро (м)"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"gaz","gaz_dom","gaz_zemlya"),title:"Газ"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:"Система кондиционирования"},{type:o.Text,columns:"3",outlined:!1,compute:({vysota_potolkov:e})=>e||"",isVisible:e=>ys(e,"vysota_potolkov"),title:"Высота потолков"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya"),title:"Электричество"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({vid_iz_okna:e,vid_iz_okna_dom:t})=>[...e||[],...t||[]].reduce(((e,t)=>e.includes(t)?e:[...e,t]),[]).filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"vid_iz_okna","vid_iz_okna_dom"),title:"Вид из окна"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({garazh:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"garazh"),title:"Гараж"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya"),title:"Канализация"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({raspolozhenie_doma:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"raspolozhenie_doma"),title:"Расположение дома"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya"),title:"Местоположение объекта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.voda,e.voda_dom,e.voda_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"voda","voda_dom","voda_zemlya"),title:"Вода"}]},{type:o.Fragment,isVisible:e=>(!ze(e.podkategoriya_obekta,"Земля/Участок")||!ze(e.kategoriya_obekta,"Коммерческая"))&&((!ze(e.podkategoriya_obekta,"Дома")||!ze(e.kategoriya_obekta,"Коммерческая"))&&((!ze(e.podkategoriya_obekta,"Квартиры")||!ze(e.kategoriya_obekta,"Коммерческая"))&&ze(e.kategoriya_obekta,"Коммерческая"))),fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая недвижимость)"})},{type:o.Text,columns:"3",outlined:!1,compute:({kolichestvo_komnat:e})=>e||"",isVisible:e=>ys(e,"kolichestvo_komnat"),title:"Количество комнат"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:"Назначение объекта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_obekta,e["sostoyanie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sostoyanie_obekta","sostoyanie-obekta_zemlya"),title:"Состояние объекта"},{type:o.Text,columns:"3",outlined:!1,compute:({poleznaya_ploshhad:e})=>e||"",isVisible:e=>ys(e,"poleznaya_ploshhad"),title:"Полезная площадь М²"},{type:o.Text,columns:"3",outlined:!1,compute:({etazh:e})=>e||"",isVisible:e=>ys(e,"etazh"),title:"Этаж"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},{type:o.Text,columns:"3",outlined:!1,compute:({mashina_mesto:e})=>e||"",isVisible:e=>ys(e,"mashina_mesto"),title:"Машина-место"},{type:o.Text,columns:"3",outlined:!1,compute:({kolichestvo_sotok:e})=>e||"",isVisible:e=>ys(e,"kolichestvo_sotok"),title:"Количество соток"},{type:o.Text,columns:"3",outlined:!1,compute:({etazhnost:e})=>e||"",isVisible:e=>ys(e,"etazhnost"),title:"Этажность"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma"),title:"Тип строения"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"parkovka","parkovka_kvartira","parkovka_zemlya"),title:"Парковка"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sanuzel","sanuzel_kvartira","sanuzel_doma"),title:"Санузел"},{type:o.Text,columns:"3",outlined:!1,compute:({obshhaya_ploshhad:e,ploshhad_doma:t})=>[e,t].filter((e=>e)).flatMap((e=>e)).join(" "),isVisible:e=>ys(e,"obshhaya_ploshhad","ploshhad_doma"),title:"Общая площадь М²"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"balkon","balkon_kvartira","balkon_doma"),title:"Балкон"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.voda,e.voda_dom,e.voda_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"voda","voda_dom","voda_zemlya"),title:"Вода"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya"),title:"Канализация"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"lift_kommercziya","lift_kvartira","lift_dom"),title:"Лифт"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:"Система отопления"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"gaz","gaz_dom","gaz_zemlya"),title:"Газ"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"mebel","mebel_kvartira","mebel_dom"),title:"Мебель"},{type:o.Text,columns:"3",outlined:!1,compute:({rasstoyanie_do_metro:e})=>e||"",isVisible:e=>ys(e,"rasstoyanie_do_metro"),title:"Расстояние до метро (м)"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya"),title:"Электричество"},{type:o.Text,columns:"3",outlined:!1,compute:({god_postrojki:e})=>e||"",isVisible:e=>ys(e,"god_postrojki"),title:"Год постройки"},{type:o.Text,columns:"3",outlined:!1,compute:({vysota_potolkov:e})=>e||"",isVisible:e=>ys(e,"vysota_potolkov"),title:"Высота потолков"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya"),title:"Местоположение объекта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:"Система кондиционирования"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({raspolozhenie_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"raspolozhenie_obekta"),title:"Расположение объекта"}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.podkategoriya_obekta,"Земля/Участок"),t=t&&ze(e.kategoriya_obekta,"Жилая"),t=t&&!ze(e.kategoriya_obekta,"Коммерческая"),t},fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Жилая земля/участок)"})},{type:o.Text,columns:"3",outlined:!1,compute:({kolichestvo_komnat:e})=>e||"",title:"Количество комнат",isVisible:e=>ys(e,"kolichestvo_komnat")},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:"Назначение объекта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({tip_zemli_uchastka:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"tip_zemli_uchastka"),title:"Тип земли/участка"},{type:o.Text,columns:"3",outlined:!1,compute:({poleznaya_ploshhad:e})=>e||"",isVisible:e=>ys(e,"poleznaya_ploshhad"),title:"Полезная площадь М²"},{type:o.Text,columns:"3",outlined:!1,compute:({etazh:e})=>e||"",isVisible:e=>ys(e,"etazh"),title:"Этаж"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_obekta,e["sostoyanie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sostoyanie_obekta","sostoyanie-obekta_zemlya"),title:"Состояние объекта"},{type:o.Text,columns:"3",outlined:!1,compute:({mashina_mesto:e})=>e||"",isVisible:e=>ys(e,"mashina_mesto"),title:"Машина-место"},{type:o.Text,columns:"3",outlined:!1,compute:({kolichestvo_sotok:e})=>e||"",isVisible:e=>ys(e,"kolichestvo_sotok"),title:"Количество соток"},{type:o.Text,columns:"3",outlined:!1,compute:({etazhnost:e})=>e||"",isVisible:e=>ys(e,"etazhnost"),title:"Этажность"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"parkovka","parkovka_kvartira","parkovka_zemlya"),title:"Парковка"},{type:o.Text,columns:"3",outlined:!1,compute:({rasstoyanie_do_metro:e})=>e||"",isVisible:e=>ys(e,"rasstoyanie_do_metro"),title:"Расстояние до метро (м)"},{type:o.Text,columns:"3",outlined:!1,compute:({obshhaya_ploshhad:e,ploshhad_doma:t})=>[e,t].filter((e=>e)).flatMap((e=>e)).join(" "),isVisible:e=>ys(e,"obshhaya_ploshhad","ploshhad_doma"),title:"Общая площадь М²"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.voda,e.voda_dom,e.voda_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"voda","voda_dom","voda_zemlya"),title:"Вода"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya"),title:"Местоположение объекта"},{type:o.Text,columns:"3",outlined:!1,compute:({rasstoyanie_do_goroda:e})=>e||"",isVisible:e=>ys(e,"rasstoyanie_do_goroda"),title:"Расстояние до города (м)"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:"Система отопления"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({podezdnye_puti:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"podezdnye_puti"),title:"Подъездные пути"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:"Система кондиционирования"},{type:o.Text,columns:"3",outlined:!1,compute:({god_postrojki:e})=>e||"",isVisible:e=>ys(e,"god_postrojki"),title:"Год постройки"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya"),title:"Электричество"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"gaz","gaz_dom","gaz_zemlya"),title:"Газ"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya"),title:"Канализация"}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.podkategoriya_obekta,"Квартиры"),t=t&&U($(ze(e.kategoriya_obekta,"Коммерческая"),ze(e.kategoriya_obekta,"Жилая")),$(ze(e.kategoriya_obekta,"Коммерческая"),!ze(e.kategoriya_obekta,"Жилая"))),t},fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая квартира)"})},{type:o.Text,columns:"3",outlined:!1,compute:({kolichestvo_komnat:e})=>e||"",isVisible:e=>ys(e,"kolichestvo_komnat"),title:"Количество комнат"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:"Назначение объекта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma"),title:"Тип строения"},{type:o.Text,columns:"3",outlined:!1,compute:({etazh:e})=>e||"",isVisible:e=>ys(e,"etazh"),title:"Этаж"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"balkon","balkon_kvartira","balkon_doma"),title:"Балкон"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({tip_planirovki:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"tip_planirovki"),title:"Тип планировки"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"lift_kommercziya","lift_kvartira","lift_dom"),title:"Лифт"},{type:o.Text,columns:"3",outlined:!1,compute:({etazhnost:e})=>e||"",isVisible:e=>ys(e,"etazhnost"),title:"Этажность"},{type:o.Text,columns:"3",outlined:!1,compute:({god_postrojki:e})=>e||"",isVisible:e=>ys(e,"god_postrojki"),title:"Год постройки"},{type:o.Text,columns:"3",outlined:!1,compute:({mashina_mesto:e})=>e||"",isVisible:e=>ys(e,"mashina_mesto"),title:"Машина-место"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sanuzel","sanuzel_kvartira","sanuzel_doma"),title:"Санузел"},{type:o.Text,columns:"3",outlined:!1,compute:({obshhaya_ploshhad:e,ploshhad_doma:t})=>[e,t].filter((e=>e)).flatMap((e=>e)).join(" "),isVisible:e=>ys(e,"obshhaya_ploshhad","ploshhad_doma"),title:"Общая площадь М²"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"parkovka","parkovka_kvartira","parkovka_zemlya"),title:"Парковка"},{type:o.Text,columns:"3",outlined:!1,compute:({zhilaya_ploshhad:e})=>e||"",isVisible:e=>ys(e,"zhilaya_ploshhad"),title:"Жилая площадь М²"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"mebel","mebel_kvartira","mebel_dom"),title:"Мебель"},{type:o.Text,columns:"3",outlined:!1,compute:({vysota_potolkov:e})=>e||"",isVisible:e=>ys(e,"vysota_potolkov"),title:"Высота потолков"},{type:o.Text,columns:"3",outlined:!1,compute:({kolichestvo_spalen:e})=>e||"",isVisible:e=>ys(e,"kolichestvo_spalen"),title:"Количество спален"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:"Система отопления"},{type:o.Text,columns:"3",outlined:!1,compute:({kod_domofona:e})=>e||"",isVisible:e=>ys(e,"kod_domofona"),title:"Код домофона"},{type:o.Text,columns:"3",outlined:!1,compute:({spalnya_sanuzel:e})=>e||"",isVisible:e=>ys(e,"spalnya_sanuzel"),title:"Комната + санузел"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"gaz","gaz_dom","gaz_zemlya"),title:"Газ"},{type:o.Text,columns:"3",outlined:!1,compute:({podezd_nomer:e})=>e||"",isVisible:e=>ys(e,"podezd_nomer"),title:"Подъезд №"},{type:o.Text,columns:"3",outlined:!1,compute:({rasstoyanie_do_metro:e})=>e||"",isVisible:e=>ys(e,"rasstoyanie_do_metro"),title:"Расстояние до метро (м)"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({vid_iz_okna:e,vid_iz_okna_dom:t})=>[...e||[],...t||[]].reduce(((e,t)=>e.includes(t)?e:[...e,t]),[]).filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"vid_iz_okna","vid_iz_okna_dom"),title:"Вид из окна"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:"Система кондиционирования"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({raspolozhenie_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"raspolozhenie_obekta"),title:"Расположение объекта"}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.podkategoriya_obekta,"Дома"),t=t&&U($(ze(e.kategoriya_obekta,"Коммерческая"),ze(e.kategoriya_obekta,"Жилая")),$(ze(e.kategoriya_obekta,"Коммерческая"),!ze(e.kategoriya_obekta,"Жилая"))),t},fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческий дом)"})},{type:o.Text,columns:"3",outlined:!1,compute:({kolichestvo_komnat:e})=>e||"",isVisible:e=>ys(e,"kolichestvo_komnat"),title:"Количество комнат"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({sostoyanie_doma:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sostoyanie_doma"),title:"Состояние дома"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya"),title:"Местоположение объекта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:"Назначение объекта"},{type:o.Text,columns:"3",outlined:!1,compute:({etazhnost:e})=>e||"",isVisible:e=>ys(e,"etazhnost"),title:"Этажность"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({raspolozhenie_obekta:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"raspolozhenie_obekta"),title:"Расположение объекта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.tip_stroeniya,e["tip-stroeniya_kvartiry"],e["tip-stroeniya_doma"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"tip_stroeniya","tip-stroeniya_kvartiry","tip-stroeniya_doma"),title:"Тип строения"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_doma:e})=>e||"",isVisible:e=>ys(e,"ploshhad_doma"),title:"Площадь дома М²"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({raspolozhenie_doma:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"raspolozhenie_doma"),title:"Расположение дома"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({tip_planirovki:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"tip_planirovki"),title:"Тип планировки"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({bassejn:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"bassejn"),title:"Бассейн"},{type:o.Text,columns:"3",outlined:!1,compute:({kolichestvo_sotok:e})=>e||"",isVisible:e=>ys(e,"kolichestvo_sotok"),title:"Количество соток"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sanuzel,e.sanuzel_kvartira,e.sanuzel_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sanuzel","sanuzel_kvartira","sanuzel_doma"),title:"Санузел"},{type:o.Text,columns:"3",outlined:!1,compute:({mashina_mesto:e})=>e||"",isVisible:e=>ys(e,"mashina_mesto"),title:"Машина-место"},{type:o.Text,columns:"3",outlined:!1,compute:({kolichestvo_spalen:e})=>e||"",isVisible:e=>ys(e,"kolichestvo_spalen"),title:"Количество спален"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.voda,e.voda_dom,e.voda_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"voda","voda_dom","voda_zemlya"),title:"Вода"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.lift_kommercziya,e.lift_kvartira,e.lift_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"lift_kommercziya","lift_kvartira","lift_dom"),title:"Лифт"},{type:o.Text,columns:"3",outlined:!1,compute:({spalnya_sanuzel:e})=>e||"",isVisible:e=>ys(e,"spalnya_sanuzel"),title:"Комната + санузел"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:"Система отопления"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mebel,e.mebel_kvartira,e.mebel_dom].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"mebel","mebel_kvartira","mebel_dom"),title:"Мебель"},{type:o.Text,columns:"3",outlined:!1,compute:({rasstoyanie_do_metro:e})=>e||"",isVisible:e=>ys(e,"rasstoyanie_do_metro"),title:"Расстояние до метро (м)"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"gaz","gaz_dom","gaz_zemlya"),title:"Газ"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:"Система кондиционирования"},{type:o.Text,columns:"3",outlined:!1,compute:({vysota_potolkov:e})=>e||"",isVisible:e=>ys(e,"vysota_potolkov"),title:"Высота потолков"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya"),title:"Электричество"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({vid_iz_okna:e,vid_iz_okna_dom:t})=>[...e||[],...t||[]].reduce(((e,t)=>e.includes(t)?e:[...e,t]),[]).filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"vid_iz_okna","vid_iz_okna_dom"),title:"Вид из окна"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({garazh:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"garazh"),title:"Гараж"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya"),title:"Канализация"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.balkon,e.balkon_kvartira,e.balkon_doma].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"balkon","balkon_kvartira","balkon_doma"),title:"Балкон"},{type:o.Text,columns:"3",outlined:!1,compute:({god_postrojki:e})=>e||"",isVisible:e=>ys(e,"god_postrojki"),title:"Год постройки"}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.podkategoriya_obekta,"Земля/Участок"),t=t&&U($(ze(e.kategoriya_obekta,"Коммерческая"),ze(e.kategoriya_obekta,"Жилая")),$(ze(e.kategoriya_obekta,"Коммерческая"),!ze(e.kategoriya_obekta,"Жилая"))),t},fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация об объекте (Коммерческая земля/участок)"})},{type:o.Text,columns:"3",outlined:!1,compute:({kolichestvo_komnat:e})=>e||"",isVisible:e=>ys(e,"kolichestvo_komnat"),title:"Количество комнат"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.naznachenie_obekta,e["naznachenie-obekta-zemlya_uchastok"],e["naznachenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"naznachenie_obekta","naznachenie-obekta-zemlya_uchastok","naznachenie-obekta_zemlya"),title:"Назначение объекта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({tip_zemli_uchastka:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"tip_zemli_uchastka"),title:"Тип земли/участка"},{type:o.Text,columns:"3",outlined:!1,compute:({poleznaya_ploshhad:e})=>e||"",isVisible:e=>ys(e,"poleznaya_ploshhad"),title:"Полезная площадь М²"},{type:o.Text,columns:"3",outlined:!1,compute:({etazh:e})=>e||"",isVisible:e=>ys(e,"etazh"),title:"Этаж"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_obekta,e["sostoyanie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sostoyanie_obekta","sostoyanie-obekta_zemlya"),title:"Состояние объекта"},{type:o.Text,columns:"3",outlined:!1,compute:({mashina_mesto:e})=>e||"",isVisible:e=>ys(e,"mashina_mesto"),title:"Машина-место"},{type:o.Text,columns:"3",outlined:!1,compute:({kolichestvo_sotok:e})=>e||"",isVisible:e=>ys(e,"kolichestvo_sotok"),title:"Количество соток"},{type:o.Text,columns:"3",outlined:!1,compute:({etazhnost:e})=>e||"",isVisible:e=>ys(e,"etazhnost"),title:"Этажность"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sostoyanie_remonta,e["sostoyanie_remonta-kvartiry"],e["sostoyanie-remonta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sostoyanie_remonta","sostoyanie_remonta-kvartiry","sostoyanie-remonta_zemlya"),title:"Состояние ремонта"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.parkovka,e.parkovka_kvartira,e.parkovka_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"parkovka","parkovka_kvartira","parkovka_zemlya"),title:"Парковка"},{type:o.Text,columns:"3",outlined:!1,compute:({rasstoyanie_do_metro:e})=>e||"",isVisible:e=>ys(e,"rasstoyanie_do_metro"),title:"Расстояние до метро (м)"},{type:o.Text,columns:"3",outlined:!1,compute:({obshhaya_ploshhad:e,ploshhad_doma:t})=>[e,t].filter((e=>e)).flatMap((e=>e)).join(" "),isVisible:e=>ys(e,"obshhaya_ploshhad","ploshhad_doma"),title:"Общая площадь М²"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.voda,e.voda_dom,e.voda_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"voda","voda_dom","voda_zemlya"),title:"Вода"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.mestopolozhenie_obekta,e["mestopolozhenie-obekta_dom"],e["mestopolozhenie-obekta_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"mestopolozhenie_obekta","mestopolozhenie-obekta_dom","mestopolozhenie-obekta_zemlya"),title:"Местоположение объекта"},{type:o.Text,columns:"3",outlined:!1,compute:({rasstoyanie_do_goroda:e})=>e||"",isVisible:e=>ys(e,"rasstoyanie_do_goroda"),title:"Расстояние до города (м)"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_otopleniya,e["sistema-otopleniya_kvartiry"],e["sistema-otopleniya_dom"],e["sistema-otopleniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sistema_otopleniya","sistema-otopleniya_kvartiry","sistema-otopleniya_dom","sistema-otopleniya_zemlya"),title:"Система отопления"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:({podezdnye_puti:e})=>[e].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"podezdnye_puti"),title:"Подъездные пути"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.sistema_kondiczionirovaniya,e["sistema-kondiczionirovaniya_dom"],e["sistema-kondiczionirovaniya_zemlya"]].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"sistema_kondiczionirovaniya","sistema-kondiczionirovaniya_dom","sistema-kondiczionirovaniya_zemlya"),title:"Система кондиционирования"},{type:o.Text,columns:"3",outlined:!1,compute:({god_postrojki:e})=>e||"",isVisible:e=>ys(e,"god_postrojki"),title:"Год постройки"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.elektrichestvo,e.elektrichestvo_dom,e.elektrichestvo_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"elektrichestvo","elektrichestvo_dom","elektrichestvo_zemlya"),title:"Электричество"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.gaz,e.gaz_dom,e.gaz_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"gaz","gaz_dom","gaz_zemlya"),title:"Газ"},{type:o.Items,freeSolo:!0,columns:"3",outlined:!1,compute:e=>[e.kanalizacziya,e.kanalizacziya_dom,e.kanalizacziya_zemlya].filter((e=>e)).flatMap((e=>e)),isVisible:e=>ys(e,"kanalizacziya","kanalizacziya_dom","kanalizacziya_zemlya"),title:"Канализация"}]}]},{type:o.Paper,isVisible:e=>ys(e,"vnutri_est","ryadom_est"),fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте"})},{type:o.Component,fieldBottomMargin:"1",columns:"6",element:()=>se(Ae,{children:"Внутри есть:"})},{type:o.Component,fieldBottomMargin:"1",columns:"6",element:()=>se(Ae,{children:"Рядом есть:"})},{type:o.Component,columns:"6",isVisible:({vnutri_est:e})=>!!(null==e?void 0:e.length),element:({vnutri_est:e})=>se("div",{children:se(me,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",gap:1},children:null==e?void 0:e.map(((e,t)=>se(fa,{label:e},t)))})})},{type:o.Component,columns:"6",isVisible:({ryadom_est:e})=>!!(null==e?void 0:e.length),element:({ryadom_est:e})=>se("div",{children:se(me,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",gap:1},children:null==e?void 0:e.map(((e,t)=>se(fa,{label:e},t)))})})}]},{type:o.Paper,isVisible:e=>ys(e,"ploshhad_gostinnoj","ploshhad_spalni","ploshhad_holla","ploshhad_kuhni","ploshhad_sanuzla","ploshhad_balkona","ploshhad_terrasy","ploshhad_komnaty_ohrany","ploshhad_gostevogo_doma","ploshhad_dopolnitelnoj_pristrojki"),fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,sx:{mb:2},element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади"})},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая","Жилая"),t=t&&ze(e.podkategoriya_obekta,"Квартиры"),t},fields:[{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_gostinnoj:e})=>e||"",isVisible:e=>ys(e,"ploshhad_gostinnoj"),title:"Площадь гостинной М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_spalni:e})=>e||"",isVisible:e=>ys(e,"ploshhad_spalni"),title:"Площадь комнаты М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_holla:e})=>e||"",isVisible:e=>ys(e,"ploshhad_holla"),title:"Площадь холла М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_kuhni:e})=>e||"",isVisible:e=>ys(e,"ploshhad_kuhni"),title:"Площадь кухни М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_sanuzla:e})=>e||"",isVisible:e=>ys(e,"ploshhad_sanuzla"),title:"Площадь санузла М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_balkona:e})=>e||"",isVisible:e=>ys(e,"ploshhad_balkona"),title:"Площадь балкона М²"}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая","Жилая"),t=t&&ze(e.podkategoriya_obekta,"Дома"),t},fields:[{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_gostinnoj:e})=>e||"",isVisible:e=>ys(e,"ploshhad_gostinnoj"),title:"Площадь гостинной М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_spalni:e})=>e||"",isVisible:e=>ys(e,"ploshhad_spalni"),title:"Площадь комнаты М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_holla:e})=>e||"",isVisible:e=>ys(e,"ploshhad_holla"),title:"Площадь холла М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_kuhni:e})=>e||"",isVisible:e=>ys(e,"ploshhad_kuhni"),title:"Площадь кухни М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_sanuzla:e})=>e||"",isVisible:e=>ys(e,"ploshhad_sanuzla"),title:"Площадь санузла М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_balkona:e})=>e||"",isVisible:e=>ys(e,"ploshhad_balkona"),title:"Площадь балкона М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_terrasy:e})=>e||"",isVisible:e=>ys(e,"ploshhad_terrasy"),title:"Площадь террасы М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_komnaty_ohrany:e})=>e||"",isVisible:e=>ys(e,"ploshhad_komnaty_ohrany"),title:"Площадь комнаты охраны М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_gostevogo_doma:e})=>e||"",isVisible:e=>ys(e,"ploshhad_gostevogo_doma"),title:"Площадь гостевого дома М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_dopolnitelnoj_pristrojki:e})=>e||"",isVisible:e=>ys(e,"ploshhad_dopolnitelnoj_pristrojki"),title:"Площадь дополнительной пристройки М²"}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая","Жилая"),t=t&&ze(e.podkategoriya_obekta,"Земля/Участок"),t},fields:[{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_gostinnoj:e})=>e||"",isVisible:e=>ys(e,"ploshhad_gostinnoj"),title:"Площадь гостинной М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_spalni:e})=>e||"",isVisible:e=>ys(e,"ploshhad_spalni"),title:"Площадь комнаты М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_holla:e})=>e||"",isVisible:e=>ys(e,"ploshhad_holla"),title:"Площадь холла М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_kuhni:e})=>e||"",isVisible:e=>ys(e,"ploshhad_kuhni"),title:"Площадь кухни М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_sanuzla:e})=>e||"",isVisible:e=>ys(e,"ploshhad_sanuzla"),title:"Площадь санузла М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_balkona:e})=>e||"",isVisible:e=>ys(e,"ploshhad_balkona"),title:"Площадь балкона М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_terrasy:e})=>e||"",isVisible:e=>ys(e,"ploshhad_terrasy"),title:"Площадь террасы М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_komnaty_ohrany:e})=>e||"",isVisible:e=>ys(e,"ploshhad_komnaty_ohrany"),title:"Площадь комнаты охраны М²"}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая"),t=t&&!ze(e.podkategoriya_obekta,"Квартиры"),t=t&&!ze(e.podkategoriya_obekta,"Дома"),t=t&&!ze(e.podkategoriya_obekta,"Земля/Участок"),t},fields:[{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_gostinnoj:e})=>e||"",isVisible:e=>ys(e,"ploshhad_gostinnoj"),title:"Площадь гостинной М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_spalni:e})=>e||"",isVisible:e=>ys(e,"ploshhad_spalni"),title:"Площадь комнаты М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_holla:e})=>e||"",isVisible:e=>ys(e,"ploshhad_holla"),title:"Площадь холла М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_kuhni:e})=>e||"",isVisible:e=>ys(e,"ploshhad_kuhni"),title:"Площадь кухни М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_sanuzla:e})=>e||"",isVisible:e=>ys(e,"ploshhad_sanuzla"),title:"Площадь санузла М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_balkona:e})=>e||"",isVisible:e=>ys(e,"ploshhad_balkona"),title:"Площадь балкона М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_terrasy:e})=>e||"",isVisible:e=>ys(e,"ploshhad_terrasy"),title:"Площадь террасы М²"},{type:o.Text,columns:"3",outlined:!1,compute:({ploshhad_komnaty_ohrany:e})=>e||"",isVisible:e=>ys(e,"ploshhad_komnaty_ohrany"),title:"Площадь комнаты охраны М²"}]}]},{type:o.Paper,isVisible:e=>ys(e,"addon_square_names","addon_square_values"),fieldBottomMargin:"1",fieldRightMargin:"1",tabletHidden:!0,phoneHidden:!0,child:{type:o.Component,element:Sd}},{type:o.Paper,features:["hasDescriptionPermission"],fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,sx:{mb:2},element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Описание объекта"})},{type:o.Text,sx:{pointerEvents:"all"},inputRows:8,outlined:!1,name:"opisanie",title:"Описание"}]},{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",isVisible:e=>e.apartment_images&&e.apartment_images.length,fields:[{type:o.Component,sx:{mb:2},element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Галерея объекта"})},{type:o.Component,element:jd}]},{type:o.Component,isVisible:(e,{hideAutofindFlag:t})=>!t,fieldBottomMargin:"1",fieldRightMargin:"1",element:({_fieldData:e,payload:t,features:a})=>se(Nc,{payload:t,features:a,fieldData:e})}];window.apartment_card_fields=om;const lm=oe.createLoader(28),rm=[],nm=[{type:St.Component,headerName:"Аватар",sortable:!1,avatar:!0,width:()=>65,element:({avatar:e,email:t})=>se(ye,{Loader:lm,children:async()=>{const a=e?await os.appwriteService.getImageURL(e):"";return se(me,{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:se(_t,{src:a||void 0,alt:t})})}})},{type:St.Compute,sortable:!1,primary:!0,headerName:"Ф.И.О.",compute:({first_name:e="",last_name:t="",middle_name:a=""})=>[e,t,a].filter((e=>e.length)).join(" ")||"Unset",width:()=>200},{type:St.Compute,sortable:!1,secondary:!0,compute:async({user_role:e,telefon:t})=>{const a=await os.dictService.getUserRoles(),i=(null==e?void 0:e.length)?h.get(a,e[0])||e[0]:"Не указано";return t||i},headerName:"Роль",width:()=>200}],sm=({title:e,payload:t,features:a,selectedRows:i=rm,selectionMode:o=$t.Multiple})=>{const l=id(),r=Pa({title:e,selectedRows:i,columns:nm,handler:l,payload:t,features:a,selectionMode:o}),{handleLoadStart:n,handleLoadEnd:s}=Oe({history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)}),{execute:d}=Re((async()=>await r({selectedRows:i}).toPromise()),{onLoadStart:n,onLoadEnd:s,fallback:os.errorService.handleGlobalError});return d},dm=[{type:Ee.Link,isVisible:()=>!!os.routerService.previousPath,action:"list-action",label:se(fe,{sx:{display:"block"}})},{type:Ee.Link,action:"list-action",label:"База объектов"},{type:Ee.Link,action:"list-action",label:"Просмотр объекта"},{type:Ee.Button,isDisabled:({payload:{hasAdvertising:e,permissions:t}})=>W($(t.hasAdvertisingPublicationPermission,!e)),action:"create-advertising-action",label:"Добавить в рекламу"},{type:Ee.Button,isDisabled:({payload:{permissions:e}})=>!e.hasApartmentUpdatePermission,action:"edit-action",label:"Редактировать"}],cm=[{action:"pick-allowance-action",isDisabled:async({data:{object:e}})=>{const t=os.appwriteService.currentUser.$id;return W(U(Promise.resolve(e.system_created_by===t),os.featureService.hasFeature("vizhu_kontakty_pod_bronyu")))},label:"Поделиться объектом"},{action:"toggle-only-for-owner-action",isVisible:({data:{object:e}})=>!!e.system_only_for_owner,isDisabled:async({data:{object:e}})=>{const t=os.appwriteService.currentUser.$id;return W(U(Promise.resolve(e.system_created_by===t),os.featureService.hasFeature("vizhu_kontakty_pod_bronyu")))},icon:Ft,label:"Эксклюзив"},{action:"toggle-only-for-owner-action",isVisible:({data:{object:e}})=>!e.system_only_for_owner,isDisabled:async({data:{object:e}})=>{const t=os.appwriteService.currentUser.$id;return W(U(Promise.resolve(e.system_created_by===t),os.featureService.hasFeature("vizhu_kontakty_pod_bronyu")))},icon:Tt,label:"Эксклюзив"},{action:"superadmin-remove-action",label:"Удалить навсегда"}],mm=({fieldData:e,onChange:t})=>{const{handleLoadStart:a,handleLoadEnd:i,loading:o}=Oe({history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)});return se(oa,{children:se(ot,{disabled:o,sx:{borderRadius:"20px"},startIcon:se(ia,{}),onClick:async()=>{let o=!0;a();try{const a=await la("*");if(!a)return;const i=ra(e.contact_files)||[],o=await Promise.all(a.map((async e=>os.appwriteService.uploadFile(e)))),l=[...i,...o];t({contact_files:l})}catch(l){o=!1,os.alertService.notify(xn(l))}finally{i(o)}},variant:"contained",children:"Юридическое лицо"===e.kontakt?"Скан документов организации":"Скан документа"})})},um=[{action:"edit-action",label:"Редактировать"},{action:"remove-action",label:"Удалить"}],pm=({id:e,name:t,phone:a,sx:i,onChange:l,onRemove:r})=>{const n=Qt({title:"Удалить",msg:"Вы уверены что хотите удалить?"}),s=Ne({title:"Редактировать номер",fields:[{type:o.Text,name:"name",title:"Имя",isInvalid:({name:e})=>e?null:"Укажите имя"},{type:o.Text,name:"phone",title:"Телефон",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",isInvalid:({phone:e})=>e?null:"Укажите телефон"}]}),d=()=>s({handler:{id:e,name:t,phone:a}}).then((t=>{t&&l({id:e,name:t.name,phone:t.phone})}));return se(ht,{sx:i,disablePadding:!0,dense:!0,children:se(be,{disableRipple:!0,onClick:d,children:[se(bt,{children:se(_t,{sx:{"& svg":{color:"#aaa !important"},background:"transparent"},children:se(Ea,{})})}),se(dt,{primary:"Имя: ".concat(t),secondary:"Телефон: ".concat(a)}),se(na,{sx:{mr:1},transparent:!0,options:um,onAction:i=>{"edit-action"===i&&d(),"remove-action"===i&&(async()=>{await n().toPromise()&&r({id:e,name:t,phone:a})})()}})]})})},ym=({contact_phones:e,contact_names:t})=>{e=e||[],t=t||[];const a=[];for(let i=0;i!==t.length;i++)a.push({id:p(),name:t[i],phone:e[i]});return a},hm=({contact_phones:e,contact_names:t,onChange:a})=>{const[i,l]=re.useState((()=>ym({contact_phones:e,contact_names:t}))),{resetWatcher:r}=ea((()=>{var e;a({contact_names:(e=i)?e.map((({name:e})=>e)):null,contact_phones:e?e.map((({phone:e})=>e)):null})}),[i]);re.useEffect((()=>{const a=ym({contact_names:t,contact_phones:e});r(),l(a)}),[t,e]);const n=Ne({title:"Создание номера",fields:[{type:o.Text,sx:{mt:-2},name:"name",title:"Имя",isInvalid:({name:e})=>e?null:"Укажите имя"},{type:o.Text,name:"phone",title:"Телефон",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",isInvalid:({phone:e})=>e?null:"Укажите телефон"}]});return se(me,{style:{display:"flex",flexDirection:"column",overflowY:"auto",marginRight:"1px",minHeight:275},children:[se(we,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:1},children:[se(Ae,{sx:{ml:2,mt:1},variant:"h6",fontWeight:"bold",children:"Список номеров телефонов"}),se(_e,{sx:{mr:3,mt:1},onClick:()=>n().then((e=>{e&&l((t=>[...t,{...e,id:p()}]))})),children:se(Na,{})})]}),se(rt,{dense:!0,disablePadding:!0,children:i.map(((e,t)=>se(pm,{sx:{...t%2==0&&{background:"#ccc2"}},id:e.id,name:e.name,phone:e.phone,onChange:e=>l((t=>t.map((t=>t.id===e.id?e:t)))),onRemove:({id:e})=>l((t=>t.filter((t=>t.id!==e))))})))}),se(me,{sx:{flex:1}})]})},bm="Вы уверены, что хотите удалить файл?",vm="Подтверждение",_m=oe.createLoader(24),gm=e=>e&&"Физическое лицо"!==e?{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Основная информация"})},{type:o.Combo,outlined:!1,name:"kontakt",title:"Контакт",itemList:["Физическое лицо","Юридическое лицо"]},{type:o.Text,outlined:!1,name:"naimenovanie_organizaczii",title:"Наименование организации"},{type:o.Text,outlined:!1,name:"fio",title:"Ф.И.О."},{type:o.Text,description:"Основной",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon",title:"Телефон"},{type:o.Combo,outlined:!1,name:"tip_klienta",title:"Тип клиента",itemList:["Собственник","Доверенное лицо","Риелтор","Информатор","Застройщик"]},{type:o.Combo,outlined:!1,name:"status_klienta",title:"Статус клиента",itemList:["VIP-клиент","Клиент","Постоянный клиент","Специальный клиент","Черный список"]},{type:o.Combo,outlined:!1,name:"loyalnost_klienta",title:"Лояльность клиента",itemList:["Высокая","Средняя","Низкая"]},{type:o.Date,outlined:!1,name:"data-sozdaniya_klienta",title:"Дата создания клиента"},{type:o.Text,outlined:!1,name:"fakticheskij_adres",title:"Фактический адрес"},{type:o.Text,outlined:!1,name:"email",title:"Email"},{type:o.Fragment,isVisible:()=>{let e=!0;return e=e&&!os.routerService.location.pathname.includes("bid_view"),e=e&&!os.routerService.location.pathname.includes("bid_edit"),e},fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"subtitle2",fontWeight:"bold",sx:{textDecoration:"underline",mt:2,mb:1},children:"Кадастр"})},{type:o.Text,outlined:!1,name:"kadastrovyj-nomer_obekta",title:"Кадастровый номер объекта"},{type:o.Text,outlined:!1,name:"kadastrovyj-nomer_zemli",title:"Кадастровый номер земли"}]}]}:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"0",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Основная информация"})},{type:o.Combo,outlined:!1,name:"kontakt",title:"Контакт",itemList:["Физическое лицо","Юридическое лицо"]},{type:o.Text,outlined:!1,name:"fio",title:"Ф.И.О."},{type:o.Text,description:"Основной",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon",title:"Телефон"},{type:o.Combo,outlined:!1,name:"tip_klienta",title:"Тип клиента",itemList:["Собственник","Доверенное лицо","Риелтор","Информатор","Застройщик"]},{type:o.Combo,outlined:!1,name:"status_klienta",title:"Статус клиента",itemList:["VIP-клиент","Клиент","Постоянный клиент","Специальный клиент","Черный список"]},{type:o.Combo,outlined:!1,name:"loyalnost_klienta",title:"Лояльность клиента",itemList:["Высокая","Средняя","Низкая"]},{type:o.Date,outlined:!1,name:"data-sozdaniya_klienta",title:"Дата создания клиента"},{type:o.Text,outlined:!1,name:"fakticheskij_adres",title:"Фактический адрес"},{type:o.Text,outlined:!1,name:"email",title:"Email"},{type:o.Fragment,isVisible:()=>{let e=!0;return e=e&&!os.routerService.location.pathname.includes("bid_view"),e=e&&!os.routerService.location.pathname.includes("bid_edit"),e},fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"subtitle2",fontWeight:"bold",sx:{textDecoration:"underline",mt:2,mb:1},children:"Кадастр"})},{type:o.Text,outlined:!1,name:"kadastrovyj-nomer_obekta",title:"Кадастровый номер объекта"},{type:o.Text,outlined:!1,name:"kadastrovyj-nomer_zemli",title:"Кадастровый номер земли"}]}]},fm=e=>e&&"Физическое лицо"!==e?{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Паспортные данные"})},{type:o.Text,outlined:!1,name:"seriya-i-nomer_pasporta",title:"Серия и номер паспорта"},{type:o.Date,outlined:!1,name:"data_rozhdeniya",title:"Дата рождения"},{type:o.Combo,outlined:!1,name:"pol",title:"Пол",itemList:["Мужской","Женский"]},{type:o.Date,outlined:!1,name:"data-vydachi_pasporta",title:"Дата выдачи паспорта"},{type:o.Text,outlined:!1,name:"kem_vydan",title:"Кем выдан"},{type:o.Text,outlined:!1,name:"adres_registraczii",title:"Адрес регистрации"},{type:o.Text,outlined:!1,name:"pinfl",title:"ПИНФЛ"},{type:o.Text,outlined:!1,name:"inn",title:"ИНН"},{type:o.Text,outlined:!1,name:"dolzhnost_rukovoditelya",title:"Должность руководителя"},{type:o.Combo,outlined:!1,name:"osnovanie-deyatelnosti-dannogo_licza",title:"Основание деятельности данного лица",itemList:["На основании устава","По доверенности"]},{type:o.Text,outlined:!1,name:"yuridicheskij_adres",title:"Юридический адрес"},{type:o.Text,outlined:!1,name:"sertifikat_kompanii",title:"Сертификат компании (Гувохнома)"},{type:o.Text,outlined:!1,name:"rekvizity",title:"Реквизиты"}]}:{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Паспортные данные"})},{type:o.Text,outlined:!1,name:"seriya-i-nomer_pasporta",title:"Серия и номер паспорта"},{type:o.Date,outlined:!1,name:"data_rozhdeniya",title:"Дата рождения"},{type:o.Combo,outlined:!1,name:"pol",title:"Пол",itemList:["Мужской","Женский"]},{type:o.Date,outlined:!1,name:"data-vydachi_pasporta",title:"Дата выдачи паспорта"},{type:o.Text,outlined:!1,name:"kem_vydan",title:"Кем выдан"},{type:o.Text,outlined:!1,name:"adres_registraczii",title:"Адрес регистрации"},{type:o.Text,outlined:!1,name:"pinfl",title:"ПИНФЛ"},{type:o.Text,outlined:!1,name:"inn",title:"ИНН"},{type:o.Text,outlined:!1,name:"rekvizity",title:"Реквизиты"}]},km=e=>"desktop"===e?{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"0",innerPadding:"0",tabletHidden:!0,phoneHidden:!0,child:{type:o.Component,element:hm}}:{type:o.Paper,fieldBottomMargin:"1",innerPadding:"0",desktopHidden:!0,child:{type:o.Component,element:hm}},wm=e=>e&&"Физическое лицо"!==e?[{type:o.Paper,fieldBottomMargin:"1",sx:{padding:"0 !important"},isVisible:e=>e.contact_files&&e.contact_files.length,child:{type:o.Component,element:({contact_files:e,onChange:t})=>{const a=Qt({title:vm,msg:bm});return se(rt,{children:null==e?void 0:e.map(((i,o)=>se(ht,{disableGutters:!0,secondaryAction:se(Ra,{onClick:()=>{const o=ra(e)||[];a().then((e=>{e&&t({contact_files:o.filter((e=>e!==i))})}))},children:se(Ct,{})}),children:se(be,{onClick:async()=>{const e=await os.appwriteService.getFileURL(i),t=await os.appwriteService.readFileName(i);pt(e,t)},children:se(ye,{payload:i,Loader:_m,children:async e=>{const t=await os.appwriteService.readFileName(e);return se(dt,{primary:t})}})})},"".concat(i,"-").concat(o))))})}}},{type:o.Paper,fieldBottomMargin:"0",fields:[{type:o.Component,element:({_fieldData:e,onChange:t})=>se(mm,{fieldData:e,onChange:t})}]}]:[{type:o.Paper,fieldBottomMargin:"1",sx:{padding:"0 !important"},isVisible:e=>e.contact_files&&e.contact_files.length,child:{type:o.Component,element:({contact_files:e,onChange:t})=>{const a=Qt({title:vm,msg:bm});return se(rt,{children:null==e?void 0:e.map(((i,o)=>se(ht,{disableGutters:!0,secondaryAction:se(Ra,{onClick:()=>{const o=ra(e)||[];a().then((e=>{e&&t({contact_files:o.filter((e=>e!==i))})}))},children:se(Ct,{})}),children:se(be,{onClick:async()=>{const e=await os.appwriteService.getFileURL(i),t=await os.appwriteService.readFileName(i);pt(e,t)},children:se(ye,{payload:i,Loader:_m,children:async e=>{const t=await os.appwriteService.readFileName(e);return se(dt,{primary:t})}})})},"".concat(i,"-").concat(o))))})}}},{type:o.Paper,fieldBottomMargin:"0",fields:[{type:o.Component,element:({_fieldData:e,onChange:t})=>se(mm,{fieldData:e,onChange:t})}]}],Sm=[{type:o.Init,name:"contact_phones",defaultValue:null},{type:o.Init,name:"contact_names",defaultValue:null},{type:o.Fragment,isVisible:e=>!e.kontakt||!!ze(e.kontakt,"Физическое лицо"),fields:[{type:o.Group,fieldBottomMargin:"0",fieldRightMargin:"1",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",phoneHidden:!0,tabletHidden:!0,fields:[gm("Физическое лицо"),km("desktop")]},{type:o.Group,fieldBottomMargin:"0",fieldRightMargin:"0",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",desktopHidden:!0,fields:[gm("Физическое лицо"),km("desktop")]},{type:o.Group,fieldBottomMargin:"1",fieldRightMargin:"0",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",fields:[fm("Физическое лицо"),km("mobile"),...wm("Физическое лицо")]}]},{type:o.Fragment,isVisible:e=>!!ze(e.kontakt,"Юридическое лицо"),fields:[{type:o.Group,fieldBottomMargin:"0",fieldRightMargin:"1",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",phoneHidden:!0,tabletHidden:!0,fields:[gm("Юридическое лицо"),km("desktop")]},{type:o.Group,fieldBottomMargin:"0",fieldRightMargin:"0",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",desktopHidden:!0,fields:[gm("Юридическое лицо"),km("desktop")]},{type:o.Group,fieldBottomMargin:"1",fieldRightMargin:"0",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",fields:[fm("Юридическое лицо"),km("mobile"),...wm("Юридическое лицо")]}]},{type:o.Component,features:["withBottomSaveButton"],watchOneContext:!0,element:xd}];window.contact_fields=Sm;const zm=[{type:Ee.Link,isVisible:()=>!!os.routerService.previousPath,action:"list-action",label:se(fe,{sx:{display:"block"}})},{type:Ee.Link,action:"list-action",label:"База объектов"},{type:Ee.Link,action:"list-action",isVisible:({id:e})=>"create"!==e,label:"Редактирование контакта"},{type:Ee.Link,action:"list-action",isVisible:({id:e})=>"create"===e,label:"Создание контакта"},{type:Ee.Button,isDisabled:({hasChanged:e})=>!e,action:"save-action",label:"Сохранить"}],xm="Вы уверены, что хотите удалить файл?",Am="Подтверждение",Tm=oe.createLoader(24),Fm=e=>e&&"Физическое лицо"!==e?{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Основная информация"})},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"kontakt"),name:"kontakt",title:"Контакт"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"naimenovanie_organizaczii"),name:"naimenovanie_organizaczii",title:"Наименование организации"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"fio"),name:"fio",title:"Ф.И.О."},{type:o.Text,description:"Основной",features:["hasContactNumberPermission"],outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",isVisible:e=>ys(e,"telefon"),name:"telefon",title:"Телефон"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"tip_klienta"),name:"tip_klienta",title:"Тип клиента"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"status_klienta"),name:"status_klienta",title:"Статус клиента"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"loyalnost_klienta"),name:"loyalnost_klienta",title:"Лояльность клиента"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"data-sozdaniya_klienta"),name:"data-sozdaniya_klienta",title:"Дата создания клиента"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"fakticheskij_adres"),name:"fakticheskij_adres",title:"Фактический адрес"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"email"),name:"email",title:"Email"},{type:o.Fragment,isVisible:()=>{let e=!0;return e=e&&!os.routerService.location.pathname.includes("bid_view"),e=e&&!os.routerService.location.pathname.includes("bid_edit"),e},fields:[{type:o.Component,fieldBottomMargin:"1",isVisible:e=>ys(e,"kadastrovyj-nomer_obekta","kadastrovyj-nomer_zemli"),element:()=>se(Ae,{variant:"subtitle2",fontWeight:"bold",sx:{textDecoration:"underline",mt:2,mb:1},children:"Кадастр"})},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"kadastrovyj-nomer_obekta"),name:"kadastrovyj-nomer_obekta",title:"Кадастровый номер объекта"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"kadastrovyj-nomer_zemli"),name:"kadastrovyj-nomer_zemli",title:"Кадастровый номер земли"}]}]}:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"0",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Основная информация"})},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"kontakt"),name:"kontakt",title:"Контакт"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"fio"),name:"fio",title:"Ф.И.О."},{type:o.Text,description:"Основной",features:["hasContactNumberPermission"],outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",isVisible:e=>ys(e,"telefon"),name:"telefon",title:"Телефон"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"tip_klienta"),name:"tip_klienta",title:"Тип клиента"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"status_klienta"),name:"status_klienta",title:"Статус клиента"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"loyalnost_klienta"),name:"loyalnost_klienta",title:"Лояльность клиента"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"data-sozdaniya_klienta"),name:"data-sozdaniya_klienta",title:"Дата создания клиента"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"fakticheskij_adres"),name:"fakticheskij_adres",title:"Фактический адрес"},{type:o.Text,isVisible:e=>ys(e,"email"),outlined:!1,name:"email",title:"Email"},{type:o.Fragment,isVisible:()=>{let e=!0;return e=e&&!os.routerService.location.pathname.includes("bid_view"),e=e&&!os.routerService.location.pathname.includes("bid_edit"),e},fields:[{type:o.Component,fieldBottomMargin:"1",isVisible:e=>ys(e,"kadastrovyj-nomer_obekta","kadastrovyj-nomer_zemli"),element:()=>se(Ae,{variant:"subtitle2",fontWeight:"bold",sx:{textDecoration:"underline",mt:2,mb:1},children:"Кадастр"})},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"kadastrovyj-nomer_obekta"),name:"kadastrovyj-nomer_obekta",title:"Кадастровый номер объекта"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"kadastrovyj-nomer_zemli"),name:"kadastrovyj-nomer_zemli",title:"Кадастровый номер земли"}]}]},Cm=e=>e&&"Физическое лицо"!==e?{type:o.Paper,isVisible:e=>ys(e,"seriya-i-nomer_pasporta","data_rozhdeniya","pol","data-vydachi_pasporta","kem_vydan","adres_registraczii","pinfl","inn","dolzhnost_rukovoditelya","osnovanie-deyatelnosti-dannogo_licza","yuridicheskij_adres","sertifikat_kompanii","rekvizity"),fieldBottomMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Паспортные данные"})},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"seriya-i-nomer_pasporta"),name:"seriya-i-nomer_pasporta",title:"Серия и номер паспорта"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"data_rozhdeniya"),name:"data_rozhdeniya",title:"Дата рождения"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"pol"),name:"pol",title:"Пол"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"data-vydachi_pasporta"),name:"data-vydachi_pasporta",title:"Дата выдачи паспорта"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"kem_vydan"),name:"kem_vydan",title:"Кем выдан"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"adres_registraczii"),name:"adres_registraczii",title:"Адрес регистрации"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"pinfl"),name:"pinfl",title:"ПИНФЛ"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"inn"),name:"inn",title:"ИНН"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"dolzhnost_rukovoditelya"),name:"dolzhnost_rukovoditelya",title:"Должность руководителя"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"osnovanie-deyatelnosti-dannogo_licza"),name:"osnovanie-deyatelnosti-dannogo_licza",title:"Основание деятельности данного лица"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"yuridicheskij_adres"),name:"yuridicheskij_adres",title:"Юридический адрес"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"sertifikat_kompanii"),name:"sertifikat_kompanii",title:"Сертификат компании (Гувохнома)"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"rekvizity"),name:"rekvizity",title:"Реквизиты"}]}:{type:o.Paper,isVisible:e=>ys(e,"seriya-i-nomer_pasporta","data_rozhdeniya","pol","data-vydachi_pasporta","kem_vydan","adres_registraczii","pinfl","inn","rekvizity"),fieldBottomMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",sx:{textDecoration:"underline"},children:"Паспортные данные"})},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"seriya-i-nomer_pasporta"),name:"seriya-i-nomer_pasporta",title:"Серия и номер паспорта"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"data_rozhdeniya"),name:"data_rozhdeniya",title:"Дата рождения"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"pol"),name:"pol",title:"Пол"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"data-vydachi_pasporta"),name:"data-vydachi_pasporta",title:"Дата выдачи паспорта"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"kem_vydan"),name:"kem_vydan",title:"Кем выдан"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"adres_registraczii"),name:"adres_registraczii",title:"Адрес регистрации"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"pinfl"),name:"pinfl",title:"ПИНФЛ"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"inn"),name:"inn",title:"ИНН"},{type:o.Text,outlined:!1,isVisible:e=>ys(e,"rekvizity"),name:"rekvizity",title:"Реквизиты"}]},Vm=e=>"desktop"===e?{type:o.Paper,features:["hasContactNumberPermission"],fieldRightMargin:"0",innerPadding:"0",tabletHidden:!0,phoneHidden:!0,child:{type:o.Component,isVisible:e=>ys(e,"contact_phones","contact_names"),element:hm}}:{type:o.Paper,features:["hasContactNumberPermission"],fieldBottomMargin:"1",innerPadding:"0",desktopHidden:!0,child:{type:o.Component,isVisible:e=>ys(e,"contact_phones","contact_names"),element:hm}},Lm=e=>e&&"Физическое лицо"!==e?[{type:o.Paper,fieldBottomMargin:"1",sx:{padding:"0 !important"},isVisible:e=>e.contact_files&&e.contact_files.length,child:{type:o.Component,element:({contact_files:e,onChange:t,readonly:a})=>{const i=Qt({title:Am,msg:xm});return se(rt,{sx:{pointerEvents:"all"},children:null==e?void 0:e.map(((o,l)=>se(ht,{disableGutters:!0,secondaryAction:se(Ra,{disabled:a,onClick:()=>{const a=ra(e)||[];i().then((e=>{e&&t({contact_files:a.filter((e=>e!==o))})}))},children:se(Ct,{})}),children:se(be,{onClick:async()=>{const e=await os.appwriteService.getFileURL(o),t=await os.appwriteService.readFileName(o);pt(e,t)},children:se(ye,{payload:o,Loader:Tm,children:async e=>{const t=await os.appwriteService.readFileName(e);return se(dt,{primary:t})}})})},"".concat(o,"-").concat(l))))})}}}]:[{type:o.Paper,fieldBottomMargin:"1",sx:{padding:"0 !important"},isVisible:e=>e.contact_files&&e.contact_files.length,child:{type:o.Component,element:({contact_files:e,onChange:t,readonly:a})=>{const i=Qt({title:Am,msg:xm});return se(rt,{sx:{pointerEvents:"all"},children:null==e?void 0:e.map(((o,l)=>se(ht,{disableGutters:!0,secondaryAction:se(Ra,{disabled:a,onClick:()=>{const a=ra(e)||[];i().then((e=>{e&&t({contact_files:a.filter((e=>e!==o))})}))},children:se(Ct,{})}),children:se(be,{onClick:async()=>{const e=await os.appwriteService.getFileURL(o),t=await os.appwriteService.readFileName(o);pt(e,t)},children:se(ye,{payload:o,Loader:Tm,children:async e=>{const t=await os.appwriteService.readFileName(e);return se(dt,{primary:t})}})})},"".concat(o,"-").concat(l))))})}}}],Im=[{type:o.Init,name:"contact_phones",defaultValue:null},{type:o.Init,name:"contact_names",defaultValue:null},{type:o.Fragment,isVisible:e=>!e.kontakt||!!ze(e.kontakt,"Физическое лицо"),fields:[{type:o.Group,fieldBottomMargin:"0",fieldRightMargin:"1",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",phoneHidden:!0,tabletHidden:!0,fields:[Fm("Физическое лицо"),Vm("desktop")]},{type:o.Group,fieldBottomMargin:"0",fieldRightMargin:"0",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",desktopHidden:!0,fields:[Fm("Физическое лицо"),Vm("desktop")]},{type:o.Group,fieldBottomMargin:"0",fieldRightMargin:"0",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",fields:[Cm("Физическое лицо"),Vm("mobile"),...Lm("Физическое лицо")]}]},{type:o.Fragment,isVisible:e=>!!ze(e.kontakt,"Юридическое лицо"),fields:[{type:o.Group,fieldBottomMargin:"0",fieldRightMargin:"1",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",phoneHidden:!0,tabletHidden:!0,fields:[Fm("Юридическое лицо"),Vm("desktop")]},{type:o.Group,fieldBottomMargin:"0",fieldRightMargin:"0",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",desktopHidden:!0,fields:[Fm("Юридическое лицо"),Vm("desktop")]},{type:o.Group,fieldBottomMargin:"0",fieldRightMargin:"0",phoneColumns:"12",tabletColumns:"12",desktopColumns:"6",fields:[Cm("Юридическое лицо"),Vm("mobile"),...Lm("Юридическое лицо")]}]}];window.contact_fields=Im;const Mm=[{type:Ee.Link,isVisible:()=>!!os.routerService.previousPath,action:"list-action",label:se(fe,{sx:{display:"block"}})},{type:Ee.Link,action:"list-action",label:"База объектов"},{type:Ee.Link,action:"list-action",label:"Просмотр контакта"},{type:Ee.Button,isDisabled:({payload:{permissions:e}})=>!e.hasApartmentUpdatePermission,action:"edit-action",label:"Редактировать"}],Bm=async e=>{const{contact_id:t}=await os.apartmentViewService.read(e);return t},Dm=Nn()({container:{alignItems:"center",backgroundColor:"#F7F7F7",border:"1px solid #ECECEC",boxShadow:"0 4px 16px 0px rgba(0,0,0,0.2)",display:"flex",gap:8,justifyContent:"stretch",minHeight:"72px",padding:"10px 24px",borderRadius:"0 0 8px 8px"},textInput:{flex:1,"& textarea::-webkit-scrollbar":{display:"none"}},contained:{color:"#FFFFFF",backgroundColor:"#3578E5","&:hover":{backgroundColor:"#3578E5"}}}),Rm=[{type:o.Choose,fieldBottomMargin:"3",fieldRightMargin:"0",choose:async(e,t)=>{t.pickData(e.user_id?[e.user_id]:[]);const a=await t.resultSubject.toPromise();if(a&&a.length){const[e]=a;return e}return null},tr:async e=>{const t=await os.userViewService.tryRead(e);return[null==t?void 0:t.last_name,null==t?void 0:t.first_name,null==t?void 0:t.middle_name].filter((e=>e)).join(" ")||(null==t?void 0:t.$id)||""},name:"user_id",title:"",placeholder:"Кому"},{type:o.Text,fieldBottomMargin:"0",fieldRightMargin:"0",placeholder:"Введите сообщение",inputRows:3,labelShrink:!0,name:"comment",title:""}],jm=()=>{const e=Ih(),t=rs("id");if(e&&t){if(e.path.includes("apartment"))return"/apartment_view/".concat(t,"/service_comment");if(e.path.includes("bid"))return"/bid_view/".concat(t,"/service_comment")}return""},qm=({addMessage:e=(()=>null),addFile:t=(()=>null),payload:a})=>{const{classes:i}=Dm(),[o,l]=re.useState(""),{pickData:r,render:n,resultSubject:s}=nd({payload:a}),{handleLoadStart:d,handleLoadEnd:c,loading:m}=Oe({history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)}),u=Ne({large:!0,title:"Уведомить сотрудника",fields:Rm,payload:{pickData:r,resultSubject:s}});return se("div",{className:i.container,children:[se(Oa,{className:i.textInput,readOnly:m,value:o,onChange:({target:e})=>l(e.value),placeholder:"Введите комментарий",multiline:!0,maxRows:5}),se(xt,{condition:async()=>(await os.permissionService.getPermissions()).hasUserServiceCommentMentionPermission,children:se(Ra,{disabled:m,onClick:async()=>{const t=await u().toPromise();if(!t)return;if(!t.user_id||!t.comment)return void os.alertService.notify("Укажите получателя и сообщение");const{user_id:a,comment:i}=t,{first_name:o}=await os.userViewService.read(a),r=['<blank-link href="/user_view/'.concat(a,'">@').concat(o,"</blank-link>"),i].join("\n");await os.notifyViewService.create({title:"Вас упомянули в служебном комментарии",user_id:a,url:jm()}),await e(r),l("")},onLoadStart:d,onLoadEnd:c,children:se(Ha,{})})}),se(xt,{condition:async()=>(await os.permissionService.getPermissions()).hasUserServiceCommentAddingFilePermission,children:se(Ra,{disabled:m,onClick:async()=>{const a=await la();if(a){for(const e of a){const a=await os.appwriteService.uploadFile(e);await t(o,a)}o&&await e(o),l("")}},onLoadStart:d,onLoadEnd:c,children:se(Ua,{})})}),se(ot,{disabled:m,className:i.contained,onClick:async()=>{o&&(await e(o),l(""))},onLoadStart:d,onLoadEnd:c,variant:"contained",size:"large",children:se(oa,{children:se(Wa,{})})}),n()]})},Pm=Nn()(((e,t,a)=>({newMessage:{backgroundColor:"#3578E5",borderRadius:"8px",color:"#FFFFFF",display:"flex",fontFamily:"Roboto, sans-serif",padding:12,paddingRight:0,width:"65%","& pre":{margin:0}},newFile:{backgroundColor:"#3578E5",overflow:"hidden",borderRadius:"8px",color:"#FFFFFF",display:"flex",fontFamily:"Roboto, sans-serif",width:"65%"},newMessageContainer:{display:"flex",flex:"0 0 auto",justifyContent:"flex-end",width:"100%",paddingBottom:"12px"},receivedMessage:{backgroundColor:"#FFFFFF",borderRadius:"8px",display:"flex",padding:12,paddingRight:0,fontFamily:"Roboto, sans-serif",width:"65%"},recievedFile:{backgroundColor:"#FFFFFF",overflow:"hidden",borderRadius:"8px",display:"flex",fontFamily:"Roboto, sans-serif",width:"65%"},receivedMessageContainer:{display:"flex",flex:"0 0 auto",justifyContent:"flex-start",flexDirection:"row-reverse",width:"100%",paddingBottom:"12px","& pre":{margin:0}},receivedMessageSender:{paddingRight:10,paddingTop:5},stretch:{flex:1},copy:{width:"100%",alignItems:"flex-start !important"}}))),Em=({sessionData:e})=>{const{classes:t}=Pm(),{handleLoadStart:a,handleLoadEnd:i}=Oe({history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)}),{execute:o}=Re((async()=>{if(e.fileId){const t=await os.appwriteService.getFileURL(e.fileId),a=await os.appwriteService.readFileName(e.fileId);pt(t,a)}}),{onLoadStart:a,onLoadEnd:i});return se("div",{children:e.userId===os.appwriteService.currentUser.$id?se("div",{className:t.newMessageContainer,children:e.fileId?se(ht,{disablePadding:!0,className:t.newFile,onClick:()=>o(),children:se(be,{children:[se(bt,{children:se(_t,{children:se($a,{})})}),se(dt,{primary:e.fileName||"Файл"})]})}):se("div",{className:t.newMessage,children:se(zt,{onCopyClick:()=>os.alertService.notify("Сообщение скопировано в буфер обмена"),className:t.copy,sx:{"& svg":{color:"white"}},content:gt.sanitize(e.message),children:se("pre",{children:se(gt,{config:Ds,handler:()=>e.message})})})})}):se("div",{className:t.receivedMessageContainer,children:[se("div",{className:t.stretch}),e.fileId?se(ht,{disablePadding:!0,className:t.recievedFile,onClick:()=>o(),children:se(be,{children:[se(bt,{children:se(_t,{children:se($a,{})})}),se(dt,{primary:e.fileName||"Файл"})]})}):se("div",{className:t.receivedMessage,children:se(zt,{onCopyClick:()=>os.alertService.notify("Сообщение скопировано в буфер обмена"),className:t.copy,content:gt.sanitize(e.message),children:se("pre",{children:se(gt,{config:Ds,handler:()=>e.message})})})}),se("div",{className:t.receivedMessageSender,children:se(Ga,{title:e.displayName,children:se(_t,{src:e.avatar,style:{height:28,width:28}})})})]})})},Nm=Nn()({container:{backgroundColor:"#F0F0F0",borderRadius:"8px",overflow:"hidden",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"stretch",height:"100%",width:"100%"},content:{padding:"8px",flex:1}}),Om=({className:e,style:t,messages:a,payload:i,onText:o,onFile:l})=>{const{classes:r,cx:n}=Nm(),s=re.useMemo((()=>(null==a?void 0:a.length)?a[(null==a?void 0:a.length)-1]:null),[a]),d=re.useCallback(((e=!1)=>{const t=os.appwriteService.currentUser.$id;return!(!e&&(null==s?void 0:s.userId)!==t)&&"auto"}),[s]),c=re.useCallback(((e,t)=>se(Em,{sessionData:t},"".concat(t.id,"-").concat(e))),[]);return se("div",{className:n(r.container,e),style:t,children:[se("div",{className:r.content,children:se(Ya,{data:a,followOutput:d,initialTopMostItemIndex:null==a?void 0:a.length,itemContent:c,computeItemKey:e=>{const t=a[e];return(null==t?void 0:t.id)||p()}})}),se(qm,{payload:i,addMessage:o,addFile:l})]})},Hm="real-estate__headerRoot",Um=[{type:Ee.Link,isVisible:()=>!!os.routerService.previousPath,action:"list-action",label:se(fe,{sx:{display:"block"}})},{type:Ee.Link,action:"list-action",label:"База объектов"},{type:Ee.Link,action:"list-action",label:"Просмотр служебных комментариев"}],Wm=re.forwardRef((({item:e,loading:t,className:a,style:i},o)=>se("div",{className:a,style:i,ref:o,children:se(et,{sx:{position:"relative",overflow:"hidden"},children:[se(ht,{children:[se(bt,{children:se(ye,{loading:t,payload:e,Loader:()=>se(vt,{variant:"circular",width:40,height:40}),children:async({user_id:e})=>{const t=await os.userViewService.tryRead(e),a=(null==t?void 0:t.avatar)?await os.appwriteService.getImageURL(t.avatar):void 0;return se(_t,{alt:null==t?void 0:t.email,src:a,sx:{height:40,mr:2,width:40}})}})}),se(ye,{loading:t,payload:e,Loader:()=>se(we,{flex:1,children:[se(vt,{sx:{mb:1},variant:"rectangular",width:210,height:22}),se(vt,{variant:"rectangular",width:170,height:22})]}),children:async({user_id:e})=>{const t=await os.userViewService.tryRead(e),a=[null==t?void 0:t.first_name,null==t?void 0:t.last_name,null==t?void 0:t.middle_name].filter((e=>e)).join(" "),i=await(async()=>{var e;if(null==(e=null==t?void 0:t.user_role)?void 0:e.length){const e=await os.roleViewService.tryRead(t.user_role[0]);return(null==e?void 0:e.title)||""}return""})();return se(dt,{primary:a,secondary:i})}}),se(Ae,{children:n(e.$createdAt).format("HH:mm DD/MM/YYYY")})]}),!!e.comment&&se(me,{component:"pre",sx:{ml:1,mr:1,mb:1},children:se(gt,{config:Ds,handler:()=>e.comment})}),se(me,{sx:{position:"absolute",top:0,left:0,bottom:0,width:6,zIndex:1,background:"skyblue"}})]})}))),$m="real-estate__headerRoot",Gm=[{type:Ee.Link,isVisible:()=>!!os.routerService.previousPath,action:"list-action",label:se(fe,{sx:{display:"block"}})},{type:Ee.Link,action:"list-action",label:"База объектов"},{type:Ee.Link,action:"list-action",label:"Просмотр задач"}],Ym=[{id:"list",element:({payload:e})=>se(Zt,{history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1),routes:kd,payload:e}),isActive:e=>cs(["/apartment","/apartment_rent","/apartment_sell","/apartment_archive","/apartment_remove"],e),isAvailable:()=>!1},{id:"create",element:()=>{const{elementRef:e,size:t}=Je(),[a,i]=re.useState((()=>({activeStep:0,contact_id:null,fio:"",telefon:""}))),[o,l]=re.useState([]),[r,n]=re.useState(!1),[s,d]=re.useState(!1),c=re.useMemo((()=>new Date(Date.now()+1e4)),[a.activeStep]);re.useEffect((()=>{d(!1)}),[a.activeStep]);const m=e=>i((t=>({...t,activeStep:e}))),{activeStep:u}=a,{classes:p}=Ts(),{handleLoadStart:y,handleLoadEnd:h,loading:b,unblock:v}=Oe({history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)}),_=Ze(a),{execute:g}=Re((async()=>{try{let{contact_id:e,fio:t,telefon:a}=_.current;if(!e){e=(await os.contactViewService.create({fio:t,telefon:a,"data-sozdaniya_klienta":Qe.currentDate()})).$id}const{id:i}=await os.apartmentViewService.create({contact_id:e});v(),os.routerService.push("/apartment_edit/".concat(i),{viewRedirectFlag:!0})}catch(e){os.alertService.notify(xn(e))}}),{onLoadStart:y,onLoadEnd:h}),f=async()=>{if(n(!0),a.fio||a.telefon){if(0===u){const{rows:e,total:t}=await os.contactRequestService.findDuplicates(a);l(e),m(0===t?2:1)}1===u&&m(2),2===u&&await g()}},k=()=>{let e=!1;return 1===u&&(e=e||!s),e=e||b,e=e||3===u,e};return se(lt,{children:[se($e,{items:As}),se(et,{className:p.root,children:[se(tt,{className:p.header,activeStep:u,children:[se(at,{completed:u>0,children:se(it,{children:"Первичные данные"})},0),se(at,{completed:u>1,children:se(it,{children:"Поиск дубликатов"})},1),se(at,{completed:u>2,children:se(it,{children:"Создание объекта"})},2)]}),se("div",{className:p.adjust}),se(me,{ref:e,className:p.content,children:0===u?se(Ge,{sx:{pl:1,pr:1,pt:2,pb:3},handler:a,onChange:i,dirty:r,fields:xs}):1===u?se(ct,{sx:{height:t.height},component:rt,minRowHeight:54,children:o.map((({fio:e,telefon:t,$id:o,tip_klienta:l,system_created_by:r,index:n},s)=>se(be,{className:ue({[p.listItemBackground]:s%2==1}),onClick:()=>{i((e=>({...e,contact_id:o,activeStep:2})))},dense:!0,children:[se(nt,{children:se(st,{edge:"start",checked:a.contact_id===o,sx:{marginLeft:"0 !important"},disableRipple:!0})}),se(dt,{primary:e,secondary:se(ye,{Loader:Fs,children:async()=>{const e=await os.userViewService.tryRead(r),t=e?"Создал "+[e.last_name,e.first_name,e.middle_name].filter((e=>e)).join(" "):"";return["№".concat(n),t,l].filter((e=>e)).join(", ")}})}),se(Ae,{children:t})]},s)))}):2===u?se(Ge,{sx:{pl:1,pr:1,pt:2,pb:3},handler:a,dirty:r,fields:xs}):null}),se(we,{sx:{pl:1,pr:1,pb:1},justifyContent:"space-between",flexDirection:"row",children:[se(ot,{disabled:b||0===u,fallback:os.errorService.handleGlobalError,onClick:()=>{i((e=>({...e,contact_id:null}))),0===o.length?m(0):m(u-1)},sx:{mt:1},variant:"contained",onLoadStart:y,onLoadEnd:h,children:"Назад"}),se(ot,1===u?{disabled:k(),fallback:os.errorService.handleGlobalError,onClick:f,sx:{mt:1},variant:"contained",onLoadStart:y,onLoadEnd:h,children:se(mt,{expireAt:c,onExpire:()=>d(!0),children:"Не вижу дубликат"})}:2===u?{disabled:k(),fallback:os.errorService.handleGlobalError,onClick:f,sx:{mt:1},variant:"contained",onLoadStart:y,onLoadEnd:h,children:"Создать объект"}:{disabled:k(),fallback:os.errorService.handleGlobalError,onClick:f,sx:{mt:1},variant:"contained",onLoadStart:y,onLoadEnd:h,children:"Далее"})]})]})]})},isActive:e=>cs(["/apartment/create"],e),isAvailable:()=>!1},{id:"object",element:({beginSave:e,onChange:t,payload:a,data:i,formState:o})=>{const l=We(i);return se(Se,{children:[se($e,{items:oc,payload:o,onAction:t=>{"list-action"===t&&os.routerService.back("/apartment"),"save-action"===t&&e()}}),se(ss,{}),se(Ls,{payload:a,mode:a.menuMode,children:[se(Ge,{fields:ic,changeSubject:l,features:()=>({...a.permissions,withBottomSaveButton:!0}),payload:()=>({...a,beginSave:e}),context:o,onChange:t,handler:()=>i}),se(Ye,{}),se(Ke,{})]})]})},isActive:e=>cs(["/apartment_edit/:id","/apartment_edit/:id/object"],e)},{id:"documents",element:({onChange:e,payload:t,beginSave:a,formState:i,data:o})=>{const{handleLoadStart:l,handleLoadEnd:r,loading:n}=Oe({history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)});return se(Se,{children:[se($e,{items:Is,payload:i,onAction:e=>{"list-action"===e&&os.routerService.back("/apartment"),"save-action"===e&&a()}}),se(ss,{}),se(Ls,{payload:t,mode:t.menuMode,children:[se(et,{sx:{p:1},children:se(ut,{disabled:n,accept:"*",multiple:!0,items:o,tr:async e=>await os.appwriteService.tryReadFileName(e)||e,fallback:os.errorService.handleGlobalError,onClick:async e=>{const t=await os.appwriteService.getFileURL(e),a=await os.appwriteService.readFileName(e);pt(t,a)},onUpload:e=>os.appwriteService.uploadFile(e),onChange:async t=>{e(t)},onLoadStart:l,onLoadEnd:r})}),se(Ye,{}),se(Ke,{})]})]})},isActive:e=>cs(["/apartment_edit/:id/documents"],e)},{id:"owner_contact",element:({data:e,payload:t,formState:a,onChange:i,beginSave:o})=>{const l=We(e);return se(Se,{children:[se($e,{items:zm,onAction:e=>{"list-action"===e&&os.routerService.back("/apartment"),"save-action"===e&&o()},payload:a}),se(ss,{}),se(Ls,{payload:t,mode:t.menuMode,children:[se(Ge,{handler:()=>e,onChange:i,features:()=>({...t.permissions,withBottomSaveButton:!0}),payload:()=>({...t,beginSave:o}),context:a,changeSubject:l,fields:Sm}),se(Ye,{}),se(Ke,{})]})]})},isActive:e=>cs(["/apartment_edit/:id/owner_contact"],e)},{id:"object",element:({params:{id:e},formState:t,payload:a,data:i})=>{const o=(({apartmentId:e})=>{const{handleLoadStart:t,handleLoadEnd:a}=Oe({history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)}),{execute:i}=Re((async()=>{await os.featureService.hasFeature("superadmin")&&(await os.cleanupService.removeApartment(e),os.routerService.push("/apartment"))}),{onLoadStart:t,onLoadEnd:a,fallback:os.errorService.handleGlobalError}),o=Qt({title:"Вы уверены?",msg:"Удаление объекта сотрет соответствующие записи в объектах недвижимости, сделках. Продолжить?"});return()=>o().then((e=>{e&&i()}))})({apartmentId:e}),{pickData:l,render:r}=He({AfterTitle:({onClose:e})=>se(_e,{size:"small",onClick:e,children:se(Ue,{})}),fields:ic,payload:a,features:a.permissions,outlinePaper:!0,handler:async()=>await os.apartmentViewService.tryRead(e),fullScreen:!0,title:"Редактировать",onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1),onSubmit:async t=>{let i=!0;try{t&&(await os.apartmentViewService.update(e,t),a.hasAdvertising&&await os.advertisingRequestService.updateAdvertisingByApartment(e,t))}catch(o){i=!1;const e=xn(o);return os.alertService.notify(e),!1}finally{return i}},submitLabel:"Сохранить"}),n=sm({title:"Поделиться объектом",payload:a,features:a.permissions,selectedRows:i.system_allowance||[]}),{execute:s}=Re((async t=>{if("list-action"===t&&os.routerService.back("/apartment"),"edit-action"===t&&l(),"toggle-only-for-owner-action"===t&&await os.apartmentViewService.toggleOnlyForOwner(e),"create-advertising-action"===t&&(await os.advertisingRequestService.createAdvertisingByApartment(e),os.routerService.push("/apartment_view/".concat(e,"/advertising"))),"pick-allowance-action"===t){const t=await n();if(!t)return;await os.apartmentViewService.updateAllowance(e,t)}"superadmin-remove-action"===t&&o()}),{onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)}),d=We(i);return se(Se,{children:[se($e,{payload:t,items:dm,actions:cm,onAction:s}),se(ss,{}),se(ps,{payload:a,mode:a.menuMode,children:[se(Ge,{dirty:!0,readonly:!0,changeSubject:d,features:a.permissions,payload:a,fields:om,handler:()=>i}),se(Ye,{}),se(Ke,{})]}),r()]})},isActive:e=>cs(["/apartment_view/:id","/apartment_view/:id/object"],e)},{id:"owner_contact",element:({params:{id:e},payload:t,formState:a,data:i})=>{const o=We(i),{pickData:l,render:r}=He({AfterTitle:({onClose:e})=>se(_e,{size:"small",onClick:e,children:se(Ue,{})}),fields:Sm,payload:t,features:t.permissions,outlinePaper:!0,handler:async()=>{const t=await Bm(e);return await os.contactViewService.tryRead(t)},fullScreen:!0,title:"Редактировать",onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1),onSubmit:async t=>{let a=!0;try{if(t){const a=await Bm(e);await os.contactViewService.update(a,t)}}catch(i){a=!1;const e=xn(i);return os.alertService.notify(e),!1}finally{return a}},submitLabel:"Сохранить"});return se(Se,{children:[se($e,{items:Mm,payload:a,onAction:async e=>{"list-action"===e&&os.routerService.back("/apartment"),"edit-action"===e&&l()}}),se(ss,{}),se(ps,{payload:t,mode:t.menuMode,children:[se(Ge,{changeSubject:o,readonly:!0,handler:()=>i,features:t.permissions,fields:Im,payload:t}),se(Ye,{}),se(Ke,{})]}),r()]})},isActive:e=>cs(["/apartment_view/:id/owner_contact"],e)},{id:"documents",element:({params:{id:e},data:t,payload:a,formState:i})=>{const{render:o,pickFiles:l}=Ms({data:t,onSubmit:async t=>{await os.apartmentViewService.update(e,{apartment_files:t})}});return se(Se,{children:[se($e,{items:Bs,payload:i,onAction:e=>{"list-action"===e&&os.routerService.back("/apartment"),"edit-action"===e&&l()}}),se(ss,{}),se(ps,{payload:a,mode:a.menuMode,children:[se(et,{sx:{p:1},children:se(ut,{disabled:!0,accept:"*",multiple:!0,items:t,tr:async e=>await os.appwriteService.tryReadFileName(e)||e,fallback:os.errorService.handleGlobalError,onClick:async e=>{const t=await os.appwriteService.getFileURL(e),a=await os.appwriteService.readFileName(e);pt(t,a)},onUpload:e=>os.appwriteService.uploadFile(e)})}),se(Ye,{}),se(Ke,{})]}),o()]})},isActive:e=>cs(["/apartment_view/:id/documents"],e)},{id:"tasks",element:({formState:e,payload:t})=>{const[a,i]=re.useState([]),{size:o}=Je({target:document.body,selector:"main",compute:e=>{var a;let{height:i,width:o}=e;if(t.menuMode===B.Tabs){const e=document.querySelector(".".concat(ft));i-=(null==e?void 0:e.offsetHeight)||0}return i-=(null==(a=document.querySelector(".".concat($m)))?void 0:a.offsetHeight)||0,i-=50,i=Math.min(window.innerHeight-50,i),{width:o,height:i}}}),{loading:l,execute:r}=Re((async e=>{if(e){const e=rs("id")||"unknown",{contact_id:t}=await os.apartmentViewService.read(e),a=await os.taskHistoryViewService.findAllByContactId(t);i(a)}}),{fallback:os.errorService.handleGlobalError,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)});return se(Se,{children:[se("div",{className:$m,children:[se($e,{payload:e,items:Gm,onAction:e=>{"list-action"===e&&os.routerService.back("/apartment")}}),se(ss,{})]}),se(ps,{payload:t,mode:t.menuMode,children:se(ct,{sx:{height:o.height},minHeight:72,loading:l,onDataRequest:e=>{r(e)},children:se(we,{spacing:1,children:a.map((e=>se(Wm,{loading:l,status:"info",item:e},e.$id)))})})})]})},isActive:e=>cs(["/apartment_view/:id/tasks"],e)},{id:"advertising",element:({formState:e,payload:t,data:a})=>{const i=Ne({large:!0,title:"Опубликовать в Telegram",fields:Ss}),{handleLoadStart:o,handleLoadEnd:l}=Oe({history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)}),{execute:r}=Re((async()=>{const e=await i().toPromise();if(!e)return;const o=await os.dictService.getTelegramMapRaw(),l=h.get(o,e.telegram_channel),r=await ws(a,l.channel,t),n=a.apartment_images||[],s=a.advertising_images||[],d=n.filter((e=>s.includes(e)));await os.publishService.publishTelegram(e.telegram_channel,r,d,"№".concat(a.apartment_index)),os.alertService.notify("Пост опубликован успешно!")}),{onLoadStart:o,onLoadEnd:l,fallback:os.errorService.handleGlobalError}),{pickData:n,render:s}=He({AfterTitle:({onClose:e})=>se(_e,{size:"small",onClick:e,children:se(Ue,{})}),fields:Kn,handler:()=>a,payload:t,features:t.permissions,outlinePaper:!0,fullScreen:!0,title:"Редактировать",onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1),onSubmit:async e=>{let t=!0;try{e&&await os.advertisingViewService.update(a.id,e)}catch(i){t=!1;const e=xn(i);return os.alertService.notify(e),!1}finally{return t}},submitLabel:"Сохранить"}),d=We(a);return se(Se,{children:[se($e,{payload:e,items:zs,onAction:e=>{"list-action"===e&&os.routerService.back("/apartment"),"edit-action"===e&&n(),"publish-action"===e&&r()}}),se(ss,{}),se(ps,{payload:t,mode:t.menuMode,children:[se(Ge,{dirty:!0,readonly:!0,changeSubject:d,features:t.permissions,payload:t,fields:hs,handler:()=>a}),se(Ye,{}),se(Ke,{})]}),s()]})},isActive:e=>cs(["/apartment_view/:id/advertising"],e)},{id:"history",element:({payload:e,formState:t})=>{const[a,i]=re.useState([]),{size:o}=Je({target:document.body,selector:"main",compute:t=>{var a;let{height:i,width:o}=t;if(e.menuMode===B.Tabs){const e=document.querySelector(".".concat(ft));i-=(null==e?void 0:e.offsetHeight)||0}return i-=(null==(a=document.querySelector(".".concat(js)))?void 0:a.offsetHeight)||0,i-=50,i=Math.min(window.innerHeight-50,i),{width:o,height:i}}}),{loading:l,execute:r}=Re((async e=>{if(e){const e=rs("id"),t=await os.dealHistoryViewService.findAllByApartmentId(e);i(t)}}),{fallback:os.errorService.handleGlobalError,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)});return se(Se,{children:[se("div",{className:js,children:[se($e,{payload:t,items:qs,onAction:e=>{"list-action"===e&&os.routerService.back("/apartment")}}),se(ss,{})]}),se(ps,{payload:e,mode:e.menuMode,children:se(ct,{sx:{height:o.height},minHeight:72,loading:l,onDataRequest:e=>{r(e)},children:se(we,{spacing:1,children:a.map((e=>se(Rs,{loading:l,status:"info",item:e},e.$id)))})})})]})},isActive:e=>cs(["/apartment_view/:id/history"],e)},{id:"service_comment",element:({payload:e,formState:t})=>{const[a,i]=re.useState([]),{size:o}=Je({target:document.body,selector:"main",compute:t=>{var a;let{height:i,width:o}=t;if(e.menuMode===B.Tabs){const e=document.querySelector(".".concat(ft));i-=(null==e?void 0:e.offsetHeight)||0}return i-=(null==(a=document.querySelector(".".concat(Hm)))?void 0:a.offsetHeight)||0,i-=50,i=Math.min(window.innerHeight-50,i),{width:o,height:i}}}),{execute:l}=Re((async()=>{const e=rs("id"),t=await os.serviceCommentViewService.findAllByApartmentId(e);i(await Promise.all(t.map((async({$id:e,user_id:t,file_id:a,comment:i,$createdAt:o})=>{const l=await os.userViewService.tryRead(t);if(!l)return null;const r=l.avatar?await os.appwriteService.getImageURL(l.avatar):"",s=a?await os.appwriteService.tryReadFileName(a):"";return{id:e,message:i,fileId:a,userId:t,displayName:[l.last_name,l.first_name,l.middle_name,n(o).format("DD.MM.YYYY / HH:mm")].join(" "),fileName:s,avatar:r}})).filter((e=>!!e)).reverse()))}),{fallback:os.errorService.handleGlobalError,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)});re.useEffect((()=>{l()}),[]),re.useEffect((()=>os.serviceCommentViewService.createSubject.subscribe((e=>{const t=rs("id");e.apartment_id===t&&l()}))),[]);return se(Se,{children:[se("div",{className:Hm,children:[se($e,{payload:t,items:Um,onAction:e=>{"list-action"===e&&os.routerService.back("/apartment")}}),se(ss,{})]}),se(ps,{payload:e,mode:e.menuMode,children:se(Om,{payload:e,style:{height:o.height},messages:a,onText:async e=>{const t=os.appwriteService.currentUser.$id,a=rs("id");await os.serviceCommentViewService.create({user_id:t,comment:e,apartment_id:a,bid_id:null,contact_id:null,file_id:null}),await l()},onFile:async(e,t)=>{const a=os.appwriteService.currentUser.$id,i=rs("id");await os.serviceCommentViewService.create({user_id:a,comment:e,apartment_id:i,bid_id:null,contact_id:null,file_id:t}),await l()}})})]})},isActive:e=>cs(["/apartment_view/:id/service_comment"],e)}],Km=async e=>{if("create"===e)return{"data-sozdaniya_klienta":Qe.currentDate()};const{contact_id:t}=await os.apartmentViewService.read(e);return await os.contactViewService.tryRead(t)},Xm=({id:e="create"})=>{const t=async(t,{afterSave:a})=>{let i=!0;try{const i=h.get(t,"object")||{},o=h.get(t,"owner_contact")||{},l=h.get(t,"documents")||[];let r=h.get(t,"object.contact_id");h.set(t,"object.apartment_files",l);const n=!!r&&await os.contactViewService.tryRead(r);if(r&&n)await os.contactViewService.update(r,o);else{const{id:e}=await os.contactViewService.create(o);r=e}if(h.set(t,"object.contact_id",r),"create"===e){const{id:e}=await os.apartmentViewService.create(i);await a(),os.routerService.push("/apartment_edit/".concat(e))}else await os.apartmentViewService.update(e,i);os.routerService.hasViewRedirectFlag()&&(await a(),os.routerService.push("/apartment_view/".concat(e))),os.alertService.notify("Изменения сохранены")}catch(o){i=!1;const e=xn(o);os.alertService.notify(e)}finally{return i}},a=ne();return re.useEffect((()=>os.contactViewService.updateSubject.subscribe((async([e,t])=>{const i=rs("id");if(!i)return;const o=await os.apartmentViewService.tryRead(i);e===(null==o?void 0:o.contact_id)&&a.next(["owner_contact",t])}))),[]),re.useEffect((()=>os.apartmentViewService.updateSubject.subscribe((([t,i])=>{e===t&&(a.next(["object",i]),a.next(["advertising",i]),a.next(["documents",(null==i?void 0:i.apartment_files)||[]]))}))),[]),re.useEffect((()=>os.advertisingViewService.updateSubject.subscribe((([t,i])=>{e===i.apartment_id&&a.next(["advertising",i])}))),[]),se(Ka,{state:async()=>[await Km(e),await os.apartmentViewService.tryRead(e),await os.advertisingViewService.tryReadByApartmentId(e),await os.settingsViewService.getMasterDetailMode(),await os.permissionService.getPermissions(),await os.featureService.getAccessLevel()],reloadSubject:os.layoutService.reloadOutletSubject,fallback:os.errorService.handleGlobalError,children:async([i,o,l,r,n,s])=>se(Zt,{changeSubject:a,history:os.routerService,waitForChangesDelay:Go,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1),routes:Ym,params:{id:e},initialData:{owner_contact:i,advertising:l,object:o,documents:(null==o?void 0:o.apartment_files)||[]},payload:()=>({menuMode:r,permissions:n,accessLevel:s,hasAdvertising:!!l}),onChange:console.log,onSubmit:t})})},Jm=oe.createLoader(12),Zm=()=>se(me,{sx:{mb:1,minHeight:32},children:se(Nt,{sx:{height:"100%"},hideOverflowY:!0,children:se(me,{sx:{display:"flex",alignItems:"center",justifyContent:"stretch",gap:1},children:[se(Ae,{variant:"subtitle2",children:"Заявки:"}),se(ye,{payload:null,Loader:Jm,children:async()=>{const e=await os.bidRequestService.getAllBidCount(),t=await os.bidRequestService.getRentBidCount(),a=await os.bidRequestService.getSellBidCount(),i=await os.bidRequestService.getArchiveBidCount(),o=await os.bidRequestService.getNewBidCount();return se(we,{direction:"row",gap:1,sx:{pointerEvents:"none"},children:[se(me,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[se(Ot,{orientation:"vertical"}),se(Ht,{href:"#",children:["Всего ",e]}),se(Ot,{orientation:"vertical"})]}),se(me,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[se(Ot,{orientation:"vertical"}),se(Ht,{href:"#",children:["Аренда ",t]}),se(Ot,{orientation:"vertical"})]}),se(me,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[se(Ot,{orientation:"vertical"}),se(Ht,{href:"#",children:["Продажа ",a]}),se(Ot,{orientation:"vertical"})]}),se(me,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[se(Ot,{orientation:"vertical"}),se(Ht,{href:"#",children:["Архив ",i]}),se(Ot,{orientation:"vertical"})]}),se(me,{sx:{display:"flex",gap:"4px",whiteSpace:"nowrap"},children:[se(Ot,{orientation:"vertical"}),se(Ht,{href:"#",children:["Новые ",o]}),se(Ot,{orientation:"vertical"})]})]})}})]})})}),Qm=()=>window.innerHeight-100,eu=()=>window.innerHeight-100,tu=()=>window.innerHeight-100,au=()=>window.innerHeight-100,iu=[{id:"common",element:({payload:e})=>{const t=ne(os.bidViewService.reloadSubject),{render:a,pickColumns:i,columns:o}=ed({columns:Hc,storageKey:"bid_columns"}),{listProps:l}=Xt(os.routerService.locationState,{fallback:os.errorService.handleGlobalError}),r=Jc();return se(Se,{children:[se(Jt,{withSearch:!0,withSingleSort:!0,withSingleChip:!0,noInitialFilters:!0,fetchDebounce:$o,reloadSubject:t,title:"Заявки",filterLabel:"Фильтры",heightRequest:eu,rowActions:Uc,actions:Oc,filters:Xc,columns:o,handler:r,chips:Wc,AfterActionList:Zm,AfterOperationList:Qc,onRowAction:async(e,a)=>{os.layoutService.setAppbarLoader(!0);try{if("edit-action"===e&&os.routerService.push("/bid_edit/".concat(a.id)),"remove-action"===e&&(await os.bidViewService.remove(a.id),t.next()),"copy-action"===e){const e=await os.bidViewService.read(a.id);await os.bidViewService.create(e),t.next()}"toggle-archive"===e&&(await os.bidViewService.toggleArchive(a.id),t.next())}finally{os.layoutService.setAppbarLoader(!1)}},onRowClick:async e=>{(await os.permissionService.getPermissions()).hasBidViewPermission&&os.routerService.push("/bid_view/".concat(e.id))},onAction:e=>{"add-action"===e&&os.routerService.push("/bid/create"),"column-setup-action"===e&&i()},selectionMode:$t.Multiple,payload:e,...l}),a()]})},isActive:e=>cs(["/bid"],e),isAvailable:()=>!1},{id:"rent",element:({payload:e})=>{const t=ne(os.bidViewService.reloadSubject),{render:a,pickColumns:i,columns:o}=ed({columns:Hc,storageKey:"bid_columns"}),{listProps:l}=Xt(os.routerService.locationState,{fallback:os.errorService.handleGlobalError}),r=Jc();return se(Se,{children:[se(Jt,{withSearch:!0,withSingleSort:!0,withSingleChip:!0,noInitialFilters:!0,fetchDebounce:$o,reloadSubject:t,title:"Заявки",filterLabel:"Фильтры",heightRequest:tu,rowActions:Uc,actions:Oc,filters:Xc,columns:o,handler:r,chips:Wc,AfterActionList:Zm,AfterOperationList:Qc,onRowAction:async(e,a)=>{os.layoutService.setAppbarLoader(!0);try{if("edit-action"===e&&os.routerService.push("/bid_edit/".concat(a.id)),"remove-action"===e&&(await os.bidViewService.remove(a.id),t.next()),"copy-action"===e){const e=await os.bidViewService.read(a.id);await os.bidViewService.create(e),t.next()}"toggle-archive"===e&&(await os.bidViewService.toggleArchive(a.id),t.next())}finally{os.layoutService.setAppbarLoader(!1)}},onRowClick:async e=>{(await os.permissionService.getPermissions()).hasBidViewPermission&&os.routerService.push("/bid_view/".concat(e.id))},onAction:e=>{"add-action"===e&&os.routerService.push("/bid/create"),"column-setup-action"===e&&i()},selectionMode:$t.Multiple,payload:{...e,_rent:!0},...l}),a()]})},isActive:e=>cs(["/bid_rent"],e),isAvailable:()=>!1},{id:"sell",element:({payload:e})=>{const t=ne(os.bidViewService.reloadSubject),{render:a,pickColumns:i,columns:o}=ed({columns:Hc,storageKey:"bid_columns"}),{listProps:l}=Xt(os.routerService.locationState,{fallback:os.errorService.handleGlobalError}),r=Jc();return se(Se,{children:[se(Jt,{withSearch:!0,withSingleSort:!0,withSingleChip:!0,noInitialFilters:!0,fetchDebounce:$o,reloadSubject:t,title:"Заявки",filterLabel:"Фильтры",heightRequest:au,rowActions:Uc,actions:Oc,filters:Xc,columns:o,handler:r,chips:Wc,AfterActionList:Zm,AfterOperationList:Qc,onRowAction:async(e,a)=>{os.layoutService.setAppbarLoader(!0);try{if("edit-action"===e&&os.routerService.push("/bid_edit/".concat(a.id)),"remove-action"===e&&(await os.bidViewService.remove(a.id),t.next()),"copy-action"===e){const e=await os.bidViewService.read(a.id);await os.bidViewService.create(e),t.next()}"toggle-archive"===e&&(await os.bidViewService.toggleArchive(a.id),t.next())}finally{os.layoutService.setAppbarLoader(!1)}},onRowClick:async e=>{(await os.permissionService.getPermissions()).hasBidViewPermission&&os.routerService.push("/bid_view/".concat(e.id))},onAction:e=>{"add-action"===e&&os.routerService.push("/bid/create"),"column-setup-action"===e&&i()},selectionMode:$t.Multiple,payload:{...e,_sell:!0},...l}),a()]})},isActive:e=>cs(["/bid_sell"],e),isAvailable:()=>!1},{id:"archive",element:({payload:e})=>{const t=ne(os.bidViewService.reloadSubject),{render:a,pickColumns:i,columns:o}=ed({columns:Hc,storageKey:"bid_columns"}),{listProps:l}=Xt(os.routerService.locationState,{fallback:os.errorService.handleGlobalError}),r=Jc();return se(Se,{children:[se(Jt,{withSearch:!0,withSingleSort:!0,withSingleChip:!0,noInitialFilters:!0,fetchDebounce:$o,reloadSubject:t,title:"Заявки",filterLabel:"Фильтры",heightRequest:Qm,rowActions:Uc,actions:Oc,filters:Xc,columns:o,handler:r,chips:Wc,AfterActionList:Zm,AfterOperationList:hd,onRowAction:async(e,a)=>{os.layoutService.setAppbarLoader(!0);try{if("edit-action"===e&&os.routerService.push("/bid_edit/".concat(a.id)),"remove-action"===e&&(await os.bidViewService.remove(a.id),t.next()),"copy-action"===e){const e=await os.bidViewService.read(a.id);await os.bidViewService.create(e),t.next()}"toggle-archive"===e&&(await os.bidViewService.toggleArchive(a.id),t.next())}finally{os.layoutService.setAppbarLoader(!1)}},onRowClick:async e=>{(await os.permissionService.getPermissions()).hasBidViewPermission&&os.routerService.push("/bid_view/".concat(e.id))},onAction:e=>{"add-action"===e&&os.routerService.push("/bid/create"),"column-setup-action"===e&&i()},selectionMode:$t.Multiple,payload:{...e,_archive:!0},...l}),a()]})},isActive:e=>cs(["/bid_archive"],e),isAvailable:()=>!1}],ou=[{id:"contact",label:"Контакт",isActive:()=>cs(["/bid_edit/:id/contact"])},{id:"parameter",label:"Параметры заявки",isActive:()=>cs(["/bid_edit/:id","/bid_edit/:id/parameter"])},{id:"tasks",label:"Задачи",isDisabled:()=>!0,isActive:()=>cs(["/bid_edit/:id/tasks"])},{id:"service_comment",label:"Служебный комментарий",isDisabled:()=>!0,isActive:()=>cs(["/bid_edit/:id/service_comment"])},{id:"history",label:"История",isDisabled:()=>!0,isActive:()=>cs(["/bid_edit/:id/history"])},{id:"documents",label:"Документы",isActive:()=>cs(["/bid_edit/:id/documents"])},{id:"commission_and_status",label:"Комиссия и статус",isDisabled:()=>!0,isActive:()=>cs(["/bid_edit/:id/commission_and_status"])}],lu=(e,t)=>{if(t)return;const a=rs("id","create");"contact"===e&&os.routerService.replace("/bid_edit/".concat(a,"/contact")),"parameter"===e&&os.routerService.replace("/bid_edit/".concat(a,"/parameter")),"tasks"===e&&os.routerService.replace("/bid_edit/".concat(a,"/tasks")),"service_comment"===e&&os.routerService.replace("/bid_edit/".concat(a,"/service_comment")),"history"===e&&os.routerService.replace("/bid_edit/".concat(a,"/history")),"documents"===e&&os.routerService.replace("/bid_edit/".concat(a,"/documents")),"commission_and_status"===e&&os.routerService.replace("/bid_edit/".concat(a,"/commission_and_status"))},ru=({payload:e,children:t,mode:a=B.Paper})=>{const i=re.useMemo((()=>"tabs"===a?B.Tabs:B.Paper),[a]);return se(qe,{withFixedPos:!0,payload:e,fixedPosHeaderAdjust:a===B.Paper?85:64,mode:i,options:ou,onActiveOptionChange:lu,children:t})},nu=[{type:Ee.Link,isVisible:()=>!!os.routerService.previousPath,action:"list-action",label:se(fe,{sx:{display:"block"}})},{type:Ee.Link,action:"list-action",label:"Заявки"},{type:Ee.Link,action:"list-action",isVisible:({id:e})=>"create"!==e,label:"Редактирование контакта"},{type:Ee.Link,action:"list-action",isVisible:({id:e})=>"create"===e,label:"Создание контакта"},{type:Ee.Button,isDisabled:({hasChanged:e})=>!e,action:"save-action",label:"Сохранить"}],su=[{id:"contact",label:"Контакт",isActive:()=>cs(["/bid_view/:id/contact"])},{id:"parameter",label:"Параметры заявки",isActive:()=>cs(["/bid_view/:id","/bid_view/:id/parameter"])},{id:"tasks",label:"Задачи",isActive:()=>cs(["/bid_view/:id/tasks"])},{id:"service_comment",isVisible:({permissions:e})=>e.hasMasterDetailPermission,label:"Служебный комментарий",isActive:()=>cs(["/bid_view/:id/service_comment"])},{id:"history",label:"История",isActive:()=>cs(["/bid_view/:id/history"])},{id:"documents",label:"Документы",isActive:()=>cs(["/bid_view/:id/documents"])},{id:"commission_and_status",label:"Комиссия и статус",isDisabled:()=>!0,isActive:()=>cs(["/bid_view/:id/commission_and_status"])}],du=(e,t)=>{if(t)return;const a=rs("id","create");"contact"===e&&os.routerService.replace("/bid_view/".concat(a,"/contact")),"parameter"===e&&os.routerService.replace("/bid_view/".concat(a,"/parameter")),"tasks"===e&&os.routerService.replace("/bid_view/".concat(a,"/tasks")),"service_comment"===e&&os.routerService.replace("/bid_view/".concat(a,"/service_comment")),"history"===e&&os.routerService.replace("/bid_view/".concat(a,"/history")),"documents"===e&&os.routerService.replace("/bid_view/".concat(a,"/documents")),"commission_and_status"===e&&os.routerService.replace("/bid_view/".concat(a,"/commission_and_status"))},cu=({children:e,payload:t,mode:a=B.Paper})=>{const i=re.useMemo((()=>"tabs"===a?B.Tabs:B.Paper),[a]);return se(qe,{payload:t,withFixedPos:!0,fixedPosHeaderAdjust:a===B.Paper?85:64,mode:i,options:su,onActiveOptionChange:du,children:e})},mu=[{type:Ee.Link,isVisible:()=>!!os.routerService.previousPath,action:"list-action",label:se(fe,{sx:{display:"block"}})},{type:Ee.Link,action:"list-action",label:"Заявки"},{type:Ee.Link,action:"list-action",label:"Просмотр контакта"},{type:Ee.Button,isDisabled:({payload:{permissions:e}})=>!e.hasBidUpdatePermission,action:"edit-action",label:"Редактировать"}],uu=async e=>{const{contact_id:t}=await os.bidViewService.read(e);return t},pu=[{type:o.Fragment,isVisible:({activeStep:e})=>0===e,fields:[{type:o.Component,element:()=>se(Ae,{variant:"h6",fontWeight:"bold",mb:2,children:"Данные контакта"})},{type:o.Text,outlined:!0,title:"Ф.И.О",isInvalid:({fio:e})=>e?null:"Обязательно к заполнению",description:"Фамилия Имя Отчество контакта",name:"fio"},{type:o.Text,outlined:!0,title:"Телефон",isInvalid:({telefon:e})=>e?null:"Обязательно к заполнению",description:"Телефон контакта",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon"}]},{type:o.Fragment,isVisible:({activeStep:e})=>2===e,fields:[{type:o.Component,element:()=>se(Ae,{variant:"h6",fontWeight:"bold",mb:1,children:"Предпросмотр"})},{type:o.Component,isVisible:({contact_id:e})=>!e,element:()=>se(Xe,{variant:"outlined",color:"warning",sx:{mb:2},children:"Создавая новую заявку, убедитесь, что нет дубликата контакта"})},{type:o.Component,isVisible:({contact_id:e})=>!!e,element:()=>se(Xe,{variant:"outlined",color:"info",sx:{mb:2},children:"Убедитесь, что это контактные данные клиента"})},{type:o.Text,isVisible:({contact_id:e})=>!!e,compute:async({contact_id:e})=>{const{fio:t=""}=await os.contactViewService.tryRead(e)||{};return t},disabled:!0,outlined:!0,title:"Ф.И.О"},{type:o.Text,isVisible:({contact_id:e})=>!!e,compute:async({contact_id:e})=>{const{telefon:t=""}=await os.contactViewService.tryRead(e)||{};return t},fieldBottomMargin:"0",disabled:!0,outlined:!0,title:"Телефон",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000"},{type:o.Text,isVisible:({contact_id:e})=>!e,outlined:!0,title:"Ф.И.О",isInvalid:({fio:e})=>e?null:"Обязательно к заполнению",description:"Фамилия Имя Отчество контакта",name:"fio"},{type:o.Text,isVisible:({contact_id:e})=>!e,outlined:!0,title:"Телефон",isInvalid:({telefon:e})=>e?null:"Обязательно к заполнению",description:"Телефон контакта",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon"}]}],yu=[{type:Ee.Link,action:"list-action",label:"Список заявок"},{type:Ee.Link,action:"list-action",label:"Создание заявки"}],hu=Nn()((e=>({root:{position:"relative",overflow:"hidden"},header:{position:"absolute",top:0,left:0,height:65,paddingLeft:e.spacing(2),paddingRight:e.spacing(2),background:"whitesmoke",width:"100%"},content:{minHeight:300},adjust:{paddingBottom:65},listItemBackground:{background:le(e.palette.primary.main,.05)}}))),bu=oe.createLoader(12),vu=[{type:Ee.Link,isVisible:()=>!!os.routerService.previousPath,action:"list-action",label:se(fe,{sx:{display:"block"}})},{type:Ee.Link,action:"list-action",label:"Заявки"},{type:Ee.Link,action:"list-action",isVisible:({id:e})=>"create"!==e,label:"Редактирование документа"},{type:Ee.Link,action:"list-action",isVisible:({id:e})=>"create"===e,label:"Создание документа"},{type:Ee.Button,isDisabled:({hasChanged:e})=>!e,action:"save-action",label:"Сохранить"}],_u=[{type:Ee.Link,isVisible:()=>!!os.routerService.previousPath,action:"list-action",label:se(fe,{sx:{display:"block"}})},{type:Ee.Link,action:"list-action",label:"Заявки"},{type:Ee.Link,action:"list-action",label:"Просмотр документа"},{type:Ee.Button,isDisabled:({payload:{permissions:e}})=>!e.hasBidUpdatePermission,action:"edit-action",label:"Редактировать"}],gu="real-estate__headerRoot",fu=[{type:Ee.Link,isVisible:()=>!!os.routerService.previousPath,action:"list-action",label:se(fe,{sx:{display:"block"}})},{type:Ee.Link,action:"list-action",label:"Заявки"},{type:Ee.Link,action:"list-action",label:"Просмотр истории"}],ku=[{type:o.Complete,fieldRightMargin:"0",outlined:!1,name:"strana",title:"Страна",tip:async()=>["Узбекистан"]},{type:o.Complete,fieldRightMargin:"0",outlined:!1,name:"gorod",title:"Город",tip:["Ташкент"]},{type:o.Complete,fieldRightMargin:"0",outlined:!1,name:"oblast",title:"Область",tip:async()=>["Ташкентская область"]},{type:o.Complete,fieldRightMargin:"0",outlined:!1,name:"rajon",title:"Район",tip:["Алмазарский район","Бектемирский район","Мирабадский район","Мирзо-Улугбекский район","Сергелийский район","Учтепинский район","Чиланзарский район","Шайхантахурский район","Юнусабадский район","Яккасарайский район","Янгихаётский район","Яшнабадский район"]},{type:o.Complete,fieldRightMargin:"0",tip:os.dictService.getMahallya,outlined:!1,name:"mahallya",title:"Махалля"},{type:o.Complete,fieldRightMargin:"0",tip:os.dictService.getUlicza,outlined:!1,name:"ulicza",title:"Улица"},{type:o.Text,fieldRightMargin:"0",outlined:!1,name:"orientir",title:"Ориентир"},{type:o.Combo,fieldRightMargin:"0",freeSolo:!0,outlined:!1,name:"metro",title:"Метро",itemList:["А. Ходжаев","Абдулла Кодирий","Алишер Навоий","Амир Темур хиёбони","Беруний","Бобур","Бодомзор","Буюк Ипак йули","Гофур Гулом","Дружба народов","Дустлик","Жанубий","Космонавтлар","Машинасозлар","Миллий бог","Мингурик","Минор","Мирзо Улугбек","Мустакиллик майдони","Новза","Ойбек","Олмазор","Отчопар","Пахтакор","Пушкинская","Сергели","Тинчлик","Тошкент","Тукимачи","Туркистон","Турсунзода","Узбекистон","Усмон Носыр","Файзулла Ходжаев","Хамид Олимжон","Чилонзор","Чорсу","Чош-тепа","Шахристан","Эхтиром","Юнус Ражабий","Юнусабад"]},{type:o.Fragment,isVisible:e=>{let t=!1;return t=t||ze(e.podkategoriya_obekta,"Квартиры"),t},fields:[{type:o.Text,columns:"6",outlined:!1,name:"nomer_doma",title:"№ дома"},{type:o.Text,fieldRightMargin:"0",columns:"6",outlined:!1,name:"nomer_kvartiry",title:"№ квартиры"}]},{type:o.Fragment,isVisible:e=>{let t=!1;return t=t||null!==e.kategoriya_obekta,t=t||null!==e.podkategoriya_obekta,t=t&&!ze(e.podkategoriya_obekta,"Квартиры"),t},fields:[{type:o.Text,fieldRightMargin:"0",outlined:!1,name:"nomer_doma",title:"№ дома"}]},{type:o.Component,element:Zd}];window.address_fields=ku;const wu=[{type:o.Items,labelShrink:!0,placeholder:"Выберите несколько",freeSolo:!0,outlined:!1,name:"metro_list",title:"Метро",itemList:["А. Ходжаев","Абдулла Кодирий","Алишер Навоий","Амир Темур хиёбони","Беруний","Бобур","Бодомзор","Буюк Ипак йули","Гофур Гулом","Дружба народов","Дустлик","Жанубий","Космонавтлар","Машинасозлар","Миллий бог","Мингурик","Минор","Мирзо Улугбек","Мустакиллик майдони","Новза","Ойбек","Олмазор","Отчопар","Пахтакор","Пушкинская","Сергели","Тинчлик","Тошкент","Тукимачи","Туркистон","Турсунзода","Узбекистон","Усмон Носыр","Файзулла Ходжаев","Хамид Олимжон","Чилонзор","Чорсу","Чош-тепа","Шахристан","Эхтиром","Юнус Ражабий","Юнусабад"]},{type:o.Items,labelShrink:!0,freeSolo:!0,placeholder:"Выберите несколько",fieldRightMargin:"0",outlined:!1,name:"rajon_list",title:"Район",itemList:["Алмазарский район","Бектемирский район","Мирабадский район","Мирзо-Улугбекский район","Сергелийский район","Учтепинский район","Чиланзарский район","Шайхантахурский район","Юнусабадский район","Яккасарайский район","Янгихаётский район","Яшнабадский район"]},{type:o.Items,labelShrink:!0,freeSolo:!0,placeholder:"Выберите несколько",fieldRightMargin:"0",itemList:os.dictService.getMahallya,outlined:!1,name:"mahallya_list",title:"Махалля"}];window.area_fields=wu;const Su=54,zu=Nn()((e=>({root:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",overflow:"hidden",height:775},container:{overflow:"hidden",padding:e.spacing(1),flex:1},appBarRoot:{background:e.palette.primary.main,maxHeight:Su,height:Su,boxShadow:"unset",color:"#000"},tabsRoot:{minHeight:Su,height:Su,marginLeft:"0 !important",marginRight:"0 !important"},tabRoot:{minHeight:Su,height:Su,color:"#fff"},tabRootTransparent:{minHeight:Su,height:Su},tabSelected:{color:"#fff !important"},indicator:{height:6,background:"#0288d1"},indicatorTransparent:{height:6,background:e.palette.primary.main}}))),xu={},Au=[{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая"),t=t&&!ze(e.podkategoriya_obekta,"Квартиры"),t=t&&!ze(e.podkategoriya_obekta,"Дома"),t=t&&!ze(e.podkategoriya_obekta,"Земля/Участок"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая недвижимость)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"})]}]},{type:o.Fragment,isVisible:e=>!ze(e.kategoriya_obekta,"Коммерческая")&&ze(e.podkategoriya_obekta,"Земля/Участок"),fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Земля/Участок)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"})]}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&!ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Квартиры"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Квартиры)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"})]}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&!ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Дома"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Дома)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostevogo_doma",title:"Площадь гостевого дома М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_dopolnitelnoj_pristrojki",title:"Площадь дополнительной пристройки М²"})]}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Квартиры"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая квартира)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"})]}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Дома"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческий дом)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostevogo_doma",title:"Площадь гостевого дома М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_dopolnitelnoj_pristrojki",title:"Площадь дополнительной пристройки М²"})]}]},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Земля/Участок"),t},fields:[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительная информация по площади (Коммерческая земля/участок)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_gostinnoj",title:"Площадь гостинной М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_spalni",title:"Площадь комнаты М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_holla",title:"Площадь холла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_kuhni",title:"Площадь кухни М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_sanuzla",title:"Площадь санузла М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_balkona",title:"Площадь балкона М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_terrasy",title:"Площадь террасы М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_komnaty_ohrany",title:"Площадь комнаты охраны М²"})]}]}],Tu=[{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая"),t=t&&!ze(e.podkategoriya_obekta,"Квартиры"),t=t&&!ze(e.podkategoriya_obekta,"Дома"),t=t&&!ze(e.podkategoriya_obekta,"Земля/Участок"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая недвижимость)"})},{type:o.Items,columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Телевизор","Кондиционер","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг","Умный дом","Цоколь","Подвал","Терраса","Угловой","Комната охраны","Вдоль дороги","Сарай","Огород","Решетки на окнах","Пожарная сигнализация","Видеонаблюдение","Сигнализация","Разгрузочный пандус"]},{type:o.Items,columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Охрана","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Квартиры"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая квартира)"})},{type:o.Items,columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Холодильник","Телевизор","Кондиционер","Стиральная машина","Мусоропровод","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг","Умный дом","Решетки на окнах","Пожарная сигнализация","Видеонаблюдение","Сигнализация","Разгрузочный пандус","Цоколь","Подвал","Гардеробная","Терраса","Торец","Собственное обслуживающее ТСЖ","Консьерж","Угловой","Вдоль дороги"]},{type:o.Items,columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Охрана","Барбекю зона","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Дома"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческий дом)"})},{type:o.Items,columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Телевизор","Кондиционер","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг","Умный дом","Комната охраны","Гостевой домик","Барбекю зона","2 дома во дворе","Сарай","Огород","Полисадник","Дополнительная пристройка","Разгрузочный пандус","Цоколь","Подвал","Гардеробная","Терраса","Угловой","Вдоль дороги","Решетки на окнах","Пожарная сигнализация","Видеонаблюдение","Сигнализация"]},{type:o.Items,columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Охрана","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Земля/Участок"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Коммерческая земля/участок)"})},{type:o.Items,columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Забор","Катлаван","Сарай","Огород","Самострой","Угловой","Пожарная сигнализация","Видеонаблюдение","Сигнализация","Разгрузочный пандус"]},{type:o.Items,columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Охрана","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}}],Fu=[{type:o.Fragment,isVisible:e=>(!ze(e.podkategoriya_obekta,"Земля/Участок")||!ze(e.kategoriya_obekta,"Коммерческая"))&&((!ze(e.podkategoriya_obekta,"Дома")||!ze(e.kategoriya_obekta,"Коммерческая"))&&((!ze(e.podkategoriya_obekta,"Квартиры")||!ze(e.kategoriya_obekta,"Коммерческая"))&&ze(e.kategoriya_obekta,"Коммерческая"))),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая недвижимость)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_obekta",title:"Состояние объекта",itemList:["Новой постройки","Недостроенный","Под снос","Коробка","Пустая земля/участок"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip_stroeniya",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"}),Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"balkon",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"parkovka",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},{type:o.Combo,sx:{mt:2},columns:"3",outlined:!1,name:"mebel",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},{type:o.Items,columns:"3",outlined:!1,name:"voda",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]},{type:o.Items,columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Combo,columns:"3",outlined:!1,name:"lift_kommercziya",title:"Лифт",itemList:["Есть","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"sistema_otopleniya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Combo,columns:"3",outlined:!1,name:"elektrichestvo",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Combo,columns:"3",outlined:!1,name:"kanalizacziya",title:"Канализация",itemList:["Да","Нет"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"mestopolozhenie_obekta",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),{type:o.Items,columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:o.Items,columns:"3",outlined:!1,name:"vid_liczenzii",title:"Вид лицензии",itemList:["Коммерческая","Жилая"]},{type:o.Component,sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>se(xe,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})}]}},{type:o.Fragment,isVisible:e=>{if(ze(e.podkategoriya_obekta,"Квартиры")&&ze(e.kategoriya_obekta,"Коммерческая"))return!1;let t=!1;return t=t||ze(e.podkategoriya_obekta,"Квартиры"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Квартиры)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_remonta-kvartiry",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Complete,columns:"3",outlined:!1,name:"nazvanie_zhk",title:"Название ЖК",tip:['ЖК "Greenwich"','ЖК "OzMahal"','ЖК "Elysium"','ЖК "Binkat"','ЖК "Brooklyn"','ЖК "Assalom Havo"','ЖК "Istanbul City"']},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip-stroeniya_kvartiry",title:"Тип строения",itemList:["Кирпичный","Монолитный","Блочный","Панельный","Деревянный","Газоблочный","Бетонно-керамзитный"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"balkon_kvartira",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Малосемейная","Общежитие","Пентхаус","Дуплекс","Комната"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"lift_kvartira",title:"Лифт",itemList:["Пассажирский","Грузовой","Нет"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel_kvartira",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"zhilaya_ploshhad",title:"Жилая площадь М²"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"mebel_kvartira",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"}),Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_kvartiry",title:"Система отопления",itemList:["Центральное","2х контурный котел","Теплый пол"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"vid_iz_okna",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"parkovka_kvartira",title:"Парковка",itemList:["Наземная","Собственная","Подземная","В аренду","Нет"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"})]}},{type:o.Fragment,isVisible:e=>{if(ze(e.podkategoriya_obekta,"Дома")&&ze(e.kategoriya_obekta,"Коммерческая"))return!1;let t=!1;return t=t||ze(e.podkategoriya_obekta,"Дома"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Дома)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_doma",title:"Состояние дома",itemList:["Новой постройки","Недостроенный","Под снос","Коробка"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip-stroeniya_doma",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"balkon_doma",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Смешанный"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"bassejn",title:"Бассейн",itemList:["Летний","Зимний","Нет"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_doma",title:"Площадь дома М²"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel_doma",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"voda_dom",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]},{type:o.Combo,sx:{mt:2},columns:"3",outlined:!1,name:"lift_dom",title:"Лифт",itemList:["Есть","Нет"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_dom",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Combo,sx:{mt:2},columns:"3",outlined:!1,name:"mebel_dom",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"gaz_dom",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_dom",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"}),{type:o.Combo,sx:{mt:2},columns:"3",outlined:!1,name:"elektrichestvo_dom",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"vid_iz_okna_dom",title:"Вид из окна",itemList:["В огород","На улицу","На трассу"]},{type:o.Items,columns:"3",outlined:!1,name:"garazh",title:"Гараж",itemList:["Подземный","Закрытый","Под навесом","Уличный"]},{type:o.Combo,columns:"3",outlined:!1,name:"kanalizacziya_dom",title:"Канализация",itemList:["Да","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"raspolozhenie_doma",title:"Расположение дома",itemList:["По середине","В начале двора","В конце двора"]},{type:o.Items,outlined:!1,columns:"3",name:"mestopolozhenie-obekta_dom",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]}]}},{type:o.Fragment,isVisible:e=>!ze(e.kategoriya_obekta,"Коммерческая")&&ze(e.podkategoriya_obekta,"Земля/Участок"),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Земля/Участок)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Component,sx:{mb:2,pr:1},columns:"3",name:"naznachenie-obekta-zemlya_uchastok",element:e=>se(xe,{variant:"standard",label:"Назначение объекта",items:[{label:"Сельхоз использование",value:"Сельхоз использование"},{label:"ИЖС",value:"ИЖС"},{label:"Высотная застройка",value:"Высотная застройка"},{label:"Промышленное назначение",value:"Промышленное назначение"},{label:"ТЦ",value:"ТЦ"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Склады",value:"Склады"},{label:"Инвестпроект",value:"Инвестпроект"},{label:"Строительство образовательных учреждений",value:"Строительство образовательных учреждений"},{label:"АЗС",value:"АЗС"},{label:"Мойка",value:"Мойка"}],value:e["naznachenie-obekta_zemlya"],onChange:t=>e.onChange({"naznachenie-obekta_zemlya":t})})},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip_zemli_uchastka",title:"Тип земли/участка",itemList:["Делимый","Неделимый"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie-obekta_zemlya",title:"Состояние объекта",itemList:["Пустая земля/участок","Недостроенная","Под снос"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"}),Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie-remonta_zemlya",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"parkovka_zemlya",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"voda_zemlya",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"mestopolozhenie-obekta_zemlya",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_goroda",title:"Расстояние до города (м)"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_zemlya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Items,columns:"3",outlined:!1,name:"podezdnye_puti",title:"Подъездные пути",itemList:["Асфальтированная дорога","Грунтовая дорога","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_zemlya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"elektrichestvo_zemlya",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"gaz_zemlya",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Combo,columns:"3",outlined:!1,name:"kanalizacziya_zemlya",title:"Канализация",itemList:["Да","Нет"]}]}},{type:o.Fragment,isVisible:e=>!(!ze(e.kategoriya_obekta,"Коммерческая")||!ze(e.podkategoriya_obekta,"Квартиры")),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая квартира)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_remonta-kvartiry",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Component,sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>se(xe,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},{type:o.Items,columns:"3",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"balkon_kvartira",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Малосемейная","Общежитие","Пентхаус","Дуплекс","Комната"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"lift_kvartira",title:"Лифт",itemList:["Пассажирский","Грузовой","Нет"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),{type:o.Complete,columns:"3",outlined:!1,name:"nazvanie_zhk",title:"Название ЖК",tip:['ЖК "Greenwich"','ЖК "OzMahal"','ЖК "Elysium"','ЖК "Binkat"','ЖК "Brooklyn"','ЖК "Assalom Havo"','ЖК "Istanbul City"']},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel_kvartira",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"parkovka_kvartira",title:"Парковка",itemList:["Наземная","Собственная","Подземная","В аренду","Нет"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"zhilaya_ploshhad",title:"Жилая площадь М²"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"mebel_kvartira",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"}),Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_kvartiry",title:"Система отопления",itemList:["Центральное","2х контурный котел","Теплый пол"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"vid_iz_okna",title:"Вид из окна",itemList:["Во двор","На улицу","На трассу"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"gaz",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:o.Items,columns:"3",outlined:!1,name:"sistema_kondiczionirovaniya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip-stroeniya_kvartiry",title:"Тип строения",itemList:["Кирпичный","Монолитный","Блочный","Панельный","Деревянный","Газоблочный","Бетонно-керамзитный"]}]}},{type:o.Fragment,isVisible:e=>!(!ze(e.kategoriya_obekta,"Коммерческая")||!ze(e.podkategoriya_obekta,"Дома")),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческий дом)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_doma",title:"Состояние дома",itemList:["Новой постройки","Недостроенный","Под снос","Коробка"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"mestopolozhenie-obekta_dom",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},{type:o.Component,sx:{pr:1,mb:2},columns:"3",name:"naznachenie_obekta",element:e=>se(xe,{variant:"standard",label:"Назначение объекта",items:[{label:"Офис",value:"Офис"},{label:"Салон",value:"Салон"},{label:"Магазин/Бутик",value:"Магазин/Бутик"},{label:"Мед. центр",value:"Мед. центр"},{label:"Учебный центр",value:"Учебный центр"},{label:"Помещение свободного назначения",value:"Помещение свободного назначения"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Школа",value:"Школа"},{label:"Детский сад",value:"Детский сад"},{label:"Рестораны/Кафе/Бары",value:"Рестораны/Кафе/Бары"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Территория промышленного назначения",value:"Территория промышленного назначения",child:[{label:"Завод",value:"Завод"},{label:"Фабрика",value:"Фабрика"},{label:"Склад",value:"Склад"},{label:"Бокс",value:"Бокс"},{label:"Цеха",value:"Цеха"}]},{label:"Складское помещение",value:"Складское помещение",child:[{label:"Холодное",value:"Холодное"},{label:"С отоплением",value:"С отоплением"},{label:"Фармацевтический склад",value:"Фармацевтический склад"}]},{label:"Отдельностоящее здание",value:"Отдельностоящее здание"},{label:"Часть здания",value:"Часть здания"}],value:e.naznachenie_obekta,onChange:t=>e.onChange({naznachenie_obekta:t})})},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie_remonta",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Items,columns:"3",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip-stroeniya_doma",title:"Тип строения",itemList:["Кирпичный","Монолитный","Монолитно-кирпичный","Панельный","Деревянный","Газоблочный","Блочный"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"ploshhad_doma",title:"Площадь дома М²"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"raspolozhenie_doma",title:"Расположение дома",itemList:["По середине","В начале двора","В конце двора"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip_planirovki",title:"Тип планировки",itemList:["Смежные","Раздельные","Смежно-раздельная","Студия","Евростудия","Малогаборитная","Смешанный"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"bassejn",title:"Бассейн",itemList:["Летний","Зимний","Нет"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sanuzel_doma",title:"Санузел",itemList:["Совмещенный","Раздельный","2 и более","На улице"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_spalen",title:"Количество спален"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"voda_dom",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение","На границе"]},{type:o.Combo,sx:{mt:2},columns:"3",outlined:!1,name:"lift_dom",title:"Лифт",itemList:["Есть","Нет"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"spalnya_sanuzel",title:"Комната + санузел"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_dom",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},{type:o.Combo,sx:{mt:2},columns:"3",outlined:!1,name:"mebel_dom",title:"Мебель",itemList:["Да","Нет","Частично","Мебель + Техника"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"gaz_dom",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"vysota_potolkov",title:"Высота потолков"}),{type:o.Combo,sx:{mt:2},columns:"3",outlined:!1,name:"elektrichestvo_dom",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"vid_iz_okna_dom",title:"Вид из окна",itemList:["В огород","На улицу","На трассу"]},{type:o.Items,columns:"3",outlined:!1,name:"garazh",title:"Гараж",itemList:["Подземный","Закрытый","Под навесом","Уличный"]},{type:o.Combo,columns:"3",outlined:!1,name:"kanalizacziya_dom",title:"Канализация",itemList:["Да","Нет"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"balkon_doma",title:"Балкон",itemList:["Лоджия","Навесной","Балкон открытый","2x6","2 и более","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_dom",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]}]}},{type:o.Fragment,isVisible:e=>!(!ze(e.kategoriya_obekta,"Коммерческая")||!ze(e.podkategoriya_obekta,"Земля/Участок")),child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Информация объекта (Коммерческая земля/участок)"})},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_komnat",title:"Количество комнат"}),{type:o.Component,sx:{mt:2,mb:2,pr:1},columns:"3",name:"naznachenie-obekta-zemlya_uchastok",element:e=>se(xe,{variant:"standard",label:"Назначение объекта",items:[{label:"Сельхоз использование",value:"Сельхоз использование"},{label:"ИЖС",value:"ИЖС"},{label:"Высотная застройка",value:"Высотная застройка"},{label:"Промышленное назначение",value:"Промышленное назначение"},{label:"ТЦ",value:"ТЦ"},{label:"Гостиница/Хостел",value:"Гостиница/Хостел"},{label:"Зона отдыха",value:"Зона отдыха"},{label:"Склады",value:"Склады"},{label:"Инвестпроект",value:"Инвестпроект"},{label:"Строительство образовательных учреждений",value:"Строительство образовательных учреждений"},{label:"АЗС",value:"АЗС"},{label:"Мойка",value:"Мойка"}],value:e["naznachenie-obekta_zemlya"],onChange:t=>e.onChange({"naznachenie-obekta_zemlya":t})})},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"tip_zemli_uchastka",title:"Тип земли/участка",itemList:["Делимый","Неделимый"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"poleznaya_ploshhad",title:"Полезная площадь М²"}),Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazh",title:"Этаж"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie-obekta_zemlya",title:"Состояние объекта",itemList:["Пустая земля/участок","Недостроенная","Под снос"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"mashina_mesto",title:"Машина-место"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"kolichestvo_sotok",title:"Количество соток"}),Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"000000000000000",name:"etazhnost",title:"Этажность"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sostoyanie-remonta_zemlya",title:"Состояние ремонта",itemList:["Дизайнерский","Евро","Отличное","Косметический","Без ремонта","Предчистовая отделка","Коробка","Требуется ремонт"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"parkovka_zemlya",title:"Парковка",itemList:["Наземная","Собственная","Подземная","Платная","Нет"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_metro",title:"Расстояние до метро (м)"}),Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"obshhaya_ploshhad",title:"Общая площадь М²"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"voda_zemlya",title:"Вода",itemList:["В доме","Скважена","Колодец на участке","Возможное проведение","Центральное водоснабжение"]},{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"mestopolozhenie-obekta_zemlya",title:"Местоположение объекта",itemList:["В городе","В пригороде","В сельской местности","Вдоль трассы","Возле водоема/реки","В предгорьях","В дачном массиве","На закрытой территории"]},Us({columns:"3",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000",name:"rasstoyanie_do_goroda",title:"Расстояние до города (м)"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"sistema-otopleniya_zemlya",title:"Система отопления",itemList:["Центральное","На газе","Электро","Смешанный","Без отопления","На твердом топливе","На жидком топливе"]},Us({columns:"3",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"0000",name:"god_postrojki",title:"Год постройки"}),{type:o.Items,sx:{mt:2},columns:"3",outlined:!1,name:"elektrichestvo_zemlya",title:"Электричество",itemList:["Есть","Есть возможность подключения","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"podezdnye_puti",title:"Подъездные пути",itemList:["Асфальтированная дорога","Грунтовая дорога","Нет"]},{type:o.Items,columns:"3",outlined:!1,name:"sistema-kondiczionirovaniya_zemlya",title:"Система кондиционирования",itemList:["Чиллеры","Напольные","Настенные"]},{type:o.Items,columns:"3",outlined:!1,name:"gaz_zemlya",title:"Газ",itemList:["Магистральный","Автономный","Есть возможность подключения","Нет"]},{type:o.Combo,columns:"3",outlined:!1,name:"kanalizacziya_zemlya",title:"Канализация",itemList:["Да","Нет"]}]}}],Cu=[{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&!ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Квартиры"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Квартиры)"})},{type:o.Items,columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Холодильник","Телевизор","Кондиционер","Стиральная машина","Мусоропровод","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг","Умный дом","Цоколь","Подвал","Гардеробная","Терраса","Торец","Собственное обслуживающее ТСЖ","Консьерж"]},{type:o.Items,columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Барбекю зона","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:o.Fragment,isVisible:e=>{let t=!0;return t=t&&!ze(e.kategoriya_obekta,"Коммерческая"),t=t&&ze(e.podkategoriya_obekta,"Дома"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Дома)"})},{type:o.Items,columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Телефон","Холодильник","Телевизор","Кондиционер","Стиральная машина","Газовая плита","Электроплита","Духовой шкаф","Вытяжка","Пылесос","Утюг","Умный дом","Цоколь","Подвал","Гардеробная","Терраса","Угловой","Комната охраны","Вдоль дороги","Гостевой домик","Барбекю зона","2 дома во дворе","Сарай","Огород","Полисадник","Дополнительная пристройка"]},{type:o.Items,columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Охрана","Закрытый двор","Шлагбаум","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}},{type:o.Fragment,isVisible:e=>{let t=!1;return t=t||ze(e.podkategoriya_obekta,"Земля/Участок"),t=t&&!ze(e.kategoriya_obekta,"Коммерческая"),t},child:{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Group,fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Дополнительные данные об объекте (Земля/Участок)"})},{type:o.Items,columns:"6",outlined:!1,name:"vnutri_est",title:"Внутри есть:",itemList:["Интернет","Забор","Катлаван","Сарай","Огород","Самострой","Угловой","Пожарная сигнализация","Видеонаблюдение","Сигнализация","Разгрузочный пандус"]},{type:o.Items,columns:"6",outlined:!1,name:"ryadom_est",title:"Рядом есть:",itemList:["Больница","Детская площадка","Детский сад","Автобусная остановка","Парковая зона","ТЦ","Кафе/Рестораны","Супермаркет","Магазин","Школа","Закрытый двор","Шлагбаум","Охрана","Спортивная площадка","Колледж","Университет","Рынок","Аптека","Ж/Д ветка"]}]}]}}],Vu=[{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Основная информация"})},{type:o.Text,outlined:!1,name:"zagolovok",title:"Заголовок",placeholder:"Введите текст"},{type:o.Fragment,isVisible:e=>ze(e.kategoriya_obekta,"Коммерческая"),fields:[{type:o.Combo,outlined:!1,columns:"4",name:"kategoriya_obekta",title:"Категория объекта",itemList:["Коммерческая","Жилая","От застройщика"]},{type:o.Items,outlined:!1,columns:"4",name:"prodazha",title:"Покупка",itemList:["Прямая продажа","Рассрочка","Через банк","Обмен"]},{type:o.Items,outlined:!1,columns:"4",name:"arenda",title:"Аренда",itemList:["Долгосрочная","Ежемесячная","Посуточная"]},{type:o.Combo,outlined:!1,columns:"4",name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>ze(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок","Здания","Базы"]},{type:o.Items,isVisible:e=>{if(ze(e.kategoriya_obekta,"Коммерческая")){if(ze(e.podkategoriya_obekta,"Дома","Квартиры"))return!1;if(ze(e.podkategoriya_obekta,"Земля/Участок"))return!1}return!0},columns:"4",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:o.Combo,isVisible:e=>!(!ze(e.kategoriya_obekta,"Коммерческая")||!ze(e.podkategoriya_obekta,"Дома"))||!ze(e.podkategoriya_obekta,"Дома"),columns:"4",outlined:!1,name:"istochnik",title:"Источник",itemList:["По звонку","Личные связи","Самостоятельный поиск","Риелтор","С сайта","Прибытие в офис","OLX","Facebook","Instagram","Telegram","Эксклюзив","Другое"]},{type:o.Combo,isVisible:e=>!(!ze(e.podkategoriya_obekta,"Квартиры")||!ze(e.kategoriya_obekta,"Коммерческая","Жилая")),columns:"4",outlined:!1,name:"tip_nedvizhimosti",title:"Тип недвижимости",itemList:["Вторичное жилье","Новостройка"]},{type:o.Combo,isVisible:e=>{let t=!1;return t=t||ze(e.podkategoriya_obekta,"Дома"),t},columns:"4",outlined:!1,name:"vid_obekta",title:"Вид объекта",itemList:["Дом","Коттедж","Таунхаус","ЖАКТ","Часть дома","Дача"]},{type:o.Items,isVisible:e=>!(!ze(e.kategoriya_obekta,"Коммерческая")||!ze(e.podkategoriya_obekta,"Земля/Участок")),columns:"4",outlined:!1,name:"vid_liczenzii",title:"Вид лицензии",itemList:["Коммерческая","Жилая"]}]},{type:o.Fragment,isVisible:e=>!ze(e.kategoriya_obekta,"Коммерческая"),fields:[{type:o.Combo,outlined:!1,columns:"4",name:"kategoriya_obekta",title:"Категория объекта",itemList:["Коммерческая","Жилая","От застройщика"]},{type:o.Items,outlined:!1,columns:"4",name:"prodazha",title:"Покупка",itemList:["Прямая продажа","Рассрочка","Через банк","Обмен"]},{type:o.Items,outlined:!1,columns:"4",name:"arenda",title:"Аренда",itemList:["Долгосрочная","Ежемесячная","Посуточная"]},{type:o.Combo,outlined:!1,columns:"4",name:"podkategoriya_obekta",title:"Подкатегория объекта",isVisible:e=>!ze(e.kategoriya_obekta,"Коммерческая"),itemList:()=>["Квартиры","Дома","Земля/Участок"]},{type:o.Combo,columns:"4",outlined:!1,name:"istochnik",title:"Источник",itemList:["По звонку","Личные связи","Самостоятельный поиск","Риелтор","С сайта","Прибытие в офис","OLX","Facebook","Instagram","Telegram","Эксклюзив","Другое"]},{type:o.Combo,isVisible:e=>!!ze(e.podkategoriya_obekta,"Квартиры")&&!ze(e.kategoriya_obekta,"Коммерческая"),columns:"4",outlined:!1,name:"tip_nedvizhimosti",title:"Тип недвижимости",itemList:["Вторичное жилье","Новостройка"]},{type:o.Combo,isVisible:e=>{let t=!1;return t=t||ze(e.podkategoriya_obekta,"Дома"),t},columns:"4",outlined:!1,name:"vid_obekta",title:"Вид объекта",itemList:["Дом","Коттедж","Таунхаус","ЖАКТ","Часть дома","Дача"]},{type:o.Items,isVisible:e=>{let t=!1;return t=t||ze(e.kategoriya_obekta,"Коммерческая"),t=t&&!ze(e.podkategoriya_obekta,"Дома"),t=t&&!ze(e.podkategoriya_obekta,"Земля/Участок"),t},columns:"4",outlined:!1,name:"raspolozhenie_obekta",title:"Расположение объекта",itemList:["В бизнес-центре","В административном здании","В многоквартирном доме","В частном доме","В торговом центре","На торговом рынке","В промзоне","На рынке"]},{type:o.Items,isVisible:e=>{let t=!1;return t=t||ze(e.podkategoriya_obekta,"Земля/Участок"),t},columns:"4",outlined:!1,name:"vid_liczenzii",title:"Вид лицензии",itemList:["Коммерческая","Жилая"]}]}]},...Fu,{type:o.Group,columns:"12",fieldRightMargin:"0",fieldBottomMargin:"0",fields:[{type:o.Fragment,isVisible:e=>{let t=!1;return t=t||null!==e.podkategoriya_obekta,t=t||null!==e.kategoriya_obekta,t},child:{type:o.Component,columns:"6",fieldRightMargin:"1",fieldBottomMargin:"1",element:({sx:e,withTransparentHeader:t=!1,readonly:a=!1,_fieldData:i=xu,onChange:o})=>{const{classes:l}=zu(),[r,n]=re.useState("area"),{reloadTrigger:s,doReload:d}=ca(),c=We(i);return re.useEffect((()=>c.subscribe((()=>{a&&d()}))),[a]),se(et,{className:l.root,sx:{...e,height:"100%"},children:se(ha,{value:r,children:[t&&se(me,{sx:{borderBottom:1,borderColor:"divider",pointerEvents:"all"},children:se(ba,{variant:"fullWidth",classes:{root:l.tabsRoot,indicator:l.indicatorTransparent},onChange:(e,t)=>n(t),children:[se(va,{classes:{root:l.tabRootTransparent},label:"Территория",value:"area"}),se(va,{classes:{root:l.tabRootTransparent},label:"Адрес",value:"address"})]})}),!t&&se(_a,{classes:{root:l.appBarRoot},position:"static",sx:{borderBottom:1,borderColor:"divider",pointerEvents:"all"},children:se(ba,{variant:"fullWidth",classes:{root:l.tabsRoot,indicator:l.indicator},onChange:(e,t)=>n(t),children:[se(va,{classes:{root:l.tabRoot,selected:l.tabSelected},label:"Территория",value:"area"}),se(va,{classes:{root:l.tabRoot,selected:l.tabSelected},label:"Адрес",value:"address"})]})}),se(ga,{className:l.container,value:"address",children:se(Ge,{readonly:a,sx:{marginRight:-8},payload:()=>({readonly:a}),handler:i,fields:ku,onChange:o},s)}),se(ga,{className:l.container,value:"area",children:se(Ge,{readonly:a,payload:()=>({readonly:a}),handler:i,fields:wu,onChange:o},s)})]})})}}},{type:o.Fragment,isVisible:e=>{let t=!1;return t=t||null!==e.podkategoriya_obekta,t=t||null!==e.kategoriya_obekta,t},child:{type:o.Group,style:{height:"100%"},columns:"6",fieldRightMargin:"0",fieldBottomMargin:"0",fields:[{type:o.Component,style:{height:"calc(100% - 212px)"},fieldRightMargin:"1",fieldBottomMargin:"1",isVisible:e=>{let t=!1;return t=t||null!==e.arenda,t=t||null!==e.prodazha,t},element:({onChange:e,_fieldData:t})=>se(jc,{withRentTab:null!==t.arenda,withSellTab:null!==t.prodazha,onChange:e,fieldData:t})},{type:o.Paper,fieldBottomMargin:"1",fieldRightMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Описание объекта"})},{type:o.Text,inputRows:3,outlined:!1,name:"opisanie",title:"Описание"}]}]}}]},...Cu,...Tu,...Au,{type:o.Component,features:["withBottomSaveButton"],watchOneContext:!0,element:xd}];window.bid_fields=Vu;const Lu=[{type:Ee.Link,isVisible:()=>!!os.routerService.previousPath,action:"list-action",label:se(fe,{sx:{display:"block"}})},{type:Ee.Link,action:"list-action",label:"Заявки"},{type:Ee.Link,action:"list-action",label:"Редактирование заявки"},{type:Ee.Button,isDisabled:({hasChanged:e})=>!e,action:"save-action",label:"Сохранить"}],Iu=[{type:Ee.Link,isVisible:()=>!!os.routerService.previousPath,action:"list-action",label:se(fe,{sx:{display:"block"}})},{type:Ee.Link,action:"list-action",label:"Заявки"},{type:Ee.Link,action:"list-action",label:"Просмотр заявки"},{type:Ee.Button,isDisabled:({payload:{permissions:e}})=>!e.hasBidUpdatePermission,action:"edit-action",label:"Редактировать"}],Mu=[{action:"pick-allowance-action",isDisabled:async({data:{parameter:e}})=>{const t=os.appwriteService.currentUser.$id;return W(U(Promise.resolve(e.system_created_by===t),os.featureService.hasFeature("vizhu_kontakty_pod_bronyu")))},label:"Поделиться объектом"},{action:"toggle-only-for-owner-action",isVisible:({data:{parameter:e}})=>!!e.system_only_for_owner,isDisabled:async({data:{parameter:e}})=>{const t=os.appwriteService.currentUser.$id;return W(U(Promise.resolve(e.system_created_by===t),os.featureService.hasFeature("vizhu_kontakty_pod_bronyu")))},icon:Ft,label:"Эксклюзив"},{action:"toggle-only-for-owner-action",isVisible:({data:{parameter:e}})=>!e.system_only_for_owner,isDisabled:async({data:{parameter:e}})=>{const t=os.appwriteService.currentUser.$id;return W(U(Promise.resolve(e.system_created_by===t),os.featureService.hasFeature("vizhu_kontakty_pod_bronyu")))},icon:Tt,label:"Эксклюзив"},{action:"superadmin-remove-action",label:"Удалить навсегда"}],Bu="real-estate__headerRoot",Du=[{type:Ee.Link,isVisible:()=>!!os.routerService.previousPath,action:"list-action",label:se(fe,{sx:{display:"block"}})},{type:Ee.Link,action:"list-action",label:"Заявки"},{type:Ee.Link,action:"list-action",label:"Просмотр служебных комментариев"}],Ru="real-estate__headerRoot",ju=[{type:Ee.Link,isVisible:()=>!!os.routerService.previousPath,action:"list-action",label:se(fe,{sx:{display:"block"}})},{type:Ee.Link,action:"list-action",label:"Заявки"},{type:Ee.Link,action:"list-action",label:"Просмотр задач"}],qu=[{id:"list",element:({payload:e})=>se(Zt,{history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1),routes:iu,payload:e}),isActive:e=>cs(["/bid","/bid_rent","/bid_sell","/bid_archive"],e),isAvailable:()=>!1},{id:"create",element:()=>{const{elementRef:e,size:t}=Je(),[a,i]=re.useState((()=>({activeStep:0,contact_id:null,fio:"",telefon:""}))),[o,l]=re.useState([]),[r,n]=re.useState(!1),[s,d]=re.useState(!1),c=re.useMemo((()=>new Date(Date.now()+1e4)),[a.activeStep]);re.useEffect((()=>{d(!1)}),[a.activeStep]);const m=e=>i((t=>({...t,activeStep:e}))),{activeStep:u}=a,{classes:p}=hu(),{handleLoadStart:y,handleLoadEnd:h,loading:b,unblock:v}=Oe({history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)}),_=Ze(a),{execute:g}=Re((async()=>{try{let{contact_id:e,fio:t,telefon:a}=_.current;if(!e){e=(await os.contactViewService.create({fio:t,telefon:a,"data-sozdaniya_klienta":Qe.currentDate()})).$id}const{id:i}=await os.bidViewService.create({contact_id:e});v(),os.routerService.push("/bid_edit/".concat(i),{viewRedirectFlag:!0})}catch(e){os.alertService.notify(xn(e))}}),{onLoadStart:y,onLoadEnd:h}),f=async()=>{if(n(!0),a.fio||a.telefon){if(0===u){const{rows:e,total:t}=await os.contactRequestService.findDuplicates(a);l(e),m(0===t?2:1)}1===u&&m(2),2===u&&await g()}},k=()=>{let e=!1;return 1===u&&(e=e||!s),e=e||b,e=e||3===u,e};return se(lt,{children:[se($e,{items:yu}),se(et,{className:p.root,children:[se(tt,{className:p.header,activeStep:u,children:[se(at,{completed:u>0,children:se(it,{children:"Первичные данные"})},0),se(at,{completed:u>1,children:se(it,{children:"Поиск дубликатов"})},1),se(at,{completed:u>2,children:se(it,{children:"Создание заявки"})},2)]}),se("div",{className:p.adjust}),se(me,{ref:e,className:p.content,children:0===u?se(Ge,{sx:{pl:1,pr:1,pt:2,pb:3},handler:a,onChange:i,dirty:r,fields:pu}):1===u?se(ct,{sx:{height:t.height},component:rt,minRowHeight:54,children:o.map((({fio:e,telefon:t,$id:o,tip_klienta:l,index:r,system_created_by:n},s)=>se(be,{className:ue({[p.listItemBackground]:s%2==1}),onClick:()=>{i((e=>({...e,contact_id:o,activeStep:2})))},dense:!0,children:[se(nt,{children:se(st,{edge:"start",checked:a.contact_id===o,sx:{marginLeft:"0 !important"},disableRipple:!0})}),se(dt,{primary:e,secondary:se(ye,{Loader:bu,children:async()=>{const e=await os.userViewService.tryRead(n),t=e?"Создал "+[e.last_name,e.first_name,e.middle_name].filter((e=>e)).join(" "):"";return["№".concat(r),t,l].filter((e=>e)).join(", ")}})}),se(Ae,{children:t})]},s)))}):2===u?se(Ge,{sx:{pl:1,pr:1,pt:2,pb:3},handler:a,dirty:r,fields:pu}):null}),se(we,{sx:{pl:1,pr:1,pb:1},justifyContent:"space-between",flexDirection:"row",children:[se(ot,{disabled:b||0===u,fallback:os.errorService.handleGlobalError,onClick:()=>{i((e=>({...e,contact_id:null}))),0===o.length?m(0):m(u-1)},sx:{mt:1},variant:"contained",onLoadStart:y,onLoadEnd:h,children:"Назад"}),se(ot,1===u?{disabled:k(),fallback:os.errorService.handleGlobalError,onClick:f,sx:{mt:1},variant:"contained",onLoadStart:y,onLoadEnd:h,children:se(mt,{expireAt:c,onExpire:()=>d(!0),children:"Не вижу дубликат"})}:2===u?{disabled:k(),fallback:os.errorService.handleGlobalError,onClick:f,sx:{mt:1},variant:"contained",onLoadStart:y,onLoadEnd:h,children:"Создать заявку"}:{disabled:k(),fallback:os.errorService.handleGlobalError,onClick:f,sx:{mt:1},variant:"contained",onLoadStart:y,onLoadEnd:h,children:"Далее"})]})]})]})},isActive:e=>cs(["/bid/create"],e),isAvailable:()=>!1},{id:"contact",element:({formState:e,payload:t,data:a,beginSave:i,onChange:o})=>{const l=We(a);return se(Se,{children:[se($e,{items:nu,onAction:e=>{"list-action"===e&&os.routerService.back("/contact"),"save-action"===e&&i()},payload:e}),se(ss,{}),se(ru,{payload:t,mode:t.menuMode,children:[se(Ge,{changeSubject:l,features:()=>({...t.permissions,withBottomSaveButton:!0}),handler:()=>a,payload:()=>({...t,beginSave:i}),context:e,fields:Sm,onChange:o}),se(Ye,{}),se(Ke,{})]})]})},isActive:e=>cs(["/bid_edit/:id/contact"],e)},{id:"parameter",element:({payload:e,formState:t,beginSave:a,data:i,onChange:o})=>{const l=We(i);return se(Se,{children:[se($e,{items:Lu,onAction:e=>{"list-action"===e&&os.routerService.back("/bid"),"save-action"===e&&a()},payload:t}),se(ss,{}),se(ru,{payload:e,mode:e.menuMode,children:[se(Ge,{changeSubject:l,features:()=>({...e.permissions,withBottomSaveButton:!0}),fields:Vu,payload:()=>({...e,beginSave:a}),context:t,handler:()=>i,onChange:o}),se(Ye,{}),se(Ke,{})]})]})},isActive:e=>cs(["/bid_edit/:id","/bid_edit/:id/parameter"],e)},{id:"documents",element:({data:e,onChange:t,payload:a,beginSave:i,formState:o})=>{const{handleLoadStart:l,handleLoadEnd:r,loading:n}=Oe({history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)});return se(Se,{children:[se($e,{items:vu,payload:o,onAction:e=>{"list-action"===e&&os.routerService.back("/apartment"),"save-action"===e&&i()}}),se(ss,{}),se(ru,{payload:a,mode:a.menuMode,children:[se(et,{sx:{p:1},children:se(ut,{disabled:n,accept:"*",multiple:!0,items:e,tr:async e=>await os.appwriteService.tryReadFileName(e)||e,fallback:os.errorService.handleGlobalError,onClick:async e=>{const t=await os.appwriteService.getFileURL(e),a=await os.appwriteService.readFileName(e);pt(t,a)},onUpload:e=>os.appwriteService.uploadFile(e),onChange:async e=>{t(e)},onLoadStart:l,onLoadEnd:r})}),se(Ye,{}),se(Ke,{})]})]})},isActive:e=>cs(["/bid_edit/:id/documents"],e)},{id:"contact",element:({params:{id:e},formState:t,payload:a,data:i,beginSave:o,onChange:l})=>{const{pickData:r,render:n}=He({AfterTitle:({onClose:e})=>se(_e,{size:"small",onClick:e,children:se(Ue,{})}),fields:Sm,payload:a,features:a.permissions,outlinePaper:!0,handler:async()=>{const t=await uu(e);return await os.contactViewService.tryRead(t)},fullScreen:!0,title:"Редактировать",onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1),onSubmit:async t=>{let a=!0;try{if(t){const a=await uu(e);await os.contactViewService.update(a,t)}}catch(i){a=!1;const e=xn(i);return os.alertService.notify(e),!1}finally{return a}},submitLabel:"Сохранить"}),s=We(i);return se(Se,{children:[se($e,{items:mu,onAction:e=>{"list-action"===e&&os.routerService.back("/bid"),"save-action"===e&&o(),"edit-action"===e&&r()},payload:t}),se(ss,{}),se(cu,{payload:a,mode:a.menuMode,children:[se(Ge,{readonly:!0,handler:()=>i,fields:Im,features:a.permissions,changeSubject:s,payload:a,onChange:l}),se(Ye,{}),se(Ke,{})]}),n()]})},isActive:e=>cs(["/bid_view/:id/contact"],e)},{id:"parameter",element:({params:{id:e="create"},payload:t,formState:a,data:i,onChange:o})=>{const l=(({bidId:e})=>{const{handleLoadStart:t,handleLoadEnd:a}=Oe({history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)}),{execute:i}=Re((async()=>{await os.featureService.hasFeature("superadmin")&&(await os.cleanupService.removeBid(e),os.routerService.push("/bid"))}),{onLoadStart:t,onLoadEnd:a,fallback:os.errorService.handleGlobalError}),o=Qt({title:"Вы уверены?",msg:"Удаление заявки сотрет соответствующие записи в заявках, сделках. Продолжить?"});return()=>o().then((e=>{e&&i()}))})({bidId:e}),{pickData:r,render:n}=He({AfterTitle:({onClose:e})=>se(_e,{size:"small",onClick:e,children:se(Ue,{})}),fields:Vu,payload:t,features:t.permissions,outlinePaper:!0,handler:async()=>await os.bidViewService.tryRead(e),fullScreen:!0,title:"Редактировать",onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1),onSubmit:async t=>{let a=!0;try{t&&await os.bidViewService.update(e,t)}catch(i){a=!1;const e=xn(i);return os.alertService.notify(e),!1}finally{return a}},submitLabel:"Сохранить"}),s=sm({title:"Поделиться заявкой",payload:t,features:t.permissions,selectedRows:i.system_allowance||[]}),{execute:d}=Re((async t=>{if("list-action"===t&&os.routerService.back("/bid"),"edit-action"===t&&r(),"toggle-only-for-owner-action"===t&&await os.bidViewService.toggleOnlyForOwner(e),"pick-allowance-action"===t){const t=await s();if(!t)return;await os.bidViewService.updateAllowance(e,t)}"superadmin-remove-action"===t&&l()}),{onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)}),c=We(i);return se(Se,{children:[se($e,{items:Iu,actions:Mu,onAction:d,payload:a}),se(ss,{}),se(cu,{payload:t,mode:t.menuMode,children:[se(Ge,{readonly:!0,changeSubject:c,features:t.permissions,fields:qc,handler:()=>i,payload:t,onChange:o}),se(Ye,{}),se(Ke,{})]}),n()]})},isActive:e=>cs(["/bid_view/:id","/bid_view/:id/parameter"],e)},{id:"history",element:({formState:e,payload:t})=>{const[a,i]=re.useState([]),{size:o}=Je({target:document.body,selector:"main",compute:e=>{var a;let{height:i,width:o}=e;if(t.menuMode===B.Tabs){const e=document.querySelector(".".concat(ft));i-=(null==e?void 0:e.offsetHeight)||0}return i-=(null==(a=document.querySelector(".".concat(gu)))?void 0:a.offsetHeight)||0,i-=50,i=Math.min(window.innerHeight-50,i),{width:o,height:i}}}),{loading:l,execute:r}=Re((async e=>{if(e){const e=rs("id"),t=await os.dealHistoryViewService.findAllByBidId(e);i(t)}}),{fallback:os.errorService.handleGlobalError,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)});return se(Se,{children:[se("div",{className:gu,children:[se($e,{payload:e,items:fu,onAction:e=>{"list-action"===e&&os.routerService.back("/bid")}}),se(ss,{})]}),se(cu,{payload:t,mode:t.menuMode,children:se(ct,{sx:{height:o.height},minHeight:72,loading:l,onDataRequest:e=>{r(e)},children:se(we,{spacing:1,children:a.map((e=>se(Rs,{loading:l,status:"info",item:e},e.$id)))})})})]})},isActive:e=>cs(["/bid_view/:id/history"],e)},{id:"tasks",element:({formState:e,payload:t})=>{const[a,i]=re.useState([]),{size:o}=Je({target:document.body,selector:"main",compute:e=>{var a;let{height:i,width:o}=e;if(t.menuMode===B.Tabs){const e=document.querySelector(".".concat(ft));i-=(null==e?void 0:e.offsetHeight)||0}return i-=(null==(a=document.querySelector(".".concat(Ru)))?void 0:a.offsetHeight)||0,i-=50,i=Math.min(window.innerHeight-50,i),{width:o,height:i}}}),{loading:l,execute:r}=Re((async e=>{if(e){const e=rs("id")||"unknown",{contact_id:t}=await os.bidViewService.read(e),a=await os.taskHistoryViewService.findAllByContactId(t);i(a)}}),{fallback:os.errorService.handleGlobalError,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)});return se(Se,{children:[se("div",{className:Ru,children:[se($e,{payload:e,items:ju,onAction:e=>{"list-action"===e&&os.routerService.back("/apartment")}}),se(ss,{})]}),se(cu,{payload:t,mode:t.menuMode,children:se(ct,{sx:{height:o.height},minHeight:72,loading:l,onDataRequest:e=>{r(e)},children:se(we,{spacing:1,children:a.map((e=>se(Wm,{loading:l,status:"info",item:e},e.$id)))})})})]})},isActive:e=>cs(["/bid_view/:id/tasks"],e)},{id:"documents",element:({params:{id:e},data:t,payload:a,formState:i})=>{const{render:o,pickFiles:l}=Ms({data:t,onSubmit:async t=>{await os.bidViewService.update(e,{bid_files:t})}});return se(Se,{children:[se($e,{items:_u,payload:i,onAction:e=>{"list-action"===e&&os.routerService.back("/bid"),"edit-action"===e&&l()}}),se(ss,{}),se(cu,{payload:a,mode:a.menuMode,children:[se(et,{sx:{p:1},children:se(ut,{disabled:!0,accept:"*",multiple:!0,items:t,tr:async e=>await os.appwriteService.tryReadFileName(e)||e,fallback:os.errorService.handleGlobalError,onClick:async e=>{const t=await os.appwriteService.getFileURL(e),a=await os.appwriteService.readFileName(e);pt(t,a)},onUpload:e=>os.appwriteService.uploadFile(e)})}),se(Ye,{}),se(Ke,{})]}),o()]})},isActive:e=>cs(["/bid_view/:id/documents"],e)},{id:"service_comment",element:({formState:e,payload:t})=>{const[a,i]=re.useState([]),{size:o}=Je({target:document.body,selector:"main",compute:e=>{var a;let{height:i,width:o}=e;if(t.menuMode===B.Tabs){const e=document.querySelector(".".concat(ft));i-=(null==e?void 0:e.offsetHeight)||0}return i-=(null==(a=document.querySelector(".".concat(Bu)))?void 0:a.offsetHeight)||0,i-=50,i=Math.min(window.innerHeight-50,i),{width:o,height:i}}}),{execute:l}=Re((async()=>{const e=rs("id"),t=await os.serviceCommentViewService.findByBidId(e);i(await Promise.all(t.map((async({$id:e,user_id:t,file_id:a,comment:i,$createdAt:o})=>{const l=await os.userViewService.tryRead(t);if(!l)return null;const r=a?await os.appwriteService.tryReadFileName(a):"";return{id:e,message:i,fileId:a,userId:t,displayName:[l.last_name,l.first_name,l.middle_name,n(o).format("DD.MM.YYYY / HH:mm")].join(" "),fileName:r,avatar:l.avatar||""}})).filter((e=>!!e)).reverse()))}),{fallback:os.errorService.handleGlobalError,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)});re.useEffect((()=>{l()}),[]),re.useEffect((()=>os.serviceCommentViewService.createSubject.subscribe((e=>{const t=rs("id");e.bid_id===t&&l()}))),[]);return se(Se,{children:[se("div",{className:Bu,children:[se($e,{payload:e,items:Du,onAction:e=>{"list-action"===e&&os.routerService.back("/apartment")}}),se(ss,{})]}),se(cu,{payload:t,mode:t.menuMode,children:se(Om,{payload:t,style:{height:o.height},messages:a,onText:async e=>{const t=os.appwriteService.currentUser.$id,a=rs("id");await os.serviceCommentViewService.create({user_id:t,comment:e,bid_id:a,apartment_id:null,contact_id:null,file_id:null}),await l()},onFile:async(e,t)=>{const a=os.appwriteService.currentUser.$id,i=rs("id");await os.serviceCommentViewService.create({user_id:a,comment:e,apartment_id:i,bid_id:null,contact_id:null,file_id:t}),await l()}})})]})},isActive:e=>cs(["/bid_view/:id/service_comment"],e)}],Pu=async e=>{if("create"===e)return{"data-sozdaniya_klienta":Qe.currentDate()};const{contact_id:t}=await os.bidViewService.read(e);return await os.contactViewService.tryRead(t)},Eu=({id:e="create"})=>{const t=async(t,{afterSave:a})=>{let i=!0;try{const i=h.get(t,"parameter")||{},o=h.get(t,"contact")||{},l=h.get(t,"documents")||[];let r=h.get(t,"parameter.contact_id");h.set(t,"parameter.bid_files",l);const n=!!r&&await os.contactViewService.tryRead(r);if(r&&n)await os.contactViewService.update(r,o);else{const{id:e}=await os.contactViewService.create(o);r=e}if(h.set(t,"parameter.contact_id",r),"create"===e){const{id:e}=await os.bidViewService.create(i);await a(),os.routerService.push("/bid_edit/".concat(e))}else await os.bidViewService.update(e,i);os.routerService.hasViewRedirectFlag()&&(await a(),os.routerService.push("/bid_view/".concat(e))),os.alertService.notify("Изменения сохранены")}catch(o){i=!1;const e=xn(o);os.alertService.notify(e)}finally{return i}},a=ne();return re.useEffect((()=>os.contactViewService.updateSubject.subscribe((async([e,t])=>{const i=rs("id");if(!i)return;const o=await os.bidViewService.read(i);e===(null==o?void 0:o.contact_id)&&a.next(["contact",t])}))),[]),re.useEffect((()=>os.bidViewService.updateSubject.subscribe((([t,i])=>{e===t&&(a.next(["parameter",i]),a.next(["documents",(null==i?void 0:i.bid_files)||[]]))}))),[]),se(Ka,{state:async()=>[await Pu(e),await os.bidViewService.tryRead(e),await os.settingsViewService.getMasterDetailMode(),await os.permissionService.getPermissions(),await os.featureService.getAccessLevel()],reloadSubject:os.layoutService.reloadOutletSubject,fallback:os.errorService.handleGlobalError,children:async([i,o,l,r,n])=>se(Zt,{history:os.routerService,waitForChangesDelay:Go,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1),routes:qu,params:{id:e},initialData:{contact:i,parameter:o,documents:(null==o?void 0:o.bid_files)||[]},payload:()=>({menuMode:l,permissions:r,accessLevel:n}),changeSubject:a,onChange:console.log,onSubmit:t})})},Nu=[{id:"contact",label:"Контакт",isActive:()=>cs(["/contact_edit/:id/contact"])},{id:"tasks",isDisabled:()=>!0,label:"Задачи",isActive:()=>cs(["/contact_edit/:id/tasks"])},{id:"history",isDisabled:()=>!0,label:"История",isActive:()=>cs(["/contact_edit/:id/history"])}],Ou=(e,t)=>{if(t)return;const a=rs("id","create");"contact"===e&&os.routerService.replace("/contact_edit/".concat(a,"/contact")),"tasks"===e&&os.routerService.replace("/contact_edit/".concat(a,"/tasks")),"history"===e&&os.routerService.replace("/contact_edit/".concat(a,"/history"))},Hu=({payload:e,children:t,mode:a=B.Paper})=>{const i=re.useMemo((()=>"tabs"===a?B.Tabs:B.Paper),[a]);return se(qe,{withFixedPos:!0,fixedPosHeaderAdjust:a===B.Paper?85:64,mode:i,options:Nu,payload:e,onActiveOptionChange:Ou,children:t})},Uu=[{type:Ee.Link,isVisible:()=>!!os.routerService.previousPath,action:"list-action",label:se(fe,{sx:{display:"block"}})},{type:Ee.Link,action:"list-action",label:"Список контактов"},{type:Ee.Link,action:"user-list-action",label:"Данные контакта"},{type:Ee.Button,isDisabled:({hasChanged:e})=>!e,action:"save-action",label:"Сохранить"}],Wu=[{id:"contact",label:"Контакт",isActive:()=>cs(["/contact_view/:id","/contact_view/:id/contact"])},{id:"tasks",label:"Задачи",isActive:()=>cs(["/contact_view/:id/tasks"])},{id:"history",label:"История",isActive:()=>cs(["/contact_view/:id/history"])}],$u=(e,t)=>{if(t)return;const a=rs("id","create");"contact"===e&&os.routerService.replace("/contact_view/".concat(a,"/contact")),"tasks"===e&&os.routerService.replace("/contact_view/".concat(a,"/tasks")),"history"===e&&os.routerService.replace("/contact_view/".concat(a,"/history"))},Gu=({children:e,payload:t,mode:a=B.Paper})=>{const i=re.useMemo((()=>"tabs"===a?B.Tabs:B.Paper),[a]);return se(qe,{withFixedPos:!0,payload:t,fixedPosHeaderAdjust:a===B.Paper?85:64,mode:i,options:Wu,onActiveOptionChange:$u,children:e})},Yu=[{type:Ee.Link,isVisible:()=>!!os.routerService.previousPath,action:"list-action",label:se(fe,{sx:{display:"block"}})},{type:Ee.Link,action:"list-action",label:"Контакты"},{type:Ee.Link,action:"user-list-action",label:"Данные контакта"},{type:Ee.Button,isDisabled:({payload:{permissions:e}})=>!e.hasContactUpdatePermission,action:"edit-action",label:"Редактировать"}],Ku=[{action:"superadmin-remove-action",label:"Удалить навсегда"}],Xu=[{type:o.Fragment,isVisible:({activeStep:e})=>0===e,fields:[{type:o.Component,element:()=>se(Ae,{variant:"h6",fontWeight:"bold",mb:2,children:"Данные контакта"})},{type:o.Text,outlined:!0,title:"Ф.И.О",isInvalid:({fio:e})=>e?null:"Обязательно к заполнению",description:"Фамилия Имя Отчество контакта",name:"fio"},{type:o.Text,outlined:!0,title:"Телефон",isInvalid:({telefon:e})=>e?null:"Обязательно к заполнению",description:"Телефон контакта",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon"}]},{type:o.Fragment,isVisible:({activeStep:e})=>2===e,fields:[{type:o.Component,element:()=>se(Ae,{variant:"h6",fontWeight:"bold",mb:1,children:"Предпросмотр"})},{type:o.Component,isVisible:({contact_id:e})=>!e,element:()=>se(Xe,{variant:"outlined",color:"warning",sx:{mb:2},children:"Создавая новый контакт, убедитесь, что нет дубликата"})},{type:o.Component,isVisible:({contact_id:e})=>!!e,element:()=>se(Xe,{variant:"outlined",color:"info",sx:{mb:2},children:"Убедитесь, что это контактные данные клиента"})},{type:o.Text,isVisible:({contact_id:e})=>!!e,compute:async({contact_id:e})=>{const{fio:t=""}=await os.contactViewService.tryRead(e)||{};return t},disabled:!0,outlined:!0,title:"Ф.И.О"},{type:o.Text,isVisible:({contact_id:e})=>!!e,compute:async({contact_id:e})=>{const{telefon:t=""}=await os.contactViewService.tryRead(e)||{};return t},fieldBottomMargin:"0",disabled:!0,outlined:!0,title:"Телефон",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000"},{type:o.Text,isVisible:({contact_id:e})=>!e,outlined:!0,title:"Ф.И.О",isInvalid:({fio:e})=>e?null:"Обязательно к заполнению",description:"Фамилия Имя Отчество контакта",name:"fio"},{type:o.Text,isVisible:({contact_id:e})=>!e,outlined:!0,title:"Телефон",isInvalid:({telefon:e})=>e?null:"Обязательно к заполнению",description:"Телефон контакта",inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"telefon"}]}],Ju=[{type:Ee.Link,action:"list-action",label:"Список контактов"},{type:Ee.Link,action:"list-action",label:"Создание контакта"}],Zu=Nn()((e=>({root:{position:"relative",overflow:"hidden"},header:{position:"absolute",top:0,left:0,height:65,paddingLeft:e.spacing(2),paddingRight:e.spacing(2),background:"whitesmoke",width:"100%"},content:{minHeight:300},adjust:{paddingBottom:65},listItemBackground:{background:le(e.palette.primary.main,.05)}}))),Qu=oe.createLoader(12),ep="real-estate__headerRoot",tp=[{type:Ee.Link,isVisible:()=>!!os.routerService.previousPath,action:"list-action",label:se(fe,{sx:{display:"block"}})},{type:Ee.Link,action:"list-action",label:"Контакты"},{type:Ee.Link,action:"list-action",label:"История контакта"}],ap=[{type:St.Compute,sortable:!1,field:"index",headerName:"Номер",element:({index:e})=>se(zt,{content:e}),width:()=>100},{type:St.Compute,sortable:!0,field:"fio",compute:e=>e.fio||"",headerName:"Ф.И.О.",width:()=>125},{type:St.Compute,isVisible:({payload:{permissions:e}})=>e.hasPreviewModeDisabled,sortable:!0,field:"phone",element:e=>se(xt,{payload:e.id,condition:e=>os.permissionRequestService.getOwnerContactPermissionByContactId(e),Loading:"Загрузка",Else:"Скрыто",children:e.telefon||""}),headerName:"Телефон",width:()=>125},{type:St.Compute,sortable:!0,field:"tip_klienta",compute:e=>e.tip_klienta||"",headerName:"Тип клиента",width:()=>160},{type:St.Compute,sortable:!0,field:"status_klienta",compute:e=>e.status_klienta||"",headerName:"Статус клиента",width:()=>180},{type:St.Compute,sortable:!1,field:"status",headerName:"Статус сделки",compute:async({id:e})=>await os.dealViewService.readStatusByContactId(e),width:()=>150},{type:St.Action,headerName:"Действие",sortable:!1,width:()=>100}],ip=[{type:kt.Add,isDisabled:(e,{permissions:t})=>!t.hasContactCreatePermission,label:"Создать"},{type:kt.Menu,options:[{action:"add-action",isDisabled:(e,{permissions:t})=>!t.hasContactCreatePermission},{action:"update-now"},{action:"resort-action"},{action:"drop-filters"}]}],op=[{label:"Создать копию",action:"copy-action",icon:Lt},{label:"Удалить",action:"remove-action",icon:Ct}],lp=()=>window.innerHeight-100,rp="real-estate__headerRoot",np=[{type:Ee.Link,isVisible:()=>!!os.routerService.previousPath,action:"list-action",label:se(fe,{sx:{display:"block"}})},{type:Ee.Link,action:"list-action",label:"Контакты"},{type:Ee.Link,action:"list-action",label:"Задачи контакта"}],sp=e=>()=>se(oe,{handler:async()=>{os.appwriteService.isAuthorized?await e():os.routerService.push("/login_page")},height:"calc(100vh - 80px)"}),dp=[{id:"list",element:({payload:e})=>{const t=ne(os.contactViewService.reloadSubject),{listProps:a}=Xt(os.routerService.locationState,{fallback:os.errorService.handleGlobalError}),i=dd();return se(Se,{children:se(Jt,{withSearch:!0,withSingleSort:!0,noInitialFilters:!0,fetchDebounce:$o,reloadSubject:t,title:"Контакты",filterLabel:"Фильтры",heightRequest:lp,AfterOperationList:md,rowActions:op,actions:ip,columns:ap,handler:i,filters:sd,onRowAction:async(e,a)=>{os.layoutService.setAppbarLoader(!0);try{if("remove-action"===e&&(await os.contactViewService.remove(a.id),t.next()),"copy-action"===e){const e=await os.contactViewService.read(a.id);await os.contactViewService.create(e),t.next()}}finally{os.layoutService.setAppbarLoader(!1)}},onRowClick:async e=>{(await os.permissionService.getPermissions()).hasContactViewPermission&&os.routerService.push("/contact_view/".concat(e.id))},onAction:e=>{"add-action"===e&&os.routerService.push("/contact/create")},selectionMode:$t.Multiple,payload:e,...a})})},isActive:e=>cs(["/contact"],e),isAvailable:()=>!1},{id:"create",element:()=>{const{elementRef:e,size:t}=Je(),[a,i]=re.useState((()=>({activeStep:0,contact_id:null,fio:"",telefon:""}))),[o,l]=re.useState([]),[r,n]=re.useState(!1),[s,d]=re.useState(!1),c=re.useMemo((()=>new Date(Date.now()+1e4)),[a.activeStep]);re.useEffect((()=>{d(!1)}),[a.activeStep]);const m=e=>i((t=>({...t,activeStep:e}))),{activeStep:u}=a,{classes:p}=Zu(),{handleLoadStart:y,handleLoadEnd:h,loading:b,unblock:v}=Oe({history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)});Ze(a);const{execute:_}=Re((async()=>{try{let{contact_id:e,fio:t,telefon:i}=a;if(!e){e=(await os.contactViewService.create({fio:t,telefon:i,"data-sozdaniya_klienta":Qe.currentDate()})).$id}v(),os.routerService.push("/contact_view/".concat(e))}catch(e){os.alertService.notify(xn(e))}}),{onLoadStart:y,onLoadEnd:h}),g=async()=>{if(n(!0),a.fio||a.telefon){if(0===u){const{rows:e,total:t}=await os.contactRequestService.findDuplicates(a);l(e),m(0===t?2:1)}1===u&&m(2),2===u&&await _()}},f=()=>{let e=!1;return 1===u&&(e=e||!s),e=e||b,e=e||3===u,e};return se(lt,{children:[se($e,{items:Ju}),se(et,{className:p.root,children:[se(tt,{className:p.header,activeStep:u,children:[se(at,{completed:u>0,children:se(it,{children:"Первичные данные"})},0),se(at,{completed:u>1,children:se(it,{children:"Поиск дубликатов"})},1),se(at,{completed:u>2,children:se(it,{children:"Создание контакта"})},2)]}),se("div",{className:p.adjust}),se(me,{ref:e,className:p.content,children:0===u?se(Ge,{sx:{pl:1,pr:1,pt:2,pb:3},handler:a,onChange:i,dirty:r,fields:Xu}):1===u?se(ct,{sx:{height:t.height},component:rt,minRowHeight:54,children:o.map((({fio:e,telefon:t,$id:o,tip_klienta:l,index:r,system_created_by:n},s)=>se(be,{className:ue({[p.listItemBackground]:s%2==1}),onClick:()=>{i((e=>({...e,contact_id:o,activeStep:2})))},dense:!0,children:[se(nt,{children:se(st,{edge:"start",checked:a.contact_id===o,sx:{marginLeft:"0 !important"},disableRipple:!0})}),se(dt,{primary:e,secondary:se(ye,{Loader:Qu,children:async()=>{const e=await os.userViewService.tryRead(n),t=e?"Создал "+[e.last_name,e.first_name,e.middle_name].filter((e=>e)).join(" "):"";return["№".concat(r),t,l].filter((e=>e)).join(", ")}})}),se(Ae,{children:t})]},s)))}):2===u?se(Ge,{sx:{pl:1,pr:1,pt:2,pb:3},handler:a,dirty:r,fields:Xu}):null}),se(we,{sx:{pl:1,pr:1,pb:1},justifyContent:"space-between",flexDirection:"row",children:[se(ot,{disabled:b||0===u,fallback:os.errorService.handleGlobalError,onClick:()=>{i((e=>({...e,contact_id:null}))),0===o.length?m(0):m(u-1)},sx:{mt:1},variant:"contained",onLoadStart:y,onLoadEnd:h,children:"Назад"}),se(ot,1===u?{disabled:f(),fallback:os.errorService.handleGlobalError,onClick:g,sx:{mt:1},variant:"contained",onLoadStart:y,onLoadEnd:h,children:se(mt,{expireAt:c,onExpire:()=>d(!0),children:"Не вижу дубликат"})}:2===u?{disabled:f(),fallback:os.errorService.handleGlobalError,onClick:g,sx:{mt:1},variant:"contained",onLoadStart:y,onLoadEnd:h,children:"Перейти"}:{disabled:f(),fallback:os.errorService.handleGlobalError,onClick:g,sx:{mt:1},variant:"contained",onLoadStart:y,onLoadEnd:h,children:"Далее"})]})]})]})},isActive:e=>cs(["/contact/create"],e),isAvailable:()=>!1},{id:"contact",element:sp((()=>{const e=rs("id");os.routerService.push("/contact_edit/".concat(e,"/contact"))})),isActive:e=>cs(["/contact_edit/:id"],e)},{id:"contact",element:({params:{id:e="create"},payload:t,formState:a,beginSave:i,data:o})=>se(Se,{children:[se($e,{items:Uu,onAction:e=>{"list-action"===e&&os.routerService.back("/contact"),"save-action"===e&&i()},payload:a}),se(ss,{}),se(Hu,{mode:t.menuMode,payload:t,children:[se(Ge,{dirty:"create"===e,handler:()=>o,fields:Sm,features:()=>({...t.permissions,withBottomSaveButton:!0}),payload:()=>({...t,beginSave:i}),context:a}),se(Ke,{})]})]}),isActive:e=>cs(["/contact_edit/:id/contact"],e)},{id:"contact",element:sp((()=>{const e=rs("id");os.routerService.push("/contact_view/".concat(e,"/contact"))})),isActive:e=>cs(["/contact_view/:id"],e)},{id:"contact",element:({params:{id:e="create"},formState:t,payload:a,data:i})=>{const o=We(i),l=(({contactId:e})=>{const{handleLoadStart:t,handleLoadEnd:a}=Oe({history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)}),{execute:i}=Re((async()=>{await os.featureService.hasFeature("superadmin")&&(await os.cleanupService.removeContact(e),os.routerService.push("/contact"))}),{onLoadStart:t,onLoadEnd:a,fallback:os.errorService.handleGlobalError}),o=Qt({title:"Вы уверены?",msg:"Удаление контакта сотрет соответствующие записи в задачах, объектах недвижимости, заявках, сделках. Продолжить?"});return()=>o().then((e=>{e&&i()}))})({contactId:e}),{pickData:r,render:n}=He({AfterTitle:({onClose:e})=>se(_e,{size:"small",onClick:e,children:se(Ue,{})}),fields:Sm,payload:a,features:a.permissions,outlinePaper:!0,handler:async()=>await os.contactViewService.tryRead(e),fullScreen:!0,title:"Редактировать",onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1),onSubmit:async t=>{let a=!0;try{t&&await os.contactViewService.update(e,t)}catch(i){a=!1;const e=xn(i);return os.alertService.notify(e),!1}finally{return a}},submitLabel:"Сохранить"});return se(Se,{children:[se($e,{items:Yu,onAction:e=>{"list-action"===e&&os.routerService.back("/contact"),"edit-action"===e&&r(),"superadmin-remove-action"===e&&l()},actions:Ku,payload:t}),se(ss,{}),se(Gu,{mode:a.menuMode,payload:a,children:[se(Ge,{readonly:!0,dirty:"create"===e,handler:()=>i,fields:Im,features:a.permissions,changeSubject:o,payload:a}),se(Ke,{}),n()]})]})},isActive:e=>cs(["/contact_view/:id/contact"],e)},{id:"tasks",element:({formState:e,payload:t})=>{const[a,i]=re.useState([]),{size:o}=Je({target:document.body,selector:"main",compute:e=>{var a;let{height:i,width:o}=e;if(t.menuMode===B.Tabs){const e=document.querySelector(".".concat(ft));i-=(null==e?void 0:e.offsetHeight)||0}return i-=(null==(a=document.querySelector(".".concat(rp)))?void 0:a.offsetHeight)||0,i-=50,i=Math.min(window.innerHeight-50,i),{width:o,height:i}}}),{loading:l,execute:r}=Re((async e=>{if(e){const e=rs("id")||"unknown",t=await os.taskHistoryViewService.findAllByContactId(e);i(t)}}),{fallback:os.errorService.handleGlobalError,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)});return se(Se,{children:[se("div",{className:rp,children:[se($e,{payload:e,items:np,onAction:e=>{"list-action"===e&&os.routerService.back("/apartment")}}),se(ss,{})]}),se(Gu,{payload:t,mode:t.menuMode,children:se(ct,{sx:{height:o.height},minHeight:72,loading:l,onDataRequest:e=>{r(e)},children:se(we,{spacing:1,children:a.map((e=>se(Wm,{loading:l,status:"info",item:e},e.$id)))})})})]})},isActive:e=>cs(["/contact_view/:id/tasks"],e)},{id:"history",element:({formState:e,payload:t})=>{const[a,i]=re.useState([]),{size:o}=Je({target:document.body,selector:"main",compute:e=>{var a;let{height:i,width:o}=e;if(t.menuMode===B.Tabs){const e=document.querySelector(".".concat(ft));i-=(null==e?void 0:e.offsetHeight)||0}return i-=(null==(a=document.querySelector(".".concat(ep)))?void 0:a.offsetHeight)||0,i-=50,i=Math.min(window.innerHeight-50,i),{width:o,height:i}}}),{loading:l,execute:r}=Re((async e=>{if(e){const e=rs("id"),t=await os.dealHistoryViewService.findAllByContactId(e);i(t)}}),{fallback:os.errorService.handleGlobalError,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)});return se(Se,{children:[se("div",{className:ep,children:[se($e,{payload:e,items:tp,onAction:e=>{"list-action"===e&&os.routerService.back("/apartment")}}),se(ss,{})]}),se(Gu,{payload:t,mode:t.menuMode,children:se(ct,{sx:{height:o.height},minHeight:72,loading:l,onDataRequest:e=>{r(e)},children:se(we,{spacing:1,children:a.map((e=>se(Rs,{loading:l,status:"info",item:e},e.$id)))})})})]})},isActive:e=>cs(["/contact_view/:id/history"],e)}],cp=async e=>"create"===e?{"data-sozdaniya_klienta":Qe.currentDate()}:await os.contactViewService.tryRead(e),mp=({id:e="create"})=>{const t=async(t,{afterSave:a})=>{let i=!0;try{const i=h.get(t,"contact")||{};if("create"===e){const{id:e}=await os.contactViewService.create(i);await a(),os.routerService.push("/contact_edit/".concat(e))}else await os.contactViewService.update(e,i);os.routerService.hasViewRedirectFlag()&&(await a(),os.routerService.push("/contact_view/".concat(e))),os.alertService.notify("Изменения сохранены")}catch(o){i=!1;const e=xn(o);os.alertService.notify(e)}finally{return i}},a=ne();return re.useEffect((()=>os.contactViewService.updateSubject.subscribe((([e,t])=>{const i=rs("id");i&&i===e&&a.next(["contact",t])}))),[]),se(Ka,{state:async()=>[await cp(e),await os.settingsViewService.getMasterDetailMode(),await os.permissionService.getPermissions(),await os.featureService.getAccessLevel()],reloadSubject:os.layoutService.reloadOutletSubject,fallback:os.errorService.handleGlobalError,children:async([i,o,l,r])=>se(Zt,{changeSubject:a,history:os.routerService,waitForChangesDelay:Go,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1),routes:dp,params:{id:e},initialData:{contact:i},payload:()=>({menuMode:o,permissions:l,accessLevel:r}),onChange:console.log,onSubmit:t})})},up=Nn()((e=>({container:{padding:"16px",height:"100%"},icoContainer:{display:"flex",alignContent:"center",justifyContent:"center",width:"100%",marginBottom:"12px"},ico:{color:e.palette.text.primary,width:"48px",height:"48px"},btn:{borderRadius:"100px",marginLeft:"10%",marginRight:"10%",maxWidth:"225px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:"#000000DE",background:"#E0E0E0",fontWeight:"500",width:"100%","&:hover":{color:"white"}},content:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",height:"100%"}}))),pp=({text:e,iconNumber:t,onClick:a})=>{const{classes:i}=up(),o=[se(Xa,{className:i.ico}),se(Ja,{className:i.ico}),se(Za,{className:i.ico})];return se("div",{className:i.container,children:se(me,{className:i.content,children:[se("div",{className:i.icoContainer,children:se(Ra,{onClick:()=>{a&&a()},disableRipple:!0,children:t?o[t-1]:se(Qa,{})})}),se(ot,{onClick:a,endIcon:se(ei,{}),className:i.btn,variant:"contained",children:e})]})})},yp=()=>{const e=n.localeData(),t=e.weekdays(),a=e.weekdaysShort(),{weekStart:i=0}=n.Ls[n.locale()],o=a||t;return[...o.slice(i,7),...o.slice(0,i)].map((e=>"".concat(e.slice(0,1).toUpperCase()).concat(e.slice(1,3))))},hp=Nn()((e=>({switchHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",margin:"5px 0 10px"},daysHeader:{display:"flex",justifyContent:"stretch",alignItems:"stretch",height:"35px"},monthName:{display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",button:{padding:"5px",color:e.palette.text.primary}},dayLabel:{flex:1,textAlign:"center",opacity:.5},dayLabelStart:{textAlign:"center"},dayLabelEnd:{textAlign:"center"},noBorder:{border:"0"}}))),bp=({currentMonth:e,onMonthChange:t,onHeaderMonthClick:a,onHeaderYearClick:i})=>{const{classes:o}=hp();return se("div",{children:[se("div",{className:o.switchHeader,children:[se(_e,{onClick:()=>t(e.clone().subtract(1,"months")),children:se(ti,{})}),se(Ae,{className:o.monthName,children:[se(Dt,{onClick:a,className:ue(o.noBorder),children:e.format("MMMM")}),se(Dt,{onClick:i,className:ue(o.noBorder),children:e.format("YYYY")})]}),se(_e,{className:o.noBorder,onClick:()=>t(e.clone().add(1,"months")),children:se(ai,{})})]}),se("div",{className:o.daysHeader,children:yp().map(((e,t)=>se(Ae,{className:ue(o.dayLabel,{[o.dayLabelStart]:0===t,[o.dayLabelEnd]:6===t}),children:e},t)))})]})},[vp,_p]=te(),gp=Nn()((e=>({listItemAccient:{background:le(e.palette.getContrastText(e.palette.background.paper),.018)}}))),fp=({onChange:e,day:t})=>{const{classes:a}=gp(),[i]=_p(),[o,l]=re.useState([]),[r,s]=re.useState(null),d=o.length,{execute:c}=Re((async()=>{if(l([]),!i)return;const e=or(t),a=(await i.promise).filter((({moment_stamp:t})=>t===e)).filter((({is_complete:e})=>!e));l(a)}),{onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1),fallback:os.errorService.handleGlobalError});re.useEffect((()=>{c()}),[i]);return se(Se,{children:[se(Dt,{onClick:({currentTarget:e})=>s(e),sx:{...t.isToday()&&{background:"#132e5511","&:hover":{background:"#132e5533"}}},children:se(oa,{sx:{flexDirection:"column",gap:"5px"},children:[t.format("DD"),!!d&&se(ii,{sx:{mt:"-2.5px"},side:5,color:t.isBefore(n().add(-1,"days"))?"red":d>3?"orange":"green"})]})}),se(oi,{open:!!r,anchorEl:r,onClose:()=>s(null),anchorOrigin:{vertical:"bottom",horizontal:"left"},children:0===o.length?se(Ae,{sx:{p:2},children:"На этот день задач не назначено"}):se(me,{sx:{height:356,width:356},children:se(rt,{disablePadding:!0,subheader:se(li,{component:Ae,sx:{fontWeight:"bold"},children:["Задачи на ",t.format("DD/MM/YYYY")]}),children:se(ct,{sx:{height:308,width:356},children:o.map((({id:e,title:t,contact_fio:i,to_user_fio:o,type:l,is_call:r,is_meet:n},s)=>se(be,{className:ue({[a.listItemAccient]:s%2==0}),onClick:()=>os.routerService.push("/task"),children:se(dt,{primary:"Внутренняя"===l?"Задача: ".concat(t):"Контакт: ".concat(i," ").concat([r&&"Звонок",n&&"Встреча"].filter((e=>e)).join(", ")),secondary:"Ответственный: ".concat(o)})},e)))})})})})]})},kp=Nn()((e=>({container:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},calendar:{flex:1,display:"grid",background:e.palette.background.paper,gridTemplateColumns:"repeat(7, 2fr)",gridRowGap:"2px"},inactiveDay:{opacity:.5,pointerEvents:"none"},day:{"& button":{border:"0",color:e.palette.text.primary}},cell:{display:"flex",alignItems:"center",justifyContent:"center","&:nth-of-type(7n)":{justifyContent:'"flex-end"'},"&:nth-of-type(7n + 1)":{justifyContent:'"flex-start"'}}}))),wp=({onChange:e,onHeaderMonthClick:t,onHeaderYearClick:a,minDate:i,maxDate:o,date:l})=>{const[r,n]=re.useState(l.clone().startOf("month")),[,s]=_p();re.useEffect((()=>{const e=or(r.clone().startOf("week")),t=or(r.clone().endOf("month").endOf("week"));s({fromStamp:e,toStamp:t,promise:os.dashboardRequestService.getTasksByStamp(e,t)})}),[r]);const d=re.useCallback((t=>{const a=t.clone().endOf("week"),n=r.get("month");return((e,t)=>{const a=t.diff(e,"days")+1,i=[];for(let o=0;o!==a;o++)i.push(e.clone().add(o,"days"));return i})(t,a).map((t=>{const a=l.isSame(t,"date"),r=t.get("month")!==n||o.isBefore(t)||i.isAfter(t);return se("div",{className:ue(m.day,m.cell,{[m.inactiveDay]:r}),children:se(fp,{day:t,isActive:a,onChange:e})},t.toString())}))}),[r,l,o,i,e]),c=re.useCallback((()=>((e,t)=>{const a=t.diff(e,"weeks")+1,i=[];for(let o=0;o!==a;o++)i.push(e.clone().add(o,"weeks"));return i})(r.clone().startOf("week"),r.clone().endOf("month").endOf("week")).map((e=>se(re.Fragment,{children:d(e)},"week-".concat(e.toString()))))),[r,d]),{classes:m}=kp();return se("div",{className:m.container,children:[se(bp,{currentMonth:r,onMonthChange:e=>n(e),onHeaderMonthClick:t,onHeaderYearClick:a}),se("div",{className:m.calendar,children:c()})]})},Sp=Nn()((e=>({container:{height:"100%",width:"100%",display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column"},stretch:{flex:1},disabled:{pointerEvents:"none",opacity:.5},monthLabel:{textAlign:"center"},noBorder:{border:"0"},arrows:{padding:"5px",color:e.palette.text.secondary},header:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"5px"},content:{flex:1,display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gridGap:"15px",button:{color:e.palette.text.primary}}}))),zp=({date:e,minDate:t,maxDate:a,onChange:i})=>{e.get("month");const[o,l]=re.useState(e.get("year")),r=(()=>{const e=[],t=n().startOf("year");for(let a=0;12!==a;a++)e.push(t.clone().add(a,"months"));return e})().map((e=>e.get("month"))),s=(()=>{const e=n.localeData(),t=e.months();return(e.monthsShort()||t).map((e=>"".concat(e.slice(0,1).toUpperCase()).concat(e.slice(1,3))))})(),{classes:d}=Sp(),c=re.useCallback((l=>{let r=e.clone().set("month",l);r=r.set("year",o),e&&a.isBefore(e)?i(a.clone()):e&&t.isAfter(e)?i(t.clone()):i(r)}),[o,e,a,t,i]);return se("div",{className:d.container,children:[se("div",{className:d.header,children:[se(_e,{className:d.noBorder,onClick:()=>{const e=o-1;e>=t.get("year")&&l(e)},children:se(ri,{className:d.arrows})}),se(Ae,{className:ue(d.monthLabel,d.stretch),children:o}),se(_e,{className:d.noBorder,onClick:()=>{const e=o+1;e<=a.get("year")&&l(e)},children:se(ni,{className:d.arrows})})]}),se("div",{className:d.content,children:r.map((e=>{const i=a.get("month")<e&&a.get("year")===o||t.get("month")>e&&t.get("year")===o;return se(Dt,{className:ue({[d.disabled]:i}),onClick:()=>c(e),children:s[e]},e)}))})]})},xp=Nn()((e=>({container:{height:"100%",width:"100%",display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column"},stretch:{flex:1},yearLabel:{textAlign:"center"},noBorder:{border:"0"},arrows:{padding:"5px",border:"0",color:e.palette.text.disabled},header:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"5px"},content:{flex:1,display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gridGap:"15px",button:{color:e.palette.text.primary}}}))),Ap=({date:e,minDate:t,maxDate:a,onChange:i})=>{const o=e.get("year"),l=re.useMemo((()=>((e,t)=>{const a=t.diff(e,"years")+1,i=[];for(let o=0;o!==a;o++)i.push(e.clone().add(o,"years"));return i})(t,a).map((e=>e.get("year"))).reduce(((e,t)=>{const[a]=e.slice().reverse();return a.push(t),12===a.length?[...e,[]]:e}),[[]])),[t,a]),[r,n]=re.useState(l.findIndex((e=>e.includes(o)))),s=re.useCallback((o=>{const l=e.clone().set("year",o);e&&a.isBefore(e)?i(a.clone()):e&&t.isAfter(e)?i(t.clone()):i(l)}),[e,a,t,i]),d=l[r]||[],{classes:c}=xp();return se("div",{className:c.container,children:[se("div",{className:c.header,children:[se(Dt,{className:c.noBorder,variant:"text",onClick:()=>{n(Math.max(r-1,0))},children:se(ri,{className:c.arrows})}),se(Ae,{className:ue(c.yearLabel,c.stretch),children:e.format("YYYY")}),se(Dt,{className:c.noBorder,variant:"text",onClick:()=>{const e=r+1;e<l.length&&n(e)},children:se(ni,{className:c.arrows})})]}),se("div",{className:c.content,children:d.map((e=>se(Dt,{color:e===o?"primary":"secondary",onClick:()=>s(e),children:e},e)))})]})},Tp=Nn()((e=>({container:{width:"100%",height:"100%",padding:e.spacing(1)}}))),Fp=({date:e=n(),minDate:t=n("1900-01-01"),maxDate:a=n("2100-01-01"),onChange:i})=>{const[o,l]=re.useState((()=>e.isBefore(t)?t:e)),[r,s]=re.useState(!1),[d,c]=re.useState(!1),m=()=>s(!0),u=()=>c(!0),p=o.startOf("day"),y=e=>{s(!1),l(e.clone().set("year",e.get("year")))},h=e=>{c(!1),l(e.clone().set("month",e.get("month")))},{classes:b}=Tp();return se(et,{className:b.container,children:r?se(Ap,{date:p,onChange:y,minDate:t,maxDate:a}):d?se(zp,{date:p,onChange:h,minDate:t,maxDate:a}):se(vp,{initialState:null,children:se(wp,{date:p,onChange:i,minDate:t,maxDate:a,onHeaderMonthClick:u,onHeaderYearClick:m})})})},Cp=Nn()((e=>({container:{padding:"24px",position:"relative"},text:{fontSize:"16px",p:{fontSize:"12px",margin:"0"}},heading:{display:"flex",gap:"12px",alignItems:"center",padding:"0 0 12px 0 ",marginBottom:"12px",borderBottom:"1px solid #0000001F",button:{color:e.palette.text.primary}},amount:{fontSize:"24px",textAlign:"right"},options:{position:"absolute",top:"4px",right:"4px"}}))),Vp=[se(di,{}),se(ci,{}),se(mi,{}),se(ui,{}),se(pi,{})],Lp=({text:e,amount:t,iconNumber:a})=>{const{classes:i}=Cp();return se("div",{className:i.container,children:[se(_e,{disableRipple:!0,className:i.options,children:se(si,{})}),se("div",{className:i.heading,children:[se(_e,{children:a?Vp[a-1]:se(Qa,{})}),se("div",{className:i.text,children:e})]}),se("p",{className:i.amount,children:t})]})},Ip=Nn()({funnelContainer:{padding:"10px 24px",position:"relative",height:"100%"},funnelTitle:{fontSize:"16px"},center:{height:"calc(100% - 100px)",marginTop:"65px"},funnel:{maxWidth:"452px",margin:"0 auto",width:"100%",paddingTop:"10px",display:"flex",flexDirection:"column",alignItems:"center",marginTop:"-10%",gap:"10px"},row:{background:"#D9D9D9",clipPath:"polygon(0 0, 100% 0, 97% 100%, 3% 100%)",textAlign:"center",fontSize:"14px",height:"20px"},options:{position:"absolute",top:"4px",right:"4px"}}),Mp=({valueMap:e})=>{const{classes:t}=Ip();return se(me,{className:t.funnelContainer,children:[se(_e,{className:t.options,children:se(si,{})}),se(me,{className:t.funnelTitle,children:"Воронка Продаж"}),se(oa,{className:t.center,children:se(me,{className:t.funnel,children:pr.map(((a,i)=>se(me,{sx:{width:100-5*i+"%"},className:t.row,children:[a," ",e[a]]},a)))})})]})},Bp=()=>se(oe,{sx:{height:"100%",width:"100%"}}),Dp=Nn()({title:{fontSize:"16px",marginBottom:"18px"},container:{padding:"10px 24px",position:"relative",height:"100%"},options:{position:"absolute",top:"4px",right:"4px"},list:{display:"flex",flexDirection:"column",gap:"13px",margin:"0",padding:"0"},statRow:{display:"flex",width:"100%",alignItems:"center",gap:"7px",color:"00000099",fontSize:"14px",letterSpacing:"0.17px"},stats:{height:"4px",width:"200px"},managersList:{listStyle:"none",display:"flex",flexDirection:"column",fontSize:"12px",gap:"5px",padding:"0 !important"},managerRow:{display:"flex",alignItems:"center",gap:"8px"},managerDot:{width:"12px",height:"12px",background:"#000000DE",borderRadius:"100%"}}),Rp=()=>{const{classes:e}=Dp();return se("div",{className:e.container,children:[se(_e,{className:e.options,children:se(si,{})}),se("div",{className:e.title,children:"Всего сделок"}),se(ye,{Loader:Bp,children:async()=>{const t=await os.userViewService.findAll(),a=await Promise.all(t.map((async({id:e})=>await os.dashboardRequestService.getDoneDealsByUserCount("last-month",e)))),i=a.map(((e,a)=>{var i,o,l,r,n;const s=[null==(i=t[a])?void 0:i.last_name,null==(o=t[a])?void 0:o.first_name,null==(l=t[a])?void 0:l.middle_name].filter((e=>e)).join(" ");return{id:(null==(r=t[a])?void 0:r.id)||"unknown",label:s,color:yi.getColor({shades:["500"],text:"".concat(s,"+").concat(null==(n=t[a])?void 0:n.id,"+").concat(a)}),value:e}})).sort((({value:e},{value:t})=>t-e)),o=a.reduce(((e,t)=>Math.max(e,t)));return se(hi,{sx:{maxHeight:"calc(100% - 60px)",paddingLeft:"8px",overflowY:"auto"},children:[se("div",{className:e.list,children:i.map((({id:t,value:a,color:i})=>{const l=Math.round(100/o*a);return se("div",{className:e.statRow,children:[se(bi,{className:e.stats,sx:{backgroundColor:"#ccc","& .MuiLinearProgress-bar":{backgroundColor:i}},variant:"determinate",value:Math.max(l,3)}),a," Продаж"]},t)}))}),se("ul",{className:e.managersList,children:i.map((({id:t,label:a,color:i})=>se("li",{className:e.managerRow,children:[se(ii,{color:i,side:12})," ",a]},t)))})]})}})]})},jp=Nn()({root:{position:"relative",height:"100%",width:"100%",overflow:"hidden"},container:{position:"absolute",top:0,left:0,height:"100%",width:"100%"}}),qp=({children:e=null,className:t,style:a})=>{const{classes:i}=jp();return se(et,{className:ue(i.root,t),style:a,children:se(me,{className:i.container,children:e})})},Pp=(e,...t)=>{let a=!0;for(const i of t)a=a&&!!String(e[i]||"").length;return a},Ep=[{type:o.Text,columns:"6",fieldBottomMargin:"1",shouldRecompute:()=>!1,compute:async()=>{const e=os.appwriteService.currentUser.$id,t=await os.userViewService.tryRead(e);return[null==t?void 0:t.last_name,null==t?void 0:t.first_name,null==t?void 0:t.middle_name].filter((e=>e)).join(" ")},name:"from_user_id",title:"От кого"},{type:o.Choose,columns:"6",fieldBottomMargin:"1",choose:async(e,t)=>{t.pickUser(e.to_user_id?[e.to_user_id]:[]);const a=await t.userResultSubject.toPromise();if(a&&a.length){const[e]=a;return e}return null},tr:async e=>{const t=await os.userViewService.tryRead(e);return[null==t?void 0:t.last_name,null==t?void 0:t.first_name,null==t?void 0:t.middle_name].filter((e=>e)).join(" ")||(null==t?void 0:t.$id)||""},name:"to_user_id",title:"Кому",placeholder:"Не выбрано"},{type:o.Date,columns:"6",fieldBottomMargin:"1",name:"date",title:"Дата выполнения",labelShrink:!0,placeholder:"Новые задачи"},{type:o.Time,columns:"6",fieldBottomMargin:"1",name:"time",title:"",labelShrink:!0,placeholder:"Не выбрано"},{type:o.Box,noBaseline:!0,isVisible:e=>"Клиент"===e.type,sx:{display:"grid",gridTemplateColumns:"1fr auto auto"},fields:[{type:o.Choose,sx:{minWidth:"100% !important"},fieldBottomMargin:"0",fieldRightMargin:"3",columns:"4",choose:async(e,t)=>{t.pickContact(e.contact_id?[e.contact_id]:[]);const a=await t.contactResultSubject.toPromise();if(a&&a.length){const[e]=a;return e}return null},tr:async e=>{const t=await os.contactViewService.tryRead(e);return(null==t?void 0:t.fio)||(null==t?void 0:t.id)||""},name:"contact_id",title:"",placeholder:"Контакт"},{type:o.Checkbox,fieldBottomMargin:"0",name:"is_call",title:"Звонок"},{type:o.Checkbox,fieldBottomMargin:"0",name:"is_meet",title:"Встреча"}]},{type:o.Text,isVisible:e=>"Клиент"!==e.type,fieldBottomMargin:"1",title:"",placeholder:"Задача",name:"title"},{type:o.Text,fieldBottomMargin:"1",title:"",placeholder:"Комментарий",inputRows:3,name:"comment"},{type:o.Radio,fieldBottomMargin:"0",name:"type",radioValue:"Внутренняя",defaultValue:"Внутренняя",title:"Внутренняя"},{type:o.Radio,fieldBottomMargin:"0",name:"type",radioValue:"Клиент",title:"Клиент"}],Np=({payload:e})=>{const{handleLoadStart:t,handleLoadEnd:a}=Oe({history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)}),{pickData:i,render:o,resultSubject:l}=nd({payload:e}),{pickData:r,render:n,resultSubject:s}=pd({payload:e}),d=Ne({fields:Ep,title:"Создать задачу",payload:{...e,pickUser:i,userResultSubject:l,pickContact:r,contactResultSubject:s},handler:()=>({from_user_id:os.appwriteService.currentUser.$id})}),{execute:c}=Re((async()=>{const e=await d().toPromise();if(e&&"Внутренняя"===e.type){const{to_user_id:t,comment:a,date:i,time:o,title:l}=e,r=i?Qe.dateStamp(i):null,n=o?Qe.timeStamp(o):null;if(!Pp(e,"to_user_id","title"))return void os.alertService.notify("Укажите все поля");await os.taskRequestService.createTodoTask(t,r,n,l,a)}if(e&&"Клиент"===e.type){const{to_user_id:t,comment:a,date:i,time:o,contact_id:l,title:r,is_meet:n,is_call:s}=e;if(!Pp(e,"to_user_id","contact_id"))return void os.alertService.notify("Укажите все поля");const d=i?Qe.dateStamp(i):null,c=o?Qe.timeStamp(o):null;await os.taskRequestService.createClientTask(t,l,d,c,r,!!s,!!n,a)}}),{onLoadStart:t,onLoadEnd:a,fallback:os.errorService.handleGlobalError});return{execute:c,render:()=>se(Se,{children:[n(),o()]})}},Op="7px",Hp=()=>se(oe,{size:24,sx:{justifyContent:"flex-end",width:"100%"}}),Up=()=>se(oe,{sx:{height:"100%",width:"100%",marginTop:"-2.5%"}}),Wp=[{type:o.Group,columns:"14",tabletColumns:"12",phoneColumns:"12",fieldRightMargin:Op,fieldBottomMargin:Op,fields:[{type:o.Hero,height:"max(calc(100vh * 0.2), 150px)",columns:"3",tabletColumns:"6",phoneColumns:"12",bottom:Op,right:Op,child:{type:o.Component,element:()=>se(qp,{style:{background:"#fff",boxShadow:"0px 10px 10px -4px #00000033"},children:se(Lp,{amount:se(ye,{Loader:Hp,children:async()=>await os.dashboardRequestService.getNewBidsCount("last-month")}),text:"Новые заявки",iconNumber:1})})}},{type:o.Hero,columns:"3",tabletColumns:"6",phoneColumns:"12",right:Op,bottom:Op,height:"max(calc(100vh * 0.2), 150px)",child:{type:o.Component,element:()=>se(qp,{style:{background:"#fff",boxShadow:"0px 10px 10px -4px #00000033"},children:se(Lp,{amount:se(ye,{Loader:Hp,children:async()=>await os.dashboardRequestService.getNewApartmentCount("last-month")}),text:"Новые объекты",iconNumber:2})})}},{type:o.Hero,columns:"3",tabletColumns:"6",phoneColumns:"12",height:"max(calc(100vh * 0.2), 150px)",bottom:Op,right:Op,child:{type:o.Component,element:()=>se(qp,{style:{background:"#fff",boxShadow:"0px 10px 10px -4px #00000033"},children:se(Lp,{amount:se(ye,{Loader:Hp,children:async()=>await os.dashboardRequestService.getDealsInProgressCount("last-month")}),text:"В работе",iconNumber:3})})}},{type:o.Hero,columns:"3",tabletColumns:"6",phoneColumns:"12",bottom:Op,right:Op,height:"max(calc(100vh * 0.2), 150px)",child:{type:o.Component,element:()=>se(qp,{style:{background:"#fff",boxShadow:"0px 10px 10px -4px #00000033",opacity:"0.5"},children:se(Lp,{amount:null,text:se(Se,{children:["Прибыль ",se("p",{children:"За месяц"})]}),iconNumber:4})})}}]},{type:o.Group,columns:"12",tabletColumns:"12",phoneColumns:"12",fields:[{type:o.Hero,height:"min(calc(100vh * 0.5), 700px)",right:Op,bottom:Op,columns:"6",phoneColumns:"12",child:{type:o.Component,element:()=>se(qp,{style:{boxShadow:"0px 10px 10px -4px #00000033"},children:se(Fp,{onChange:console.log})})}},{type:o.Hero,columns:"6",phoneColumns:"12",right:Op,bottom:Op,height:"min(calc(100vh * 0.5), 700px)",child:{type:o.Component,element:()=>se(qp,{style:{background:"#fff",boxShadow:"0px 10px 10px -4px #00000033"},children:se(ye,{Loader:Up,children:async()=>{const e=await Promise.all(pr.map((async e=>await os.dashboardRequestService.getDealsByStatusCount("last-month",e)))),t=pr.reduce(((t,a,i)=>({...t,[a]:e[i]})),{});return se(Mp,{valueMap:t})}})})}}]},{type:o.Group,columns:"12",tabletColumns:"12",phoneColumns:"12",fields:[{type:o.Hero,minHeight:"min(calc(100vh * 0.5), 700px)",columns:"6",phoneColumns:"12",right:Op,bottom:Op,child:{type:o.Component,element:()=>se(qp,{style:{background:"#fff",boxShadow:"0px 10px 10px -4px #00000033"},children:se(Rp,{})})}},{type:o.Group,columns:"6",phoneColumns:"12",fields:[{type:o.Hero,desktopColumns:"6",tabletColumns:"6",phoneColumns:"12",right:Op,bottom:Op,minHeight:"min(calc(100vh * 0.25), 350px)",child:{type:o.Component,element:()=>se(qp,{style:{background:"#fff",boxShadow:"0px 10px 10px -4px #00000033"},children:se(pp,{onClick:()=>os.routerService.push("/apartment/create"),text:"Добавить Обьект",iconNumber:1})})}},{type:o.Hero,desktopColumns:"6",tabletColumns:"6",phoneColumns:"12",right:Op,bottom:Op,minHeight:"min(calc(100vh * 0.25), 350px)",child:{type:o.Component,element:()=>se(qp,{style:{background:"#fff",boxShadow:"0px 10px 10px -4px #00000033"},children:se(pp,{onClick:()=>os.routerService.push("/bid/create"),text:"Создать Заявку",iconNumber:2})})}},{type:o.Hero,desktopColumns:"6",tabletColumns:"6",phoneColumns:"12",right:Op,bottom:Op,minHeight:"min(calc(100vh * 0.25), 350px)",child:{type:o.Component,element:({payload:e})=>{const{execute:t,render:a}=Np({payload:e});return se(qp,{style:{background:"#fff",boxShadow:"0px 10px 10px -4px #00000033"},children:[se(pp,{onClick:t,text:"Добавить Задачу",iconNumber:3}),a()]})}}}]}]}],$p=[{id:"common",element:({payload:e})=>se(Ge,{fields:Wp,payload:e,features:e.permissions}),isActive:e=>cs(["/dashboard"],e),isAvailable:()=>!1}],Gp=Nn()((e=>({root:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",minHeight:150},container:{position:"relative",display:"flex",alignItems:"stretch",justifyContent:"stretch",flex:1},content:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",paddingTop:6,paddingBottom:6,gap:6,flex:1},header:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",paddingLeft:e.spacing(.5),paddingRight:e.spacing(.5)},row:{display:"flex",alignItems:"center",justifyContent:"space-between"},noBorder:{border:"none !important"},bold:{fontWeight:"bold !important"},adjust:{maxHeight:10,minHeight:10,flex:1},button:{backgroundColor:"#3F51B5",color:"#ffffff",fontSize:12,marginLeft:"auto",marginRight:"auto","&:hover":{color:"#3F51B5"}},fieldContainer:{display:"flex",justifyContent:"space-between"},fieldDesc:{fontSize:10,opacity:.6,marginLeft:4},dateFieldDesc:{fontSize:8,opacity:.6,marginLeft:8},field:{fontSize:12,marginRight:4,fontWeight:500},dateField:{fontSize:8}}))),Yp=re.forwardRef((({className:e,style:t,contactDisplayName:a,contactType:i,contactNumber:o,responsible:l,requestType:r,dealIndex:s,dealType:d,dealStatus:c,price:m,currency:u,createdAt:p,updatedAt:y,apartmentId:h,targetApartmentId:b,targetBidId:v,bidId:_,id:g,onChangeStatus:f,onDrag:k},w)=>{const{classes:S}=Gp(),z=(({dealId:e})=>{const{handleLoadStart:t,handleLoadEnd:a}=Oe({history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)}),{execute:i}=Re((async()=>{await os.featureService.hasFeature("superadmin")&&(await os.cleanupService.removeDeal(e),os.routerService.push("/deal"))}),{onLoadStart:t,onLoadEnd:a,fallback:os.errorService.handleGlobalError}),o=Qt({title:"Вы уверены?",msg:"Удаление сделки сотрет соответствующие записи в истории сделок. Продолжить?"});return()=>o().then((e=>{e&&i()}))})({dealId:g}),[x,A]=re.useState(null),[T,F]=re.useState(null),{execute:C,loading:V}=Re((async e=>{await f(e)}),{onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1),fallback:os.errorService.handleGlobalError}),L=re.useMemo((()=>{const e=pr.findIndex((e=>e===c));return pr.filter(((t,a)=>a<e)).reverse()}),[c]),I=re.useMemo((()=>{const e=pr.findIndex((e=>e===c));return pr.filter(((t,a)=>a>e))}),[c]),M=re.useMemo((()=>n(p).format("DD.MM.YYYY / HH:mm")),[p]),B=re.useMemo((()=>n(y).format("DD.MM.YYYY / HH:mm")),[y]),D=re.useMemo((()=>"Сделка сорвана"===c||"Закрытая сделка"===c),[c]),R=re.useCallback((()=>{h?os.routerService.push("/apartment_view/".concat(h,"/history")):_&&os.routerService.push("/bid_view/".concat(_,"/history"))}),[]);return se("div",{"data-dealid":g,className:ue(S.root,e),onDrag:()=>k(g),style:t,ref:w,draggable:!D,children:[se(et,{className:S.container,children:se(me,{className:S.content,children:[se(me,{className:S.row,children:[se(_e,{onClick:({currentTarget:e})=>{A(e),F(null)},disabled:!L.length||V||D,size:"small",children:se(ti,{})}),se(vi,{anchorEl:x,open:!!x,onClose:()=>A(null),children:L.map(((e,t)=>se(_i,{onClick:()=>{C(e),A(null)},children:e},"".concat(e,"-").concat(t))))}),se(ka,{label:l,variant:"filled",color:"#2196F3",sx:{fontWeight:500,fontSize:10,maxWidth:175}}),se(_e,{onClick:({currentTarget:e})=>{A(null),F(e)},disabled:!I.length||V||D,size:"small",children:se(ai,{})}),se(vi,{anchorEl:T,open:!!T,onClose:()=>F(null),children:I.map(((e,t)=>se(_i,{onClick:()=>{C(e),F(null)},children:e},"".concat(e,"-").concat(t))))})]}),se(oa,{sx:{minHeight:50},children:se(Ae,{fontSize:12,textAlign:"center",maxWidth:"80%",paddingBottom:"6px",children:a})}),o&&se(me,{className:S.content,children:[se(me,{className:S.fieldContainer,sx:{borderBottom:1,borderColor:"#E0E0E0"},children:[se(Ae,{className:S.fieldDesc,children:"Тип контакта"}),se(Ae,{className:S.field,children:i})]}),se(me,{className:S.fieldContainer,sx:{borderBottom:1,borderColor:"#E0E0E0"},children:[se(Ae,{className:S.fieldDesc,children:"Номер телефона"}),se(Ae,{className:S.field,children:o})]}),b&&se(ye,{payload:b,children:async e=>{const{zagolovok:t}=await os.apartmentViewService.read(e);return se(me,{className:S.fieldContainer,sx:{borderBottom:1,borderColor:"#E0E0E0"},children:[se(Ae,{className:S.fieldDesc,children:"Объект недвижимости"}),se(Ae,{className:S.field,children:se(Ht,{href:"#",onClick:()=>Z("/apartment_view/".concat(e)),children:t})})]})}}),v&&se(ye,{payload:v,children:async e=>{const{zagolovok:t}=await os.bidViewService.read(e);return se(me,{className:S.fieldContainer,sx:{borderBottom:1,borderColor:"#E0E0E0"},children:[se(Ae,{className:S.fieldDesc,children:"Заявка"}),se(Ae,{className:S.field,children:se(Ht,{href:"#",onClick:()=>Z("/bid_view/".concat(e)),children:t})})]})}})]}),se(oa,{children:se(me,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center",maxWidth:"90%",gap:1},children:[se(ka,{label:"№ ".concat(s),variant:"filled",color:"#E0E0E0"}),se(ka,"Аренда"==d?{label:"Аренда",variant:"filled",color:"#AF4C5E",sx:{color:"white"}}:{label:"Покупка",variant:"filled",color:"#4CAFAF",sx:{color:"white"}}),se(ka,"Заявка"===r?{label:"Заявка",variant:"filled",color:"#AFAB4C",sx:{color:"white"}}:{label:"Объект",variant:"filled",color:"#4CAF50",sx:{color:"white"}})]})}),m&&se(me,{className:S.content,children:se(me,{className:S.fieldContainer,children:[se(Ae,{className:S.fieldDesc,children:["Цена ","(".concat("uzs"===u?"SUM":"$",")")]}),se(Ae,{className:S.field,children:m})]})}),se(me,{className:S.container,sx:{borderTop:1,pl:1,borderColor:"#E0E0E0"},children:[se(oa,{className:S.content,children:[se(Ae,{className:S.dateFieldDesc,children:"Дата создания:"}),se(Ae,{className:S.dateField,children:M})]}),se(oa,{className:S.content,children:[se(Ae,{className:S.dateFieldDesc,children:"Дата обновления:"}),se(Ae,{className:S.dateField,children:B})]})]}),se(Dt,{onClick:R,variant:"outlined",sx:{ml:1,mr:1},children:"Посмотреть историю"}),se(ye,{payload:g,children:async()=>await os.featureService.hasFeature("superadmin")?se(ot,{onClick:z,variant:"outlined",color:"error",sx:{ml:1,mr:1},children:"Удалить навсегда"}):null})]})}),se("div",{className:S.adjust})]})})),Kp=[{type:o.Box,sx:{display:"grid",gridTemplateColumns:"auto auto 1fr auto","& > .MuiGrid-root":{minWidth:"275px"},mt:-1},fields:[{type:o.Choose,fieldBottomMargin:"0",fieldRightMargin:"2",choose:async(e,t)=>{t.pickData(e.user_id?[e.user_id]:[]);const a=await t.resultSubject.toPromise();if(a&&a.length){const[e]=a;return e}return null},tr:async e=>{const t=await os.userViewService.tryRead(e);return[null==t?void 0:t.last_name,null==t?void 0:t.first_name,null==t?void 0:t.middle_name].filter((e=>e)).join(" ")||(null==t?void 0:t.$id)||""},name:"user_id",placeholder:"Ответственный",title:""},{type:o.Combo,fieldBottomMargin:"0",name:"tip_klienta",title:"",placeholder:"Тип клиента",itemList:["Собственник","Доверенное лицо","Риелтор","Информатор","Застройщик"]},{type:o.Div},{type:o.Text,fieldBottomMargin:"0",name:"search",title:"",placeholder:"Поиск",leadingIcon:gi,trailingIcon:()=>se(Gt,{sx:{opacity:.5}}),trailingIconClick(e,t,a){e&&a("")}}]}],Xp=({onChange:e,className:t,style:a,data:i,payload:o})=>{const{pickData:l,render:r,resultSubject:n}=nd({payload:o});return se(et,{className:t,style:a,sx:{mb:1,minHeight:48},children:[se(Nt,{sx:{height:"100%"},hideOverflowY:!0,children:se(me,{sx:{p:1,display:"flex",alignItems:"center",justifyContent:"stretch"},children:se(Ge,{fields:Kp,handler:()=>i,onChange:(t,a)=>{a||e(t)},payload:()=>({...o,pickData:l,resultSubject:n}),fieldDebounce:$o})})}),r()]})},Jp=async e=>{let t,a;await(async()=>{e.apartment_id?t="Объект":e.bid_id&&(t="Заявка")})();const{first_name:i,last_name:o,middle_name:l}=await os.userViewService.read(e.user_id),r=[o,i,l].filter((e=>e)).join(" ");return e.price&&1===e.price.length&&(a=e.price[0]),e.price&&2===e.price.length&&(a="От ".concat(e.price[0]," До ").concat(e.price[1])),{id:e.id,contactType:e.tip_klienta,contactNumber:e.telefon,contactDisplayName:e.fio,createdAt:e.$createdAt,updatedAt:e.$updatedAt,dealIndex:e.index,requestType:t,currency:e.price_unit,metadata_created_at:n(e.$createdAt).format("DD/MM/YYYY"),metadata_updated_at:n(e.$updatedAt).format("DD/MM/YYYY"),price:a,apartmentId:e.apartment_id,bidId:e.bid_id,targetApartmentId:e.target_apartment_id,targetBidId:e.target_bid_id,userId:e.user_id,responsible:r,dealStatus:e.status,dealType:e.type}},Zp=pr.indexOf("Задаток/Залог"),Qp=[{type:o.Choose,fieldBottomMargin:"1",isVisible:e=>Pp(e,"bid_id","occupation"),isInvalid:e=>e.occupation&&e.bid_id?e.target_apartment_id?null:"Укажите объект недвижимости":null,choose:async(e,t)=>{t.pickApartment(e.target_apartment_id?[e.target_apartment_id]:[]);const a=await t.apartmentResultSubject.toPromise();if(a&&a.length){const[e]=a;return e}return null},tr:async e=>{const t=await os.apartmentViewService.tryRead(e);return(null==t?void 0:t.zagolovok)||(null==t?void 0:t.$id)||""},name:"target_apartment_id",title:"Выберите объект",placeholder:"Не выбрано"},{type:o.Choose,fieldBottomMargin:"1",isVisible:e=>Pp(e,"apartment_id","occupation"),isInvalid:e=>e.occupation&&e.apartment_id?e.target_bid_id?null:"Укажите заявку":null,choose:async(e,t)=>{t.pickBid(e.target_bid_id?[e.target_bid_id]:[]);const a=await t.bidResultSubject.toPromise();if(a&&a.length){const[e]=a;return e}return null},tr:async e=>{const t=await os.bidViewService.tryRead(e);return(null==t?void 0:t.zagolovok)||(null==t?void 0:t.$id)||""},name:"target_bid_id",title:"Выберите заявку",placeholder:"Не выбрано"},{type:o.Text,sx:{minWidth:470},title:"",placeholder:"Комментарий",name:"comment",inputRows:3}],ey=Nn()((e=>({root:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",height:"calc(100vh - 85px)",width:"100%",["& .".concat("react-declarative__scrollViewTarget")]:{transform:"rotateX(180deg)","& > div > div":{marginBottom:"25px",transform:"rotateX(180deg)"}}},container:{position:"relative",flex:1,display:"flex",alignItems:"stretch",justifyContent:"stretch"},content:{flex:1,display:"flex"},group:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",maxWidth:"276px",minWidth:"276px",gap:10,padding:10,marginRight:10},inactiveGroup:{background:"#E1E2E6"},activeGroup:{background:le(e.palette.primary.main,.5)},list:{flex:1,minWidth:"256px",height:"100%"},loading:{pointerEvents:"none"}}))),ty=["contactDisplayName","contactType","contactNumber","responsible","requestType","dealType","metadata_created_at","metadata_updated_at"],ay={user_id:"",tip_klienta:null,search:""},iy=[{id:"list",element:({params:{dealCardMap:e},payload:t})=>{const{classes:a}=ey(),[i,o]=fi((()=>({...ay,user_id:os.routerService.location.pathname.includes("/deal_mine")?os.appwriteService.currentUser.$id:ay.user_id}))),[l,r]=ki((()=>({user_id:i.user_id,tip_klienta:JSON.parse(i.tip_klienta),search:i.search})));ea((()=>{o(l.current)}),[l.current]);const[s,d]=re.useState((()=>new Map(e))),c=re.useMemo((()=>[...s.values()].flatMap((e=>e))),[s]),m=Ze(s),u=re.useRef(null),[p,y]=re.useState(null),{handleMoveDeal:h,render:b}=(({payload:e,features:t})=>{const{pickData:a,render:i,resultSubject:o}=xc({payload:e,features:t}),{pickData:l,render:r,resultSubject:n}=em({payload:e,features:t}),{handleLoadStart:s,handleLoadEnd:d}=Oe({history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)}),c=Ne({large:!0,title:"Изменение статуса",fields:Qp,payload:()=>({...e,apartmentResultSubject:o,pickApartment:a,bidResultSubject:n,pickBid:l})}),{execute:m}=Re((async({id:e,fromStatus:t,toStatus:a,apartment_id:i,bid_id:o,target_apartment_id:l,target_bid_id:r})=>{if(t===a)return;const n=pr.indexOf(a)>=Zp,s=await c({handler:()=>({fromStatus:t,toStatus:a,occupation:n,apartment_id:i,bid_id:o,target_apartment_id:n?l:null,target_bid_id:n?r:null})}).toPromise();if(s){if(s.target_bid_id){const t=await os.dealViewService.findOccupiedByBidId(s.target_bid_id),a=await os.dealViewService.findOccupiedByTagetBidId(s.target_bid_id);if(t&&t.id!==e)return void os.alertService.notify("На данную заявку создана другая сделка");if(a&&a.id!==e)return void os.alertService.notify("Данная заявка используется в другой сделке")}if(s.target_apartment_id){const t=await os.dealViewService.findOccupiedByApartmentId(s.target_apartment_id),a=await os.dealViewService.findOccupiedByTargetApartmentId(s.target_apartment_id);if(t&&t.id!==e)return void os.alertService.notify("На данный объект создана другая сделка");if(a&&a.id!==e)return void os.alertService.notify("Данный лбъект используется в другой сделке")}await os.dealRequestService.commitDealStatusChange(e,i,o,s.target_apartment_id,s.target_bid_id,t,a,s.comment)}}),{onLoadStart:s,onLoadEnd:d,fallback:os.errorService.handleGlobalError});return{handleMoveDeal:m,render:()=>se(Se,{children:[i(),r()]})}})({payload:t,features:t.permissions}),v=async(e,t)=>{const a=c.find((t=>t.id===e));if(!a)throw new Error("DealPages BoardView handleChangeStatus dealCard not found");const{dealStatus:i,apartmentId:o,bidId:l}=a;await h({id:e,apartment_id:o||null,bid_id:l||null,fromStatus:i,toStatus:t,target_apartment_id:a.targetApartmentId,target_bid_id:a.targetBidId})},{loading:_,execute:g}=Re((async([e])=>{y(null),await v(u.current,e)}),{onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1),fallback:os.errorService.handleGlobalError});re.useEffect((()=>os.dealViewService.updateSubject.subscribe(j((async([e,t])=>{const a=new Map(m.current);for(const i of pr){const t=a.get(i)||[];a.set(i,t.filter((t=>t.id!==e)))}for(const i of pr)if(i===t.status){const e=a.get(i)||[];e.unshift(await Jp(t)),a.set(i,e)}d(a)})))),[]),re.useEffect((()=>os.dealViewService.removeSubject.subscribe(j((async e=>{const t=new Map(m.current);for(const a of pr){const i=t.get(a)||[];t.set(a,i.filter((t=>t.id!==e)))}d(t)})))),[]),re.useEffect((()=>os.dealViewService.createSubject.subscribe(j((async e=>{const t=new Map(m.current);for(const a of pr)if(a===e.status){let i=t.get(a)||[];i=i.filter((t=>t.id!==e.$id)),i.unshift(await Jp(e)),t.set(a,i)}d(t)})))),[]);const f=_;return se(me,{className:ue(a.root,{[a.loading]:f}),children:[se(Xp,{data:l.current,payload:t,onChange:r}),se(me,{className:a.container,children:se(Nt,{withScrollbar:!0,hideOverflowY:!0,className:a.content,children:pr.map((e=>{const t=m.current.get(e)||[];return se(me,{onDrop:({currentTarget:t})=>g([e,t]),onDragEnd:()=>{y(null)},onDragOver:t=>{y(e),t.preventDefault()},className:ue(a.group,{[a.activeGroup]:p===e,[a.inactiveGroup]:p!==e}),children:[se(Ae,{variant:"h6",fontWeight:"bold",children:e}),se(ct,{className:a.list,minRowHeight:150,children:t.sort((({updatedAt:e},{updatedAt:t})=>n(e).isBefore(t)?1:-1)).filter((e=>{const{user_id:t}=l.current;return!t||e.userId===t})).filter((e=>{const{tip_klienta:t}=l.current;return!(null==t?void 0:t.length)||e.contactType===t[0]})).filter((e=>{const{search:t}=l.current;return!t||wi(e,t,...ty)})).map((e=>se(Yp,{onChangeStatus:async t=>{await v(e.id,t)},onDrag:()=>{u.current=e.id},...e},e.id)))})]})}))})}),b()]})},isActive:e=>cs(["/deal","/deal_all","/deal_mine"],e),isAvailable:()=>!1}],oy=async()=>{const e=new Map;return await Promise.all(pr.map((async t=>{const a=await os.dealViewService.findByDealStatus(t),i=await Promise.all(a.map((async e=>await Jp(e))));e.set(t,i)}))),e},ly=()=>se(Ka,{state:async()=>[await oy(),await os.settingsViewService.getMasterDetailMode(),await os.permissionService.getPermissions(),await os.featureService.getAccessLevel()],fallback:os.errorService.handleGlobalError,children:async([e,t,a,i])=>se(Zt,{history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1),routes:iy,params:{dealCardMap:e},payload:()=>({menuMode:t,permissions:a,accessLevel:i})})}),ry=()=>se(Ae,{variant:"h2",color:"primary",width:"100%",textAlign:"center",fontWeight:"bold",sx:{textStroke:"2px #fff",WebkitTextStroke:"2px #fff"},children:Wo}),ny=Nn()((e=>({root:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,background:e.palette.background.default,height:"100%",width:"100%",display:"flex",alignItems:"center",flexDirection:"column",gap:20,padding:15},container:{position:"relative",overflow:"hidden",minWidth:375,maxWidth:375,padding:15},reveal:{width:"unset"}}))),sy=Nn()((e=>({root:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,background:e.palette.background.default,height:"100%",width:"100%",display:"flex",alignItems:"center",flexDirection:"column",gap:20,padding:15},container:{position:"relative",overflow:"hidden",minWidth:375,maxWidth:375,padding:15},reveal:{width:"unset"}}))),dy=["Control","S"],cy={overrideSystem:!0,ignoreInputFields:!0,repeatOnHold:!1},my=e=>{const t=xi(e);return Ai(dy,t,cy)},uy=(e,t)=>({type:o.Box,sx:{display:"grid",gridTemplateColumns:"1fr auto",alignItems:"flex-end",mb:1},fields:[{type:o.Text,fieldBottomMargin:"0",isDisabled:a=>!a["".concat(e,"_link_enabled_").concat(t)],name:"".concat(e,"_link_").concat(t),title:"Ссылка на ".concat(e)},{type:o.Checkbox,fieldBottomMargin:"0",name:"".concat(e,"_link_enabled_").concat(t),title:"Включено"}]}),py=[{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Курс валюты"})},{type:o.Group,fieldRightMargin:"0",fieldBottomMargin:"0",fields:[{type:o.Text,desktopColumns:"3",tabletColumns:"6",phoneColumns:"12",outlined:!1,name:"usd_eur",title:"Пара USD-EUR",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000"}]},{type:o.Group,fieldRightMargin:"0",fieldBottomMargin:"0",fields:[{type:o.Text,desktopColumns:"3",tabletColumns:"6",phoneColumns:"12",outlined:!1,name:"usd_uzs",title:"Пара USD-UZS",inputFormatterAllowed:/^[0-9.]/,inputFormatterTemplate:"000000000000000"}]}]},{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Отображение карточек"})},{type:o.Combo,desktopColumns:"3",tabletColumns:"6",phoneColumns:"12",outlined:!1,name:"masterdetail_mode",title:"Режим отображения",itemList:async()=>{const e=await os.dictService.getMasterDetailMode();return Object.keys(e)},tr:async e=>{const t=await os.dictService.getMasterDetailMode();return h.get(t,e)}}]},{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Водяной знак"})},{type:o.Choose,name:"watermark_file_id",title:"Файл водяного знака",choose:async()=>{const e=await Ti("*.png");return e?await os.appwriteService.uploadFile(e):null},tr:async e=>{try{return await os.appwriteService.readFileName(e)}catch(t){return"Не указано"}},desktopColumns:"3",tabletColumns:"6",phoneColumns:"12",outlined:!1}]},{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Логотип"})},{type:o.Choose,name:"logo_file_id",title:"Файл логотипа",choose:async()=>{const e=await Ti("*.png");return e?await os.appwriteService.uploadFile(e):null},tr:async e=>{try{return await os.appwriteService.readFileName(e)}catch(t){return"Не указано"}},desktopColumns:"3",tabletColumns:"6",phoneColumns:"12",outlined:!1}]},{type:o.Paper,fieldRightMargin:"0",fields:[{type:o.Component,fieldBottomMargin:"1",element:()=>se(Ae,{variant:"h6",fontWeight:"bold",children:"Ссылки на социальные сети"})},uy(wl,1),uy(Sl,1),uy(fl,1),uy(kl,1)]}];window.setting_common_fields=py;const yy=[{type:Ee.Link,action:"breadcrumbs-action",label:"RealEstate"},{type:Ee.Link,action:"breadcrumbs-action",label:"Системные настройки"},{type:Ee.Button,isDisabled:({hasChanged:e})=>!e,action:"save-action",label:"Сохранить"}],hy=[{type:o.Expansion,fieldBottomMargin:"1",hidden:!1,title:"Каналы в Telegram",fields:[{type:o.Typography,sx:{"& *":{fontWeight:"bold !important"}},placeholder:"Список каналов",typoVariant:"subtitle2"},...[...new Array(5)].map(((e,t)=>{return a=t+1,{type:o.Box,sx:{display:"grid",gridTemplateColumns:"1fr 1fr auto",alignItems:"flex-end",mb:1},fields:[{type:o.Text,isDisabled:e=>!e["telegram_channel_enabled_".concat(a)],fieldBottomMargin:"0",name:"telegram_token_".concat(a),title:"Токен бота"},{type:o.Text,fieldBottomMargin:"0",isDisabled:e=>!e["telegram_channel_enabled_".concat(a)],name:"telegram_channel_".concat(a),title:"Канал"},{type:o.Checkbox,fieldBottomMargin:"0",name:"telegram_channel_enabled_".concat(a),title:"Включено"}]};var a}))]},{type:o.Expansion,title:"Контакты в Telegram",fields:[{type:o.Outline,fieldRightMargin:"1",columns:"6",hidden:!1,fields:[{type:o.Typography,sx:{"& *":{fontWeight:"bold !important"}},placeholder:"Список номеров агенства",typoVariant:"subtitle2"},...[...new Array(5)].map(((e,t)=>{return a=t+1,{type:o.Box,sx:{display:"grid",gridTemplateColumns:"1fr 1fr auto",alignItems:"flex-end",mb:1},fields:[{type:o.Text,fieldBottomMargin:"0",isDisabled:e=>!e["telegram_agency_enabled_".concat(a)],name:"telegram_agency_".concat(a),title:"Номер агенства"},{type:o.Text,isDisabled:e=>!e["telegram_agency_enabled_".concat(a)],fieldBottomMargin:"0",name:"telegram_agency_nickname_".concat(a),title:"Никнейм в Telegram"},{type:o.Checkbox,fieldBottomMargin:"0",name:"telegram_agency_enabled_".concat(a),title:"Включено"}]};var a}))]},{type:o.Outline,columns:"6",hidden:!1,fields:[{type:o.Typography,sx:{"& *":{fontWeight:"bold !important"}},placeholder:"Список номеров агента",typoVariant:"subtitle2"},...[...new Array(5)].map(((e,t)=>{return a=t+1,{type:o.Box,sx:{display:"grid",gridTemplateColumns:"1fr 1fr auto",alignItems:"flex-end",mb:1},fields:[{type:o.Text,fieldBottomMargin:"0",isDisabled:e=>!e["telegram_agent_enabled_".concat(a)],name:"telegram_agent_".concat(a),title:"Номер агента"},{type:o.Text,isDisabled:e=>!e["telegram_agent_enabled_".concat(a)],fieldBottomMargin:"0",name:"telegram_agent_nickname_".concat(a),title:"Никнейм в Telegram"},{type:o.Checkbox,fieldBottomMargin:"0",name:"telegram_agent_enabled_".concat(a),title:"Включено"}]};var a}))]}]}];window.setting_integration_fields=hy;const by=[{type:Ee.Link,action:"breadcrumbs-action",label:"RealEstate"},{type:Ee.Link,action:"breadcrumbs-action",label:"Telegram"},{type:Ee.Button,isDisabled:({hasChanged:e})=>!e,action:"save-action",label:"Сохранить"}],vy=[{type:o.Text,outlined:!0,name:"title",title:"Наименование",isInvalid:({title:e})=>e?null:"Поле не должно быть пустым"},{type:o.Text,outlined:!0,title:"Комментарий",name:"comment",inputRows:3}],_y=[{title:"База объектов",children:[{name:"sozdanie_obekta",label:"Создание объекта",description:"Возможность создать объект"},{name:"redaktirovanie_obekta",label:"Редактирование объекта",description:"Возможность отредактировать объект"},{name:"prosmotr_obekta",label:"Просмотр объекта",description:"Возможность просмотреть объект"}]},{title:"Заявки",children:[{name:"sozdanie_zayavki",label:"Создание заявки",description:"Возможность создать заявку"},{name:"redaktirovanie_zayavki",label:"Редактирование заявки",description:"Возможность отредактировать заявку"},{name:"prosmotr_zayavki",label:"Просмотр заявки",description:"Возможность просмотреть заявку"}]},{title:"Контакты",children:[{name:"sozdanie_kontakta",label:"Создание контакта",description:"Возможность создать контакт"},{name:"redaktirovanie_kontakta",label:"Редактирование контакта",description:"Возможность отредактировать данные контакта"},{name:"prosmotr_kontakta",label:"Просмотр контакта",description:"Возможность просмотреть данные контакта"}]},{title:"Реклама",children:[{name:"publikacziya_reklamy",label:"Публикация рекламы в канал",description:"Возможность опубликовать рекламу в канал"},{name:"dobavlenie_kategorii_i_podkategorii",label:"Добавление категории и подкатегории в канал",description:"Возможность добавления категории и подкатегории в канал"}]},{title:"Служебный комментарий",children:[{name:"upominanie_polzovatelya",label:"Упоминание сотрудника",description:"Возможность упомянуть сотрудника в чате"},{name:"dobavlenie_fajla",label:"Добавление файла",description:"Возможность добавить файл в чат"}]},{title:"Сотрудники",children:[{name:"redaktirovanie_sotrudnika",label:"Редактирование сотрудника",description:"Возможность отредактировать данные сотрудника"},{name:"prosmotr_nomera_telefona_i_email",label:"Просмотр номера телефона и email",description:"Возможность просмотреть номер телефона и email сотрудника"},{name:"nastrojka_urovnej_dostupa",label:"Настройка уровней доступа",description:"Возможность настраивать уровни доступа"},{name:"anonimnoe_redaktirovanie",label:"Анонимное редактирование",description:"Красная плашка просмотра объекта или заявки не показывается"}]},(({title:e,levels:t})=>({title:e,children:t.map((({label:e,description:a},i)=>{const o="level-".concat(i+1);return{name:o,label:e,description:a,map:e=>{if(!e[o])return e;for(let a=0;a!==t.length;a++){const t="level-".concat(a+1);t!==o&&(e[t]=!1)}return e}}}))}))({title:"Уровень доступа",levels:[{label:"Стажер",description:"Видит только свои записи"},{label:"Сотрудник",description:"Видит свои записи и записи стажера"},{label:"Менеджер",description:"Видит свои записи и записи стажера, сотрудника"},{label:"Администратор",description:"Видит свои записи и записи стажера, сотрудника, менеджера"},{label:"Суперадмин",description:"Видет все данные из базы данных без ограничений"}]}),{title:"Доступ",children:[{name:"ne_vizhu_nomera_telefonov_chuzhih_kontaktov",label:"Не вижу номера телефонов чужих контактов (Стажер)",description:"Возможность скрыть номера телефонов контактов по всей базе кроме созданных самим пользователем"},{name:"vse_obekty_eksklyuzivny",label:"Все объекты эксклюзивны по умолчанию (Менеджер)",description:"Созданные пользователем контакты видны только ему"},{name:"vizhu_vse_urovni",label:"Вижу все уровни",description:"Видит номер контакта у вышестоящих уровней доступа"},{name:"vizhu_kontakty_pod_bronyu",label:"Вижу контакты под бронью (Директор)",description:"Вижу контакты, даже если получен задаток"},{name:"zaderzhka_perenaznacheniya_otvetstvennogo",label:"Задержка переназначения ответственного",description:"Могу забрать объект только через три дня простоя"},{name:"superadmin",label:"Суперадмин",description:"Действия, доступные только администратору базы данных"}]},{title:"Настройки",children:[{name:"dostup_k_nastrojkam",label:"Доступ к настройкам",description:"Возможность разрешить менять настройки"},{name:"sozdanie_roli",label:"Создание роли",description:"Возможность создать роль"},{name:"redaktirovanie_roli",label:"Редактирование роли",description:"Возможность отредактировать роль"}]}],gy=Nn()((e=>({root:{position:"absolute",padding:20,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"stretch",transform:"translate(-50%, -50%)",outline:"none",backgroundColor:e.palette.background.paper,borderRadius:5,gap:5},content:{overflow:"hidden",overflowY:"auto",flex:1},small:{top:"40%",left:"50%",maxHeight:"80%",width:500},large:{top:"50%",left:"50%",width:"calc(100vw - 50px)",height:"calc(100vh - 50px)"},container:{flex:1,overflow:"hidden"},title:{display:"flex",justifyContent:"space-between",alignItems:"center",height:65,color:e.palette.text.primary},submit:{marginTop:15},disabled:{opacity:.5,pointerEvents:"none"},indicatorTransparent:{height:6,background:e.palette.primary.main},tabRootTransparent:{minHeight:54,height:54},tabsRoot:{minHeight:54,height:54,marginLeft:"0 !important",marginRight:"0 !important"}}))),fy=[{type:St.Compute,compute:({title:e})=>e||"Не указано",field:"title",headerName:"Наименование",width:()=>200},{type:St.Compute,compute:({comment:e})=>e||"Не указано",field:"comment",headerName:"Комментарий",width:e=>Math.max(e-300,200)},{type:St.Action,headerName:"Действие",sortable:!1,width:()=>100}],ky=[{type:kt.Add,isDisabled:(e,{permissions:t})=>!t.hasSettingsCreateRolePermission},{type:kt.Menu,options:[{action:"add-action",isDisabled:(e,{permissions:t})=>!t.hasSettingsCreateRolePermission},{action:"update-now"},{action:"resort-action"},{action:"drop-filters"}]}],wy=[{label:"Удалить",action:"remove-action",icon:Ct}],Sy=()=>window.innerHeight-160,zy=[{id:"common",element:({payload:e})=>{const t=t=>{const{data:a,oneProps:i,beginSave:o,waitForChanges:l}=Fi({waitForChangesDelay:Go,history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1),updateSubject:os.settingsViewService.updateSubject,onSave:async e=>{let t=!0;try{await os.settingsViewService.setValue(e),os.alertService.notify("Изменения сохранены")}catch(a){t=!1;const e=xn(a);os.alertService.notify(e)}return t},fallback:os.errorService.handleGlobalError});my((async()=>{await l(),o()}));return se(lt,{children:[se($e,{items:yy,onAction:e=>{"save-action"===e&&o()},payload:{hasChanged:!!a,payload:e}}),se(Ge,{dirty:!0,handler:()=>t.data,payload:e,fields:py,...i}),se(Ke,{})]})};return se(Ka,{state:async()=>[await os.settingsViewService.getValue()],fallback:os.errorService.handleGlobalError,children:([e])=>se(t,{data:e})})},isActive:e=>cs(["/settings","/settings/common"],e),isAvailable:()=>!1},{id:"roles",element:({payload:e})=>{const{handleLoadStart:t,handleLoadEnd:a}=Oe({history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)}),{pickRole:i,render:o}=(({fullScreen:e,onChange:t,onSubmit:a,fallback:i,onLoadStart:o,onLoadEnd:l})=>{const[r,n]=re.useState("common"),[s,d]=re.useState({}),[c,m]=re.useState(!1),[u,p]=re.useState(!1),[y,h]=re.useState(!1),[b,v]=re.useState(0),{classes:_,cx:g}=gy();ea((()=>{t&&t(s)}),[s]);const f=(e,t)=>{t||(d(e),h(!0),m(!1))},k=()=>{d({}),p(!1),h(!1)},w=async()=>{a&&await a(s),p(!1),h(!1)},S=()=>{v((e=>e+1)),o&&o()},z=e=>{v((e=>e-1)),l&&l(e)};return{render:()=>se(ke,{open:u,onClose:k,children:se(me,{className:g(_.root,{[_.small]:!e,[_.large]:e}),children:[se(me,{className:_.content,children:[se(me,{className:_.title,sx:{position:"sticky",top:0,zIndex:1,background:"white"},children:se(Ae,{variant:"h6",component:"h2",children:s.id?"Редактирование роли":"Создание роли"})}),se(ha,{value:r,children:[se(me,{className:_.container,sx:{borderBottom:1,borderColor:"divider",pointerEvents:"all",position:"sticky",top:"65px",zIndex:1,background:"white"},children:se(ba,{variant:"fullWidth",classes:{root:_.tabsRoot,indicator:_.indicatorTransparent},onChange:(e,t)=>{n(t),m(!1)},children:[se(va,{classes:{root:_.tabRootTransparent},label:"Общая информация",value:"common"}),se(va,{classes:{root:_.tabRootTransparent},label:"Бизнес функции",value:"features"})]})}),se(ga,{className:_.content,value:"common",children:se(Ge,{sx:{pt:2},handler:s,fields:vy,change:f,invalidity:()=>m(!0)})}),se(ga,{className:_.content,value:"features",children:se(Ci,{sx:{pt:2},readonly:c,features:_y,outlinePaper:!0,handler:()=>s.role_features?s.role_features.reduce(((e,t)=>({...e,[t]:!0})),{}):{},change:(e,t)=>{if(e&&!t){const t=Object.entries(e).filter((([e,t])=>!!t)).map((([e])=>e));d((e=>({...e,role_features:t}))),h(!0)}}})})]})]}),se(ot,{className:_.submit,disabled:!!b||!y||c,fallback:i,onLoadStart:S,onLoadEnd:z,size:"large",variant:"contained",color:"info",fullWidth:!0,onClick:w,children:s.id?"Сохранить":"Создать"})]})}),pickRole:e=>{d(e),p(!0)}}})({onLoadStart:t,onLoadEnd:a,onSubmit:async e=>{if(e.id)return await os.roleViewService.update(e.id,e),os.alertService.notify("Изменения сохранены"),void l.next();await os.roleViewService.create(e),os.alertService.notify("Роль создана"),l.next()},fullScreen:!0}),l=ne(os.roleViewService.reloadSubject),{listProps:r}=Xt(os.routerService.locationState,{fallback:os.errorService.handleGlobalError}),n=It(os.roleViewService.findAll,{onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1),fallback:os.errorService.handleGlobalError,searchEntries:["title","comment"]});return se(Se,{children:[se(Jt,{withSingleSort:!0,withSearch:!0,fetchDebounce:$o,reloadSubject:l,title:"Роли",heightRequest:Sy,rowActions:wy,actions:ky,columns:fy,handler:n,payload:e,onRowClick:async e=>{(await os.permissionService.getPermissions()).hasSettingsEditRolePermission&&i(e)},onAction:async e=>{"add-action"===e&&i({})},onRowAction:async(e,t)=>{"remove-action"===e&&await os.roleViewService.remove(t.id)},selectionMode:$t.Multiple,...r}),o()]})},isActive:e=>cs(["/settings/roles"],e),isAvailable:()=>!1},{id:"integration",element:({payload:e})=>{const t=t=>{const{data:a,oneProps:i,beginSave:o,waitForChanges:l}=Fi({waitForChangesDelay:Go,history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1),updateSubject:os.settingsViewService.updateSubject,onSave:async e=>{let t=!0;try{await os.settingsViewService.setValue(e),os.alertService.notify("Изменения сохранены")}catch(a){t=!1;const e=xn(a);os.alertService.notify(e)}return t},fallback:os.errorService.handleGlobalError});my((async()=>{await l(),o()}));return se(lt,{children:[se($e,{items:by,onAction:e=>{"save-action"===e&&o()},payload:{hasChanged:!!a,payload:e}}),se(Ge,{dirty:!0,handler:()=>t.data,payload:e,fields:hy,...i}),se(Ke,{})]})};return se(Ka,{state:async()=>[await os.settingsViewService.getValue()],fallback:os.errorService.handleGlobalError,children:([e])=>se(t,{data:e})})},isActive:e=>cs(["/settings/integration"],e),isAvailable:()=>!1}],xy=()=>se(Ka,{state:async()=>[await os.settingsViewService.getMasterDetailMode(),await os.permissionService.getPermissions(),await os.featureService.getAccessLevel()],reloadSubject:os.layoutService.reloadOutletSubject,fallback:os.errorService.handleGlobalError,children:async([e,t,a])=>se(Zt,{history:os.routerService,routes:zy,payload:()=>({menuMode:e,permissions:t,accessLevel:a})})}),Ay=Nn()((e=>({root:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",minHeight:150},box:{display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(1),flex:1},box_list:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 0",borderBottom:"1px solid gray",width:"100%",gap:"10px"},created_time:{alignSelf:"flex-start"},key:{color:"grey",fontSize:"14px"},value:{textAlign:"end",fontSize:"15px"},btn:{borderRadius:"25px"},adjust:{maxHeight:10,minHeight:10,flex:1}}))),Ty=re.forwardRef((({id:e,className:t,style:a,completionTime:i,fromWhom:o,toWhom:l,task:r,createdDate:n,contact:s,type:d,status:c,isCall:m,isMeet:u,contact_id:p,onChangeStatus:y,onDrag:h},b)=>{const{classes:v}=Ay(),[_,g]=re.useState(null),[f,k]=re.useState(null),{execute:w,loading:S}=Re((async e=>{await y(e)}),{onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1),fallback:os.errorService.handleGlobalError}),z=re.useMemo((()=>{const e=mn.findIndex((e=>e===c)),t=mn.filter(((t,a)=>a<e)).filter((e=>"Просрочено"!==e)).filter((e=>"Выполненные задачи"!==e)).reverse();return t.push("Просрочено"),t.push("Выполненные задачи"),t}),[c]),x=re.useMemo((()=>{const e=mn.findIndex((e=>e===c)),t=mn.filter(((t,a)=>a>e)).filter((e=>"Просрочено"!==e)).filter((e=>"Выполненные задачи"!==e));return t.push("Просрочено"),t.push("Выполненные задачи"),t}),[c]),A=re.useMemo((()=>!os.featureService.features.includes("vizhu_kontakty_pod_bronyu")&&("Выполненные задачи"===c||"Просрочено"===c)),[c]);return se("div",{"data-dealid":e,className:ue(v.root,t),onDrag:()=>h(e),style:a,ref:b,draggable:!A,children:[se(et,"Клиент"===d?{className:v.box,children:[se(we,{justifyContent:"space-between",alignItems:"center",direction:"row",width:"100%",children:[se(_e,{onClick:({currentTarget:e})=>{g(e),k(null)},disabled:!z.length||S||A,size:"small",children:se(fe,{})}),se(vi,{anchorEl:_,open:!!_,onClose:()=>g(null),children:z.map(((e,t)=>se(_i,{onClick:()=>{w(e),g(null)},children:e},"".concat(e,"-").concat(t))))}),se(fa,{label:i,onClick:()=>{os.routerService.push("/task/".concat(e))},variant:"filled",color:"primary"}),se(_e,{onClick:({currentTarget:e})=>{g(null),k(e)},disabled:!x.length||S||A,size:"small",children:se(ge,{})}),se(vi,{anchorEl:f,open:!!f,onClose:()=>k(null),children:x.map(((e,t)=>se(_i,{onClick:()=>{w(e),k(null)},children:e},"".concat(e,"-").concat(t))))})]}),se(me,{className:v.box_list,children:[se(Ae,{className:v.key,children:"Кому:"}),se(Ae,{className:v.value,children:l})]}),se(me,{className:v.box_list,children:[se(Ae,{className:v.key,children:"Контакт:"}),se(Ae,{className:v.value,children:se(Ht,{href:"#",onClick:()=>Z("/contact_view/".concat(p,"/contact")),children:s})})]}),se(me,{sx:{display:u||u?"flex":"none",justifyContent:"space-around",gap:"10px",margin:"10px 0",width:"100%"},children:[se(fa,{label:"Встреча",color:"info",sx:{opacity:u?1:0}}),se(fa,{label:"Звонок",color:"warning",sx:{opacity:m?1:0}})]}),se(me,{className:v.created_time,children:[se(Ae,{className:v.key,children:"Дата создания:"}),se(Ae,{className:v.value,children:n})]})]}:{className:v.box,children:[se(we,{justifyContent:"space-between",alignItems:"center",direction:"row",width:"100%",children:[se(_e,{onClick:({currentTarget:e})=>{g(e),k(null)},disabled:!z.length||S||A,size:"small",children:se(fe,{})}),se(vi,{anchorEl:_,open:!!_,onClose:()=>g(null),children:z.map(((e,t)=>se(_i,{onClick:()=>{w(e),g(null)},children:e},"".concat(e,"-").concat(t))))}),se(fa,{label:i,onClick:()=>{os.routerService.push("/task/".concat(e))},variant:"filled",color:"primary"}),se(_e,{onClick:({currentTarget:e})=>{g(null),k(e)},disabled:!x.length||S||A,size:"small",children:se(ge,{})}),se(vi,{anchorEl:f,open:!!f,onClose:()=>k(null),children:x.map(((e,t)=>se(_i,{onClick:()=>{w(e),k(null)},children:e},"".concat(e,"-").concat(t))))})]}),se(me,{className:v.box_list,children:[se(Ae,{className:v.key,children:"От кого:"}),se(Ae,{className:v.value,children:o})]}),se(me,{className:v.box_list,children:[se(Ae,{className:v.key,children:"Кому:"}),se(Ae,{className:v.value,children:l})]}),se(me,{className:v.box_list,children:[se(Ae,{className:v.key,children:"Задача:"}),se(Ae,{className:v.value,children:r})]}),se(me,{className:v.created_time,children:[se(Ae,{className:v.key,children:"Дата создания:"}),se(Ae,{className:v.value,children:n})]})]}),se("div",{className:v.adjust})]})})),Fy=[{type:o.Box,sx:{display:"grid",gridTemplateColumns:"auto auto 1fr auto auto","& > .MuiGrid-root":{minWidth:"275px"},mt:-1},fields:[{type:o.Choose,fieldBottomMargin:"0",fieldRightMargin:"2",choose:async(e,t)=>{t.pickData(e.user_id?[e.user_id]:[]);const a=await t.resultSubject.toPromise();if(a&&a.length){const[e]=a;return e}return null},tr:async e=>{const t=await os.userViewService.tryRead(e);return[null==t?void 0:t.last_name,null==t?void 0:t.first_name,null==t?void 0:t.middle_name].filter((e=>e)).join(" ")||(null==t?void 0:t.$id)||""},name:"user_id",placeholder:"Ответственный",title:""},{type:o.Combo,fieldBottomMargin:"0",fieldRightMargin:"5",name:"task_type",title:"",placeholder:"Тип задачи",itemList:["Внутренняя","Клиент"]},{type:o.Div},{type:o.Component,fieldRightMargin:"2",sx:{maxWidth:"185px 1important",minWidth:"185px !important"},element:({payload:{onCreateTask:e}})=>se(ot,{sx:{mt:1,mr:1,whiteSpace:"nowrap"},onClick:e,size:"small",variant:"contained",children:"Создать задачу"})},{type:o.Text,fieldBottomMargin:"0",name:"search",title:"",placeholder:"Поиск",leadingIcon:gi,trailingIcon:()=>se(Gt,{sx:{opacity:.5}}),trailingIconClick(e,t,a){e&&a("")}}]}],Cy=({onChange:e,onCreateTask:t,className:a,style:i,data:o,payload:l})=>{const{pickData:r,render:n,resultSubject:s}=nd({payload:l});return se(et,{className:a,style:i,sx:{mb:1,minHeight:48},children:[se(Nt,{sx:{height:"100%"},hideOverflowY:!0,children:se(me,{sx:{p:1,display:"flex",alignItems:"center",justifyContent:"stretch"},children:se(Ge,{fields:Fy,handler:()=>o,onChange:(t,a)=>{a||e(t)},payload:()=>({...l,pickData:r,resultSubject:s,onCreateTask:t}),fieldDebounce:$o})})}),n()]})},Vy=async e=>{const{moment_stamp:t,from_user_id:a,to_user_id:i,contact_id:o,from_user_fio:l,to_user_fio:r,contact_fio:s,title:d,$createdAt:c,$updatedAt:m,is_call:u,is_meet:p,time_stamp:y,$id:h,type:b}=e,v=n(c).format("HH:mm DD/MM/YYYY");let _=l||"Не указано",g=r||"Не указано",f="Не указано",k=s||"Не указано",w="Не указано";const S=await yn(e);return null===S?null:(t&&(w=rr(t).format("DD/MM/YYYY")),t&&"number"==typeof y&&(w+=" ",w+=nr(y).format("HH:mm")),d&&(f=d),{id:h,type:b,completionTime:w,fromWhom:_,toWhom:g,task:f,metadata_task:f,createdDate:v,updatedAt:m,metadata_created_at:n(c).format("DD/MM/YYYY"),metadata_updated_at:n(m).format("DD/MM/YYYY"),moment_stamp:t,toUserId:i,isCall:u,isMeet:p,contact_id:o,time_stamp:y,status:S,contact:k})},Ly=[{type:o.Group,fieldBottomMargin:"0",fieldRightMargin:"0",noBaseline:!0,fields:[{type:o.Component,sx:{mb:-1},element:()=>se(Ae,{variant:"caption",sx:{opacity:.8},children:"Перенос с"})},{type:o.Group,fieldRightMargin:"0",fieldBottomMargin:"1",fields:[{type:o.Text,fieldBottomMargin:"0",columns:"6",compute:e=>{const t=e.fromStatus;return"Выполненные задачи"===t||"Просрочено"===t||"Новые задачи"===t?t:rr(e.fromStamp||or()).format("DD/MM/YYYY")}},{type:o.Time,sx:{pointerEvents:"none",opacity:.5},fieldBottomMargin:"0",columns:"6",compute:({fromTimeStamp:e})=>"number"==typeof e?nr(e).format("HH:mm"):null,title:"",placeholder:"Не указано"}]},{type:o.Component,sx:{mb:-1},element:()=>se(Ae,{variant:"caption",sx:{opacity:.8},children:"Перенос на"})},{type:o.Group,fieldRightMargin:"0",fieldBottomMargin:"1",fields:[{type:o.Text,fieldBottomMargin:"0",columns:"6",compute:e=>{const t=e.toStatus;return"Выполненные задачи"===t||"Просрочено"===t||"Новые задачи"===t?t:rr(h.get(un,t)||or()).format("DD/MM/YYYY")}},{type:o.Time,fieldBottomMargin:"0",columns:"6",name:"time_stamp",title:"",placeholder:"Не указано"}]}]},{type:o.Text,name:"comment",title:"",placeholder:"Комментарий",inputRows:3}],Iy=Nn()((e=>({root:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",height:"calc(100vh - 85px)",width:"100%",["& .".concat("react-declarative__scrollViewTarget")]:{transform:"rotateX(180deg)","& > div > div":{marginBottom:"25px",transform:"rotateX(180deg)"}}},container:{position:"relative",flex:1,display:"flex",alignItems:"stretch",justifyContent:"stretch"},content:{flex:1,display:"flex"},group:{display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",maxWidth:"276px",minWidth:"276px",gap:10,padding:10,marginRight:10},inactiveGroup:{background:"#E1E2E6"},activeGroup:{background:le(e.palette.primary.main,.5)},list:{flex:1,minWidth:"256px",height:"100%"},loading:{pointerEvents:"none"}}))),My=["fromWhom","toWhom","task","contact","type","metadata_created_at","metadata_updated_at","metadata_task"],By={user_id:"",tip_klienta:null,search:""},Dy="real-estate__headerRoot",Ry=[{type:Ee.Link,isVisible:()=>!!os.routerService.previousPath,action:"list-action",label:se(fe,{sx:{display:"block"}})},{type:Ee.Link,action:"list-action",label:"Доска задач"},{type:Ee.Link,action:"list-action",label:"Просмотр истории"},{type:Ee.Button,action:"reassign-action",isDisabled:async()=>!(await os.featureService.hasFeature("vizhu_kontakty_pod_bronyu")),label:"Передать задачу"}],jy=[{action:"superadmin-remove-action",label:"Удалить навсегда"}],qy=[{id:"list",element:({params:{dealCardMap:e},payload:t})=>{const{classes:a}=Iy(),[i,o]=fi((()=>({...By,user_id:os.routerService.location.pathname.includes("/task_mine")?os.appwriteService.currentUser.$id:By.user_id}))),[l,r]=ki((()=>({user_id:i.user_id,tip_klienta:JSON.parse(i.tip_klienta),search:i.search})));ea((()=>{o(l.current)}),[l.current]);const[s,d]=re.useState((()=>new Map(e))),c=(({payload:e})=>{const{handleLoadStart:t,handleLoadEnd:a}=Oe({history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)}),i=Ne({large:!0,payload:e,fields:Ly}),{execute:o}=Re((async({fromStamp:e,toStatus:t,fromStatus:a,fromTimeStamp:o,type:l,id:r,call:n,meet:s})=>{var d;const c=await i({title:"Перенос задачи",handler:()=>({fromStamp:e,toStatus:t,fromStatus:a,fromTimeStamp:o,time_stamp:"number"==typeof o?nr(o).format("HH:mm"):null})}).toPromise();if(c){const{to_user_id:e,title:i,contact_id:o}=await os.taskViewService.read(r),m=h.get(un,t)||null,u="number"==typeof c.time_stamp&&(null==(d=Qe.parseTime(c.time_stamp))?void 0:d.toStamp())||null;"Внутренняя"===l&&await os.taskRequestService.updateTodoTask(r,e,a,m,u,"Выполненные задачи"===t,i,c.comment),"Клиент"===l&&await os.taskRequestService.updateClientTask(r,e,a,o,m,u,"Выполненные задачи"===t,n,s,i,c.comment)}}),{onLoadStart:t,onLoadEnd:a,fallback:os.errorService.handleGlobalError});return async e=>await o(e)})({payload:t}),{execute:m,render:u}=Np({payload:t}),p=re.useMemo((()=>{const e=[];for(const t of s.values())e.push(t);return e.flatMap((e=>e))}),[s]),y=Ze(s),b=re.useRef(null),[v,_]=re.useState(null),g=async(e,t)=>{const a=p.find((t=>t.id===e));if(!a)return;const{status:i,type:o,moment_stamp:l,time_stamp:r,isCall:n,isMeet:s}=a;i!==t&&await c({id:e,type:o,fromStamp:l,toStatus:t,fromTimeStamp:r,fromStatus:i,call:!!n,meet:!!s})},{loading:f,execute:k}=Re((async([e])=>{_(null),await g(b.current,e)}),{onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1),fallback:os.errorService.handleGlobalError});re.useEffect((()=>os.taskViewService.updateSubject.subscribe(j((async([e,t])=>{const a=new Map(y.current);for(const o of mn){const t=a.get(o)||[];a.set(o,t.filter((t=>t.id!==e)))}const i=await yn(t);for(const o of mn)if(o===i){const e=a.get(o)||[],i=await Vy(t);i&&e.unshift(i),a.set(o,e)}d(a)})))),[]),re.useEffect((()=>os.taskViewService.removeSubject.subscribe(j((async e=>{const t=new Map(y.current);for(const a of mn){const i=t.get(a)||[];t.set(a,i.filter((t=>t.id!==e)))}d(t)})))),[]),re.useEffect((()=>os.taskViewService.createSubject.subscribe(j((async e=>{const t=new Map(y.current),a=await yn(e);for(const i of mn)if(i===a){let a=t.get(i)||[];a=a.filter((t=>t.id!==e.$id));const o=await Vy(e);null!==o&&a.unshift(o),t.set(i,a)}d(t)})))),[]);const w=f;return se(me,{className:ue(a.root,{[a.loading]:w}),children:[se(Cy,{data:l.current,payload:t,onChange:r,onCreateTask:m}),se(me,{className:a.container,children:[se(Nt,{withScrollbar:!0,hideOverflowY:!0,className:a.content,children:mn.map((e=>{const t=y.current.get(e)||[];return se(me,{onDrop:({currentTarget:t})=>k([e,t]),onDragEnd:()=>{_(null)},onDragOver:t=>{_(e),t.preventDefault()},className:ue(a.group,{[a.activeGroup]:v===e,[a.inactiveGroup]:v!==e}),children:[se(Ae,{variant:"h6",fontWeight:"bold",children:e}),se(ct,{className:a.list,minRowHeight:150,children:t.sort((({updatedAt:e},{updatedAt:t})=>n(e).isBefore(t)?1:-1)).filter((e=>{const{user_id:t}=l.current;return!t||e.toUserId===t})).filter((e=>{const{task_type:t}=l.current;return!(null==t?void 0:t.length)||e.type===t[0]})).filter((e=>{const{search:t}=l.current;return!t||wi(e,t,...My)})).map((e=>se(Ty,{onChangeStatus:async t=>{await g(e.id,t)},onDrag:()=>{b.current=e.id},...e},e.id)))})]})}))}),u()]})]})},isActive:e=>cs(["/task","/task_mine","/task_all"],e),isAvailable:()=>!1},{id:"card",element:({formState:e,payload:t,params:{id:a}})=>{const i=(({taskId:e})=>{const{handleLoadStart:t,handleLoadEnd:a}=Oe({history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)}),{execute:i}=Re((async()=>{await os.featureService.hasFeature("superadmin")&&(await os.cleanupService.removeTask(e),os.routerService.push("/task"))}),{onLoadStart:t,onLoadEnd:a,fallback:os.errorService.handleGlobalError}),o=Qt({title:"Вы уверены?",msg:"Удаление задачи сотрет соответствующие записи в истории задач. Продолжить?"});return()=>o().then((e=>{e&&i()}))})({taskId:a}),[o,l]=re.useState([]),r=sm({selectionMode:$t.Single,payload:t,features:t.permissions,title:"Выберите ответственного"}),{handleLoadStart:n,handleLoadEnd:s}=Oe({history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)}),{size:d}=Je({target:document.body,selector:"main",compute:e=>{var t;let{height:a,width:i}=e;return a-=(null==(t=document.querySelector(".".concat(Dy)))?void 0:t.offsetHeight)||0,a-=50,a=Math.min(window.innerHeight-50,a),{width:i,height:a}}}),{loading:c,execute:m}=Re((async e=>{if(e){const e=await os.taskHistoryViewService.findAllByTaskId(a);l(e)}}),{fallback:os.errorService.handleGlobalError,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)}),{execute:u}=Re((async()=>{const{title:e}=await os.taskViewService.read(a),t=await r();t&&t[0]&&await os.taskRequestService.reassignClientTask(a,t[0],"",e)}),{onLoadStart:n,onLoadEnd:s,fallback:os.errorService.handleGlobalError});re.useEffect((()=>os.taskHistoryViewService.reloadSubject.subscribe((()=>{m(!0)}))),[]);return se(Se,{children:[se("div",{className:Dy,children:se($e,{payload:e,items:Ry,actions:jy,onAction:e=>{"list-action"===e&&os.routerService.back("/task"),"reassign-action"===e&&u(),"superadmin-remove-action"===e&&i()}})}),se(ct,{sx:{height:d.height},minHeight:72,loading:c,onDataRequest:e=>{m(e)},children:se(we,{spacing:1,children:o.map((e=>se(Wm,{loading:c,status:"info",item:e},e.$id)))})})]})},isActive:e=>cs(["/task/:id"],e)}],Py=async()=>{const e=new Map;return await Promise.all(mn.map((async t=>{const a=await os.taskViewService.findByTaskStatus(t),i=await Promise.all(a.map((async e=>await Vy(e))));e.set(t,i.filter((e=>null!==e)))}))),e},Ey=({id:e})=>se(Ka,{state:async()=>[await Py(),await os.settingsViewService.getMasterDetailMode(),await os.permissionService.getPermissions(),await os.featureService.getAccessLevel()],fallback:os.errorService.handleGlobalError,children:async([t,a,i,o])=>se(Zt,{history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1),routes:qy,params:{dealCardMap:t,id:e},payload:()=>({menuMode:a,permissions:i,accessLevel:o})})}),Ny=[{id:"user",label:"Общая информация",isActive:()=>cs(["/user_edit/:id","/user_edit/:id/user"])},{id:"additional_info",label:"Дополнительная информация",isActive:()=>cs(["/user_edit/:id","/user_edit/:id/additional_info"])},{id:"features",label:"Бизнес-функции",isActive:()=>cs(["/user_edit/:id/features"])},{id:"files",label:"Файлы",isActive:()=>cs(["/user_edit/:id/files"])}],Oy=(e,t)=>{if(t)return;const a=rs("id");"user"===e&&os.routerService.replace("/user_edit/".concat(a,"/user")),"additional_info"===e&&os.routerService.replace("/user_edit/".concat(a,"/additional_info")),"files"===e&&os.routerService.replace("/user_edit/".concat(a,"/files")),"features"===e&&os.routerService.replace("/user_edit/".concat(a,"/features"))},Hy=({children:e,payload:t,mode:a=B.Paper})=>{const i=re.useMemo((()=>"tabs"===a?B.Tabs:B.Paper),[a]);return se(qe,{withFixedPos:!0,payload:t,fixedPosHeaderAdjust:a===B.Paper?85:64,mode:i,options:Ny,onActiveOptionChange:Oy,children:e})},Uy=[{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Typography,typoVariant:"h6",placeholder:"Паспортные данные"},{type:o.Text,columns:"6",outlined:!1,name:"seriya-i-nomer_pasporta",title:"Серия и номер паспорта"},{type:o.Date,columns:"6",outlined:!1,name:"data-vydachi_pasporta",title:"Дата выдачи паспорта"},{type:o.Text,columns:"6",outlined:!1,name:"kem_vydan",title:"Кем выдан"},{type:o.Text,columns:"6",outlined:!1,name:"adres_propiski",title:"Адрес прописки"},{type:o.Text,columns:"6",outlined:!1,name:"adres_prozhivaniya",title:"Адрес проживания"}]},{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Typography,typoVariant:"h6",placeholder:"Дополнительно"},{type:o.Text,columns:"6",outlined:!1,inputRows:3,name:"o_sebe",title:"О себе"},{type:o.Text,columns:"6",outlined:!1,inputRows:3,name:"hobbi",title:"Хобби"}]},{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Typography,typoVariant:"h6",placeholder:"Социальные сети"},{type:o.Text,columns:"6",outlined:!1,name:"telegram",title:"Telegram"},{type:o.Text,columns:"6",outlined:!1,name:"fejsbuk",title:"Facebook"},{type:o.Text,columns:"6",outlined:!1,name:"instagram",title:"Instagram"},{type:o.Text,columns:"6",outlined:!1,name:"vatsap",title:"WhatsApp"},{type:o.Text,columns:"6",outlined:!1,name:"v_kontakte",title:"VK"},{type:o.Text,columns:"6",outlined:!1,name:"zum",title:"ZOOM"}]},{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Typography,typoVariant:"h6",placeholder:"Дополнительные сведения"},{type:o.Group,fields:[{type:o.Group,columns:"6",fields:[{type:o.Component,element:()=>se(Ae,{children:"Дети"})},{type:o.Group,child:{type:o.Box,sx:{display:"grid",gridTemplateColumns:"auto auto 1fr"},fields:[{type:o.Radio,name:"deti",radioValue:"д",title:"Да"},{type:o.Radio,name:"deti",radioValue:"н",title:"Нет"}]}},{type:o.Group,columns:"12",fields:[{type:o.Combo,fieldRightMargin:"4",columns:"6",outlined:!1,name:"semejnoe_polozhenie",title:"Семейное положение",itemList:["Не выбрано","Холост/не замужем","Женат/замужем","Гражданский брак","Разведен(а)"]},{type:o.Date,fieldRightMargin:"4",columns:"6",outlined:!1,name:"data_priema_rezyume",title:"Дата приема резюме"},{type:o.Date,fieldRightMargin:"4",columns:"6",outlined:!1,name:"sertifikat",title:"Сертификат"},{type:o.Date,fieldRightMargin:"4",columns:"6",outlined:!1,name:"nachalo_opyta_raboty",title:"Начало опыта работы"},{type:o.Date,fieldRightMargin:"4",columns:"6",outlined:!1,name:"data_uvolneniya",title:"Дата увольнения"},{type:o.Text,outlined:!1,inputRows:3,name:"prichina_uvolneniya",title:"Причина увольнения"}]}]}]}]}];window.user_additional_info_fields=Uy;const Wy=[{type:Ee.Link,isVisible:()=>!!os.routerService.previousPath,action:"list-action",label:se(fe,{sx:{display:"block"}})},{type:Ee.Link,action:"user-list-action",label:"Сотрудники"},{type:Ee.Link,action:"user-list-action",label:"Редактирование дополнительной информации сотрудника"},{type:Ee.Button,isDisabled:({hasChanged:e})=>!e,action:"user-save-action",label:"Сохранить"}],$y=[{id:"user",label:"Общая информация",isActive:()=>cs(["/user_view/:id","/user_view/:id/user"])},{id:"additional_info",label:"Дополнительная информация",isActive:()=>cs(["/user_view/:id","/user_view/:id/additional_info"])},{id:"features",isDisabled:({permissions:e})=>!e.hasUsersAccessLevelsPermission,label:"Бизнес-функции",isActive:()=>cs(["/user_view/:id/features"])},{id:"files",label:"Файлы",isActive:()=>cs(["/user_view/:id/files"])}],Gy=(e,t)=>{if(t)return;const a=rs("id");"user"===e&&os.routerService.replace("/user_view/".concat(a,"/user")),"additional_info"===e&&os.routerService.replace("/user_view/".concat(a,"/additional_info")),"features"===e&&os.routerService.replace("/user_view/".concat(a,"/features")),"files"===e&&os.routerService.replace("/user_view/".concat(a,"/files"))},Yy=({children:e,payload:t,mode:a=B.Paper})=>{const i=re.useMemo((()=>"tabs"===a?B.Tabs:B.Paper),[a]);return se(qe,{withFixedPos:!0,payload:t,fixedPosHeaderAdjust:a===B.Paper?85:64,mode:i,options:$y,onActiveOptionChange:Gy,children:e})},Ky=[{type:o.Paper,isVisible:e=>ys(e,"seriya-i-nomer_pasporta","data-vydachi_pasporta","kem_vydan","adres_propiski","adres_prozhivaniya"),fieldBottomMargin:"1",fields:[{type:o.Typography,typoVariant:"h6",placeholder:"Паспортные данные"},{type:o.Text,isVisible:e=>ys(e,"seriya-i-nomer_pasporta"),columns:"6",outlined:!1,name:"seriya-i-nomer_pasporta",title:"Серия и номер паспорта"},{type:o.Text,isVisible:e=>ys(e,"data-vydachi_pasporta"),columns:"6",outlined:!1,name:"data-vydachi_pasporta",title:"Дата выдачи паспорта"},{type:o.Text,isVisible:e=>ys(e,"kem_vydan"),columns:"6",outlined:!1,name:"kem_vydan",title:"Кем выдан"},{type:o.Text,isVisible:e=>ys(e,"adres_propiski"),columns:"6",outlined:!1,name:"adres_propiski",title:"Адрес прописки"},{type:o.Text,isVisible:e=>ys(e,"adres_prozhivaniya"),columns:"6",outlined:!1,name:"adres_prozhivaniya",title:"Адрес проживания"}]},{type:o.Paper,isVisible:e=>ys(e,"o_sebe","hobbi"),fieldBottomMargin:"1",fields:[{type:o.Typography,typoVariant:"h6",placeholder:"Дополнительно"},{type:o.Text,isVisible:e=>ys(e,"o_sebe"),columns:"6",outlined:!1,inputRows:3,name:"o_sebe",title:"О себе"},{type:o.Text,isVisible:e=>ys(e,"hobbi"),columns:"6",outlined:!1,inputRows:3,name:"hobbi",title:"Хобби"}]},{type:o.Paper,isVisible:e=>ys(e,"telegram","fejsbuk","instagram","vatsap","v_kontakte","zum"),fieldBottomMargin:"1",fields:[{type:o.Typography,typoVariant:"h6",placeholder:"Социальные сети"},{type:o.Text,isVisible:e=>ys(e,"telegram"),columns:"6",outlined:!1,name:"telegram",title:"Telegram"},{type:o.Text,isVisible:e=>ys(e,"fejsbuk"),columns:"6",outlined:!1,name:"fejsbuk",title:"Facebook"},{type:o.Text,isVisible:e=>ys(e,"instagram"),columns:"6",outlined:!1,name:"instagram",title:"Instagram"},{type:o.Text,isVisible:e=>ys(e,"vatsap"),columns:"6",outlined:!1,name:"vatsap",title:"WhatsApp"},{type:o.Text,isVisible:e=>ys(e,"v_kontakte"),columns:"6",outlined:!1,name:"v_kontakte",title:"VK"},{type:o.Text,isVisible:e=>ys(e,"zum"),columns:"6",outlined:!1,name:"zum",title:"ZOOM"}]},{type:o.Paper,isVisible:e=>ys(e,"deti","semejnoe_polozhenie","data_priema_rezyume","sertifikat","nachalo_opyta_raboty","data_uvolneniya","prichina_uvolneniya"),fieldBottomMargin:"1",fields:[{type:o.Typography,typoVariant:"h6",placeholder:"Дополнительные сведения"},{type:o.Group,fields:[{type:o.Group,isVisible:e=>ys(e,"deti"),columns:"6",fields:[{type:o.Component,element:()=>se(Ae,{children:"Дети"})},{type:o.Group,child:{type:o.Box,sx:{display:"grid",gridTemplateColumns:"auto auto 1fr"},fields:[{type:o.Radio,isVisible:e=>ys(e,"deti"),name:"deti",radioValue:"д",title:"Да"},{type:o.Radio,isVisible:e=>ys(e,"deti"),name:"deti",radioValue:"н",title:"Нет"}]}},{type:o.Group,columns:"12",fields:[{type:o.Text,isVisible:e=>ys(e,"semejnoe_polozhenie"),fieldRightMargin:"4",columns:"6",outlined:!1,name:"semejnoe_polozhenie",title:"Семейное положение"},{type:o.Text,isVisible:e=>ys(e,"data_priema_rezyume"),fieldRightMargin:"4",columns:"6",outlined:!1,name:"data_priema_rezyume",title:"Дата приема резюме"},{type:o.Text,isVisible:e=>ys(e,"sertifikat"),fieldRightMargin:"4",columns:"6",outlined:!1,name:"sertifikat",title:"Сертификат"},{type:o.Text,isVisible:e=>ys(e,"nachalo_opyta_raboty"),fieldRightMargin:"4",columns:"6",outlined:!1,name:"nachalo_opyta_raboty",title:"Начало опыта работы"},{type:o.Text,isVisible:e=>ys(e,"data_uvolneniya"),fieldRightMargin:"4",columns:"6",outlined:!1,name:"data_uvolneniya",title:"Дата увольнения"},{type:o.Text,isVisible:e=>ys(e,"prichina_uvolneniya"),outlined:!1,inputRows:3,name:"prichina_uvolneniya",title:"Причина увольнения"}]}]}]}]}],Xy=[{type:Ee.Link,action:"list-action",label:"Сотрудники"},{type:Ee.Link,action:"list-action",label:"Дополнительная информация сотрудника"},{type:Ee.Button,isDisabled:({payload:{permissions:e}})=>!e.hasUsersUpdatePermission,action:"edit-action",label:"Редактировать"}],Jy=[{type:Ee.Link,isVisible:()=>!!os.routerService.previousPath,action:"list-action",label:se(fe,{sx:{display:"block"}})},{type:Ee.Link,action:"user-list-action",label:"Сотрудники"},{type:Ee.Link,action:"user-list-action",label:"Редактирование бизнес-функций сотрудника"},{type:Ee.Button,isDisabled:({hasChanged:e})=>!e,action:"user-save-action",label:"Сохранить"}],Zy=[{type:Ee.Link,action:"list-action",label:"Сотрудники"},{type:Ee.Link,action:"list-action",label:"Бизнес-Функции сотрудника"},{type:Ee.Button,action:"edit-action",label:"Редактировать"}],Qy=[{type:Ee.Link,isVisible:()=>!!os.routerService.previousPath,action:"list-action",label:se(fe,{sx:{display:"block"}})},{type:Ee.Link,action:"list-action",label:"Сотрудники"},{type:Ee.Link,action:"list-action",label:"Редактирование файлов сотрудника"},{type:Ee.Button,isDisabled:({hasChanged:e})=>!e,action:"save-action",label:"Сохранить"}],eh=[{type:Ee.Link,action:"list-action",label:"Сотрудники"},{type:Ee.Link,action:"list-action",label:"Файлы сотрудника"},{type:Ee.Button,isDisabled:({payload:{permissions:e}})=>!e.hasUsersUpdatePermission,action:"edit-action",label:"Редактировать"}],th=oe.createLoader(28),ah=[{type:o.Text,outlined:!0,name:"email",title:"Email"},{type:o.Text,outlined:!0,name:"phone",title:"Телефон"}],ih=[{type:St.Component,headerName:"Аватар",sortable:!1,width:()=>65,element:({avatar:e,email:t})=>se(ye,{Loader:th,children:async()=>{const a=e?await os.appwriteService.getImageURL(e):"";return se(me,{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:se(_t,{src:a||void 0,alt:t})})}})},{type:St.Compute,sortable:!1,field:"index",headerName:"Номер",element:({index:e})=>se(zt,{content:e}),width:()=>100},{type:St.Compute,sortable:!1,headerName:"Имя",compute:({last_name:e="",first_name:t="",middle_name:a=""})=>[e,t,a].filter((e=>e.length)).join(" ")||"",width:e=>Math.max((e-265)/3,200)},{type:St.Compute,isVisible:({payload:{permissions:e}})=>$(e.hasContactNumberPermission,e.hasUsersViewPhoneAndEmailPermission),sortable:!1,compute:({rabochij_telefon:e})=>e||"",field:"rabochij_telefon",headerName:"Рабочий телефон",width:e=>Math.max((e-265)/3,200)},{type:St.Compute,sortable:!1,compute:({email:e})=>e||"",isVisible:({payload:{permissions:e}})=>$(e.hasContactEmailPermission,e.hasUsersViewPhoneAndEmailPermission),field:"email",headerName:"Email",width:e=>Math.max((e-265)/3,200)},{type:St.Action,headerName:"Действие",sortable:!1,width:()=>100}],oh=[{type:kt.Menu,options:[{action:"update-now"},{action:"resort-action"},{action:"drop-filters"}]}],lh=[{label:"Редактировать",isDisabled:(e,{permissions:t})=>!t.hasUsersUpdatePermission,action:"edit-action"},{label:"В архиве",action:"toggle-archive",icon:Tt,isVisible:({system_is_remove:e})=>$(!e)},{label:"В архиве",action:"toggle-archive",icon:Ft,isVisible:({system_is_remove:e})=>$(!!e)}],rh=()=>window.innerHeight-100,nh=oe.createLoader(28),sh=[{type:o.Text,outlined:!0,name:"email",title:"Email"},{type:o.Text,outlined:!0,name:"phone",title:"Телефон"}],dh=[{type:St.Component,headerName:"Аватар",sortable:!1,width:()=>65,element:({avatar:e,email:t})=>se(ye,{Loader:nh,children:async()=>{const a=e?await os.appwriteService.getImageURL(e):"";return se(me,{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:se(_t,{src:a||void 0,alt:t})})}})},{type:St.Compute,sortable:!1,field:"index",headerName:"Номер",element:({index:e})=>se(zt,{content:e}),width:()=>100},{type:St.Compute,sortable:!1,headerName:"Имя",compute:({last_name:e="",first_name:t="",middle_name:a=""})=>[e,t,a].filter((e=>e.length)).join(" ")||"",width:()=>125},{type:St.Compute,isVisible:({payload:{permissions:e}})=>$(e.hasContactNumberPermission,e.hasUsersViewPhoneAndEmailPermission),sortable:!1,compute:({rabochij_telefon:e})=>e||"",field:"rabochij_telefon",headerName:"Рабочий телефон",width:()=>180},{type:St.Compute,sortable:!1,compute:({email:e})=>e||"",isVisible:({payload:{permissions:e}})=>$(e.hasContactEmailPermission,e.hasUsersViewPhoneAndEmailPermission),field:"email",headerName:"Email",width:()=>180},{type:St.Action,headerName:"Действие",sortable:!1,width:()=>100}],ch=[{type:kt.Menu,options:[{action:"update-now"},{action:"resort-action"},{action:"drop-filters"}]}],mh=[{label:"Редактировать",isDisabled:(e,{permissions:t})=>!t.hasUsersUpdatePermission,action:"edit-action"},{label:"В архиве",action:"toggle-archive",icon:Tt,isVisible:({system_is_remove:e})=>$(!e)},{label:"В архиве",action:"toggle-archive",icon:Ft,isVisible:({system_is_remove:e})=>$(!!e)}],uh=()=>window.innerHeight-100,ph=({payload:e})=>{const t=ne(os.userViewService.reloadSubject),{listProps:a}=Xt(os.routerService.locationState,{fallback:os.errorService.handleGlobalError}),i=id();return se(Se,{children:se(Jt,{withSearch:!0,withSingleSort:!0,noInitialFilters:!0,fetchDebounce:$o,title:"Сотрудники",filterLabel:"Фильтры",reloadSubject:t,heightRequest:uh,rowActions:mh,actions:ch,filters:sh,columns:dh,handler:i,onRowAction:async(e,a)=>{"edit-action"===e&&os.routerService.push("/user_edit/".concat(a.id)),"remove-action"===e&&(await os.userViewService.remove(a.id),t.next()),"toggle-archive"===e&&await os.userViewService.toggleArchive(a.id)},onRowClick:e=>{os.routerService.push("/user_view/".concat(e.id))},selectionMode:$t.Multiple,slots:{FilterListSlot:Wt},payload:e,...a})})},yh=[{id:"common",element:ph,isActive:e=>cs(["/user"],e),isAvailable:()=>!1},{id:"common",element:ph,isActive:e=>cs(["/user_common"],e),isAvailable:()=>!1},{id:"archive",element:({payload:e})=>{const t=ne(os.userViewService.reloadSubject),{listProps:a}=Xt(os.routerService.locationState,{fallback:os.errorService.handleGlobalError}),i=id();return se(Se,{children:se(Jt,{withSearch:!0,withSingleSort:!0,noInitialFilters:!0,fetchDebounce:$o,title:"Сотрудники",filterLabel:"Фильтры",reloadSubject:t,heightRequest:rh,rowActions:lh,actions:oh,filters:ah,columns:ih,handler:i,onRowAction:async(e,a)=>{"edit-action"===e&&os.routerService.push("/user_edit/".concat(a.id)),"remove-action"===e&&(await os.userViewService.remove(a.id),t.next()),"toggle-archive"===e&&await os.userViewService.toggleArchive(a.id)},onRowClick:e=>{os.routerService.push("/user_view/".concat(e.id))},selectionMode:$t.Multiple,slots:{FilterListSlot:Wt},payload:()=>({...e,_archive:!0}),...a})})},isActive:e=>cs(["/user_archive"],e),isAvailable:()=>!1}],hh=Nn()((e=>({root:{alignItems:"center",display:"flex"},avatar:{height:64,marginRight:e.spacing(2),width:64},avatarWrapper:{height:"100%",minWidth:60},content:{width:"100%"}}))),bh=oe.createLoader(24),vh=({readonly:e,avatar:t,email:a,onChange:i})=>{const{classes:o}=hh();return se(me,{className:o.root,children:[se(me,{className:o.avatarWrapper,children:se(ye,{payload:t,Loader:bh,children:async e=>{const t=e?await os.appwriteService.getImageURL(e):void 0;return se(_t,{alt:a,src:t,className:o.avatar})}})}),se("div",{className:o.content,children:[se(Li,{container:!0,spacing:1,children:[se(Li,{item:!0,children:se(ot,{disabled:e,color:"primary",onClick:async()=>{const e=await Ti("image/jpeg, image/png");if(e){const t=await os.appwriteService.uploadFile(e);i(t)}},size:"small",type:"button",variant:"outlined",children:"Выбрать фото"})}),se(Li,{item:!0,children:se(Dt,{disabled:!t||e,onClick:()=>i(null),color:"primary",size:"small",type:"button",variant:"text",children:"Удалить"})}),se(Li,{item:!0,xs:!0})]}),se(Ae,{color:"textSecondary",variant:"caption",children:"Размер: 200x200, максимальный размер файла: 5Мб"})]})]})},_h=[{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Box,sx:{display:"grid",gridTemplateColumns:"1fr auto"},fields:[{type:o.Component,element:({readonly:e,avatar:t,email:a,onChange:i})=>se(vh,{avatar:t,email:a,readonly:e,onChange:e=>i({avatar:e})})},{type:o.Switch,fieldBottomMargin:"0",name:"active",title:"Активация"}]}]},{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Typography,typoVariant:"h6",placeholder:"Основные данные"},{type:o.Text,name:"last_name",title:"Фамилия",outlined:!1,isInvalid:({last_name:e})=>e?null:"Необходимо заполнить поле"},{type:o.Text,name:"first_name",title:"Имя",outlined:!1,isInvalid:({first_name:e})=>e?null:"Необходимо заполнить поле"},{type:o.Text,name:"middle_name",title:"Отчество",outlined:!1},{type:o.Group,fields:[{type:o.Group,columns:"6",fields:[{type:o.Component,element:()=>se(Ae,{children:"Пол"})},{type:o.Group,child:{type:o.Box,sx:{display:"grid",gridTemplateColumns:"auto auto 1fr"},fields:[{type:o.Radio,name:"pol",radioValue:"м",title:"Мужской"},{type:o.Radio,name:"pol",radioValue:"ж",title:"Женский"}]}},{type:o.Group,columns:"12",fields:[{type:o.Date,fieldRightMargin:"4",columns:"6",outlined:!1,name:"data_rozhdeniya",title:"Дата рождения"},{type:o.Date,fieldRightMargin:"4",columns:"6",outlined:!1,name:"data_trudoustrojstva",title:"Дата трудоустройства"},{type:o.Text,fieldRightMargin:"4",columns:"6",outlined:!1,name:"email",title:"Email",placeholder:"Добавить рабочий email"},{type:o.Text,fieldRightMargin:"4",columns:"6",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"rabochij_telefon",title:"Рабочий телефон",placeholder:"Добавить номер"}]}]}]}]},{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Typography,typoVariant:"h6",placeholder:"Дополнительный телефон"},{type:o.Text,columns:"6",outlined:!1,inputFormatterAllowed:/^[0-9]/,inputFormatterTemplate:"+000000000000000",name:"lichnyj_nomer",title:"Личный номер"}]},{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Typography,typoVariant:"h6",placeholder:"Статус"},{type:o.Combo,columns:"6",outlined:!1,name:"ofis",title:"Офис",itemList:[]},{type:o.Combo,isDisabled:(e,{permissions:t})=>!t.hasUsersAccessLevelsPermission,columns:"6",outlined:!1,isInvalid:({user_role:e})=>e?null:"Необходимо заполнить поле",itemList:async()=>{const e=await os.dictService.getUserRoles();return Object.keys(e)},tr:async e=>{const t=await os.dictService.getUserRoles();return h.get(t,e)||e},name:"user_role",title:"Роль"},{type:o.Combo,columns:"6",outlined:!1,name:"filial",title:"Филиал",itemList:[]},{type:o.Text,columns:"6",outlined:!1,name:"dolzhnost",title:"Должность"},{type:o.Combo,columns:"6",outlined:!1,name:"otdel",title:"Отдел",itemList:[]},{type:o.Combo,columns:"6",outlined:!1,name:"status_sotrudnika",title:"Статус сотрудника",itemList:["Новый","В штате","Вне штата","Не работает","Уволен"]},{type:o.Group,columns:"6",fieldRightMargin:"0",fieldBottomMargin:"0",child:{type:o.Div,style:{display:"grid",gridTemplateColumns:"auto auto 1fr"},fields:[{type:o.Checkbox,name:"nachalnik_otdela",title:"Начальник отдела"}]}}]}];window.user_fields=_h;const gh=[{type:Ee.Link,isVisible:()=>!!os.routerService.previousPath,action:"list-action",label:se(fe,{sx:{display:"block"}})},{type:Ee.Link,action:"list-action",label:"Сотрудники"},{type:Ee.Link,action:"list-action",label:"Редактирование общей информации сотрудника"},{type:Ee.Button,isDisabled:({hasChanged:e})=>!e,action:"save-action",label:"Сохранить"}],fh=Nn()((e=>({root:{alignItems:"center",display:"flex"},avatar:{height:64,marginRight:e.spacing(2),width:64},avatarWrapper:{height:"100%",minWidth:60},content:{width:"100%"}}))),kh=oe.createLoader(24),wh=({readonly:e,avatar:t,email:a,onChange:i})=>{const{classes:o}=fh();return se(me,{className:o.root,children:[se(me,{className:o.avatarWrapper,children:se(ye,{payload:t,Loader:kh,children:async e=>{const t=e?await os.appwriteService.getImageURL(e):void 0;return se(_t,{alt:a,src:t,className:o.avatar})}})}),se("div",{className:o.content,children:[se(Li,{container:!0,spacing:1,children:[se(Li,{item:!0,children:se(ot,{disabled:e,color:"primary",onClick:async()=>{const e=await Ti("image/jpeg, image/png");if(e){const t=await os.appwriteService.uploadFile(e);i(t)}},size:"small",type:"button",variant:"outlined",children:"Выбрать фото"})}),se(Li,{item:!0,children:se(Dt,{disabled:!t||e,onClick:()=>i(null),color:"primary",size:"small",type:"button",variant:"text",children:"Удалить"})}),se(Li,{item:!0,xs:!0})]}),se(Ae,{color:"textSecondary",variant:"caption",children:"Размер: 200x200, максимальный размер файла: 5Мб"})]})]})},Sh=[{type:o.Paper,fieldBottomMargin:"1",fields:[{type:o.Box,sx:{display:"grid",gridTemplateColumns:"1fr auto"},fields:[{type:o.Component,element:({readonly:e,avatar:t,email:a,onChange:i})=>se(wh,{avatar:t,email:a,readonly:e,onChange:e=>i({avatar:e})})},{type:o.Switch,fieldBottomMargin:"0",name:"active",title:"Активация"}]}]},{type:o.Paper,isVisible:e=>ys(e,"first_name","last_name","middle_name"),fieldBottomMargin:"1",fields:[{type:o.Typography,typoVariant:"h6",placeholder:"Личная информация"},{type:o.Text,isVisible:e=>ys(e,"last_name"),name:"last_name",title:"Фамилия",outlined:!1,isInvalid:({last_name:e})=>e?null:"Необходимо заполнить поле"},{type:o.Text,isVisible:e=>ys(e,"first_name"),name:"first_name",title:"Имя",outlined:!1,isInvalid:({first_name:e})=>e?null:"Необходимо заполнить поле"},{type:o.Text,isVisible:e=>ys(e,"middle_name"),name:"middle_name",title:"Отчество",outlined:!1},{type:o.Group,isVisible:e=>ys(e,"pol","data_rozhdeniya","data_trudoustrojstva","email","rabochij_telefon"),fields:[{type:o.Group,isVisible:e=>ys(e,"pol"),columns:"6",fields:[{type:o.Component,element:()=>se(Ae,{children:"Пол"})},{type:o.Group,child:{type:o.Box,sx:{display:"grid",gridTemplateColumns:"auto auto 1fr"},fields:[{type:o.Radio,isVisible:e=>ys(e,"pol"),name:"pol",radioValue:"м",title:"Мужской"},{type:o.Radio,isVisible:e=>ys(e,"pol"),name:"pol",radioValue:"ж",title:"Женский"}]}},{type:o.Group,columns:"12",fields:[{type:o.Text,isVisible:e=>ys(e,"data_rozhdeniya"),fieldRightMargin:"4",columns:"6",outlined:!1,name:"data_rozhdeniya",title:"Дата рождения"},{type:o.Text,isVisible:e=>ys(e,"data_trudoustrojstva"),fieldRightMargin:"4",columns:"6",outlined:!1,name:"data_trudoustrojstva",title:"Дата трудоустройства"},{type:o.Text,features:["hasUsersViewPhoneAndEmailPermission"],isVisible:e=>ys(e,"email"),fieldRightMargin:"4",columns:"6",outlined:!1,name:"email",title:"Email",placeholder:"Добавить рабочий email"},{type:o.Text,features:["hasUsersViewPhoneAndEmailPermission"],isVisible:e=>ys(e,"rabochij_telefon"),fieldRightMargin:"4",columns:"6",outlined:!1,name:"rabochij_telefon",title:"Рабочий телефон",placeholder:"Добавить номер"}]}]}]}]},{type:o.Paper,features:["hasUsersViewPhoneAndEmailPermission"],isVisible:e=>ys(e,"lichnyj_nomer"),fieldBottomMargin:"1",fields:[{type:o.Typography,typoVariant:"h6",placeholder:"Дополнительный телефон"},{type:o.Text,isVisible:e=>ys(e,"lichnyj_nomer"),columns:"6",outlined:!1,name:"lichnyj_nomer",title:"Личный номер"}]},{type:o.Paper,isVisible:e=>ys(e,"ofis","user_role","filial","dolzhnost","otdel","status_sotrudnika","nachalnik_otdela"),fieldBottomMargin:"1",fields:[{type:o.Typography,typoVariant:"h6",placeholder:"Статус"},{type:o.Text,isVisible:e=>ys(e,"ofis"),columns:"6",outlined:!1,name:"ofis",title:"Офис"},{type:o.Combo,isVisible:e=>ys(e,"user_role"),columns:"6",outlined:!1,isInvalid:({user_role:e})=>e?null:"Необходимо заполнить поле",itemList:async()=>{const e=await os.dictService.getUserRoles();return Object.keys(e)},tr:async e=>{const t=await os.dictService.getUserRoles();return h.get(t,e)||e},name:"user_role",title:"Роль"},{type:o.Text,isVisible:e=>ys(e,"filial"),columns:"6",outlined:!1,name:"filial",title:"Филиал"},{type:o.Text,isVisible:e=>ys(e,"dolzhnost"),columns:"6",outlined:!1,name:"dolzhnost",title:"Должность"},{type:o.Text,isVisible:e=>ys(e,"otdel"),columns:"6",outlined:!1,name:"otdel",title:"Отдел"},{type:o.Text,isVisible:e=>ys(e,"status_sotrudnika"),columns:"6",outlined:!1,name:"status_sotrudnika",title:"Статус сотрудника"},{type:o.Component,element:({nachalnik_otdela:e})=>se("div",{children:se(me,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",gap:1},children:e&&se(fa,{label:"Начальник отдела"})})})}]}],zh=[{type:Ee.Link,action:"list-action",label:"Сотрудники"},{type:Ee.Link,action:"list-action",label:"Общая информация сотрудника"},{type:Ee.Button,isDisabled:({payload:{permissions:e}})=>!e.hasUsersUpdatePermission,action:"edit-action",label:"Редактировать"}],xh=[{id:"list",element:({payload:e})=>se(Zt,{history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1),routes:yh,payload:e}),isActive:e=>cs(["/user","/user_common","/user_archive"],e),isAvailable:()=>!1},{id:"user",element:sp((()=>{const e=rs("id");os.routerService.push("/user_edit/".concat(e,"/user"))})),isActive:e=>cs(["/user_edit/:id"],e)},{id:"user",element:({payload:e,onChange:t,formState:a,data:i,beginSave:o})=>se(Se,{children:[se($e,{onAction:e=>{"list-action"===e&&os.routerService.back("/user"),"save-action"===e&&o()},items:gh,payload:a}),se(ss,{}),se(Hy,{payload:e,mode:e.menuMode,children:se(Ge,{dirty:!0,handler:()=>i,fields:_h,payload:e,features:e.permissions,onChange:t})}),se(Ke,{})]}),isActive:e=>cs(["/user_edit/:id/user"],e)},{id:"files",element:({formState:e,onChange:t,beginSave:a,data:i,payload:o})=>{const{handleLoadStart:l,handleLoadEnd:r}=Oe({history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)});return se(Se,{children:[se($e,{items:Qy,onAction:e=>{"list-action"===e&&os.routerService.back("/user"),"save-action"===e&&a()},payload:e}),se(ss,{}),se(Hy,{payload:o,mode:o.menuMode,children:[se(et,{sx:{p:1},children:se(ut,{accept:"*",multiple:!0,items:i,tr:async e=>await os.appwriteService.tryReadFileName(e)||e,fallback:os.errorService.handleGlobalError,onClick:async e=>{const t=await os.appwriteService.getFileURL(e),a=await os.appwriteService.readFileName(e);pt(t,a)},onUpload:e=>os.appwriteService.uploadFile(e),onChange:async e=>{t(e)},onLoadStart:l,onLoadEnd:r})}),se(Ke,{})]})]})},isActive:e=>cs(["/user_edit/:id/files"],e)},{id:"additional_info",element:({payload:e,onChange:t,formState:a,data:i,beginSave:o})=>se(Se,{children:[se($e,{onAction:e=>{"user-list-action"===e&&os.routerService.back("/user"),"user-save-action"===e&&o()},items:Wy,payload:a}),se(ss,{}),se(Hy,{payload:e,mode:e.menuMode,children:se(Ge,{dirty:!0,handler:()=>i,fields:Uy,features:e.permissions,onChange:t})}),se(Ke,{})]}),isActive:e=>cs(["/user_edit/:id/additional_info"],e)},{id:"features",element:({beginSave:e,data:t,formState:a,payload:i,onChange:o})=>se(Se,{children:[se($e,{items:Jy,onAction:t=>{"user-list-action"===t&&os.routerService.back("/user"),"user-save-action"===t&&e()},payload:a}),se(ss,{}),se(Hy,{payload:i,mode:i.menuMode,children:[se(Ci,{expandAll:!0,handler:()=>t.reduce(((e,t)=>({...e,[t]:!0})),{}),features:_y,change:(e,t)=>{if(e&&!t){const t=Object.entries(e).filter((([e,t])=>!!t)).map((([e])=>e));o(t)}}}),se(Ke,{})]})]}),isActive:e=>cs(["/user_edit/:id/features"],e)},{id:"user",element:sp((()=>{const e=rs("id");os.routerService.push("/user_view/".concat(e,"/user"))})),isActive:e=>cs(["/user_view/:id"],e)},{id:"user",element:({params:{id:e},payload:t,onChange:a,formState:i,data:o})=>{const l=We(o),{pickData:r,render:n}=He({AfterTitle:({onClose:e})=>se(_e,{size:"small",onClick:e,children:se(Ue,{})}),fields:_h,payload:t,features:t.permissions,outlinePaper:!0,handler:async()=>await os.userViewService.tryRead(e),fullScreen:!0,title:"Редактировать",onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1),onSubmit:async t=>{let a=!0;try{t&&await os.userViewService.update(e,t)}catch(i){a=!1;const e=xn(i);return os.alertService.notify(e),!1}finally{return a}},submitLabel:"Сохранить"});return se(Se,{children:[se($e,{onAction:e=>{"list-action"===e&&os.routerService.push("/user"),"edit-action"===e&&r()},items:zh,payload:i}),se(ss,{}),se(Yy,{payload:t,mode:t.menuMode,children:se(Ge,{dirty:!0,readonly:!0,handler:()=>o,fields:Sh,features:t.permissions,onChange:a,payload:t,changeSubject:l})}),se(Ke,{}),n()]})},isActive:e=>cs(["/user_view/:id/user"],e)},{id:"additional_info",element:({params:{id:e},payload:t,onChange:a,formState:i,data:o})=>{const l=We(o),{pickData:r,render:n}=He({AfterTitle:({onClose:e})=>se(_e,{size:"small",onClick:e,children:se(Ue,{})}),fields:Uy,payload:t,features:t.permissions,outlinePaper:!0,handler:async()=>await os.userViewService.tryRead(e),fullScreen:!0,title:"Редактировать",onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1),onSubmit:async t=>{let a=!0;try{if(t){if(t.user_role){const e=new Set(t.user_features||[]);await Promise.all(t.user_role.map((async t=>{const a=await os.roleViewService.tryRead(t);if(!a)return;const{role_features:i}=a;i&&i.forEach((t=>e.add(t)))}))),t.user_features=[...e]}await os.userViewService.update(e,t)}}catch(i){a=!1;const e=xn(i);return os.alertService.notify(e),!1}finally{return a}},submitLabel:"Сохранить"});return se(Se,{children:[se($e,{onAction:e=>{"list-action"===e&&os.routerService.push("/back"),"edit-action"===e&&r()},items:Xy,payload:i}),se(ss,{}),se(Yy,{payload:t,mode:t.menuMode,children:se(Ge,{dirty:!0,readonly:!0,handler:()=>o,fields:Ky,features:t.permissions,onChange:a,payload:t,changeSubject:l})}),se(Ke,{}),n()]})},isActive:e=>$(cs(["/user_view/:id/additional_info"],e))},{id:"files",element:({params:{id:e},formState:t,onChange:a,data:i,payload:o})=>{const{render:l,pickFiles:r}=Ms({data:i,onSubmit:async t=>{await os.userViewService.update(e,{user_files:t})}});return se(Se,{children:[se($e,{items:eh,onAction:e=>{"list-action"===e&&os.routerService.push("/user"),"edit-action"===e&&r()},payload:t}),se(ss,{}),se(Yy,{payload:o,mode:o.menuMode,children:[se(et,{sx:{p:1},children:se(ut,{accept:"*",multiple:!0,disabled:!0,items:i,tr:async e=>await os.appwriteService.tryReadFileName(e)||e,fallback:os.errorService.handleGlobalError,onClick:async e=>{const t=await os.appwriteService.getFileURL(e),a=await os.appwriteService.readFileName(e);pt(t,a)},onUpload:e=>os.appwriteService.uploadFile(e),onChange:async e=>{a(e)}})}),se(Ke,{})]}),l()]})},isActive:e=>cs(["/user_view/:id/files"],e)},{id:"features",element:({params:{id:e},data:t,formState:a,payload:i})=>{const o=We(t),l=ne();re.useEffect((()=>o.subscribe((e=>{var t;const a=e.reduce(((e,t)=>({...e,[t]:!0})),{});_y.forEach((({children:e})=>e.forEach((({name:e})=>{a[e]||(a[e]=!1)})))),null==(t=i.features)||t.forEach((e=>{a[e]=!0})),l.next(a)}))),[]);const{render:r,pickData:n}=((e,{data:t,onSubmit:a,onChange:i,fullScreen:o,expandAll:l})=>{const{handleLoadStart:r,handleLoadEnd:n}=Oe({history:os.routerService,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1)});return Vi({expandAll:l,features:e,handler:()=>t.reduce(((e,t)=>({...e,[t]:!0})),{}),fullScreen:o,fallback:os.errorService.handleGlobalError,onLoadStart:r,onLoadEnd:n,onSubmit:async(e,t)=>{if(e&&!t){const t=Object.entries(e).filter((([e,t])=>!!t)).map((([e])=>e));await(a&&a(t))}return!0},onChange:(e,t)=>{if(e&&!t){const t=Object.entries(e).filter((([e,t])=>!!t)).map((([e])=>e));i&&i(t)}},submitLabel:"Сохранить"})})(_y,{expandAll:!0,data:t,fullScreen:!0,onSubmit:async t=>{await os.userViewService.update(e,{user_features:t})}});return se(Se,{children:[se($e,{items:Zy,onAction:e=>{"list-action"===e&&os.routerService.push("/user"),"edit-action"===e&&n()},payload:a}),se(ss,{}),se(Yy,{payload:i,mode:i.menuMode,children:[se(ye,{payload:e,children:async e=>{const{user_role:t}=await os.userViewService.read(e);if(!(null==t?void 0:t.length))return null;const a=await os.roleViewService.tryRead(t[0]);if(!a)return;const{title:i}=a;return se(et,{sx:{width:"100%",p:1,pt:2,pb:2,mb:1},children:se(Ae,{variant:"subtitle2",children:["Список бизнес-функций расширен ролью сотрудника"," ",se(Ht,{href:"#",onClick:()=>Z("/settings/roles"),children:i})]})})}}),se(Ci,{readonly:!0,expandAll:!0,handler:()=>i.features.reduce(((e,t)=>({...e,[t]:!0})),{}),changeSubject:l,features:_y}),se(Ke,{})]}),r()]})},isActive:e=>cs(["/user_view/:id/features"],e)}],Ah=({id:e=""})=>{const t=async t=>{let a=!0;try{const a=h.get(t,"user")||{},i=h.get(t,"features")||[],o=h.get(t,"files")||[];h.set(a,"user_files",o),h.set(a,"user_features",i),await os.userViewService.update(e,a),os.alertService.notify("Изменения сохранены")}catch(i){a=!1;const e=xn(i);os.alertService.notify(e)}finally{return a}},a=ne();return re.useEffect((()=>os.userViewService.updateSubject.subscribe((([e,t])=>{const i=rs("id");i&&i===e&&(a.next(["user",t]),a.next(["files",(null==t?void 0:t.user_files)||[]]),a.next(["features",(null==t?void 0:t.user_features)||[]]),a.next(["additional_info",t]))}))),[]),se(Ka,{state:async()=>[await os.userViewService.tryRead(e),await os.settingsViewService.getMasterDetailMode(),await os.permissionService.getPermissions(),await os.featureService.getFeaturesByUserId(e),await os.featureService.getAccessLevel()],reloadSubject:os.layoutService.reloadOutletSubject,fallback:os.errorService.handleGlobalError,children:async([i,o,l,r,n])=>se(Zt,{changeSubject:a,history:os.routerService,waitForChangesDelay:Go,onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1),routes:xh,params:{id:e},initialData:{user:i,files:(null==i?void 0:i.user_files)||[],features:(null==i?void 0:i.user_features)||[],additional_info:i},payload:()=>({menuMode:o,permissions:l,features:r,accessLevel:n}),onChange:(e,t,i)=>{var o,l;t||"user"===i&&(a.next(["files",(null==(o=e.user)?void 0:o.user_files)||[]]),a.next(["features",(null==(l=e.user)?void 0:l.user_features)||[]]))},onSubmit:t})})},Th=[{path:"/error_page",element:()=>{const{classes:e}=ny();return se(zi,{children:se(me,{className:e.root,children:se(Si,{className:e.reveal,children:se(et,{className:e.container,children:se(we,{direction:"column",gap:"15px",children:[se(ry,{}),se("span",{children:"Во время работы приложения произошла ошибка. Информация об ошибке передана в отдел разработки"}),se(Dt,{variant:"contained",onClick:M,children:"Перезагрузить страницу"})]})})})})})}},{path:"/login_page",element:()=>se(me,{sx:{position:"fixed",top:0,left:0,height:"100vh",width:"100vw",background:"whitesmoke",display:"flex",alignItems:"center",justifyContent:"center",zIndex:99999},children:se(et,{component:"form",sx:{p:2,marginTop:"-5vh",maxWidth:"325px",minWidth:"325px"},onSubmit:e=>(e.preventDefault(),!1),children:[se(Ae,{variant:"h3",sx:{color:e=>e.palette.primary.main,mb:3,textAlign:"center",fontWeight:"bold"},children:"RealEstate"}),se(me,{sx:{display:"flex",flexDirection:"column",gap:"15px"},children:[se(ta,{required:!0,name:"email",fullWidth:!0,label:"Email",placeholder:"Email",helperText:"Email",type:"email"}),se(ta,{required:!0,fullWidth:!0,name:"password",label:"Пароль",placeholder:"Пароль",helperText:"Пароль",type:"password"})]}),se(me,{sx:{display:"flex",flexDirection:"row-reverse",mb:2},children:se(Ht,{href:"#",onClick:()=>os.routerService.push("/register_page"),children:"Регистрация"})}),se(ot,{onClick:async({currentTarget:e})=>{await(async e=>{const t=new FormData(e),a=t.get("email"),i=t.get("password");if(!a)return void os.alertService.notify("Введите email");if(!i)return void os.alertService.notify("Введите пароль");await os.authService.login({email:a.toString(),password:i.toString()})&&os.routerService.push("/profile")})(e.closest("form"))},variant:"contained",type:"submit",fullWidth:!0,children:"Войти"})]})})},{path:"/register_page",element:()=>se(me,{sx:{position:"fixed",top:0,left:0,height:"100vh",width:"100vw",background:"whitesmoke",display:"flex",alignItems:"center",justifyContent:"center",zIndex:99999},children:se(et,{component:"form",sx:{p:2,marginTop:"-5vh",maxWidth:"325px",minWidth:"325px"},onSubmit:e=>(e.preventDefault(),!1),children:[se(Ae,{variant:"h3",sx:{color:e=>e.palette.primary.main,mb:3,textAlign:"center",fontWeight:"bold"},children:"RealEstate"}),se(me,{sx:{display:"flex",flexDirection:"column",gap:"15px"},children:[se(ta,{required:!0,name:"email",fullWidth:!0,label:"Email",placeholder:"Email",helperText:"Email",type:"email"}),se(ta,{required:!0,fullWidth:!0,name:"password",label:"Пароль",placeholder:"Пароль",helperText:"Пароль",type:"password"}),se(ta,{required:!0,fullWidth:!0,name:"confirm",label:"Повторите пароль",placeholder:"Повторите пароль",helperText:"Повторите пароль",type:"password"})]}),se(me,{sx:{display:"flex",flexDirection:"row-reverse",mb:2},children:se(Ht,{href:"#",onClick:()=>os.routerService.push("/login_page"),children:"Вход"})}),se(ot,{onClick:async({currentTarget:e})=>{await(async e=>{const t=new FormData(e),a=t.get("email"),i=t.get("password"),o=t.get("confirm");if(!a)return void os.alertService.notify("Введите email");if(!i)return void os.alertService.notify("Введите пароль");if(i!==o)return void os.alertService.notify("Пароли не совпадают");await os.authService.register({email:a.toString(),password:i.toString()})&&os.routerService.push("/profile")})(e.closest("form"))},variant:"contained",type:"submit",fullWidth:!0,children:"Регистрация"})]})})},{path:"/inactive_page",element:()=>{const{classes:e}=sy();return se(zi,{children:se(me,{className:e.root,children:se(Si,{className:e.reveal,children:se(et,{className:e.container,children:se(we,{direction:"column",gap:"15px",children:[se(ry,{}),se("span",{children:"Ожидание активации профиля. Попросите Администратора активировать ваш аккаунт"}),se(Dt,{variant:"contained",onClick:M,children:"Перезагрузить страницу"})]})})})})})}}],Fh=[{path:"/dashboard",sideMenu:"root.global.dashboard",element:()=>se(Ka,{state:async()=>[await os.settingsViewService.getMasterDetailMode(),await os.permissionService.getPermissions(),await os.featureService.getAccessLevel()],reloadSubject:os.layoutService.reloadOutletSubject,fallback:os.errorService.handleGlobalError,children:async([e,t,a])=>se(Zt,{history:os.routerService,routes:$p,payload:()=>({menuMode:e,permissions:t,accessLevel:a})})})},{path:"/apartment",sideMenu:"root.global.apartment",element:Xm},{path:"/apartment_rent",sideMenu:"root.global.apartment.rent",element:Xm},{path:"/apartment_sell",sideMenu:"root.global.apartment.sell",element:Xm},{path:"/apartment_archive",sideMenu:"root.global.apartment.archive.archive",element:Xm},{path:"/apartment_remove",sideMenu:"root.global.apartment.archive.remove",element:Xm},{path:"/apartment",sideMenu:"root.global.apartment",element:Xm},{path:"/apartment/create",sideMenu:"root.global.apartment",element:Xm},{path:"/apartment_edit/:id",sideMenu:"root.global.apartment",element:Xm},{path:"/apartment_edit/:id/object",sideMenu:"root.global.apartment",element:Xm},{path:"/apartment_edit/:id/owner_contact",sideMenu:"root.global.apartment",element:Xm},{path:"/apartment_edit/:id/documents",sideMenu:"root.global.apartment",element:Xm},{path:"/apartment_view/:id",sideMenu:"root.global.apartment",element:Xm},{path:"/apartment_view/:id/object",sideMenu:"root.global.apartment",element:Xm},{path:"/apartment_view/:id/owner_contact",sideMenu:"root.global.apartment",element:Xm},{path:"/apartment_view/:id/documents",sideMenu:"root.global.apartment",element:Xm},{path:"/apartment_view/:id/history",sideMenu:"root.global.apartment",element:Xm},{path:"/apartment_view/:id/tasks",sideMenu:"root.global.apartment",element:Xm},{path:"/apartment_view/:id/advertising",sideMenu:"root.global.apartment",element:Xm},{path:"/apartment_view/:id/service_comment",sideMenu:"root.global.apartment",element:Xm},{path:"/bid",sideMenu:"root.global.bid",element:Eu},{path:"/bid_rent",sideMenu:"root.global.bid.rent",element:Eu},{path:"/bid_sell",sideMenu:"root.global.bid.sell",element:Eu},{path:"/bid_archive",sideMenu:"root.global.bid.archive",element:Eu},{path:"/bid/create",sideMenu:"root.global.bid",element:Eu},{path:"/bid_edit/create",sideMenu:"root.global.bid",element:Eu},{path:"/bid_edit/create/parameter",sideMenu:"root.global.bid",element:Eu},{path:"/bid_edit/create/documents",sideMenu:"root.global.bid",element:Eu},{path:"/bid_edit/create/contact",sideMenu:"root.global.bid",element:Eu},{path:"/bid_edit/:id",sideMenu:"root.global.bid",element:Eu},{path:"/bid_edit/:id/parameter",sideMenu:"root.global.bid",element:Eu},{path:"/bid_edit/:id/documents",sideMenu:"root.global.bid",element:Eu},{path:"/bid_edit/:id/contact",sideMenu:"root.global.bid",element:Eu},{path:"/bid_view/:id",sideMenu:"root.global.bid",element:Eu},{path:"/bid_view/:id/parameter",sideMenu:"root.global.bid",element:Eu},{path:"/bid_view/:id/history",sideMenu:"root.global.bid",element:Eu},{path:"/bid_view/:id/documents",sideMenu:"root.global.bid",element:Eu},{path:"/bid_view/:id/contact",sideMenu:"root.global.bid",element:Eu},{path:"/bid_view/:id/tasks",sideMenu:"root.global.bid",element:Eu},{path:"/bid_view/:id/service_comment",sideMenu:"root.global.bid",element:Eu},{path:"/deal",sideMenu:"root.global.deal",element:ly},{path:"/deal_all",sideMenu:"root.global.deal.all",element:ly},{path:"/deal_mine",sideMenu:"root.global.deal.mine",element:ly},{path:"/task",sideMenu:"root.global.task",element:Ey},{path:"/task/:id",sideMenu:"root.global.task",element:Ey},{path:"/task_mine",sideMenu:"root.global.task.mine",element:Ey},{path:"/task_all",sideMenu:"root.global.task.all",element:Ey},{path:"/contact",sideMenu:"root.global.contact",element:mp},{path:"/contact/create",sideMenu:"root.global.contact",element:mp},{path:"/contact_edit/create",sideMenu:"root.global.contact",element:mp},{path:"/contact_edit/:id",sideMenu:"root.global.contact",element:mp},{path:"/contact_view/:id",sideMenu:"root.global.contact",element:mp},{path:"/contact_view/:id/contact",sideMenu:"root.global.contact",element:mp},{path:"/contact_view/:id/tasks",sideMenu:"root.global.contact",element:mp},{path:"/contact_view/:id/history",sideMenu:"root.global.contact",element:mp},{path:"/user",sideMenu:"root.global.user",element:Ah},{path:"/user_common",sideMenu:"root.global.user.common",element:Ah},{path:"/user_archive",sideMenu:"root.global.user.archive",element:Ah},{path:"/user_view/:id",sideMenu:"root.global.user",element:Ah},{path:"/user_view/:id/user",sideMenu:"root.global.user",element:Ah},{path:"/user_view/:id/files",sideMenu:"root.global.user",element:Ah},{path:"/user_view/:id/features",sideMenu:"root.global.user",element:Ah},{path:"/user_view/:id/additional_info",sideMenu:"root.global.user",element:Ah},{path:"/user_edit/:id",sideMenu:"root.global.user",element:Ah},{path:"/user_edit/:id/user",sideMenu:"root.global.user",element:Ah},{path:"/user_edit/:id/files",sideMenu:"root.global.user",element:Ah},{path:"/user_edit/:id/features",sideMenu:"root.global.user",element:Ah},{path:"/user_edit/:id/additional_info",sideMenu:"root.global.user",element:Ah},{path:"/settings",sideMenu:"root.global.settings",element:xy},{path:"/settings/common",sideMenu:"root.global.settings",element:xy},{path:"/settings/roles",sideMenu:"root.global.settings",element:xy},{path:"/settings/integration",sideMenu:"root.global.settings",element:xy}],Ch=[{path:"/",sideMenu:"root.global.user",element:sp((()=>{os.routerService.push("/dashboard")}))},...Fh,...Th],Vh=e=>{ns(),console.log({path:e}),"root.global.settings.common"===e&&os.routerService.push("/settings/common"),"root.global.settings.roles"===e&&os.routerService.push("/settings/roles"),"root.global.settings.integration"===e&&os.routerService.push("/settings/integration")},Lh=e=>{"root.global.dashboard"===e&&os.routerService.push("/dashboard"),"root.global.user"===e&&os.routerService.push("/user"),"root.global.user.common"===e&&os.routerService.push("/user_common"),"root.global.user.archive"===e&&os.routerService.push("/user_archive"),"root.global.apartment"===e&&os.routerService.push("/apartment"),"root.global.apartment.rent"===e&&os.routerService.push("/apartment_rent"),"root.global.apartment.sell"===e&&os.routerService.push("/apartment_sell"),"root.global.apartment.archive"===e&&os.routerService.push("/apartment_archive"),"root.global.apartment.archive.archive"===e&&os.routerService.push("/apartment_archive"),"root.global.apartment.archive.remove"===e&&os.routerService.push("/apartment_remove"),"root.global.bid"===e&&os.routerService.push("/bid"),"root.global.bid.rent"===e&&os.routerService.push("/bid_rent"),"root.global.bid.sell"===e&&os.routerService.push("/bid_sell"),"root.global.bid.archive"===e&&os.routerService.push("/bid_archive"),"root.global.deal"===e&&os.routerService.push("/deal"),"root.global.deal.all"===e&&os.routerService.push("/deal_all"),"root.global.deal.mine"===e&&os.routerService.push("/deal_mine"),"root.global.task"===e&&os.routerService.push("/task"),"root.global.task.all"===e&&os.routerService.push("/task_all"),"root.global.task.mine"===e&&os.routerService.push("/task_mine"),"root.global.contact"===e&&os.routerService.push("/contact"),"root.global.settings"===e&&os.routerService.push("/settings")},Ih=(()=>{let e=null,t=null;return()=>{const{pathname:a}=os.routerService.location;return e!==a&&(t=je(Ch,os.routerService.location.pathname),e=a),t}})(),Mh={"Refresh manually":"Обновить","Create new row":"Создать новую строку","Change sort order":"Изменить порядок сортировки","Drop filters":"Сбросить фильтры",Filters:"Фильтры",Search:"Поиск","Loading data":"Загрузка данных","Nothing found":"","Not found":"Нет данных","No options":"Нет данных","Drag and drop a file here or click":"Выберите файл",Choose:"Выбрать",Deselect:"Убрать",Green:"Зеленый",Skyblue:"Синий",Yellow:"Желтый",Red:"Красный",Submit:"Применить",Date:"Дата",Time:"Время",Loading:"Загрузка",Required:"Заполнить","The form contains unsaved changes. Continue?":"Форма содержит несохраненные изменения. Продолжить?","The form contains invalid data. Continue?":"Форма содержит неправильно указанные данные. Продолжить?","Are you sure you want to delete this file?":"Вы уверены, что хотите удалить файл?",Confirmation:"Подтверждение",Forbidden:"Нет доступа",Ok:"Ок",Cancel:"Отмена",Remove:"Удалить",Actions:"Действие",Save:"Сохранить","Not chosen":"Не указано","Continue?":"Продолжить",Unset:"Нет данных","Select all":"Выбрать","No tips":"Нет данных","Column configuration":"Отображение колонок","Loading...":"Загрузка","Pick item":"Выберите"};const Bh={"/login_page":{"Sign in":"Войти"},"/register_page":{"Sign in":"Регистрация"}},Dh=(()=>{let e=null,t={};return()=>{const{pathname:a}=os.routerService.location;if(e!==a){const i=Ih();t=Bh[(null==i?void 0:i.path)||"unknown"]||{},e=a}return t}})();function Rh(e){return Dh()[e]||function(e){return Mh[e]||e}(e)}const jh=[()=>{document.querySelectorAll("input").forEach((e=>{e.placeholder&&(e.placeholder=Rh(e.placeholder))}))},()=>{document.querySelectorAll("textarea").forEach((e=>{e.placeholder&&(e.placeholder=Rh(e.placeholder))}))}];document.addEventListener("DOMContentLoaded",(()=>{const e=h.throttle(Ii(jh.map((e=>()=>{e()}))),1,{trailing:!0});new MutationObserver(e).observe(document.body,{childList:!0,subtree:!0})})),Mi.install(Mh,Rh),os.routerService.listen((({action:e})=>{"PUSH"===e&&window.Translate.clear()})),window.self!==window.top&&pt.override(((e,t)=>{var a;null==(a=window.top)||a.postMessage({type:"download-action",url:e,filename:t},"*")})),window.self!==window.top?Z.override((e=>{e.startsWith("/")?os.routerService.push(e):window.open(e)})):Z.override((e=>{e.startsWith("/")?os.routerService.push(e):window.location.href=e})),window.self!==window.top&&Ma.override((e=>{var t;null==(t=window.top)||t.postMessage({type:"copy-action",text:e},"*")})),window.self!==window.top&&M.override((()=>{var e;null==(e=window.top)||e.postMessage({type:"reload-action"},"*")})),window.self!==window.top&&(null==(e=window.top)||e.postMessage({type:"init-action"},"*")),window.getOlxToken=()=>{var e;return null==(e=window.top)||e.postMessage({type:"get-olx-token"},"*"),K.create((e=>(window.addEventListener("message",e),()=>window.removeEventListener("message",e)))).filter((({data:e})=>"type"in e)).filter((({data:e})=>"get-olx-token"===e.type)).map((({data:e})=>e.result)).toPromise()};const qh=1e3;window.migration={updateSystemArea:async()=>{for await(const e of mr(el)){const t=await os.metadataService.getAreaMetadataByApartment(e.$id);console.log("PATCHING APARTMENT ".concat(e.$id),{metadata:t}),await os.appwriteService.databases.updateDocument(Ko.databaseId,el,e.$id,t),await z(qh)}for await(const e of mr(il)){const t=await os.metadataService.getAreaMetadataByBid(e.$id);console.log("PATCHING BID ".concat(e.$id),{metadata:t}),await os.appwriteService.databases.updateDocument(Ko.databaseId,il,e.$id,t),await z(qh)}console.log("DONE")},updateSystemPrice:async()=>{for await(const e of mr(el)){const t=Il(e),a=await os.exchangeService.getApartmentPriceMetadata(t);console.log("PATCHING APARTMENT ".concat(t.$id),{metadata:a}),await os.appwriteService.databases.updateDocument(Ko.databaseId,el,t.$id,a),await z(qh)}for await(const e of mr(il)){const t=Ul(e),a=await os.exchangeService.getBidPriceMetadata(t);console.log("PATCHING BID ".concat(t.$id),{metadata:a}),await os.appwriteService.databases.updateDocument(Ko.databaseId,il,t.$id,a),await z(qh)}console.log("DONE")},updateSystemCreatedBy:async(e=!1)=>{for await(const t of mr(el)){if(t.system_created_by&&!e)continue;const a={system_created_by:os.appwriteService.currentUser.$id};console.log("PATCHING APARTMENT ".concat(t.$id),{metadata:a}),await os.appwriteService.databases.updateDocument(Ko.databaseId,el,t.$id,a),await z(qh)}for await(const t of mr(il)){if(t.system_created_by&&!e)continue;const a={system_created_by:os.appwriteService.currentUser.$id};console.log("PATCHING BID ".concat(t.$id),{metadata:a}),await os.appwriteService.databases.updateDocument(Ko.databaseId,il,t.$id,a),await z(qh)}for await(const t of mr(tl)){if(t.system_created_by&&!e)continue;const a={system_created_by:os.appwriteService.currentUser.$id};console.log("PATCHING CONTACT ".concat(t.$id),{metadata:a}),await os.appwriteService.databases.updateDocument(Ko.databaseId,tl,t.$id,a),await z(qh)}console.log("DONE")},updateUserArchive:async()=>{for await(const e of mr(Jo))"boolean"!=typeof e.system_is_remove&&(console.log("PATCHING USER ".concat(e.$id)),await os.appwriteService.databases.updateDocument(Ko.databaseId,Jo,e.$id,{active:!0,system_is_remove:!1}),await z(qh));console.log("DONE")}},Bi.register({family:"Roboto",src:"https://cdnjs.cloudflare.com/ajax/libs/ink/3.1.10/fonts/Roboto/roboto-regular-webfont.ttf",fontWeight:"normal"}),Bi.register({family:"Roboto",src:"https://cdnjs.cloudflare.com/ajax/libs/ink/3.1.10/fonts/Roboto/roboto-bold-webfont.ttf",fontWeight:"bold"});const Ph=Di((({children:e})=>{const{current:t}=os.alertService;return se(Se,{children:[!!t&&se(Ri,{open:!0,anchorOrigin:{vertical:"bottom",horizontal:"center"},autoHideDuration:5e3,onClose:os.alertService.hideCurrent,sx:{zIndex:9999999},message:t.message},t.key),e]})})),Eh=()=>se(we,{width:"100%",minHeight:"48px",direction:"row",alignItems:"center",justifyContent:"space-between",children:[se(Ae,{sx:{height:42,display:"flex",alignItems:"center",color:"#666",fontWeight:"bold",fontSize:14},variant:"caption",children:"Real Estate APP"}),se(we,{direction:"row",alignItems:"center",children:[se(ji,{sx:{fontSize:18,color:os.previewModeService.previewMode?"#c2c2c2":"#757575"}}),se(Et,{checked:os.previewModeService.previewMode,onClick:os.previewModeService.togglePreviewMode,size:"small"}),se(qi,{sx:{fontSize:18,color:os.previewModeService.previewMode?"#757575":"#c2c2c2"}})]})]}),Nh=({loading:e})=>{const[t,a]=re.useState(0),{execute:i}=Re((async()=>{const e=os.appwriteService.currentUser.$id,{length:t}=await os.notifyViewService.findAllUnreadByUserId(e);a(t)}),{onLoadStart:()=>os.layoutService.setAppbarLoader(!0),onLoadEnd:()=>os.layoutService.setAppbarLoader(!1),fallback:os.errorService.handleGlobalError});return re.useEffect((()=>Be((()=>os.appwriteService.isAuthorized),(()=>{os.appwriteService.isAuthorized&&i()}))),[]),re.useEffect((()=>os.notifyViewService.reloadSubject.debounce(1e3).connect((()=>{os.appwriteService.isAuthorized&&i()}))),[]),se(Ei,{badgeContent:t,color:"info",children:se(Pi,{sx:{color:"white !important",opacity:e?.8:1}})})},Oh=()=>se(oe,{sx:{width:384,height:"calc(100% - 96px)"}}),Hh=Nn()((e=>({list:{pt:1,pb:1,"& > *":{paddingTop:0,paddingBottom:0,"& > *":{paddingTop:0,paddingBottom:0}}},listItemAccient:{background:le(e.palette.getContrastText(e.palette.background.paper),.018)}}))),Uh=()=>{const[e,t]=re.useState(),{classes:a}=Hh(),[i,o]=re.useState(0);return se(Se,{children:[se(Ra,{onClick:async({currentTarget:e})=>{os.appwriteService.isAuthorized&&(await os.notifyViewService.toggleReadAllByUserId(os.appwriteService.currentUser.$id),t(e))},onLoadStart:()=>o((e=>e+1)),onLoadEnd:()=>o((e=>e-1)),color:"inherit",sx:{ml:2},children:se(Nh,{loading:!!i})}),se(oi,{open:!!e,anchorEl:e,onClose:()=>t(null),anchorOrigin:{vertical:"bottom",horizontal:"right"},children:se(rt,{sx:{width:384,height:448},subheader:se(li,{component:Ae,sx:{fontWeight:"bold"},children:"Уведомления"}),children:se(ye,{Loader:Oh,children:async()=>{const e=os.appwriteService.currentUser.$id,t=await os.notifyViewService.findAllByUserId(e);return se(ct,{className:a.list,sx:{width:384,height:"calc(100% - 48px)"},children:t.sort((({$createdAt:e},{$createdAt:t})=>n(e).isBefore(t)?1:-1)).map(((e,t)=>se(ht,{className:ue({[a.listItemAccient]:t%2==0}),disableGutters:!0,children:se(be,{onClick:()=>e.url&&Z(e.url),children:[se(bt,{children:se(_t,{children:se(Ni,{sx:{color:"white",mt:"-2px"}})})}),se(dt,{primary:se(gt,{config:Ds,handler:()=>e.title}),secondary:n(e.$createdAt).format("HH:mm DD/MM/YYYY")}),se(_e,{disableRipple:!0,children:se(Oi,{})})]})},e.$id)))})}})})})]})},Wh=[{action:"logout-action",icon:Hi,label:"Выйти"}],$h=[{id:"global",noHeader:!0,children:[{id:"dashboard",label:"Главная",icon:Ui},{id:"apartment",label:"База объектов",icon:Wi,options:[{id:"rent",icon:$i,label:"Аренда"},{id:"sell",icon:Gi,label:"Продажа"},{id:"archive",icon:Yi,label:"Архив",options:[{id:"archive",icon:Ki,label:"Неактивно"},{id:"remove",icon:Xi,label:"Удалено"}]}]},{id:"bid",label:"Заявки",icon:Ji,options:[{id:"rent",icon:Zi,label:"Аренда"},{id:"sell",icon:Qi,label:"Продажа"},{id:"archive",icon:eo,label:"Архив"}]},{id:"deal",label:"Сделки",icon:to,options:[{id:"all",icon:Qa,label:"Все сделки"},{id:"mine",icon:ao,label:"Мои сделки"}]},{id:"task",label:"Задачи",icon:io,options:[{id:"all",icon:Qa,label:"Все задачи"},{id:"mine",icon:ao,label:"Мои задачи"}]},{id:"contact",label:"Контакты",icon:oo},{id:"user",label:"Сотрудники",icon:lo,options:[{id:"common",icon:ro,label:"Все сотрудники"},{id:"archive",icon:Xi,label:"Архив"}]},{id:"settings",isVisible:async()=>!!(await os.permissionService.getPermissions()).hasSettingsEditPermission,label:"Настройки",icon:no,tabs:[{id:"common",isActive:()=>cs(["/settings","/settings/common"]),label:"Общая информация"},{id:"roles",isActive:()=>cs(["/settings","/settings/roles"]),isDisabled:async()=>!(await os.permissionService.getPermissions()).hasUsersAccessLevelsPermission,label:"Роли сотрудников"},{id:"integration",isActive:()=>cs(["/settings","/settings/integration"]),label:"Интеграция в Telegram"}]}]}],Gh=["/images/dots.svg","/images/cubes.svg","/images/snow.svg","/images/square.svg","/images/triangle.svg","/images/cells.svg"],Yh=()=>{const e=Math.floor(Date.now()/1e3/60);return Gh[e%Gh.length]},Kh=()=>{const[e,t]=re.useState((()=>Yh()));return re.useEffect((()=>K.create((e=>os.routerService.listen(e))).connect((()=>t(Yh())))),[]),se(so,{children:"\n            body {\n                background-position: bottom 8px right 8px;\n                background-size: ".concat("40vmin",', auto, contain;\n                background-repeat: no-repeat;\n                background-image: url("').concat(e,'");\n            }\n        ')})},Xh=()=>se(me,{sx:{position:"fixed",top:0,left:0,right:0,bottom:0,height:"100vh",width:"100vw",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,background:e=>e.palette.background.paper},children:se(po,{})}),Jh=()=>se(Se,{}),Zh=k((async()=>{await yo.prefetch(!0)})),Qh=()=>{os.layoutService.setAppbarLoader(!0)},eb=()=>{os.layoutService.setAppbarLoader(!1)},tb=async e=>{"logout-action"===e&&await os.authService.logout()},ab=Di((()=>se(ht,{children:se(dt,{primary:os.appwriteService.currentUser.email,secondary:os.appwriteService.currentUser.$id})}))),ib=Di((()=>se(me,{sx:{display:{xs:"none",md:"flex"}},children:[se(xt,{condition:async()=>(await os.permissionService.getPermissions()).hasBidCreatePermission,payload:os.appwriteService.isAuthorized,children:se(Dt,{sx:{mr:1},variant:"contained",size:"small",color:"info",onClick:()=>os.routerService.push("/bid/create"),children:"Добавить заявку"})}),se(xt,{condition:async()=>(await os.permissionService.getPermissions()).hasApartmentCreatePermission,payload:os.appwriteService.isAuthorized,children:se(Dt,{variant:"contained",size:"small",color:"info",onClick:()=>os.routerService.push("/apartment/create"),children:"Добавить объект"})}),se(Uh,{})]}))),ob=()=>{const[e,t]=re.useState(Ih()),[a,i]=re.useState(os.routerService.location.pathname),[o,l]=re.useState(os.layoutService.hasAppbarLoader),[r,n]=re.useState(os.layoutService.hasModalLoader),s=re.useMemo((()=>cs(Th.map((({path:e})=>e)))),[a]);return re.useEffect((()=>Be((()=>os.routerService.location.pathname),(()=>{t(Ih())}))),[]),re.useEffect((()=>co((()=>{i(os.routerService.location.pathname)}),{delay:10})),[]),re.useEffect((()=>co((()=>{l(os.layoutService.hasAppbarLoader)}),{delay:10})),[]),re.useEffect((()=>co((()=>{n(os.layoutService.hasModalLoader)}))),[]),se(Se,{children:[se(mo,{fixedHeader:!0,noAppName:!0,noSearch:!0,noContent:s,appName:Wo,deps:[a],activeOptionPath:(null==e?void 0:e.sideMenu)||"",loading:o,options:$h,actions:Wh,onOptionClick:Lh,onOptionGroupClick:Lh,onTabChange:Vh,onLoadStart:Qh,onLoadEnd:eb,onAction:tb,BeforeSearch:Eh,onInit:Zh,BeforeMenuContent:ab,BeforeActionMenu:ib,children:[se(uo,{Loader:Jh,history:os.routerService,items:Ch,fallback:os.errorService.handleGlobalError,onLoadStart:Qh,onLoadEnd:eb,onInit:Zh}),se(Kh,{})]}),r&&se(Xh,{})]})},lb=se(So,{fontSize:"small"}),rb=se(zo,{fontSize:"small"}),nb=[],sb="#3F51B5",db=xo({palette:{mode:"light",primary:{main:sb},secondary:{main:"#2196F3"},warning:{main:"#d9822b"},info:{main:"#1070CA"},success:{main:"#27AB6E"},error:{main:"#ec4c47"},text:{primary:"#000000DE",secondary:"#00000099",disabled:"#cccccc"},background:{default:"#E8E9ED !important",paper:"#fff"}},components:{MuiAppBar:{styleOverrides:{root:{background:"#6974B0"}}},MuiTab:{styleOverrides:{fullWidth:{background:"#6974b066",color:"white !important",fontWeight:"bold"}}},MuiIconButton:{styleOverrides:{root:{borderRadius:6,padding:8},sizeSmall:{padding:4}}},MuiButton:{styleOverrides:{contained:{background:sb,"&:hover":{background:"#4E65C9"}}}},MuiBadge:{styleOverrides:{badge:{background:sb}}},MuiSnackbar:{styleOverrides:{root:{border:"1px solid black",borderRadius:"4px",boxShadow:"0 0 5px 2px grey","& > *":{color:"black !important"}}}}}}),cb=document.getElementById("root"),mb=Ao({key:"mui",prepend:!0}),ub=Ao({key:"tss"});To("bgcolor-red","background: rgb(255, 229, 229); color: rgb(255, 0, 0);"),To("bgcolor-green","background: rgb(240, 246, 236); color: rgb(112, 173, 71);"),To("text-spacer","display: inline-block; padding: 10px; visibility: hidden;"),To("text-underline","display: inline-block; text-decoration: underline;"),To("blank-link","display: inline-block; text-decoration: underline;",{onClick:e=>{const t=e.currentTarget.getAttribute("href");t&&Z(t)}});const pb=se(Ro,{history:os.routerService,onError:os.errorService.handleGlobalError,children:se(Fo,{value:mb,children:se(Co,{value:ub,children:se(Vo,{theme:db,children:se(Lo,{dateAdapter:Io,children:se(ds,{children:se(Mo,{Combo:({value:e,disabled:t,readonly:a,description:i="",placeholder:o="",outlined:l=!0,itemList:r=[],virtualListBox:n,watchItemList:s,labelShrink:d,noDeselect:c,freeSolo:m,title:u="",dirty:p,invalid:y,tr:h=(e=>e.toString()),onChange:b})=>{const{object:v}=ho(),_=bo(),[g,f]=re.useState((()=>({options:[],labels:{}}))),k=re.useRef(!1),w=vo([g],10),S=Ze(g.labels),z=re.useMemo((()=>{if("string"==typeof e)return e;const[t=null]=Object.values(e||{});return t}),[e]),{fallback:x}=_o(),{loading:A,execute:T}=Re((async e=>{const t={};r=go(r)||[];const a=[...new Set(Object.values("function"==typeof r?await Promise.resolve(r(e,_)):r))];await Promise.all(a.map((async a=>t[a]=await Promise.resolve(h(a,e,_))))),m&&z&&!a.includes(z)&&a.push(z),f({labels:t,options:a}),k.current=!0,await w()}),{fallback:x}),F=(e=>Object.values(e||{}).sort(((e,t)=>t.localeCompare(e))).join("-"))(z),C=re.useRef(null),V=re.useRef(!0);re.useEffect((()=>{if(!V.current){if(C.current===v)return;if(!s)return}C.current=v,V.current=!1,T(v)}),[F,t,p,y,v,a]);const L=(e,t)=>a=>se(ta,{...a,sx:{...!l&&{position:"relative",mt:1,"& .MuiFormHelperText-root":{position:"absolute",top:"100%"}}},variant:l?"outlined":"standard",placeholder:e?void 0:o,label:u,helperText:p&&y||i,error:p&&null!==y,InputProps:{...a.InputProps,readOnly:t,endAdornment:se(Se,{children:[e?se(wo,{color:"inherit",size:20}):null,a.InputProps.endAdornment]})},InputLabelProps:{...a.InputLabelProps,...d&&{shrink:!0}}}),I=(e,t,a)=>{const{current:i}=S;return se("li",{...e,children:[se(st,{icon:lb,checkedIcon:rb,style:{marginRight:8},checked:a.selected}),m?t:i[t]||"".concat(t," (unknown)")]})},M=e=>{const{current:t}=S;return m?e:t[e]||"".concat(e," (unknown)")};return A||!k.current?se(ko,{disableClearable:c,disabled:!0,loading:!0,value:null,options:nb,onChange:()=>null,freeSolo:m,ListboxComponent:n?fo:void 0,getOptionLabel:M,renderInput:L(!0,!0),renderOption:I}):se(ko,{disableClearable:c,loading:A,value:z||null,onChange:({},e)=>{var t;b((t=e)?[t]:null)},getOptionLabel:M,freeSolo:m,options:g.options,disabled:t,readOnly:a,ListboxComponent:n?fo:void 0,renderInput:L(!1,a),renderOption:I})},children:se(Bo,{FilterListSlot:Kt,children:se(Do,{children:se(Ph,{children:se(ob,{})})})})})})})})})})}),yb=jo(cb);qo.setValue({WITH_DIRTY_CLICK_LISTENER:!0,WITH_MOBILE_READONLY_FALLBACK:!0,WITH_WAIT_FOR_MOVE_LISTENER:!0,WITH_WAIT_FOR_TOUCH_LISTENER:!0,WITH_DISMOUNT_LISTENER:!0,WITH_SYNC_COMPUTE:!0,CUSTOM_FIELD_DEBOUNCE:800}),Ke.setAdjustHeight(25);(async()=>{for(;!window.Translate;)z(500);yb.render(pb)})();export{i as __vite_legacy_guard};
